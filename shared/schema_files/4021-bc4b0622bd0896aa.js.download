!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="6e693a72-6231-400f-94f1-c6d16302becc",e._sentryDebugIdIdentifier="sentry-dbid-6e693a72-6231-400f-94f1-c6d16302becc")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"fb92a7ad"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4021],{74:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9.713 4.077a8.25 8.25 0 0 1 10.07 5.173.75.75 0 1 0 1.414-.5A9.75 9.75 0 0 0 5.118 5.1L1.75 8.266V4a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h6a.75.75 0 0 0 0-1.5H2.893l3.26-3.063a8.25 8.25 0 0 1 3.56-2.11ZM23.75 14a.75.75 0 0 0-.75-.75h-6a.75.75 0 0 0 0 1.5h4.107l-3.26 3.063-.018.017a8.25 8.25 0 0 1-13.612-3.08.75.75 0 1 0-1.414.5A9.75 9.75 0 0 0 18.882 18.9l3.368-3.165V20a.75.75 0 0 0 1.5 0v-6Z",clipRule:"evenodd"})}))}},107:(e,n,t)=>{"use strict";t.d(n,{p:()=>c});var r=t(81073),i=t(18509),o=t(27023),a=t(36073),l=t(48604),s=(0,i.x)({root:[o.wp.zIndex(1),o.wp.flex.grow(0)]});function c(e){var n=e.isRapidBuildInProgress;return(0,r.Y)(a.N,{css:s.root,text:n?"This is a visual preview of your app. The agent is currently creating a fully interactive version.":"This is a visual preview of the approved plan.",icon:(0,r.Y)(l.A,{}),colorway:"blue",variant:"flush"})}},158:(e,n,t)=>{"use strict";t.d(n,{DB:()=>m,Ay:()=>v,mS:()=>g});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment CompleteCodeAuthorization on OrgAuthorizations {\n    useAdvancedModel: useAiModel(model: advanced) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(['\n  query CompleteCode($orgId: String) {\n    currentUser {\n      id\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...CompleteCodeAuthorization\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ...CompleteCodeAuthorization\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ',"\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u),p=t(50681),f=t(86891),h=t(55100),m=function(e){return e.None="None",e.Basic="Basic",e.Pro="Pro",e.BackendOnly="BackendOnly",e}({});function g(e){return"None"!==e&&"BackendOnly"!==e}function v(){var e,n,t,i,o,l,s=(0,h.A)(),u=(0,f.R)(s),m=u.orgId,g=u.loading,v=(e={variables:{orgId:m},skip:g},n=(0,r._)({},c,e),a.I(d,n)),y=v.data,w=v.loading,b=(0,p.f)().isTeamWithAiDisabled,S=null==y?void 0:y.currentUser;return!S||S.hasKillswitch||b||w||g?"None":m?(null==(t=y.currentUser)?void 0:t.org.__typename)==="Org"&&(null==(i=y.currentUser)?void 0:i.org.authorizations.useAdvancedModel.isAuthorized)?"Pro":"Basic":(null==(o=y.currentUser)?void 0:o.personalOrgAuthorizations.__typename)==="OrgAuthorizations"&&(null==(l=y.currentUser)?void 0:l.personalOrgAuthorizations.useAdvancedModel.isAuthorized)?"Pro":"Basic"}},336:(e,n,t)=>{"use strict";t.d(n,{AI:()=>u,Ou:()=>p,h:()=>c,ob:()=>d,rF:()=>l});var r=t(21462),i=t(79203),o=t(26325),a=t(94680),l=(0,r.createContext)(null);function s(){var e=(0,r.useContext)(l);if(!e)throw Error("Expected store in context");return e}function c(e){return(0,i.md)(e,{store:s()})}function u(e){return(0,a.k)(e,s())}var d=function(e){return(0,i.Xr)(e,{store:s()})};function p(e){return(0,o.yF)((0,r.useCallback)(function(n){return n(e)},[e]),{store:s()})}},491:(e,n,t)=>{"use strict";t.d(n,{f:()=>g});var r=t(81073),i=t(21462),o=t(45773),a=t(47701),l=t(66905),s=t(41594),c=t(37032),u=t(42793),d=t(27023),p=(0,u.AH)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),f=(0,u.AH)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),h={root:d.wp.backgroundColor.backgroundRoot,higher:d.wp.backgroundColor.backgroundHigher,highest:d.wp.backgroundColor.backgroundHighest,default:d.wp.backgroundColor.backgroundDefault},m=new c.k(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,o.$K)({formatNumber:function(n,t){for(var r=String(t.doc.lines).length,i=String(n+e-1);r>i.length;)i="\xa0"+i;return i}})});function g(e){var n=e.path,t=e.initialDoc,o=e.maxHeight,c=e.minHeight,d=e.extensions,g=e.allowScroll,v=e.fontSize,y=e.hideGutter,w=e.startLineNumber,b=e.style,S=e.elevation,Y=e.onNavigateToCode,_=(0,l.A)(),A=_.ref,C=_.view,k=(0,i.useMemo)(function(){var e;return e=h[null!=S?S:"default"],(0,u.AH)({".cm-editor":e,".cm-gutters":e})},[S]),x=m.use(w);return(0,r.Y)("div",{style:b,children:(0,r.Y)(a.Ay,{ref:A,initialDoc:t,css:[p,k,void 0===g||g?null:f],extensions:[x,void 0===d?[]:d],style:{minHeight:c,maxHeight:null!=o?o:"10em"},hideGutter:y,filePath:n,fontSize:v,readOnly:!0,onClick:function(e){if(Y&&C){var n=e.clientX,t=e.clientY,r=C.posAtCoords({x:n,y:t});Y(null!==r?(0,s.Z3)(C.state.doc,r):null)}}})})}},931:(e,n,t)=>{"use strict";t.d(n,{O:()=>_});var r=t(29935),i=t(12694),o=t(82643),a=t(81073),l=t(56962),s=t(17844),c=t(12584),u=t(41114),d=t(51026);function p(){var e=(0,c._)(["\n  query AiSessionDebugInfoCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(67917),g=t(1982),v=t(55100),y=t(70871),w=t(36937),b=t(83070),S=t(69762),Y=t(47434);function _(e){var n,t,c,u,p,_=e.sessionId,A=e.sessionType,C=(0,v.A)(),k=(0,g.A)().showConfirm,x=(n=_,t=A,u=(0,v.A)(),p=(0,i._)((c=(0,s._)({},f,void 0),d._(h,c)),1)[0],(0,r._)(function(){var e,r,i,a,l,s,c,d;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,p()];case 1:if(i=null==(r=o.sent())||null==(e=r.data)?void 0:e.currentUser,!n||!i)return[2,""];return a=(0,m.Yd)(n,t),l=(0,m.nv)(u,n),s=(0,m.Ds)(n),[2,"\n• User ID: ".concat(null!=(c=null==i?void 0:i.id)?c:"N/A","\n• Username: ").concat(null!=(d=null==i?void 0:i.username)?d:"N/A","\n• Repl ID: ").concat(null!=u?u:"N/A","\n• Session ID: ").concat(null!=n?n:"N/A","\n• \uD83D\uDD25 traceforge URL: ").concat(l,"\n• LangSmith URL: ").concat(null!=a?a:"N/A","\n• Temporal URL: ").concat(null!=s?s:"N/A","\n    ").trim()]}})}));return(0,a.Y)(S.in,{trigger:(0,a.Y)(b.K0,{alt:"[Staff] Debug tools",children:(0,a.Y)(Y.A,{color:w.LU.foregroundDimmer})}),children:(0,a.FD)(l.H9,{children:[(0,a.Y)(S.j,{text:"[Staff] Debug tools"}),(0,a.Y)(S.Dr,{label:"Copy debug info",onAction:(0,r._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:return[4,x()];case 1:return e=n.sent(),(0,y.default)(e),k("Copied debug info to clipboard"),[2]}})})}),(0,a.Y)(S.Dr,{href:(0,m.nv)(C,_),label:"Go to \uD83D\uDD25 traceforge",target:"_blank"}),(0,a.Y)(S.Dr,{href:(0,m.Yd)(_,A),label:"Go to LangSmith",target:"_blank"}),(0,a.Y)(S.Dr,{href:(0,m.Ds)(_),label:"Go to Temporal",target:"_blank"})]})})}},1017:e=>{e.exports={surface:"InputBox_surface__Zuciv",wrapper:"InputBox_wrapper__V9f3B",withFullWidthStatusBar:"InputBox_withFullWidthStatusBar__9kOzV",codemirror:"InputBox_codemirror__4ltuk",attachments:"InputBox_attachments__KUIFp",primaryButtonGroup:"InputBox_primaryButtonGroup__1lFia",submitButton:"InputBox_submitButton__oh9A_"}},1601:(e,n,t)=>{"use strict";t.d(n,{C:()=>l,R:()=>s});var r=t(12584),i=t(41114);function o(){var e=(0,r._)(["\n  fragment WorkspaceHeaderComputeAlertCurrentUser on CurrentUser {\n    id\n    userSubscriptionType\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderComputeAlertRepl on Repl {\n    id\n    owner {\n      __typename\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,i.J1)(o()),s=(0,i.J1)(a())},1749:e=>{e.exports={itemsReadLabel:"ItemsReadSection_itemsReadLabel__1KhHg",itemsReadCompactLabel:"ItemsReadSection_itemsReadCompactLabel__7dNFG",itemLabels:"ItemsReadSection_itemLabels__FugbQ",itemIcons:"ItemsReadSection_itemIcons__wVPKj",container:"ItemsReadSection_container__90Xjj"}},2099:(e,n,t)=>{"use strict";t.d(n,{E:()=>d});var r=t(17844),i=t(81073),o=t(66890),a=t(83603),l=t(15493),s=t(85389),c=t(97153),u=t(33616);function d(e){var n=e.onClick,t=(0,a.ET)(),d=t.orgRole,p=t.orgId,f=t.orgSlug;switch(d){case o.v7i.SystemAdmins:return(0,i.Y)(s.S,{p:8,children:(0,i.Y)(l.d,(0,r._)({iconLeft:(0,i.Y)(c.A,{}),text:"Your team has a failed payment. Please update your team's payment method to continue using AI services.",colorway:"negative",onClick:null!=n?n:function(){}},!n&&{href:"/orb-customer-portal/org/".concat(p),target:"_blank"}))});case o.v7i.SystemMembers:case o.v7i.SystemGuests:case o.v7i.SystemViewers:return(0,i.Y)(s.S,{p:8,children:(0,i.Y)(l.d,(0,r._)({iconLeft:(0,i.Y)(u.A,{}),text:"Your team has a failed payment. Please contact your team admins to address outstanding invoices to continue using AI services.",colorway:"negative",onClick:null!=n?n:function(){}},!n&&{href:"/t/".concat(f,"/members"),target:"_blank"}))});default:return(0,i.Y)(s.S,{p:8,children:(0,i.Y)(l.d,(0,r._)({iconLeft:(0,i.Y)(c.A,{}),text:"You have a failed payment. Please update your payment method to continue using AI services.",colorway:"negative",onClick:null!=n?n:function(){}},!n&&{href:"/account#billing",target:"_blank"}))})}}},2285:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(29935),i=t(82643),o=t(26072),a=t(14596);function l(e){var n=e.container,t=e.dotReplit,l=(0,o.F)(null),s=(0,o.F)(null),c=(0,o.F)(null),u=(0,o.F)(null),d=null;function p(){return u.current?Promise.resolve(u.current):new Promise(function(e){var n=u.subscribe(function(t){t&&(n(),e(t))})})}return n.openChannel({service:"toolchain"},function(e){var n=e.channel;u.set(n);var t=n.onCommand(function(e){if(e.toolchainChanged){if(!e.toolchainChanged.configs)throw Error("Expected toolchain changed configs");l.current=e.toolchainChanged.configs}else if(e.nixModulesChanged){if(!e.nixModulesChanged.modules)throw Error("Expected modules changed modules");s.current=e.nixModulesChanged.modules,c.current=e.nixModulesChanged.modulesV2}});return n.request({toolchainGetRequest:{}}).then(function(e){var n;l.current=(null==(n=e.toolchainGetResponse)?void 0:n.configs)||null}),n.request({nixModulesGetRequest:{}}).then(function(e){var n;s.current=(null==(n=e.nixModulesGetResponse)?void 0:n.modules)||null}),n.request({nixModuleConfigGetRequest:{}}).then(function(e){var n;c.current=(null==(n=e.nixModuleConfigGetResponse)?void 0:n.modules)||null}),function(){t()}}),{configs:l,modules:s,moduleConfig:c,getConfigs:function(){return l.current?Promise.resolve(l.current):new Promise(function(e){var n=l.subscribe(function(t){if(n(),null===t)throw Error("Returned toolchain config should not be null");e(t)})})},getRegistry:function(){return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:if(d)return[2,d];return[4,p()];case 1:return[4,e.sent().request({nixModulesGetRegistryRequest:{}})];case 2:return[2,d=e.sent().nixModulesGetRegistryResponse||null]}})})()},getModuleConfig:function(){return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return[4,e.sent().request({nixModuleConfigGetRequest:{}})];case 2:return[2,e.sent().nixModuleConfigGetResponse||null]}})})()},setModuleConfig:function(e){return(0,r._)(function(){return(0,i.YH)(this,function(n){switch(n.label){case 0:return[4,p()];case 1:return[4,n.sent().request({nixModuleConfigSetRequest:{modules:e}})];case 2:return[2,n.sent().nixModuleConfigSetResponse||null]}})})()},addModule:function(e){return(0,r._)(function(){var n,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.DO.NotFound)throw Error("Failed to read .replit"+o.error);if(-1!==(r=(null==(n=o.config)?void 0:n.modules)||[]).indexOf(e))return[3,3];return r.push(e),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(r)}])];case 2:i.sent(),i.label=3;case 3:return[2]}})})()},removeModule:function(e){return(0,r._)(function(){var n,r,o,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.DO.NotFound)throw Error("Failed to read .replit"+o.error);if((l=(r=(null==(n=o.config)?void 0:n.modules)||[]).filter(function(n){if(e===n)return!1;var t=n.match(/^(.+)\.nix$/);return(t&&t[1])!==e})).length===r.length)return[2];return[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}})})()},upgradeModule:function(e,n){return(0,r._)(function(){var r,o,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.DO.NotFound)throw Error("Failed to read .replit"+o.error);return l=((null==(r=o.config)?void 0:r.modules)||[]).map(function(t){return e===t?n:t}),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}})})()},buildModules:function(){var e=this;return(0,r._)(function(){var n;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,p()];case 1:return n=t.sent(),[2,new Promise(function(t){var r=e.configs.subscribe(function(e){e&&(r(),t(void 0))});n.send({nixModulesBuildRequest:{}})})]}})})()}}}},2511:(e,n,t)=>{"use strict";t.d(n,{L:()=>i,Y:()=>r});var r=(0,t(26072).F)(null);function i(e,n,t){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();Array.isArray(e)||(e=[e]);var a=null!=(i=n.output)?i:"",l=n.error,s=t?o:Date.now(),c="".concat(o,"-").concat(Math.random());r.set({input:e,output:a,error:l,start:o,end:s,cached:t,key:c})}},2522:(e,n,t)=>{"use strict";t.d(n,{P:()=>k3});var r,i,o,a,l,s,c,u,d,p,f=t(81073),h=t(684),m=t(37299),g=t(83846),v=t(12694),y=t(21462),w=t(29935),b=t(82643),S=t(67917),Y=t(202),_=t(24052),A=t(71424),C=t(480),k=t(56262),x=t(66169),D=t(73176),E=t(18069),R=t(46434),I=t(8950),T=t(17341),F=t(71355),P=t(55100),L=t(70871),U=t(73205),N=t(36937),O=t(38692),M=t(11769),H=t(11938),B=t(40259),z=t(24928),W=t(1684),G=t(52637),V=t(4616),Z=t(78626),j=t(85389),q=t(41526),K=t(49748),$=t(61590),J=t(33616);function Q(){return(0,f.Y)(X,{sessionType:I.dF3.CHAT})}function X(e){var n,t,r=e.sessionType,i=(0,S.NC)(),o=(0,P.A)(),a=(0,D.Rj)(function(){return i.sessions.query({types:[r]}).list},[i,r],{default:[]}),l=(0,v._)((0,y.useState)(null!=(t=null==(n=a[0])?void 0:n.id)?t:null),2),s=l[0],c=l[1],u=(0,D.Rj)(function(){return s?i.sessions.get(s):null},[s,i]),d=(0,D.Rj)(function(){return null==u?void 0:u.transform({direction:"reverse",state:{},transformer:function(e){return e}},1e3)},[u]),p=(0,v._)((0,y.useState)(void 0),2),h=p[0],m=p[1],g=(0,y.useCallback)((0,w._)(function(){var e,n,t,r,i,o,a,l,s;return(0,b.YH)(this,function(c){switch(c.label){case 0:if(!d||!u)return[2];return e=[],[4,u.data.once()];case 1:n=c.sent(),t=!1,r=!1,c.label=2;case 2:c.trys.push([2,8,9,14]),o=(0,R._)(d),c.label=3;case 3:return[4,o.next()];case 4:if(!(t=!(a=c.sent()).done))return[3,7];return[4,a.value[1].once()];case 5:l=c.sent(),e.push(l),c.label=6;case 6:return t=!1,[3,3];case 7:return[3,14];case 8:return s=c.sent(),r=!0,i=s,[3,14];case 9:if(c.trys.push([9,,12,13]),!(t&&null!=o.return))return[3,11];return[4,o.return()];case 10:c.sent(),c.label=11;case 11:return[3,13];case 12:if(r)throw i;return[7];case 13:return[7];case 14:return(0,L.default)(JSON.stringify({session:n,events:e},null,2)),[2]}})}),[d,u]),Y=(0,y.useCallback)(function(){if(s&&o){var e=(0,S.nv)(o,s);(0,L.default)(e)}},[s,o]);return(0,f.Y)(f.FK,{children:(0,f.FD)(j.S,{gap:8,py:8,children:[(0,f.Y)(G.l,{"aria-label":"Select a session",placeholder:"Select a session",selectedKey:s,onSelectionChange:function(e){"string"==typeof e&&c(e)},children:a.map(function(e){return(0,f.Y)(en,{session:e},e.id)})}),u?(0,f.FD)(f.FK,{children:[(0,f.Y)(ee,{session:u}),(0,f.Y)(j.S,{children:(0,f.Y)(B.pd,{placeholder:"Filter events by kind, tool, etc.",value:h,onChange:function(e){return m(e.target.value)}})}),(0,f.FD)(j.S,{row:!0,gap:8,children:[(0,f.Y)(M.$n,{text:"Copy as JSON",onClick:g,iconLeft:(0,f.Y)(q.A,{})}),(0,f.Y)(M.$n,{text:"Copy traceforge link",onClick:Y,iconLeft:(0,f.Y)(K.A,{})})]})]}):null,(0,f.Y)(j.S,{children:null==d?void 0:d.map(function(e){var n=(0,v._)(e,2),t=n[0],r=n[1];return(0,f.Y)(et,{event:r,eventKindFilter:h},t)})})]})})}function ee(e){var n=(0,D.J2)(e.session.data);return(0,f.Y)(O.A,{headerContent:(0,f.Y)(V.EY,{children:"Session data"}),children:(0,f.Y)(x.A,{code:JSON.stringify(n,null,2),language:"json"})})}function en(e){var n=(0,D.J2)(e.session.data);return(0,f.Y)(z.nh,{id:e.session.id,label:(null==n?void 0:n.title)||"untitled"})}function et(e){var n=(0,D.J2)(e.event);return n?!function(e,n){if(!n)return!0;var t=n.toLowerCase(),r=!1,i=null==e||null==(a=e.contents)||null==(o=a.contents)?void 0:o.$kind.toLowerCase();if(i&&(r=r||i.includes(t)),(0,T.TW)(e,"agentTimelineEventContents")){var o,a,l,s,c,u=(0,F.QN)(e.contents.contents),d=null==(l=u.toolName)?void 0:l.toLowerCase(),p=null==(c=u.toolData)||null==(s=c.$kind)?void 0:s.toLowerCase();d&&(r=r||d.includes(t)),p&&(r=r||p.includes(t))}return r}(n,e.eventKindFilter)?null:(0,f.Y)(j.S,{children:(0,f.Y)(O.A,{headerContent:(0,f.FD)(j.S,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[(0,f.Y)(ei,{sender:n.sender.type}),(0,f.Y)(er,{event:n}),(0,f.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",grow:!0,shrink:!0,children:[(0,f.Y)(V.EY,{children:function(e){var n=null==(r=e.contents)||null==(t=r.contents)?void 0:t.$kind;if(!n)return"Unknown event";if("agentTimelineEventContents"===n){var t,r,i,o=(0,F.QN)(e.contents.contents),a=o.toolName;return a?a:null==(i=o.toolData)?void 0:i.$kind}return n.replace("Contents","").replace("Event","")}(n)}),(0,f.FD)(j.S,{row:!0,gap:4,align:"center",shrink:!0,children:[(0,f.Y)(j.S,{shrink:!0,children:(0,f.Y)(V.EY,{variant:"small",color:"dimmer",multiline:!1,children:n.id})}),(0,f.Y)(H.r,{size:24,textToCopy:n.id,tooltipSuccessText:"Copied to clipboard"})]})]})]}),children:(0,f.Y)(x.A,{code:JSON.stringify(n,null,2),language:"json"})})}):(0,f.Y)(j.S,{children:"No data found for event"})}function er(e){var n=e.event;if((0,T.TW)(n,"agentTimelineEventContents")){var t,r=null==(t=(0,F.QN)(n.contents.contents).toolData)?void 0:t.$kind;return(0,f.Y)(U.u,{color:N.LU.foregroundDimmer,kind:r})}return null}function ei(e){return(0,f.Y)(Z.m_,{tooltip:e.sender===I.utd.AI?"Sent by AI":"Sent by user",children:(0,f.Y)(W.a,{variant:"filled",colorway:e.sender===I.utd.AI?"blurple":"green",text:e.sender===I.utd.AI?(0,f.Y)($.A,{color:N.LU.blurpleStrongest}):(0,f.Y)(J.A,{color:N.LU.greenStrongest})})})}var eo=t(18509),ea=t(27023),el=t(98661);function es(){var e=(0,Y.nt)(),n=(0,k.Sx)(),t=(0,(0,S.dm)().getAssistantMessageModel)({isAuthorized:!0}),r=(0,A.A)(),i=r.fs,o=r.dotReplit,a=(0,C.P)(i,o),l=(0,v._)((0,y.useState)(null),2),s=l[0],c=l[1];return(0,y.useEffect)(function(){var r=!1;function i(){return(i=(0,w._)(function(){var i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,a({modelType:t,filePreferences:e,recentFiles:n()})];case 1:if(i=o.sent(),r)return[2];return c(i),[2]}})})).apply(this,arguments)}return!function(){i.apply(this,arguments)}(),function(){r=!0}},[n,e,t,a]),(0,f.Y)(_.A,{json:s})}var ec={"Agent Events":function(){return(0,f.Y)(X,{sessionType:I.dF3.AGENT_SESSION})},"Agent State":function(){var e=(0,E.C9)().agentState,n=(0,D.J2)(e);return(0,f.Y)(x.A,{code:JSON.stringify(n,null,2),language:"json"})},"Assistant Events":Q,"File Context":es},eu={"Assistant Events":Q,"File Context":es},ed=(0,eo.x)({wrapper:[(r={},(0,g._)(r,"& > div",[ea.wp.flex.growAndShrink(1),ea.wp.overflowY("auto"),ea.wp.colWithGap(4)]),(0,g._)(r,"& > div > div:first-of-type",[ea.wp.flex.shrink(1),ea.wp.overflowY("auto")]),(0,g._)(r,"& > div > div:last-of-type",[ea.wp.flex.growAndShrink(1),ea.wp.overflowY("auto")]),r)]}),ep=t(29757),ef=t(8017),eh=t(87720),em=t(86105),eg=t(17844),ev=t(12584),ey=t(41114),ew=t(86997);function eb(){var e=(0,ev._)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return eb=function(){return e},e}var eS={},eY=(0,ey.J1)(eb()),e_=t(49022),eA=t(2511),eC=t(27503),ek=t(41358);function ex(e){var n=e.event,t=n.input,r=n.output,i=n.error,o=n.start,a=n.end,l=n.cached,s=(0,v._)((0,y.useState)(!0),2),c=s[0],u=s[1],d=(0,y.useCallback)(function(){return u(function(e){return!e})},[]),p="bash"===t[0]&&"-c"===t[1]?t.slice(2).join(" "):t.join(" "),h=r.trimEnd();return(0,f.FD)(j.S,{css:[(0,eC.Li)(i?"negative":"positive"),l?{opacity:.75}:void 0,ea.wp.borderRadius(8)],children:[(0,f.FD)(j.S,{onClick:d,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&d()},tabIndex:0,css:[ea.wp.font.code,ea.wp.cursor.pointer],py:4,px:8,row:!0,gap:4,justify:"space-between",children:[(0,f.FD)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",p]}),(0,f.FD)("span",{css:[ea.wp.color.foregroundDimmer,ea.wp.flex.shrink(0)],children:[i?(0,f.Y)("span",{css:[ea.wp.mr(16)],children:i}):null,l?(0,f.Y)("span",{children:"CACHED"}):(0,f.FD)("span",{children:[a-o," ms"]})]})]}),c?null:(0,f.Y)(j.S,{css:[ea.wp.borderRadius(0,0,8,8)],px:2,pb:2,children:(0,f.Y)(ek.ui,{elevated:!0,css:[ea.wp.borderRadius(8)],p:8,children:(0,f.Y)(x.A,{code:h})})})]})}var eD=t(20632),eE=t(59512),eR=t(21996),eI=t(22089),eT=t(64347);function eF(e){var n=e.t,t=e.children;return(0,f.FD)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,f.FD)(V.EY,{css:{minWidth:"8em"},multiline:!1,children:[n,":"," "]}),(0,f.Y)("span",{children:t})]})}var eP=t(4880),eL=t(38340),eU=t(64761),eN=t(83070),eO=t(37582),eM=t(54148),eH=(0,eo.x)({container:[ea.wp.height("100%"),ea.wp.position.relative],controls:[ea.wp.backgroundColor.backgroundDefault]}),eB=(0,eo.x)({in:[ea.wp.color.greenStrongest],out:[ea.wp.color.redStrongest],error:[ea.wp.color.magentaStrongest]}),ez=[ea.wp.flex.row,ea.wp.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],eW=(0,eo.x)({clickable:(0,em._)(ez),clickableHighlighted:(0,em._)(ez).concat([ea.wp.backgroundColor.accentPositiveDimmer]),inner:[ea.wp.maxWidth("100%")],log:[ea.wp.flex.growAndShrink(1),{opacity:.5}],row:[ea.wp.my(4),ea.wp.mx(4)],timestamp:[ea.wp.fontSize(13),{cursor:"pointer"}]});function eG(e){var n,t=e.log,r=e.filters,i=e.timeRef,o=e.setTimeRef,a=(0,y.useMemo)(function(){return r.highlightOnly&&(0,eL.jQ)(t,r)},[r,t]),l=null!=(n=t.cmd.channel)?n:0,s=(0,y.useMemo)(function(){var e=(0,eg._)({},t.cmd);return delete e.channel,{cleaned:e,formatted:JSON.stringify(e,null,2)}},[t]),c=i?t.timestamp-i:t.timestamp,u=(0,v._)((0,eE.A)(!0),2),d=u[0],p=u[1];return(0,f.FD)(j.S,{css:eW.row,children:[(0,f.Y)(j.S,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:a?eW.clickableHighlighted:eW.clickable,children:(0,f.FD)(j.S,{css:eW.inner,grow:!0,row:!0,gap:4,children:[(0,f.Y)(V.EY,{className:"icon",multiline:!1,children:"in"===t.dir?(0,f.Y)(j.S,{css:eB.in,children:"→"}):"out"===t.dir?(0,f.Y)(j.S,{css:eB.out,children:"←"}):(0,f.Y)(j.S,{css:eB.error,children:"⚠"})}),(0,f.Y)(V.EY,{className:"link",multiline:!1,children:(0,f.FD)("code",{children:["#",l," - ",t.channel.service,t.channel.name?"::".concat(t.channel.name):""]})}),(0,f.Y)(V.EY,{css:eW.log,multiline:!1,children:(0,f.Y)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:s.formatted})}),null!=c&&(0,f.Y)(j.S,{style:{opacity:.5},onClick:function(){o(t.timestamp)},children:(0,f.Y)(V.EY,{css:eW.timestamp,multiline:!1,children:t.timestamp===i?"(reference)":(0,f.FD)(f.FK,{children:[c.toFixed(0)," ms"]})})})]})}),!d&&(0,f.Y)(f.FK,{children:void 0!==s.cleaned&&(0,f.Y)(eU.U,{name:"cmd",src:s.cleaned})})]})}var eV=(0,eo.x)({listContainer:[ea.wp.position.relative,ea.wp.height("100%")],listScroller:[ea.wp.overflow("auto"),ea.wp.coverContainer],listBox:[ea.wp.width("100%"),ea.wp.position.relative],listItem:[ea.wp.position.absolute,ea.wp.top(0),ea.wp.left(0),ea.wp.width("100%")]}),eZ=(0,y.memo)(function(e){var n=e.logs,t=e.filters,r=e.timeRef,i=e.setTimeRef,o=(0,y.useRef)(null),a=(0,eP.Te)({count:n.length,getScrollElement:function(){return o.current},getItemKey:function(e){return n[e].id},estimateSize:function(){return 30},overscan:10});return(0,f.Y)("div",{css:eV.listContainer,children:(0,f.FD)("div",{ref:o,css:eV.listScroller,children:[(0,f.Y)("div",{css:eV.listBox,style:{height:"".concat(a.getTotalSize(),"px")},children:a.getVirtualItems().map(function(e){var o=e.index,l=e.key,s=e.start,c=n[o];return c?(0,f.Y)("div",{"data-index":o,ref:a.measureElement,css:eV.listItem,style:{transform:"translateY(".concat(s,"px)")},children:(0,f.Y)(eG,{log:c,filters:t,timeRef:r,setTimeRef:i})},l.toString()):null})}),(0,f.Y)("div",{className:"bottom-anchor"})]})})}),ej=function(e){var n=e.filters,t=e.updateFilters;return(0,f.FD)(j.S,{gap:4,children:[(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,f.Y)(B.pd,{id:"regex",onChange:function(e){var n=null;if(e.currentTarget.value){var r=(0,v._)(e.currentTarget.value.split(","),2),i=r[0],o=r[1];try{n=new RegExp(i,o)}catch(e){}}t({regexp:n})},placeholder:"\\w+,gi"}),(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Channel (comma separated ids, clear to reset)"}),(0,f.Y)(B.pd,{id:"channels",onChange:function(e){t({channels:e.currentTarget.value.split(",").map(function(e){return e.trim()}).map(Number).filter(function(e){return!isNaN(e)})})},placeholder:"1,2,3"}),(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,f.Y)(eO.z,{css:ea.wp.rowWithGap(16),name:"direction",value:n.direction,onChange:function(e){var n=e.target.value;t({direction:"in"===n||"out"===n||""===n?n:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map(function(e){return(0,f.FD)(j.S,{row:!0,gap:8,children:[(0,f.Y)(eO.s,{id:e.val,value:e.val}),(0,f.Y)("label",{htmlFor:e.val,children:e.text})]},e.val)})}),(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,f.Y)(eO.z,{css:ea.wp.rowWithGap(16),name:"filter-style",value:n.highlightOnly?"highlight":"filter",onChange:function(e){return t({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map(function(e){return(0,f.FD)(j.S,{row:!0,gap:8,children:[(0,f.Y)(eO.s,{id:e.val,value:e.val}),(0,f.Y)("label",{htmlFor:e.val,children:e.text})]},e.val)})})]})},eq=t(78094),eK=t(79361),e$=(0,eo.x)({root:{height:"100%",overflow:"auto",padding:10,pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},command:[ea.wp.flex.shrink(1)]}),eJ=t(20221),eQ=t(30908),eX=t(45314),e0=t(76957),e1=t(79203),e2=(0,e0.eU)(null),e4=(0,e0.eU)(null),e5=function(){var e=(0,e1.Xr)(e2),n=(0,e1.Xr)(e4);return(0,y.useCallback)(function(t){if(!t){e(null),n(null);return}e({id:-1,connectionString:t,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,isEphemeral:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase",maxComputeUnits:1,minComputeUnits:1,historyRetentionSeconds:86400,timeCreated:new Date().toString(),type:"development"}),n(t)},[n,e])},e3=t(82897),e7=t(95570),e6=t(71666),e8=t.n(e6),e9=t(53522),ne=t(38674),nn=t(33090),nt=t(98679),nr=t(11709),ni="(click to upload dev build)",no=(0,e0.eU)(["IDLE","pid2 running latest prod ".concat(ni)]);function na(e,n){return nl.apply(this,arguments)}function nl(){return(nl=(0,w._)(function(e,n){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,e.exec("printenv","REPL_HOME")];case 1:if((t=o.sent()).error||!t.output)return n("IDLE","could not printenv REPL_HOME"),[2,null];return r=t.output.trim(),i=e8().join(r,".local/bin/pid2"),[2,{REPL_HOME:r,pid2BinDst:"/home/runner/bin/pid2",pid2BinDst2:i}]}})})).apply(this,arguments)}function ns(){return(ns=(0,w._)(function(e,n,t){var r,i,o,a,l,s,c,u,d,p,f,h,m,g;return(0,b.YH)(this,function(v){switch(v.label){case 0:return[4,(0,nr.E)()];case 1:if("dev"===(o=v.sent()))return t("IDLE","dev is not a version we can upload to the container"),[2];return[4,function(e,n,t,r){return nc.apply(this,arguments)}(o,e,n,t)];case 2:return v.sent(),[4,na(e,t)];case 3:if(!(a=v.sent()))return[2];return l=e8().join(a.REPL_HOME,".cache/replit/pid2/".concat(o)),s=e8().join(l,"pid2"),[4,e.exec("stat","-c","%N",a.pid2BinDst)];case 4:return c=v.sent(),[4,e.exec("stat","-c","%N",a.pid2BinDst2)];case 5:if(u=v.sent(),!c.error&&(null==(r=c.output)?void 0:r.includes(s))&&!u.error&&(null==(i=u.output)?void 0:i.includes(s)))return t("IDLE","pid2 version ".concat(o," already exists in container ").concat(ni)),[2];return d=e8().dirname(a.pid2BinDst),[4,e.exec("mkdir","-p",d)];case 6:if((p=v.sent()).error)throw Error("pid2: mkdir ".concat(d,": ").concat(p.error));return[4,e.exec("ln","-sf",s,a.pid2BinDst)];case 7:if((f=v.sent()).error)throw Error("pid2: link ".concat(a.pid2BinDst,": ").concat(f.error));return h=e8().dirname(a.pid2BinDst2),[4,e.exec("mkdir","-p",h)];case 8:if(v.sent().error)throw Error("pid2: mkdir ".concat(h,": ").concat(p.error));return[4,e.exec("ln","-sf",s,a.pid2BinDst2)];case 9:if(m=v.sent(),f.error)throw Error("pid2: link ".concat(a.pid2BinDst2,": ").concat(m.error));return t("RESTARTING","pid2 version ".concat(o," installed, restarting pid2")),[4,e.exec("bash","-c","kill -9 $(pidof pid2)")];case 10:return(g=v.sent()).error&&t("ERROR","pid2: couldn't kill ".concat(g.error)),t("IDLE","pid2 version ".concat(o," installed ").concat(ni)),[2]}})})).apply(this,arguments)}function nc(){return(nc=(0,w._)(function(e,n,t,r){var i,o,a,l,s,c,u,d,p,f;return(0,b.YH)(this,function(h){switch(h.label){case 0:return i=e8().join(ne.Dl,".cache/replit/pid2/".concat(e)),o=e8().join(i,"success"),[4,t.stat(o)];case 1:if((a=h.sent()).exists&&a.type===nn.pt.File)return[2];return r("UPLOADING","pid2: uploading version ".concat(e," to container...")),[4,fetch("/pid2/bundle")];case 2:if(!(l=h.sent()).ok)throw Error("Error fetching PID2 bundle: ".concat(l.statusText));if(!l.body)throw Error("Error fetching PID2 bundle: ".concat(l));return[4,l.arrayBuffer()];case 3:return s=h.sent(),c=".cache/replit/pid2/pid2-".concat(e,".tar.gz"),[4,t.writeFile(c,e9.A.from(s))];case 4:if((u=h.sent()).error)throw Error("pid2: writing tarball: ".concat(u.error));return[4,n.exec("mkdir","-p",i)];case 5:if((d=h.sent()).error)throw Error("pid2: mkdir: ".concat(d.error));return[4,n.exec("tar","-C",i,"-xf",c)];case 6:if((p=h.sent()).error)throw Error("pid2: untar: ".concat(p.error));return[4,t.writeFile(e8().join(i,"pid2.version"),e)];case 7:if((f=h.sent()).error)throw Error("pid2: writeVersion: ".concat(f.error));return[4,n.exec("touch",o)];case 8:return h.sent(),[4,n.exec("rm","-f",c)];case 9:return h.sent(),r("UPLOADED","pid2: ".concat(e," upload success")),[2]}})})).apply(this,arguments)}var nu=t(62721),nd=t(82112),np=t(95570),nf=(0,eo.x)({uploadMessage:[ea.wp.flex.growAndShrink(1),ea.wp.width("100%"),ea.wp.font.code]}),nh=t(93629),nm=t(22531),ng=t(49069),nv=t(45773),ny=t(68866),nw=t(34570),nb=t(47701),nS=t(21309),nY=t(66905),n_=t(37032),nA=t(93188),nC=t(39159);function nk(e){var n=(0,v._)((0,y.useState)(null),2),t=n[0],r=n[1],i=(0,D.J2)(e.logs),o=null!==t?i[i.length-t-1]:null,a=(0,nY.A)(),l=a.ref,s=a.view;(0,y.useEffect)(function(){s&&s.dispatch({changes:{from:0,to:s.state.doc.length,insert:o?o.data:""}})},[o,s]);var c=(0,y.useRef)(t);return(0,y.useEffect)(function(){c.current=t},[t]),(0,y.useEffect)(function(){return e.logs.subscribe(function(e){var n=c.current;(null===n||e.length-2===n)&&r(e.length-1)})},[e.logs]),(0,f.FD)(j.S,{css:nL.response,grow:!0,shrink:!0,row:!0,gap:0,children:[(0,f.FD)(j.S,{css:nL.responseL,children:[(0,f.Y)(j.S,{css:nL.logHeader,align:"start",justify:"center",children:o?null==o?void 0:o.name:null}),(0,f.Y)(j.S,{css:nL.logData,children:(0,f.Y)(nb.Ay,{ref:l,language:"json",readOnly:!0})})]}),(0,f.FD)(j.S,{css:nL.responseR,children:[(0,f.Y)(j.S,{css:nL.logsHeader,children:(0,f.Y)(M.$n,{size:"small",text:"Clear",disabled:!i.length,onClick:e.onClear})}),(0,f.Y)(j.S,{css:nL.logsList,children:i.map(function(e,n){var o=i.length-n-1;return(0,f.Y)("code",{role:"button",tabIndex:0,className:t===o?"selected":void 0,onClick:function(){r(o)},onKeyDown:function(e){"Enter"===e.key&&r(o)},children:e.name},o)})})]})]})}var nx=ng.Pe.define(),nD=ng.Pe.define(),nE=ng.Pe.define(),nR=nv.Lz.theme({"&":{border:"1px solid ".concat(N.LU.outlineDefault),height:"225px"},"& .cm-panels":{backgroundColor:"unset"},"& .cm-panels.cm-panels-bottom":{borderTop:"1px solid ".concat(N.LU.outlineDefault)}}),nI=new n_.k(function(e,n){return[nR,ng.sU.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.is(nx)&&(e=l.value),l.is(nE)&&(e=null)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(t){return[nv.Z9.define(function(){var t,r,i=new AbortController;return{update:(t=(0,w._)(function(t){var o,a,l,s,c,u,d,p,f,h,m,g,v,y,w,S,Y,_,A,C,k,x,D,E,I,T,F,P,L,U,N,O,M,H;return(0,b.YH)(this,function(b){switch(b.label){case 0:if(!e)return[2];o=void 0,a=!0,l=!1,s=void 0;try{for(c=t.transactions[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){d=u.value,p=!0,f=!1,h=void 0;try{for(m=d.effects[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var B;(v=g.value).is(nx)&&v.value&&(o=v.value),v.is(nD)&&(null==r||r.write((B=v.value,JSON.parse(B,function(e,n){return(void 0===n?"undefined":(0,nm._)(n))==="object"&&"Uint8Array"===n.type&&void 0!==n.data?new Uint8Array(n.data):n})))),v.is(nE)&&i.abort()}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}}}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}if(!o)return[2];switch(y=o.service,w=o.procedure,S=o.type,Y=e.client[y][w][S],_=void 0,A=1,o.type){case"rpc":return[3,1];case"stream":return[3,3];case"subscribe":return[3,5];case"upload":return[3,7]}return[3,9];case 1:case 5:return[4,Y(o.input,{signal:i.signal})];case 2:return C=b.sent(),n({name:"".concat(y,".").concat(w,".").concat(S,".").concat(A),data:nT(C)}),t.view.dispatch({effects:nE.of(null)}),[3,9];case 3:return[4,Y(null!=(k=o.input)?k:void 0,{signal:i.signal})];case 4:return D=(x=b.sent()).reqWritable,E=x.resReadable,r=D,_=E,[3,9];case 6:return _=b.sent().resReadable,[3,9];case 7:return[4,Y(null!=(I=o.input)?I:void 0,{signal:i.signal})];case 8:return F=(T=b.sent()).reqWritable,T.finalize,r=F,[3,9];case 9:if(!_)return[3,22];P=!1,L=!1,b.label=10;case 10:b.trys.push([10,15,16,21]),N=(0,R._)(_),b.label=11;case 11:return[4,N.next()];case 12:if(!(P=!(O=b.sent()).done))return[3,14];M=O.value,n({name:"".concat(y,".").concat(w,".").concat(S,".").concat(A),data:nT(M)}),A++,b.label=13;case 13:return P=!1,[3,11];case 14:return[3,21];case 15:return H=b.sent(),L=!0,U=H,[3,21];case 16:if(b.trys.push([16,,19,20]),!(P&&null!=N.return))return[3,18];return[4,N.return()];case 17:b.sent(),b.label=18;case 18:return[3,20];case 19:if(L)throw U;return[7];case 20:return[7];case 21:t.view.dispatch({effects:nE.of(null)}),b.label=22;case 22:return[2]}})}),function(e){return t.apply(this,arguments)})}}),nv.Lz.editable.from(t,function(e){return(null==e?void 0:e.type)!=="rpc"&&(null==e?void 0:e.type)!=="subscribe"}),nw.x.compute([t,"doc"],function(e){var n,r;return e.doc.length?null:(null==(n=e.field(t))?void 0:n.type)==="stream"||(null==(r=e.field(t))?void 0:r.type)==="upload"?{from:0,insert:"{\n   # ... input data\n}"}:{from:0,insert:'{\n  "service_name": {\n    "procedure_name": {\n      "rpc" | "stream" | "subscribe" | "upload": {\n        # ... init/input data\n      }\n    }\n  }\n}'}}),nv.w4.of([{key:"Tab",run:function(e){var n;return!e.state.doc.length&&(e.dispatch({changes:null!=(n=e.state.facet(nw.x)[0])?n:void 0}),!0)}}]),nv.S7.of(function(n){var r=function(){if(e){var t=nP(n.state.doc.toString());if(t){var r=t.type,i=t.service,o=t.procedure,a=t.input;r&&i&&o&&n.dispatch({effects:nx.of({type:r,service:i,procedure:o,input:a}),changes:"stream"===r||"upload"===r?{from:0,to:n.state.doc.length,insert:""}:void 0})}}},i=function(){n.dispatch({effects:nD.of(n.state.doc.toString()),changes:{from:0,to:n.state.doc.length,insert:""}})},o=function(){var r,i=n.state.field(t),o=new Set,a=n.state.doc.toString();return e&&i&&"rpc"!==i.type&&(o.add("Close"),("stream"===i.type||"upload"===i.type)&&a.startsWith("{")&&a.endsWith("}")&&o.add("Send")),e&&!i&&a.length&&(o.add("Clear"),(null==(r=nP(a))?void 0:r.type)&&o.add("Send")),o},a=nN.create({enabled:o(),onSend:function(){null==n.state.field(t)?r():i(),n.focus()},onClose:function(){n.dispatch({effects:[nE.of(null),nx.of(null)],changes:{from:0,to:n.state.doc.length,insert:""}})},onClear:function(){n.dispatch({changes:{from:0,to:n.state.doc.length,insert:""}}),n.focus()}});return{dom:a,top:!1,update:function(e){if((0,ny.$H)(e,t,"doc")){var n=e.state.field(t);nN.update(a,function(e){return(0,nh._)((0,eg._)({},e),{enabled:o(),inProgress:n?"".concat(n.type,": ").concat(n.service,".").concat(n.procedure):void 0})})}}}})]}})]});function nT(e){return JSON.stringify(e,function(e,n){return n instanceof Uint8Array?Array.from(n):n},2)}var nF=["rpc","stream","subscribe","upload"];function nP(e){try{n=JSON.parse(e)}catch(e){return null}var n,t=0,r=null,i=null,o=null;try{for(;t<3;){var a=Object.keys(n)[0];if(void 0===a)throw Error("expected key");if(0===t&&(r=a),1===t&&(i=a),2===t)if(nF.includes(a))o=a;else throw Error("expected procedure type");n=n[a],t++}return{type:o,service:r,procedure:i,input:n}}catch(e){return{type:o,service:r,procedure:i,input:null}}}var nL=(0,eo.x)({response:[ea.wp.border({width:1,color:N.LU.outlineDefault}),{marginTop:"4px"}],logHeader:[ea.wp.height("37px"),ea.wp.display.flex,ea.wp.p(4),ea.wp.border({width:1,color:N.LU.outlineDefault,direction:"bottom"})],logData:[ea.wp.display.block,ea.wp.flex.growAndShrink(1),{overflowY:"auto"}],logsHeader:[ea.wp.display.flex,ea.wp.align.end,ea.wp.p(4),ea.wp.border({width:1,color:N.LU.outlineDefault,direction:"bottom"})],logsList:[ea.wp.display.block,ea.wp.flex.growAndShrink(1),{overflowY:"auto"}],responseL:[ea.wp.display.flex,ea.wp.flex.growAndShrink(1),{overflowY:"auto"}],responseR:[ea.wp.display.flex,ea.wp.border({width:1,color:N.LU.outlineDefault,direction:"left"}),ea.wp.width("40%"),ea.wp.maxWidth("250px"),{overflowY:"auto","& code":{display:"block",cursor:"pointer",padding:"4px",borderBottom:"1px solid ".concat(N.LU.outlineDimmer),overflowX:"hidden",textOverflow:"ellipsis"},"& code.selected":{backgroundColor:N.LU.accentPrimaryDimmer},"& code:last-of-type":{borderBottom:"unset"}}]}),nU=["Send","Close","Clear"],nN=new nS.E(function(e){return(0,f.FD)(j.S,{children:[(0,f.Y)(j.S,{p:4,pb:0,children:(0,f.FD)(V.EY,{variant:"small",color:"dimmer",children:["Status:"," ",e.inProgress?(0,f.FD)(f.FK,{children:["In progress - ",e.inProgress]}):null]})}),(0,f.Y)(j.S,{p:4,row:!0,gap:4,children:Object.values(nU).map(function(n){return(0,f.Y)(M.$n,{size:"small",disabled:!e.enabled.has(n),text:n,onClick:function(){switch(n){case"Send":e.onSend();break;case"Close":e.onClose();break;case"Clear":e.onClear()}}},n)})})]})});function nO(){var e=(0,ev._)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n      isAgentRepl\n    }\n    isRenamed\n    folderId\n    isOwner\n    isReplShieldEnabled\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return nO=function(){return e},e}function nM(){var e=(0,ev._)(["\n  query AdminPanelReplView($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...AdminPanelRepl\n      }\n    }\n  }\n  ","\n"]);return nM=function(){return e},e}var nH={},nB=(0,ey.J1)(nO()),nz=(0,ey.J1)(nM(),nB),nW=t(42793),nG=t(40604),nV=(0,nW.AH)([ea.wp.colWithGap(16),ea.wp.p(4),{pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}}]),nZ=t(53811),nj=t(67201),nq=t(1982),nK=t(37872),n$=t(24602),nJ=t(28290),nQ=t(52749);function nX(e){var n=e.sessionId,t=(0,v._)((0,y.useState)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,y.useState)(""),2),a=o[0],l=o[1],s=(0,v._)((0,y.useState)(!1),2),c=s[0],u=s[1],d=(0,nq.A)().showConfirm,p=(0,nJ.c)();return null==n?(0,f.Y)(j.S,{children:(0,f.Y)(V.EY,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,f.FD)(j.S,{gap:8,children:[(0,f.FD)(V.EY,{variant:"small",multiline:!1,children:["RUM Session ID: ",n]}),(0,f.Y)(V.EY,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,f.FD)(j.S,{gap:16,children:[(0,f.Y)(B.ov,{id:p("message"),placeholder:"What can we do better?",value:a,onChange:function(e){return l(e.target.value)},disabled:r}),(0,f.FD)(j.S,{row:!0,gap:8,children:[(0,f.Y)(nQ.S,{id:p("issueInRecording"),checked:c,onChange:function(e){return u(e)}}),(0,f.Y)("label",{htmlFor:p("issueInRecording"),children:(0,f.Y)(V.EY,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,f.Y)(M.$n,{onClick:function(){var e=(0,nj.A)();i(!0),(0,nK.yH)({name:"replitOnReplit:issue",context:{message:a,issueInRecording:c,customEventId:e}}),d("Issue submitted! Have a cookie \uD83C\uDF6A",5e3),setTimeout(function(){i(!1),l(""),u(!1)},5e3)},text:"Submit",disabled:r||0===a.trim().length,colorway:"primary"})]})]})}var n0=t(10752),n1=t(51744),n2=t(81740),n4=t(80122),n5=t(76334);function n3(e){var n=e.entry,t=e.isExpanded,r=e.onToggleExpanded,i=(0,n5.A)(new Date(n.timestamp),"yyyy-MM-dd HH:mm:ss"),o=n.state.agentAwareWebviewState.state;return(0,f.Y)(O.A,{expanded:t,onClick:r,headerContent:(0,f.FD)(j.S,{row:!0,align:"center",gap:8,children:[(0,f.Y)(V.EY,{variant:"code",color:"dimmer",children:i}),(0,f.Y)(V.EY,{variant:"code",children:o})]}),children:(0,f.Y)(_.A,{json:n.state})})}function n7(e){var n=e.stateHistory,t=(0,v._)((0,y.useState)(new Set([0])),2),r=t[0],i=t[1],o=function(e){i(function(n){var t=new Set(n);return t.has(e)?t.delete(e):t.add(e),t})};return(0,f.Y)(j.S,{children:n.map(function(e,n){return(0,f.Y)(n3,{entry:e,isExpanded:r.has(n),onToggleExpanded:function(){return o(n)}},e.timestamp)})})}var n6=function(e){return e.Repl="repl",e.Pid2="pid2",e.Pid2Repl="pid2Repl",e.MuxedShell="pid2MuxedShell",e.Logs="logs",e.LSP="lsp",e.Ai="ai",e.AiChat="aiChat",e.Git="git",e.History2="history2",e.Metadata="metadata",e.Override="override",e.DDRum="rum",e.CommandBar="commandBar",e.Workflows="workflows",e.TriggerBSOD="triggerBSOD",e.PreviewState="previewState",e}(n6||{}),n8=(i={},(0,g._)(i,"repl",function(){var e,n,t,r,i,o,a,l,s,c,u=(0,P.A)(),d=(e={variables:{replId:u}},n=(0,eg._)({},nH,e),ew.I(nz,n)).data,p=(null==d?void 0:d.getRepl.__typename)==="Repl"?JSON.parse(JSON.stringify(d.getRepl)):void 0;return p&&(delete p.__typename,null==(t=p.user)||delete t.__typename,null==(r=p.origin)||delete r.__typename,delete p.config.__typename,null==(i=p.source)||delete i.__typename,null==(a=p.source)||null==(o=a.release)||delete o.__typename,null==(c=p.source)||null==(s=c.release)||null==(l=s.repl)||delete l.__typename),(0,f.FD)(j.S,{css:nV,children:[(0,f.Y)(nG.A,{replId:u}),(0,f.Y)("div",{children:p?(0,f.Y)(_.A,{json:p}):null})]})}),(0,g._)(i,"pid2",function(){var e,n,t,r,i,o,a,l,s,c,u,d=(0,A.A)().container,p=null==(c=d.getContext())?void 0:c.repl,h=(0,nu.yB)(),m=(0,v._)((0,y.useState)("unknown"),2),g=m[0],S=m[1],Y=(0,v._)((0,y.useState)(null),2),_=Y[0],C=Y[1],k=(0,v._)((0,y.useState)(null),2),x=k[0],D=k[1],E=(0,v._)((0,y.useState)(null),2),R=E[0],I=E[1],T=(t=(n=(0,A.A)()).fs,i=null==(e=(r=n.container).getContext())?void 0:e.repl,o=(0,e1.Xr)(no),l=(a=(0,v._)((0,e1.md)(no),2))[0],a[1],s=(0,nt.A)(l),(0,y.useCallback)((0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!i||"IDLE"!==s.current&&"ERROR"!==s.current)return[2];return o(["STARTING","starting pid2 upload process"]),[4,function(e,n,t){return ns.apply(this,arguments)}(r,t,function(e,n){o([e,n])})];case 1:return e.sent(),[2]}})}),[s,i,o,r,t])),F=(0,v._)((0,e1.md)(no),2),P=F[0],L=F[1],U=(0,nd.I)(function(e){return(0,w._)(function(){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return S("loading"),n=setTimeout(function(){S("unhealthy")},5e3),[4,na(d,C)];case 1:if(!(t=i.sent()))return S("unhealthy"),[2];return[4,d.exec("stat","-c","%N",t.pid2BinDst2)];case 2:return(r=i.sent()).error?C("LocalPid2 not installed: ".concat(r.output)):C("LocalPid2 installed: ".concat(r.output)),e.healthCheck.ping.rpc({}).then(function(e){D(e.payload),clearTimeout(n),e.ok?S("ok"):S("unhealthy")}).catch(function(){clearTimeout(n),S("unhealthy")}),[2]}})})});return u="ok"===g?"green":"unhealthy"===g?"red":"grey",(0,f.FD)(j.S,{pt:16,px:12,gap:12,children:[(0,f.FD)(V.Y9,{level:3,children:["Is pid2 enabled? ",h?"Yes":"No"]}),(0,f.Y)(M.$n,{text:"Ping pid2 (state: ".concat(g,")"),colorway:u,disabled:!U,onClick:function(){null==U||U()}}),x?(0,f.Y)("code",{children:JSON.stringify(x,null,2)}):null,_?(0,f.Y)("code",{children:_}):null,(0,f.Y)(M.$n,{colorway:"purple",text:"Upload pid2 to Repl",onClick:(0,w._)(function(){return(0,b.YH)(this,function(e){return p&&T(),[2]})})}),(0,f.FD)(V.EY,{css:nf.uploadMessage,children:["[",P,"] ",L]}),(0,f.Y)(M.$n,{colorway:"red",text:"Delete uploaded pid2",onClick:(0,w._)(function(){var e,n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!p)return[2];return[4,na(d,I)];case 1:if(!(e=r.sent()))return[2];return[4,d.exec("rm","-f",e.pid2BinDst)];case 2:return n=r.sent(),[4,d.exec("rm","-f",e.pid2BinDst2)];case 3:if(t=r.sent(),n.error)return I("".concat(n.error,": ").concat(n.output)),[2];if(t.error)return I("".concat(t.error,": ").concat(t.output)),[2];return I("uploaded pid2 deleted"),[2]}})})}),R?(0,f.Y)(V.EY,{css:nf.uploadMessage,children:R}):null,(0,f.Y)(M.$n,{text:"Assign pid2 client to window for testing",onClick:function(){window.pid2=h,np.log("window.pid2: ",h)}})]})}),(0,g._)(i,"pid2Repl",function(){var e=(0,v._)((0,y.useState)(function(){return new nA.N([])}),1)[0],n=(0,y.useCallback)(function(n){return e.update(function(e){return[n].concat((0,em._)(e))})},[e]),t=(0,v._)((0,y.useState)(null),2),r=t[0],i=t[1];(0,nC.b)(function(e){return i({client:e}),function(){return i(null)}},[]);var o=nI.use(r,n);return(0,f.FD)(f.FK,{children:[(0,f.Y)(nb.Ay,{language:"json",hideGutter:!0,extensions:o}),(0,f.Y)(nk,{logs:e,onClear:function(){return e.set([])}})]})}),(0,g._)(i,"pid2MuxedShell",function(){var e,n=(0,v._)((0,y.useState)([]),2),t=n[0],r=n[1];return(0,nC.b)((e=(0,w._)(function(e,n){var t,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=n.signal,i=e.shellExec.monitorAll.subscribe({},{signal:t}).resReadable,o=!1,a=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),s=(0,R._)(i),p.label=2;case 2:return[4,s.next()];case 3:if(!(o=!(c=p.sent()).done))return[3,5];if(!(u=c.value).ok)return[2];r(u.payload.processes),p.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),a=!0,l=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(o&&null!=s.return))return[3,9];return[4,s.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(a)throw l;return[7];case 11:return[7];case 12:return[2]}})}),function(n,t){return e.apply(this,arguments)}),[]),(0,f.Y)(j.S,{children:(0,f.Y)(_.A,{json:t})})}),(0,g._)(i,"logs",function(e){var n=e.isHidden,t=(0,v._)((0,eE.A)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,y.useState)(null),2),a=o[0],l=o[1],s=(0,eL.jg)(),c=(0,eL.lY)(),u=(0,eL.x6)(),d=(0,eL.R7)(),p=(0,eL.G2)(),h=(0,eL.ou)();return n?null:(0,f.FD)(j.S,{css:eH.container,gap:8,children:[(0,f.FD)(j.S,{css:eH.controls,px:4,pb:8,gap:8,children:[(0,f.Y)(M.$n,{colorway:c?void 0:"positive",onClick:u,text:c?"Stop logging goval":"Start logging goval"}),(0,f.FD)(j.S,{row:!0,gap:4,justify:"space-between",children:[(0,f.Y)(M.$n,{onClick:i,text:r?"Hide filters":"Show filters"}),a?(0,f.Y)(M.$n,{onClick:function(){return l(null)},text:"Reset Time Ref"}):null,(0,f.Y)(eN.K0,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(s)),n=document.createElement("a");n.setAttribute("href",e);var t=new Date().toISOString();n.setAttribute("download","logs-".concat(t.slice(0,t.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),n.click()},size:32,children:(0,f.Y)(eM.A,{})}),(0,f.Y)(M.$n,{colorway:"negative",onClick:function(){return h()},text:"Clear logs"})]}),r?(0,f.Y)(ej,{filters:d,updateFilters:function(e){p((0,eg._)({},d,e))}}):null]}),(0,f.Y)(eZ,{logs:s,filters:d,timeRef:a,setTimeRef:l})]})}),(0,g._)(i,"lsp",eU.O),(0,g._)(i,"ai",eh.uG),(0,g._)(i,"aiChat",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.isHidden,t=e.performPaneOperation,r=(0,S.jt)();return n?null:(0,f.Y)(j.S,{css:ed.wrapper,grow:!0,shrink:!0,children:(0,f.FD)(el.tU,{children:[(0,f.Y)(el.wb,{"aria-label":"Tabs",children:Object.keys(r?ec:eu).map(function(e){return(0,f.Y)(el.oz,{children:e},e)})}),(0,f.Y)(el.T2,{children:Object.entries(ec).map(function(e){var n=(0,v._)(e,2),r=n[0],i=n[1];return(0,f.Y)(el.Kp,{children:(0,f.Y)(i,{performPaneOperation:t})},r)})})]})})}),(0,g._)(i,"git",function(){var e,n=(0,v._)((0,y.useState)([]),2),t=n[0],r=n[1],i=(e=(0,eg._)({},eS,void 0),ew.I(eY,e)).data,o=(0,e_.A)(eA.Y);return(0,y.useEffect)(function(){o&&r(function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,em._)(e)).slice(0,100)})},[o]),(0,f.FD)(j.S,{p:8,children:[(0,f.FD)(ek.ui,{elevated:!0,css:[ea.wp.borderRadius(8),ea.wp.p(8),ea.wp.mb(8)],children:[(0,f.Y)("span",{children:"Git Service Connection Info"}),(0,f.Y)("pre",{children:(null==i?void 0:i.currentUser)?JSON.stringify(i,function(e,n){return"accessToken"===e?"censored":n},2):"No gitHubInfo"})]}),(0,f.Y)(j.S,{gap:4,children:t.length?t.map(function(e){return(0,f.Y)(ex,{event:e},e.key)}):"No events yet..."})]})}),(0,g._)(i,"history2",function(){var e=(0,e_.A)(eR.pX)(),n=(0,e_.A)(eR.aP)(),t=(0,v._)((0,eE.A)(!1),2),r=t[0],i=t[1];if(!e)return null;var o=e.filePath,a=e.changes,l=e.users,s=e.version,c=e.playing,u=e.count,d=a[s];if(!d)return(0,f.FD)(j.S,{children:[(0,f.FD)("div",{children:["Change at ",s," not found. Here's the state"]}),(0,f.Y)("pre",{children:JSON.stringify(e,null,2)})]});var p=null==l?void 0:l[d.userId],h=d.timestamp,m=r&&n?function(e,n){try{return(0,eD.$1)(e,n).op}catch(e){return e}}(d.changes,n.state.doc.sliceString(0)):null;return(0,f.FD)(j.S,{gap:16,p:4,children:[(0,f.FD)(j.S,{gap:4,children:[(0,f.Y)(eF,{t:"File",children:(0,f.Y)("pre",{children:o})}),(0,f.FD)(eF,{t:"Version",children:[s," / ",u-1]}),(0,f.Y)(eF,{t:"Playing",children:(0,f.Y)(eI.R,{children:c?"true":"false"})}),(0,f.Y)(eF,{t:"Date",children:(0,f.Y)(eT.Dc,{date:h})})]}),p?(0,f.FD)(j.S,{children:[(0,f.Y)(eF,{t:"Author",children:p.username}),(0,f.FD)(j.S,{pl:8,gap:4,children:[(0,f.Y)(eF,{t:"ID",children:p.id}),(0,f.Y)(eF,{t:"Name",children:p.username}),(0,f.Y)(eF,{t:"Image",children:(0,f.Y)("a",{href:p.image,children:p.image})})]})]}):null,(0,f.Y)(ef.d,{isSelected:r,onChange:i,children:"Changes"}),d?null:"No changes",r&&d?(0,f.Y)(f.FK,{children:(0,f.FD)(j.S,{children:[(0,f.Y)(eF,{t:"Changeset",children:(0,f.Y)("pre",{children:JSON.stringify(d,null,2)})}),n?(0,f.Y)(f.FK,{children:(0,f.FD)(j.S,{css:[ea.wp.mt(4)],children:[(0,f.Y)(eF,{t:"OT",children:(0,f.Y)("pre",{children:JSON.stringify(m,null,2)})}),(0,f.Y)("p",{children:(0,f.FD)("small",{children:["Note that the OT value is translated ",(0,f.Y)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})}),(0,g._)(i,"metadata",function(){var e=(0,A.A)().container;(0,eK.A)(e);var n=e.getConnectionMetadata();if(!n)return(0,f.Y)("div",{children:"no token yet, wait for connection"});var t=n.token,r=new URL(n.conmanURL).host,i='./conman-repl -t "'.concat(t,'" -u ').concat(r);return(0,f.FD)("div",{css:e$.root,children:[(0,f.FD)(j.S,{row:!0,gap:2,children:[(0,f.FD)(V.EY,{css:e$.command,multiline:!1,children:["conman Repl command: ",(0,f.Y)(eI.R,{children:i})]}),(0,f.Y)(eN.K0,{alt:"Copy to clipboard",onClick:function(){return(0,L.default)(i)},children:(0,f.Y)(q.A,{})})]}),(0,f.FD)("div",{children:["metadata:",(0,f.Y)("pre",{children:JSON.stringify(n,null,2)})]}),(0,f.Y)("br",{}),(0,f.Y)("br",{}),(0,f.FD)("div",{children:["parsed token:",(0,f.Y)("pre",{children:JSON.stringify((0,eq.p)(n.token),null,2)})]}),(0,f.Y)("br",{}),(0,f.Y)("br",{})]})}),(0,g._)(i,"override",function(){var e=(0,v._)((0,y.useState)(eQ.A.get("gurl","string")||""),2),n=e[0],t=e[1],r=(0,v._)((0,y.useState)(""),2),i=r[0],o=r[1],a=e5(),l=(0,eJ.RL)(),s=""===n?"null":JSON.stringify((0,eX.x)(n),null,2);return(0,f.FD)(j.S,{pt:16,px:12,gap:12,children:[(0,f.FD)(j.S,{gap:12,children:[(0,f.Y)(e3.A,{label:"Custom gurl",placeholder:"ws://localhost:".concat(4560),value:n,onChange:function(e){return t(e.currentTarget.value)}}),(0,f.FD)("pre",{children:["metadata override preview:",s]}),(0,f.FD)(j.S,{row:!0,gap:12,children:[(0,f.Y)(M.$n,{colorway:"positive",onClick:function(){eQ.A.set("gurl",n),window.location.reload()},text:"Set gurl and reload"}),(0,f.Y)(M.$n,{colorway:"yellow",onClick:function(){eQ.A.set("gurl","wss://eval.canary.replit.com"),window.location.reload()},text:"Switch to canary & reload"}),(0,f.Y)(M.$n,{colorway:"orange",onClick:function(){eQ.A.remove("gurl"),window.location.reload()},text:"Unset gurl and reload"}),(0,f.Y)(M.$n,{colorway:"red",onClick:function(){eQ.A.set("gurl","ws://localhost:4560"),window.location.reload()},text:"Switch to localhost & reload"})]}),(0,f.Y)("div",{children:eQ.A.get("gurl","string")?"currently in localStorage: ".concat(eQ.A.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,f.Y)("p",{children:"Gurl order of precedence:"}),(0,f.FD)("ol",{style:{margin:12},children:[(0,f.Y)("li",{children:"‘gurl’ in localStorage (set above)"}),(0,f.FD)("li",{children:["If in development webapp and a there’s a response from",(0,f.Y)("code",{children:"https://localhost:4563"})," or",(0,f.FD)("code",{children:["http://localhost:",4560]}),", then it will use that."]}),(0,f.FD)("li",{children:["default is ",(0,f.Y)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]}),(0,f.Y)("hr",{css:[ea.wp.my(16),{borderColor:N.LU.outlineDefault}]}),(0,f.FD)(j.S,{gap:12,children:[(0,f.Y)(V.EY,{multiline:!1,children:"Override Database"}),(0,f.Y)(e3.A,{type:"text",value:i,onChange:function(e){o(e.target.value)}}),(0,f.Y)(j.S,{row:!0,gap:8,children:(0,f.Y)(M.$n,{colorway:"positive",onClick:function(){a(i)},text:"Override Postgres connection string"})})]}),(0,f.Y)(M.$n,{onClick:function(){window.ldClient=l,e7.log("window.ldClient: ",l)},text:"Assign LD client to window for testing"})]})}),(0,g._)(i,"rum",function(){var e,n=null==(e=nZ.L.getInternalContext())?void 0:e.session_id,t=nZ.L.getInitConfiguration(),r=null!=t&&100===t.sampleRate,i=(0,v._)((0,y.useState)(null!=n),2),o=i[0],a=i[1];return(0,f.Y)(j.S,{gap:16,p:4,children:r?(0,f.FD)(f.FK,{children:[(0,f.Y)(M.$n,{onClick:o?function(){nZ.L.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,nK.mC)({name:"replitOnReplit"}),setTimeout(function(){a(!0)},1e3)},text:o?"\uD83D\uDD34 Recording... Click to stop and reload page":"Start Recording",colorway:o?void 0:"primary",css:(0,eg._)({},o&&n$.S.backgroundPulse(N.LU.redDimmest,N.LU.redDimmer))}),o?(0,f.Y)(nX,{sessionId:n}):null]}):(0,f.Y)(M.$n,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})}),(0,g._)(i,"commandBar",function(){var e=(0,ep.H)(),n=(0,ep.D)();return(0,f.Y)(j.S,{py:8,px:12,gap:12,children:(0,f.Y)(ef.d,{isSelected:e,onChange:n,children:"Show match scores in Command Bar"})})}),(0,g._)(i,"workflows",function(){var e=(0,v._)((0,y.useState)([]),2),n=e[0],t=e[1],r=(0,v._)((0,y.useState)(void 0),2),i=r[0],o=r[1],a=(0,n2.OK)(),l=(0,n2.mP)(),s=(0,n2.If)();(0,y.useEffect)(function(){var e,n,r=null!=(n=null==l?void 0:l.map(function(e){return{id:e.name}}))?n:[];t(r),o(null==(e=r[0])?void 0:e.id)},[l]);var c=(0,nd.I)(function(e){return function(n){var t=n.workflowId;return e.workflows.runWorkflow.rpc({workflowId:t})}},[]),u=(0,nd.I)(function(e){return function(n){var t=n.runId;e.workflows.stopRun.rpc({runId:t})}},[]);return(0,f.FD)(j.S,{p:4,children:[(0,f.FD)(j.S,{children:[i?(0,f.Y)(G.l,{"aria-label":"Workflow",onSelectionChange:function(e){o(e)},selectedKey:i,items:n,children:function(e){return(0,f.Y)(z.nh,{label:e.id},e.id)}}):(0,f.Y)(j.S,{row:!0,align:"center",justify:"center",grow:!0,shrink:!0,p:4,children:(0,f.Y)(V.EY,{children:"No workflow selected"})}),(0,f.Y)(M.$n,{onClick:(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!i||!c)return[2];return[4,c({workflowId:i})];case 1:return e.sent(),[2]}})}),text:"Run",disabled:!i})]}),s?(0,f.Y)(j.S,{children:Object.entries(s).map(function(e){var n=(0,v._)(e,2),t=n[0],r=n[1];return(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[t," step: ",r.step,r.step===n1.zY.RUNNING?(0,f.Y)(M.$n,{text:"Stop",onClick:function(){null==u||u({runId:t})}}):null]},t)})}):null,(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{children:"Run State"}),(0,f.Y)(_.A,{json:s})]}),(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{children:"Config"}),(0,f.Y)(_.A,{json:a})]})]})}),(0,g._)(i,"triggerBSOD",function(){var e=(0,n0.iO)();return(0,f.Y)(j.S,{gap:16,children:(0,f.Y)(M.$n,{text:"Throw BSOD",onClick:function(){return e({error:Error("[DEBUG] TriggerBSOD"),origin:"debug: Debug"})}})})}),(0,g._)(i,"previewState",function(){var e=(0,n4.N_)(),n=(0,n4.TO)();return e?(0,f.FD)(j.S,{gap:16,children:[(0,f.Y)(M.$n,{text:"Copy as JSON",onClick:function(){(0,L.default)(JSON.stringify(n,null,2))},iconLeft:(0,f.Y)(q.A,{})}),(0,f.Y)(n7,{stateHistory:n})]}):(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:"Preview state tracking is not enabled."}),(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:"This feature is only available in agent repls for developers, admins, or when using ?debug=true."})]})}),i),n9=Object.values(n6),te=(0,eo.x)({surface:[ea.wp.height("100%")],tabs:[{flexWrap:"wrap",flexDirection:"row",gap:"4px"}],tab:[ea.wp.overflow("auto")],content:[ea.wp.height("100%")]});function tn(e){var n=e.paneOptions,t=(0,v._)((0,y.useState)("repl"),2),r=t[0],i=t[1],o=n9.map(function(e){return(0,f.Y)(M.$n,{colorway:e===r?"primary":void 0,onClick:function(){return i(e)},text:e},e)});return(0,f.FD)(ek.ui,{background:"default",css:te.surface,p:4,gap:8,children:[(0,f.Y)(j.S,{css:te.tabs,children:o}),(0,f.Y)(j.S,{css:te.tab,grow:!0,shrink:!0,children:Object.entries(n8).map(function(e){var t=(0,v._)(e,2),i=t[0],o=t[1];return(0,f.Y)(j.S,{css:te.content,grow:!0,shrink:!0,style:{display:i!==r?"none":"inherit"},children:"override"===i&&"override"!==r?null:(0,f.Y)(o,{isHidden:n.isHidden||r!==i,performPaneOperation:n.performPaneOperation})},i)})})]})}var tt=t(79166),tr=t(47434),ti=t(52351),to=h.ZU.Object({type:h.ZU.Literal("adminPanel")}),ta={Content:function(e){var n=e.options;return(0,f.Y)(tn,{paneOptions:n})},Icon:function(e){var n=e.size;return(0,f.Y)(ti.Vx.Provider,{value:{color:N.LU.redStronger,size:n},children:(0,f.Y)(tr.A,{})})},getTitle:function(){return"Debug"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Replit developer debugging tools",category:tt.bY.Other,decode:function(e){return m.T(to,e)}},tl=t(71514),ts=t(75679),tc=t(75267),tu=t(39229),td=(0,eo.x)({container:[ea.wp.coverContainer,ea.wp.py(4),ea.wp.px(8)]});function tp(e){var n=e.performPaneOperation,t=(0,A.A)().fs,r="cmdOrCtrlKey"===(0,tl.g)("multiselectModifierKey").preferences.multiselectModifierKey?"cmdOrCtrlKey":"altKey",i=(0,tu.J)(!0),o=(0,y.useCallback)(function(e){return!i(e.filename)},[i]),a=(0,tc.u)({fs:t,filter:o,multiselectModifierKey:r,readOnly:!0,fontSize:13,manageWidth:!0,onFileSelect:function(e){var t=e.path;n({operation:"replace",pane:(0,ts.af)(t)})}});return(0,f.Y)(j.S,{css:td.container,children:(0,f.Y)(tc.J,{store:a.store})})}var tf=t(48238),th=h.ZU.Object({type:h.ZU.Literal("agentFiles")}),tm={Content:function(e){return(0,f.Y)(tp,{performPaneOperation:e.options.performPaneOperation})},Icon:function(e){var n=e.size;return(0,f.Y)(ti.Vx.Provider,{value:{color:N.LU.blurpleStrongest,size:n},children:(0,f.Y)(tf.A,{})})},getTitle:function(){return"Files"},category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(th,e)}},tg=t(41467),tv=t(55515),ty=t(43813),tw=t(63456),tb=(0,eo.x)({text:{width:"100%",textAlign:"center"},loaderContainer:[ea.wp.display.flex,ea.wp.center,ea.wp.height("100%")]}),tS=h.ZU.Object({type:h.ZU.Literal("binary"),data:h.ZU.Object({path:h.ZU.String()})}),tY={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(t_,{path:n.data.path,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.pane,t=e.size;return(0,f.Y)(ty.A,{path:n.data.path,size:t})},getTitle:function(e){return(0,tg.WP)(e.data.path)},category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(tS,e)}};function t_(e){var n=e.path,t=e.performPaneOperation,r=(0,A.A)().fs,i=(0,ts.KA)({path:n,performPaneOperation:t});(0,tv.Qt)(function(){if(i)return{commands:[{commands:i?(0,em._)(i):[]}]}},[i]);var o=(0,v._)((0,y.useState)(null),2),a=o[0],l=o[1],s=(0,v._)((0,y.useState)(!0),2),c=s[0],u=s[1];return((0,y.useEffect)(function(){var e=r.watchFile(n,{onChange:function(e){l(e.toString("base64")),u(!1)},onError:function(){l(null),u(!1)},onMoveOrDelete:function(){l(null),u(!1)}});return function(){e(),u(!0),l(null)}},[r,n]),c)?(0,f.Y)(j.S,{css:tb.loaderContainer,children:(0,f.Y)(tw.A,{})}):null===a?(0,f.Y)(V.EY,{multiline:!1,children:"Failed to load binary file"}):(0,f.FD)(f.FK,{children:[(0,f.Y)(ts.ou,{path:n,performPaneOperation:t}),(0,f.FD)(ts.UC,{centered:!0,children:[(0,f.Y)(V.EY,{css:tb.text,children:"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."}),(0,f.Y)(eN.K0,{alt:"Download",css:[ea.wp.position.absolute,ea.wp.bottom(8),ea.wp.right(8),ea.wp.p(16)],children:(0,f.Y)("a",{href:"data:text/plain;base64,".concat(a),download:(0,tg.WP)(n),css:[ea.wp.color.foregroundDimmer],children:(0,f.Y)(eM.A,{})})})]})]})}var tA=t(39414),tC=t(49126),tk=t(2568),tx=t(30819),tD=t(71983),tE=t(86402),tR=t(17459),tI=t(41902),tT=t(30331),tF=t(31092),tP=t(17089),tL=t(60852),tU=t(44191),tN=t(32852),tO=new Map,tM=t(79315),tH=t(81539),tB=t(35563),tz=t(81686),tW=(0,eo.x)({shadow:{position:"absolute",transition:"opacity 0.1s ease-in-out",'&[data-position="top"], &[data-position="bottom"]':{left:0,right:0,height:12},'&[data-position="left"], &[data-position="right"]':{top:0,bottom:0,height:12},'&[data-position="top"]':{top:0,backgroundImage:"linear-gradient(to top, transparent, var(--shadow-color))"},'&[data-position="bottom"]':{bottom:0,backgroundImage:"linear-gradient(to bottom, transparent, var(--shadow-color))"},'&[data-position="left"]':{left:0,backgroundImage:"linear-gradient(to left, transparent, var(--shadow-color))"},'&[data-position="right"]':{right:0,backgroundImage:"linear-gradient(to right, transparent, var(--shadow-color))"}}});function tG(e){var n=e.scrolledAmount,t=e.scrollableAmount,r=e.orientation,i=void 0===r?"vertical":r,o=e.hideEnd,a=e.shadowColor,l=void 0===a?"color-mix(in srgb, ".concat(N.LU.backgroundDefault," 32%, transparent)"):a;return(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{css:tW.shadow,"data-position":"vertical"===i?"top":"left",style:{"--shadow-color":l,opacity:+(n>0)}}),!(void 0!==o&&o)&&(0,f.Y)("div",{css:tW.shadow,"data-position":"vertical"===i?"bottom":"right",style:{"--shadow-color":l,opacity:+(n<t)}})]})}var tV=t(15149),tZ=t(48604),tj=t(38524),tq=t(6064),tK=t(81650),t$=(0,eo.x)({header:[ea.wp.height(36)],description:[ea.wp.flex.column,ea.wp.gap(8)],divider:[ea.wp.backgroundColor.outlineDimmer],package:[ea.wp.border({color:"transparent"}),ea.wp.justify.spaceBetween,{"&:hover":{backgroundColor:N.LU.backgroundHighest}}],packageList:[ea.wp.height(220),ea.wp.overflowY("auto")],packageMetadata:[ea.wp.overflow("hidden"),ea.wp.mr(8)],packageName:[ea.wp.truncate,ea.wp.flex.growAndShrink(1),ea.wp.mx(8),{"> a":[ea.wp.ml(4),{color:"currentColor",lineHeight:0}]}],packagerRoot:[ea.wp.flex.column,ea.wp.gap(8)],packager:[ea.wp.backgroundColor.backgroundHigher,ea.wp.borderRadius(4),ea.wp.overflow("hidden")],packagerHeaderTitle:[ea.wp.truncate,ea.wp.flex.shrink(1)],packagerEmptyState:[ea.wp.backgroundColor.backgroundOverlay,ea.wp.borderRadius(0,0,4,4),ea.wp.color.foregroundDimmest],dividerInner:[ea.wp.p(0),ea.wp.m(0),{borderBottom:"1px solid",borderBottomColor:N.LU.backgroundHighest}]});function tJ(e){var n,t,r,i,o,a,l=e.pkg,s=e.uninstall,c=(0,tN.UK)(),u=(t=(0,tN.UK)(),r=(0,A.A)(),o=(i=(0,v._)((0,y.useState)(null!=(n=tO.get("".concat(null==t?void 0:t.id,":").concat(l.name)))?n:null),2))[0],a=i[1],(0,y.useEffect)(function(){if((null==t?void 0:t.id)&&l.name){var e=l.name;if(!tO.has(e)){var n,i=(0,tU.N)(t.id),o=!1;return(n=(0,w._)(function(){var n;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,i.getPackageInfo({id:t.id,name:e,services:r})];case 1:if((n=l.sent())&&"string"!=typeof(null==n?void 0:n.homepageURL)&&delete n.homepageURL,o)return[2];return tO.set("".concat(t.id,":").concat(e),null!=n?n:null),a(null!=n?n:null),[2]}})}),function(){return n.apply(this,arguments)})(),function(){o=!0}}}},[null==t?void 0:t.id,l.name]),o),d=(0,y.useMemo)(function(){var e=(null==u?void 0:u.description)||l.description;if(e&&/<[^>]+>|<\/[^>]+>/.test(e)){var n=document.createElement("DIV");return n.innerHTML=e,(n.textContent||n.innerText||"").trim()}return e},[null==u?void 0:u.description,l.description]),p=(0,tL.A)((null==u?void 0:u.license)||l.license),h=(0,y.useMemo)(function(){if(u){var e;return(0,nh._)((0,eg._)({},u),{version:null!=(e=null==u?void 0:u.version)?e:l.spec,name:(null==c?void 0:c.id)==="nix"&&(null==u?void 0:u.prettyName)||l.name,license:p,description:d})}return l},[null==c?void 0:c.id,d,u,p,l]),m=(0,tB.n5)(),g=(0,tB.BL)(),S=(0,y.useMemo)(function(){return m.some(function(e){return e.pkgs.some(function(e){return e.name===l.name})})},[l.name,m]),Y=(0,y.useMemo)(function(){return!!(null!==g&&g.pkgs.find(function(e){return e.name===l.name}))},[g]);return(0,f.FD)(j.S,{css:t$.package,p:4,row:!0,align:"center",tag:"li",children:[(0,f.FD)(j.S,{css:t$.packageMetadata,grow:!0,shrink:!0,align:"center",row:!0,children:[(0,f.Y)(tj.A,{}),(0,f.FD)(V.EY,{css:t$.packageName,children:[h.name,h.homepageURL?(0,f.Y)("a",{href:h.homepageURL,target:"_blank",children:(0,f.Y)(tV.A,{})}):null]}),h.version?(0,f.Y)(V.EY,{color:"dimmer",children:h.version}):null]}),(0,f.FD)(j.S,{css:[ea.wp.gap(4),ea.wp.align.center],row:!0,children:[h.description||h.license?(0,f.Y)(Z.m_,{tooltip:(0,f.FD)("div",{children:[(0,f.Y)("div",{children:h.description}),h.license?(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:h.license}):null]}),children:(0,f.Y)(tZ.A,{})}):null,(0,f.Y)(eN.K0,{alt:"Uninstall",disabled:Y||S,onClick:function(){s()},children:(0,f.Y)(tK.A,{})})]})]})}function tQ(e){var n=e.onAddPackage,t=e.name,r=e.id,i=e.addText;return(0,f.FD)(j.S,{grow:!0,shrink:!0,pl:4,row:!0,justify:"space-between",children:[(0,f.Y)(V.EY,{css:t$.packagerHeaderTitle,id:r,children:t}),(0,f.Y)(eN.K0,{alt:i,onClick:n,children:(0,f.Y)(tq.A,{})})]})}function tX(e){var n=e.packages,t=e.labelId,r=(0,tN.UK)(),i=(0,tB.q3)(),o=(0,v._)((0,y.useState)(0),2),a=o[0],l=o[1],s=(0,v._)((0,y.useState)(0),2),c=s[0],u=s[1],d=(0,tF.A)(function(e){return u(e.height)});return r?(0,f.Y)(j.S,{css:ea.wp.position.relative,innerRef:d,children:(0,f.FD)(j.S,{css:t$.packageList,onScroll:function(e){l(e.target.scrollTop)},children:[(0,f.Y)(tG,{scrolledAmount:a,scrollableAmount:34*n.length-c,hideEnd:!0}),(0,f.Y)(tI.x8,{style:{height:"100%"},role:"list","aria-labelledby":t,children:n.map(function(e){return(0,f.Y)(tJ,{pkg:e,uninstall:function(){i({id:r.id,pkg:e})}},e.name)})})]})}):null}var t0=new Map;function t1(e){var n=e.onAddPackage,t=e.openFile,r=(0,tN.UK)(),i=(0,tB.H_)(null==r?void 0:r.id),o=(0,y.useMemo)(function(){return i.filter(function(e){return e.name}).sort(function(e,n){return e.name&&n.name?e.name.localeCompare(n.name):0})},[i]),a=(0,y.useId)(),l=(0,y.useCallback)(function(){n(null==r?void 0:r.id)},[n,null==r?void 0:r.id]),s=(null==r?void 0:r.id)==="nix",c=(0,y.useMemo)(function(){return null==r?void 0:r.packagerFiles.filter(function(e){return!e.includes("lock")&&!e.endsWith("/")})},[null==r?void 0:r.packagerFiles]),u=(0,tT.om)(),d=(0,v._)((0,y.useState)(r?t0.get(r.id):void 0),2),p=d[0],h=d[1];return((0,y.useEffect)(function(){function e(){return(e=(0,w._)(function(){var e,n,t,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:if(!c||!r)return[2];e=!0,n=!1,t=void 0,s.label=1;case 1:s.trys.push([1,6,7,8]),i=c[Symbol.iterator](),s.label=2;case 2:if(e=(o=i.next()).done)return[3,5];return a=o.value,[4,u.readFile(a)];case 3:if("content"in s.sent())return t0.set(r.id,a),h(a),[3,5];s.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return l=s.sent(),n=!0,t=l,[3,8];case 7:try{e||null==i.return||i.return()}finally{if(n)throw t}return[7];case 8:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[r,u,c]),r)?(0,f.FD)(j.S,{css:t$.packagerRoot,children:[(0,f.Y)(j.S,{css:t$.packager,children:(0,f.Y)(O.A,{defaultExpanded:!0,headerContent:(0,f.Y)(tQ,{id:a,name:r.name,addText:s?"Add new dependency":"Add new package",onAddPackage:l}),children:(0,f.FD)(f.FK,{children:[(0,f.Y)(t5,{css:t$.divider}),o.length>0?(0,f.Y)(tX,{packages:o,labelId:a}):(0,f.Y)(j.S,{css:t$.packagerEmptyState,p:8,align:"center",children:s?"No dependencies found":"No packages found"})]})})}),(0,f.Y)(M.$n,{colorway:"primary",variant:"outlined",text:s?"Add new dependency":"Add new package",iconLeft:(0,f.Y)(tq.A,{}),onClick:l}),p?(0,f.Y)(M.$n,{variant:"nofill",text:"Open ".concat(p),iconLeft:(0,f.Y)(tj.A,{}),onClick:function(){(0,tP.u4)(tD.AZ.DEPENDENCIES_PACKAGER_FILE_OPENED,{packagerId:r.id,file:p}),t({path:p})}}):null]}):null}function t2(e){var n=e.configs,t=e.description,r=e.title,i=e.openFile,o=(0,tR._)(e,["configs","description","title","openFile"]);return(0,f.FD)(j.S,{children:[(0,f.Y)(j.S,{css:t$.header,row:!0,justify:"space-between",children:(0,f.Y)(V.Y9,{variant:"subheadDefault",level:2,children:r})}),(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(tz.s,{color:"dimmer",css:t$.description,children:t}),n.length>0?n.map(function(e){return(0,f.Y)(tH.A,{config:e,children:(0,f.Y)(t1,(0,eg._)({openFile:i},o))},e.id)}):null]})]})}function t4(e){var n=(0,tM.J)().configs,t=(0,y.useMemo)(function(){return n.find(function(e){return"nix"===e.id})},[n]);return t?(0,f.Y)(t2,(0,nh._)((0,eg._)({title:"System Dependencies",description:(0,f.FD)("span",{children:["Add additional support to your environment with"," ",(0,f.Y)("a",{href:"https://search.nixos.org/packages",target:"_blank",children:"Nix packages"}),"."]})},e),{configs:[t]})):null}var t5=function(){return(0,f.Y)("div",{css:t$.dividerInner})},t3=t(3594),t7=t(45744);function t6(e){var n=e.openFile,t=e.openConsole,r=e.openNixTab,i=(0,tM.J)().configs,o=(0,y.useMemo)(function(){return i.filter(function(e){return"nix"!==e.id})},[i]),a=(0,v._)((0,y.useState)({mode:"Overview"}),2),l=a[0],s=a[1];switch((0,tE.M)(tD.AZ.DEPENDENCIES_TAB_VIEWED,{tab:"import"}),l.mode){case"Overview":return(0,f.Y)(t7._0,{children:(0,f.Y)(t2,{title:"Manage Imports",configs:o,openFile:n,onAddPackage:function(e){s({mode:"Search",initialPackager:e})},description:(0,f.FD)(f.FK,{children:[(0,f.Y)(V.EY,{children:"Packagers manage language-specific dependencies for your project. These can be imported directly from your codebase."}),0===o.length?(0,f.Y)(V.EY,{color:"dimmest",children:(0,f.FD)("p",{children:["You don't currently have any packagers. Add language support by"," ",(0,f.Y)("a",{href:"",onClick:function(e){e.preventDefault(),r()},children:"adding a System Module"}),"."]})}):null]})})});case"Search":return(0,f.Y)(t3.Y,{onBack:function(){return s({mode:"Overview"})},initialCategory:l.initialPackager,openConsole:t})}}var t8=t(13843),t9=t(75802),re=t(86733),rn=t(53376),rt=(0,eo.x)({systemModules:[ea.wp.flex.column,ea.wp.gap(8)],sectionHeader:[ea.wp.height(36)]});function rr(e){var n=e.openFile,t=e.openConsole,r=(0,tk.G)().modules,i=(0,v._)((0,y.useState)({mode:"Overview"}),2),o=i[0],a=i[1];if((0,tE.M)(tD.AZ.DEPENDENCIES_TAB_VIEWED,{tab:"nix"}),!r)return null;switch(o.mode){case"Overview":return(0,f.FD)(t7._0,{children:[(0,f.FD)(j.S,{children:[(0,f.Y)(j.S,{css:rt.sectionHeader,row:!0,justify:"space-between",children:(0,f.Y)(V.Y9,{variant:"subheadDefault",level:2,children:"System Modules"})}),(0,f.FD)(j.S,{css:rt.systemModules,children:[(0,f.Y)(tz.s,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers. These provide the foundation for your App."}),(0,f.Y)(t9.A,{modules:r}),(0,f.Y)(M.$n,{text:"Add new module",variant:r.length>0?"outlined":"default",colorway:"primary",iconLeft:(0,f.Y)(tq.A,{}),onClick:function(){a({mode:"Search",initialCategory:"Modules"})}}),(0,f.Y)(M.$n,{text:"Open .replit",variant:"nofill",iconLeft:(0,f.Y)(rn.A,{}),onClick:function(){n({path:".replit"})}})]})]}),(0,f.Y)(t4,{onAddPackage:function(){a({mode:"Search",initialCategory:"Packages"})},openFile:n}),(0,f.Y)(re.v,{href:t8.ik.DEPENDENCY_MANAGEMENT,target:"_blank",rel:"noopener",variant:"underlinedOnHover",colorway:"primary",iconRight:(0,f.Y)(tV.A,{}),text:"Learn more about Nix and .replit configuration"})]});case"Search":return(0,f.Y)(t3.m,{onBack:function(){return a({mode:"Overview"})},initialCategory:o.initialCategory,openConsole:t})}}var ri=t(54369),ro=t(81645),ra=(0,eo.x)({root:[ea.wp.overflow("hidden"),ea.wp.flex.growAndShrink(1)],content:[ea.wp.overflowY("auto")]});function rl(e){var n,t=e.openFile,r=e.openConsole,i=e.initialTab,o=(0,tM.J)(),a=o.configs,l=o.loading,s=(0,tk.G)(),c=s.modules,u=s.configs,d=(0,tx.A)(),p=(0,y.useMemo)(function(){return a.filter(function(e){return"nix"!==e.id})},[a]).length>0,h=(0,v._)((0,y.useState)(p?void 0===i?"import":i:"nix"),2),m=h[0],g=h[1];return((0,y.useEffect)(function(){p||g("nix")},[p,l]),a&&c&&u&&d&&!l)?("import"===m?n=(0,f.Y)(t6,{openFile:t,openConsole:r,openNixTab:function(){return g("nix")}}):"nix"===m&&(n=(0,f.Y)(rr,{openFile:t,openConsole:r})),(0,f.FD)(j.S,{css:ra.root,children:[(0,f.Y)(ri.P,{tabs:[{value:"import",label:"Imports",icon:(0,f.Y)(tj.A,{})},{value:"nix",label:"System (Advanced)",icon:(0,f.Y)(ro.A,{})}],value:m,onClick:function(e){g(e.value)}}),(0,f.Y)(j.S,{css:ra.content,grow:!0,shrink:!0,children:n})]})):(0,f.Y)(t7.Gu,{})}var rs=t(26127),rc=t(33791),ru=h.ZU.Object({type:h.ZU.Literal("dependencies"),initialTab:h.ZU.Optional(h.ZU.Union([h.ZU.Literal("import"),h.ZU.Literal("nix")]))}),rd={Content:function(e){var n=e.options.performPaneOperation,t=e.pane.initialTab,r=(0,y.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:{type:"codeEditor",data:e}})},[n]),i=(0,y.useCallback)(function(){n({operation:"open",secondary:!0,pane:{type:"runnerOutput"}})},[n]);return(0,f.Y)(rl,{openFile:r,openConsole:i,initialTab:t})},Icon:function(e){var n=e.size;return(0,f.Y)(rc.A,{size:n})},getTitle:function(){return"Dependencies"},description:"Install, upgrade, and manage dependencies for your environment, build system, and application runtime",category:rs.b.WorkspaceFeatures,decode:function(e){return m.T(ru,e)}},rp=t(59369),rf=t(2526),rh=t(83365),rm=t(90629),rg=function(e){var n=e.context,t=e.gitService,r=e.result,i=e.data;rm.v4(function(e){e.setTag("service","git"),e.setTag("context",n),e.setExtra("env",t.getEnv()),i&&rm.l7("data",i),rm.Cp(r.error)})},rv=function(){var e=(0,w._)(function(e,n,t,r){var i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if("generatedFile"===r.type)return[2,""];if("git"!==r.type)return[3,2];return i=r.revision,[4,e.getFileContents({path:t,revision:i,convertToBase64:(0,tg.FN)(t)})];case 1:if((o=l.sent()).error)throw rg({context:"use-file-at-revision-fetch-content",gitService:e,result:o,data:{path:t,revision:i}}),o.error;return[2,o.content||""];case 2:return[4,n.readFile(t,{fromDisk:!0})];case 3:if((a=l.sent()).error)throw a.error;return[2,a.content.toString("utf8")]}})});return function(n,t,r,i){return e.apply(this,arguments)}}();let ry=function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,v._)((0,y.useState)(null),2),o=i[0],a=i[1],l=(0,v._)((0,y.useState)(!0),2),s=l[0],c=l[1],u=(0,A.A)().fs,d=(0,rh.A)((t=(0,w._)(function(t){var r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:c(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,rv(t,u,e,n)];case 2:return r=o.sent(),c(!1),[2,{content:r,error:null}];case 3:return i=o.sent(),c(!1),[2,{content:null,error:i}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[e,n,u],r);return(0,y.useEffect)(function(){d&&(d.error?a(null):a(d.content))},[d]),{fileContent:o,loading:s}};var rw=t(54843),rb=t(11797),rS="rgba(180, 0, 0, 0.125)",rY="rgba(0, 180, 0, 0.125)",r_=nv.Lz.theme({"&.cm-merge-b .cm-changedLine":{background:"rgba(0, 180, 0, 0.075)"},"&.cm-merge-a .cm-changedLine":{background:"rgba(180, 0, 0, 0.075)"},"&.cm-merge-b .cm-changedLineGutter":{background:rY},"&.cm-merge-a .cm-changedLineGutter":{background:rS},"&.cm-merge-b .cm-changedText":{background:rY,outline:"solid 1px ".concat(rY),borderRadius:"2px"},"&.cm-merge-a .cm-changedText":{background:rS,outline:"solid 1px ".concat(rS),borderRadius:"2px"},".cm-collapsedLines":{color:N.LU.accentPrimaryStrongest,background:N.LU.accentPrimaryDimmest,transition:"background 250ms ease","&:hover":{background:N.LU.accentPrimaryDimmer}}}),rA=[nv.Lz.baseTheme({".cm-scroller":{height:"100% !important",overflowY:"auto !important"}}),nv.Lz.theme({".cm-scroller":{height:"auto !important",overflowY:"visible !important"}})],rC=[ng.Nb.highest(rA),r_],rk=t(58173),rx=t(86059);function rD(e){var n,t,r,i=e.a,o=e.b,a=e.style,l=e.className,s=(0,tR._)(e,["a","b","style","className"]),c=(0,v._)((0,y.useState)(null),2),u=c[0],d=c[1],p=(0,v._)((0,y.useState)(null),2),h=p[0],m=p[1],g=(0,y.useRef)(!1),w=(0,nt.A)(s),b=(0,nt.A)(i.doc),S=(0,nt.A)(o.doc),Y=(0,nb.pm)((0,nh._)((0,eg._)({},i),{readOnly:!0})),_=(0,nb.pm)((0,nh._)((0,eg._)({},o),{readOnly:!0})),A=(n=(0,v._)((0,y.useState)(),2)[1],(0,y.useCallback)(function(e){n(function(){throw e})},[])),C=s.orientation,k=s.revertControls,x=s.renderRevertControl,D=s.collapseUnchanged,E=s.gutter,R=s.highlightChanges,I=void 0!==D,T=null==D?void 0:D.margin,F=null==D?void 0:D.minSize,P=null!=(t=null==h?void 0:h.a)?t:null,L=null!=(r=null==h?void 0:h.b)?r:null;return(0,nb.vO)(),(0,y.useEffect)(function(){var e=function(e){A(e)};if(u){var n=null;try{n=new rb.SV((0,nh._)((0,eg._)({},w.current),{parent:u,a:{doc:b.current,extensions:[nv.Lz.exceptionSink.of(e),rC].concat((0,em._)(Y))},b:{doc:S.current,extensions:[nv.Lz.exceptionSink.of(e),rC].concat((0,em._)(_))}}))}catch(n){e(n)}return n&&(m(n),g.current=!0),function(){if(n){m(null);try{n.destroy()}catch(n){e(n)}}}}},[u]),(0,y.useEffect)(function(){P&&!g.current&&P.dispatch({changes:{from:0,to:P.state.doc.length,insert:i.doc}})},[P,i.doc]),(0,y.useEffect)(function(){L&&!g.current&&L.dispatch({changes:{from:0,to:L.state.doc.length,insert:o.doc}})},[L,o.doc]),(0,y.useEffect)(function(){h&&!g.current&&rE(h,w.current.collapseUnchanged)},[h,w,i.doc,o.doc]),(0,y.useEffect)(function(){if(h&&!g.current){var e=I?{margin:T,minSize:F}:void 0;h.reconfigure({orientation:C,revertControls:k,renderRevertControl:x,collapseUnchanged:e,gutter:E,highlightChanges:R}),e&&rE(h,e)}},[h,C,k,x,I,T,F,E,R]),(0,rk.O)(P),(0,rk.O)(L),(0,y.useEffect)(function(){g.current=!1}),(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{ref:d,className:l,style:a}),(0,f.Y)(rx.OE,{view:P}),(0,f.Y)(rx.OE,{view:L})]})}function rE(e,n){e&&n&&(e.reconfigure({collapseUnchanged:void 0}),e.reconfigure({collapseUnchanged:(0,eg._)({},n)}))}var rR=t(45287),rI=(0,eo.x)({container:[ea.wp.width(60),ea.wp.height(24),ea.wp.display.flex,ea.wp.center,ea.wp.borderRadius(4),ea.wp.fontSize(N.LU.fontSizeSmall)]});function rT(e){var n,t,r;switch(e.type){case rR.PX.ADDED:case rR.PX.UNTRACKED:n="Added",t=N.LU.greenDimmest,r=N.LU.greenStrongest;break;case rR.PX.MODIFIED:n="Modified",t=N.LU.yellowDimmest,r=N.LU.yellowStrongest;break;case rR.PX.DELETED:n="Deleted",t=N.LU.redDimmest,r=N.LU.redStrongest;break;case rR.PX.RENAMED:n="Renamed",t=N.LU.tealDimmest,r=N.LU.tealStrongest;break;case rR.PX.COPIED:n="Copy",t=N.LU.limeDimmest,r=N.LU.limeStrongest;break;default:return null}return(0,f.Y)(j.S,{style:{backgroundColor:t,color:r},css:rI.container,children:(0,f.Y)("span",{children:n})})}function rF(e){var n,t,r;switch(e.type){case"ADDED":n="Added",t=N.LU.greenDimmest,r=N.LU.greenStrongest;break;case"MODIFIED":n="Modified",t=N.LU.yellowDimmest,r=N.LU.yellowStrongest;break;case"DELETED":n="Deleted",t=N.LU.redDimmest,r=N.LU.redStrongest;break;case"RENAMED":n="Renamed",t=N.LU.tealDimmest,r=N.LU.tealStrongest;break;case"COPIED":n="Copy",t=N.LU.limeDimmest,r=N.LU.limeStrongest;break;default:return null}return(0,f.Y)(j.S,{style:{backgroundColor:t,color:r},css:rI.container,children:(0,f.Y)("span",{children:n})})}var rP=t(66325),rL=t(49058),rU=t(1035),rN=t(27789),rO=t(82450),rM=[{"& > span:first-child-of-type":[ea.wp.flex.grow(1),ea.wp.textAlign.left]},{"& > span":[ea.wp.flex.shrink(1)]},ea.wp.height("auto"),ea.wp.p(8),ea.wp.fontWeight.medium,ea.wp.backgroundColor.backgroundHigher,ea.wp.flex.row,ea.wp.align.center,ea.wp.justify.spaceBetween,ea.wp.overflow("hidden"),ea.wp.cursor.pointer],rH=(0,eo.x)({buttonFolded:[rM,ea.wp.borderRadius(8)],buttonUnfolded:[rM,ea.wp.borderRadius(8,8,0,0)],rowContainer:[ea.wp.position.relative,ea.wp.zIndex(1),ea.wp.overflow("hidden")],diffContainer:[ea.wp.borderRadius(8)],bodyContainer:[ea.wp.borderRadius(0,0,8,8),ea.wp.p(8),ea.wp.display.flex,ea.wp.flex.row,ea.wp.flex.wrap,ea.wp.align.center,ea.wp.justify.center,ea.wp.backgroundColor.backgroundDefault,ea.wp.border({color:N.LU.outlineDimmer,direction:"bottom"}),ea.wp.border({color:N.LU.outlineDimmer,direction:"left"}),ea.wp.border({color:N.LU.outlineDimmer,direction:"right"})],noChangesContainer:[ea.wp.py(8),ea.wp.px(8),ea.wp.center,ea.wp.width("100%")],innerContainer:[ea.wp.display.flex,ea.wp.align.center],splitContainer:[ea.wp.display.flex,ea.wp.flex.row,ea.wp.justify.spaceBetween,ea.wp.maxWidth("100%"),ea.wp.align.center],splitChild:[{flexBasis:"50%"}],buttonGroupItem:[ea.wp.width(64),ea.wp.height(32)]}),rB=function(e){var n=e.value,t=e.onChange;return(0,f.FD)(rL.e2,{name:"SplitOrUnifiedDiff",value:n,onChange:t,row:!0,children:[(0,f.Y)(j.S,{css:rH.buttonGroupItem,children:(0,f.Y)(rL.$O,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,f.Y)(j.S,{css:rH.buttonGroupItem,children:(0,f.Y)(rL.$O,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},rz=function(e){var n=e.folded,t=void 0!==n&&n,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,f.FD)(j.S,{css:t?rH.buttonFolded:rH.buttonUnfolded,onClick:function(){return r(!t)},children:[(0,f.FD)(j.S,{css:[rH.rowContainer,ea.wp.flex.shrink(1)],align:"center",row:!0,gap:8,children:["RENAMED"===i.status||"COPIED"===i.status?(0,f.FD)(f.FK,{children:[(0,f.Y)(ty.A,{path:o}),(0,f.Y)(V.EY,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,f.Y)(V.EY,{multiline:!1,color:"dimmest",css:[ea.wp.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,f.Y)(rU.A,{}),(0,f.Y)(ty.A,{path:a}),(0,f.Y)(V.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(V.EY,{multiline:!1,color:"dimmest",css:[ea.wp.fontWeight.normal],children:i.final.path})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(ty.A,{path:a}),(0,f.Y)(V.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(V.EY,{multiline:!1,color:"dimmest",css:[ea.wp.fontWeight.normal],children:i.final.path})]}),(0,f.Y)(H.r,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,f.FD)(j.S,{css:rH.rowContainer,align:"center",row:!0,gap:8,children:[(0,f.Y)(rF,{type:i.status}),(0,f.Y)(eN.K0,{alt:t?"Collapse diff":"Expand diff",onClick:function(){return r(!t)},children:t?(0,f.Y)(rN.A,{}):(0,f.Y)(rO.A,{})})]})]})},rW=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;return"Split"===t?(0,f.Y)(rD,{a:{filePath:n.initial.filename,doc:n.initial.content},b:{filePath:n.final.filename,doc:n.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,f.Y)(nb.Ay,{filePath:n.final.filename,initialDoc:n.final.content,extensions:[rw.X.of(ng.EY.of(n.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},rG=function(e){return(0,tg.FN)(e)?"media":(0,tg.m6)(e)?"ot":"binary"},rV=function(e){var n=e.content,t=e.type,r=e.filename,i=e.extensions;switch(t){case"media":return(0,f.Y)(j.S,{css:[{display:"flex",height:"100%"}],children:(0,f.Y)(rP.jM,{src:(0,rP.p4)(n,(0,tg.P7)(r)),mime:(0,tg.P7)(r),fileName:r})});case"ot":return(0,f.Y)(nb.Ay,{filePath:r,initialDoc:n,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},rZ=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;if(n.loading)return(0,f.Y)(j.S,{css:rH.noChangesContainer,children:(0,f.Y)(tw.A,{size:20})});if(n.initial.content===n.final.content)return(0,f.Y)(j.S,{css:rH.noChangesContainer,children:(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===n.status)return(0,f.Y)(j.S,{css:rH.noChangesContainer,children:(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=rG(n.initial.filename),o=rG(n.final.filename);if("ADDED"===n.status)switch(o){case"media":return(0,f.Y)(j.S,{css:rH.noChangesContainer,children:(0,f.Y)(j.S,{css:rH.innerContainer,children:(0,f.Y)(rP.jM,{src:(0,rP.p4)(n.final.content,(0,tg.P7)(n.final.filename)),mime:(0,tg.P7)(n.final.filename),fileName:n.final.filename})})});case"ot":return(0,f.Y)(j.S,{css:rH.noChangesContainer,children:(0,f.Y)(nb.Ay,{filePath:n.final.filename,initialDoc:n.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,f.Y)(j.S,{css:rH.noChangesContainer,children:(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"binary"===i&&"binary"===o?(0,f.Y)(j.S,{css:rH.noChangesContainer,children:(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}):"ot"===i&&"ot"===o?(0,f.Y)(rW,{diff:n,splitOrUnified:t,extensions:r}):(0,f.FD)(j.S,{css:rH.splitContainer,p:8,children:[(0,f.Y)(j.S,{css:rH.splitChild,align:"center",justify:"center",children:(0,f.Y)(rV,{content:n.initial.content,type:i,filename:n.initial.filename,extensions:r})}),(0,f.Y)(j.S,{css:rH.splitChild,children:(0,f.Y)(rV,{content:n.final.content,type:o,filename:n.final.filename,extensions:r})})]})},rj=function(e){var n=e.diff,t=e.folded,r=e.setFolded,i=e.splitOrUnified;return(0,f.FD)(j.S,{css:rH.diffContainer,grow:!0,children:[(0,f.Y)(rz,{folded:t,setFolded:r,diff:n}),t?null:(0,f.Y)(ek.ui,{css:rH.bodyContainer,elevated:!0,children:(0,f.Y)(rZ,{diff:n,splitOrUnified:i})})]},n.id)},rq=t(70876);function rK(e){return(0,f.Y)(ti.Ay,(0,nh._)((0,eg._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M12 8.75a3.25 3.25 0 1 0 0 6.5 3.25 3.25 0 0 0 0-6.5Zm-4.7 2.562a4.751 4.751 0 0 1 9.401.004.748.748 0 0 1 .309-.066h5.95a.75.75 0 1 1 0 1.5h-5.95a.748.748 0 0 1-.309-.066 4.751 4.751 0 0 1-9.402.004.747.747 0 0 1-.299.062H1.05a.75.75 0 0 1 0-1.5H7c.106 0 .208.022.3.062Z",clipRule:"evenodd"})}))}var r$=h.ZU.Object({type:h.ZU.Literal("git"),revision:h.ZU.String()}),rJ=h.ZU.Object({type:h.ZU.Literal("fs")}),rQ=h.ZU.Object({type:h.ZU.Literal("generatedFile"),content:h.ZU.String()}),rX=h.ZU.Object({left:h.ZU.Object({path:h.ZU.String(),data:h.ZU.Union([r$,rJ,rQ])}),right:h.ZU.Object({path:h.ZU.String(),data:h.ZU.Union([r$,rJ,rQ])})}),r0=h.ZU.Object({type:h.ZU.Literal("patch"),diff:rf.Zw}),r1=h.ZU.Object({type:h.ZU.Literal("diff"),data:h.ZU.Union([rX,h.ZU.Array(rX),r0])}),r2=(0,eo.x)({container:[ea.wp.p(8)],singleDiffWrapper:[ea.wp.width("100%"),ea.wp.backgroundColor.backgroundHigher,ea.wp.borderRadius(4),ea.wp.mb(8)],accordionBody:[ea.wp.border({direction:"x",width:1,color:N.LU.backgroundHigher}),ea.wp.border({direction:"bottom",width:1,color:N.LU.backgroundHigher}),ea.wp.backgroundColor.backgroundDefault,ea.wp.borderRadius(0,0,4,4)]});function r4(e){var n=e.left,t=e.right,r=e.splitOrUnified,i=(0,v._)((0,y.useState)(!0),2),o=i[0],a=i[1],l=ry(n.path,n.data),s=l.fileContent,c=l.loading,u=ry(t.path,t.data),d=u.fileContent,p=u.loading,h="generatedFile"===n.data.type?n.data.content:null,m="generatedFile"===t.data.type?t.data.content:null,g=s||h,w=d||m,b=(0,y.useMemo)(function(){return null===g&&null!==w?rp.Os.ADDED:null!==g&&null===w?rp.Os.DELETED:rp.Os.MODIFIED},[g,w]),S={id:"".concat(n.path,"-").concat(t.path),status:b,loading:c||p,initial:{filename:(0,tg.WP)(n.path),path:(0,tg._6)(n.path),content:null!=g?g:""},final:{filename:(0,tg.WP)(t.path),path:(0,tg._6)(t.path),content:null!=w?w:""}};return(0,f.Y)(j.S,{css:r2.singleDiffWrapper,children:(0,f.Y)(O.A,{expanded:o,onClick:function(){return a(function(e){return!e})},headerContent:(0,f.FD)(j.S,{row:!0,gap:8,children:[(0,f.Y)(ty.A,{path:n.path}),(0,f.Y)(V.EY,{multiline:!1,children:n.path})]}),children:(0,f.Y)(j.S,{css:r2.accordionBody,p:4,children:(0,f.Y)(rZ,{splitOrUnified:r,diff:S})})})})}function r5(e){var n=e.patch;return(0,f.Y)(j.S,{css:r2.container,children:(0,f.Y)(rq.A,{patch:n.diff,compressed:!1,background:null})})}var r3={Content:function(e){var n=e.pane.data,t=(0,v._)((0,y.useState)("Split"),2),r=t[0],i=t[1],o=(0,y.useMemo)(function(){return Array.isArray(n)?n:[n]},[n]);return"type"in n&&"patch"===n.type?(0,f.Y)(r5,{patch:n}):(0,f.FD)(j.S,{gap:8,css:r2.container,children:[(0,f.Y)(rB,{value:r,onChange:i}),(0,f.Y)(j.S,{children:o.map(function(e){return"left"in e&&"right"in e?(0,f.Y)(r4,{left:e.left,right:e.right,splitOrUnified:r},e.left.path+e.right.path):null})})]})},Icon:function(){return(0,f.Y)(rK,{})},getTitle:function(e){var n=e.data,t=Array.isArray(n)?n:[n];if(1===t.length){var r=t[0];if("type"in r&&"patch"===r.type){var i=r.diff,o=i.labelA,a=i.labelB;return o===a?"Diff: ".concat((0,tg.WP)(null!=o?o:"")):"Diff: ".concat(o," - ").concat(a)}if("left"in r&&"right"in r)return r.left.path===r.right.path?"Diff: ".concat((0,tg.WP)(r.left.path)):"Diff: ".concat((0,tg.WP)(r.left.path)," - ").concat((0,tg.WP)(r.right.path))}return"Diff: ".concat(t.length," files")},category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(r1,e)}},r7=t(96907),r6=t.n(r7);function r8(){var e=(0,ev._)(["\n  query WorkspaceDraw($id: String!) {\n    currentUser {\n      id\n      username\n    }\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n      }\n    }\n  }\n"]);return r8=function(){return e},e}var r9={},ie=(0,ey.J1)(r8()),it=t(34140),ir=t(17523),ii=function(e){return e.reduce(function(e,n){return e[n.id]=n,e},{})};let io=function(e,n,t){if(!e)return[];var r,i=n(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=t.reduce(function(e,n){var t,r,a;return n.id===(null==(t=o.editingElement)?void 0:t.id)||n.id===(null==(r=o.resizingElement)?void 0:r.id)||n.id===(null==(a=o.draggingElement)?void 0:a.id)||(i[n.id]&&i[n.id].version>n.version||i[n.id]&&i[n.id].version===n.version&&i[n.id].versionNonce!==n.versionNonce&&i[n.id].versionNonce<n.versionNonce?e.push(i[n.id]):e.push(n),delete i[n.id]),e},[])).concat.apply(r,(0,em._)(Object.values(i)))},ia=function(){var e,n,t=new Promise(function(t,r){e=t,n=r});return t.resolve=e,t.reject=n,t};var il=t(72457),is=t(43303),ic=t(83585),iu=(0,nW.AH)(".excalidraw.excalidraw-modal-container.excalidraw--mobile{margin-top:",ic.uF-1,"px;}");function id(e){var n,r,i,o,a,l,s=e.fs,c=e.filePath,u=(0,v._)((0,y.useState)(void 0),2),d=u[0],p=u[1],h=(0,it.A)(),m=(0,y.useRef)(function(e){return(0,em._)(e)}),g=(0,y.useRef)(function(e){return -1}),S=(0,y.useRef)(),Y=(0,y.useRef)(ia()),_=(0,nd.I)(function(e){return function(n){return e.excalidraw.update.rpc(n)}},[]);(0,y.useEffect)(function(){Promise.all([t.e(9248),t.e(3133)]).then(t.t.bind(t,5514,23)).then(function(e){m.current=function(n){return n.filter(function(n){return n.isDeleted||!e.isInvisiblySmallElement(n)})},g.current=e.getSceneVersion,p(e.Excalidraw)})},[]);var A=(0,y.useCallback)(function(){return S.current},[]),C=(n={variables:{id:(0,P.A)()},ssr:!1},r=(0,eg._)({},r9,n),ew.I(ie,r)),k=C.data,x=C.loading,D=(null==k||null==(l=k.currentUser)?void 0:l.username)||"",E=(0,is.D)().isDarkColorScheme,I=(0,il.Q4)(),T=(0,ir.A)(),F=null==T?void 0:T.color,L=(0,v._)((0,y.useState)(new Map),2),U=L[0],O=L[1],M=(0,v._)((0,y.useState)(-1),2),H=M[0],B=M[1],z=(0,y.useRef)((0,nj.A)()).current;(0,y.useEffect)(function(){function e(){return(e=(0,w._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!k||!k.currentUser)return[2];return[4,Y.current];case 1:return t.sent(),e=A().getAppState().collaborators,n=new Map,I.forEach(function(t){if(t.username!==(null==k||null==(r=k.currentUser)?void 0:r.username)){var r,i=e.get(t.username)||{};n.set(t.username,(0,nh._)((0,eg._)({},i),{username:t.username,color:{background:t.color,foreground:t.color}}))}}),A().updateScene({collaborators:n}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[k,I,A]);var W=(0,y.useCallback)((i=(0,w._)(function(e,n){var t,r,i,o,a,l;return(0,b.YH)(this,function(s){n||(e=e.filter(function(e){return!U.has(e.id)||e.version>U.get(e.id)})),t=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)l=a.value,U.set(l.id,l.version),O(new Map(U))}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return null==_||_({paneId:z,path:c,$kind:"elements",elements:JSON.stringify(e)}),[2]})}),function(e,n){return i.apply(this,arguments)}),[_,z,c,U]);(0,nC.b)((o=(0,w._)(function(e,n){var t,r,i,o,a,l,s,u,d,p,f,h,m,v,y,w,S;return(0,b.YH)(this,function(b){switch(b.label){case 0:return t=n.signal,r=e.excalidraw.listen.subscribe({paneId:z,path:c},{signal:t}).resReadable,[4,Y.current];case 1:b.sent(),i=!1,o=!1,b.label=2;case 2:b.trys.push([2,7,8,13]),l=(0,R._)(r),b.label=3;case 3:return[4,l.next()];case 4:if(!(i=!(s=b.sent()).done))return[3,6];if(!(u=s.value).ok)return[2];"collaborator"===u.payload.$kind?(d=A().getAppState().collaborators,f=(p=u.payload).pointer,h=p.selectedElementIds,d.set(u.payload.username,(0,nh._)((0,eg._)({},d.get(u.payload.username)),{pointer:f,selectedElementIds:h,username:u.payload.username})),A().updateScene({collaborators:d})):"elements"===u.payload.$kind?(m=JSON.parse(u.payload.elements),v=io(A(),ii,m),(y=g.current(v))>H&&(B(y),A().updateScene({elements:v}))):"leave"===u.payload.$kind&&((w=A().getAppState().collaborators).delete(u.payload.username),A().updateScene({collaborators:w})),b.label=5;case 5:return i=!1,[3,3];case 6:return[3,13];case 7:return S=b.sent(),o=!0,a=S,[3,13];case 8:if(b.trys.push([8,,11,12]),!(i&&null!=l.return))return[3,10];return[4,l.return()];case 9:b.sent(),b.label=10;case 10:return[3,12];case 11:if(o)throw a;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return o.apply(this,arguments)}),[z,c,A,H,g]),(0,y.useEffect)(function(){function e(){return(e=(0,w._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!c||!s)return[2];return[4,s.readFile(c)];case 1:if(!("content"in(e=t.sent())))return[3,3];return n=JSON.parse(e.content.toString()||"{}"),[4,Y.current];case 2:t.sent(),A().updateScene({elements:n.elements||[],appState:n.appState||{}}),A().scrollToContent(),t.label=3;case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[c,s,A]);var G=(0,y.useCallback)(r6()((a=(0,w._)(function(e,n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(t=e.filter(function(e){return!e.isDeleted}),!c)return[3,2];return[4,s.writeFile(c,e9.A.from(JSON.stringify({elements:t,files:n})))];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e,n){return a.apply(this,arguments)}),350),[c]),V=(0,y.useCallback)(function(e){var n=g.current(e);n>H&&(W(m.current(e),!1),B(n))},[W,m,g]);return(0,f.FD)(j.S,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:F?"0 3px 0 3px ".concat(F):"none",backgroundColor:N.LU.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){null==_||_({paneId:z,path:c,$kind:"leave"})},children:[d&&!x?(0,f.Y)(d,{ref:function(e){e&&(S.current=e,e.readyPromise&&e.readyPromise.then(function(e){Y.current.resolve(e)}).catch(function(e){Y.current.reject(e)}))},UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:E?"dark":"light",onPointerUpdate:function(e){var n=e.pointer;null==_||_({paneId:z,path:c,$kind:"collaborator",pointer:n,selectedElementIds:A().getAppState().selectedElementIds||{}})},onChange:function(e,n,t){V(e),g.current(e)>H&&G(e,t)},name:D}):null,h?(0,f.Y)(nW.mL,{styles:[iu]}):null]})}function ip(e){var n=e.fs,t=e.filePath;return(0,f.Y)(id,{fs:n,filePath:t},t)}var ih=t(66830),im=h.ZU.Object({type:h.ZU.Literal("draw"),data:h.ZU.Object({path:h.ZU.String()})}),ig={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,f.Y)(iv,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,f.Y)(ih.A,{size:n})},getTitle:function(e){return(0,tg.WP)(e.data.path)},category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(im,e)}};function iv(e){var n=e.path,t=e.performPaneOperation,r=(0,A.A)().fs,i=(0,ts.KA)({path:n,performPaneOperation:t});return(0,tv.Qt)(function(){if(i)return{commands:[{commands:i}]}},[i]),(0,f.FD)(f.FK,{children:[(0,f.Y)(ts.ou,{path:n,performPaneOperation:t}),(0,f.Y)(ts.UC,{children:(0,f.Y)(ip,{fs:r,filePath:n})})]})}var iy=t(86215),iw=t(67611),ib=h.ZU.Object({type:h.ZU.Literal("envEditor")}),iS={Content:function(e){var n=e.options.performPaneOperation;return(0,f.Y)(iy.Ay,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,f.Y)(iw.A,{size:n})},getTitle:function(){return"Secrets"},description:"Store sensitive information (like API keys) securely in your App",category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(ib,e)}},iY=t(64912),i_=t(21762),iA=t(50681),iC=t(89229),ik=t(67313),ix=t(66890),iD=t(35992),iE=t(15311),iR=(0,iE.v)(["sidebarTransform","sidebarWidth","sidebarHeight","paddingLeft","sidebarOpacity","sidebarPointerEvents","sidebarBorder","sidebarBlanketPointerEvents","sidebarBlanketOpacity"]),iI=iR.cssVars,iT=iR.styleTokens;function iF(e){var n,t,r="calc(100% - ".concat(N.LU.space16,")"),i="translate(".concat(N.LU.space8,", ").concat(N.LU.space8,")");return e.open?(n={},(0,g._)(n,iI.paddingLeft,e.overlayed?"0":e.width+6+"px"),(0,g._)(n,iI.sidebarWidth,e.width+"px"),(0,g._)(n,iI.sidebarOpacity,"1"),(0,g._)(n,iI.sidebarBlanketOpacity,e.overlayed?"1":"0"),(0,g._)(n,iI.sidebarBlanketPointerEvents,e.overlayed?"all":"none"),(0,g._)(n,iI.sidebarPointerEvents,"all"),(0,g._)(n,iI.sidebarTransform,i),(0,g._)(n,iI.sidebarHeight,r),n):(t={},(0,g._)(t,iI.paddingLeft,"0"),(0,g._)(t,iI.sidebarWidth,e.width+"px"),(0,g._)(t,iI.sidebarOpacity,"0"),(0,g._)(t,iI.sidebarBlanketOpacity,"0"),(0,g._)(t,iI.sidebarBlanketPointerEvents,"none"),(0,g._)(t,iI.sidebarPointerEvents,"none"),(0,g._)(t,iI.sidebarTransform,i),(0,g._)(t,iI.sidebarHeight,r),t)}var iP=t(92557),iL=t(54682),iU=t(73745),iN=t(16005),iO=t(95341),iM=t(96034),iH=t(78008),iB=t(96502),iz=t(1441),iW="The ".concat(iM.Lm," plan includes Basic ").concat(iY.BP,". Upgrade for more capabilities."),iG=(0,eo.x)({pill:[ea.wp.cursor.pointer]}),iV=function(e){var n=(0,iz.A)(),t=n.showAiUpsell,r=n.refetch,i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1];return t?(0,f.FD)(f.FK,{children:[(0,f.Y)(Z.m_,{tooltip:iW,children:(0,f.Y)(iB.a,{css:iG.pill,text:"BASIC",onClick:function(){return a(!0)}})}),(0,f.Y)(iU.default,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",onPurchaseComplete:function(){var n;null==(n=e.onPurchaseComplete)||n.call(e),r()},reloadPageAfterPurchaseComplete:!0,contextualUpsell:(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(V.EY,{variant:"subheadBig",children:"Upgrade for Advanced AI"}),(0,f.Y)(V.EY,{multiline:!0,children:"Get the most advanced model with higher quality responses and generation"})]}),headingText:"Upgrade for Advanced AI",subHeadingText:"Get the most advanced model with higher quality responses and generation",analyticsContext:{upgrade:{context:"ai_chat_upsell"}},highlightUpsell:"agent"})]}):null},iZ=t(90209),ij=t(95553),iq=t(5142),iK=ea.kL.max(520),i$=(0,eo.x)({upgradeSurface:[ea.wp.center,ea.wp.borderRadius("container")],upgradeSurfaceAiItems:[(0,g._)({},iK,[ea.wp.colWithGap(16)])],upgradeSurfaceAiItem:[ea.wp.colWithGap(8),ea.wp.align.center,ea.wp.maxWidth(220),ea.wp.textAlign.center],upgradeSurfaceAiItemTitle:[ea.wp.rowWithGap(4),ea.wp.align.center],shortText:[ea.wp.display.none,(0,g._)({},iK,[ea.wp.display.block])],longText:[ea.wp.display.block,(0,g._)({},iK,[ea.wp.display.none])]});function iJ(){return(0,f.FD)(ek.ui,{elevated:!0,css:i$.upgradeSurface,p:16,gap:16,children:[(0,f.FD)(j.S,{children:[(0,f.Y)(j.S,{css:i$.longText,children:(0,f.Y)(iH.A,{context:"ai_chat_upsell",text:"Upgrade to Replit ".concat(iM.en," for more powerful AI"),variant:"default",highlightUpsell:"assistant"})}),(0,f.Y)(j.S,{css:i$.shortText,children:(0,f.Y)(iH.A,{context:"ai_chat_upsell",text:"Upgrade to ".concat(iM.en),variant:"default",highlightUpsell:"assistant",css:i$.shortText})})]}),(0,f.FD)(j.S,{css:i$.upgradeSurfaceAiItems,row:!0,gap:16,children:[(0,f.FD)(j.S,{css:i$.upgradeSurfaceAiItem,children:[(0,f.FD)(j.S,{css:i$.upgradeSurfaceAiItemTitle,children:[(0,f.Y)(iq.A,{size:16}),(0,f.Y)(V.EY,{variant:"subheadDefault",children:iY.BP}),(0,f.Y)(iB.a,{text:"ADVANCED"})]}),(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:iY.JY})]}),(0,f.FD)(j.S,{css:i$.upgradeSurfaceAiItem,children:[(0,f.FD)(j.S,{css:i$.upgradeSurfaceAiItemTitle,children:[(0,f.Y)(iZ.l,{size:16}),(0,f.Y)(V.EY,{variant:"subheadDefault",children:"Agent"})]}),(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:iY.RB})]})]})]})}function iQ(){var e=(0,ij.A)();return(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(V.Y9,{level:1,variant:"subheadDefault",children:iY.BP}),(0,f.Y)(iV,{onPurchaseComplete:e})]})}var iX=t(36073),i0=t(71872),i1="Connection to ".concat(iY.BP," lost. Try refreshing the page."),i2=(0,eo.x)({root:[{justifySelf:"end"}],errorBannerContainer:[ea.wp.display.flex,ea.wp.align.center,ea.wp.flex.grow(1),ea.wp.minHeight(32),ea.wp.maxHeight(300),ea.wp.overflow("auto")],errorBanner:[ea.wp.minHeight("fit-content"),ea.wp.p(8)]});function i4(){return(0,f.Y)(j.S,{css:i2.root,px:8,pb:8,children:(0,f.Y)(j.S,{css:i2.errorBannerContainer,justify:"center",children:(0,f.Y)(j.S,{css:i2.errorBanner,children:(0,f.Y)(iX.N,{icon:(0,f.Y)(i0.A,{}),colorway:"red",text:i1})})})})}var i5=t(57731),i3=function(){var e=(0,iz.A)(),n=e.showAiUpsell,t=e.refetch,r=(0,v._)((0,y.useState)(!1),2),i=r[0],o=r[1],a=(0,ij.A)();return n?(0,f.FD)(f.FK,{children:[(0,f.Y)(j.S,{tag:"button",css:i7.bannerWrapper,onClick:function(){return o(!0)},children:(0,f.Y)(iX.N,{icon:(0,f.Y)(i5.A,{}),colorway:"yellow",text:"You’re using the free Basic AI model. Upgrade to get better AI responses and more accurate code generation and analysis.",css:i7.banner})}),(0,f.Y)(iU.default,{isOpen:i,onClose:function(){return o(!1)},onPurchaseComplete:function(){t(),a()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(V.EY,{variant:"subheadBig",children:"Upgrade for Advanced AI"}),(0,f.Y)(V.EY,{multiline:!0,children:"Get the most advanced model with higher quality responses and generation"})]}),headingText:"Upgrade for Advanced AI",subHeadingText:"Get the most advanced model with higher quality responses and generation",analyticsContext:{upgrade:{context:"ai_chat_upsell"}},highlightUpsell:"agent"})]}):null},i7=(0,eo.x)({bannerWrapper:[ea.wp.cursor.pointer,ea.wp.textAlign.left],banner:[ea.wp.borderRadius(0)]}),i6=t(88645);function i8(e){return e.error&&e.error.type!==I.fqQ.EVENT_ERROR_TYPE_UNKNOWN?e.error.type:null}var i9=t(60077);let oe={direction:"reverse",state:{iterativeAgentEvents:[],didProcessLatestProposedActionsEvent:!1},transformer:function(e,n){var t=e.contents.contents;if((0,F.VF)(t,"messageEventContents")){var r=(0,F.QN)(t);if(e.sender.type===I.utd.USER)return{type:"userMessage",sender:{id:e.sender.id},uploadedFiles:r.uploadedFiles,codeReference:r.codeReference,content:r.content,targetedElement:r.targetedElement};var i,o,a,l,s,c,u,d,p,f,h,m,g,v,y,w,b,S,Y,_,A,C,k,x,D,E=i8(e),R=function(e){if(!(0,F.VF)(e,"proposedFileChanges"))return{fileChanges:[],commitId:"",summary:""};var n=(0,F.QN)(e),t=n.changes,r=n.commitId,i=n.summary;return{fileChanges:t.map(function(e){return(0,nh._)((0,eg._)({},e),{filePath:(0,i9.iD)(e.filePath)})}),commitId:r,summary:i}}((0,F.QN)(t).extraActions),P=R.fileChanges,L=R.commitId,U=R.summary,N=(0,F.QN)(t).assistantProposedActions,O=(0,T.k)(e),M=(o=N,a=P,l=(i=e.id,n.iterativeAgentEvents.filter(function(e){return(0,F.VF)(e.contents,"installingPackages")||(0,F.VF)(e.contents,"installedPackages")?(0,F.QN)(e.contents).eventWhichProposedPackageInstall===i:(0,F.VF)(e.contents,"startedShellExecution")||(0,F.VF)(e.contents,"finishedShellExecution")?(0,F.QN)(e.contents).eventWhichProposedShellExecution===i:(0,F.VF)(e.contents,"appliedRunConfiguration")?(0,F.QN)(e.contents).eventWhichProposedRunConfiguration===i:(0,F.VF)(e.contents,"appliedDeploymentConfiguration")?(0,F.QN)(e.contents).eventWhichProposedDeploymentConfiguration===i:!!(0,F.VF)(e.contents,"appliedWorkflowConfiguration")&&(0,F.QN)(e.contents).eventWhichProposedWorkflowConfiguration===i})),h=(null!=(s=null==o?void 0:o.shellCommands)?s:[]).map(function(e){var n,t,r;return l.forEach(function(r){(0,F.VF)(r.contents,"startedShellExecution")&&r.contents.startedShellExecution.messageContentsOffset===e.messageContentsOffset&&(n=r.contents.startedShellExecution),(0,F.VF)(r.contents,"finishedShellExecution")&&r.contents.finishedShellExecution.messageContentsOffset===e.messageContentsOffset&&(t=r.contents.finishedShellExecution)}),t&&t.processId===(null==n?void 0:n.processId)?{state:"finished",command:e.command,isDangerous:e.isDangerous,messageContentsOffset:e.messageContentsOffset,workingDirectory:e.workingDirectory,commandOutput:t.commandOutput,exitCode:t.exitCode}:n?{state:"running",command:e.command,isDangerous:e.isDangerous,messageContentsOffset:e.messageContentsOffset,workingDirectory:e.workingDirectory,processId:n.processId}:{state:"proposed",command:e.command,isDangerous:e.isDangerous,messageContentsOffset:e.messageContentsOffset,workingDirectory:e.workingDirectory}}),m=(null!=(c=null==o?void 0:o.packageInstalls)?c:[]).map(function(e){var n,t,r;return l.forEach(function(r){(0,F.VF)(r.contents,"installingPackages")&&r.contents.installingPackages.messageContentsOffset===e.messageContentsOffset&&(n=r.contents.installingPackages),(0,F.VF)(r.contents,"installedPackages")&&r.contents.installedPackages.messageContentsOffset===e.messageContentsOffset&&(t=r.contents.installedPackages)}),t&&t.processId===(null==n?void 0:n.processId)?{state:"installed",language:e.language,packageList:e.packageList,messageContentsOffset:e.messageContentsOffset,installationOutput:t.installationOutput,exitCode:t.exitCode}:n?{state:"installing",language:e.language,packageList:e.packageList,messageContentsOffset:e.messageContentsOffset,processId:n.processId}:{state:"proposed",language:e.language,packageList:e.packageList,messageContentsOffset:e.messageContentsOffset}}),g=null!=(u=o.workspaceToolNudges)?u:[],v=(null!=(d=o.runConfigurations)?d:[]).map(function(e){var n=l.some(function(n){return!!(0,F.VF)(n.contents,"appliedRunConfiguration")&&n.contents.appliedRunConfiguration.messageContentsOffset===e.messageContentsOffset});return(0,eg._)({state:n?"applied":"proposed"},e)}),y=(null!=(p=o.workflowConfigurations)?p:[]).map(function(e){var n=l.some(function(n){return!!(0,F.VF)(n.contents,"appliedWorkflowConfiguration")&&n.contents.appliedWorkflowConfiguration.messageContentsOffset===e.messageContentsOffset});return(0,eg._)({state:n?"applied":"proposed"},e)}),w=(null!=(f=o.deploymentConfigurations)?f:[]).map(function(e){var n=l.some(function(n){return!!(0,F.VF)(n.contents,"appliedDeploymentConfiguration")&&n.contents.appliedDeploymentConfiguration.messageContentsOffset===e.messageContentsOffset});return(0,eg._)({state:n?"applied":"proposed"},e)}),b=(0,em._)(h.map(function(e){return(0,F.hT)("shellCommand",e)})).concat((0,em._)(m.map(function(e){return(0,F.hT)("packageInstall",e)})),(0,em._)(a.map(function(e){return(0,F.hT)("fileChange",e)})),(0,em._)(g.map(function(e){return(0,F.hT)("workspaceToolNudge",e)})),(0,em._)(v.map(function(e){return(0,F.hT)("runConfiguration",e)})),(0,em._)(w.map(function(e){return(0,F.hT)("deploymentConfiguration",e)})),(0,em._)(y.map(function(e){return(0,F.hT)("workflowConfiguration",e)}))).sort(function(e,n){return(0,F.QN)(e).messageContentsOffset-(0,F.QN)(n).messageContentsOffset}),S=h.length>0,Y=m.length>0,_=v.length>0,A=w.length>0,C=y.length>0,{sortedActions:b,hasAnyWorkspaceProposedActions:S||Y||_||A||C}),H=M.sortedActions,B=M.hasAnyWorkspaceProposedActions,z=!1;return n.didProcessLatestProposedActionsEvent||(n.didProcessLatestProposedActionsEvent=z=N.didCountEditRequest||N.workflowConfigurations.length>0),{type:"assistantMessage",content:r.content,created:e.created,state:e.state,intent:{value:r.intent,kind:"message"},error:E,usedModelSelector:r.usedModelSelector,ragSources:function(e){var n=e.sources;if(null==n)return[];var t=n.slice().sort(function(e,n){return e.url.localeCompare(n.url)});return(0,i6.Qq)(t,"url")}(r),isDebugMessage:!1,sessionId:e.sessionId,proposedActions:(0,nh._)((0,eg._)({},N),{commitId:null!=(k=N.commitId)?k:L,summary:null!=(x=N.summary)?x:U,fileChanges:P,sortedActions:H,didCreateCheckpoint:null!=(D=N.didCreateCheckpoint)&&D,didCountEditRequest:O,hasAnyWorkspaceProposedActions:B}),isLatestProposedActionsEvent:z}}if((0,F.VF)(t,"inlineActionEventContents")){var W=(0,F.QN)(t);if(e.sender.type===I.utd.USER)return{type:"userMessage",sender:{id:e.sender.id},codeReference:W.codeReference,content:W.content};var G=i8(e);return{type:"assistantMessage",content:W.content,created:e.created,state:e.state,intent:{value:W.messageType,kind:"inline"},error:G,usedModelSelector:W.usedModelSelector,ragSources:[],isDebugMessage:W.messageType===I.Z1T.DEBUGGER,sessionId:e.sessionId,proposedActions:null,isLatestProposedActionsEvent:!1}}if((0,F.VF)(t,"iterativeAgentEventContents")){var V=(0,F.QN)(t);n.iterativeAgentEvents.push(V);var Z=(0,T.zL)(e);if(!Z)return;return{type:"assistantAction",contents:V,created:e.created,sessionId:e.sessionId,eventIdWhichProposedAction:Z}}}};var on=t(59602),ot=t(57855),or=t(43680),oi=t(12421),oo=(0,eo.x)({root:[ea.wp.borderRadius(4),ea.wp.border({color:N.LU.outlineDimmest})],header:[ea.wp.border({color:N.LU.outlineDimmest,direction:"bottom"})],button:[{borderRadius:0,borderTopLeftRadius:4}]});function oa(e){var n=e.codeReference,t=e.onClick;return(0,f.FD)(ek.ui,{css:oo.root,elevated:!0,children:[(0,f.Y)(j.S,{css:oo.header,row:!0,gap:4,children:(0,f.Y)(M.$n,{css:oo.button,size:"small",variant:"nofill",iconLeft:(0,f.Y)(ty.A,{size:12,path:n.filePath}),iconRight:(0,f.Y)(K.A,{}),text:"".concat(n.filePath," ").concat(n.range.lineFrom,":").concat(n.range.lineTo),onClick:t})}),(0,f.Y)(x.A,{lineNumbers:!0,lineNumbersStart:n.range.lineFrom,language:n.language,code:n.code,filePath:n.filePath})]})}var ol=t(83692),os=t(40338),oc=t(94324);function ou(e){return(0,y.useCallback)(function(n){var t,r="string"==typeof n?{path:n}:n;e({type:null!=(t=(0,tt.QY)(r))?t:"codeEditor",data:r})},[e])}var od=(0,eo.x)({event:[{justifyContent:"end"}],userMessageAttachments:[ea.wp.maxWidth("100%")],message:[ea.wp.maxWidth(400),ea.wp.px(8),ea.wp.py(6),ea.wp.borderRadius(),ea.wp.colorMixBg(N.LU.accentPrimaryDefault,"transparent",.4)],codeReference:[{width:"100%"}]}),op=(0,y.memo)(function(e){var n,t=e.data,r=e.openPane,i=e.readFile,o=ou(r);return t?(0,f.Y)(of,{openFile:o,content:t.content,userId:Number(t.sender.id),codeReference:t.codeReference,uploadedFiles:t.uploadedFiles,readFile:i,targetedElement:null!=(n=t.targetedElement)?n:null}):null});function of(e){var n=e.openFile,t=e.readFile,r=e.content,i=e.userId,o=e.codeReference,a=e.uploadedFiles,l=e.targetedElement,s=(0,ol.Vd)({openFile:n,messageSenderType:I.utd.USER});return(0,f.FD)(j.S,{css:od.event,px:16,pt:32,pb:16,row:!0,gap:8,children:[(0,f.FD)(j.S,{grow:!0,shrink:!0,gap:8,align:"end",children:[a?(0,f.Y)(oh,{attachments:a,readFile:t}):null,(0,f.FD)(j.S,{css:od.message,children:[(0,f.Y)(ol.d2,{text:r,codeComponent:s,messageState:I.qOk.COMPLETE}),l?(0,f.Y)(os.l,{targetedElement:l}):null]}),(null==o?void 0:o.code)?(0,f.Y)(j.S,{css:od.codeReference,children:(0,f.Y)(oa,{codeReference:o,onClick:function(){var e=null==o?void 0:o.filePath;e&&n({path:e,line:null==o?void 0:o.range.lineTo})}})}):null]}),(0,f.Y)(j.S,{pt:6,children:(0,f.Y)(oc.H,{id:i,showAvatarOnly:!0})})]})}function oh(e){var n=e.attachments,t=e.readFile;return 0===n.length?null:(0,f.Y)(j.S,{css:od.userMessageAttachments,children:(0,f.Y)(ot.A,{fileAttachments:n.map(function(e){return(0,f.Y)(or.m1,{attachment:e,readFile:t,getAttachmentTypeDisclaimer:(0,oi.F)({aiName:iY.BP})},e.path)})})})}var om=t(86891),og=t(1893),ov=t(75081),oy=t(7868),ow=t(88747),ob=t(85051),oS=t(91506),oY=(0,eo.x)({container:[ea.wp.py(4),ea.wp.px(8),ea.wp.borderRadius(4),ea.wp.flex.growAndShrink(1),ea.wp.rowWithGap(8),ea.wp.align.center,ea.wp.border({color:"transparent"}),{backgroundColor:N.LU.interactiveBackground,"&.generation-complete":[ob.b.filledAndOutlined],"&.generation-in-progress":[n$.S.foregroundPulse()],"&.is-applied":[ea.wp.py(2)]}],iconCol:[ea.wp.py(4),{alignSelf:"flex-start"}],textCol:[ea.wp.flex.growAndShrink(1),ea.wp.colWithGap(4),ea.wp.overflow("hidden")],filePathAndDiffLines:[ea.wp.rowWithGap(4),ea.wp.justify.spaceBetween,ea.wp.align.center],filePath:[ea.wp.flex.shrink(1)],diffLineStatsPill:[ea.wp.fontWeight.medium],editSummary:[{".is-reverted &":[ea.wp.color.foregroundDimmest,{textDecoration:"line-through"}]}]});function o_(e){var n=e.filePath,t=e.content,r=e.changeSummary,i=e.changeStatus,o=e.lineStats,a=e.onOpenDiff,l=e.state,s=l===I.u5I.GENERATION_COMPLETE,c=(0,y.useCallback)(function(){s&&a(n,{type:"generatedFile",content:t})},[n,a,s,t]);return(0,f.FD)(ek.ui,{css:oY.container,className:"is-".concat(i.state," generation-").concat(function(e){switch(e){case I.u5I.GENERATION_IN_PROGRESS:return"in-progress";case I.u5I.GENERATION_REGENERATING:return"regenerating";case I.u5I.GENERATION_COMPLETE:return"complete";case I.u5I.GENERATION_ERROR:return"error";default:return"unknown"}}(l)),onClick:c,children:[(0,f.Y)(j.S,{css:oY.iconCol,children:(0,f.Y)(ty.A,{path:n,fill:"reverted"===i.state?N.LU.foregroundDimmest:void 0})}),(0,f.FD)(j.S,{css:oY.textCol,children:[(0,f.FD)(j.S,{css:oY.filePathAndDiffLines,children:[(0,f.Y)(V.EY,{variant:"text",color:"default",multiline:!1,css:oY.filePath,children:n}),"reverted"===i.state?(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(oS.A,{}),(0,f.Y)(V.EY,{variant:"text",color:"dimmer",children:"Reverted"})]}):s?(0,f.Y)(oC,{filePath:n,lineStats:o}):null]}),(0,f.Y)(j.S,{css:oY.editSummary,children:(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:r})})]})]})}function oA(e){var n=e.filePath,t=e.linesAdded,r=e.linesRemoved,i=e.onOpenDiff,o=e.commitHash;return(0,f.FD)(ek.ui,{css:oY.container,className:"is-applied generation-complete",onClick:function(){return i(n,{type:"git",revision:o})},children:[(0,f.Y)(j.S,{css:oY.iconCol,children:(0,f.Y)(ty.A,{path:n})}),(0,f.Y)(j.S,{css:oY.textCol,children:(0,f.FD)(j.S,{css:oY.filePathAndDiffLines,children:[(0,f.Y)(V.EY,{variant:"text",color:"default",children:n}),(0,f.Y)(oC,{filePath:n,lineStats:{added:t,removed:r}})]})})]})}function oC(e){var n=e.lineStats;return null==n?null:(0,f.FD)(j.S,{row:!0,gap:4,children:[(0,f.Y)(W.a,{css:oY.diffLineStatsPill,compact:!0,colorway:"positive",text:"+".concat(n.added)}),(0,f.Y)(W.a,{css:oY.diffLineStatsPill,compact:!0,colorway:"negative",text:"-".concat(n.removed)})]})}var ok=t(9077);function ox(e){var n=e.sessionId,t=e.eventIdWhichProposedShellExecution,r=(0,S.NC)(),i=(0,D.J2)(r.sessions.get(n));return{sendStartedShellExecutionMessage:(0,y.useCallback)(function(e){var n=e.processId,r=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedShellExecution:t,processId:n,messageContentsOffset:r}})},[t,i]),sendFinishedShellExecutionMessage:(0,y.useCallback)(function(e){var n=e.commandOutput,r=e.exitCode,o=e.processId,a=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedShellExecution:t,commandOutput:n,exitCode:r,processId:o,messageContentsOffset:a}})},[t,i])}}function oD(e){var n=e.sessionId,t=e.eventIdWhichProposedPackageInstall,r=(0,S.NC)(),i=(0,D.J2)(r.sessions.get(n));return{sendInstallingPackagesMessage:(0,y.useCallback)(function(e){var n=e.processId,r=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedPackageInstall:t,processId:n,messageContentsOffset:r}})},[t,i]),sendInstalledPackagesMessage:(0,y.useCallback)(function(e){var n=e.installationOutput,r=e.exitCode,o=e.processId,a=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedPackageInstall:t,installationOutput:n,messageContentsOffset:a,exitCode:r,processId:o}})},[t,i])}}function oE(e){var n=e.sessionId,t=e.eventIdWhichProposedRunConfiguration,r=(0,S.NC)(),i=(0,D.J2)(r.sessions.get(n));return(0,y.useCallback)(function(e){var n=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedRunConfiguration:t,messageContentsOffset:n}})},[t,i])}function oR(e){var n=e.sessionId,t=e.eventIdWhichProposedWorkflowConfiguration,r=(0,S.NC)(),i=(0,D.J2)(r.sessions.get(n));return(0,y.useCallback)(function(e){var n=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedWorkflowConfiguration:t,messageContentsOffset:n}})},[t,i])}function oI(e){var n=e.sessionId,t=e.eventIdWhichProposedDeploymentConfiguration,r=(0,S.NC)(),i=(0,D.J2)(r.sessions.get(n));return(0,y.useCallback)(function(e){var n=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedDeploymentConfiguration:t,messageContentsOffset:n}})},[t,i])}var oT=t(64254).hp;function oF(){var e=(0,i_._P)({controlName:"flag-agent-sandbox"});return{spawnCommand:(0,nd.I)(function(n){var t;return t=(0,w._)(function(t){var r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return[4,n.shellExec.spawn.rpc({cmd:"bash",args:["-ci",t],env:{REPLIT_MODE:"assistant"},sandbox:e?{rules:[{operation:"Modify",prefixes:["/home/runner/workspace/.replit","/home/runner/workspace/replit.nix","/home/runner/workspace/.cache/replit/","/home/runner/workspace/.local/state/replit/"],message:"A protected file was prevented from being modified. These files are crucial for the correct functionality of the application and should not be modified"},{operation:"Delete",prefixes:["/home/runner/workspace/.replit","/home/runner/workspace/replit.nix","/home/runner/workspace/.local/state/replit/"],message:"A protected file was prevented from being deleted. These files are crucial for the correct functionality of the application and should not be modified"},{operation:"Delete",prefixes:["/home/runner/workspace/.git"],message:"An unsafe operation with git was blocked to protect your application's history and the ability to go back to other points in time."}]}:void 0})];case 1:if(!(r=i.sent()).ok)return[2,r];return[2,{ok:!0,payload:r.payload.id}]}})}),function(e){return t.apply(this,arguments)}},[e]),killProcessId:(0,nd.I)(function(e){var n;return n=(0,w._)(function(n){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.shellExec.kill.rpc({id:n})];case 1:return[2,t.sent()]}})}),function(e){return n.apply(this,arguments)}},[]),waitAndGetCommandOutput:(0,nd.I)(function(e){var n;return n=(0,w._)(function(n){var t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,y,w;return(0,b.YH)(this,function(b){switch(b.label){case 0:t=e.shellExec.monitor.subscribe({id:n}).resReadable,r=-1,i=!1,o=!1,b.label=1;case 1:b.trys.push([1,6,7,12]),l=(0,R._)(t),b.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(s=b.sent()).done))return[3,5];if((c=s.value).ok&&"Finished"===c.payload.state)return r=c.payload.exitCode,[3,5];b.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return u=b.sent(),o=!0,a=u,[3,12];case 7:if(b.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:b.sent(),b.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:d=e.shellExec.readBuffer.subscribe({id:n}).resReadable,p=oT.alloc(0),f=!1,h=!1,b.label=13;case 13:b.trys.push([13,18,19,24]),g=(0,R._)(d),b.label=14;case 14:return[4,g.next()];case 15:if(!(f=!(v=b.sent()).done))return[3,17];if((y=v.value).ok&&"output"===y.payload.$kind&&(p=oT.concat([p,y.payload.output])),y.ok&&"finished"===y.payload.$kind)return[2,{commandOutput:p.toString(),exitCode:r,processId:n}];b.label=16;case 16:return f=!1,[3,14];case 17:return[3,24];case 18:return w=b.sent(),h=!0,m=w,[3,24];case 19:if(b.trys.push([19,,22,23]),!(f&&null!=g.return))return[3,21];return[4,g.return()];case 20:b.sent(),b.label=21;case 21:return[3,23];case 22:if(h)throw m;return[7];case 23:return[7];case 24:return[2]}})}),function(e){return n.apply(this,arguments)}},[])}}var oP=t(56965),oL=t(67382),oU=t(34883),oN=t(66398),oO=t(14792),oM=(0,eo.x)({container:[ea.wp.borderRadius(4),ea.wp.flex.growAndShrink(1),ea.wp.border({width:1,color:N.LU.interactiveBorder}),{"> div":{alignItems:"start"},"> div > button":[ea.wp.mt(4),ea.wp.mr(4)]}],headerWrapper:[ea.wp.width("100%"),ea.wp.flex.growAndShrink(1)],headerInner:[ea.wp.width("100%")],textWrapper:[ea.wp.flex.wrap,ea.wp.font.code,{lineHeight:N.LU.lineHeightDefault}],actionsWrapper:[ea.wp.height("100%")],terminalWrapper:[ea.wp.width("100%"),{"> div":ea.wp.borderRadius(0,0,4,4)}],warningIcon:[ea.wp.mx(4)]});function oH(e){var n=e.command,t=e.eventId,r=e.sessionId,i=e.openPane,o=(0,v._)((0,y.useState)("proposed"!==n.state),2),a=o[0],l=o[1],s=oF(),c=s.spawnCommand,u=s.killProcessId,d=s.waitAndGetCommandOutput,p=ox({sessionId:r,eventIdWhichProposedShellExecution:t}),h=p.sendStartedShellExecutionMessage,m=p.sendFinishedShellExecutionMessage;(0,y.useEffect)(function(){"running"===n.state&&l(!0),"finished"===n.state&&0===n.commandOutput.length&&l(!1)},[n]);var g=(0,y.useCallback)((0,w._)(function(){var e,t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:if(!c||!u||!d)return[2];if("running"!==n.state)return[3,2];return[4,u(n.processId)];case 1:case 6:return o.sent(),[2];case 2:return[4,c(n.command)];case 3:if(!(null==(e=o.sent())?void 0:e.ok))return[2];return[4,h({processId:t=e.payload,messageContentsOffset:n.messageContentsOffset})];case 4:if(!(null==(r=o.sent())?void 0:r.ok))return[2];return[4,d(t)];case 5:if(!(i=o.sent()))return[2];return[4,m((0,nh._)((0,eg._)({},i),{messageContentsOffset:n.messageContentsOffset}))]}})}),[n,u,m,h,c,d]),S=(0,y.useCallback)(function(){i({type:"shell",data:{initialCmd:"".concat(n.command,"\n")}})},[n.command,i]);return(0,f.Y)(oB,{command:n,isExpanded:a,toggleExpanded:function(){return l(function(e){return!e})},openPane:i,onRunInline:g,onRunInShell:S})}function oB(e){var n=e.command,t=e.isExpanded,r=e.toggleExpanded,i=e.openPane,o=e.onRunInline,a=e.onRunInShell,l=(0,f.Y)(oL.A,{}),s="Run";return"running"===n.state&&(l=(0,f.Y)(oO.A,{}),s="Stop"),"finished"===n.state&&(l=(0,f.Y)(oU.A,{}),s="Run again"),(0,f.Y)(ek.ui,{elevated:!0,children:(0,f.Y)(O.A,{css:oM.container,expanded:t,onClick:r,disabled:"proposed"===n.state,chevron:"start",toggleOn:"chevron",headerContent:(0,f.Y)(j.S,{css:oM.headerWrapper,row:!0,children:(0,f.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",css:oM.headerInner,children:[(0,f.Y)(j.S,{row:!0,gap:8,align:"center",css:oM.textWrapper,grow:!0,shrink:!0,children:n.command}),(0,f.Y)(j.S,{align:"start",css:oM.actionsWrapper,grow:0,shrink:0,children:(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(eN.K0,{size:24,alt:"Run in Shell",onClick:a,children:(0,f.Y)(oN.A,{})}),(0,f.Y)(M.$n,{size:"small",colorway:"proposed"===n.state?"primary":void 0,text:s,iconLeft:l,onClick:o}),n.isDangerous?(0,f.Y)(Z.m_,{tooltip:"This command is potentially dangerous!",children:(0,f.Y)(i0.A,{color:N.LU.accentNegativeDefault,css:oM.warningIcon})}):null]})})]})}),children:(0,f.FD)(j.S,{css:oM.terminalWrapper,children:["running"===n.state?(0,f.Y)(ok.A,{processId:n.processId,maxHeight:160,openPane:i,interactive:!0}):null,"finished"===n.state?(0,f.Y)(oP.xd,{output:n.commandOutput,maxHeight:160,openPane:i}):null]})})})}var oz=t(28984);function oW(){var e,n=(0,A.A)().fs;return(0,y.useCallback)((e=(0,w._)(function(e){var t,r,i,o,a,l,s,c,u,d,p,f,h,m;return(0,b.YH)(this,function(g){switch(g.label){case 0:t=e.changes,r=new Map,i=!0,o=!1,a=void 0,g.label=1;case 1:g.trys.push([1,6,7,8]),l=t[Symbol.iterator](),g.label=2;case 2:if(i=(s=l.next()).done)return[3,5];if((c=s.value).state!==I.u5I.GENERATION_COMPLETE)return[3,4];return u=[""],[4,n.readFile(c.filePath)];case 3:(d=g.sent()).error||(u=d.content.toString().split("\n")),p=ng.EY.of(u),f=ng.EY.of(c.content.split("\n")),h=oz.o.create(p,f),r.set(c.filePath,h.getLineStats()),g.label=4;case 4:return i=!0,[3,2];case 5:return[3,8];case 6:return m=g.sent(),o=!0,a=m,[3,8];case 7:try{i||null==l.return||l.return()}finally{if(o)throw a}return[7];case 8:return[2,r]}})}),function(n){return e.apply(this,arguments)}),[n])}var oG=t(23099),oV=t.n(oG);function oZ(e){var n=e.changeStatus,t=e.removePane,r=(0,k.tL)(),i=(0,v._)((0,y.useState)(null),2),o=i[0],a=i[1],l=(0,y.useRef)(n);return(0,y.useEffect)(function(){if("applied"!==l.current.state&&"applied"===n.state&&null!=o){var e,i=null==(e=r.find(function(e){var n=(0,v._)(e,2),t=(n[0],n[1]);return"diff"===t.type&&oV()(t.data,o)}))?void 0:e[0];i&&(t(i),a(null))}l.current=n},[n,o,r,t]),{onOpenTemporaryDiffPane:a}}var oj=t(60397),oq=t(78502),oK=t(27231);function o$(){var e,n=(0,oq.T)(),t=(0,n2.mP)(),r=(0,n2.Eo)(),i=(0,n2.Ss)(),o=(0,n2.z1)();return(0,y.useCallback)((e=(0,w._)(function(e){var a,l,s,c,u;return(0,b.YH)(this,function(d){if(!n)return[2];if(a=t.findIndex(function(n){return n.name===e.workflowName}),l=e.commands.map(function(e){return{task:"shell.exec",args:e}}),s="sequential"===e.mode?"sequential":"parallel",a>=0){if("agent"===(u=t[a]).author||(null==(c=u.metadata)?void 0:c.generated))return[2];i(a,function(e){var n=t[a].tasks;e.tasks=(0,oK.pC)(n,l)},{persist:!0})}else r({name:e.workflowName,author:n,tasks:l,mode:s});return e.setRunButton&&o(e.workflowName),[2]})}),function(n){return e.apply(this,arguments)}),[n,t,i,r,o])}var oJ=t(24140),oQ=t(51055),oX=(0,eo.x)({container:[ea.wp.borderRadius(4),ea.wp.flex.growAndShrink(1),ea.wp.border({width:1,color:N.LU.interactiveBorder})],infoWrapper:[ea.wp.flex.wrap],inlineRunButton:[ea.wp.display.inlineFlex,ea.wp.backgroundColor.greyDimmest,ea.wp.color.greyStrongest,ea.wp.align.center,ea.wp.borderRadius(8),ea.wp.py(2),ea.wp.px(6),ea.wp.mx(2)]});function o0(e){var n=e.text;return(0,f.FD)(j.S,{css:oX.inlineRunButton,row:!0,gap:6,children:[(0,f.Y)(oL.A,{size:12}),(0,f.Y)(V.EY,{children:n})]})}function o1(e){var n,t=e.workflowConfiguration,r=e.eventId,i=e.sessionId,o=e.openPane,a=(0,y.useCallback)(function(){o({type:"workflows"})},[o]),l=o$(),s=oR({sessionId:i,eventIdWhichProposedWorkflowConfiguration:r}),c=(0,y.useCallback)(function(){l(t),s({messageContentsOffset:t.messageContentsOffset})},[l,s,t]);return(0,f.FD)(ek.ui,{elevated:!0,css:oX.container,p:8,children:[(0,f.FD)(j.S,{row:!0,align:"start",justify:"space-between",children:[(0,f.FD)(j.S,{row:!0,align:"center",gap:8,css:oX.infoWrapper,grow:!0,shrink:!0,children:["Set",(0,f.Y)(o0,{text:t.workflowName}),"to run"]}),(0,f.FD)(j.S,{row:!0,gap:4,align:"center",grow:0,shrink:0,children:[(0,f.Y)(eN.K0,{size:24,alt:"Open Workflows",onClick:a,children:(0,f.Y)(oQ.A,{})}),(0,f.Y)(M.$n,{size:"small",colorway:"proposed"===t.state?"primary":void 0,onClick:c,text:"proposed"===t.state?"Apply":"Applied",disabled:"proposed"!==t.state,iconLeft:(0,f.Y)(oJ.A,{})})]})]}),(0,f.Y)(oj.qv,{workflow:(n=t.commands.map(function(e){return{task:"shell.exec",args:e}}),{name:t.workflowName,tasks:n,mode:t.mode}),readOnlyMode:!0,simplified:!0})]})}var o2=t(45894),o4=(0,eo.x)({container:[ea.wp.borderRadius(4),ea.wp.flex.growAndShrink(1),ea.wp.rowWithGap(8),ob.b.filledAndOutlined],iconCol:[ea.wp.py(4)]});function o5(e){var n=e.toolName,t=e.openPane,r=(0,tt.Vv)();return o3.includes(n)?(0,f.FD)(ek.ui,{css:o4.container,px:8,py:4,onClick:function(){return t({type:n})},children:[(0,f.Y)(j.S,{css:o4.iconCol,children:r.Icon({pane:{type:n},size:16})}),(0,f.FD)(j.S,{grow:!0,shrink:!0,justify:"center",children:[(0,f.Y)(V.EY,{color:"default",children:r.getTitle({type:n})}),(0,f.Y)(V.EY,{color:"dimmer",variant:"small",children:r.getDescription({type:n})})]}),(0,f.Y)(j.S,{css:o4.iconCol,children:(0,f.Y)(o2.A,{})})]}):null}var o3=["agentChat","deployments","envEditor"];function o7(){return(0,nd.I)(function(e){var n;return n=(0,w._)(function(n){var t,r;return(0,b.YH)(this,function(i){return t=n.buildCommand,r=n.runCommand,[2,e.agentToolDeployConfig.update.rpc({build:t?["sh","-c",t]:void 0,run:["sh","-c",r]})]})}),function(e){return n.apply(this,arguments)}},[])}var o6=t(8486),o8=(0,eo.x)({container:[ea.wp.borderRadius(4),ea.wp.flex.growAndShrink(1),ea.wp.border({width:1,color:N.LU.interactiveBorder})],runCommandPill:[ea.wp.font.code,ea.wp.flex.growAndShrink(0)],infoWrapper:[ea.wp.flex.wrap,ea.wp.height("100%")]});function o9(e){var n=e.deploymentConfiguration,t=e.eventId,r=e.sessionId,i=e.openPane,o=(0,y.useCallback)(function(){i({type:"deployments"})},[i]),a=o7(),l=oI({sessionId:r,eventIdWhichProposedDeploymentConfiguration:t}),s=(0,y.useCallback)((0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!a)return[2];return[4,a({buildCommand:n.buildCommand,runCommand:n.runCommand})];case 1:if(!e.sent().ok)return[2];return[4,l({messageContentsOffset:n.messageContentsOffset})];case 2:return e.sent(),[2]}})}),[a,n.buildCommand,n.messageContentsOffset,n.runCommand,l]),c=n.buildCommand.length>0,u="Set deployment run command to ";return c&&(u=" and run command to "),(0,f.Y)(ek.ui,{elevated:!0,css:o8.container,p:8,children:(0,f.FD)(j.S,{row:!0,align:"start",justify:"space-between",children:[(0,f.FD)(j.S,{row:!0,align:"center",gap:8,css:o8.infoWrapper,grow:!0,shrink:!0,children:[c?(0,f.FD)(f.FK,{children:["Set deployment build command to"," ",(0,f.Y)(W.a,{text:n.buildCommand,css:o8.runCommandPill})]}):null,u,(0,f.Y)(W.a,{text:n.runCommand,css:o8.runCommandPill})]}),(0,f.FD)(j.S,{row:!0,gap:4,align:"center",grow:0,shrink:0,children:[(0,f.Y)(eN.K0,{size:24,alt:"Open Deployments",onClick:o,children:(0,f.Y)(o6.A,{})}),(0,f.Y)(M.$n,{size:"small",onClick:s,text:"proposed"===n.state?"Apply":"Applied",disabled:"proposed"!==n.state,colorway:"proposed"===n.state?"primary":void 0,iconLeft:(0,f.Y)(oJ.A,{})})]})]})})}var ae=t(50219),an=t(64254).hp;function at(){return{spawnInstall:(0,nd.I)(function(e){var n;return n=(0,w._)(function(n){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return t=n.language,r=n.packageList,[4,e.agentToolPackager.spawnInstallPackages.rpc({language:t,pkgs:r})];case 1:if(!(i=o.sent()).ok)return[2,i];return[2,{ok:!0,payload:i.payload.id}]}})}),function(e){return n.apply(this,arguments)}},[]),waitAndGetSpawnedInstallPackagesResult:(0,nd.I)(function(e){var n;return n=(0,w._)(function(n){var t,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=e.agentToolPackager.waitAndGetSpawnedInstallPackagesResult.subscribe({processId:n}).resReadable,r=an.alloc(0),i=!1,o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),l=(0,R._)(t),p.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(s=p.sent()).done))return[3,5];if((c=s.value).ok&&"output"===c.payload.$kind&&(r=an.concat([r,c.payload.output])),c.ok&&"finished"===c.payload.$kind)return u=c.payload.exitCode,[2,{installationOutput:r.toString(),exitCode:u}];p.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),o=!0,a=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})}),function(e){return n.apply(this,arguments)}})}}function ar(e){var n,t,r=e.eventId,i=e.packageInstall,o=e.sessionId,a=e.openPane,l=(n=(0,A.A)().git,(0,y.useCallback)((t=(0,w._)(function(e){var t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return[4,n.status()];case 1:if((t=i.sent()).error)return[2,t];if(0===(r=null!=e?e:t.changes.map(function(e){return e.path})).length)return[2];return[2,n.stageFiles({add:r})]}})}),function(e){return t.apply(this,arguments)}),[n])),s=(0,v._)((0,y.useState)("installed"===i.state&&0!==i.exitCode),2),c=s[0],u=s[1];(0,y.useEffect)(function(){"installing"===i.state&&u(!0),"installed"===i.state&&0===i.exitCode&&u(!1)},[i]);var d=at(),p=d.spawnInstall,h=d.waitAndGetSpawnedInstallPackagesResult,m=oD({sessionId:o,eventIdWhichProposedPackageInstall:r}),g=m.sendInstallingPackagesMessage,S=m.sendInstalledPackagesMessage,Y=(0,y.useCallback)((0,w._)(function(){var e,n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!p||!h)return[2];return u(!0),[4,null==p?void 0:p({language:i.language,packageList:i.packageList})];case 1:if(!(null==(e=r.sent())?void 0:e.ok))return[2];return[4,g({processId:n=e.payload,messageContentsOffset:i.messageContentsOffset})];case 2:return r.sent(),[4,h(n)];case 3:if(!(t=r.sent()))return[2];return 0===t.exitCode&&u(!1),[4,S({installationOutput:t.installationOutput,exitCode:t.exitCode,processId:n,messageContentsOffset:i.messageContentsOffset})];case 4:return r.sent(),[4,l()];case 5:return r.sent(),[2]}})}),[p,h,i,g,S,l]);return(0,f.Y)(ao,{packageInstall:i,isExpanded:c,toggleExpanded:function(){return u(function(e){return!e})},openPane:a,onInstallClick:Y})}var ai=(0,eo.x)({container:[ea.wp.borderRadius(4),ea.wp.flex.growAndShrink(1),ea.wp.border({width:1,color:N.LU.interactiveBorder}),{"> div":{alignItems:"start"},"> div > button":[ea.wp.mt(4),ea.wp.mr(4)]}],headerWrapper:[ea.wp.width("100%"),ea.wp.flex.growAndShrink(1)],headerInner:[ea.wp.mb(2)],packagesWrapper:[ea.wp.width("100%"),ea.wp.py(4),{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:N.LU.space8}],package:[ea.wp.borderRadius(4),ea.wp.px(8),ea.wp.py(4),ea.wp.width("calc(50% - ".concat(N.LU.space4,")")),ea.wp.backgroundColor.backgroundHighest],terminalWrapper:[ea.wp.width("100%"),{"> div":ea.wp.borderRadius(0,0,4,4)}]});function ao(e){var n=e.packageInstall,t=e.isExpanded,r=e.toggleExpanded,i=e.openPane,o=e.onInstallClick,a=(0,y.useCallback)(function(){i({type:"dependencies"})},[i]),l="Install",s=(0,f.Y)(tj.A,{}),c=!1;return"installing"===n.state&&(l="Installing...",s=(0,f.Y)(tw.A,{}),c=!0),"installed"===n.state&&(l="Installed",s=(0,f.Y)(oJ.A,{}),c=!0),(0,f.Y)(ek.ui,{elevated:!0,children:(0,f.Y)(O.A,{css:ai.container,expanded:t,onClick:r,disabled:"proposed"===n.state,chevron:"start",toggleOn:"chevron",headerContent:(0,f.FD)(j.S,{css:ai.headerWrapper,children:[(0,f.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",css:ai.headerInner,children:[(0,f.Y)(V.EY,{variant:"text",color:"default",children:"Dependencies"}),(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(eN.K0,{size:24,alt:"Open Dependencies",onClick:a,children:(0,f.Y)(rc.A,{})}),(0,f.Y)(M.$n,{text:l,iconLeft:s,disabled:c,size:"small",colorway:"proposed"===n.state?"primary":void 0,onClick:o})]})]}),(0,f.Y)(j.S,{css:ai.packagesWrapper,children:n.packageList.map(function(e,n){return(0,f.Y)(ek.ui,{css:ai.package,row:!0,gap:8,align:"center",justify:"space-between",children:(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(tj.A,{}),(0,f.Y)(V.EY,{children:e})]})},n+"-"+e)})})]}),children:(0,f.FD)(j.S,{css:ai.terminalWrapper,children:["installing"===n.state?(0,f.Y)(ae.A,{processId:n.processId,openPane:i,maxHeight:160}):null,"installed"===n.state?(0,f.Y)(oP.xd,{output:n.installationOutput,maxHeight:160,openPane:i}):null]})})})}function aa(){var e,n=(0,oq.T)(),t=(0,n2.mP)(),r=(0,n2.Eo)(),i=(0,n2.Ss)(),o=(0,n2.z1)();return(0,y.useCallback)((e=(0,w._)(function(e){var a;return(0,b.YH)(this,function(l){return n&&((a=t.findIndex(function(n){return n.name===e.workflowName}))>=0?i(a,function(n){var t="agent"===n.author,r=n.tasks.find(function(n){return"shell.exec"===n.task&&n.args===e.oldCommand});if(r)r.args=e.newCommand;else{if(t){var i=n.tasks.find(function(e){return"shell.exec"===e.task}),o=n.tasks.filter(function(e){return"shell.exec"!==e.task});n.tasks=(0,em._)(o).concat([(0,nh._)((0,eg._)({},i),{task:"shell.exec",args:e.newCommand})]);return}n.tasks=[{task:"shell.exec",args:e.newCommand}]}},{persist:!0}):r({name:e.workflowName,author:n,tasks:[{task:"shell.exec",args:e.newCommand}]}),e.setRunButton&&o(e.workflowName)),[2]})}),function(n){return e.apply(this,arguments)}),[n,t,i,r,o])}var al=(0,eo.x)({container:[ea.wp.borderRadius(4),ea.wp.flex.growAndShrink(1),ea.wp.border({width:1,color:N.LU.interactiveBorder})],infoWrapper:[ea.wp.flex.wrap],runCommandPill:[ea.wp.font.code,ea.wp.flex.growAndShrink(0)],inlineRunButton:[ea.wp.display.inlineFlex,ea.wp.backgroundColor.greyDimmest,ea.wp.color.greyStrongest,ea.wp.align.center,ea.wp.borderRadius(8),ea.wp.py(2),ea.wp.px(6),ea.wp.mx(2)]});function as(e){var n=e.text;return(0,f.FD)(j.S,{css:al.inlineRunButton,row:!0,gap:6,children:[(0,f.Y)(oL.A,{size:12}),(0,f.Y)(V.EY,{children:n})]})}function ac(e){var n=e.runConfiguration,t=e.eventId,r=e.sessionId,i=e.openPane,o=(0,y.useCallback)(function(){i({type:"workflows"})},[i]),a=aa(),l=oE({sessionId:r,eventIdWhichProposedRunConfiguration:t}),s=(0,y.useCallback)(function(){a(n),l({messageContentsOffset:n.messageContentsOffset})},[a,l,n]);return(0,f.Y)(ek.ui,{elevated:!0,css:al.container,p:8,children:(0,f.FD)(j.S,{row:!0,align:"start",justify:"space-between",children:[(0,f.FD)(j.S,{row:!0,align:"center",gap:8,css:al.infoWrapper,grow:!0,shrink:!0,children:["Set",(0,f.Y)(as,{text:n.workflowName}),"to",(0,f.Y)(W.a,{text:n.newCommand,css:al.runCommandPill})]}),(0,f.FD)(j.S,{row:!0,gap:4,align:"center",grow:0,shrink:0,children:[(0,f.Y)(eN.K0,{size:24,alt:"Open Workflows",onClick:o,children:(0,f.Y)(oQ.A,{})}),(0,f.Y)(M.$n,{size:"small",colorway:"proposed"===n.state?"primary":void 0,onClick:s,text:"proposed"===n.state?"Apply":"Applied",disabled:"proposed"!==n.state,iconLeft:(0,f.Y)(oJ.A,{})})]})]})})}function au(e){var n=e.sessionId,t=e.eventIdWhichProposedChanges,r=(0,S.NC)(),i=(0,D.Rj)(function(){return n?r.sessions.get(n):void 0},[n,r]),o=(0,D.Rj)(function(){return null==i?void 0:i.reduce(ad,1e3)},[i]);return(0,y.useMemo)(function(){var e=null==o?void 0:o[t];return null!=e?e:{state:"pending"}},[o,t])}var ad={direction:"reverse",state:{},reducer:function(e,n){if((null==(t=e.contents.contents)?void 0:t.$kind)==="iterativeAgentEventContents"){var t,r=e.contents.contents.iterativeAgentEventContents.contents;if((null==r?void 0:r.$kind)==="appliedFileChanges"){var i=r.appliedFileChanges.eventWhichProposedChanges;if(n[i])return;n[i]={state:"applied",appliedChanges:r.appliedFileChanges.appliedChanges,commitHash:r.appliedFileChanges.commitHash};return}if((null==r?void 0:r.$kind)==="revertedFileChanges"){var o=r.revertedFileChanges.eventWhichProposedChanges;if(n[o])return;n[o]={state:"reverted",revertedChanges:r.revertedFileChanges.revertedChanges};return}}}},ap=t(74726);let af=(0,y.memo)(function(e){var n=e.text,t=e.ragSources,r=e.proposedActions,i=e.eventId,o=e.eventState,a=e.markdownCodeComponent,l=e.markdownLinkComponent,s=e.sessionId,c=e.openPane,u=e.removePane,d=[];null!=t&&d.push((0,f.Y)(am,{eventState:o,ragSources:t,openPane:c},"rag-sources"));var p=null!=r?r:{sortedActions:[],commitId:"",fileChanges:[]},h=p.sortedActions,m=p.commitId,g=p.fileChanges,S=oW(),Y=(0,v._)((0,y.useState)(function(){return new Map}),2),_=Y[0],A=Y[1];(0,y.useEffect)(function(){function e(){return(e=(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,S({changes:g})];case 1:return A(e.sent()),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[g,S]);var C=h.reduce(function(e,t){var r=(0,F.QN)(t).messageContentsOffset;if(null==r||!s)return e;var d=(0,em._)(e.parts);if(d.push((0,f.Y)(ol.d2,{text:n.slice(e.chars,r),codeComponent:a,linkComponent:l,messageState:o},"text-slice-".concat(e.chars,"-to-").concat(r))),(0,F.VF)(t,"fileChange")){var p=(0,F.QN)(t);d.push((0,f.Y)(ag,{change:p,commitId:m,lineStats:_.get(p.filePath),sessionId:s,eventId:i,openPane:c,removePane:u},p.filePath))}else if((0,F.VF)(t,"shellCommand")){var h=(0,F.QN)(t);d.push((0,f.Y)(oH,{command:h,openPane:c,eventId:i,sessionId:s},h.command))}else if((0,F.VF)(t,"packageInstall"))d.push((0,f.Y)(ar,{eventId:i,sessionId:s,packageInstall:t.packageInstall,openPane:c},t.packageInstall.language+"---"+t.packageInstall.packageList.join("-")));else if((0,F.VF)(t,"workspaceToolNudge")){var g=(0,F.QN)(t);"deployments"===g.toolName?d.push((0,f.Y)(ow.K4,{openDeploymentsPane:function(){return c({type:"deployments"})},paneType:"ghostwriterChat"},g.toolName)):d.push((0,f.Y)(av,{nudge:g,openPane:c},g.toolName))}else(0,F.VF)(t,"runConfiguration")?d.push((0,f.Y)(ac,{runConfiguration:t.runConfiguration,openPane:c,eventId:i,sessionId:s},t.runConfiguration.workflowName+"---"+t.runConfiguration.oldCommand+"---"+t.runConfiguration.newCommand)):(0,F.VF)(t,"deploymentConfiguration")?d.push((0,f.Y)(o9,{deploymentConfiguration:t.deploymentConfiguration,openPane:c,eventId:i,sessionId:s},t.deploymentConfiguration.buildCommand+"---"+t.deploymentConfiguration.runCommand)):(0,F.VF)(t,"workflowConfiguration")&&d.push((0,f.Y)(o1,{workflowConfiguration:t.workflowConfiguration,openPane:c,eventId:i,sessionId:s},t.workflowConfiguration.workflowName+"---"+t.workflowConfiguration.commands.join("&&")));return{chars:r,parts:d}},{chars:0,parts:d}),k=C.chars,x=C.parts,D=n.slice(k).trim();D.length>0&&x.push((0,f.Y)(ol.d2,{text:D,codeComponent:a,linkComponent:l,messageState:o},"remaining-text"));var E=h.filter(function(e){return null==(0,F.QN)(e).messageContentsOffset}),R=!0,I=!1,T=void 0;try{for(var P,L=E[Symbol.iterator]();!(R=(P=L.next()).done);R=!0){var U=P.value;if((0,F.VF)(U,"fileChange")){var N=(0,F.QN)(U);x.push((0,f.Y)(ag,{change:N,commitId:m,lineStats:_.get(N.filePath),sessionId:s,eventId:i,openPane:c,removePane:u},N.filePath))}}}catch(e){I=!0,T=e}finally{try{R||null==L.return||L.return()}finally{if(I)throw T}}return(0,f.Y)(f.FK,{children:x})});var ah=(0,eo.x)({container:[ea.wp.borderRadius()],accordionItem:[ea.wp.flex.growAndShrink(1)],list:[ea.wp.display.flex,ea.wp.colWithGap(2),ea.wp.p(4),ea.wp.border({color:N.LU.outlineDefault}),ea.wp.borderRadius()],listItem:[ea.wp.cursor.pointer,ob.b.listItem,ea.wp.p(4),ea.wp.borderRadius(4)],header:[ea.wp.color.foregroundDimmer]});function am(e){var n=e.eventState,t=e.ragSources,r=e.openPane;if(0===t.length)return null;var i=(0,oy.A)("file",t.length);return(0,f.Y)(ek.ui,{css:ah.container,row:!0,children:(0,f.Y)(O.A,{css:ah.accordionItem,headerContent:(0,f.FD)(j.S,{row:!0,gap:6,align:"center",css:ah.header,children:[(0,f.Y)(ap.A,{}),(0,f.Y)(V.EY,{children:n===I.qOk.IN_PROGRESS?"Reading ".concat(t.length," ").concat(i,"…"):"Read ".concat(t.length," ").concat(i)})]}),children:(0,f.Y)("ul",{"aria-label":"RAG sources",css:ah.list,children:t.map(function(e){var n=(0,ov.A)(e.url);return(0,f.Y)("li",{children:(0,f.FD)(j.S,{css:ah.listItem,row:!0,gap:4,onClick:function(){return r({type:"codeEditor",data:{path:n}})},children:[(0,f.Y)(ty.A,{path:n,size:16}),(0,f.Y)(V.EY,{variant:"small",children:n})]})},e.url)})})})})}function ag(e){var n=e.change,t=e.commitId,r=e.lineStats,i=e.sessionId,o=e.eventId,a=e.openPane,l=e.removePane,s=au({sessionId:i,eventIdWhichProposedChanges:o}),c=oZ({changeStatus:s,removePane:l}).onOpenTemporaryDiffPane,u=(0,y.useCallback)(function(e,n){var r={type:"diff",data:{left:{path:e,data:{type:"git",revision:t}},right:{path:e,data:n}}};a(r),c(r.data)},[a,t,c]);if(!n)return null;if("applied"===s.state){var d=s.appliedChanges,p=s.commitHash,h=d.find(function(e){return e.filePath===n.filePath});return h?(0,f.Y)(oA,(0,eg._)({commitHash:p,onOpenDiff:u},h)):null}return(0,f.Y)(o_,(0,nh._)((0,eg._)({},n),{changeStatus:s,lineStats:r,onOpenDiff:u}))}function av(e){var n=e.nudge,t=e.openPane;return(0,f.Y)(o5,(0,nh._)((0,eg._)({},n),{openPane:t}))}var ay=(0,y.memo)(function(e){var n=e.eventId,t=e.eventState,r=e.content,i=e.intent,o=e.ragSources,a=e.proposedActions,l=e.sessionId,s=e.openPane,c=e.removePane,u=e.markdownCodeComponent,d=e.markdownLinkComponent;return r||t===I.qOk.COMPLETE?i===I.qRv.ITERATIVE_AGENT?(0,f.Y)(af,{text:r,eventId:n,eventState:t,ragSources:o,proposedActions:a,markdownCodeComponent:u,markdownLinkComponent:d,sessionId:l,openPane:s,removePane:c}):(0,f.Y)(ol.d2,{text:r,codeComponent:u,linkComponent:d,messageState:t}):(0,f.Y)(tw.A,{})}),aw=t(76969),ab=t(82839);function aS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.commit,t=void 0===n||n,r=(0,A.A)().git,i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1],l=(0,v._)((0,y.useState)(null),2),s=l[0],c=l[1];return(0,y.useEffect)(function(){function e(){return(e=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,r.isInitialized()];case 1:if(null!=(e=n.sent()).error)return c(e.error),[2];if(a(e.initialized),!e.initialized)return[3,7];if(!t)return[3,6];n.label=2;case 2:return n.trys.push([2,4,,6]),[4,r.getCommit({commit:"HEAD"})];case 3:case 5:return n.sent(),[3,6];case 4:return n.sent(),[4,r.commit({message:"Initial commit"})];case 6:return a(!0),[3,9];case 7:return[4,r.init({initialCommit:t})];case 8:n.sent(),a(!0),n.label=9;case 9:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[r,t]),{isGitInitialized:o,gitError:s}}var aY=(0,eo.x)({root:[ea.wp.width("100%")],banner:[ea.wp.width("100%")],li:[{listStyle:"none"}]});function a_(e){var n=e.changedPaths,t=e.openPane,r=(0,v._)((0,y.useState)(100),2),i=r[0],o=r[1],a=(0,tF.A)(function(e){o(e.width/10)});return(0,f.Y)(j.S,{innerRef:a,css:aY.root,children:(0,f.Y)(iX.N,{css:aY.banner,icon:(0,f.Y)(tZ.A,{}),colorway:"yellow",text:(0,f.FD)(tz.s,{variant:"small",children:[iY.BP," has detected other changes to these files since this code was generated:",(0,f.Y)("ul",{style:{margin:0},children:n.map(function(e){return(0,f.Y)("li",{css:aY.li,children:(0,f.Y)(M.$n,{variant:"underlined",size:"small",iconLeft:(0,f.Y)(ty.A,{path:e,size:16}),text:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxLength:30,truncateFrom:"middle"},t=n.maxLength,r=void 0===t?30:t,i=n.truncateFrom;return e.length<=r?e:"start"===(void 0===i?"middle":i)?"..."+e.slice(e.length-r,e.length):e.slice(0,r/2)+"..."+e.slice(-r/2)}(e,{truncateFrom:"start",maxLength:i}),onClick:function(){return t({type:"codeEditor",data:{path:e}})}})},e)})}),"You can retry this ",aw.go," or overwrite those changes and apply ",iY.BP," edits anyway."]})})})}var aA=t(91326),aC=t(95707),ak=t(39363);function ax(e){var n,t,r,i,o,a,l,s,c,u,d,p,f=e.sessionId,h=e.eventId,m=e.sortedActions,g=e.changesSummary,Y=e.handleAutoRestart,_=e.doAutoApplyChanges,C=(r=(n={sessionId:f,prevUserMessageContent:e.prevUserMessageContent}).sessionId,i=n.prevUserMessageContent,o=(0,A.A)().git,(0,y.useCallback)((t=(0,w._)(function(e){var n,t,a,l,s,c,u,d,p,f,h,m,g,v;return(0,b.YH)(this,function(y){switch(y.label){case 0:return n=e.changes,t=e.summary,o.forceRefresh(),[4,o.status()];case 1:if((a=y.sent()).error)return[2,a];if(0===a.changes.length||(l="Assistant checkpoint",0===n.length))return[2,{error:iY.ic.NOTHING_TO_COMMIT}];t&&(l+=": ".concat(t)),l+="\n\nAssistant generated file changes:\n",s=!0,c=!1,u=void 0;try{for(d=n[Symbol.iterator]();!(s=(p=d.next()).done);s=!0)f=p.value,l+="- ".concat(f.filePath,": ").concat(f.changeSummary,"\n")}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}return i&&(l+="\n---\n\nUser prompt:\n\n".concat(i)),h=a.changes.filter(function(e){return!e.staged}).filter(function(e){return aC.UC.includes(e.path)}).map(function(e){return e.path}),m=a.changes.filter(function(e){return e.staged}).map(function(e){return e.path}),g=n.map(function(e){return e.filePath}),v=new Set((0,em._)(h).concat((0,em._)(m),(0,em._)(g))),[4,o.stageFiles({add:Array.from(v)})];case 2:return y.sent(),[2,o.commit({message:l,trailers:{"Replit-Commit-Author":"Assistant","Replit-Commit-Session-Id":r}})]}})}),function(e){return t.apply(this,arguments)}),[o,i,r])),k=(0,D.HJ)(void 0);(0,y.useEffect)(function(){var e=function(e){return"workspaceToolNudge"===e.$kind?{action:e,state:"skipped",checked:!1}:"shellCommand"===e.$kind&&e.shellCommand.isDangerous?{action:e,state:"preparing",checked:!1}:{action:e,state:"preparing",checked:!0}};k.update((0,iD.jM)(function(n){if(!n)return m.map(e);for(var t=0;t<m.length;t++)n[t]?n[t].action=m[t]:n.push(e(m[t]))}))},[k,m]);var x=(0,v._)((0,y.useState)({state:"idle"}),2),E=x[0],I=x[1],T=(0,nt.A)(E),P=(0,y.useRef)(!1),L=(l=(a={sessionId:f,eventIdWhichProposedChanges:h}).sessionId,s=a.eventIdWhichProposedChanges,c=(0,S.NC)(),u=(0,D.J2)(c.sessions.get(l)),(0,y.useCallback)(function(e){var n=e.appliedChanges,t=e.commitHash;return null==u?void 0:u.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedChanges:s,appliedChanges:n,commitHash:t}})},[s,u])),U=oW(),N=oF(),O=N.spawnCommand,M=N.waitAndGetCommandOutput,H=ox({sessionId:f,eventIdWhichProposedShellExecution:h}),B=H.sendStartedShellExecutionMessage,z=H.sendFinishedShellExecutionMessage,W=at(),G=W.spawnInstall,V=W.waitAndGetSpawnedInstallPackagesResult,Z=oD({sessionId:f,eventIdWhichProposedPackageInstall:h}),j=Z.sendInstallingPackagesMessage,q=Z.sendInstalledPackagesMessage,K=aa(),$=oE({sessionId:f,eventIdWhichProposedRunConfiguration:h}),J=o$(),Q=oR({sessionId:f,eventIdWhichProposedWorkflowConfiguration:h}),X=o7(),ee=oI({sessionId:f,eventIdWhichProposedDeploymentConfiguration:h}),en=(d=(0,A.A)().fs,(0,y.useCallback)((p=(0,w._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=e.change,[4,d.writeFile(n.filePath,n.content)];case 1:if(null!==(t=r.sent()).error)return[2,{error:t.error}];return[2,{}]}})}),function(e){return p.apply(this,arguments)}),[d])),et=(0,y.useMemo)(function(){return O&&M&&G&&V&&X},[X,O,G,M,V]),er=(0,y.useCallback)((0,w._)(function(){var e,n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,v,y,w,S,_,A,x,D,E,N,H,W,Z,er,ei,eo,ea,el,es,ec,eu,ed;return(0,b.YH)(this,function(b){switch(b.label){case 0:if(!k.current||"idle"!==T.current.state||!et)return[2];return I({state:"working"}),[4,U({changes:e=k.current.map(function(e){return(0,F.VF)(e.action,"fileChange")?(0,F.QN)(e.action):null}).filter(function(e){return null!==e})})];case 1:n=b.sent(),t=new Set,r=!1,k.update((0,iD.jM)(function(e){null==e||e.forEach(function(e){e.state="preparing"===e.state&&e.checked?"scheduled":"skipped"})})),i=-1,o=!1,a=!1,b.label=2;case 2:b.trys.push([2,30,31,36]),s=(0,R._)(k.current),b.label=3;case 3:return[4,s.next()];case 4:if(!(o=!(c=b.sent()).done))return[3,29];if(u=c.value,i++,"scheduled"!==u.state)return[3,28];switch(k.update((0,iD.jM)(function(e){e&&(e[i].state="working")})),d=function(){k.update((0,iD.jM)(function(e){e&&(e[i]={action:e[i].action,checked:e[i].checked,state:"done"})}))},p=function(e){k.update((0,iD.jM)(function(n){n&&(n[i]={action:n[i].action,checked:n[i].checked,state:"failed",error:e})}))},h=(f=u.action).$kind){case"workspaceToolNudge":return[3,5];case"shellCommand":return[3,6];case"packageInstall":return[3,11];case"runConfiguration":return[3,16];case"deploymentConfiguration":return[3,19];case"fileChange":return[3,22];case"workflowConfiguration":return[3,24]}return[3,27];case 5:return[3,28];case 6:return m=f.shellCommand,[4,null==O?void 0:O(m.command)];case 7:if(!(null==(v=b.sent())?void 0:v.ok))return p("Spawning shell command failed"),[3,28];return[4,B({processId:v.payload,messageContentsOffset:m.messageContentsOffset})];case 8:if(!(null==(y=b.sent())?void 0:y.ok))return p("Server request failed"),[3,28];return[4,null==M?void 0:M(v.payload)];case 9:if(!(w=b.sent())||0!==w.exitCode)return p("Shell command failed"),[3,28];return[4,z((0,nh._)((0,eg._)({},w),{messageContentsOffset:m.messageContentsOffset}))];case 10:if(!(null==(S=b.sent())?void 0:S.ok))return p("Server request failed"),[3,28];return d(),[3,28];case 11:return _=f.packageInstall,[4,null==G?void 0:G({language:_.language,packageList:_.packageList})];case 12:if(!(null==(A=b.sent())?void 0:A.ok))return p("spawning packager failed"),[3,28];return[4,j({processId:A.payload,messageContentsOffset:_.messageContentsOffset})];case 13:if(!(null==(x=b.sent())?void 0:x.ok))return p("Server request failed"),[3,28];return[4,null==V?void 0:V(A.payload)];case 14:if(!(D=b.sent())||0!==D.exitCode)return p("Failed to run packager"),[3,28];return[4,q({installationOutput:D.installationOutput,exitCode:D.exitCode,processId:A.payload,messageContentsOffset:_.messageContentsOffset})];case 15:if(!(null==(E=b.sent())?void 0:E.ok))return p("Server request failed"),[3,28];return d(),[3,28];case 16:return[4,K(N=f.runConfiguration)];case 17:return b.sent(),[4,$({messageContentsOffset:N.messageContentsOffset})];case 18:if(!(null==(H=b.sent())?void 0:H.ok))return p("Server request failed"),[3,28];return d(),[3,28];case 19:return W=f.deploymentConfiguration,[4,null==X?void 0:X({buildCommand:W.buildCommand,runCommand:W.runCommand})];case 20:if(!(null==(Z=b.sent())?void 0:Z.ok))return p("failed configuring deployment"),[3,28];return[4,ee({messageContentsOffset:W.messageContentsOffset})];case 21:if(!(null==(er=b.sent())?void 0:er.ok))return p("Server request failed"),[3,28];return d(),[3,28];case 22:return[4,en({change:f.fileChange})];case 23:if(b.sent().error)return p("file write failed"),[3,28];return d(),t.add(f.fileChange.filePath),[3,28];case 24:return[4,J(ei=f.workflowConfiguration)];case 25:return b.sent(),[4,Q({messageContentsOffset:ei.messageContentsOffset})];case 26:if(!(null==(eo=b.sent())?void 0:eo.ok))return p("Server request failed"),[3,28];return d(),r=!0,[3,28];case 27:(0,aA.A)(h),b.label=28;case 28:return o=!1,[3,3];case 29:return[3,36];case 30:return ea=b.sent(),a=!0,l=ea,[3,36];case 31:if(b.trys.push([31,,34,35]),!(o&&null!=s.return))return[3,33];return[4,s.return()];case 32:b.sent(),b.label=33;case 33:return[3,35];case 34:if(a)throw l;return[7];case 35:return[7];case 36:return el=e.filter(function(e){return t.has(e.filePath)}).map(function(e){return{filePath:e.filePath,changeSummary:e.changeSummary}}),r&&el.push({filePath:ak.v,changeSummary:"Updated app configuration"}),[4,C({changes:el,summary:g})];case 37:if(ec="hash"in(es=b.sent())?es.hash:null,eu="error"in es?es.error:null,!ec)return eu===iY.ic.NOTHING_TO_COMMIT?I({state:"failed",error:"Nothing to commit",canRetryApply:!1}):I({state:"failed",error:"Commit failed: "+eu,canRetryApply:!0}),[2];return[4,L({appliedChanges:el.map(function(e){var t,r,i=e.filePath,o=e.changeSummary,a=n.get(i);return{filePath:i,linesAdded:null!=(t=null==a?void 0:a.added)?t:0,linesRemoved:null!=(r=null==a?void 0:a.removed)?r:0,changeSummary:o}}),commitHash:ec})];case 38:if(!(null==(ed=b.sent())?void 0:ed.ok))return I({state:"failed",error:"Server request failed",canRetryApply:!0}),[2];return I({state:"done"}),Y(),P.current=!1,[2]}})}),[k,T,et,C,g,U,L,Y,O,B,M,z,G,j,V,q,K,$,X,ee,en,J,Q]),ei=(0,y.useCallback)(function(){k.update((0,iD.jM)(function(e){null==e||e.forEach(function(e){e.state="preparing"})})),I({state:"idle"}),T.current={state:"idle"},er()},[er,T,k]),eo=(0,D.J2)(k),ea=(0,y.useCallback)(function(e){k.update((0,iD.jM)(function(n){n&&"preparing"===n[e].state&&(n[e].checked=!n[e].checked)}))},[k]);return(0,y.useEffect)(function(){_&&et&&"idle"===T.current.state&&!0!==P.current&&(P.current=!0,er())},[er,_,T,P,et]),{state:E,multistepActions:eo,toggleMultistepActionCheck:ea,applyActions:er,reapplyActions:ei}}var aD=t(87971),aE=t(18974),aR=(0,eo.x)({wrapper:[ea.wp.width("100%"),ea.wp.p(8),ea.wp.borderRadius(4)],actionRowWrapper:[ea.wp.height(24)],actionRow:[ea.wp.maxWidth("100%"),ea.wp.flex.growAndShrink(1),ea.wp.overflow("hidden")],handleOverflow:[ea.wp.maxWidth("100%"),ea.wp.flex.growAndShrink(1),ea.wp.overflow("hidden")],alignBaseline:[ea.wp.height("100%"),{alignItems:"baseline"}],iconWrapper:[ea.wp.width(20)],errorText:[ea.wp.color.accentNegativeStronger]});function aI(e){var n=e.action,t=n.state;switch(t){case"preparing":return null;case"scheduled":case"skipped":return(0,f.Y)(aD.A,{});case"working":return(0,f.Y)(tw.A,{});case"done":return(0,f.Y)(oJ.A,{color:N.LU.accentPositiveDefault});case"failed":return(0,f.Y)(Z.m_,{tooltip:n.error,children:(0,f.Y)(i0.A,{color:N.LU.accentNegativeDefault})});default:(0,aA.A)(t)}}function aT(e){var n=e.action,t=n.$kind;switch(t){case"workspaceToolNudge":return null;case"shellCommand":return(0,f.FD)(j.S,{align:"center",row:!0,gap:4,css:aR.handleOverflow,children:[(0,f.Y)(oN.A,{}),(0,f.FD)(j.S,{row:!0,gap:2,css:aR.alignBaseline,children:["Run shell command:"," ",(0,f.Y)(V.EY,{multiline:!1,variant:"code",children:n.shellCommand.command})]})]});case"packageInstall":return(0,f.FD)(j.S,{align:"center",row:!0,gap:4,css:aR.handleOverflow,children:[(0,f.Y)(rc.A,{}),(0,f.FD)(j.S,{row:!0,gap:2,css:aR.alignBaseline,children:["Install dependencies:",n.packageInstall.packageList.map(function(e){return(0,f.Y)(W.a,{text:e},e)})]})]});case"fileChange":return(0,f.FD)(j.S,{align:"center",row:!0,gap:4,css:aR.handleOverflow,children:[(0,f.Y)(ap.A,{}),(0,f.FD)(j.S,{row:!0,gap:4,css:aR.alignBaseline,children:["Edit file",(0,f.Y)(V.EY,{multiline:!1,variant:"code",children:n.fileChange.filePath})]})]});case"runConfiguration":return(0,f.FD)(j.S,{align:"center",row:!0,gap:4,css:aR.handleOverflow,children:[(0,f.Y)(aE.A,{}),(0,f.FD)(j.S,{row:!0,gap:4,css:aR.alignBaseline,children:["Configure ",(0,f.Y)(W.a,{text:n.runConfiguration.workflowName})," ","workflow"]})]});case"deploymentConfiguration":var r=n.deploymentConfiguration.buildCommand.length>0,i=n.deploymentConfiguration.runCommand.length>0,o="";return r&&!i?o="Configure deployment build command":!r&&i?o="Configure deployment run command":r&&i&&(o="Configure deployment build and run commands"),(0,f.FD)(j.S,{align:"center",row:!0,gap:4,css:aR.handleOverflow,children:[(0,f.Y)(o6.A,{}),(0,f.Y)(j.S,{row:!0,gap:4,css:aR.alignBaseline,children:(0,f.Y)(j.S,{row:!0,align:"center",children:o})})]});case"workflowConfiguration":return(0,f.FD)(j.S,{align:"center",row:!0,gap:4,css:aR.handleOverflow,children:[(0,f.Y)(aE.A,{}),(0,f.FD)(j.S,{row:!0,gap:4,css:aR.alignBaseline,children:["Configure ",(0,f.Y)(W.a,{text:n.workflowConfiguration.workflowName})," ","workflow"]})]});default:(0,aA.A)(t)}}function aF(e){var n=e.sessionId,t=e.eventId,r=e.sortedActions,i=e.changesSummary,o=e.changeStatus,a=e.onCancel,l=ax({sessionId:n,eventId:t,handleAutoRestart:e.handleAutoRestart,doAutoApplyChanges:e.doAutoApplyChanges,sortedActions:r,changesSummary:i,prevUserMessageContent:e.prevUserMessageContent}),s=l.applyActions,c=l.reapplyActions,u=l.multistepActions,d=l.toggleMultistepActionCheck,p=l.state,h=(0,y.useMemo)(function(){return!!("failed"===p.state||(null==u?void 0:u.some(function(e){return"failed"===e.state})))},[u,p.state]);return u&&0!==u.length&&("applied"!==o.state||h)?(0,f.Y)(aP,{multistepActions:u,multistepState:p,onCancel:a,applyActions:s,reapplyActions:c,toggleMultistepActionCheck:d}):null}function aP(e){var n=e.multistepActions,t=e.multistepState,r=e.onCancel,i=e.applyActions,o=e.reapplyActions,a=e.toggleMultistepActionCheck,l=(0,y.useMemo)(function(){return null==n?void 0:n.some(function(e){return"preparing"===e.state&&!0===e.checked})},[n]);return(0,f.FD)(ek.ui,{elevated:!0,css:aR.wrapper,gap:8,children:[(0,f.Y)(V.EY,{children:"Apply all:"}),(0,f.FD)(j.S,{gap:8,css:aR.handleOverflow,children:[(0,f.Y)(j.S,{gap:4,css:aR.handleOverflow,children:null==n?void 0:n.map(function(e,n){return(0,f.FD)(j.S,{row:!0,gap:8,css:aR.actionRow,children:[(0,f.Y)(j.S,{align:"center",justify:"center",css:aR.iconWrapper,children:"preparing"===e.state?(0,f.Y)(nQ.S,{name:e.action.$kind,checked:e.checked,onChange:function(){a(n)}}):(0,f.Y)(aI,{action:e})}),(0,f.Y)(j.S,{align:"center",css:aR.actionRowWrapper,children:(0,f.Y)(aT,{action:e.action})})]},n+"---"+e.action.$kind)})}),"idle"===t.state?(0,f.FD)(j.S,{row:!0,gap:8,children:[(0,f.Y)(M.$n,{text:"Cancel",onClick:r}),(0,f.Y)(M.$n,{text:"Ok",colorway:"primary",disabled:!l,onClick:i})]}):null,"failed"===t.state?(0,f.FD)(j.S,{row:!0,gap:16,css:aR.errorText,align:"center",children:[(0,f.Y)(j.S,{children:t.error}),t.canRetryApply?(0,f.Y)(M.$n,{text:"Try again",colorway:"primary",onClick:o}):null]}):null]})]})}var aL=t(37252);function aU(e){var n=e.runState,t=e.onClick,r=n===I.g32.AGENT_STATE_PAUSING,i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1],l=(0,y.useCallback)((0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,t()];case 1:return e.sent(),a(!1),[2]}})}),[t]);return(0,f.FD)(aL.Wv,{label:"Pause ".concat(iY.g$," confirmation"),placement:"top",trigger:"click",isOpen:o,onOpenChange:a,children:[(0,f.Y)(M.$n,{text:r?"Pausing ".concat(iY.g$,"…"):"Pause ".concat(iY.g$),colorway:"red",disabled:r}),(0,f.FD)(j.S,{p:8,gap:8,children:[(0,f.FD)(V.EY,{children:["Are you sure you want to pause"," ",(0,iY.Nn)({variant:"casual",capitalizeFirstChar:!1}),"?"]}),(0,f.FD)(j.S,{row:!0,gap:4,children:[(0,f.Y)(M.$n,{text:"Cancel",onClick:function(){return a(!1)}}),(0,f.Y)(M.$n,{text:"Pause ".concat(iY.g$),onClick:l,colorway:"red"})]})]})]})}var aN=t(36976);function aO(){return(aO=(0,w._)(function(e,n){var t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:var o;return t={},r=null,[4,Promise.all(n.map((o=(0,w._)(function(n){var i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,e.readFile(n)];case 1:return(i=o.sent()).error?r=i.error:t[n]=i.content.toString(),[2]}})}),function(e){return o.apply(this,arguments)})))];case 1:return i.sent(),[2,{contents:t,error:r}]}})})).apply(this,arguments)}var aM=t(91993),aH=t(58390),aB=t(77595),az=(0,eo.x)({buttonRow:[ea.wp.flex.wrap],errorContainer:[ea.wp.rowWithGap(8),ea.wp.align.center,ea.wp.color.accentNegativeDefault],statusBanner:[ea.wp.width("100%")]});function aW(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,Y=e.fileChanges,_=e.commitId,C=e.summary,k=e.sortedActions,x=e.eventId,R=e.sessionId,T=e.openAiChatSettingsPanel,F=e.openPane,P=e.removePane,L=e.hasAnyWorkspaceProposedActions,U=e.isLatestProposedActionsEvent,N=e.isMessageComplete,O=e.prevUserMessageContent,H=(0,ab.Z)("workspace-assistant-auto-apply-changes"),B=(0,ab.Z)("workspace-assistant-auto-restart-repl"),z=(0,tl.g)("assistantAutoApplyChanges","assistantAutoRestartRepl").preferences,W=1===Y.length&&!L,G=Y.length>0,Z=z.assistantAutoApplyChanges&&H.isDone,q=aS().isGitInitialized,K=(0,S.jt)(),$=(0,E.hT)(),J=(0,E.zS)(),Q=K&&($===I.g32.AGENT_STATE_RUNNING||$===I.g32.AGENT_STATE_PAUSING),X=(0,v._)((0,y.useState)(null),2),ee=X[0],en=X[1],et=(0,y.useCallback)((0,w._)(function(){return(0,b.YH)(this,function(e){try{J()}catch(e){en("Unable to pause agent: ".concat(e))}return[2]})}),[J]),er=au({sessionId:R,eventIdWhichProposedChanges:x}),ei=Y.some(function(e){return e.state===I.u5I.GENERATION_REGENERATING}),eo=N&&"pending"===er.state&&!ei,el=oZ({changeStatus:er,removePane:P}).onOpenTemporaryDiffPane,es=(t=(n={filePaths:(0,y.useMemo)(function(){return Y.map(function(e){return e.filePath})},[Y]),commitId:_}).commitId,r=n.filePaths,i=(0,A.A)().fs,a=(o=(0,v._)((0,y.useState)(null),2))[0],l=o[1],c=(0,rh.A)((s=(0,w._)(function(e){var n,i,o,a,l,s,c,u,d,p;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(n=null,i={},!t)return[2,{error:aN.uA.NO_COMMITS}];o=!0,a=!1,l=void 0,f.label=1;case 1:f.trys.push([1,6,7,8]),s=r[Symbol.iterator](),f.label=2;case 2:if(o=(c=s.next()).done)return[3,5];return u=c.value,[4,e.getFileContents({path:u,revision:t,convertToBase64:!1})];case 3:(d=f.sent()).error?n=d.error:d.content&&(i[u]=d.content),f.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return p=f.sent(),a=!0,l=p,[3,8];case 7:try{o||null==s.return||s.return()}finally{if(a)throw l}return[7];case 8:return[2,n?{error:n}:{fileContents:i,error:null}]}})}),function(e){return s.apply(this,arguments)}),[t,r],{keepStaleResult:!0}),(0,y.useEffect)(function(){(null==c?void 0:c.error)&&l(c.error)},[c]),d=(u=(0,v._)((0,y.useState)({}),2))[0],p=u[1],(0,y.useEffect)(function(){(function(e,n){return aO.apply(this,arguments)})(i,r).then(function(e){var n=e.contents,t=e.error;p(n),t&&l(t)});var e=r.map(function(e){return i.watchTextFile(e,{onChange:(0,w._)(function(){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,i.readFile(e)];case 1:if((n=t.sent()).error)return l(n.error),[2];return p(function(t){return(0,nh._)((0,eg._)({},t),(0,g._)({},e,n.content.toString()))}),[2]}})})})});return function(){e.forEach(function(e){return e()})}},[i,r]),(0,y.useMemo)(function(){if(null==c||null==d)return{changedPaths:[],hasAnyChangedPaths:!1,error:a,isLoading:!0};if(a)return{changedPaths:[],hasAnyChangedPaths:!1,error:a,isLoading:!1};var e=r.filter(function(e){if(!c.fileContents)return!1;var n=d[e],t=c.fileContents[e];return void 0!==n&&void 0!==t&&d[e]!==c.fileContents[e]});return{changedPaths:e,hasAnyChangedPaths:e.length>0,error:a,isLoading:!1}},[d,c,r,a])),ec=es.changedPaths,eu=es.hasAnyChangedPaths,ed=es.isLoading,ep=(0,n2.d_)(),ef=(0,v._)((0,y.useState)(!1),2),eh=ef[0],em=ef[1],ev=(h=(0,S.NC)(),m=(0,D.J2)(h.sessions.get(R)),(0,y.useCallback)(function(){return null==m?void 0:m.appendEvent({kind:"message",intent:I.qRv.ITERATIVE_AGENT,modelType:I.e3q.ADVANCED,message:"The recent code changes you proposed are outdated. Please try generating new file edits which accomplish the same goal.",uploadedFiles:[],useRag:!1,webviewTargetedElement:void 0,fileContext:[],mostRecentFile:void 0})},[m])),ey=(0,y.useCallback)((0,w._)(function(){return(0,b.YH)(this,function(e){return z.assistantAutoRestartRepl&&(ep(),em(!0)),[2]})}),[z.assistantAutoRestartRepl,ep]),ew=(0,y.useMemo)(function(){return!!Z&&!!U&&!!eo&&!Q},[Q,eo,Z,U]),eb=ax({sessionId:R,eventId:x,handleAutoRestart:ey,doAutoApplyChanges:ew,sortedActions:k,changesSummary:C,prevUserMessageContent:O}),eS=eb.applyActions,eY=eb.state,e_="working"===eY.state,eA="failed"===eY.state?eY.error:void 0,eC="failed"===eY.state&&eY.canRetryApply,ek=(0,y.useCallback)((0,w._)(function(){return(0,b.YH)(this,function(e){return eS(),H.isDone||H.setAsDone(),[2]})}),[eS,H]),ex=(0,v._)((0,y.useState)(!1),2),eD=ex[0],eE=ex[1],eR=(0,y.useCallback)(function(){if(W)return ek();eE(!0)},[ek,W]),eI=(0,y.useCallback)(function(){var e=Y.map(function(e){return{left:{path:e.filePath,data:{type:"git",revision:_}},right:{path:e.filePath,data:{type:"generatedFile",content:e.content}}}});F({type:"diff",data:e}),el(e)},[_,F,Y,el]);(0,y.useEffect)(function(){ew&&eR()},[ew,eR]);var eT=(0,f.Y)(iX.N,{css:az.statusBanner,icon:(0,f.Y)(tZ.A,{}),colorway:"teal",text:(0,f.FD)(f.FK,{children:[iY.BP," can automatically apply proposed changes to your App. You can enable this behavior in"," ",(0,f.Y)(M.$n,{css:ea.wp.display.inlineFlex,variant:"underlined",size:"small",onClick:T,text:"".concat(iY.BP," Settings")}),"."]}),closable:!0,closeAction:H.setAsDone}),eF=(0,f.Y)(iX.N,{css:az.statusBanner,icon:(0,f.Y)(tZ.A,{}),colorway:"teal",text:(0,f.FD)(f.FK,{children:[iY.BP," automatically restarted your App after applying file changes. You can disable this behavior in"," ",(0,f.Y)(M.$n,{css:ea.wp.display.inlineFlex,variant:"underlined",size:"small",onClick:T,text:"".concat(iY.BP," Settings")}),"."]}),closable:!0,closeAction:B.setAsDone}),eP=Q?(0,f.FD)(V.EY,{variant:"small",color:"dimmer",children:[(0,iY.Nn)({capitalizeFirstChar:!0})," is currently active. Changes cannot be applied until ",(0,iY.Nn)()," finishes working."]}):null;return U&&q?e_||ei?(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[ei?(0,f.Y)(V.EY,{color:"dimmer",children:"Thinking…"}):e_?(0,f.Y)(V.EY,{color:"dimmer",children:"Applying changes…"}):null,(0,f.Y)(tw.A,{})]}):N?(0,f.FD)(j.S,{gap:8,align:"start",children:[H.isDone?null:eT,(0,f.Y)(aG,{changeStatus:er,isLoadingFilesChangedSinceCommit:ed,hasAnyChangedPaths:eu,changedPaths:ec,openPane:F,handleRetryProposingChanges:ev,handleApplyChanges:eR,isAgentActive:Q,agentRunState:$,handlePauseAgent:et,assistantAutoApplyChanges:z.assistantAutoApplyChanges,openMultiDiffPane:eI,isMultistepApplyUIVisible:eD,hasSingleFileChangeOnly:W,hasAnyFileChanges:G}),eP,null==ee?null:(0,f.FD)(j.S,{css:az.errorContainer,children:[(0,f.Y)(aH.A,{}),ee,(0,f.Y)(M.$n,{text:"Try again",onClick:et,variant:"underlined",iconLeft:(0,f.Y)(aB.A,{})})]}),null==eA?null:(0,f.FD)(j.S,{css:az.errorContainer,children:[(0,f.Y)(aH.A,{}),eA,eC?(0,f.Y)(M.$n,{text:"Try again",onClick:eR,variant:"underlined",iconLeft:(0,f.Y)(aB.A,{})}):null]}),!eh||B.isDone?null:eF,eD?(0,f.Y)(aF,{sessionId:R,eventId:x,sortedActions:k,changesSummary:C,changeStatus:er,onCancel:function(){eE(!1)},handleAutoRestart:ey,doAutoApplyChanges:ew,prevUserMessageContent:O}):null]}):null:null}function aG(e){var n=e.changeStatus,t=e.isLoadingFilesChangedSinceCommit,r=e.hasAnyChangedPaths,i=e.changedPaths,o=e.openPane,a=e.handleRetryProposingChanges,l=e.handleApplyChanges,s=e.isAgentActive,c=e.agentRunState,u=e.handlePauseAgent,d=e.assistantAutoApplyChanges,p=e.openMultiDiffPane,h=e.isMultistepApplyUIVisible,m=e.hasSingleFileChangeOnly,g=e.hasAnyFileChanges;return h||"pending"!==n.state?null:t?(0,f.Y)(j.S,{css:az.buttonRow,row:!0,gap:8,align:"center",children:(0,f.Y)(M.$n,{text:"Validating code changes…",iconLeft:(0,f.Y)(tw.A,{}),disabled:!0})}):r?(0,f.FD)(f.FK,{children:[(0,f.Y)(a_,{changedPaths:i,openPane:o}),(0,f.FD)(j.S,{css:az.buttonRow,row:!0,gap:8,align:"center",children:[(0,f.Y)(M.$n,{text:"Retry ".concat(aw.go),onClick:a,iconLeft:(0,f.Y)(aB.A,{})}),(0,f.Y)(M.$n,{text:"Overwrite and apply",onClick:l,iconLeft:(0,f.Y)(oJ.A,{}),colorway:"warning"})]})]}):(0,f.FD)(j.S,{css:az.buttonRow,row:!0,gap:8,align:"center",children:[s?(0,f.Y)(aU,{runState:c,onClick:u}):null,(0,f.Y)(Z.m_,{tooltip:"Pause agent before applying changes",placement:"top",isDisabled:!s,children:(0,f.Y)(M.$n,{text:m?"Apply":"Apply all",onClick:l,iconLeft:(0,f.Y)(oJ.A,{}),disabled:s,colorway:d?"green":"primary"})}),g?(0,f.Y)(M.$n,{text:"Preview code changes",onClick:p,iconLeft:(0,f.Y)(aM.A,{}),disabled:s}):null]})}function aV(e){var n=e.proposedActions,t=(0,tR._)(e,["proposedActions"]);return n&&(n.fileChanges.length>0||n.hasAnyWorkspaceProposedActions)?(0,f.Y)(aW,(0,eg._)({},t,n)):null}function aZ(){return(0,f.Y)(j.S,{px:16,py:8,children:(0,f.Y)(iX.N,{text:"".concat(iY.BP," saved your work"),icon:(0,f.Y)(oJ.A,{}),colorway:"primary"})})}var aj=t(54759),aq=t(15407),aK=function(e){return e.None="none",e.Starter="starter",e.Paid="paid",e}({}),a$=(0,eo.x)({root:[ea.wp.borderRadius(),ea.wp.border({color:N.LU.outlineDimmest})],icon:{paddingTop:3},footer:[{"@container (max-width: 400px)":[ea.wp.colWithGap(8),ea.wp.align.start,ea.wp.height("100%")]}],footerActions:[ea.wp.color.foregroundDimmer,ea.wp.mr(4),{"@container (max-width: 400px)":{width:"100%"}}],footerSmallButtonContainer:[ea.wp.display.inlineFlex,{"@container (max-width: 400px)":[ea.wp.flex.grow(1)]}],footerSmallButton:[{marginTop:-10,marginRight:-4},{"@container (max-width: 400px)":{margin:0}}],timestamp:[ea.wp.rowWithGap(4),ea.wp.flex.wrap],summaryContainer:[ea.wp.width(200)]});function aJ(e){var n=e.commitId,t=e.changeSetSummary,r=e.date,i=e.isAtCheckpoint,o=e.isRestoring,a=e.wasReverted,l=e.isLoading,s=e.onCommitRestore,c=e.onOpenCommit,u=e.restoreButtonText,d=e.usageIndicatorVariant,p=(0,P.A)(),h=(0,om.R)(p).orgId,m=(0,og.M)(h).hasUserExhaustedMonthlyCredits,g="starter"===d?"Used 1 ".concat(iM.Lm," plan ").concat(iY.BP," ").concat(aw.go):"The ".concat(aw.go," for this checkpoint used ").concat(aw.a7,"\xa2 ").concat(m?"":"of your usage credits",".");return(0,f.FD)(ek.ui,{elevated:!0,css:a$.root,py:4,px:8,row:!0,gap:8,children:[(0,f.Y)(j.S,{css:a$.icon,children:(0,f.Y)(rK,{color:N.LU.foregroundDimmest})}),(0,f.FD)(j.S,{grow:!0,shrink:!0,gap:4,children:[(0,f.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.FD)(j.S,{row:!0,gap:4,children:[(0,f.Y)(V.EY,{maxLines:2,color:a&&!i?"dimmer":"default",style:{textDecoration:a&&!i?"line-through":void 0},children:i?"Currently at checkpoint":"Checkpoint made"}),a&&!i?(0,f.Y)(V.EY,{color:"dimmer",children:"Reverted"}):null]}),"none"!==d?(0,f.Y)(Z.m_,{tooltip:g,placement:"top",children:(0,f.Y)(aq.A,{})}):null]}),(0,f.Y)(j.S,{children:void 0!==l&&l?(0,f.Y)(j.S,{css:a$.summaryContainer,children:(0,f.Y)(aj.Ay,{speed:2,backgroundColor:N.LU.backgroundHighest,foregroundColor:N.LU.backgroundHigher,height:18,children:(0,f.Y)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"200",height:"16"})})}):t?(0,f.Y)(V.EY,{color:"dimmer",variant:"small",children:t}):null}),(0,f.FD)(j.S,{css:a$.footer,row:!0,align:"end",children:[(0,f.FD)(j.S,{row:!0,gap:8,children:[r?(0,f.Y)(j.S,{css:a$.timestamp,style:{color:N.LU.foregroundDimmer},children:(0,f.Y)(eT.Dc,{textVariant:"small",live:!0,date:r})}):null,n?(0,f.Y)(aQ,{commitId:n,onOpenCommit:c}):null]}),(0,f.Y)(j.S,{css:a$.footerActions,grow:!0,shrink:!0,row:!0,justify:"end",children:n&&s&&!i?(0,f.Y)(Z.m_,{tooltip:"Already at this checkpoint",isDisabled:!i,css:a$.footerSmallButtonContainer,children:(0,f.Y)(M.$n,{css:a$.footerSmallButton,onClick:s,iconLeft:o?(0,f.Y)(tw.A,{}):a?(0,f.Y)(aB.A,{}):(0,f.Y)(oS.A,{}),disabled:o||i,size:"small",variant:"underlinedOnHover",text:a?"Restore checkpoint":void 0===u?"Go to this checkpoint":u})}):null})]})]})]})}function aQ(e){var n=e.commitId,t=e.onOpenCommit;return(0,f.FD)(j.S,{css:a$.timestamp,style:{color:N.LU.foregroundDimmer},children:[(0,f.Y)(V.EY,{variant:"small",multiline:!1,children:"•"}),t?(0,f.Y)(M.$n,{variant:"underlinedOnHover",text:n.slice(0,8),size:"small",onClick:function(){return t(n)}}):(0,f.Y)(V.EY,{variant:"small",children:n})]})}var aX=t(82529),a0=(0,eo.x)({errorContainer:[ea.wp.color.accentNegativeDefault]});function a1(e){var n,t=e.commitHash,r=e.created,i=e.onOpenCommit,o=e.onRestoreToCommit,a=e.isRestoring,l=e.error,s=void 0===l?null:l,c=e.currentCommit,u=void 0===c?null:c,d=e.commitDetails,p=void 0===d?null:d,h=e.isLoading,m=e.usageIndicatorVariant,g=(null==u?void 0:u.hash)===t,v=(null==u?void 0:u.trailers[aX.aT])===t,y=(n=(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!o)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,o()];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,f.FD)(j.S,{px:16,py:8,gap:8,children:[s?(0,f.Y)(j.S,{css:a0.errorContainer,children:s}):null,(0,f.Y)(aJ,{commitId:t,changeSetSummary:null==p?void 0:p.subject,date:r,isAtCheckpoint:!!(v||g),isRestoring:void 0!==a&&a,onCommitRestore:y,onOpenCommit:i,isLoading:void 0!==h&&h,usageIndicatorVariant:m})]})}function a2(e){var n,t,r=e.commitHash,i=e.created,o=e.onOpenCommit,a=e.onRestoreToCommit,l=(0,v._)((0,y.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,y.useState)(null),2),d=u[0],p=u[1],h=(0,v._)((0,y.useState)(!0),2),m=h[0],g=h[1],S=(0,v._)((0,y.useState)(null),2),Y=S[0],_=S[1],A=(0,v._)((0,y.useState)(null),2),C=A[0],k=A[1],x=(0,v._)((0,y.useState)(!0),2),D=x[0],E=x[1];(0,rh.A)((n=(0,w._)(function(e){var n,t,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:return[4,Promise.all([e.getCommit({commit:"HEAD"}),e.getCommit({commit:r})])];case 1:return t=(n=v._.apply(void 0,[a.sent(),2]))[0],i=n[1],t.error?_(null):(o={},Object.entries(t.trailers||{}).forEach(function(e){var n=(0,v._)(e,2),t=n[0],r=n[1];o[t]=null!=r?r:""}),_({hash:t.hash,trailers:o})),i.error?k(null):k({subject:i.subject}),g(!1),[2,{error:null}]}})}),function(e){return n.apply(this,arguments)}),[r]),(0,y.useEffect)(function(){if(D){var e=setTimeout(function(){E(!1)},3e3);return function(){return clearTimeout(e)}}},[D]);var R=(t=(0,w._)(function(){return(0,b.YH)(this,function(e){if(!a)return[2];c(!0);try{a(),p(null)}catch(e){p("Failed to restore to checkpoint")}finally{c(!1)}return[2]})}),function(){return t.apply(this,arguments)});return(0,f.Y)(a1,{commitHash:r,created:i,onOpenCommit:o,onRestoreToCommit:R,isRestoring:s,error:d,currentCommit:Y,commitDetails:C,isLoading:m,usageIndicatorVariant:aK.None})}var a4=(0,eo.x)({costInfo:[ea.wp.height(24)]});function a5(e){var n=e.eventId,t=e.sessionId,r=e.hasUserExhaustedMonthlyCredits,i=e.didCountEditRequest,o=au({sessionId:t,eventIdWhichProposedChanges:n});return(0,f.Y)(j.S,{grow:!0,shrink:!0,row:!0,gap:4,justify:"start",children:i&&"pending"===o.state?(0,f.Y)(j.S,{css:a4.costInfo,row:!0,align:"center",children:(0,f.Y)(Z.m_,{tooltip:"This ".concat(aw.go," used ").concat(aw.a7,"\xa2 ").concat(r?"":"of your usage credits","."),placement:"bottom",children:(0,f.Y)(aq.A,{color:N.LU.foregroundDimmer})})}):null})}var a3=t(25578),a7=t(29004),a6=(0,eo.x)({revertText:[ea.wp.color.orangeStronger,ea.wp.fontWeight.medium],mergeText:[ea.wp.color.purpleStronger,ea.wp.fontWeight.medium],pullRequestId:[ea.wp.fontWeight.medium],hash:[ea.wp.fontWeight.medium],filePathPrefix:[ea.wp.color.foregroundDimmest],commitBody:[ea.wp.font.code,{whiteSpace:"pre-wrap"},{fontSize:N.LU.fontSizeSmall}],clickableName:[ea.wp.cursor.pointer,{"&:hover":{textDecoration:"underline"}}],tooltip:[ea.wp.display.inlineFlex,ea.wp.rowWithGap(4),ea.wp.align.center],path:[{fontSize:N.LU.fontSizeSmall},ea.wp.font.code],currentBranchIndicator:[ea.wp.height(16),ea.wp.width(16),ea.wp.align.center],currentBranchDot:[ea.wp.height(6),ea.wp.width(6),ea.wp.backgroundColor.accentPrimaryStronger,ea.wp.borderRadius("full")],branchNameWrapper:[ea.wp.flex.row,ea.wp.align.center],fixTooltipDisplay:{"& > span":{display:"inline-block"}},headingWrapper:[ea.wp.display.inlineFlex,ea.wp.rowWithGap(4),ea.wp.align.center,ea.wp.flex.shrink(1),ea.wp.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},ea.wp.mr(4)],headingCurrent:[ea.wp.px(4)],current:[ea.wp.position.relative,ea.wp.top("-1px"),ea.wp.display.inlineFlex,ea.wp.pl(2),ea.wp.pr(8)],icon:[{verticalAlign:"baseline !important"},ea.wp.mr(4)],bodyContainer:[ea.wp.border({color:N.LU.outlineDimmest,direction:"full"}),ea.wp.borderRadius(8),ea.wp.p(16)]});function a8(e){var n=e.text,t=e.className;return(0,f.Y)("span",{className:t,css:a6.revertText,children:n})}function a9(e){var n=e.text,t=e.className;return(0,f.Y)("span",{className:t,css:a6.mergeText,children:n})}function le(e){var n,t=e.id,r=e.hash,i=e.className;return n=void 0===r||r?"string"==typeof t&&t.startsWith("#")?t:"#".concat(t):"string"==typeof t&&t.startsWith("#")?t.slice(1):"".concat(t),(0,f.Y)("span",{className:i,css:a6.pullRequestId,children:n})}function ln(e){var n=e.hash,t=e.length,r=e.className;return(0,f.Y)("span",{className:r,css:a6.hash,children:n.slice(0,(void 0===t?8:t)+1)})}function lt(e){var n=e.subject,t=e.remoteName,r=e.quoted,i=void 0!==r&&r,o=e.className;return t?(0,f.Y)(a3.Ay,{className:o,background:!1,lineBreaks:!0,themed:!0,useRemarkGfm:!0,remarkGitHubOptions:{repository:t},children:i?'"'.concat(n,'"'):n}):(0,f.Y)("span",{className:o,children:i?'"'.concat(n,'"'):n})}function lr(e){var n=e.body,t=e.view,r=e.className;return"Source"===(void 0===t?"Source":t)?(0,f.Y)(j.S,{css:a6.bodyContainer,children:(0,f.Y)("pre",{className:r,css:a6.commitBody,children:n})}):(0,f.Y)(j.S,{css:a6.bodyContainer,children:(0,f.Y)(a3.Ay,{className:r,background:!1,mentionsLink:!0,lineBreaks:!0,themed:!0,useRemarkGfm:!0,children:n})})}function li(){return(0,f.Y)("span",{css:a6.fixTooltipDisplay,children:(0,f.Y)(Z.m_,{tooltip:"This is your current branch",children:(0,f.Y)(j.S,{css:a6.currentBranchIndicator,children:(0,f.Y)(j.S,{css:a6.currentBranchDot})})})})}function lo(e){var n=e.name,t=e.remote,r=e.current,i=void 0!==r&&r,o=e.heading,a=void 0!==o&&o,l=e.icon,s=void 0!==l&&l,c=e.onClick,u=e.className,d=null;return(!0===s?d=a?(0,f.Y)(a7.A,{size:16}):(0,f.Y)(a7.A,{css:a6.icon,size:12}):s&&(d=s),a)?(0,f.FD)("div",{css:a6.headingWrapper,children:[d,(0,f.FD)(V.EY,{variant:"subheadDefault",multiline:!1,children:[t?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:a6.headingRemote,children:t}),(0,f.Y)("span",{css:a6.headingRemote,children:"/"})]}):null,c?(0,f.Y)(ls,{label:"View branch",onClick:c,children:n}):(0,f.Y)("span",{children:n})]}),i?(0,f.Y)("span",{css:a?a6.headingCurrent:a6.current,children:(0,f.Y)(li,{})}):null]}):(0,f.FD)("span",{className:u,css:a6.branchNameWrapper,children:[d,t?(0,f.FD)("span",{children:[t,"/"]}):null,c?(0,f.Y)(ls,{label:"View branch",onClick:c,children:n}):(0,f.Y)("span",{children:n}),i?(0,f.Y)(li,{}):null]})}function la(e){var n=e.path,t=e.prefix,r=e.onClick,i=e.className,o=(0,tg.WP)(n),a=!r&&(o===n||null!==t&&t+o===n);return(0,f.Y)("span",{css:a6.fixTooltipDisplay,children:(0,f.Y)(Z.m_,{maxWidth:"auto",tooltip:(0,f.Y)(ll,{path:n,openable:!!r}),isDisabled:a,children:r?(0,f.FD)(ls,{label:"Open ".concat(o),onClick:r,className:i,children:[t?(0,f.Y)("span",{css:a6.filePathPrefix,children:t}):null,(0,f.Y)("span",{children:o})]}):(0,f.FD)("span",{className:i,children:[t?(0,f.Y)("span",{css:a6.filePathPrefix,children:t}):null,(0,f.Y)("span",{children:o})]})})})}function ll(e){var n=e.path,t=e.openable;return(0,f.FD)("span",{css:a6.tooltip,children:[void 0===t||t?(0,f.Y)("span",{children:"Open"}):null,(0,f.Y)("span",{css:a6.path,children:n})]})}function ls(e){var n=e.label,t=e.onClick,r=e.className,i=e.children;return(0,f.Y)("span",{className:r,css:a6.clickableName,role:"button",tabIndex:-1,"aria-label":n,onClick:t,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==t||t())},children:i})}var lc=(0,eo.x)({source:[ea.wp.color.foregroundDimmest],sourceArrow:[ea.wp.mx(8)]});function lu(e){var n=e.path,t=e.prefix,r=e.source,i=e.onClick;return(0,f.FD)(j.S,{grow:!0,shrink:!0,align:"center",row:!0,gap:8,children:[(0,f.Y)(ty.A,{path:n}),(0,f.FD)(V.EY,{multiline:!1,children:[(0,f.Y)(la,{path:n,prefix:t,onClick:i}),r?(0,f.FD)("span",{css:lc.source,children:[(0,f.Y)("span",{css:lc.sourceArrow,children:"←"}),(0,f.Y)(la,{path:r})]}):null]})]})}var ld=t(85144),lp=t(49666),lf=(0,eo.x)({list:[ea.wp.px(4),ea.wp.colWithGap(2)]});function lh(e){var n,t,r=e.isOpen,i=e.files,o=e.commitHash,a=e.callback,l=(0,nt.A)(a),s=(0,y.useCallback)(function(){var e;null==(e=l.current)||e.call(l,!0)},[l]),c=(0,y.useCallback)(function(){var e;null==(e=l.current)||e.call(l,!1)},[l]),u=(n=o,(0,rh.A)((t=(0,w._)(function(e){var t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!n)return[2,{error:aN.uA.INVALID_REFERENCE}];return[4,e.status()];case 1:if((t=i.sent()).error)return[2,{error:t.error}];return[4,e.getCommit({commit:n})];case 2:if((r=i.sent()).error)return[2,{error:r.error}];return[2,r]}})}),function(e){return t.apply(this,arguments)}),[n])),d=u&&!u.error&&u.subject;return(0,f.Y)(ld.a,{isOpen:r,onRequestClose:c,children:r?(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(V.Y9,{level:2,children:u?"Restore to ".concat(null!=d?d:"".concat(iY.BP," checkpoint")):(0,f.Y)(tw.A,{})}),0===i.length?(0,f.Y)(V.EY,{multiline:!1,children:"No file changes for this commit."}):(0,f.FD)(f.FK,{children:[(0,f.Y)(lm,{files:i}),(0,f.FD)(j.S,{row:!0,gap:8,justify:"end",children:[(0,f.Y)(M.$n,{text:"Cancel",iconLeft:(0,f.Y)(lp.A,{}),onClick:c}),(0,f.Y)(M.$n,{text:"Restore Commit",iconLeft:(0,f.Y)(oS.A,{}),colorway:"primary",onClick:s})]})]})]}):null})}function lm(e){var n=e.files;return(0,f.Y)(j.S,{gap:12,children:(0,f.FD)(j.S,{gap:4,children:[(0,f.Y)(V.EY,{multiline:!1,children:"The following ".concat((0,oy.A)("file",n.length)," will be modified")}),(0,f.Y)(lg,{files:n})]})})}function lg(e){var n=e.files,t=(0,y.useMemo)(function(){return n.length>20?n.slice(0,20):n},[n]);return(0,f.Y)(j.S,{children:(0,f.FD)("ul",{css:lf.list,children:[t.map(function(e){return(0,f.Y)("li",{children:(0,f.Y)(lu,{path:e.path,source:e.originalPath})},e.path)}),n.length<=20?null:(0,f.Y)("li",{children:(0,f.FD)(V.EY,{color:"dimmer",children:["… ",n.length-20," more"," ",(0,oy.A)("file",n.length-20)]})})]})})}function lv(){var e,n,t=(0,v._)((0,y.useState)(function(){return{isOpen:!1,files:[]}}),2),r=t[0],i=t[1],o=(e=(0,A.A)().git,(0,y.useCallback)((n=(0,w._)(function(n){var t,r,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:return t=n.commitA,r=n.commitB,[4,e.status()];case 1:if(null!==(i=a.sent()).error)return[2,{error:i.error}];return[4,e.getChangesBetweenCommits({a:t,b:r})];case 2:if(null!==(o=a.sent()).error)return[2,{error:o.error}];return[2,{error:null,files:o.files}]}})}),function(e){return n.apply(this,arguments)}),[e]));return{confirmRestoreToCommit:(0,y.useCallback)(function(e){var n;return new Promise((n=(0,w._)(function(n,t){var r,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,o({commitA:"HEAD",commitB:e})];case 1:if((r=l.sent()).error)return t(r.error),[2];if(0===r.files.length)return t("No files changed"),[2];return a=function(e){i({isOpen:!1,files:[],callback:void 0,commitHash:void 0}),n(e)},i({isOpen:!0,files:r.files,callback:a,commitHash:e}),[2]}})}),function(e,t){return n.apply(this,arguments)}))},[o]),restoreConfirmationModal:(0,y.useMemo)(function(){return(0,f.Y)(lh,(0,eg._)({},r))},[r])}}var ly=t(37201);function lw(e){var n=e.children,t=e.intent,r=e.showUpsell,i=e.date;return(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(iq.A,{size:24}),(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:iY.BP}),r?(0,f.Y)(iV,{}):null,(0,f.Y)(eT.Dc,{textVariant:"small",textColor:"dimmest",date:i}),(null==t?void 0:t.kind)==="message"?(0,f.Y)(ly.m2,{intent:t.value,icon:{color:N.LU.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,(null==t?void 0:t.kind)==="inline"?(0,f.Y)(ly.vc,{type:t.value,icon:{color:N.LU.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,n]})}function lb(e){var n=e.children,t=e.headerProps,r=void 0===t?{showUpsell:!1,intent:null,date:new Date}:t,i=e.headerActions,o=e.footer,a=e.footerActions,l=(0,tR._)(e,["children","headerProps","headerActions","footer","footerActions"]);return(0,f.FD)(j.S,(0,nh._)((0,eg._)({px:16,py:8,gap:8},l),{children:[(0,f.Y)(lw,(0,nh._)((0,eg._)({},r),{children:i})),n,o||a?(0,f.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(j.S,{children:o}),(0,f.Y)(j.S,{grow:!0,shrink:!0,row:!0,gap:8,align:"center",justify:"end",children:a})]}):null]}))}function lS(e){var n=(0,S.Gk)(),t=(0,v._)((0,y.useState)(n),1)[0];switch(e.type){case I.fqQ.MANUALLY_ABORTED:return(0,f.Y)(iX.N,{icon:(0,f.Y)(tZ.A,{}),text:"Message was stopped"});case I.fqQ.USAGE_LIMIT:return(0,f.Y)(iX.N,{icon:(0,f.Y)(i0.A,{}),colorway:"orange",text:"Usage limit reached"});default:return(0,f.Y)(iX.N,{icon:(0,f.Y)(i0.A,{}),colorway:"red",text:t?"Something went wrong":"Please refresh the page and try again"})}}var lY=t(60611),l_=t(36818);function lA(){var e,n=(0,A.A)().git;return(0,y.useCallback)((e=(0,w._)(function(e){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return t=e.commitHash,[4,n.status()];case 1:if(null!=(r=o.sent()).error)return[2,{error:r.error}];return[4,n.restoreCommit({commit:t})];case 2:if(i=o.sent(),n.forceRefresh(),null!=i.error)return[2,{error:i.error}];return[2,{}]}})}),function(n){return e.apply(this,arguments)}),[n])}var lC=(0,y.memo)(function(e){var n,t,r,i,o,a,l,s=e.id,c=e.data,u=e.prevData,d=e.openPane,p=e.removePane,h=e.openAiChatSettingsPanel,m=e.isLastEvent,g=lA(),v=lv(),S=v.confirmRestoreToCommit,Y=v.restoreConfirmationModal,_=(0,P.A)(),A=(0,om.R)(_).orgId,C=(0,og.M)(A).hasUserExhaustedMonthlyCredits,k=ou(d),x=(0,y.useCallback)(function(e,n){return d({type:"webview",data:{ports:{path:e,port:n,type:"local"}}})},[d]),D=(n=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!(null==(e=c.proposedActions)?void 0:e.commitId))return[2];return[4,S(c.proposedActions.commitId)];case 1:if(!n.sent())return[3,3];return[4,g({commitHash:c.proposedActions.commitId})];case 2:n.sent(),n.label=3;case 3:return[2]}})}),function(){return n.apply(this,arguments)}),E=(0,ol.Vd)({openFile:k,messageSenderType:I.utd.AI}),R=(0,l_.A)({openWebview:x,ragSources:c.ragSources}),T=(0,y.useCallback)(function(e){return d({type:"git",data:{mode:{type:lY.C.COMMIT,hash:e}}})},[d]),F=c.state===I.qOk.COMPLETE,L=null==(t=c.proposedActions)?void 0:t.didCreateCheckpoint,U=(null==u?void 0:u.type)==="userMessage"?u.content:void 0;return(0,f.FD)(j.S,{children:[Y,L?m?(0,f.Y)(aZ,{}):(0,f.Y)(a2,{commitHash:null!=(a=null==(r=c.proposedActions)?void 0:r.commitId)?a:"",created:c.created,onOpenCommit:T,onRestoreToCommit:D}):null,(0,f.FD)(lb,{"data-cy":"message-from-ai",headerProps:{showUpsell:!0,date:c.created,intent:c.intent},headerActions:(0,f.Y)(a5,{eventId:s,sessionId:c.sessionId,didCountEditRequest:null!=(l=null==(i=c.proposedActions)?void 0:i.didCountEditRequest)&&l,hasUserExhaustedMonthlyCredits:C}),footer:F&&c.error?(0,f.Y)(lS,{type:c.error}):null,children:[(0,f.Y)(ay,{eventId:s,content:c.content,intent:(null==(o=c.intent)?void 0:o.kind)==="message"?c.intent.value:null,ragSources:c.ragSources,proposedActions:c.proposedActions,sessionId:c.sessionId,openPane:d,removePane:p,markdownCodeComponent:c.isDebugMessage?void 0:E,markdownLinkComponent:R,eventState:c.state}),(0,f.Y)(aV,{eventId:s,proposedActions:c.proposedActions,isLatestProposedActionsEvent:c.isLatestProposedActionsEvent,isMessageComplete:F,sessionId:c.sessionId,openAiChatSettingsPanel:h,openPane:d,removePane:p,prevUserMessageContent:U})]})]})}),lk=(0,eo.x)({container:[ea.wp.borderRadius(),ea.wp.py(4),ea.wp.px(8),ea.wp.border({color:N.LU.outlineDimmest}),ob.b.filledAndOutlined],runButton:[ea.wp.rowWithGap(4),ea.wp.justify.center,ea.wp.align.center,ea.wp.height(24),ea.wp.minWidth(48),ea.wp.cursor.pointer,ea.wp.position.relative,ea.wp.fontWeight.medium]});function lx(e){var n=e.isWorkflowLoading,t=e.isRunning,r=e.forceDisable,i=e.handleRunButtonClick;return n?(0,f.FD)(j.S,{css:lk.runButton,children:[(0,f.Y)(tw.A,{size:12}),(0,f.Y)(V.EY,{multiline:!1,variant:"small",children:"Loading"})]}):t?(0,f.FD)(j.S,{css:lk.runButton,onClick:i,children:[(0,f.Y)(oU.A,{size:12}),(0,f.Y)(V.EY,{multiline:!1,variant:"small",children:"Rerun"})]}):(0,f.FD)(j.S,{disabled:r,css:lk.runButton,onClick:i,children:[(0,f.Y)(oL.A,{size:12}),(0,f.Y)(V.EY,{multiline:!1,variant:"small",children:"Run"})]})}function lD(){var e,n,t,r,i,o=(0,n2.oh)(),a=(0,n2.lO)(),l=a.isRunning,s=a.isDisabled,c=a.runButtonWorkflowName,u=(0,n2.d_)(),d=(0,y.useCallback)(function(){(0,tP.u4)(tP.AZ.RUN_BUTTON_CLICKED,{source:"assistantRerunButton",runner:"workflows"}),u()},[u]);return(0,f.Y)(ek.ui,{css:lk.container,grow:!0,shrink:!0,children:(0,f.Y)(Z.m_,{placement:"top",tooltip:(t=(e={forceDisable:s,runButtonText:c,isRunning:l,isWorkflowLoading:o}).forceDisable,r=e.isRunning,i=e.isWorkflowLoading,n=t?"Run button is not configured":i?"Connecting to the workspace":r?"Rerun app":"Run app",(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:n})),children:(0,f.Y)(lx,{forceDisable:s,handleRunButtonClick:d,isRunning:l,isWorkflowLoading:o})})})}var lE=(0,eo.x)({errorContainer:[ea.wp.color.accentNegativeDefault]});function lR(e){var n,t,r,i=e.sessionId,o=e.commitHash,a=e.created,l=e.eventId,s=e.eventWhichProposedChanges,c=e.onOpenCommit,u=e.appliedChanges,d=e.usageIndicatorVariant,p=e.changeSetSummary,h=e.didCountEditRequest,m=(0,iL.m5)(),g=(0,tl.g)("assistantAutoRestartRepl").preferences,Y=(0,v._)((0,y.useState)(!1),2),_=Y[0],A=Y[1],C=(0,v._)((0,y.useState)(null),2),k=C[0],x=C[1],E=lI("HEAD"),R=lI("HEAD^1"),I=E&&!E.error&&E.hash===o,T="reverted"===au({sessionId:i,eventIdWhichProposedChanges:s}).state,F=E&&!E.error&&E.trailers[aX.aT]===o,P=lA(),L=lv(),U=L.confirmRestoreToCommit,N=L.restoreConfirmationModal,O=(n=i,t=(0,S.NC)(),r=(0,D.J2)(t.sessions.get(n)),(0,y.useCallback)(function(e){if(null!=n)return null==r?void 0:r.appendEvent({kind:"iterativeAgent",action:e})},[r,n]));function M(){return(M=(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!o)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,U(o)];case 2:return e.sent()&&H(o),[3,4];case 3:return e.sent(),x("Something went wrong. Please try again."),[3,4];case 4:return[2]}})})).apply(this,arguments)}function H(e){return B.apply(this,arguments)}function B(){return(B=(0,w._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!e)return[2];return A(!0),[4,P({commitHash:e})];case 1:if((n=t.sent()).error)return x(n.error),A(!1),[2];return x(null),A(!1),[2]}})})).apply(this,arguments)}var z=R&&!R.error,W=(0,f.FD)(f.FK,{children:[(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:"You may need to re-run your App to see the latest changes take effect."}),m?null:(0,f.Y)(lD,{})]});return(0,f.FD)(j.S,{px:16,py:8,gap:8,children:[N,k?(0,f.FD)(j.S,{css:lE.errorContainer,row:!0,gap:8,align:"center",children:[(0,f.Y)(aH.A,{}),k]}):null,I?z?(0,f.Y)(aJ,{commitId:o,changeSetSummary:p,date:a,isAtCheckpoint:!1,isRestoring:_,onOpenCommit:c,onCommitRestore:(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,H(R.hash)];case 1:return e.sent(),O({eventIdWhichProposedChanges:s,eventIdWhichAppliedChanges:l,revertedChanges:u}),[2]}})}),restoreButtonText:"Undo these changes",usageIndicatorVariant:h?d:aK.None}):null:(0,f.Y)(aJ,{commitId:o,changeSetSummary:p,date:a,isAtCheckpoint:!!F,isRestoring:_,onCommitRestore:function(){return M.apply(this,arguments)},onOpenCommit:c,usageIndicatorVariant:h?d:aK.None,wasReverted:T}),(0,f.Y)(j.S,{gap:8,align:"start",children:I&&!g.assistantAutoRestartRepl?W:null})]})}function lI(e){var n;return(0,rh.A)((n=(0,w._)(function(n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,n.getCommit({commit:e})];case 1:if((t=r.sent()).error)return[2,t];return[2,{hash:t.hash,trailers:t.trailers,error:null,body:t.body,subject:t.subject}]}})}),function(e){return n.apply(this,arguments)}),[e])}function lT(e){var n=e.id,t=e.data,r=e.proposedActionEventData,i=e.openPane,o=e.checkpointUsageIndicatorVariant,a=(0,D.J2)(r),l=(0,y.useCallback)(function(e){return i({type:"git",data:{mode:{type:lY.C.COMMIT,hash:e}}})},[i]);if((null==a?void 0:a.type)!=="assistantMessage"||!a.proposedActions)return null;if((0,F.VF)(t.contents.contents,"appliedFileChanges")){var s=a.proposedActions,c=s.summary,u=s.didCountEditRequest;return(0,f.Y)(lR,(0,nh._)((0,eg._)({},(0,F.QN)(t.contents.contents)),{sessionId:t.sessionId,eventId:n,created:t.created,onOpenCommit:l,usageIndicatorVariant:o,changeSetSummary:c,didCountEditRequest:u}))}return(0,F.VF)(t.contents.contents,"revertedFileChanges"),null}var lF=t(93704),lP=t(81986),lL=t(31450),lU=(0,iE.v)(["opacity"]),lN=lU.cssVars,lO=lU.styleTokens,lM=(0,eo.x)({fade:[ea.wp.position.absolute,ea.wp.top(-1),ea.wp.left(0),ea.wp.width("100%"),ea.wp.height(40),ea.wp.backgroundGradient(N.LU.surfaceBackground,"transparent"),{pointerEvents:"none",opacity:lO.opacity,transitionProperty:"opacity",transitionDuration:lL.Ds.duration,transitionTimingFunction:lL.Ds.timingFunction}]});function lH(e){var n=e.show,t=(0,y.useRef)(null);return(0,lP.d)(t,null!=n?n:new nA.N(!0),function(e){return(0,g._)({},lN.opacity,e?"1":"0")}),(0,f.Y)("div",{ref:t,css:lM.fade})}var lB=t(57331),lz=(0,eo.x)({bannerContainer:[ea.wp.position.sticky],loadingContainer:[ea.wp.center,ea.wp.flex.growAndShrink(1)]});function lW(e){var n,t,r=e.shouldAutoscrollRef,i=(0,tR._)(e,["shouldAutoscrollRef"]),o=(0,y.useRef)(new Map),a=i.sessionId,l=(n=(0,y.useRef)(null),t=(0,D.HJ)(!1),(0,y.useEffect)(function(){var e=n.current;if(e){var r=function(){var n=e.scrollTop>0;t.current!==n&&t.set(n)},i=requestAnimationFrame(r),o=function(){i&&cancelAnimationFrame(i),i=requestAnimationFrame(r)};return e.addEventListener("scroll",o),function(){e.removeEventListener("scroll",o),i&&cancelAnimationFrame(i)}}},[n,t]),{scrollerRef:n,isScrolledDown:t}),s=l.scrollerRef,c=l.isScrolledDown;return(0,f.FD)(lB.y,{shouldAutoScrollRef:r,scrollCacheKey:a,scrollCache:o.current,scrollerRef:s,children:[(0,f.Y)(j.S,{css:lz.bannerContainer,children:(0,f.Y)(i3,{})}),(0,f.Y)(lG,(0,eg._)({},i)),(0,f.Y)(lH,{show:c})]})}function lG(e){var n=e.sessionId,t=(0,tR._)(e,["sessionId"]),r=(0,S.NC)(),i=(0,D.J2)(r.sessions.get(n)),o=(0,y.useMemo)(function(){return null==i?void 0:i.transform(oe,1e3)},[i]),a=(0,D.Rj)(function(){return null==o?void 0:o.tuples},[o],{preserve:!1}),l=(0,D.Rj)(function(){return null==o?void 0:o.mapped},[o],{preserve:!1}),s=(0,D.J2)(null==i?void 0:i.leaf),c=(0,lF.F)().isFreemiumStarterPlanUsersOwnRepl?aK.Starter:aK.Paid,u=(0,on.z7)();return a&&l?(0,f.Y)(on.cX,{value:u,children:a.map(function(e,n){var r=(0,v._)(e,2),i=r[0],o=r[1];return(0,f.Y)(lV,(0,eg._)({id:i,data:o,prevData:n>0?a[n-1][1]:void 0,isLastEvent:i===s,checkpointUsageIndicatorVariant:c,eventDataMap:l},t),i)})}):(0,f.Y)(j.S,{css:lz.loadingContainer,children:(0,f.Y)(tw.A,{})})}function lV(e){var n=e.id,t=e.data,r=e.prevData,i=e.eventDataMap,o=(0,tR._)(e,["id","data","prevData","eventDataMap"]),a=(0,A.A)(),l=a.secrets,s=a.fs,c=(0,D.J2)(t),u=(0,D.J2)(r);if((null==c?void 0:c.type)==="userMessage")return(0,f.Y)(op,{data:c,openPane:o.openPane,readFile:s.readFile});if((null==c?void 0:c.type)==="assistantMessage")return(0,f.Y)(lC,(0,eg._)({id:n,data:c,prevData:u,addSecretEntries:l.addEntries},o));if((null==c?void 0:c.type)==="assistantAction"){var d=i.get(c.eventIdWhichProposedAction);return(0,f.Y)(lT,(0,eg._)({id:n,data:c,proposedActionEventData:d},o))}return null}var lZ=t(7814),lj=t(95830),lq=t(81965),lK=t(46217),l$=t(52870),lJ=t(30124);function lQ(e){var n=e.hasAccessToAdvancedModel,t=(0,i_._P)({controlName:"flag-poliwag-override"}),r=(0,tl.g)("assistantAutoApplyChanges","assistantAutoRestartRepl","assistantAdvancedModelOverride"),i=r.preferences,o=r.update,a=(0,S.so)(),l=a.advancedModel,s=a.overrideModel,c=t?(0,f.FD)(f.FK,{children:[(0,f.Y)(l$.n,{setting:lK.KY.assistantAdvancedModelOverride,currentValue:i.assistantAdvancedModelOverride,update:o,title:(0,f.FD)(f.FK,{children:[(0,f.Y)(j.S,{row:!0,gap:8,align:"center",justify:"start",children:(0,f.Y)(V.EY,{multiline:!1,children:"Model Override"})}),(0,f.Y)(j.S,{row:!0,gap:8,children:(0,f.FD)(V.EY,{variant:"small",color:"dimmest",children:["Current: ",(null!=s?s:l).name.readable]})})]})}),(0,f.Y)(lJ.a,{})]}):null;return(0,f.FD)(f.FK,{children:[c,n?(0,f.Y)(l$.n,{setting:lK.KY.assistantAutoApplyChanges,update:o,currentValue:i.assistantAutoApplyChanges}):(0,f.Y)(l$.j,{setting:lK.KY.assistantAutoApplyChanges,currentValueOption:void 0,disabledReason:"Advanced Assistant can automatically apply code changes."}),(0,f.Y)(lJ.a,{}),n?(0,f.Y)(l$.n,{setting:lK.KY.assistantAutoRestartRepl,update:o,currentValue:i.assistantAutoRestartRepl}):(0,f.Y)(l$.j,{setting:lK.KY.assistantAutoRestartRepl,currentValueOption:void 0,disabledReason:"Advanced Assistant can automatically restart your App after applying changes."})]})}var lX=t(50175);function l0(){var e=(0,ev._)(["\n  query UserPrompts {\n    currentUser {\n      id\n      aiPrompts {\n        ... on UserAiPromptsResult {\n          prompts {\n            id\n            prompt\n            title\n          }\n        }\n      }\n    }\n  }\n"]);return l0=function(){return e},e}function l1(){var e=(0,ev._)(["\n  mutation UpdateUserAiPrompts($input: UpdateUserAiPromptsInput!) {\n    updateUserAiPrompts(input: $input) {\n      ... on AICustomPrompt {\n        id\n        prompt\n        title\n      }\n    }\n  }\n"]);return l1=function(){return e},e}function l2(){var e=(0,ev._)(["\n  mutation EditUserAiPrompt($input: EditUserAiPromptInput!) {\n    editUserAiPrompt(input: $input) {\n      ... on AICustomPrompt {\n        id\n        prompt\n        title\n      }\n    }\n  }\n"]);return l2=function(){return e},e}function l4(){var e=(0,ev._)(["\n  mutation DeleteUserAiPrompts($input: DeleteUserAiPromptsInput!) {\n    deleteUserAiPrompt(input: $input) {\n      ... on DeleteUserAiPromptResult {\n        id\n      }\n    }\n  }\n"]);return l4=function(){return e},e}function l5(){var e=(0,ev._)(["\n  query ReplSelectedPrompt($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        replAiPromptId\n      }\n    }\n  }\n"]);return l5=function(){return e},e}function l3(){var e=(0,ev._)(["\n  mutation UpdateReplAiPromptSelection(\n    $input: UpdateReplAiPromptSelectionInput!\n  ) {\n    updateReplAiPromptSelection(input: $input) {\n      ... on UpdateReplAiPromptSelectionResult {\n        repl {\n          id\n        }\n      }\n    }\n  }\n"]);return l3=function(){return e},e}function l7(){var e=(0,ev._)(["\n  mutation DeleteReplAiPromptSelection(\n    $input: DeleteReplAiPromptSelectionInput!\n  ) {\n    deleteReplAiPromptSelection(input: $input) {\n      ... on DeleteReplAiPromptSelectionResult {\n        repl {\n          id\n        }\n      }\n    }\n  }\n"]);return l7=function(){return e},e}var l6={},l8=(0,ey.J1)(l0()),l9=(0,ey.J1)(l1()),se=(0,ey.J1)(l2()),sn=(0,ey.J1)(l4()),st=(0,ey.J1)(l5()),sr=(0,ey.J1)(l3()),si=(0,ey.J1)(l7()),so=t(27165),sa=(0,eo.x)({input:[ea.wp.maxHeight("200px"),{resize:"vertical",overflow:"auto"}],buttonContainer:[ea.wp.width("100%"),ea.wp.rowWithGap(6),ea.wp.justify.end,ea.wp.pt(4)]});function sl(e){var n,t,r,i=e.refetchPrompts,o=e.onClose,a=(0,v._)((0,y.useState)(""),2),l=a[0],s=a[1],c=(0,v._)((0,y.useState)(""),2),u=c[0],d=c[1],p=(0,v._)((0,y.useState)(!1),2),h=p[0],m=p[1],g=(0,v._)((n={onCompleted:function(){(0,tP.u4)(tP.AZ.ASSISTANT_USED,{action:"custom_prompt_saved",title:u,prompt:l}),A(),i(),o(),m(!1)},onError:function(){m(!0)}},t=(0,eg._)({},l6,n),lX.n(l9,t)),2),S=g[0],Y=g[1].loading,_=(r=(0,w._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(e=l.trim(),n=u.trim(),!e||!n)return[2];return[4,S({variables:{input:{prompt:e,title:n}}})];case 1:return t.sent(),[2]}})}),function(){return r.apply(this,arguments)}),A=function(){s(""),d("")},C=Y||!l||!u;return(0,f.FD)(j.S,{py:4,gap:8,children:[h?(0,f.Y)(iX.N,{icon:(0,f.Y)(aH.A,{}),colorway:"red",text:"Could not save prompt. Try again."}):null,(0,f.Y)(so.l,{onSubmit:function(e){e.preventDefault(),_()},children:(0,f.FD)(j.S,{gap:4,children:[(0,f.FD)(j.S,{row:!0,gap:6,align:"center",children:[(0,f.Y)(V.EY,{children:"Title"}),(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:"(max 70 characters)"})]}),(0,f.Y)(B.pd,{disabled:Y,value:u,onChange:function(e){var n=e.target.value;n.length<=70&&d(n)}}),(0,f.Y)(V.EY,{children:"Prompt"}),(0,f.Y)(B.ov,{disabled:Y,value:l,onChange:function(e){var n=e.target.value;n.length<=15e3&&s(n)},css:sa.input,autoSize:!0}),(0,f.FD)(j.S,{css:sa.buttonContainer,children:[(0,f.Y)(M.$n,{colorway:"primary",text:"Save",type:"submit",disabled:C,loading:Y}),(0,f.Y)(M.$n,{text:"Cancel",onClick:function(){o(),m(!1)}})]})]})})]})}var ss=t(45351),sc=(0,eo.x)({input:[ea.wp.maxHeight("200px"),{resize:"vertical",overflow:"auto"}],buttonContainer:[ea.wp.width("100%"),ea.wp.rowWithGap(6),ea.wp.justify.end],form:[ea.wp.colWithGap(6)],promptItem:[ea.wp.borderRadius(),ea.wp.py(6),ea.wp.px(8)]});function su(e){var n,t,r,i,o,a,l=e.isOpen,s=e.prompts,c=e.promptDataLoading,u=e.onClose,d=e.refetchPrompts,p=(0,v._)((0,y.useState)(!1),2),h=p[0],m=p[1],S=(0,v._)((0,y.useState)(s||[]),2),Y=S[0],_=S[1],A=(0,v._)((0,y.useState)(new Set),2),C=A[0],k=A[1],x=(0,v._)((n={onCompleted:function(){d()}},t=(0,eg._)({},l6,n),lX.n(sn,t)),2),D=x[0],E=x[1].loading,R=(0,v._)((r={onCompleted:function(){d()}},i=(0,eg._)({},l6,r),lX.n(se,i)),2),I=R[0],T=R[1].loading;(0,y.useEffect)(function(){s&&_(function(e){return s.map(function(n){return C.has(n.id)&&e.find(function(e){return e.id===n.id})||n})})},[s,C]);var F=function(e,n,t){_(function(r){return r.map(function(r){return r.id===e?(0,nh._)((0,eg._)({},r),(0,g._)({},n,t)):r})}),k(function(n){return new Set(n).add(e)})},P=(o=(0,w._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!(null==(n=Y.find(function(n){return n.id===e}))?void 0:n.title)||!(null==n?void 0:n.prompt))return[2];return[4,I({variables:{input:{promptId:n.id,prompt:n.prompt,title:n.title}}})];case 1:return t.sent(),k(function(n){var t=new Set(n);return t.delete(e),t}),[2]}})}),function(e){return o.apply(this,arguments)}),L=function(e){_(function(n){return n.map(function(n){return n.id===e&&s&&s.find(function(n){return n.id===e})||n})}),k(function(n){var t=new Set(n);return t.delete(e),t})},U=(a=(0,w._)(function(e){return(0,b.YH)(this,function(n){return D({variables:{input:{promptId:e}}}),[2]})}),function(e){return a.apply(this,arguments)});return(0,f.FD)(ld.a,{isOpen:l,onRequestClose:function(){u(),m(!1)},children:[(0,f.Y)(V.EY,{variant:"subheadBig",children:"Manage Prompts"}),s?(0,f.FD)(j.S,{py:8,gap:4,children:[(0,em._)(Y).sort(function(e,n){return e.title.localeCompare(n.title,void 0,{sensitivity:"base"})}).map(function(e){return(0,f.Y)(O.A,{headerContent:(0,f.Y)(V.EY,{children:e.title}),children:(0,f.Y)(ek.ui,{elevated:!0,css:sc.promptItem,children:(0,f.FD)(ss.lV,{css:sc.form,onSubmit:function(n){n.preventDefault(),P(e.id)},children:[(0,f.FD)(j.S,{row:!0,gap:6,align:"center",children:[(0,f.Y)(V.EY,{children:"Title"}),(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:"(max 70 characters)"})]}),(0,f.Y)(B.pd,{disabled:T,value:e.title,onChange:function(n){return F(e.id,"title",n.target.value)}}),(0,f.Y)(V.EY,{children:"Prompt"}),(0,f.Y)(B.ov,{disabled:T,value:e.prompt,onChange:function(n){return F(e.id,"prompt",n.target.value)},css:sc.input,autoSize:!0}),(0,f.FD)(j.S,{css:sc.buttonContainer,children:[(0,f.Y)(M.$n,{colorway:"red",text:"Delete",onClick:function(){return U(e.id)},disabled:E}),(0,f.Y)(M.$n,{colorway:"primary",text:"Save",type:"submit",disabled:!C.has(e.id)||T||!e.title||!e.prompt}),(0,f.Y)(M.$n,{text:"Reset",onClick:function(){return L(e.id)},disabled:!C.has(e.id)})]})]})})},e.id)}),c?(0,f.FD)(j.S,{py:4,row:!0,gap:6,align:"center",children:[(0,f.Y)(tw.A,{size:16}),(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:"Updating prompts…"})]}):null]}):null,(0,f.Y)(j.S,{py:4,gap:8,children:h?(0,f.Y)(sl,{refetchPrompts:d,onClose:function(){return m(!1)}}):(0,f.Y)(M.$n,{text:"Add new prompt",iconLeft:(0,f.Y)(tq.A,{}),colorway:"primary",onClick:function(){return m(!0)}})})]})}var sd="default",sp={id:sd,prompt:"".concat(iY.BP," will operate using its default behavior."),title:"Default"},sf=(0,eo.x)({select:[ea.wp.flex.growAndShrink(1),{"& button":{height:"auto",minHeight:"32px"},"& button > span > div > span":{textAlign:"justify"}}],selectContainer:[ea.wp.width("100%"),ea.wp.align.center],loadingContainer:[ea.wp.borderRadius(),ea.wp.mr(24),ea.wp.gap(6)],loadingPrompt:[ea.wp.width("fit-content"),ea.wp.px(4),n$.S.foregroundPulse(),{color:"transparent"}]});function sh(){var e,n,t,r,i,o,a,l,s,c,u,d,p=(0,v._)((0,y.useState)(!1),2),h=p[0],m=p[1],g=(0,P.A)(),S=(e={notifyOnNetworkStatusChange:!0},n=(0,eg._)({},l6,e),ew.I(l8,n)),Y=S.data,_=S.loading,A=S.refetch,C=(t={variables:{replId:g}},r=(0,eg._)({},l6,t),ew.I(st,r)),k=C.data,x=C.refetch,D=(0,v._)((i={onCompleted:function(){x()}},o=(0,eg._)({},l6,i),lX.n(sr,o)),1)[0],E=(0,v._)((a={update:function(e,n){var t,r=n.data;(null==r||null==(t=r.deleteReplAiPromptSelection)?void 0:t.__typename)==="DeleteReplAiPromptSelectionResult"&&r.deleteReplAiPromptSelection.repl.id&&e.modify({id:e.identify({__typename:"Repl",id:g}),fields:{replAiPromptId:function(){}}})}},l=(0,eg._)({},l6,a),lX.n(si,l)),1)[0],R=Y&&(null==(c=Y.currentUser)?void 0:c.aiPrompts.__typename)==="UserAiPromptsResult"?null==(u=Y.currentUser)?void 0:u.aiPrompts.prompts:[],I=(null==k?void 0:k.getRepl.__typename)==="Repl"?k.getRepl.replAiPromptId:void 0,T=(s=(0,w._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(e!==sd)return[3,3];if(!I)return[3,2];return[4,E({variables:{input:{replId:g,promptId:I}}})];case 1:i.sent(),i.label=2;case 2:return[2];case 3:return[4,D({variables:{input:{promptId:e,replId:g}}})];case 4:return(null==(t=i.sent().data)||null==(n=t.updateReplAiPromptSelection)?void 0:n.__typename)==="UpdateReplAiPromptSelectionResult"&&(r=R.find(function(n){return n.id===e}),(0,tP.u4)(tD.AZ.ASSISTANT_USED,{action:"custom_prompt_selected",title:null==r?void 0:r.title,prompt:null==r?void 0:r.prompt})),[2]}})}),function(e){return s.apply(this,arguments)});return(0,f.FD)(j.S,{gap:4,children:[(0,f.FD)(V.EY,{multiline:!1,children:[iY.BP," Prompt"]}),(0,f.FD)(V.EY,{variant:"small",color:"dimmest",children:["Personalize your ",iY.BP," with custom rules & instructions"]}),_?(0,f.FD)(ek.ui,{css:sf.loadingContainer,px:8,py:8,elevated:!0,children:[(0,f.Y)(V.EY,{css:sf.loadingPrompt,children:"Sample prompt title"}),(0,f.Y)(V.EY,{variant:"small",css:sf.loadingPrompt,children:"Sample prompt contents. These are rules & instructions for Assistant behavior."})]}):(0,f.FD)(j.S,{css:sf.selectContainer,row:!0,gap:4,children:[(0,f.Y)(G.l,{"aria-label":"Assistant Custom Prompt",style:{marginRight:0},items:[sp].concat((0,em._)(R)),defaultSelectedKey:(null==(d=R.find(function(e){return I===e.id}))?void 0:d.id)||sd,onSelectionChange:function(e){var n;T((null==(n=R.find(function(n){return n.id===e}))?void 0:n.id)||sd)},css:sf.select,children:function(e){return(0,f.Y)(z.nh,{id:e.id,label:e.title,description:e.prompt,dataCy:e.id},e.id)}}),(0,f.Y)(eN.K0,{alt:"Manage prompts",onClick:function(){return m(!0)},children:(0,f.Y)(oQ.A,{})})]}),(0,f.Y)(su,{isOpen:h,prompts:R,promptDataLoading:_,onClose:function(){m(!1)},refetchPrompts:A})]})}var sm=t(90329),sg=t(82568),sv=t(83603),sy=t(46449);function sw(e){var n=e.text,t=(0,tR._)(e,["text"]),r=(0,y.useRef)(null),i=(0,y.useRef)(n);return(0,y.useEffect)(function(){if(i.current!==n){var e=n.length;!function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){var o=r.current;o&&(o.textContent=n.slice(0,i),i!==e&&t(i+1))})}()}},[n]),(0,y.useEffect)(function(){i.current=n},[n]),(0,f.Y)(V.EY,(0,nh._)((0,eg._)({},t),{ref:r,children:n}))}var sb=t(32331),sS=(0,iE.v)(["fontSize","padding","border"]),sY=sS.cssVars,s_=sS.styleTokens,sA=(0,eo.x)({root:[ea.wp.center,ea.wp.flex.growAndShrink(1)],input:[{backgroundColor:"transparent",border:s_.border,fontSize:s_.fontSize,padding:s_.padding},ea.wp.flex.growAndShrink(1)]});function sC(e){var n,t,r=(0,v._)((0,y.useState)(e.initialValue),2),i=r[0],o=r[1],a=(0,nt.A)(e.onCancel),l=(0,sb.A)(function(){return a.current()},[]),s=(0,y.useRef)(null);(0,y.useEffect)(function(){var e;null==(e=s.current)||e.select()},[]);var c=e.compact?(n={},(0,g._)(n,sY.border,"0 none"),(0,g._)(n,sY.fontSize,N.LU.fontSizeSmall),(0,g._)(n,sY.padding,"0 ".concat(N.LU.space2)),n):(t={},(0,g._)(t,sY.padding,"".concat(N.LU.space8)),(0,g._)(t,sY.fontSize,N.LU.fontSizeDefault),t);return(0,f.Y)(j.S,{style:c,innerRef:l,css:sA.root,row:!0,gap:4,tag:"form",onSubmit:function(n){n.preventDefault(),i&&e.onSubmit(i)},children:(0,f.Y)(B.pd,{placeholder:"Name this chat",ref:s,css:sA.input,value:i,onChange:function(e){return o(e.currentTarget.value)},onKeyDown:function(n){"Escape"===n.key&&e.onCancel()}})})}var sk=t(62862),sx=t(36075),sD=t(37565),sE=t(15864);function sR(e){var n,t=(0,v._)((0,y.useState)(!1),2),r=t[0],i=t[1];return r?(0,f.Y)(sC,{compact:!0,initialValue:null!=(n=e.title)?n:"",onCancel:function(){return i(!1)},onSubmit:function(n){i(!1),e.onRename(n)}}):(0,f.Y)(sT,{title:e.title,archived:e.archived,onRename:function(){return i(!0)},onToggleArchived:e.onToggleArchived})}var sI=(0,eo.x)({root:[{maxWidth:"100%"}],button:[ea.wp.reset.button,ea.wp.rowWithGap(4),ea.wp.align.center,ea.wp.flex.growAndShrink(1),ob.b.nofill,{fontWeight:N.LU.fontWeightMedium,svg:[ea.wp.color.foregroundDimmest],"&:hover svg":[ea.wp.color.foregroundDimmer]}],popover:[ea.wp.borderRadius(4),ea.wp.shadow(1),ea.wp.border()],item:[ob.b.listItem,ea.wp.minWidth(140),ea.wp.px(4),ea.wp.py(2)]});function sT(e){var n=["Rename",e.archived?"Unarchive":"Archive"],t=(0,sg.WM)({items:n,onSelectedItemChange:function(n){switch(n.selectedItem){case"Rename":e.onRename();break;case"Archive":case"Unarchive":e.onToggleArchived()}}}),r=(0,v._)((0,y.useState)(null),2),i=r[0],o=r[1],a=(0,v._)((0,y.useState)(null),2),l=a[0],s=a[1],c=(0,sm.E)(i,l,{modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom"});return(0,f.Y)(f.FK,{children:(0,f.FD)(j.S,{css:sI.root,grow:!0,shrink:!0,children:[(0,f.FD)(j.S,(0,nh._)((0,eg._)({tag:"button",css:sI.button,px:4},t.getToggleButtonProps({refKey:"innerRef",ref:o})),{children:[(0,f.Y)(sw,{variant:"small",color:e.title?"default":"dimmest",multiline:!1,text:e.title||"New chat"}),(0,f.Y)(sD.A,{rotate:180*!!t.isOpen,size:12})]})),(0,f.Y)(j.S,(0,nh._)((0,eg._)({},t.getMenuProps({refKey:"innerRef"})),{children:t.isOpen?(0,f.Y)(sx.Z,{children:(0,f.Y)(ek.ui,(0,nh._)((0,eg._)({elevated:!0,style:c.styles.popper,innerRef:s,css:sI.popover},c.attributes.popper),{children:n.map(function(e,n){var r=t.highlightedIndex===n?{backgroundColor:N.LU.interactiveBackground}:void 0;return(0,f.Y)(j.S,(0,nh._)((0,eg._)({css:sI.item,style:r},t.getItemProps({refKey:"innerRef",item:e,index:n})),{children:(0,f.Y)(V.EY,{variant:"small",children:e})}),e)})}))}):null}))]})})}function sF(e){return(0,f.Y)(eN.K0,{alt:"Settings",onClick:e.onClick,children:(0,f.Y)(oQ.A,{})})}function sP(e){var n=e.sessionCostInCents,t=(0,sv.ET)(),r=t.orgId,i=t.orgSlug,o=r&&i?"".concat((0,sy.EG)({slug:i}).usage.href,"#agent"):"/usage#agent";return(0,f.Y)(sk.A,{alt:n?"Your usage for this chat: $".concat((n/100).toFixed(2)):"Usage Page",href:o,target:"_blank",onClick:function(){(0,tP.u4)(tP.AZ.ASSISTANT_USED,{action:"opened_usage_link",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"})},children:(0,f.Y)(aq.A,{})})}var sL=(0,eo.x)({root:[ea.wp.height(28),ea.wp.rowWithGap(4),ea.wp.px(2),ea.wp.justify.spaceBetween,ea.wp.align.center],center:[],right:[ea.wp.rowWithGap(0)]});function sU(e){var n=e.onSidebarButtonClick,t=e.onAddButtonClick,r=e.title,i=e.prefsButton,o=e.usageButton,a=e.sessionCost;return(0,f.FD)(j.S,{align:"center",row:!0,gap:0,children:[(0,f.Y)(j.S,{children:(0,f.Y)(eN.K0,{alt:"All chats",onClick:n,children:(0,f.Y)(sE.A,{})})}),(0,f.Y)(M.$n,{iconLeft:(0,f.Y)(tq.A,{}),text:"New chat",size:"small",variant:"nofill",onClick:t}),(0,f.Y)(j.S,{grow:!0,shrink:!0,align:"center",children:r}),(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[a,o,i]})]})}var sN=t(50746),sO=(0,eo.x)({container:[ea.wp.flex.column,ea.wp.position.relative],body:[ea.wp.overflowY("auto")],footer:[ea.wp.minHeight(40),ea.wp.flex.row,ea.wp.align.center],settingsPaneButton:[ea.wp.display.inlineFlex,ea.wp.mx(4),{verticalAlign:"bottom",gap:N.LU.space4}],heading:[ea.wp.fontWeight.medium],upgradePill:[ob.b.filled,(o={},(0,g._)(o,N.qo.interactiveBackground,N.LU.yellowDimmest),(0,g._)(o,N.qo.interactiveBackgroundActive,N.LU.yellowDimmer),o)]});function sM(e){var n=e.hasAccessToAdvancedModel,t=e.onOpenUserSettings,r=(0,v._)((0,y.useState)(!1),2),i=r[0],o=r[1];return(0,f.FD)(ek.ui,{css:sO.container,grow:!0,shrink:!0,background:"default",children:[(0,f.FD)(j.S,{css:sO.body,grow:!0,shrink:!0,py:8,px:16,gap:8,children:[(0,f.Y)(lJ.a,{}),(0,f.Y)(sh,{}),(0,f.Y)(lJ.a,{}),(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(V.EY,{css:sO.heading,variant:"text",children:"Advanced ".concat(iY.BP," Preferences")}),n?null:(0,f.Y)(iB.a,{css:sO.upgradePill,text:iM.en,onClick:function(){return o(!0)}})]}),(0,f.Y)(lQ,{hasAccessToAdvancedModel:n}),(0,f.Y)(lJ.a,{})]}),(0,f.Y)(lJ.a,{}),(0,f.Y)(j.S,{css:sO.footer,py:8,px:16,children:(0,f.FD)(V.EY,{variant:"small",children:["Looking for more workspace settings?"," ",(0,f.Y)(M.$n,{css:sO.settingsPaneButton,iconLeft:(0,f.Y)(oQ.A,{}),size:"small",variant:"underlined",text:"Open User Settings",onClick:t})]})}),(0,f.Y)(iU.default,{isOpen:i,onClose:function(){return o(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"ai_chat_upsell",surface:"assistant_settings"}},highlightUpsell:"assistant"})]})}function sH(e){var n=e.onBack;return(0,f.Y)(j.S,{css:sL.root,children:(0,f.FD)(j.S,{row:!0,align:"center",children:[(0,f.Y)(eN.K0,{onClick:n,alt:"Back to session",children:(0,f.Y)(sN.A,{})}),(0,f.Y)(V.EY,{children:"Settings"})]})})}var sB=t(64612),sz=t(17078),sW=t(96612),sG=t(4515),sV=t(7368),sZ=t(93582),sj=function(){var e=(0,v._)((0,y.useState)(!1),2),n=e[0],t=e[1],r=(0,v._)((0,y.useState)({x:0,y:0}),2);return{clicked:n,setClicked:t,points:r[0],setPoints:r[1]}},sq=function(){var e=sj(),n=e.clicked,t=e.setClicked,r=e.points,i=e.setPoints;(0,y.useEffect)(function(){var e=function(){return t(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[t]);var o=(0,y.useCallback)(function(e){var n=e.x,r=e.y;t(!0),i({x:n,y:r})},[t,i]),a=(0,y.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),o({x:e.clientX,y:e.clientY})},[o]),l=(0,y.useCallback)(function(){t(!1)},[t]);return{triggerProps:{onContextMenu:a},menuProps:(0,nh._)((0,eg._)({},r),{isOpen:n}),onClose:l,open:o}},sK=(0,eo.x)({menu:[ea.wp.position.fixed,ea.wp.flex.column,ea.wp.borderRadius(8),ea.wp.shadow(1),{"& > :first-child":[ea.wp.borderRadius(8,8,0,0)],"& > :last-child":[ea.wp.borderRadius(0,0,8,8)]}],item:[ea.wp.reset.button,{'&:not([disabled]):not([aria-disabled="true"])':[ob.b.listItem],'&[disabled], &[aria-disabled="true"]':[ea.wp.color.foregroundDimmest]},ea.wp.p(8),ea.wp.rowWithGap(8),ea.wp.align.center],underlay:[ea.wp.position.fixed,{top:0,left:0,bottom:0,right:0}]}),s$=function(e){e.preventDefault()},sJ=function(e){var n=e.children,t=e.isOpen,r=e.defaultOpen,i=e.onOpenChange,o=e.x,a=e.y,l=(0,tR._)(e,["children","isOpen","defaultOpen","onOpenChange","x","y"]),s=(0,sz.T)({isOpen:t,defaultOpen:r,onOpenChange:i}),c=(0,y.useRef)(null),u=(0,sW.l)({},s,c),d=u.modalProps,p=u.underlayProps;return t?(0,f.Y)(sG.hJ,{portalContainer:document.body,children:(0,f.Y)("div",(0,nh._)((0,eg._)({css:sK.underlay},p),{onContextMenu:s$,children:(0,f.Y)(sV.Ay,{children:(0,f.Y)(ek.ui,(0,nh._)((0,eg._)({elevated:!0,css:sK.menu},d,l),{innerRef:c,tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",style:{left:o,top:a},children:(0,f.Y)(sZ.Se,{options:{direction:"vertical"},children:n})}))})}))}):null},sQ=j.D.button,sX=(0,y.forwardRef)(function(e,n){var t=e.children,r=e.iconLeft,i=e.isDisabled,o=void 0!==i&&i,a=e.onClick,l=(0,tR._)(e,["children","iconLeft","isDisabled","onClick"]),s=(0,y.useRef)(null),c=(0,v._)((0,sZ.A9)(s,o),4),u=c[0],d=c[1],p=c[2],h=c[3];(0,sZ.xK)(d,s);var m=(0,y.useCallback)(function(e){o||(h(),null==a||a(e))},[h,o,a]),g=(0,lZ.S)([n,s]);return(0,f.FD)(sQ,(0,nh._)((0,eg._)({disabled:o,css:sK.item,role:"menuitem",ref:g,tabIndex:u,onKeyDown:p,onClick:m},l),{children:[r,(0,f.Y)(V.EY,{multiline:!1,children:t})]}))}),s0=t(63837),s1=(0,iE.v)(["sessionBackground","actionsButtonDisplay"]),s2=s1.cssVars,s4=s1.styleTokens,s5=(0,eo.x)({loading:[ea.wp.coverContainer,ea.wp.center],tabs:[ea.wp.height("100%")],tabsInner:[ea.wp.height("100%")],tabPanel:[ea.wp.height("100%")],tabContent:[ea.wp.position.relative,ea.wp.height("100%"),ea.wp.flex.growAndShrink(1)],tabListLeft:[ea.wp.viewStyle,ea.wp.rowWithGap(2)],tab:[ea.wp.viewStyle,ob.b.nofill,ea.wp.px(8),ea.wp.height(30),ea.wp.justify.center,ea.wp.borderRadius(4),{"&[data-selected]":{backgroundColor:N.LU.interactiveBackgroundActive}}],sessions:[ea.wp.position.absolute,ea.wp.overflow("hidden"),ea.wp.px(8),{top:0,left:0,right:0,bottom:0}],session:[ea.wp.px(6),ea.wp.py(4),ea.wp.border({direction:"bottom"}),ob.b.listItem,ea.wp.borderRadius(),(a={backgroundColor:s4.sessionBackground},(0,g._)(a,ea.$_.canHover,(0,g._)({},s2.actionsButtonDisplay,"none")),(0,g._)(a,"&:hover",(0,g._)({},s2.actionsButtonDisplay,"block")),a)],emptyState:[ea.wp.center,ea.wp.p(16)],header:[ea.wp.rowWithGap(4),ea.wp.height(24),ea.wp.align.center],title:[ea.wp.flex.growAndShrink(1)],actionsButton:[{opacity:.5,display:s4.actionsButtonDisplay,"&:hover":{opacity:1}}],sessionListWrapper:[{overflow:"auto"},ea.wp.flex.growAndShrink(1)],sessionListInner:[ea.wp.position.relative],sessionListItem:[ea.wp.position.absolute,ea.wp.top(0),ea.wp.left(0),ea.wp.width("100%")]});function s3(e){var n=e.onClick;return(0,f.FD)(j.S,{style:(0,g._)({},s2.sessionBackground,N.LU.accentPrimaryDimmest),css:s5.session,onClick:n,children:[(0,f.Y)(j.S,{css:s5.header,children:(0,f.Y)(j.S,{css:s5.title,children:(0,f.Y)(V.EY,{multiline:!1,children:"New Chat"})})}),(0,f.Y)(V.EY,{multiline:!1,color:"dimmest",variant:"small",children:"just now"})]})}function s7(e){var n,t=e.selected,r=e.onClick,i=e.session,o=(0,v._)((0,y.useState)(!1),2),a=o[0],l=o[1],s=sq(),c=s.menuProps,u=s.triggerProps,d=s.open,p=(0,D.J2)(i.data);return p?a?(0,f.FD)(j.S,{children:[(0,f.Y)(sC,{initialValue:null!=(n=p.title)?n:"",onCancel:function(){return l(!1)},onSubmit:function(e){i.updateSession({title:e}),l(!1)}}),(0,f.Y)(j.S,{px:4,children:(0,f.Y)(eT.Dc,{textColor:"dimmest",textVariant:"small",date:i.created})})]}):(0,f.FD)(f.FK,{children:[(0,f.FD)(j.S,(0,nh._)((0,eg._)({style:t?(0,g._)({},s2.sessionBackground,N.LU.backgroundHigher):void 0,css:s5.session,onClick:r},u),{children:[(0,f.FD)(j.S,{css:s5.header,children:[(0,f.Y)(j.S,{css:s5.title,children:(0,f.Y)(sw,{multiline:!1,text:p.title.length>0?p.title:"Untitled"})}),(0,f.Y)(eN.K0,{css:s5.actionsButton,alt:"Actions",tooltipBehavior:"hidden",onClick:function(e){var n=e.target.getBoundingClientRect();d({x:n.x,y:n.y})},children:(0,f.Y)(s0.A,{})})]}),(0,f.Y)(eT.Dc,{textColor:"dimmest",textVariant:"small",date:i.created})]})),(0,f.FD)(sJ,(0,nh._)((0,eg._)({},c),{children:[(0,f.Y)(sX,{onClick:function(){return l(!0)},children:"Rename"}),(0,f.Y)(sX,{onClick:function(){i.updateSession({archived:!p.archived})},children:(null==p?void 0:p.archived)?"Unarchive":"Archive"})]}))]}):null}function s6(){return(0,f.Y)(j.S,{css:s5.emptyState,children:(0,f.Y)(V.EY,{color:"dimmest",children:"No chats"})})}function s8(e){var n=e.sessions,t=e.currentSessionId,r=e.onSessionClick,i=(0,y.useRef)(null),o=(0,eP.Te)({overscan:10,count:n.length,getItemKey:function(e){return n[e].id},getScrollElement:function(){return i.current},estimateSize:function(){return 52}});return(0,f.Y)(j.S,{innerRef:i,css:s5.sessionListWrapper,children:(0,f.Y)(j.S,{style:{height:o.getTotalSize()},css:s5.sessionListInner,children:o.getVirtualItems().map(function(e){var i=n[e.index];return(0,f.Y)("div",{ref:o.measureElement,"data-index":e.index,css:s5.sessionListItem,style:{height:e.size,transform:"translateY(".concat(e.start,"px)")},children:(0,f.Y)(s7,{session:i,selected:i.id===t,onClick:function(){return r(i.id)}})},e.key.toString())})})})}function s9(e){var n=(0,S.NC)(),t=(0,D.J2)(n.sessions.chat.archived),r=(0,y.useMemo)(function(){return t?Array.from(t.values()).sort(function(e,n){return n.created.getTime()-e.created.getTime()}):[]},[t]);return t?0===r.length?(0,f.Y)(s6,{}):(0,f.Y)(s8,{sessions:r,currentSessionId:e.currentSessionId,onSessionClick:e.onSessionClick}):(0,f.Y)(j.S,{css:s5.loading,children:(0,f.Y)(tw.A,{})})}function ce(e){var n=(0,S.NC)(),t=(0,D.J2)(n.sessions.chat.open.list);return t?0===t.length?(0,f.Y)(s3,{onClick:function(){return e.onNewSessionClick()}}):(0,f.Y)(s8,{sessions:t,currentSessionId:e.currentSessionId,onSessionClick:e.onSessionClick}):(0,f.Y)(j.S,{css:s5.loading,children:(0,f.Y)(tw.A,{})})}var cn=["Chats","Archived"];function ct(e){var n=(0,v._)((0,y.useState)("Chats"),2),t=n[0],r=n[1];return(0,f.Y)(sB.tU,{selectedKey:t,onSelectionChange:r,css:s5.tabs,children:(0,f.FD)(j.S,{css:s5.tabsInner,children:[(0,f.Y)(j.S,{gap:4,p:8,children:(0,f.Y)(sB.wb,{"aria-label":"Chats",css:s5.tabListLeft,children:cn.map(function(e){return(0,f.Y)(sB.oz,{id:e,css:s5.tab,children:(0,f.Y)(V.EY,{color:"dimmer",children:e})},e)})})}),(0,f.Y)(j.S,{css:s5.tabContent,children:cn.map(function(n){return(0,f.Y)(sB.Kp,{id:n,css:s5.tabPanel,children:(0,f.Y)(j.S,{css:s5.sessions,children:"Chats"===n?(0,f.Y)(ce,(0,eg._)({},e)):(0,f.Y)(s9,(0,eg._)({},e))})},n)})})]})})}var cr=(0,eo.x)({sessionsListContainer:[ea.wp.overflowY("auto")],footer:[ea.wp.border({direction:"top",color:N.LU.outlineDimmest})]});function ci(e){var n=e.currentSessionId,t=e.onSessionClick,r=e.onNewSessionClick,i=e.onSettingsButtonClick;return(0,f.FD)(f.FK,{children:[(0,f.Y)(j.S,{css:cr.sessionsListContainer,grow:!0,shrink:!0,children:(0,f.Y)(ct,{currentSessionId:n,onSessionClick:t,onNewSessionClick:r})}),(0,f.Y)(j.S,{css:cr.footer,children:(0,f.Y)(M.$n,{text:"Settings",iconLeft:(0,f.Y)(oQ.A,{}),alignment:"start",onClick:i,size:"small",variant:"nofill"})})]})}var co=t(1310),ca=t(18791),cl=t(28367),cs=t(7749),cc=t(97153),cu="assistant_freemium_quota";function cd(){var e=(0,v._)((0,y.useState)(!1),2),n=e[0],t=e[1],r=(0,ca.V)().assistantEdits,i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1];return(0,cl.Nk)({usage:null==r?void 0:r.usage,limit:null==r?void 0:r.limit,percentThreshold:cl.h3,onHitThreshold:function(){t(!0),a(!0)}}),(0,cl.Nk)({usage:null==r?void 0:r.usage,limit:null==r?void 0:r.limit,percentThreshold:100,onHitThreshold:function(){(0,tP.u4)(tP.AZ.ASSISTANT_USED,{action:"hit_freemium_quota"})}}),(0,f.FD)(aL.Wv,{isOpen:n,onOpenChange:function(e){t(e),e||a(!1)},label:"Usage",placement:"bottom start",children:[(0,f.Y)(eN.K0,{alt:"Usage",disabled:!r,children:(0,f.Y)(j.S,{css:cp.iconBadgeWrapper,children:(0,f.Y)(aq.A,{})})}),(0,f.Y)(j.S,{css:cp.popoverWrapper,p:8,children:(0,f.FD)(j.S,{gap:12,children:[(0,f.FD)(V.EY,{css:cp.header,children:["Free ",iY.BP," usage"]}),(0,f.Y)(cf,{limit:null==r?void 0:r.limit,usage:null==r?void 0:r.usage,isShowingAlertExplanation:o})]})})]})}var cp=(0,eo.x)({popoverWrapper:[ea.wp.width(280)],header:[ea.wp.fontWeight.bold],measureBar:[ea.wp.height(8)],usageMeterAndTitle:[ea.wp.display.flex,ea.wp.flex.row,ea.wp.justify.spaceBetween,ea.wp.align.center],iconBadgeWrapper:[ea.wp.position.relative]});function cf(e){var n=e.limit,t=e.usage,r=e.isShowingAlertExplanation,i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1],l=(0,ij.A)();if(!n||void 0===t)return(0,f.Y)(tw.A,{});var s=t>=n,c=Math.floor(t/n*100),u="You've used ".concat(c,"% of your ").concat(iM.Lm," plan ").concat(iY.BP," ").concat((0,co.pluralize)(aw.go),". ").concat(iY.BP," creates edits when asked to make a change to the code.");return(0,f.FD)(f.FK,{children:[(0,f.Y)(j.S,{gap:4,children:(0,f.Y)(ch,{title:"".concat(iY.BP," ").concat((0,co.pluralize)(aw.go)),current:t,max:n})}),s?(0,f.Y)(cg,{}):null,r?(0,f.Y)(iX.N,{text:u,colorway:"primary"}):null,(0,f.Y)(iH.A,{text:"Upgrade for more",colorway:"brand",variant:"outlined",context:cu,iconLeft:(0,f.Y)(cc.A,{}),highlightUpsell:"assistant"}),(0,f.Y)(iU.default,{isOpen:o,onClose:function(){return a(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:cu}},onPurchaseComplete:function(){l()}})]})}function ch(e){var n=e.title,t=e.current,r=e.max;return(0,f.FD)(j.S,{gap:6,children:[(0,f.FD)(j.S,{css:cp.usageMeterAndTitle,children:[(0,f.Y)(V.EY,{height:"singleLine",children:n}),(0,f.FD)(V.EY,{height:"singleLine",color:"dimmer",children:[t," / ",r]})]}),(0,f.Y)("div",{children:(0,f.Y)(cs.W,{css:cp.measureBar,total:r,current:t,color:N.LU.blueDefault,tooltipHidden:!0})})]})}var cm=(0,eo.x)({root:[ea.wp.border({color:N.LU.orangeDimmer}),ea.wp.borderRadius(),ea.wp.py(4),ea.wp.px(6),ea.wp.colorMixBg(N.LU.orangeDimmer,"transparent",.25)],text:[ea.wp.color.orangeStronger]});function cg(){return(0,f.Y)(j.S,{css:cm.root,children:(0,f.FD)(V.EY,{css:cm.text,children:["You've used 100% of your free ",iY.BP," quota."]})})}var cv=t(59474),cy=(0,eo.x)({header:[ea.wp.height(28),{zIndex:1}],main:[ea.wp.position.relative,ea.wp.flex.growAndShrink(1),ea.wp.justify.end],content:[{paddingLeft:iT.paddingLeft,justifyContent:"end"}],sidebarBlanket:[ea.wp.coverContainer,{zIndex:3,backgroundColor:N.LU.backgroundOverlay,pointerEvents:iT.sidebarBlanketPointerEvents,opacity:iT.sidebarBlanketOpacity}],sidebar:[ea.wp.position.absolute,ea.wp.top(0),ea.wp.left(0),ea.wp.borderRadius(),{pointerEvents:iT.sidebarPointerEvents,width:iT.sidebarWidth,height:iT.sidebarHeight,opacity:iT.sidebarOpacity,transform:iT.sidebarTransform,border:"1px solid "+N.LU.outlineDimmest,zIndex:3}]});function cw(e){var n=e.sessionId,t=e.children,r=e.isSettingsPanelOpen,i=e.setIsSettingsPanelOpen,o=e.setSessionId,a=e.openUserSettingsPane,l=e.onNewSessionClick,s=e.sidebarState,c=(0,S.NC)(),u=(0,D.Rj)(function(){return n?c.sessions.get(n):null},[c,n]),d=(0,D.Rj)(function(){return null==u?void 0:u.data},[u]),p=(0,D.J2)(c.sessions.chat.open),h=(0,D.J2)(c.sessions.chat.archived),m=(0,S.UK)().hasAccessToAdvancedModel,g=(0,lF.F)().isFreemiumStarterPlanUsersOwnRepl,v=s.state,w=s.setSidebarContainerEl,b=s.toggleSidebar,Y=s.closeIfNeeded;function _(){i(!0),Y()}var A=(0,y.useCallback)(function(){(0,tP.u4)(tP.AZ.ASSISTANT_USED,{action:"new_session",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),Y(),l()},[Y,l]),C=(0,y.useCallback)(function(){if(u&&d){var e=d.archived;if((0,tP.u4)(tP.AZ.ASSISTANT_USED,{action:e?"chat_unarchived":"chat_archived",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),u.id===n){var t=e?h:p;if(t&&t.size>1){var r=Array.from(t.keys()).find(function(e){return e!==u.id});o(null!=r?r:null)}else A()}u.updateSession({archived:!e})}},[h,A,p,u,d,n,o]),k=(0,y.useCallback)(function(e){(0,tP.u4)(tP.AZ.ASSISTANT_USED,{action:"chat_renamed",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),null==u||u.updateSession({title:e})},[u]),x=(0,iN.s)().addAttachments,E=(0,lq.A)({addAttachments:x}),R=E.isDraggedOver,I=E.drop,T=(0,y.useRef)(null);(0,lP.d)(T,v,iF);var F=d?(0,f.Y)(sR,{title:d.title,archived:d.archived,onRename:k,onToggleArchived:C},d.id):null,P=(0,cv.L)(n),L=(0,f.Y)(sU,{onAddButtonClick:A,onSidebarButtonClick:function(){return b()},title:F,prefsButton:(0,f.Y)(sF,{onClick:_}),usageButton:g?(0,f.Y)(cd,{}):(0,f.Y)(sP,{sessionCostInCents:P}),sessionCost:null}),U=(0,lZ.S)([T,I]);return(0,f.FD)(j.S,{grow:!0,shrink:!0,px:4,innerRef:U,children:[(0,f.Y)(ek.ui,{css:cy.header,children:r?(0,f.Y)(sH,{onBack:function(){return i(!1)}}):L}),(0,f.FD)(j.S,{css:cy.main,innerRef:w,children:[r?null:(0,f.Y)(j.S,{css:cy.sidebarBlanket,onClick:function(){return b(!1)}}),(0,f.Y)(ek.ui,{css:cy.sidebar,children:(0,f.Y)(ci,{currentSessionId:n,onNewSessionClick:A,onSessionClick:function(e){i(!1),o(e),Y()},onSettingsButtonClick:_})}),(0,f.Y)(j.S,{css:cy.content,grow:!0,shrink:!0,children:r?(0,f.Y)(sM,{hasAccessToAdvancedModel:m,onOpenUserSettings:a}):t})]}),R?(0,f.Y)(lj.A,{}):null]})}var cb=t(33778),cS=t(57829),cY=t(20775),c_=t(73866),cA=t(2099),cC=t(53337),ck=t(93096),cx=t(8907),cD=t(33986),cE=t(56199);function cR(){var e=(0,ev._)(["\n  fragment StartWithAiUsageBudget on UsageBasedBillingBudget {\n    id\n    hasReachedBudget\n  }\n"]);return cR=function(){return e},e}function cI(){var e=(0,ev._)(["\n  query AssitantUsageBanner($orgId: String) {\n    currentUser {\n      id\n      ...CoreSubscriptionPlanStatus\n      usageBasedBillingBudget {\n        __typename\n        ... on UsageBasedBillingBudget {\n          ...StartWithAiUsageBudget\n        }\n      }\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          name\n          usageBasedBillingBudget {\n            __typename\n            ... on UsageBasedBillingBudget {\n              ...StartWithAiUsageBudget\n            }\n          }\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return cI=function(){return e},e}var cT={},cF=(0,ey.J1)(cR()),cP=(0,ey.J1)(cI(),cD.y,cF,cE.B9),cL=t(74251),cU=t(11013),cN=t(30166),cO=(0,eo.x)({bannerContainer:[ea.wp.pb(6)],buttonLink:[ea.wp.reset.button,ob.b.underlined]});function cM(e){var n,t,r,i,o,a,l,s,c,u,d,p,h=e.assistantAuthz,m=(0,v._)((0,y.useState)(!1),2),g=m[0],w=m[1],b=(0,v._)((0,y.useState)(!1),2),S=b[0],Y=b[1],_=(0,v._)((0,y.useState)(!1),2),A=_[0],C=_[1],k=null==(r=(0,cU.y)().paymentMethod)?void 0:r.last4,x=(0,P.A)(),D=(0,om.R)(x).orgId,E=(n={variables:{orgId:D}},t=(0,eg._)({},cT,n),ew.I(cP,t)),R=E.data,I=E.loading,T=!1;D?(i=(null==R||null==(o=R.currentUser)?void 0:o.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===R.currentUser.org.usageBasedBillingAlerts.__typename?R.currentUser.org.usageBasedBillingAlerts:void 0,T=(null==R||null==(a=R.currentUser)?void 0:a.org.__typename)==="Org"&&(null==(l=R.currentUser.org.usageBasedBillingBudget)?void 0:l.__typename)==="UsageBasedBillingBudget"&&R.currentUser.org.usageBasedBillingBudget.hasReachedBudget):(i=(null==R||null==(s=R.currentUser)?void 0:s.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?R.currentUser.usageBasedBillingAlerts:void 0,T=(null==R||null==(u=R.currentUser)||null==(c=u.usageBasedBillingBudget)?void 0:c.__typename)==="UsageBasedBillingBudget"&&R.currentUser.usageBasedBillingBudget.hasReachedBudget);var F=null!=(d=null==R?void 0:R.currentUser)?d:null,L=(null==F?void 0:F.org.__typename)==="Org"?F.org:void 0,U=null!=(p=null==F?void 0:F.hasCore)&&p;return I||(null==h?void 0:h.advancedAssistant.isAuthorized)||A?null:k||U?T?(0,f.FD)(j.S,{children:[(0,f.Y)(ld.a,{isOpen:S,onRequestClose:function(){return Y(!1)},children:(0,f.Y)(cN.j,{org:L,initialSettings:i,onDone:function(){return Y(!1)}})}),(0,f.Y)(j.S,{css:cO.bannerContainer,children:(0,f.Y)(iX.N,{icon:(0,f.Y)(aq.A,{}),text:(0,f.FD)(V.EY,{variant:"small",children:["You must"," ",(0,f.Y)("button",{css:cO.buttonLink,onClick:function(){Y(!0)},children:"increase your usage budget"})," ","to enable Advanced ",iY.BP,"."]}),colorway:"blue",closable:!0,closeAction:function(){return C(!0)}})})]}):null:(0,f.FD)(j.S,{children:[(0,f.Y)(ld.a,{isOpen:g,onRequestClose:function(){return w(!1)},children:(0,f.FD)(j.S,{gap:16,children:[(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Add Payment Method"}),(0,f.Y)(cL.y,{onClose:function(){w(!1)}})]})}),(0,f.Y)(j.S,{css:cO.bannerContainer,children:(0,f.Y)(iX.N,{icon:(0,f.Y)(cc.A,{}),text:(0,f.FD)(V.EY,{variant:"small",children:["You must"," ",(0,f.Y)("button",{css:cO.buttonLink,onClick:function(){w(!0)},children:"add a billing method"})," ","to enable Advanced ",iY.BP,"."]}),colorway:"blue",closable:!0,closeAction:function(){return C(!0)}})})]})}var cH=t(54001),cB=t(19553),cz=t(3846),cW=t(20701),cG=t(8479),cV=t(68264),cZ=t(4729),cj=t(22012),cq=t(59318),cK=t(41930),c$=t(47245),cJ=t(565),cQ=t(76477),cX=(0,eo.x)({root:[ea.wp.color.foregroundDimmer],label:[ea.wp.visuallyHidden],selectButton:[ea.wp.reset.button,ea.wp.flex.row,ea.wp.rowWithGap(4),ea.wp.cursor.pointer,ea.wp.align.center,ea.wp.px(4),ea.wp.py(2),ob.b.nofill,ea.wp.color.foregroundDimmest,ea.wp.fontSize(12),{'&[aria-expanded="true"] .chevron':{transform:"rotate(180deg)"},"&:hover":ea.wp.color.foregroundDefault}],pooverSurface:[ea.wp.borderRadius(4),ea.wp.border({color:N.LU.outlineDefault})]});function c0(e){var n,t=e.assistantMode,r=e.availableModels,i=e.assistantAdvancedAuthz,o=e.showModelNames,a=void 0===o||o,l=e.basicModeAffordances,s=e.advancedModeAffordances,c=e.onChange,u=r.basicModel,d=r.advancedModel,p=r.overrideModel,h=(0,cK.a)();return(0,f.Y)(j.S,{css:cX.root,grow:!0,shrink:!0,children:(0,f.FD)(cV.l6,{selectedKey:t,onSelectionChange:function(e){switch(e){case"basic":case"advanced":c(e)}},children:[(0,f.Y)(c$.J,{css:cX.label,children:"Assistant mode"}),(0,f.FD)(cZ.$,{css:cX.selectButton,children:[(0,f.Y)(ly.D8,{model:"basic"===t?I.e3q.BASIC:I.e3q.ADVANCED,size:12}),"basic"===t?"Basic":"Advanced",(0,f.Y)(sD.A,{size:12})]}),(0,f.Y)(cj.A,{placement:h?"top":void 0,children:(0,f.Y)(ek.ui,{css:cX.pooverSurface,elevated:!0,children:(0,f.FD)(cq.qF,{"aria-label":"Assistant chat mode",selectionMode:"single",children:[(0,f.Y)(cq.nh,{id:"basic","aria-label":"basic",children:(0,f.Y)(c2,{readableModelName:u.name.readable,isSelected:"basic"===t,modeAffordances:void 0===l?"Ask questions":l,showModelNames:a})}),(0,f.Y)(cq.nh,{id:"advanced","aria-label":"advanced",children:(0,f.Y)(c4,{readableModelName:null!=(n=null==p?void 0:p.name.readable)?n:d.name.readable,isSelected:"advanced"===t,isOverrideActive:null!=r.overrideModel,authz:i,modeAffordances:void 0===s?"Generate code & actions":s,showModelNames:a})})]})})})]})})}var c1=(0,eo.x)({root:[ea.wp.px(8),ea.wp.py(6),ea.wp.rowWithGap(8),ea.wp.align.center,ea.wp.cursor.pointer,ea.wp.hover({backgroundColor:N.LU.backgroundHighest})],content:[ea.wp.colWithGap(0),ea.wp.flex.growAndShrink(1)],modelName:[ea.wp.rowWithGap(6),ea.wp.align.center]});function c2(e){var n=e.readableModelName,t=e.isSelected,r=e.modeAffordances,i=e.showModelNames;return(0,f.FD)(j.S,{css:c1.root,children:[(0,f.Y)(j.S,{children:(0,f.Y)(cJ.A,{color:N.LU.foregroundDimmer})}),(0,f.FD)(j.S,{css:c1.content,children:[(0,f.Y)(j.S,{css:c1.modelName,children:(0,f.Y)(V.EY,{variant:"small",children:"Basic"})}),(0,f.FD)(V.EY,{variant:"small",color:"dimmer",children:[r," ",i?"with ".concat(n):""]})]}),(0,f.Y)(j.S,{children:t?(0,f.Y)(oJ.A,{color:N.LU.foregroundDefault}):null})]})}function c4(e){var n=e.readableModelName,t=e.authz,r=e.isSelected,i=e.isOverrideActive,o=e.modeAffordances,a=e.showModelNames;return(0,f.FD)(j.S,{css:c1.root,children:[(0,f.Y)(j.S,{children:(0,f.Y)(cQ.A,{color:N.LU.foregroundDefault})}),(0,f.FD)(j.S,{css:c1.content,children:[(0,f.FD)(j.S,{css:c1.modelName,children:[(0,f.Y)(V.EY,{variant:"small",children:"Advanced"}),t.isAuthorized?(0,f.FD)(V.EY,{variant:"small",color:"dimmer",children:[aw.a7,"\xa2/",aw.go]}):null,t.isAuthorized?null:(0,f.Y)(iB.a,{text:iM.en}),void 0!==i&&i?(0,f.Y)(W.a,{colorway:"orange",text:"Override"}):null]}),(0,f.FD)(V.EY,{variant:"small",color:"dimmer",children:[o," ",a?"with ".concat(n):""]})]}),(0,f.Y)(j.S,{children:r?(0,f.Y)(oJ.A,{color:N.LU.foregroundDefault}):null})]})}var c5=(0,eo.x)({root:[ea.wp.borderRadius(4,4,0,0),ea.wp.rowWithGap(6),ea.wp.align.center,ea.wp.minHeight(28),ea.wp.backgroundColor.backgroundHigher,ea.wp.position.relative,ea.wp.container("assistantControlBar")],modelIndicatorText:[{"@container (max-width: 270px)":{display:"none"}}],modelIndicatorTooltip:[ea.wp.colWithGap(8),ea.wp.p(4),ea.wp.width("100%")]});function c3(e){var n,t,r,i,o,a=e.availableModels,l=e.assistantAdvancedAuthz,s=void 0===l?{isAuthorized:!0}:l,c=e.onModeSelectChange,u=(0,S.dm)().assistantMode,d=(0,S.fS)();return(0,f.FD)(j.S,{css:c5.root,px:6,children:[(0,f.Y)(iq.A,{}),(0,f.Y)(j.S,{grow:!0,shrink:!0,children:(0,f.Y)(c0,{availableModels:a,assistantMode:u,assistantAdvancedAuthz:s,onChange:c})}),(0,f.Y)(c7,{assistantMode:u,assistantAdvancedAuthz:s,isOverrideActive:"advanced"===u&&null!=a.overrideModel,preferredAdvancedModelName:null==d?void 0:d.readable,text:(n=a,t=u,r=n.basicModel,i=n.advancedModel,o=n.overrideModel,"basic"===t?r.name.readable:"advanced"===t&&o?o.name.readable:i.name.readable)})]})}function c7(e){var n=e.assistantMode,t=e.assistantAdvancedAuthz,r=e.isOverrideActive,i=void 0!==r&&r,o=e.preferredAdvancedModelName,a=e.text;return(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[i?(0,f.Y)(W.a,{colorway:"orange",text:"Override"}):null,(0,f.Y)(V.EY,{css:c5.modelIndicatorText,variant:"small",color:"dimmer",children:a}),(0,f.Y)(Z.m_,{tooltip:"basic"===n?(0,f.Y)(c6,{assistantAdvancedAuthz:t}):(0,f.Y)(c8,{assistantAdvancedAuthz:t,preferredAdvancedModelName:i?o:void 0}),placement:"top-end",children:(0,f.Y)(tZ.A,{color:N.LU.foregroundDimmest})})]})}function c6(e){var n=e.assistantAdvancedAuthz;return(0,f.Y)(j.S,{css:c5.modelIndicatorTooltip,children:(0,f.FD)(V.EY,{variant:"small",children:[(0,f.Y)("strong",{children:"Basic"}),": ",iY.BP,n.isAuthorized?" will answer questions about your code or the Replit environment using a lightweight model.":" will answer general coding questions."]})})}function c8(e){var n=e.assistantAdvancedAuthz,t=e.preferredAdvancedModelName;return(0,f.FD)(j.S,{css:c5.modelIndicatorTooltip,children:[(0,f.FD)(V.EY,{variant:"small",children:[(0,f.Y)("strong",{children:"Advanced"}),": In addition to answering questions,"," ",iY.BP," will write code, propose file changes & shell commands, and use advanced code search techniques."]}),n.isAuthorized&&t?(0,f.FD)(V.EY,{variant:"small",children:["Note that ",t," is best for code generation, and you will experience degraded performance with other models."]}):null]})}var c9=t(84344),ue=t(45883),un=t(41847),ut=t(11297),ur=t(25882),ui=t(59133),uo=t(44074),ua=t(6013),ul=t(47045),us=t(94734),uc=t(18701),uu=ng.sj.define({combine:function(e){var n;return null!=(n=e[0])?n:[]},compare:oV()}),ud=new n_.k(function(e){return uu.of(e)}),up=t(56962),uf=t(72924),uh=(0,eo.x)({popover:[ea.wp.borderRadius(4),ea.wp.border({color:N.LU.outlineDefault}),ea.wp.overflow("hidden"),ea.wp.maxWidth(290)]}),um=t(92301),ug=t(15493),uv=t(19202),uy=t(2188);function uw(e){return(0,f.FD)(ti.Ay,(0,nh._)((0,eg._)({},e),{children:[(0,f.Y)("path",{fillRule:"evenodd",d:"M1.25 5A2.75 2.75 0 0 1 4 2.25h4.999c.251 0 .485.125.625.334L11.4 5.25H20A2.75 2.75 0 0 1 22.75 8v4.5a.75.75 0 0 1-1.5 0V8c0-.69-.56-1.25-1.25-1.25h-9a.751.751 0 0 1-.625-.335L8.598 3.75H4c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h9a.75.75 0 0 1 0 1.5H4A2.75 2.75 0 0 1 1.25 19V5Z",clipRule:"evenodd"}),(0,f.Y)("path",{fillRule:"evenodd",d:"M18.438 13.8c-.147-.4-.73-.4-.875 0l-1.005 2.744a.458.458 0 0 1-.298.278l-2.436.746a.446.446 0 0 0 0 .857l2.437.752a.458.458 0 0 1 .297.279l1.005 2.745c.146.399.728.399.875 0l1.004-2.745a.458.458 0 0 1 .297-.278l2.437-.75a.446.446 0 0 0 0-.857l-2.437-.749a.458.458 0 0 1-.297-.278L18.437 13.8Z",clipRule:"evenodd"})]}))}var ub=t(47820);function uS(e){return(0,f.Y)(ti.Ay,(0,nh._)((0,eg._)({},e),{children:(0,f.Y)("path",{d:"M12 1c.717 0 1.36.441 1.617 1.11l2.298 5.975 5.975 2.298a1.732 1.732 0 0 1 0 3.234l-5.975 2.298-2.298 5.975a1.732 1.732 0 0 1-3.234 0l-2.298-5.975-5.975-2.298a1.732 1.732 0 0 1 0-3.234l5.975-2.298 2.298-5.975C10.641 1.441 11.283 1 12 1Z"})}))}var uY=(0,eo.x)({root:[ob.b.listItem,ea.wp.p(4),ea.wp.colWithGap(2)],left:[{fontSize:N.LU.fontSizeSmall}],warning:[{color:N.LU.accentNegativeDefault}],dir:[{opacity:.6},ea.wp.flex.shrink(100)]});function u_(e){var n=e.path,t=e.highlighted,r=e.ranges,i=e.status,o=t?{backgroundColor:N.LU.interactiveBackgroundActive}:void 0,a=i?({included:(0,f.Y)(oJ.A,{}),overflowing:(0,f.Y)(i0.A,{}),truncated:(0,f.Y)(i0.A,{}),unsupported:(0,f.Y)(i0.A,{})})[i]:null,l=(0,um.dt)({path:n,ranges:null!=r?r:[]}),s=l.directory,c=l.filename,u=s&&s.text.split("/"),d=u&&u.length>2?"".concat(u[0],"/.../").concat(u[u.length-1],"/"):s&&s.text+"/";return(0,f.Y)(Z.m_,{maxWidth:600,closeDelay:"none",tooltip:n,children:(0,f.FD)(j.S,{css:uY.root,style:o,children:[(0,f.FD)(j.S,{row:!0,gap:8,align:"center",style:o,children:[(0,f.FD)(j.S,{css:uY.left,grow:!0,shrink:!0,row:!0,gap:4,align:"center",style:o,children:[(0,f.Y)(ty.A,{path:n,size:16}),(0,f.Y)(uv.e,{text:c.text,highlight:c.ranges,dimmed:!t}),s?(0,f.Y)(j.S,{color:"dimmest",css:uY.dir,children:(0,f.Y)(uv.e,{text:d||"",highlight:s.ranges,dimmed:!t})}):null]}),(0,f.Y)(Z.m_,{tooltip:"File not supported",isDisabled:"unsupported"!==i,children:a})]}),"overflowing"===i||"truncated"===i?(0,f.Y)(V.EY,{css:uY.warning,variant:"small",children:"Exceeds file memory"}):null]})})}var uA=(0,iE.v)(["iconColor","placeholderColor","itemTransform","inputBorderRadius","inputBorder"]),uC=uA.cssVars,uk=uA.styleTokens,ux=(0,eo.x)({root:[ea.wp.width(290),ea.wp.maxHeight(300),ea.wp.display.flex],inputRow:[ea.wp.position.relative,(s={},(0,g._)(s,uC.iconColor,N.LU.foregroundDimmest),(0,g._)(s,uC.placeholderColor,N.LU.foregroundDimmer),(0,g._)(s,":focus-within, :hover",(l={},(0,g._)(l,uC.iconColor,N.LU.foregroundDimmer),(0,g._)(l,uC.placeholderColor,N.LU.foregroundDimmest),l)),s)],searchIcon:[ea.wp.coverContainer,ea.wp.align.start,ea.wp.justify.center,{color:uk.iconColor,pointerEvents:"none"}],input:[ea.wp.p(4),ea.wp.pl(24)],header:[ea.wp.height(24),ea.wp.align.center,ea.wp.display.flex,ea.wp.justify.spaceBetween],selectionButton:[ea.wp.reset.button,ob.b.nofill,ea.wp.p(2),{fontSize:N.LU.fontSizeSmall}],menu:[ea.wp.flex.growAndShrink(1),{overflow:"auto",borderBottom:"1px solid "+N.LU.outlineDimmer}],item:[{transform:uk.itemTransform,position:"absolute",top:0,left:0,width:"100%"}]});function uD(e,n){return n.status&&!e.status?1:e.status&&!n.status?-1:"included"===n.status&&"included"!==e.status?1:"included"===e.status&&"included"!==n.status?-1:0}function uE(e){var n,t,r,i,o,a,l,s=e.fileContextInclusions,c=e.findFiles,u=e.overscan,d=e.onChange,p=e.unSelectAllFiles,h=e.isRagAuthorized,m=e.ragState,S=e.updatePopperPositionRef,Y=(0,y.useRef)(null),_=(0,v._)((0,y.useState)(""),2),A=_[0],C=_[1],k=(0,v._)((0,y.useState)(!1),2),x=k[0],D=k[1],E=(t=(n=(0,v._)((0,y.useState)({loading:!0,error:null,items:null}),2))[0],r=n[1],(i=(0,y.useRef)(null)).current||(i.current=(0,cS.A)((o=(0,w._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,c(e)];case 1:return n=t.sent(),(0,y.startTransition)(function(){r(null!==n.error?{error:n.error,loading:!1,items:null}:{items:n.files,total:n.total,error:null,loading:!1})}),[2]}})}),function(e){return o.apply(this,arguments)}),{wait:40})),a=(0,y.useCallback)(function(e){var n;return null==(n=i.current)?void 0:n.call(i,e).catch(function(){})},[]),(0,y.useEffect)(function(){return a(""),function(){try{var e;null==(e=i.current)||e.cancel()}catch(e){}}},[a]),{files:t.items,loading:t.loading,error:t.error,total:t.total,update:a}),R=E.files,I=E.total,T=E.loading,F=E.error,P=E.update,L=(0,y.useRef)(null),U=(0,nt.A)(A),O=(0,y.useMemo)(function(){var e=new Map(s.map(function(e){return[e.path,e.inclusionStatus]})),n=null==R?void 0:R.map(function(n){var t=n.path;return{path:t,ranges:n.ranges,status:e.get(t)}});if(!n)return null;if(L.current&&!U.current)return(0,uf.A)(n,{existing:L.current,getKey:function(e){return e.path}});if(U.current)return n;var t=n.sort(uD);return L.current=t,t},[R,s,U]),M=(0,y.useMemo)(function(){var e;return null!=(e=null==O?void 0:O.filter(function(e){return e.status}))?e:[]},[O]);(0,y.useEffect)(function(){if(!T){var e;null==(e=S.current)||e.call(S)}},[T,S]);var H=(0,sg.Bp)({inputValue:A,items:null!=O?O:[],isOpen:!0,defaultHighlightedIndex:0,stateReducer:function(e,n){var t=n.changes;switch(n.type){case sg.Bp.stateChangeTypes.InputKeyDownEnter:case sg.Bp.stateChangeTypes.ItemClick:return(0,iD.jM)(t,function(n){n.highlightedIndex=e.highlightedIndex});default:return t}},onHighlightedIndexChange:function(e){void 0!==e.highlightedIndex&&-1!==e.highlightedIndex&&W.getVirtualItems()[e.highlightedIndex]&&W.scrollToIndex(e.highlightedIndex)},onStateChange:function(e){switch(e.type){case sg.Bp.stateChangeTypes.InputKeyDownEnter:case sg.Bp.stateChangeTypes.ItemClick:if(!e.selectedItem)break;var n,t,r,i=M.includes(e.selectedItem)?"exclude":"include";d({path:e.selectedItem.path,preference:i}),null==(r=Y.current)||r.select();break;case sg.Bp.stateChangeTypes.InputChange:C(null!=(n=e.inputValue)?n:""),P(null!=(t=e.inputValue)?t:"")}}}),z=(0,y.useRef)(null),W=(0,eP.Te)({count:null!=(l=null==O?void 0:O.length)?l:0,getScrollElement:function(){return z.current},estimateSize:function(){return 32},getItemKey:function(e){var n,t;return null!=(t=null==O||null==(n=O[e])?void 0:n.path)?t:""},overscan:void 0===u?4:u}),G="".concat(N.LU.space4," ").concat(N.LU.space4," 0 0");return!T||(null==O?void 0:O.length)||(G=N.LU.space4),(0,f.FD)(j.S,{css:ux.root,style:(0,g._)({},uC.inputBorderRadius,G),children:[(0,f.FD)(j.S,{px:6,py:2,align:"center",row:!0,gap:6,children:[(0,f.Y)(V.EY,{css:ea.wp.fontWeight.medium,children:"Context"}),h?(0,f.Y)(j.S,{children:(0,f.Y)(uS,{color:N.LU.tealDefault,size:12})}):null]}),(0,f.FD)(j.S,{px:6,children:[h?(0,f.Y)(iX.N,{colorway:"teal",text:(0,f.FD)(j.S,{children:[(0,f.FD)(j.S,{row:!0,gap:4,css:ea.wp.align.center,children:[(0,f.FD)(V.EY,{variant:"small",children:[iY.BP," will automatically decide context."]}),(null==m?void 0:m.remainingFilesToIndex)?(0,f.Y)(Z.m_,{maxWidth:300,tooltip:(0,f.FD)(j.S,{css:ea.wp.textAlign.center,children:[(0,f.FD)(V.EY,{children:[iY.BP," is getting to know your code…"]}),(0,f.Y)(V.EY,{color:"dimmer",children:"(".concat(m.remainingFilesToIndex," files remaining)")})]}),children:(0,f.Y)(tw.A,{size:12})}):null]}),(0,f.Y)(V.EY,{variant:"small",children:"You may highlight specific files if you'd like."})]})}):null,h?null:(0,f.Y)(ug.d,{iconLeft:(0,f.Y)($.A,{}),onClick:function(){return D(!0)},colorway:"yellow",text:"Have ".concat(iY.BP," decide context automatically")})]}),(0,f.FD)(j.S,{css:ux.inputRow,p:4,children:[(0,f.Y)(j.S,{css:ux.searchIcon,pl:12,children:T?(0,f.Y)(tw.A,{size:12}):(0,f.Y)(ub.A,{size:12})}),(0,f.Y)(B.pd,(0,eg._)({autoFocus:!0,placeholder:"Search files",css:ux.input},H.getInputProps({ref:Y})))]}),F?(0,f.Y)(iX.N,{icon:(0,f.Y)(i0.A,{}),text:F}):null,void 0!==I?(0,f.FD)(j.S,{css:ux.header,px:4,row:!0,gap:2,children:[(0,f.Y)(V.EY,{variant:"small",color:"dimmest",children:"".concat(s.length,"/").concat(I," selected")}),s.length?(0,f.Y)(j.S,{tag:"button",css:ux.selectionButton,onClick:function(){return function(){var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=(null!=R?R:[])[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;e.push(a.path)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}p({paths:e})}()},children:"Unselect All"}):null]}):null,(0,f.Y)("div",(0,nh._)((0,eg._)({css:ux.menu},H.getMenuProps({ref:z})),{children:(0,f.Y)("div",{style:{height:"".concat(W.getTotalSize(),"px"),width:"100%",position:"relative"},children:W.getVirtualItems().map(function(e){var n=e.index,t=e.key,r=e.start,i=null==O?void 0:O[n];return i?(0,f.Y)(j.S,(0,nh._)((0,eg._)({"data-index":n,css:ux.item,style:(0,g._)({},uC.itemTransform,"translateY(".concat(r,"px)"))},H.getItemProps({item:i,index:n,refKey:"innerRef",ref:W.measureElement})),{"aria-selected":void 0!==i.status,children:(0,f.Y)(u_,{highlighted:n===H.highlightedIndex,path:i.path,ranges:i.ranges,status:i.status})}),t.toString()):null})})})),(0,f.Y)(iU.default,{isOpen:x,onClose:function(){return D(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"ai_context_menu",surface:"ghostwriter_power_up_dialog"}}})]})}var uR=(0,eo.x)({button:[ea.wp.height(24),ea.wp.reset.button,ea.wp.align.center,ea.wp.cursor.pointer,ea.wp.px(4),ea.wp.py(2),ea.wp.rowWithGap(4),ob.b.nofill,ea.wp.color.foregroundDimmer,{"&:hover":ea.wp.color.foregroundDefault,"@container (max-width: 400px)":{"> div > span":ea.wp.display.none}}]});function uI(e){var n,t=(0,v._)((0,y.useState)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,y.useState)(null),2),a=o[0],l=o[1],s=(0,v._)((0,y.useState)(null),2),c=s[0],u=s[1];(0,y.useEffect)(function(){var e=function(e){"Escape"===e.key&&i(!1)};if(r)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[r]);var d=(0,sm.E)(a,c,{modifiers:[{name:"offset",options:{offset:[0,4]}},{name:"preventOverflow",options:{padding:16}}],placement:"top-start"}),p=(0,y.useCallback)(function(){d.update&&d.update()},[d]),h=(0,y.useRef)(p);(0,y.useEffect)(function(){h.current=p},[p]);var m=e.fileContextInclusions,g=e.findFiles,w="Add file context",b=m.filter(function(e){return"included"===e.inclusionStatus});b.length&&(w=1===b.length?(n=(0,tg.WP)(b[0].path)).length>20?n.slice(0,10)+"..."+n.slice(-10):n:b.length+" files");var S=(0,y.useId)();return(0,f.FD)(up.cQ,{children:[(0,f.Y)(M.$n,{iconLeft:e.isRagAuthorized?(0,f.Y)(uw,{}):(0,f.Y)(uy.A,{}),text:w,css:uR.button,ref:l,onClick:function(){return i(function(e){return!e})},"aria-label":"Select files","aria-haspopup":!0,"aria-expanded":r,"aria-controls":S}),(0,f.Y)(cj.A,{isOpen:r,shouldCloseOnInteractOutside:function(e){var n;return n=[c,a],!(e instanceof Node&&n.some(function(n){return null==n?void 0:n.contains(e)}))&&(i(!1),!0)},isKeyboardDismissDisabled:!0,children:(0,f.Y)(ek.ui,(0,nh._)((0,eg._)({id:S,elevated:!0,style:d.styles.popper,innerRef:u,css:uh.popover},d.attributes.popper),{children:(0,f.Y)(uE,{overscan:e.overscan,onChange:e.onChange,unSelectAllFiles:e.unSelectAll,findFiles:g,fileContextInclusions:m,isRagAuthorized:e.isRagAuthorized,updatePopperPositionRef:h,ragState:e.ragState})}))})]})}var uT={render:function(e){var n=e.file,t=n.path,r=n.match,i=(0,nS.J)((0,f.Y)(j.S,{css:uY.root,style:{width:"100%"},className:"option",children:(0,f.FD)(j.S,{row:!0,justify:"space-between",align:"center",children:[(0,f.FD)(j.S,{css:uY.left,row:!0,gap:4,align:"center",children:[(0,f.Y)(ty.A,{path:t,size:16}),(0,f.Y)(uv.e,{text:r.filename.text,highlight:r.filename.ranges,dimmed:!0}),r.directory?(0,f.Y)(j.S,{color:"dimmest",css:uY.dir,children:(0,f.Y)(uv.e,{text:r.directory.text+"/",highlight:r.directory.ranges,dimmed:!0})}):null]}),"included"===n.inclusionStatus?(0,f.Y)(oJ.A,{}):null]})}));return i.style.display="flex",i.style.width="100%",i},position:81},uF=nv.Lz.theme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:N.LU.fontFamilyDefault,fontSize:N.LU.fontSizeSmall},"& > ul > li":{padding:"0px",display:"flex",alignItems:"center"},"& > ul > li[aria-selected] .option":{backgroundColor:N.LU.backgroundHighest}},".cm-completionLabel":{width:0}}),uP=new n_.k(function(e){if(!e)return[];function n(){return(n=(0,w._)(function(n){var t,r,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(!e||!n.matchBefore(/@(\S*)/g)||null===(t=n.matchBefore(/\w*/)))return[2,null];return[4,e(t.text)];case 1:return i=null!=(r=l.sent().files)?r:[],o=new Map(n.state.facet(uu).map(function(e){return[e.path,e.inclusionStatus]})),a=i.map(function(e){var n=e.path,t=e.ranges;return{label:n,displayLabel:" ",file:{path:n,inclusionStatus:o.get(n),match:(0,um.dt)({path:n,ranges:null!=t?t:[]})}}}),[2,{from:t.from,filter:!1,options:a}]}})})).apply(this,arguments)}return[uF,(0,c9.yU)({defaultKeymap:!1,icons:!1,aboveCursor:!0,addToOptions:[uT],override:[function(e){return n.apply(this,arguments)}],maxRenderedOptions:100})]}),uL=new n_.k(function(e){return nv.Lz.updateListener.of(function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value.annotation(c9.rK);l&&e(l.label)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})}),uU=t(62019),uN=t(37743),uO=t(1833),uM=t(35602),uH=t.n(uM),uB=(0,eo.x)({root:[ea.wp.display.inlineFlex],button:[ea.wp.reset.button,ea.wp.display.inlineFlex,ea.wp.px(2),ob.b.outlined,ea.wp.borderRadius(4),ea.wp.rowWithGap(2),ea.wp.align.center],warning:{color:N.LU.redDefault}}),uz=new nS.E(function(e){var n=(0,tg.WP)(e.path),t=(0,tg._6)(e.path);return(0,f.Y)(Z.m_,{isDisabled:!t&&!e.warning,tooltip:(0,f.FD)(j.S,{children:[e.warning?(0,f.Y)(V.EY,{variant:"small",css:uB.warning,children:e.warning}):null,t?(0,f.FD)(V.EY,{variant:"small",color:"dimmest",children:[t,"/"]}):null]}),children:function(t,r){return(0,f.Y)(j.S,(0,nh._)((0,eg._)({css:uB.root,innerRef:r},t),{children:(0,f.FD)(j.S,{tag:"button",css:uB.button,onClick:function(){return e.onClick()},children:[(0,f.Y)(ty.A,{size:12,path:e.path}),(0,f.Y)(V.EY,{variant:"small",children:n}),e.warning?(0,f.Y)(i0.A,{size:12}):null]})}))}})}),uW=function(e){function n(e,t){var r;return(0,uN._)(this,n),(r=(0,uU._)(this,n)).file=e,r.onClick=t,r}(0,uO._)(n,e);var t=n.prototype;return t.eq=function(e){return this.file.path===e.file.path&&this.file.inclusionStatus===e.file.inclusionStatus},t.toDOM=function(){var e=this.file,n=e.path,t=e.inclusionStatus,r=null;switch(t){case"included":break;case"unsupported":r="File not supported";break;case"truncated":case"overflowing":r="Exceedes memory limit"}var i=uz.create({path:n,onClick:this.onClick,warning:r});return i.style.display="inline",i},n}(nv.xO),uG=function(e,n){return new nv.dT({regexp:RegExp("".concat(e.map(function(e){var n=e.path;return"@".concat(uH()(n))}).join("|")),"g"),decoration:function(t,r){var i,o=t[0].substring(1,null==(i=t[0])?void 0:i.length),a=e.find(function(e){return e.path===o});return a?nv.NZ.replace({widget:new uW(a,function(){return n(o)}),inclusive:!0}):null}})},uV=new n_.k(function(e){return e?nv.Z9.fromClass(function(){function n(t){(0,uN._)(this,n);var r=t.state.facet(uu);this.match=r.length&&e?uG(r,e):null,this.placeholders=this.match?this.match.createDeco(t):nv.NZ.none}return n.prototype.update=function(n){var t=n.state.facet(uu);if(0===t.length){this.match=null,this.placeholders=nv.NZ.none;return}if((0,ny.$H)(n,uu)){this.match=uG(t,e),this.placeholders=this.match.createDeco(n.view);return}if((0,ny.$H)(n,"doc")){if(!this.match){this.match=uG(t,e),this.placeholders=this.match.createDeco(n.view);return}this.placeholders=this.match.updateDeco(n,this.placeholders)}},n}(),{decorations:function(e){return e.placeholders},provide:function(e){return nv.Lz.atomicRanges.of(function(n){var t;return(null==(t=n.plugin(e))?void 0:t.placeholders)||nv.NZ.none})}}):[]}),uZ=t(37624),uj=t(47459),uq=t(25588),uK=t(50932),u$=(0,iE.v)(["padding","columnGap"]),uJ=u$.cssVars,uQ=u$.styleTokens,uX=nv.Lz.theme((c={"&":{flexGrow:1},"& .cm-content":{fontFamily:N.LU.fontFamilyDefault}},(0,g._)(c,"& .".concat(ui.Fb),{display:"none"}),(0,g._)(c,"& .cm-cursor",{borderLeftColor:N.LU.foregroundDefault,borderLeftWidth:"1px"}),c)),u0=(0,eo.x)({controlBarContainer:[ea.wp.position.absolute,ea.wp.width("100%"),ea.wp.top(0),ea.wp.left(0),ea.wp.border({width:1,color:N.LU.outlineDimmer,direction:"bottom"})],footer:[ea.wp.height(32)],left:[{cursor:"text"}],right:[ea.wp.display.flex,ea.wp.rowWithGap(8),ea.wp.align.end],rightColumn:[ea.wp.display.flex,ea.wp.flex.column,ea.wp.align.center],codemirror:[ea.wp.display.flex,ea.wp.flex.grow(1),ea.wp.maxHeight(300),{"& .cm-editor":[ea.wp.flex.grow(1)]}],send:[ea.wp.borderRadius(),ea.wp.mr(2)],sendDisabled:[(0,eC.Li)("grey")],sendEnabled:[(0,eC.Li)("teal")],chatInput:[ea.wp.borderRadius(4),ob.b.filledAndOutlined,ea.wp.p(4),ea.wp.position.relative,{"@media (hover: hover)":{":not([disabled], [aria-disabled])":{cursor:"text"}},padding:uQ.padding,columnGap:uQ.columnGap,rowGap:N.LU.space4,border:"1px solid ".concat(N.LU.outlineDimmest),"&:not([disabled], [aria-disabled])":{borderColor:N.LU.outlineDimmer},"&:hover:not([disabled], [aria-disabled]):hover":{borderColor:N.LU.tealStronger},"&:focus-within":{borderColor:N.LU.tealStronger}}]});function u1(e){var n,t,r,i,o,a,l,s,c,u=(0,iL.m5)(),d=(0,iL.m6)(),p=(t=(n={view:e.view,setPromptEditor:e.inputRef}).view,r=n.setPromptEditor,i=(0,y.useRef)(null),o=(0,nt.A)(r),(0,y.useEffect)(function(){if(t){var e=o.current;return e({setValue:function(e){t.state.doc.toString()!==e&&t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})},getValue:function(){return t.state.doc.toString()},focus:function(){t.focus(),t.dispatch({selection:{anchor:t.state.doc.length}})},animatePlaceholder:function(){t.dispatch({effects:uZ.om.of(!0)}),(0,uo.U)(i,"border-color",N.LU.accentPrimaryDefault),setTimeout(function(){requestAnimationFrame(function(){var e;null==(e=i.current)||e.style.removeProperty("border-color")})},60),t.focus()}}),function(){e(null)}}},[t,o]),i),h=(0,uZ.hk)({text:e.placeholderText}),m=(0,cH.Vn)(e.view,uZ.Im),v=uc.bZ.use(e.maxLength),w=(0,nt.A)(e.onSubmit),b=u2.use((0,y.useCallback)(function(e){return w.current(e)},[w]),!e.isConnected),S=uP.use(e.findFiles),Y=uV.use(e.openFile),_=ud.use(e.fileContextInclusions),A=ue.L.use({analyticsSurface:e.analyticsSurface,shouldTrack:!0}),C=e.updateFileContext,k=uL.use((0,y.useCallback)(function(e){return null==C?void 0:C({path:e,preference:"include"})},[C])),x=ua.U.use({addAttachments:e.addAttachments,onAutoAttachedLargePaste:function(e){(0,tP.u4)(tP.AZ.ASSISTANT_USED,{action:"auto_attached_large_paste",fileSize:e})}}),D=(!e.view||!0===m)&&!e.isLastEventInProgress||e.isSessionLoading&&!e.isLastEventInProgress||(null==(a=e.assistantModeAuthz)?void 0:a.isAuthorized)===!1||e.isSubmitDisabled,E=e.attachments,R=e.attachmentButton,I=e.controlBar,T=e.debugButton,F=e.fileContextButton,P=e.visualSelectorButton,L=(0,ul.e)(),U=e.isSessionLoading,O=e.isLastEventInProgress,M=(0,y.useMemo)(function(){return U?{sendButtonIcon:(0,f.Y)(tw.A,{}),sendButtonAlt:"Loading"}:O?{sendButtonIcon:(0,f.Y)(uK.A,{}),sendButtonAlt:"Stop"}:{sendButtonIcon:(0,f.Y)(uq.A,{}),sendButtonAlt:"Send"}},[U,O]),H=M.sendButtonIcon,B=M.sendButtonAlt,z=function(){if(e.isLastEventInProgress)return void e.onStop();if(e.view){var n=e.view.state.doc.toString();n&&(e.onSubmit(n),e.view.dispatch({changes:{from:0,to:e.view.state.doc.length}}))}},W=(0,uj.z)({type:"assistant"}),G=(0,lZ.S)([p,W],{breadcrumb:"client/workspace/components/AiChat/ChatInput/index.tsx:346"}),V=void 0;return e.isSubmitDisabled&&e.submitDisabledReason?V=e.submitDisabledReason:(null==(l=e.assistantModeAuthz)?void 0:l.isAuthorized)===!1&&(V=null==(s=e.assistantModeAuthz)?void 0:s.message),(0,f.FD)(ek.ui,{css:u0.chatInput,innerRef:G,style:(c={flexDirection:"compact"===e.variant?"row":void 0},(0,g._)(c,uJ.padding,"compact"===e.variant?"2px 5px":"4px 4px"),(0,g._)(c,uJ.columnGap,u||d?"0px":"4px"),(0,g._)(c,"paddingTop",e.controlBar?N.LU.space32:void 0),c),children:[I?(0,f.Y)(j.S,{css:u0.controlBarContainer,children:I}):null,E,(0,f.Y)(ur.A,{ref:e.codemirrorRef,css:u0.codemirror,fontSize:14,extensions:[uX,b,A,x,h,uc.tP,v,_,Y,S,k,ut.r,un.N,e.isPasteAndDropSupported?x:[],L?[]:cW.fd]}),(0,f.FD)(j.S,{css:u0.footer,py:4,row:!0,gap:8,align:"end",children:["compact"===e.variant?null:(0,f.FD)(j.S,{css:u0.left,grow:!0,shrink:!0,row:!0,gap:8,align:"center",onClick:function(n){if(n.target===n.currentTarget){var t;null==(t=e.view)||t.focus()}},children:[R,P,F,T]}),(0,f.FD)(j.S,{css:u0.right,style:{alignItems:"compact"===e.variant?"flex-end":"center"},children:["compact"===e.variant?null:(0,f.Y)(uc.v$,{view:e.view}),(0,f.FD)(j.S,{css:u0.rightColumn,children:["compact"===e.variant?(0,f.Y)(uc.v$,{view:e.view}):null,u?(0,f.Y)(us.J,{variant:"assistant",alt:B,onClick:z,dataCy:"ai-chat-send-button",iconOverride:e.isLastEventInProgress?(0,f.Y)(uK.A,{}):void 0}):(0,f.Y)(ek.ui,{elevated:!0,css:u0.send,children:e.isConnected?(0,f.Y)(eN.K0,{css:D?u0.sendDisabled:u0.sendEnabled,disabled:D,tooltipContents:V,tooltipBehavior:D?"default":"hidden",dataCy:"ai-chat-send-button",alt:B,onClick:z,children:H}):(0,f.Y)(eN.K0,{disabled:!0,alt:"Connecting…",children:(0,f.Y)(tw.A,{})})})]})]})]})]})}var u2=new n_.k(function(e,n){return nv.Lz.domEventHandlers({keydown:function(t,r){!((0,c9.lq)(r.state).length>0)&&("Enter"===t.key&&t.metaKey&&t.stopPropagation(),"Enter"===t.key&&!t.shiftKey)&&(t.preventDefault(),n||r.state.field(uZ.Im)||(e(r.state.doc.toString()),r.dispatch({changes:{from:0,to:r.state.doc.length}})))}})}),u4=t(77437);function u5(){var e=(0,ev._)(["\n  query GetRagAuthorization($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          useRag {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return u5=function(){return e},e}var u3={},u7=(0,ey.J1)(u5());function u6(){var e,n,t,r,i=(0,v._)((0,y.useState)(null),2),o=i[0],a=i[1],l=(0,P.A)(),s=(e={variables:{replId:l}},n=(0,eg._)({},u3,e),ew.I(u7,n)),c=s.data,u=s.refetch,d=(null==c||null==(r=c.repl)?void 0:r.__typename)==="Repl"&&c.repl.authorizations.useRag.isAuthorized;return(0,nC.b)((t=(0,w._)(function(e,n){var t,r,i,o,l,s,c,u,p;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(t=n.signal,!d)return[2];r=e.viktor.subscribeCurrentState.subscribe({},{signal:t}).resReadable,i=!1,o=!1,f.label=1;case 1:f.trys.push([1,6,7,12]),s=(0,R._)(r),f.label=2;case 2:return[4,s.next()];case 3:if(!(i=!(c=f.sent()).done))return[3,5];if(!(u=c.value).ok)return a({error:u.payload.message}),[3,5];a(u.payload),f.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return p=f.sent(),o=!0,l=p,[3,12];case 7:if(f.trys.push([7,,10,11]),!(i&&null!=s.return))return[3,9];return[4,s.return()];case 8:f.sent(),f.label=9;case 9:return[3,11];case 10:if(o)throw l;return[7];case 11:return[7];case 12:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[d]),{isRagAuthorized:d,ragState:o,refetchRagAuthorization:(0,y.useCallback)(function(){u({replId:l})},[u,l])}}var u8=t(931),u9=t(10208),de=t(64955),dn=(0,eo.x)({attachments:[ea.wp.px(4),ea.wp.py(8)]});function dt(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,g,_,C,x,E,R=e.assistantAuthz,T=e.sendMessage,F=e.stopMessage,P=e.openFile,L=e.openGitCommit,U=e.inputRef,N=e.isSessionLoading,O=e.sessionId,M=e.fileContextInclusions,H=e.dataAppTourGenerateCodeStep,B=e.portfolioWebsiteTourGenerateCodeStep,z=e.shouldAutoscrollRef,W=(0,S.NC)(),G=(0,D.Rj)(function(){return O?W.sessions.get(O):null},[W,O],{default:null}),V=(0,i_._P)({controlName:"flag-agent-debug-info-button"}),Z=(0,i_._P)({controlName:"flag-assistant-visual-editor-button"}),j=(0,A.A)().fs;aS();var q=(n=(0,k.Sx)(),t=(0,tu.J)(),(0,y.useCallback)((r=(0,w._)(function(e){var r,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return[4,j.listFiles()];case 1:if((r=s.sent()).error||!r.files)return[2,{error:null!=(i=r.error)?i:"Something went wrong",files:null}];if(o=r.files.filter(function(e){return!t(e)}),!e)return[3,3];return[4,(0,um.UI)(e,o)];case 2:return l=s.sent(),[3,4];case 3:l=(0,uf.A)(o,{existing:n(),getKey:function(e){return e}}).map(function(e){return{path:e}}),s.label=4;case 4:return a=l,[2,{total:o.length,files:a,error:null}]}})}),function(e){return r.apply(this,arguments)}),[j,t,n])),K=(0,cG.e)(G),$=(null==K?void 0:K.state)===I.qOk.IN_PROGRESS,J=(0,Y.GS)(),Q=(0,Y.Y9)(),X=(0,S.so)(),ee=(0,S.Gk)(),en=u6(),et=en.isRagAuthorized,er=en.ragState,ei=en.refetchRagAuthorization;(0,y.useEffect)(function(){ei()},[null==R||null==(x=R.advancedAssistant)?void 0:x.isAuthorized,ei]);var eo=(0,v._)((0,y.useState)(!1),2),ea=eo[0],el=eo[1],es=(0,v._)((0,y.useState)("ai_model_selector"),2),ec=es[0],eu=es[1],ed=(0,S.dm)(),ep=ed.assistantMode,ef=ed.setAssistantMode,eh=(0,S.K2)().limits.messageCharacters,eg=(0,iL.m5)(),ev=(0,nq.A)().showError,ey=(0,iN.s)(),ew=ey.attachments,eb=ey.urlAttachments,eS=ey.removeAttachment,eY=ey.addAttachments,e_=ey.addUrlAttachment,eA=ey.removeUrlAttachment,eC=ey.clearAttachments,ek=ey.isLoading,ex=(0,de.T)({mode:ep,authz:R}),eD=(o=(i={authz:ex,sendMessage:T,shouldAutoscrollRef:z}).authz,a=i.sendMessage,l=i.shouldAutoscrollRef,s=(0,S.Gk)(),c=(0,S.jt)(),u=u6().isRagAuthorized,p=(d=(0,u4.Zo)({context:"assistant"})).toggleVisualEditor,h=d.element,g=(m=(0,S.dm)()).getAssistantMessageIntent,_=m.getAssistantMessageModel,C=m.getAssistantMode,(0,y.useCallback)(function(e,n){if(s){var t=_(o);(0,tP.u4)(tP.AZ.ASSISTANT_USED,{action:"message_sent",assistant_mode:C(),message_content:e,message_source:"chat_pane",message_surface:"workspace_ai_pane",is_agent_repl:c}),a({message:e,attachments:n,useRag:u,modelType:t,intent:g(),webviewTargetedElement:null!=h?h:void 0}),l.current=!0,h&&p()}},[s,g,C,_,o,a,u,l,h,p,c]));function eE(){return(eE=(0,w._)(function(e){return(0,b.YH)(this,function(n){return ex.isAuthorized&&(eD(e,(0,em._)(ew.current).concat((0,em._)(eb.current.map(function(e){return e.file})))),eC(),e.trim().length>0&&((null==H?void 0:H.isActive)?H.next():(null==B?void 0:B.isActive)&&B.next())),[2]})})).apply(this,arguments)}var eR=(0,nY.A)(),eI=eR.ref,eT=eR.view,eF=null!=(E=(0,cH.Vn)(eT,cW.Wd))?E:[],eP=(0,D.J2)(ek),eL=(0,D.J2)(ew);return(0,f.FD)(f.FK,{children:[(0,f.Y)(u1,{codemirrorRef:eI,view:eT,assistantModeAuthz:ex,placeholderText:"Ask ".concat(iY.BP,", use @ to include specific files..."),isPasteAndDropSupported:!0,isConnected:ee,inputRef:U,isLastEventInProgress:$,isSessionLoading:N,isSubmitDisabled:eP,submitDisabledReason:ek?"Please wait for files to finish uploading":null,findFiles:q,fileContextInclusions:M,updateFileContext:function(e){return J(e.path,e.preference)},openFile:P,openGitCommit:L,maxLength:eh,onStop:F,onSubmit:function(e){return eE.apply(this,arguments)},analyticsSurface:"workspace_ai_sidebar",attachments:(0,f.Y)(ot.A,{css:dn.attachments,detectedUrls:eF.map(function(e){return(0,f.Y)(cz.A,{url:e,addUrlAttachment:e_,removeUrlAttachment:eA,onError:ev},e)}),fileAttachments:eL.map(function(e){return(0,f.Y)(or.m1,{attachment:e,removeAttachment:eS,getAttachmentTypeDisclaimer:(0,oi.F)({aiName:iY.BP}),imagesDisabledMessage:"basic"===ep?"".concat(iY.BP," can't see images in Basic mode"):void 0},e.path)})}),attachmentButton:(0,f.Y)(cB.e,{status:N?"loading":"composing",addAttachments:eY}),addAttachments:eY,debugButton:V&&O?(0,f.Y)(u8.O,{sessionId:O,sessionType:I.dF3.CHAT}):void 0,fileContextButton:(0,f.Y)(uI,{isInMobileWorkspace:eg,onChange:function(e){return J(e.path,e.preference)},unSelectAll:function(e){return Q(e.paths)},findFiles:q,fileContextInclusions:M,isRagAuthorized:et,ragState:er}),controlBar:(0,f.Y)(c3,{availableModels:X,assistantAdvancedAuthz:null==R?void 0:R.advancedAssistant,onModeSelectChange:function(e){if(!(null==R?void 0:R.advancedAssistant.isAuthorized)&&"advanced"===e){eu("ai_model_selector"),el(!0);return}e!==ep&&(0,tP.u4)(tP.AZ.ASSISTANT_USED,{action:"mode_changed",intent_type:null,mode:e,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),ef(e)}}),visualSelectorButton:Z?(0,f.Y)(u9.G,{context:"assistant"}):void 0}),(0,f.Y)(iU.default,{isOpen:ea,onClose:function(){return el(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",highlightUpsell:"assistant",analyticsContext:{upgrade:{context:ec,surface:"ghostwriter_power_up_dialog"}}})]})}var dr=(0,eo.x)({surface:[ea.wp.borderRadius(),ea.wp.textAlign.center],buttonContainer:[ea.wp.width("100%"),ea.wp.justify.center]});function di(e){var n=e.assistantAuthz,t=e.getFileContext,r=e.hideInput,i=(0,tR._)(e,["assistantAuthz","getFileContext","hideInput"]),o=(0,v._)((0,y.useState)(!1),2),a=o[0],l=o[1],s=(0,lF.F)().isFreemiumStarterPlanUsersOwnRepl,c=(0,cx.x)(),u=(0,ca.V)().assistantEdits,d=(0,S.dm)(),p=d.assistantMode,h=d.setAssistantMode,m=!!("advanced"===p&&s&&!(null==u?void 0:u.isUnderQuota)),g=(null==n?void 0:n.advancedAssistant.code)===ix.JBK.PaymentDelinquent,w=(0,i_._P)({controlName:"flag-freemium-ai-load-shedder"}),b=(0,ij.A)(),Y=function(){(0,tP.u4)(tP.AZ.ASSISTANT_USED,{action:"mode_changed",intent_type:null,mode:"basic",message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),h("basic")};return m?(0,f.FD)(j.S,{py:8,px:6,children:[(0,f.FD)(ek.ui,{elevated:!0,css:dr.surface,py:8,px:12,gap:8,align:"center",children:[(0,f.FD)(V.EY,{variant:"subheadDefault",children:["You've run out of free ",iY.BP," ",(0,oy.A)(aw.go)]}),(0,f.FD)(V.EY,{children:["Upgrade to ",iM.en," to continue generating code. You can still ask ",iY.BP," questions in Basic mode."]}),(0,f.FD)(j.S,{css:dr.buttonContainer,row:!0,gap:8,children:[(0,f.Y)(M.$n,{text:"Upgrade to ".concat(iM.en),iconLeft:(0,f.Y)(cQ.A,{}),onClick:function(){return l(!0)},colorway:"brand"}),(0,f.Y)(M.$n,{text:"Switch to Basic mode",onClick:function(){return Y()}})]})]}),(0,f.Y)(iU.default,{isOpen:a,onClose:function(){return l(!1)},type:"purchase",analyticsContext:{upgrade:{context:"assistant_freemium_quota"}},onPurchaseComplete:b,reloadPageAfterPurchaseComplete:!0})]}):r?null:g?(0,f.Y)(cA.E,{}):s&&w?(0,f.Y)(cC.n,{aiName:iY.BP}):c?(0,f.Y)(j.S,{p:8,children:(0,f.Y)(ck.c,{aiName:iY.BP})}):(0,f.FD)(j.S,{px:8,pb:8,children:[(0,f.Y)(cM,{assistantAuthz:n}),(0,f.Y)(dt,(0,eg._)({assistantAuthz:n,getFileContext:t},i))]})}var da=(0,y.forwardRef)(function(e,n){var t,r,i,o,a,l,s,c,u,d,p,h,m,g,_,x,E,R,T,P,L,U=(0,iP.A)(),N=(0,v._)((0,y.useState)(!1),2),O=N[0],M=N[1],H=e.openPane,B=e.onSessionChange,z=e.removePane,W=(0,v._)((0,y.useState)(null!=(L=e.initialSessionId)?L:null),2),G=W[0],V=W[1],Z=(0,v._)((0,y.useState)(!1),2),j=Z[0],q=Z[1],K=(0,S.NC)(),$=(0,D.Rj)(function(){return G?K.sessions.get(G):null},[K,G],{default:null}),J=(t=(0,D.HJ)({open:!1,overlayed:!1,width:0}),r=(0,tF.A)(function(e){t.set((0,iD.jM)(t.current,function(n){var t=Math.min(e.width,240);n.overlayed=e.width<500+t,n.width=t}))}),i=(0,y.useCallback)(function(e){return t.set((0,iD.jM)(t.current,function(n){n.open=null!=e?e:!n.open}))},[t]),o=(0,y.useCallback)(function(){var e=t.current,n=e.open,r=e.overlayed;n&&r&&i(!1)},[t,i]),{state:t,setSidebarContainerEl:r,toggleSidebar:i,closeIfNeeded:o});(0,y.useImperativeHandle)(n,function(){return{updateActiveSessionId:function(e){V(null!=e?e:null)},openSettingsPanel:eY.openSettingsPanel,toggleSidebar:function(){J.toggleSidebar()}}}),(0,y.useEffect)(function(){null==B||B(G)},[B,G]),a=(0,v._)((0,c_.jd)({fetchPolicy:"network-only",ssr:!1}),1)[0],l=(0,y.useMemo)(function(){return r6()(a,2e3,{trailing:!0})},[a]),(0,S.zv)("received-completed-event",function(e){var n=e.event.contents.contents;(0,F.VF)(n,"messageEventContents")&&(0,F.QN)(n).assistantProposedActions.didCountEditRequest&&l()});var Q=(0,S.q4)(),X=(0,y.useRef)(!1),ee=(0,v._)((0,y.useState)(null),2),en=ee[0],et=ee[1],er=(0,ik.useRouter)(),ei=(0,iL.ME)(er,"hideChatInput"),eo=(0,cY.L)(),ea=eo.authorizations,el=eo.loading,es=(0,S.dm)().getAssistantMode;function ec(e){if(V(e),!U&&(null==en||en.focus(),!e)){var n;null==en||null==(n=en.setValue)||n.call(en,"")}}var eu=(0,y.useCallback)(function(e){return H((0,ts.af)(e))},[H]),ed=(0,y.useCallback)(function(e){return H({type:"git",data:{mode:{type:lY.C.COMMIT,hash:e}}})},[H]),ep=(0,A.A)(),ef=ep.fs,eh=ep.dotReplit,ev=(c=(s={recentFilesObservable:(0,k.rE)(),getFileContext:(0,C.P)(ef,eh),assistantMode:es()}).recentFilesObservable,u=s.getFileContext,d=s.assistantMode,p=(0,nt.A)(u),h=(0,Y.Vg)(),m=(0,Y.nt)(),_=(g=(0,v._)((0,y.useState)([]),2))[0],x=g[1],(0,y.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,w._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,null==(n=p.current)?void 0:n.call(p,{modelType:"advanced"===d?I.e3q.ADVANCED:I.e3q.BASIC,filePreferences:m,recentFiles:e})];case 1:if(!(t=r.sent()))return[2];return x(function(e){var n=e.filePreferences,t=e.fileContextState,r=new Map(t.fileContext.map(function(e){return[e.filePath,"included"]})),i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=(0,v._)(l.value,2),u=c[0],d=c[1];if("exclude"===d){r.delete(u);continue}if(t.unsupportedPreferredFiles.has(u)){r.set(u,"unsupported");continue}r.set(u,"included"===r.get(u)?"included":"overflowing")}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return(0,em._)(r.entries()).map(function(e){var n=(0,v._)(e,2);return{path:n[0],inclusionStatus:n[1]}})}({fileContextState:t,filePreferences:m})),[2]}})})).apply(this,arguments)}return e(c.current),c.subscribe((0,cS.A)(e,{wait:2e3}))},[c,m,d,p]),{fileContextInclusions:_,getFileContext:(0,y.useMemo)(function(){return function(){return u({modelType:"advanced"===d?I.e3q.ADVANCED:I.e3q.BASIC,filePreferences:h(),recentFiles:c.current})}},[u,h,d,c])}),ey=ev.fileContextInclusions,ew=ev.getFileContext,eb=e.inputRef,eS=(0,y.useCallback)(function(e){et(e),null==eb||eb(e)},[eb]),eY=(R=(E=(0,v._)((0,y.useState)(!1),2))[0],T=E[1],{isSettingsPanelOpen:R,openSettingsPanel:(0,y.useCallback)(function(){return T(!0)},[]),openUserSettingsPane:(0,y.useCallback)(function(){H({type:"preferences"})},[H]),setIsSettingsPanelOpen:T}),e_=!!(null==ea?void 0:ea.advancedAssistant.isAuthorized),eA=(null==ea?void 0:ea.advancedAssistant.code)===ix.JBK.PaymentDelinquent,eC=(0,y.useCallback)((P=(0,w._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(n=e.message,t=e.attachments,r=e.useRag,i=e.modelType,o=e.intent,a=e.webviewTargetedElement,j)return[2];if(q(!0),l=$)return[3,2];return[4,K.sessions.create({sessionType:I.dF3.CHAT})];case 1:if(!(s=f.sent()).ok)return q(!1),[2];l=s.payload,f.label=2;case 2:return V(l.id),c=t.map(function(e){return{path:e.path,mimeType:e.file.type}}),[4,ew()];case 3:return d=(u=f.sent()).fileContext,p=u.mostRecentFile,[4,l.appendEvent({kind:"message",intent:o,modelType:i,message:n,uploadedFiles:c,useRag:r,webviewTargetedElement:a,fileContext:d,mostRecentFile:p})];case 4:return f.sent(),q(!1),[2]}})}),function(e){return P.apply(this,arguments)}),[j,$,ew,K]),ek=(0,y.useCallback)((0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!$)return[3,2];return[4,$.abortLastEvent()];case 1:e.sent(),q(!1),e.label=2;case 2:return[2]}})}),[$]),ex=(0,iO.o)(),eD=(0,nq.A)().showError;return(0,f.FD)(iN.S,{sessionId:null!=G?G:void 0,uploadFiles:ex,onError:eD,children:[(0,f.FD)(cw,(0,nh._)((0,eg._)({sessionId:G,setSessionId:ec,onNewSessionClick:function(){ec(null),null==en||en.animatePlaceholder()},sidebarState:J},eY),{children:[$?(0,f.Y)(lW,{openPane:H,removePane:z,sessionId:null==$?void 0:$.id,shouldAutoscrollRef:X,openAiChatSettingsPanel:eY.openSettingsPanel}):(0,f.Y)(cb.T,{showPromptSuggestions:!ei,sessionType:I.dF3.CHAT,onPromptSuggestionClick:en?function(e){var n;null==en||null==(n=en.setValue)||n.call(en,e.text),U||null==en||en.focus()}:void 0,onSwitchToAgent:function(){return H({type:"agentChat"})},openAiChatSettingsPanel:eY.openSettingsPanel,titleContent:el||e_?null:(0,f.Y)(iQ,{}),footerContent:el||e_||eA?void 0:(0,f.Y)(iJ,{})}),Q?(0,f.Y)(i4,{}):(0,f.Y)(di,{assistantAuthz:ea,sendMessage:eC,stopMessage:ek,openFile:eu,openGitCommit:ed,inputRef:eS,isSessionLoading:j,sessionId:G,getFileContext:ew,fileContextInclusions:ey,shouldAutoscrollRef:X,hideInput:ei})]})),(0,f.Y)(iU.default,{isOpen:O,onClose:function(){return M(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),dl=t(39167),ds=t(17574),dc=t(87978),du=t(13383),dd=h.ZU.Object({type:h.ZU.Literal("ghostwriterChat"),data:h.ZU.Optional(h.ZU.Object({sessionId:h.ZU.Optional(h.ZU.String()),newSessionType:h.ZU.Optional(h.ZU.Enum(I.dF3))}))}),dp=(0,eo.x)({root:[ea.wp.center,ea.wp.flex.growAndShrink(1),ea.wp.p(16)]});function df(){return(0,f.Y)(j.S,{css:dp.root,children:(0,f.Y)(V.EY,{children:"AI is disabled for this team"})})}var dh={Content:function(e){var n=e.pane.data,t=e.options,r=(0,S.NC)(),i=(0,D.Rj)(function(){return(null==n?void 0:n.sessionId)?r.sessions.get(n.sessionId):null},[r,null==n?void 0:n.sessionId],{default:null}),o=(0,i_._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),a=t.performPaneOperation,l=(0,y.useCallback)(function(e){a({operation:"open",pane:e,secondary:!0})},[a]),s=(0,y.useCallback)(function(e){a({operation:"remove",pane:{id:e}})},[a]),c=(0,v._)((0,y.useState)(null),2),u=c[0],d=c[1];(0,tv.HP)(function(){return u},[u]);var p=(0,y.useRef)(""),h=(0,y.useRef)(null==n?void 0:n.sessionId),m=(0,y.useRef)(null==n?void 0:n.sessionId),g=(0,y.useRef)(null);(0,y.useEffect)(function(){if(m.current!==(null==n?void 0:n.sessionId)){var e;m.current=null==n?void 0:n.sessionId,null==(e=g.current)||e.updateActiveSessionId(null==n?void 0:n.sessionId)}},[null==n?void 0:n.sessionId]);var w=(0,y.useCallback)(function(e){m.current!==e&&(m.current=null!=e?e:void 0,a({operation:"replace",pane:{type:"ghostwriterChat",data:e?{sessionId:e}:void 0}}))},[a]),b=(0,iC.u)(i,void 0,"assistant_chat"),Y=b.FeedbackModal,_=b.feedbackCommandGroup,A=(0,ds.y)({sessionId:null==n?void 0:n.sessionId,type:"assistant"}).usageCommand;return((0,tv.Qt)(function(){var e={type:"ghostwriterChat",setInputText:u?u.setValue:function(e){p.current=e}},n=[{name:"Chat",commands:[{data:{type:"action",icon:(0,f.Y)(du.A,{}),label:"New chat",run:function(){w(null),null==u||u.animatePlaceholder()}}},{data:{type:"action",icon:(0,f.Y)(sE.A,{}),label:"All chats",run:function(){var e;null==(e=g.current)||e.toggleSidebar()}}}]},{name:"Settings",commands:[A,{data:{type:"action",icon:(0,f.Y)(oQ.A,{}),label:"Settings",run:function(){var e;null==(e=g.current)||e.openSettingsPanel()}}}]},_];return(0,nh._)((0,eg._)({},e),{commands:n})},[u,w,g,A,_]),(0,iA.f)().isTeamWithAiDisabled)?(0,f.Y)(df,{}):o?(0,f.Y)(dl.A,{textVariant:"headerDefault",showImage:!0}):(0,f.FD)(f.FK,{children:[(0,f.Y)(da,{ref:g,inputRef:d,initialSessionId:h.current,openPane:l,removePane:s,analyticsMessageSurface:"workspace_ai_pane",onSessionChange:w}),(0,f.Y)(Y,{})]})},Icon:function(e){var n=e.size,t=e.color;return(0,f.Y)(ti.Vx.Provider,{value:{color:t,size:n},children:t?(0,f.Y)(dc.A,{color:t}):(0,f.Y)(iq.A,{})})},getTitle:function(){return iY.BP},description:iY.C3,category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(dd,e)}},dm=t(66241),dg=t(87562),dv=(0,y.createContext)(null);function dy(){var e=(0,y.useContext)(dv);if(!e)throw Error("Expected store in context");return e}var dw=(0,e0.eU)([]),db=(0,e0.eU)(function(e){return e(dw)},function(e,n,t){var r=e(dw),i=Math.random().toString(36).substring(7);n(dw,[{id:i,type:t,dismiss:function(){var t=e(dw).filter(function(e){return e.id!==i});n(dw,t)}}].concat((0,em._)(r)))});function dS(){return(0,e1.Xr)(db,{store:dy()})}function dY(e,n){(0,tP.u4)(tD.AZ.GIT_FEATURE_USED,(0,eg._)({action:e,source:"git-pane"},n))}var d_=t(11478),dA=(0,eo.x)({checkboxLabel:ea.wp.rowWithGap(8)});function dC(){var e=(0,y.useId)(),n=(0,v._)((0,y.useState)(!0),2),t=n[0],r=n[1],i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1],l=dS(),s=(0,A.A)().git;function c(){return(c=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(o)return[2];return a(!0),[4,s.init({initialCommit:t,includeAllInitialFiles:!0})];case 1:return(e=n.sent()).error?(a(!1),l(e.error)):(s.forceRefresh(),dY("repository-initialized")),[2]}})})).apply(this,arguments)}return(0,f.FD)(f.FK,{children:[(0,f.Y)(M.$n,{text:o?"Initializing...":"Initialize Git Repository",iconLeft:o?(0,f.Y)(tw.A,{}):(0,f.Y)(d_.A,{}),colorway:"primary",loading:o,onClick:function(){return c.apply(this,arguments)}}),(0,f.FD)(j.S,{css:dA.checkboxLabel,tag:"label",children:[(0,f.Y)(nQ.S,{id:e,checked:t,onChange:function(e){return r(e)},size:"small"}),(0,f.Y)(V.EY,{variant:"small",multiline:!1,children:"Create initial commit with all changes"})]})]})}var dk=t(91220),dx=t(99528),dD=t(2653);function dE(){var e,n=(0,rh.A)((e=(0,w._)(function(e){return(0,b.YH)(this,function(n){return[2,{connectedToGithub:dR(e),error:null}]})}),function(n){return e.apply(this,arguments)}));return null==n||n.error?null:n.connectedToGithub}function dR(e){return e.hasProfile(dk.H.GITHUB)}var dI=t(81801);function dT(e){var n=e.label,t=e.allowReconnect,r=e.callback,i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1],l=(0,A.A)().git,s=dE(),c=(0,it.A)(),u=(0,dD.P)({onAuth:function(){dY("github-user-connected"),a(!1),l.refreshProfiles({preferredProvider:dk.H.GITHUB}),null==r||r()},onClose:function(){return a(!1)}});return s&&!(void 0!==t&&t)?(0,f.Y)(M.$n,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,f.Y)(oJ.A,{}),disabled:!0}):(0,f.Y)(M.$n,{text:o||null===s?"Connecting...":c?"Visit account page to connect to GitHub":void 0===n?"Connect to GitHub":n,colorway:"primary",iconLeft:o?(0,f.Y)(tw.A,{}):(0,f.Y)(dI.A,{}),loading:o,onClick:function(){if(c)return void dx.M.openExternalUrl("/account#connected-services");a(!0),u()}})}var dF=t(64330),dP=t(68590);function dL(e){return!!e&&("string"==typeof e?e.includes(dP.Oe):e.fetch.includes(dP.Oe))}function dU(e){return e.endsWith(".git")?e.slice(0,-4):e}function dN(e){if(!e)return null;var n="string"==typeof e?e:e.fetch;return dL(n)?dU(n):null}function dO(e){var n="string"==typeof e?e:e.fetch;if(dL(n)){var t=(n=dU(n)).split("/");if(t.length<2)return null;var r=t[t.length-2],i=t[t.length-1];return"".concat(r,"/").concat(i)}return null}var dM=t(87064),dH=(0,eo.x)({body:[ea.wp.borderRadius(0,0,8,8)],remedies:[ea.wp.flex.wrap,{gap:"8px"}]});function dB(e){var n=e.description,t=e.remedies,r=e.error;return(0,f.FD)(ek.ui,{css:dH.body,p:4,gap:8,elevated:!0,children:[(0,f.Y)(V.EY,{children:n}),(0,f.FD)(j.S,{css:dH.remedies,row:!0,align:"center",justify:"end",children:[t,(0,f.Y)(M.$n,{text:"Dismiss",iconLeft:(0,f.Y)(dM.A,{}),onClick:r.dismiss})]})]})}function dz(e){var n,t=e.error,r=(0,rh.A)((n=(0,w._)(function(e){var n,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:switch(t.type){case aN.uA.UNKNOWN_NOT_GIT:return[3,1];case aN.uA.UNKNOWN:return[3,2];case aN.uA.CHANNEL_CLOSED:return[3,3];case aN.uA.NOT_INITIALIZED:return[3,4];case aN.uA.UNAUTHENTICATED:return[3,5];case aN.uA.INDEX_FILE_CORRUPT:return[3,7];case aN.uA.UNKNOWN_REMOTE:return[3,8];case aN.uA.UNKNOWN_REF:return[3,9];case aN.uA.INDEX_LOCKED:return[3,10];case aN.uA.NO_COMMITS:return[3,11];case aN.uA.PATH_MATCHED_NO_FILES:return[3,12];case aN.uA.USER_NOT_CONFIGURED:return[3,13];case aN.uA.INVALID_REFERENCE:return[3,14];case aN.uA.BRANCH_ALREADY_EXISTS:return[3,15];case aN.uA.MERGE_CONFLICT:return[3,16];case aN.uA.UPSTREAM_NOT_SET:return[3,17];case aN.uA.HEAD_DETACHED:return[3,18];case aN.uA.DIRTY_WORKTREE:return[3,19];case aN.uA.PROTECTED_BRANCH:return[3,20];case aN.uA.PUSH_REJECTED:return[3,21];case aN.uA.REMOTE_ALREADY_EXISTS:return[3,22];case aN.uA.TIMEOUT:return[3,23];case aN.uA.ALREADY_INITIALIZED:return[3,24];case aN.uA.PRE_COMMIT_HOOK_FAILED:return[3,25]}return[3,26];case 1:return n="Unknown error from the Git service. This is probably a bug in the app.",r=null,[3,27];case 2:return n="There was an unrecognized fatal error with Git. This is probably a bug in the app.",r=null,[3,27];case 3:return n="The command was interrupted. Please try again.",r=null,[3,27];case 4:return n="There isn't a Git repository in the Repl's root directory.",r=null,[3,27];case 5:return[4,e.getRemotes()];case 6:if((i=p.sent()).error)return[2,i];if(0!==i.remotes.size){o=!1,a=!0,l=!1,s=void 0;try{for(c=i.remotes.values()[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)if(d=u.value,dL(d)){o=!0;break}}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}if(o){if(dR(e))return n="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",r=(0,f.Y)(dT,{label:"Update GitHub Repository Access",callback:t.dismiss,allowReconnect:!0}),[3,27];return n="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",r=(0,f.Y)(dT,{label:"Connect to GitHub",callback:t.dismiss,allowReconnect:!0}),[3,27]}}return n="Failed to authenticate with the remote.",r=null,[3,27];case 7:return n="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",r=null,[3,27];case 8:return n="The remote specified isn't configured.",r=null,[3,27];case 9:return n="Remote ref of current branch is missing, publish your branch or restore the remote branch",r=null,[3,27];case 10:return n="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",r=null,[3,27];case 11:return n="There are no commits in the repository.",r=null,[3,27];case 12:return n="The path specified didn't match any files.",r=null,[3,27];case 13:return n="There isn't any user information configured for Git.",r=null,[3,27];case 14:return n="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",r=null,[3,27];case 15:return n="The branch specified already exists.",r=null,[3,27];case 16:return n="There was an unexpected merge conflict.",r=null,[3,27];case 17:return n="The upstream branch isn't set.",r=null,[3,27];case 18:return n="The HEAD is detached. You have a commit checked out, not a branch.",r=null,[3,27];case 19:return n="There are uncommitted changes.",r=null,[3,27];case 20:return n="This operation cannot be performed on a protected branch.",r=null,[3,27];case 21:return n="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",r=null,[3,27];case 22:return n="The remote specified already exists.",r=null,[3,27];case 23:return n="The remote operation timed out.",r=null,[3,27];case 24:return n="There is already a Git repository in the Repl's root directory.",r=null,[3,27];case 25:return n="The pre-commit hook failed.",r=null,[3,27];case 26:return n="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",r=null,[3,27];case 27:return[2,{description:n,remedies:r,error:null}]}})}),function(e){return n.apply(this,arguments)}),[t],{refresh:!1});if(!r)return(0,f.Y)(dB,{description:null,remedies:null,error:t});if(r.error)return(0,f.Y)(dB,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:t});var i=r.description,o=r.remedies;return(0,f.Y)(dB,{description:i,remedies:o,error:t})}var dW=(0,eo.x)({errorNotification:[{pointerEvents:"all"},ea.wp.p(1),ea.wp.backgroundColor.accentNegativeDimmer,ea.wp.borderRadius(8),ea.wp.shadow(3)],header:[ea.wp.display.flex,ea.wp.flex.row,ea.wp.align.center,ea.wp.justify.spaceBetween,ea.wp.color.accentNegativeStrongest],errorType:[ea.wp.font.code,{opacity:.75}],body:[ea.wp.backgroundColor.backgroundHigher,ea.wp.borderRadius(0,0,8,8)]});function dG(e){var n=e.error;return(0,f.FD)(j.S,{css:dW.errorNotification,children:[(0,f.FD)(j.S,{css:dW.header,py:4,px:8,children:[(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(i0.A,{}),(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:function(e){switch(e.type){case aN.uA.UNKNOWN_NOT_GIT:return"Unknown Error";case aN.uA.UNKNOWN:return"Unknown Git Error";case aN.uA.NOT_INITIALIZED:case aN.uA.UNAUTHENTICATED:case aN.uA.INDEX_FILE_CORRUPT:case aN.uA.UNKNOWN_REMOTE:case aN.uA.UNKNOWN_REF:case aN.uA.INDEX_LOCKED:case aN.uA.NO_COMMITS:case aN.uA.PATH_MATCHED_NO_FILES:case aN.uA.USER_NOT_CONFIGURED:case aN.uA.INVALID_REFERENCE:case aN.uA.BRANCH_ALREADY_EXISTS:case aN.uA.MERGE_CONFLICT:case aN.uA.HEAD_DETACHED:case aN.uA.DIRTY_WORKTREE:case aN.uA.PUSH_REJECTED:case aN.uA.PROTECTED_BRANCH:case aN.uA.REMOTE_ALREADY_EXISTS:case aN.uA.ALREADY_INITIALIZED:case aN.uA.TIMEOUT:case aN.uA.OBJECT_HAS_NO_NOTE:case aN.uA.NOTE_SUCCESSFULLY_REMOVED:case aN.uA.NOTE_SUCCESSFULLY_OVERWRITTEN:case aN.uA.OBJECT_ALREADY_HAS_NOTE:case aN.uA.PRE_COMMIT_HOOK_FAILED:return"Git Error";default:return"Unknown Error"}}(n)})]}),(0,f.Y)(V.EY,{css:dW.errorType,multiline:!1,children:n.type})]}),(0,f.Y)(j.S,{css:dW.body,pt:4,pb:8,px:8,gap:8,children:(0,f.Y)(dz,{error:n})})]})}var dV=(0,eo.x)({errorList:[{pointerEvents:"none"},{transition:"background-color 100ms"},ea.wp.position.absolute,ea.wp.top(0),ea.wp.bottom(0),ea.wp.left(0),ea.wp.right(0),ea.wp.p(8),ea.wp.colWithGap(16),ea.wp.zIndex(10)]});function dZ(){var e=(0,e1.md)(db,{store:dy()});return(0,f.Y)(j.S,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:dV.errorList,children:e.map(function(e){return(0,f.Y)(dG,{error:e},e.id)})})}function dj(){var e,n,t,r,i,o=(0,v._)((0,y.useState)(!1),2),a=o[0],l=o[1],s=(0,A.A)().git,c=(n=(e=(0,v._)((0,y.useState)(!1),2))[0],t=e[1],r=(0,A.A)().git,(0,y.useEffect)(function(){return r.onBusyChange(t)},[r]),n),u=dS(),d=(0,rh.A)((i=(0,w._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,e.isInitialized()];case 1:if((n=r.sent()).error)return u(n.error),[2,n];if(!n.initialized)return[2,{hasRemotes:!1,error:null}];return[4,e.getRemotes()];case 2:if((t=r.sent()).error)return u(t.error),[2,t];return[2,{hasRemotes:t.remotes.size>0,error:null}]}})}),function(e){return i.apply(this,arguments)}),[u]);if(null==d?void 0:d.error)return null;var p=!!d&&d.hasRemotes,h=c||a||null===d;function m(){return(m=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(s.isBusy()||h)return[2];if(l(!0),!p)return[3,2];return[4,s.fetch()];case 1:(e=n.sent()).error?u(e.error):dY("remote-fetched"),n.label=2;case 2:return[4,s.refreshProfiles()];case 3:return n.sent(),s.forceRefresh(),setTimeout(function(){return l(!1)},500),[2]}})})).apply(this,arguments)}return(0,f.Y)(eN.K0,{alt:p?"Refresh and Fetch":"Refresh",size:24,onClick:function(){return m.apply(this,arguments)},disabled:h,children:h?(0,f.Y)(tw.A,{}):(0,f.Y)(oU.A,{})})}var dq=t(46953),dK=t(82637),d$=t(64607),dJ=t(51026);function dQ(){var e=(0,ev._)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return dQ=function(){return e},e}var dX={},d0=(0,ey.J1)(dQ()),d1=t(78289),d2=t(13601),d4=t(22422),d5=(0,eo.x)({gitUserContainer:[ea.wp.flex.row],gitUserInnerContainer:[ea.wp.align.center,ea.wp.flex.row,{"& > :not(:first-child)":{marginLeft:N.LU.space4}}],gitUserInnerContainerFlipped:[ea.wp.align.center,ea.wp.flex.rowReverse,{"& > :not(:last-child)":{marginLeft:N.LU.space4}}],alignCenter:[ea.wp.align.center]});function d3(e){var n=e.name,t=e.email,r=e.allowPlaceholderAvatar,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=e.small,s=void 0!==l&&l,c=e.flip,u=void 0!==c&&c,d=e.placement,p=e.showTooltip;return void 0===p||p?(0,f.Y)(j.S,{css:d5.gitUserContainer,children:(0,f.Y)(Z.m_,{placement:void 0===d?"bottom":d,tooltip:(0,f.Y)(V.EY,{children:t}),children:(0,f.FD)(j.S,{css:u?d5.gitUserInnerContainerFlipped:d5.gitUserInnerContainer,children:[(0,f.Y)(d7,{email:t,name:n,enablePlaceholder:i,small:s}),(0,f.Y)(V.EY,{multiline:!1,color:a,variant:s?"small":"text",children:n})]})})}):(0,f.Y)(j.S,{css:d5.gitUserContainer,children:(0,f.FD)(j.S,{css:u?d5.gitUserInnerContainerFlipped:d5.gitUserInnerContainer,children:[(0,f.Y)(d7,{email:t,name:n,enablePlaceholder:i,small:s}),(0,f.Y)(V.EY,{multiline:!1,color:a,variant:s?"small":"text",children:n})]})})}function d7(e){var n,t,r=e.name,i=e.email,o=e.enablePlaceholder,a=void 0!==o&&o,l=e.small,s=void 0!==l&&l,c=(0,v._)((n={initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1},t=(0,eg._)({},dX,n),dJ._(d0,t)),1)[0],u=(0,v._)((0,y.useState)(null),2),d=u[0],p=u[1];return(0,y.useEffect)(function(){var e;(e=(0,w._)(function(){var e,n,t,r,o,a,l,s,u,d;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(!i.endsWith("@".concat(d2.D)))return[3,1];return e=i.split("@")[0],(n=(0,v._)(e.split("+"),2))[0],t=n[1],p((0,d1.d3)("https://github.com/".concat(t,".png"))),[3,4];case 1:if(!i.endsWith("@".concat(d2.O)))return[3,3];return a=i.split("@")[0],(l=(0,v._)(a.split("-"),2))[0],[4,c({variables:{username:l[1]}})];case 2:return(s=null==(o=f.sent().data)||null==(r=o.userByUsername)?void 0:r.image)&&p(s),[3,4];case 3:u=(0,d$.Fx)(i),(d=new URL("https://gravatar.com/avatar/".concat(u))).searchParams.append("d","404"),p(d.toString()),f.label=4;case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[i,c]),(0,y.useMemo)(function(){var e=s?12:16;return null===d?a?(0,f.Y)(J.A,{css:d5.alignCenter,size:e,color:N.LU.foregroundDefault}):null:(0,f.Y)(d4.e,{css:d5.alignCenter,username:r,src:d,onError:function(){return p(null)},size:e})},[d,a,s,r])}var d6=t(53384),d8=j.D.button,d9=(0,eo.x)({fullWidth:[ea.wp.width("100%")],paddedX:[ea.wp.px(8)],loadingContainer:[ea.wp.display.flex,ea.wp.align.center,ea.wp.justify.center,ea.wp.py(48)],menu:[ea.wp.maxWidth(390),ea.wp.width(280),ea.wp.display.flex,ea.wp.flex.shrink(1),ea.wp.maxHeight(640),ea.wp.borderRadius(8),ea.wp.overflow("hidden")],form:[ea.wp.display.flex,ea.wp.flex.growAndShrink(1),ea.wp.flex.column,ea.wp.overflow("hidden")],body:[ea.wp.py(8),ea.wp.colWithGap(8),ea.wp.flex.growAndShrink(1),ea.wp.overflow("auto")],selector:[ea.wp.display.flex,ea.wp.align.center,ea.wp.rowWithGap(4),ea.wp.color.foregroundDefault],menuItem:[{backgroundColor:"inherit"},ob.b.listItem,ea.wp.px(8),ea.wp.py(4),ea.wp.borderRadius(0),ea.wp.align.start],virtualItem:[ea.wp.position.absolute,ea.wp.top(0),ea.wp.left(0),ea.wp.width("100%"),ea.wp.overflow("hidden")],virtualList:[ea.wp.position.relative],divider:[ea.wp.mt(8),ea.wp.mb(8),ea.wp.ml(0),ea.wp.mr(0)],errorText:[ea.wp.color.accentNegativeStronger,ea.wp.mt(4)],createBranchButton:[ea.wp.height(32),ea.wp.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),pe=function(e,n){var t,r,i,o=dS(),a=(0,A.A)().git,l=(0,v._)((0,y.useState)(!0),2),s=l[0],c=l[1],u=(0,rh.A)((t=(0,w._)(function(e){var n,t,r,i,a,l,s,u,d,p,f,h,m,g,v,y,w,S,Y,_,A;return(0,b.YH)(this,function(b){switch(b.label){case 0:return c(!0),[4,e.isInitialized()];case 1:if((n=b.sent()).error)return o(n.error),c(!1),[2,n];if(!n.initialized)return c(!1),[2,{active:[],stale:[],important:[],error:null}];return[4,e.listBranches()];case 2:if((t=b.sent()).error)return o(t.error),c(!1),[2,t];return[4,e.findDefaultBranches()];case 3:if((r=b.sent()).error)return o(r.error),c(!1),[2,r];i=t.branches,a=new Set,l=!0,s=!1,u=void 0;try{for(d=function(){var e=f.value,n=i.find(function(n){return(0,dq.CC)(n,e)});n&&a.add(n)},p=r.refs[Symbol.iterator]();!(l=(f=p.next()).done);l=!0)d()}catch(e){s=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw u}}h=Date.now()-72e6,m=[],g=[],v=!0,y=!1,w=void 0;try{for(S=i[Symbol.iterator]();!(v=(Y=S.next()).done);v=!0)_=Y.value,a.has(_)||(_.commit.author.date>h?m.push(_):g.push(_))}catch(e){y=!0,w=e}finally{try{v||null==S.return||S.return()}finally{if(y)throw w}}return A=Array.from(a),c(!1),[2,{active:m,stale:g,important:A,error:null}]}})}),function(e){return t.apply(this,arguments)}),[o]),d=(r=(0,w._)(function(n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(s||(0,dq.CC)(e,n))return[2];return c(!0),[4,a.switchBranch(n)];case 1:return(t=r.sent()).error?(o(t.error),c(!1)):(a.forceRefresh(),dY("branch-switched")),[2]}})}),function(e){return r.apply(this,arguments)}),p=(i=(0,w._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(s||""===e)return[2];return c(!0),[4,a.createBranch({name:e,checkout:!0})];case 1:return(n=t.sent()).error?(o(n.error),c(!1)):(a.forceRefresh(),dY("branch-created")),[2]}})}),function(e){return i.apply(this,arguments)});if((0,y.useEffect)(function(){null!==e&&(c(!1),n({type:lY.C.CURRENT_BRANCH}))},[e,n]),null===u||s)return{loading:s,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:p,error:null};if(u.error)return{loading:s,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:p,error:u.error};var f=u.active,h=u.stale,m=u.important;return{loading:s,active:null!=f?f:[],stale:null!=h?h:[],important:null!=m?m:[],handleSwitchBranch:d,handleCreateBranch:p,error:null}},pn=function(e){var n=e.branch,t=pe(n,e.switchMode),r=t.loading,i=t.active,o=t.important,a=t.stale,l=t.handleSwitchBranch,s=t.handleCreateBranch,c=(0,v._)((0,y.useState)(!1),2),u=c[0],d=c[1],p=(0,v._)((0,y.useState)(""),2),h=p[0],m=p[1],g=(0,v._)((0,y.useState)(!1),2),S=g[0],Y=g[1];return(0,f.Y)(pu,{isOpen:u,setIsOpen:d,important:o,active:i,stale:a,current:n,query:h,setQuery:m,onSwitchBranch:l,createBranchLoading:S,createBranch:(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return Y(!0),[4,s(h)];case 1:return e.sent(),m(""),Y(!1),[2]}})}),loading:r})},pt=function(e){var n=e.onClick,t=e.children,r=(0,y.useRef)(null),i=(0,v._)((0,sZ.A9)(r,!1),4),o=i[0],a=i[1],l=i[2],s=i[3];return(0,sZ.xK)(a,r),(0,f.Y)(d8,{ref:r,role:"menuitem",css:d9.menuItem,onClick:function(e){s(),n(e)},onKeyDown:l,tabIndex:o,children:t})},pr=function(e){var n=e.branch;return(0,f.FD)(j.S,{shrink:!0,row:!0,gap:8,align:"center",children:[(0,f.Y)(d3,{name:n.commit.author.name,email:n.commit.author.email,color:"dimmer",allowPlaceholderAvatar:!0,placement:"top",showTooltip:!1,small:!0}),(0,f.Y)(V.EY,{color:"dimmer",variant:"small",children:(0,eT.ie)({date:n.commit.author.date})})]})},pi=function(e){var n=e.branch,t=e.current,r=e.onSwitchBranch,i=(0,y.useMemo)(function(){return(0,dg.F)(n,t)},[n,t]);return(0,f.FD)(pt,{onClick:function(){return r(n)},children:[(0,f.Y)(V.EY,{multiline:!1,css:ea.wp.color.foregroundDefault,children:(0,f.Y)(lo,{name:n.name,remote:n.type===dK.xx.REMOTE?n.remote:null,current:i})}),(0,f.Y)(pr,{branch:n})]})},po=function(e,n){return n.filter(function(n){return(0,dq.fn)(n).toLowerCase().includes(e.toLowerCase())})},pa=function(e,n,t){var r=0,i=[];if(e.length+n.length+t.length===0)return i;if(e.length>0){i.push({key:"heading-important-".concat(r++),type:"heading",title:"Important"});for(var o=0;o<e.length;++o)i.push({key:"branch-important-".concat(r++),type:"branch",branch:e[o]});n.length+t.length>0&&i.push({key:"divider-important-".concat(r++),type:"divider"})}if(n.length>0){i.push({key:"heading-active-".concat(r++),type:"heading",title:"Active"});for(var a=0;a<n.length;++a)i.push({key:"branch-active-".concat(r++),type:"branch",branch:n[a]});t.length>0&&i.push({key:"divider-active-".concat(r++),type:"divider"})}if(t.length>0){i.push({key:"heading-stale-".concat(r++),type:"heading",title:"Stale"});for(var l=0;l<t.length;++l)i.push({key:"branch-stale-".concat(r++),type:"branch",branch:t[l]})}return i},pl=function(e){var n=e.item,t=e.current,r=e.onSwitchBranch;return"heading"===n.type?(0,f.Y)(j.S,{css:d9.paddedX,children:(0,f.Y)(V.EY,{multiline:!1,variant:"small",color:"dimmest",css:ea.wp.fontWeight.medium,children:n.title})}):"divider"===n.type?(0,f.Y)(j.S,{css:d9.divider,children:(0,f.Y)(lJ.a,{})}):(0,f.Y)(j.S,{children:(0,f.Y)(pi,{branch:n.branch,current:t,onSwitchBranch:r})})},ps=function(e){var n=e.items,t=e.current,r=e.onSwitchBranch,i=(0,y.useRef)(null),o=(0,eP.Te)({overscan:10,count:n.length,getScrollElement:function(){return i.current},estimateSize:function(e){var t,r;return null!=(t=void 0===(r=n[e])?0:"heading"===r.type?30:"branch"===r.type?65:"divider"===r.type?20:void 0)?t:0}});return(0,f.Y)(sZ.Se,{options:{direction:"vertical"},children:(0,f.Y)("div",{css:d9.body,ref:i,children:(0,f.Y)("ul",{css:d9.virtualList,style:{height:"".concat(o.getTotalSize(),"px")},children:o.getVirtualItems().map(function(e){return(0,f.Y)("div",{css:d9.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:o.measureElement,children:(0,f.Y)(pl,{item:n[e.index],current:t,onSwitchBranch:r})},e.key.toString())})})})})},pc=function(e){var n=e.query,t=e.setQuery,r=e.filteredImportant,i=e.filteredActive,o=e.filteredStale,a=e.current,l=e.onSwitchBranch,s=e.createBranchLoading,c=e.createBranch,u=e.loading,d=(0,y.useMemo)(function(){return pa(r,i,o)},[r,i,o]),p='Create Branch "'.concat(n,'"'),h=(0,y.useMemo)(function(){return(0,em._)(r).concat((0,em._)(i),(0,em._)(o)).some(function(e){return e.name===n})},[n,r,i,o]);return(0,f.Y)(j.S,{css:d9.menu,children:(0,f.Y)("form",{onSubmit:function(e){e.preventDefault(),c()},css:d9.form,children:u?(0,f.Y)(j.S,{css:d9.loadingContainer,children:(0,f.Y)(tw.A,{})}):(0,f.FD)(f.FK,{children:[(0,f.Y)(j.S,{p:8,children:(0,f.Y)(d6.I,{value:n,onChange:function(e){t(e.target.value)},onClear:function(){t("")},loading:!1,placeholder:"Find or create a branch..."})}),(0,f.Y)(j.S,{css:d9.paddedX,children:(0,f.Y)(lJ.a,{})}),d.length>0?(0,f.Y)(ps,{items:d,current:a,onSwitchBranch:l}):null,h||""===n?null:(0,f.FD)(j.S,{p:8,children:[(0,f.Y)(M.$n,{text:p,size:"small",iconLeft:s?(0,f.Y)(tw.A,{}):(0,f.Y)(tq.A,{}),stretch:!0,css:d9.createBranchButton,disabled:s||!(0,dq.eB)(n),type:"submit"}),(0,dq.eB)(n)?null:(0,f.Y)(V.EY,{variant:"small",css:d9.errorText,multiline:!1,children:"Invalid branch name"})]})]})})})},pu=function(e){var n=e.isOpen,t=e.setIsOpen,r=e.important,i=e.active,o=e.stale,a=e.current,l=e.query,s=e.setQuery,c=e.onSwitchBranch,u=e.createBranchLoading,d=e.createBranch,p=e.loading,h=(0,y.useMemo)(function(){return po(l,r)},[l,r]),m=(0,y.useMemo)(function(){return po(l,i)},[l,i]),g=(0,y.useMemo)(function(){return po(l,o)},[l,o]);return(0,f.FD)(aL.Wv,{label:"View Branches",placement:"bottom",isOpen:n,onOpenChange:function(e){t(e)},offset:16,children:[function(e){var t=e.onClick,r=(0,tR._)(e,["onClick"]);return(0,f.Y)(M.$n,{variant:"nofill",text:(0,f.FD)(V.EY,(0,nh._)((0,eg._)({multiline:!1,variant:"small",css:d9.selector},r),{children:[(0,f.Y)(lo,{name:a.name,remote:a.type===dK.xx.REMOTE?a.remote:null,icon:!0}),n?(0,f.Y)(rO.A,{}):(0,f.Y)(rN.A,{})]})),size:"small",stretch:!0,alignment:"start",css:d9.fullWidth,onClick:t})},(0,f.Y)(pc,{query:l,setQuery:s,filteredImportant:h,filteredActive:m,filteredStale:g,current:a,onSwitchBranch:c,createBranchLoading:u,createBranch:d,loading:p})]})},pd=t(12813),pp=(0,eo.x)({container:[ea.wp.height(36),ea.wp.px(8),ea.wp.py(4),ea.wp.rowWithGap(8),ea.wp.backgroundColor.backgroundDefault,ea.wp.align.center,ea.wp.justify.spaceBetween,ea.wp.zIndex(1),{borderBottom:"1px solid ".concat(N.LU.outlineDimmer)}],left:[ea.wp.rowWithGap(4),ea.wp.align.center,ea.wp.flex.growAndShrink(1)],right:[ea.wp.rowWithGap(8),ea.wp.align.center],back:{marginLeft:-4}}),pf=function(e){var n=e.openSettings;return(0,f.FD)(j.S,{css:pp.container,children:[(0,f.FD)(j.S,{css:pp.left,children:[(0,f.Y)(pd.A,{size:16}),(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),(0,f.FD)(j.S,{css:pp.right,children:[(0,f.Y)(pb,{openSettings:n}),(0,f.Y)(dj,{})]})]})},ph=function(e){var n=e.branch,t=e.switchMode,r=e.openSettings;return(0,f.FD)(j.S,{css:pp.container,children:[(0,f.Y)(j.S,{css:pp.left,children:(0,f.Y)(pn,{branch:n,switchMode:t})}),(0,f.FD)(j.S,{css:pp.right,children:[(0,f.Y)(pb,{openSettings:r}),(0,f.Y)(dj,{})]})]})},pm=function(e){var n=e.onBack;return(0,f.FD)(j.S,{css:pp.container,children:[(0,f.FD)(j.S,{css:pp.left,children:[(0,f.Y)(py,{onBack:n,alt:"Back"}),(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Settings"})]}),(0,f.Y)(j.S,{css:pp.right})]})},pg=function(e){var n=e.switchMode,t=e.openSettings;return(0,f.FD)(j.S,{css:pp.container,children:[(0,f.FD)(j.S,{css:pp.left,children:[(0,f.Y)(pw,{switchMode:n}),(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Commit"})]}),(0,f.FD)(j.S,{css:pp.right,children:[(0,f.Y)(pb,{openSettings:t}),(0,f.Y)(dj,{})]})]})};function pv(e){var n=e.mode,t=e.branch,r=e.switchMode,i=e.onBack,o=function(){return r({type:lY.C.SETTINGS})};switch(n){case lY.C.DASHBOARD:return(0,f.Y)(pf,{openSettings:o});case lY.C.BRANCH:case lY.C.CURRENT_BRANCH:if(null===t)throw Error("Tried to show branch in header, but branch is null");return(0,f.Y)(ph,{branch:t,switchMode:r,openSettings:o});case lY.C.SETTINGS:return(0,f.Y)(pm,{onBack:i});case lY.C.COMMIT:return(0,f.Y)(pg,{switchMode:r,openSettings:o});default:return(0,f.FD)(j.S,{css:pp.container,children:[(0,f.Y)(j.S,{css:pp.left}),(0,f.Y)(j.S,{css:pp.right})]})}}function py(e){var n=e.onBack,t=e.alt;return(0,f.Y)(eN.K0,{css:pp.back,alt:t,size:28,onClick:n,children:(0,f.Y)(sN.A,{})})}function pw(e){var n=e.switchMode;return(0,f.Y)(py,{css:pp.back,onBack:function(){return n({type:lY.C.CURRENT_BRANCH})},alt:"Back to current branch"})}function pb(e){var n=e.openSettings;return(0,f.Y)(eN.K0,{alt:"Settings",size:24,onClick:n,children:(0,f.Y)(oQ.A,{})})}function pS(){return(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,f.Y)(V.EY,{multiline:!1,children:"Please finish the patch manually."})]})}function pY(){return(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,f.Y)(V.EY,{multiline:!1,children:"Please finish the bisect manually."})]})}function p_(){var e=(0,ev._)(["\n  query PushBranchButtonIsProjectRepl($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return p_=function(){return e},e}var pA={},pC=(0,ey.J1)(p_()),pk=function(e){return"repl-".concat(e)},px=function(e){var n=e.replId,t=e.branch;return"repl-".concat(n,"/").concat(t)},pD=function(){var e=(0,w._)(function(e){var n,t,r,i,o,a,l,s;return(0,b.YH)(this,function(c){switch(c.label){case 0:return n=e.git,r=pk(t=e.replId),i="".concat(t,"@ssh.v1.replit.dev:."),[4,n.getRemotes()];case 1:if((o=c.sent()).error)return[2,o];if(!o.remotes.has(r))return[3,4];if((null==(a=o.remotes.get(r))?void 0:a.fetch)===i)return[3,3];return[4,n.setRemoteURL({remote:r,url:i})];case 2:if((l=c.sent()).error)return[2,l];c.label=3;case 3:return[2,{error:null,remote:{name:r,url:i}}];case 4:return[4,n.addRemote({name:r,url:i,fetch:!0})];case 5:if((s=c.sent()).error&&s.error!==aN.uA.REMOTE_ALREADY_EXISTS)return[2,s];return[2,{error:null,remote:{name:r,url:i}}]}})});return function(n){return e.apply(this,arguments)}}(),pE=t(40831),pR=(0,eo.x)({statusText:[ea.wp.display.flex,ea.wp.flex.row,ea.wp.textAlign.left],settingsButton:[ea.wp.reset.button,ea.wp.linkStyle,ea.wp.fontWeight.medium,ea.wp.textAlign.left,ea.wp.ml(4)]}),pI=function(e){var n=e.onViewSettingsClick;return(0,f.Y)("button",{css:pR.settingsButton,onClick:n,children:"Settings view."})};function pT(e){var n,t,r,i,o,a,l=e.branch,s=e.onViewSettingsClick,c=e.performPaneOperation,u=(0,v._)((0,y.useState)(!1),2),d=u[0],p=u[1],h=(0,v._)((0,y.useState)(!1),2),m=h[0],g=h[1],S=(0,v._)((0,y.useState)(null),2),Y=S[0],_=S[1],C=(0,v._)((0,y.useState)(!1),2),k=C[0],x=C[1],D=(n={variables:{id:(0,P.A)()}},t=(0,eg._)({},pA,n),ew.I(pC,t)).data,E=(null==D||null==(i=D.repl)?void 0:i.__typename)==="Repl"&&(null==(o=D.repl.project)?void 0:o.id)||!1,R=dS(),I=(0,A.A)().git,T=(0,rh.A)((r=(0,w._)(function(e){var n,t,r,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return[4,e.isInitialized()];case 1:if((n=s.sent()).error)return R(n.error),rg({context:"publish-branch-button-initialized",gitService:e,result:n}),[2,{remote:null,error:n.error}];if(!n.initialized)return[2,{remote:null,error:null}];return[4,e.getRemotes()];case 2:if((t=s.sent()).error)return rg({context:"publish-branch-button-get-remotes",gitService:e,result:t}),R(t.error),[2,t];return r=function(e){if(!e||!e.size)return null;if(e.has("origin"))return"origin";var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,v._)(i.value,2),l=a[0];if(!({url:a[1].fetch}).url.endsWith(".replit.dev:."))return l}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}(t.remotes),[4,e.status()];case 3:if((i=s.sent()).error)return R(i.error),rg({context:"publish-branch-button-status",gitService:e,result:i}),[2,i];if(!(i.branch&&r))return[3,5];return o=(0,dF.w9)(i.branch),a="refs/remotes/".concat(r,"/").concat(o),[4,e.branchExists(a)];case 4:(l=s.sent()).error?(rg({context:"publish-branch-button-branch-exists",gitService:e,result:l,data:{upstream:o,fullRemoteRef:a}}),R(l.error)):l.exists&&_("".concat(r,"/").concat(o)),s.label=5;case 5:return[2,{remote:r,error:null}]}})}),function(e){return r.apply(this,arguments)}),[R],{keepStaleResult:!1});if((0,y.useEffect)(function(){function e(){return(e=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!(k&&Y))return[3,2];return[4,I.setBranchUpstream({upstream:Y})];case 1:(e=n.sent()).error&&(rg({context:"publish-branch-button-set-branch-upstream",gitService:I,result:e,data:{upstream:Y}}),R(e.error)),x(!1),_(null),n.label=2;case 2:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[I,R,k,Y]),null==T?void 0:T.error)return null;var F=T?T.remote:null,L=null===T,U=l.type!==dK.xx.LOCAL||!F||k;function N(){return(N=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!F||d)return[2];if(Y)return g(!0),[2];return p(!0),[4,I.push({publish:{remote:F}})];case 1:return(e=n.sent()).error?(p(!1),R(e.error),rg({context:"publish-branch-button-push",gitService:I,result:e,data:{remote:F}})):(I.forceRefresh(),dY("branch-published-to-remote")),[2]}})})).apply(this,arguments)}var O="".concat(F,"/").concat(l.name);return(a=d?"Pushing to '".concat(O,"'..."):l.type!==dK.xx.LOCAL?"Branch has already been pushed to '".concat(O,"'"):L?"Checking if branch ".concat(l.name," can be pushed..."):F?"Push branch as '".concat(O,"'"):"No remotes to push to",E&&T&&!F)?(0,f.FD)(f.FK,{children:[(0,f.Y)(M.$n,{iconLeft:(0,f.Y)(W.a,{text:"Beta",variant:"outline",colorway:"blue"}),text:"Collaborate in the Project pane",onClick:function(){c({operation:"open",pane:{type:"project"}})},iconRight:(0,f.Y)(o2.A,{})}),(0,f.Y)(V.EY,{color:"dimmer",children:"Use the Project pane to merge your changes between repls and collaborate with your teammates. You've received early access to this feature with your Replit Teams subscription."})]}):(0,f.FD)(f.FK,{children:[Y?(0,f.Y)(ld.a,{isOpen:m,onRequestClose:function(){return g(!1)},children:(0,f.FD)(j.S,{gap:24,children:[(0,f.Y)(V.EY,{variant:"headerDefault",children:"Branch already exists"}),(0,f.Y)(V.EY,{children:"Upstream branch '".concat(Y,"' already exists.\n          To push the branch, please confirm you would like to set upstream branch to it.")}),(0,f.Y)(M.$n,{text:"Set upstream to '".concat(Y,"'"),onClick:function(){Y&&(x(!0),g(!1))}})]})}):null,L||F?null:(0,f.Y)(iX.N,{text:(0,f.Y)(j.S,{css:pR.statusText,children:(0,f.FD)("span",{children:["No remote repositories configured. To push your changes, add a remote repository in the",(0,f.Y)(pI,{onViewSettingsClick:s})]})}),colorway:"warning",closable:!1}),(0,f.Y)(M.$n,{text:a,iconLeft:L||d?(0,f.Y)(tw.A,{}):(0,f.Y)(pE.A,{}),onClick:function(){return N.apply(this,arguments)},loading:L||d,disabled:U})]})}var pF=function(e,n,t){var r=new Set,i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r.add(c.hash)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var u=!0,d=!1,p=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;r.add(m.hash)}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return e.filter(function(e){return!r.has(e.hash)})},pP=t(56902),pL=t(67856),pU=t(85608),pN=t(60690),pO=t(88873),pM={height:32,width:"100%",resize:"none",border:"none"},pH={width:"100%",resize:"none",border:"none"},pB=(0,eo.x)({surface:[ea.wp.borderRadius(0,0,8,8)],button:[ea.wp.height("auto"),ea.wp.py(8),ea.wp.fontWeight.medium,ea.wp.borderRadius(8,8,0,0),ea.wp.justify.start,ea.wp.border({color:N.LU.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[ea.wp.display.inlineFlex,ea.wp.rowWithGap(4)],subjectFieldHeader:[ea.wp.center,ea.wp.justify.spaceBetween],subjectInput:pM,bodyInput:pH,subjectInputDisabled:[pM,{opacity:.5}],bodyInputDisabled:[pH,{opacity:.5}],required:[ea.wp.color.accentNegativeStronger],keyCombo:[ea.wp.display.inlineFlex,ea.wp.rowWithGap(4),ea.wp.flex.grow(1),ea.wp.align.center],keyComboText:[ea.wp.fontWeight.normal,ea.wp.color.foregroundDimmest]});function pz(e){var n=e.message,t=e.disabled,r=void 0!==t&&t,i=e.onMessageChange,o=e.onCommitShortcut,a=(0,v._)((0,y.useState)(!0),2),l=a[0],s=a[1],c=(0,v._)((0,y.useState)(!1),2),u=c[0],d=c[1],p=(0,v._)((0,y.useState)(!1),2),h=p[0],m=p[1],g=(0,y.useRef)(null),w=(0,y.useRef)(null),b=(0,pP._)(n.split("\n\n")),S=b[0],Y=void 0===S?"":S,_=b.slice(1).join("\n\n"),A=(0,cK.a)();function C(e,n){i((e=e.replaceAll("\n"," "))+(n?"\n\n"+n:""))}var k=(0,pN.Jn)(pU.Pi.gitCommit.id);return(0,pO.RD)(pU.cl,h),(0,pN.SJ)(function(){return[pU.Pi.gitCommit.id,{run:function(){null==o||o()},scope:pU.cl,bubble:!1}]},[o]),(0,f.FD)(j.S,{children:[(0,f.Y)(M.$n,{css:pB.button,text:(0,f.FD)("span",{css:pB.requiredText,children:[(0,f.Y)("span",{children:"Message"}),l?(0,f.Y)(pV,{}):null]}),secondaryText:A||!k?void 0:(0,f.FD)("span",{css:pB.keyCombo,children:[(0,f.Y)("span",{css:pB.keyComboText,children:"Commit:"}),(0,f.Y)(pN._y,{keyCombo:k,small:!0})]}),iconRight:l?(0,f.Y)(rN.A,{}):(0,f.Y)(rO.A,{}),onClick:function(){return s(function(e){return!e})},size:"small"}),(0,f.FD)(ek.ui,{css:pB.surface,p:8,gap:12,elevated:!0,children:[(0,f.Y)(pW,{ref:g,value:Y,compact:l,disabled:r,onChange:function(e){C(e,_)},onNewline:function(){if(l)s(!1),d(!0);else{if(!w.current)return;w.current.focus(),w.current.setSelectionRange(0,0)}},onFocus:function(){m(!0)},onBlur:function(){m(!1)}}),l&&!_?null:(0,f.Y)(pG,{ref:w,value:_,compact:l,disabled:r,onChange:function(e){if(C(Y,e),l&&!e){var n;null==(n=g.current)||n.focus()}else l&&s(!1)},onBackspaceWhenEmpty:function(){g.current&&g.current.focus()},onFocus:function(){u&&d(!1),m(!0)},onBlur:function(){m(!1)},autoFocus:u})]})]})}var pW=(0,y.forwardRef)(function(e,n){var t=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.onChange,s=e.onNewline,c=e.onFocus,u=e.onBlur,d=(0,y.useRef)(null),p=(0,pL.A)().ref,h=(0,lZ.S)([n,p,d],{breadcrumb:"client/workspace/components/Git/modified/CommitMessage.tsx:267"});return(0,f.FD)(j.S,{gap:8,children:[i?null:(0,f.Y)(j.S,{css:pB.subjectFieldHeader,row:!0,children:(0,f.Y)(V.EY,{variant:"small",color:"dimmer",multiline:!1,children:(0,f.FD)("span",{css:pB.requiredText,children:[(0,f.Y)("span",{children:"Summary"}),(0,f.Y)(pV,{})]})})}),(0,f.Y)(B.ov,{ref:i?n:h,css:a?pB.subjectInputDisabled:pB.subjectInput,placeholder:"Summary of your commit...",value:t,disabled:a,onChange:function(e){return null==l?void 0:l(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null==s||s())},onFocus:c,onBlur:u})]})}),pG=(0,y.forwardRef)(function(e,n){var t=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.autoFocus,s=e.onChange,c=e.onBackspaceWhenEmpty,u=e.onFocus,d=e.onBlur,p=(0,pL.A)().ref,h=(0,lZ.S)([n,p],{breadcrumb:"client/workspace/components/Git/modified/CommitMessage.tsx:335"});return(0,f.FD)(j.S,{gap:8,children:[i?null:(0,f.Y)(V.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,f.Y)(B.ov,{ref:i?n:h,css:a?pB.bodyInputDisabled:pB.bodyInput,placeholder:"Description of your commit...",value:t,disabled:a,onChange:function(e){return null==s?void 0:s(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===t&&(e.preventDefault(),e.stopPropagation(),null==c||c())},onFocus:u,onBlur:d,autoFocus:void 0!==l&&l})]})});function pV(){return(0,f.Y)(Z.m_,{tooltip:"This field is required.",placement:"top",children:(0,f.Y)("span",{css:pB.required,children:"*"})})}var pZ=t(6940),pj=t(27741),pq=t(18216),pK=(0,eo.x)({actionsIndex:[ea.wp.height(24),ea.wp.align.center,ea.wp.borderRadius(4)],actionsWorktree:[ea.wp.height(24),ea.wp.flex.row,ea.wp.align.center,ea.wp.borderRadius(4)],unstage:[ea.wp.height(24),ea.wp.width(24),ea.wp.borderRadius(2)],stage:[ea.wp.px(12),ea.wp.height(24),ea.wp.width(24),ea.wp.borderRadius(2)],discard:[ea.wp.pl(16),ea.wp.pr(12),ea.wp.height(24),ea.wp.width(24),ea.wp.borderRadius(2)],discardIcon:{transform:"scale(0.85)"},divider:[ea.wp.height("75%"),ea.wp.width(1),ea.wp.backgroundColor.outlineStronger]});function p$(e){var n=e.file,t=e.list,r=e.stageFiles,i=e.restoreFiles,o=e.disabled,a=void 0!==o&&o,l=(0,v._)((0,y.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,y.useState)(!1),2),d=u[0],p=u[1];function h(){return(h=(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(a)return[2];return c(!0),[4,r({reset:[n.path]})];case 1:return e.sent(),c(!1),[2]}})})).apply(this,arguments)}function m(){return(m=(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(a)return[2];return c(!0),[4,r({add:[n.path]})];case 1:return e.sent(),c(!1),[2]}})})).apply(this,arguments)}function g(){return(g=(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(a||"worktree"!==t)return[2];return p(!0),[4,i(n.path)];case 1:return e.sent(),p(!1),[2]}})})).apply(this,arguments)}return a=a||d||s,"index"===t?(0,f.Y)(ek.ui,{elevated:!0,css:pK.actionsIndex,children:(0,f.Y)(eN.K0,{css:pK.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return h.apply(this,arguments)},disabled:a,children:s?(0,f.Y)(tw.A,{}):(0,f.Y)(pq.A,{})})}):(0,f.FD)(ek.ui,{elevated:!0,css:pK.actionsWorktree,children:[(0,f.Y)(eN.K0,{css:pK.discard,alt:"Discard changes",size:18,tooltipDelay:"long",onClick:function(){return g.apply(this,arguments)},disabled:a,children:d?(0,f.Y)(tw.A,{}):(0,f.Y)(oS.A,{css:pK.discardIcon})}),(0,f.Y)("div",{css:pK.divider}),(0,f.Y)(eN.K0,{css:pK.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:a,children:s?(0,f.Y)(tw.A,{}):(0,f.Y)(tq.A,{})})]})}function pJ(e){var n,t=e.file,r=e.list,i=e.stageFiles,o=e.restoreFiles,a=e.pathMap,l=e.disabled,s=e.onFilePathClick,c=null==a?void 0:a.get(t.path),u=null==(n=t.source)?void 0:n.path,d="index"===r?t.type.index:t.type.worktree,p=(0,pj.A)(function(){if(d!==rR.PX.DELETED)return function(){return s({path:t.path})}},[t.path,s,d]);return(0,f.FD)(j.S,{py:2,row:!0,gap:4,align:"center",children:[(0,f.Y)(lu,{path:t.path,prefix:c,source:u,onClick:p}),(0,f.Y)(rT,{type:d}),(0,f.Y)(p$,{file:t,list:r,stageFiles:i,restoreFiles:o,disabled:void 0!==l&&l})]})}var pQ=(0,eo.x)({actions:[ea.wp.backgroundColor.backgroundHighest,ea.wp.borderRadius(8)],buttonDiscard:[ea.wp.borderRadius(8,0,0,8)],buttonStage:[ea.wp.borderRadius(0,8,8,0)],divider:[ea.wp.my(8),ea.wp.width(1),ea.wp.backgroundColor.outlineStronger]});function pX(e){var n=e.type,t=e.stageFiles,r=e.restoreFiles,i=e.disabled,o=void 0!==i&&i,a=(0,v._)((0,y.useState)(!1),2),l=a[0],s=a[1],c=(0,v._)((0,y.useState)(!1),2),u=c[0],d=c[1];function p(){return h.apply(this,arguments)}function h(){return(h=(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(o)return[2];return s(!0),[4,t({all:"index"!==n})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function m(){return(m=(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(o||"worktree"!==n)return[2];return d(!0),[4,r(!0)];case 1:return e.sent(),d(!1),[2]}})})).apply(this,arguments)}return o=o||u||l,"index"===n?(0,f.Y)(M.$n,{text:"Unstage All",iconLeft:l?(0,f.Y)(tw.A,{}):(0,f.Y)(pq.A,{}),onClick:p,disabled:o,loading:l,size:"small"}):(0,f.FD)(j.S,{css:pQ.actions,row:!0,gap:2,children:[(0,f.Y)(M.$n,{css:pQ.buttonDiscard,text:"Discard All",iconLeft:u?(0,f.Y)(tw.A,{}):(0,f.Y)(oS.A,{}),onClick:function(){return m.apply(this,arguments)},disabled:o,loading:u,size:"small"}),(0,f.Y)("div",{css:pQ.divider}),(0,f.Y)(M.$n,{css:pQ.buttonStage,text:"Stage All",iconLeft:l?(0,f.Y)(tw.A,{}):(0,f.Y)(tq.A,{}),onClick:p,disabled:o,loading:l,size:"small"})]})}var p0=(0,eo.x)({header:[ea.wp.px(8),ea.wp.rowWithGap(4),ea.wp.align.center],headerFoldable:[ea.wp.py(4),ea.wp.pl(4),ea.wp.pr(8),ea.wp.rowWithGap(4),ea.wp.align.center],headerText:[ea.wp.flex.grow(1)],body:[ea.wp.px(8),ea.wp.maxHeight("25vh"),ea.wp.overflowY("auto")]});function p1(e){var n,t=e.files,r=e.type,i=e.stageFiles,o=e.restoreFiles,a=e.onFilePathClick,l=e.pathMap,s=e.foldable,c=void 0!==s&&s,u=e.disabled,d=void 0!==u&&u,p=(0,v._)((0,y.useState)(!1),2),h=p[0],m=p[1],g=(0,y.useRef)(null),w=(0,y.useRef)(null),b=(0,eP.Te)({count:t.length,getScrollElement:function(){return w.current},getItemKey:function(e){return t[e].path},estimateSize:function(){return 28},overscan:20}),S=b.getVirtualItems();return c&&h?(0,f.Y)(j.S,{py:4,children:(0,f.FD)(j.S,{css:c?p0.headerFoldable:p0.header,children:[(0,f.Y)(p2,{files:t,type:r,setFolded:m,foldable:!0,folded:!0}),(0,f.Y)(pX,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]})}):(0,f.FD)(j.S,{innerRef:g,pt:4,pb:8,gap:4,children:[(0,f.FD)(j.S,{css:c?p0.headerFoldable:p0.header,children:[(0,f.Y)(p2,{files:t,type:r,setFolded:m,foldable:c}),(0,f.Y)(pX,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]}),(0,f.Y)(j.D.div,{ref:w,css:p0.body,children:(0,f.Y)("div",{style:{minHeight:b.getTotalSize()},children:(0,f.Y)("div",{style:{transform:"translateY(".concat(null==(n=S[0])?void 0:n.start,"px)"),willChange:"transform"},children:S.map(function(e){var n=t[e.index];return(0,f.Y)("div",{"data-index":e.index,children:(0,f.Y)(pJ,{file:n,list:r,stageFiles:i,restoreFiles:o,onFilePathClick:a,pathMap:l,disabled:d},n.path)},e.key.toString())})})})})]})}function p2(e){var n=e.files,t=e.type,r=e.setFolded,i=e.foldable,o=void 0!==i&&i,a=e.folded,l=(0,oy.A)("file",n.length),s="".concat(n.length," ").concat("index"===t?"staged":"changed"," ").concat(l);return o&&void 0!==a&&a?(0,f.FD)(f.FK,{children:[(0,f.Y)(eN.K0,{alt:"Show list",onClick:function(){return r(!1)},children:(0,f.Y)(rN.A,{})}),(0,f.Y)(V.EY,{css:p0.headerText,multiline:!1,children:s})]}):(0,f.FD)(f.FK,{children:[o?(0,f.Y)(eN.K0,{alt:"Hide list",onClick:function(){return r(!0)},children:(0,f.Y)(rO.A,{color:N.LU.foregroundDimmest})}):null,(0,f.Y)(V.EY,{css:p0.headerText,color:"dimmest",multiline:!1,children:s})]})}var p4=(0,eo.x)({list:[ea.wp.px(4),ea.wp.colWithGap(2)]});function p5(e){var n=e.show,t=e.files,r=e.pathMap,i=e.callback,o=(0,nt.A)(i),a=(0,y.useCallback)(function(){var e;null==(e=o.current)||e.call(o,!0)},[o]),l=(0,y.useCallback)(function(){var e;null==(e=o.current)||e.call(o,!1)},[o]);return(0,f.Y)(ld.a,{isOpen:n,onRequestClose:l,children:n?(0,f.FD)(j.S,{gap:8,children:[(0,f.FD)(V.Y9,{level:2,children:["Discard ",(0,oy.A)("Change",t.length)]}),(0,f.Y)(p3,{files:t,pathMap:r}),(0,f.FD)(j.S,{row:!0,gap:8,justify:"end",children:[(0,f.Y)(M.$n,{text:"Cancel",iconLeft:(0,f.Y)(lp.A,{}),onClick:l}),(0,f.Y)(M.$n,{text:"Discard ".concat((0,oy.A)("Change",t.length)),iconLeft:(0,f.Y)(oS.A,{}),colorway:"negative",onClick:a})]})]}):null})}function p3(e){var n=e.files,t=e.pathMap,r=[],i=[],o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;u.type.worktree===rR.PX.UNTRACKED?i.push(u):r.push(u)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return!r.length&&i.length?(0,f.FD)(j.S,{gap:4,children:[(0,f.Y)(V.EY,{children:1===i.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,f.Y)(p7,{files:i,pathMap:t})]}):r.length&&!i.length?(0,f.FD)(j.S,{gap:4,children:[(0,f.Y)(V.EY,{children:1===r.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,f.Y)(p7,{files:r,pathMap:t})]}):(0,f.FD)(j.S,{gap:12,children:[r.length?(0,f.FD)(j.S,{gap:4,children:[(0,f.FD)(V.Y9,{level:3,children:["Tracked ",(0,oy.A)("File",r.length)]}),(0,f.Y)(V.EY,{multiline:!1,children:1===r.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,f.Y)(p7,{files:r,pathMap:t})]}):null,i.length?(0,f.FD)(j.S,{gap:4,children:[(0,f.FD)(V.Y9,{level:3,children:["Untracked ",(0,oy.A)("File",i.length)]}),(0,f.Y)(V.EY,{multiline:!1,children:1===i.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,f.Y)(p7,{files:i,pathMap:t})]}):null]})}function p7(e){var n=e.files,t=e.pathMap,r=(0,y.useMemo)(function(){return n.length>20?n.slice(0,20):n},[n]);return(0,f.Y)(j.S,{children:(0,f.FD)("ul",{css:p4.list,children:[r.map(function(e){var n;return(0,f.Y)("li",{children:(0,f.Y)(lu,{path:e.path,prefix:t.get(e.path),source:null==(n=e.source)?void 0:n.path})},e.path)}),n.length<=20?null:(0,f.Y)("li",{children:(0,f.FD)(V.EY,{color:"dimmer",children:["... ",n.length-20," more"," ",(0,oy.A)("file",n.length-20)]})})]})})}function p6(e){var n=(0,v._)((0,y.useState)(function(){return{show:!1,files:[]}}),2),t=n[0],r=n[1];return{openRestoreConfirmationModal:(0,y.useCallback)(function(e){return new Promise(function(n){0===e.length&&n(!1),r({show:!0,files:e,callback:function(e){r({show:!1,files:[],callback:void 0}),n(e)}})})},[]),restoreConfirmationModal:(0,y.useMemo)(function(){return(0,f.Y)(p5,(0,nh._)((0,eg._)({},t),{pathMap:e}))},[t,e])}}var p8=[{"& > span:first-child":[ea.wp.flex.grow(1),ea.wp.textAlign.left]},{"& > span":[ea.wp.flex.shrink(1)]}],p9=(0,eo.x)({buttonFolded:[p8,ea.wp.height("auto"),ea.wp.py(8),ea.wp.fontWeight.medium],buttonUnfolded:[p8,ea.wp.height("auto"),ea.wp.py(8),ea.wp.fontWeight.medium,ea.wp.border({color:N.LU.outlineDimmer,direction:"bottom"}),ea.wp.borderRadius(8,8,0,0)],container:[ea.wp.flex.grow(1),ea.wp.borderRadius(8)],lists:[ea.wp.borderRadius(0,0,8,8)],divider:[ea.wp.height(1),ea.wp.minHeight(1),ea.wp.width("100%"),ea.wp.backgroundColor.outlineDimmer],autoStageMessage:[ea.wp.center],noChangesMessage:[ea.wp.center],details:[ea.wp.rowWithGap(4),ea.wp.fontWeight.normal,ea.wp.color.foregroundDimmest]});function fe(e){var n,t,r=e.status,i=e.stageFiles,o=e.restoreFiles,a=e.onStagedFileClick,l=e.disabled,s=void 0!==l&&l,c=(0,v._)((0,y.useState)(!1),2),u=c[0],d=c[1],p=(0,v._)((0,y.useState)(!1),2),h=p[0],m=p[1],g=(0,v._)((0,y.useState)(!1),2),S=g[0],Y=g[1],_=(0,y.useMemo)(function(){return(0,pZ.b)(r.changes.map(function(e){return e.path}))},[r]),A=(0,v._)((0,y.useMemo)(function(){var e=[],n=[],t=!0,i=!1,o=void 0;try{for(var a,l=r.changes[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value;s.staged&&e.push(s),s.type.worktree!==rR.PX.UNMODIFIED&&n.push(s)}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}return[e,n]},[r.changes]),2),C=A[0],k=A[1],x=C.length>0&&k.length>0,D=p6(_),E=D.openRestoreConfirmationModal,R=D.restoreConfirmationModal,I=(0,y.useCallback)((n=(0,w._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!("all"in e))return[3,2];return m(!0),[4,i(e)];case 1:return n.sent(),m(!1),[3,4];case 2:return[4,i(e)];case 3:n.sent(),n.label=4;case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[i]),T=(0,y.useCallback)((t=(0,w._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!0!==e)return[3,4];return Y(!0),[4,E(k)];case 1:if(!r.sent())return[3,3];return[4,o(e)];case 2:r.sent(),r.label=3;case 3:return Y(!1),[3,8];case 4:if("string"==typeof e){if(!(t=k.find(function(n){return n.path===e})))throw Y(!1),Error("Could not find file in worktree list");n=[t]}else n=k.filter(function(n){return e.includes(n.path)});return[4,E(n)];case 5:if(!r.sent())return[3,7];return[4,o(e)];case 6:r.sent(),r.label=7;case 7:Y(!1),r.label=8;case 8:return[2]}})}),function(e){return t.apply(this,arguments)}),[E,o,k]);return u?(0,f.Y)(fn,{setFolded:d,changeCount:k.length,stagedCount:C.length,disabled:s,folded:!0}):0===C.length&&0===k.length?(0,f.FD)(j.S,{style:{opacity:s?.725:void 0},css:p9.container,children:[(0,f.Y)(fn,{setFolded:d,changeCount:k.length,stagedCount:C.length,disabled:s}),(0,f.Y)(ek.ui,{css:p9.lists,elevated:!0,children:(0,f.Y)(j.S,{css:p9.noChangesMessage,py:16,px:4,children:(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})})]}):(0,f.FD)(f.FK,{children:[(0,f.FD)(j.S,{style:{opacity:s?.725:void 0},css:p9.container,children:[(0,f.Y)(fn,{setFolded:d,changeCount:k.length,stagedCount:C.length,disabled:s}),(0,f.FD)(ek.ui,{css:p9.lists,elevated:!0,children:[0===C.length?null:(0,f.Y)(p1,{type:"index",files:C,stageFiles:I,restoreFiles:T,onFilePathClick:a,pathMap:_,foldable:x,disabled:s||h||S}),x?(0,f.Y)("div",{css:p9.divider}):null,0===k.length?null:(0,f.FD)(f.FK,{children:[(0,f.Y)(p1,{type:"worktree",files:k,stageFiles:I,restoreFiles:T,onFilePathClick:a,pathMap:_,foldable:x,disabled:s||h||S}),x?null:(0,f.Y)(j.S,{css:p9.autoStageMessage,pt:4,pb:8,px:4,children:(0,f.Y)(V.EY,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),R]})}function fn(e){var n=e.folded,t=void 0!==n&&n,r=e.setFolded,i=e.changeCount,o=e.stagedCount,a=e.disabled;return(0,f.Y)(M.$n,{css:t?p9.buttonFolded:p9.buttonUnfolded,text:"Review Changes",secondaryText:(0,f.Y)(ft,{folded:t,changeCount:i,stagedCount:o}),onClick:function(){return r(!t)},iconRight:t?(0,f.Y)(rN.A,{}):(0,f.Y)(rO.A,{}),disabled:void 0!==a&&a,size:"small"})}function ft(e){var n=e.folded,t=e.changeCount,r=e.stagedCount;if(!n)return null;var i=t>0,o=r>0;return i||o?(0,f.FD)("span",{css:p9.details,children:[i?(0,f.FD)("span",{children:[t," ",(0,oy.A)("change",t)]}):null,i&&o?(0,f.Y)("span",{children:"/"}):null,o?(0,f.FD)("span",{children:[r," staged"]}):null]}):(0,f.Y)("span",{css:p9.details,children:(0,f.Y)("span",{children:"no changes"})})}function fr(e){var n=e.status,t=e.onStagedFileClick,r=e.defaultMessage,i=(0,v._)((0,y.useState)(n),2),o=i[0],a=i[1],l=(0,v._)((0,y.useState)(null!=r?r:""),2),s=l[0],c=l[1],u=(0,v._)((0,y.useState)(0),2),d=u[0],p=u[1],h=(0,v._)((0,y.useState)(!1),2),m=h[0],g=h[1],S=dS();(0,y.useEffect)(function(){return a(n)},[n]);var Y=(0,A.A)().git;if(!o||!o.changes.length)return(0,f.Y)(j.S,{gap:8,children:(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var _=o.changes.length,C=o.changes.filter(function(e){return e.staged}).length;function k(){return(k=(0,w._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(m)return[2];return p(function(e){return e+1}),[4,Y.stageFiles(e)];case 1:if((n=r.sent()).error)return[3,3];return[4,Y.status()];case 2:return(t=r.sent()).error?(rg({context:"commit-area-status",gitService:Y,result:t,data:{opts:e}}),S(t.error)):a(t),Y.forceRefresh(),[3,4];case 3:S(n.error),rg({context:"commit-area-stage-files",gitService:Y,result:n,data:{opts:e}}),r.label=4;case 4:return p(function(e){return e-1}),[2]}})})).apply(this,arguments)}function x(){return(x=(0,w._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(m)return[2];return p(function(e){return e+1}),[4,Y.restoreFiles(e)];case 1:if((n=r.sent()).error)return[3,3];return[4,Y.status()];case 2:return(t=r.sent()).error?(rg({context:"commit-area-status",gitService:Y,result:t,data:{files:e}}),S(t.error)):a(t),Y.forceRefresh(),[3,4];case 3:rg({context:"commit-area-restore-files",gitService:Y,result:n,data:{files:e}}),S(n.error),r.label=4;case 4:return p(function(e){return e-1}),[2]}})})).apply(this,arguments)}function D(){return E.apply(this,arguments)}function E(){return(E=(0,w._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(""===s||m||0===_||d>0)return[2];if(g(!0),0!==C)return[3,2];return[4,Y.stageFiles({all:!0})];case 1:t.sent(),t.label=2;case 2:return[4,Y.commit({message:s})];case 3:if(!(e=t.sent()).error)return[3,4];return g(!1),S(e.error),rg({context:"commit-area-commit",gitService:Y,result:e,data:{message:s}}),[3,6];case 4:return dY("commit-created",{hasDescription:-1!==s.trim().indexOf("\n\n")}),[4,Y.status()];case 5:n=t.sent(),g(!1),n.error?(S(n.error),rg({context:"commit-area-status",gitService:Y,result:n,data:{message:s}})):(c(""),a(n)),Y.forceRefresh(),t.label=6;case 6:return[2]}})})).apply(this,arguments)}var R="Nothing to commit";if(m)R="Committing...";else if(C>0&&C<_){var I=(0,oy.A)("change",C);R="Commit ".concat(C," staged ").concat(I)}else _>0&&(R="Stage and commit all changes");var T=!s||0===_||d>0||m;return(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(pz,{message:s,disabled:m,onMessageChange:c,onCommitShortcut:D}),(0,f.Y)(fe,{status:o,stageFiles:function(e){return k.apply(this,arguments)},restoreFiles:function(e){return x.apply(this,arguments)},onStagedFileClick:t,disabled:m}),T?(0,f.Y)(Z.m_,{tooltip:d>0?"Changes in progress":0===_?"There are no changes to commit.":"You must enter a commit message before you can commit.",children:(0,f.Y)(M.$n,{text:R,onClick:D,disabled:T,loading:m,colorway:"primary",iconLeft:(0,f.Y)(oJ.A,{}),stretch:!0})}):(0,f.Y)(M.$n,{text:R,onClick:D,disabled:T,loading:m,colorway:"primary",iconLeft:(0,f.Y)(oJ.A,{}),stretch:!0})]})}var fi=/\s\(#(\d+)\)$/,fo=/^Revert "(.+)"/,fa=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function fl(e){var n=fo.exec(e.subject),t=fa.exec(e.body);if(n&&t){var r,i=t[1],o=n[1],a=fi.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var fs=/\B#\d+\b/g,fc=/^Merged? pull request (#\d+\b)/,fu=/^Merge branch '(.+)'/,fd=/into (.+)$/;function fp(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var n=e.subject.match(fs);if(n){var t,r=parseInt(n[n.length-1].slice(1),10);if(r)return fi.test(e.subject)&&(t=e.subject.replace(fi,"").trim()),!t&&fc.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(t=e.body),{type:"pull-request",id:r,subject:t,reverts:fl(e)}}}if(fc.test(e.subject)){var i,o=fc.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:fl(e)}}if(fu.test(e.subject)){var a=fu.exec(e.subject);if(a){var l=fd.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}var ff={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(N.LU.purpleStrongest),borderRadius:"50%"},fh=(0,eo.x)({markerContainer:[ea.wp.display.flex,ea.wp.align.center,ea.wp.justify.center,ea.wp.minHeight(20),ea.wp.minWidth(20)],commitMarker:[ea.wp.height(4),ea.wp.width(4),ea.wp.backgroundColor.foregroundDefault,ea.wp.borderRadius("full")],collapsedMarkerIconDot:[ea.wp.height(3),ea.wp.width(3),ea.wp.backgroundColor.foregroundDimmer,ea.wp.borderRadius("full")],collapsedMarkerIconContainer:[ea.wp.display.flex,ea.wp.align.center,ea.wp.justify.center,{"div + div":{marginLeft:1}}],collapsedMarker:[ea.wp.display.flex,ea.wp.align.center,ea.wp.justify.center,ea.wp.height(20),ea.wp.width(20),ea.wp.backgroundColor.backgroundHighest,ea.wp.borderRadius("full")],revertMarker:[ea.wp.display.flex,ea.wp.height(20),ea.wp.width(20),ea.wp.backgroundColor.orangeDimmest,ea.wp.borderRadius("full"),ea.wp.align.center,ea.wp.justify.center],mergeMarker:[ea.wp.display.flex,ea.wp.height(20),ea.wp.width(20),ea.wp.backgroundColor.purpleDimmest,ea.wp.borderRadius("full"),ea.wp.align.center,ea.wp.justify.center],mergeMarkerIconContainer:[ea.wp.position.relative,ea.wp.height(9),ea.wp.width(13)],mergeMarkerIconLeft:[(0,eg._)({},ff),ea.wp.left(0)],mergeMarkerIconRight:[(0,eg._)({},ff),ea.wp.right(0)],boundaryMarker:[ea.wp.height(6),ea.wp.width(6),ea.wp.backgroundColor.backgroundDefault,ea.wp.borderRadius("full"),{border:"1px solid ".concat(N.LU.backgroundHighest)}]});function fm(e){var n=function(e){switch(e){case"none":default:return null;case"commit":return(0,f.Y)(fg,{});case"revert":return(0,f.Y)(fv,{});case"merge":return(0,f.Y)(fy,{});case"boundary":return(0,f.Y)(fw,{});case"collapsed":return(0,f.Y)(fb,{})}}(e.type);return n?(0,f.Y)("div",{css:fh.markerContainer,children:n}):null}function fg(){return(0,f.Y)("div",{css:fh.commitMarker})}function fv(){return(0,f.Y)("div",{css:fh.revertMarker,children:(0,f.Y)(oS.A,{size:12,color:N.LU.orangeStrongest})})}function fy(){return(0,f.Y)("div",{css:fh.mergeMarker,children:(0,f.FD)("div",{css:fh.mergeMarkerIconContainer,children:[(0,f.Y)("div",{css:fh.mergeMarkerIconLeft}),(0,f.Y)("div",{css:fh.mergeMarkerIconRight})]})})}function fw(){return(0,f.Y)("div",{css:fh.boundaryMarker})}function fb(){return(0,f.Y)("div",{css:fh.collapsedMarker,children:(0,f.FD)("div",{css:fh.collapsedMarkerIconContainer,children:[(0,f.Y)("div",{css:fh.collapsedMarkerIconDot}),(0,f.Y)("div",{css:fh.collapsedMarkerIconDot}),(0,f.Y)("div",{css:fh.collapsedMarkerIconDot})]})})}var fS=[ea.wp.position.absolute,ea.wp.left(0),ea.wp.width(18)],fY=(0,eo.x)({connectorSegmentBorderSolid:[fS,{borderRight:"1px solid ".concat(N.LU.outlineDimmest)}],connectorSegmentBorderDashed:[fS,{borderRight:"1px dashed ".concat(N.LU.outlineDimmest)}]});function f_(e){var n=e.boundaryTop,t=void 0!==n&&n,r=e.boundaryBottom,i=void 0!==r&&r,o=e.joint,a=void 0===o?"top":o,l=e.hideTop,s=void 0!==l&&l,c=e.hideBottom,u=void 0!==c&&c;if(s&&u)return null;if(t===i&&!s&&!u)return(0,f.Y)(fC,{top:0,bottom:0,dashed:t&&i});var d=s?null:(0,f.Y)(fA,{start:"top",joint:a,dashed:t}),p=u?null:(0,f.Y)(fA,{start:"bottom",joint:a,dashed:i});return(0,f.FD)(f.FK,{children:[d,p]})}function fA(e){var n,t,r=e.start,i=e.joint,o=e.dashed,a="center"===i?(n={},(0,g._)(n,r,0),(0,g._)(n,"height","50%"),n):(t={},(0,g._)(t,r,0),(0,g._)(t,r===i?"height":i,8),t);return(0,f.Y)(fC,(0,nh._)((0,eg._)({},a),{dashed:void 0!==o&&o}))}function fC(e){var n=e.top,t=e.bottom,r=e.height,i=e.dashed;return(0,f.Y)("div",{css:void 0!==i&&i?fY.connectorSegmentBorderDashed:fY.connectorSegmentBorderSolid,style:{top:n,bottom:t,height:r}})}var fk=(0,eo.x)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[ob.b.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[ea.wp.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:20},nodeUnfoldedContentSurface:[ea.wp.mt(4),ea.wp.mb(8),ea.wp.p(8),ea.wp.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[ea.wp.position.relative]});function fx(e){var n=e.boundaryTop,t=e.boundaryBottom,r=void 0!==t&&t,i=e.hideConnectorTop,o=e.hideConnectorBottom,a=void 0!==o&&o,l=e.joint,s=void 0===l?"top":l,c=e.marker,u=e.header,d=e.unfoldedContent,p=e.children,h=e.className,m=(0,v._)((0,y.useState)(!0),2),g=m[0],w=m[1];return(0,f.FD)(j.S,{className:h,css:ea.wp.position.relative,children:[(0,f.Y)(f_,{boundaryTop:void 0!==n&&n,boundaryBottom:r,joint:s,hideTop:void 0!==i&&i,hideBottom:a}),c?(0,f.Y)(fE,{joint:s,children:c}):null,d?(0,f.FD)(j.S,{css:fk.containerInteractive,role:"button",tabIndex:0,onClick:function(){w(!g)},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&w(!g)},children:[g?(0,f.Y)("div",{css:fk.nodeFoldedIconContainer,children:(0,f.Y)(rN.A,{})}):(0,f.Y)("div",{css:fk.nodeUnFoldedIconContainer,children:(0,f.Y)(rO.A,{})}),(0,f.FD)(j.S,{css:fk.nodeContentContainer,children:[u?(0,f.Y)(j.S,{css:fk.nodeHeader,children:u}):null,p?(0,f.Y)(j.S,{children:p}):null]})]}):(0,f.Y)(j.S,{css:fk.container,children:(0,f.FD)(j.S,{css:fk.nodeContentContainer,children:[u?(0,f.Y)(j.S,{css:fk.nodeHeader,children:u}):null,p?(0,f.Y)(j.S,{children:p}):null]})}),!d||g?null:(0,f.FD)(j.S,{css:fk.unfoldedContentContainer,children:[a?null:(0,f.Y)(fC,{top:0,bottom:0,dashed:r}),(0,f.Y)(ek.ui,{css:fk.nodeUnfoldedContentSurface,elevated:!0,children:d})]})]})}var fD=(0,eo.x)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function fE(e){var n=e.joint,t=e.children;return(0,f.Y)("div",{css:fD[void 0===n?"top":n],children:t})}var fR=t(67843),fI=(0,eo.x)({container:[ea.wp.height("100%")],textContainer:[ea.wp.center],text:[ea.wp.flex.shrink(0)]});function fT(e){var n=e.text,t=(0,tR._)(e,["text"]);return(0,f.Y)(fx,(0,eg._)({marker:(0,f.Y)(fm,{type:"boundary"}),joint:"center",header:(0,f.FD)(j.S,{css:fI.container,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(lJ.a,{}),(0,f.FD)(j.S,{css:fI.textContainer,row:!0,gap:4,children:[(0,f.Y)(fR.A,{size:12,color:N.LU.foregroundDimmest}),(0,f.Y)(V.EY,{css:fI.text,variant:"small",color:"dimmest",multiline:!1,children:n})]}),(0,f.Y)(lJ.a,{})]})},t))}var fF=t(77495),fP=(0,eo.x)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:N.LU.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:N.LU.space2},"> dd":{marginLeft:N.LU.space12,paddingBottom:N.LU.space2}},listHeader:[ea.wp.fontWeight.medium],commitList:[ea.wp.colWithGap(2),ea.wp.pl(4)]}),fL=function(e,n){var t=!e.body,r=null,i=null;return n&&"type"in n?(r=n,"pull-request"===n.type&&(n.reverts&&(i=n.reverts),n.subject&&(t=!0))):n&&(i=n),{hideBody:t,merge:r,revert:i}},fU=function(e){var n=e.hash;return(0,f.Y)(H.i,{size:"small",iconLeft:(0,f.Y)(fF.A,{}),textToCopy:n,text:n.slice(0,7),tooltipSuccessText:"Hash copied!"})},fN=function(e){var n=e.onClick,t=e.text,r=e.loading;return(0,f.Y)(Z.m_,{tooltip:"Discard current changes and restore files to time of commit",children:(0,f.Y)(M.$n,{text:t,onClick:n,size:"small",iconLeft:void 0!==r&&r?(0,f.Y)(tw.A,{}):(0,f.Y)(oS.A,{})})})},fO=function(e,n){return e.name!==n.name||e.email!==n.email},fM=function(e,n){return!(6e4>Math.abs(e-n))};function fH(e){var n=e.commit,t=e.info,r=fO(n.committer,n.author),i=fM(n.author.date,n.committer.date),o=fL(n,void 0===t?null:t),a=o.hideBody,l=o.merge,s=o.revert;return(0,f.FD)(j.S,{gap:8,children:[a?null:(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(V.EY,{children:(0,f.Y)(lr,{body:n.body})}),(0,f.Y)(lJ.a,{css:ea.wp.backgroundColor.outlineDimmer})]}),(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{css:fP.listHeader,multiline:!1,children:"Author"}),(0,f.FD)("dl",{css:fP.definitionList,children:[(0,f.Y)("dt",{children:"Name:"}),(0,f.Y)("dd",{children:n.author.name}),(0,f.Y)("dt",{children:"Email:"}),(0,f.Y)("dd",{children:n.author.email})]})]}),r?(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{css:fP.listHeader,multiline:!1,children:"Committer"}),(0,f.FD)("dl",{css:fP.definitionList,children:[(0,f.Y)("dt",{children:"Name:"}),(0,f.Y)("dd",{children:n.committer.name}),(0,f.Y)("dt",{children:"Email:"}),(0,f.Y)("dd",{children:n.committer.email})]})]}):null,(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{css:fP.listHeader,multiline:!1,children:"Commit"}),(0,f.FD)("dl",{css:fP.definitionList,children:[i?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Authored:"}),(0,f.Y)("dd",{children:(0,f.Y)(eT.Dc,{date:n.author.date,dateFormat:"absolute"})}),(0,f.Y)("dt",{children:"Committed:"}),(0,f.Y)("dd",{children:(0,f.Y)(eT.Dc,{date:n.committer.date,dateFormat:"absolute"})})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Date:"}),(0,f.Y)("dd",{children:(0,f.Y)(eT.Dc,{date:n.author.date,dateFormat:"absolute"})})]}),(0,f.Y)("dt",{children:"Hash:"}),(0,f.Y)("dd",{children:(0,f.Y)(fU,{hash:n.hash})}),l&&"pull-request"===l.type?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"PR:"}),(0,f.FD)("dd",{children:["#",l.id]})]}):null,l&&"branch"===l.type?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Merged:"}),(0,f.Y)("dd",{children:l.source}),l.target?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Into:"}),(0,f.Y)("dd",{children:l.target})]}):null]}):null,s?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Reverted:"}),(0,f.Y)("dd",{children:s.hash})]}):null]})]}),l&&"simple"===l.type?(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{css:fP.listHeader,multiline:!1,children:"Merged"}),(0,f.FD)(j.S,{css:fP.commitList,children:[(0,f.Y)(V.EY,{multiline:!1,children:l.a}),(0,f.Y)(V.EY,{multiline:!1,children:l.b})]})]}):null,l&&"octopus"===l.type?(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{css:fP.listHeader,multiline:!1,children:"Merged"}),(0,f.Y)(j.S,{css:fP.commitList,children:l.parents.map(function(e,n){return(0,f.Y)(V.EY,{multiline:!1,children:e},n)})})]}):null]})}var fB=(0,eo.x)({headerText:[ea.wp.rowWithGap(4),ea.wp.flex.row,ea.wp.align.stretch,ea.wp.fontWeight.medium,{"> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}],headerContainer:[{"> span":{width:"calc(100%)"}}],button:[ea.wp.reset.button,ea.wp.linkStyle,ea.wp.color.foregroundDefault,ea.wp.fontWeight.medium,{display:"block",width:"100%",textAlign:"left"}]}),fz=function(e){var n=e.author;return(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(d3,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,f.Y)(eT.Dc,{date:n.date,textColor:"dimmest",textVariant:"small"})]})},fW=function(e){var n=e.children;return(0,f.Y)(V.EY,{css:fB.headerText,multiline:!1,maxLines:1,children:n})},fG=function(e){var n=e.commit,t=e.onViewCommitClick,r=e.children;return(0,f.Y)(j.S,{css:fB.headerContainer,gap:4,align:"start",justify:"start",children:(0,f.Y)(Z.m_,{tooltip:"View ".concat(n.hash.slice(0,7)),children:(0,f.Y)("button",{css:fB.button,onClick:function(){return t(n.hash)},children:r})})})};function fV(e){var n=e.commit,t=(0,tR._)(e,["commit"]);return(0,f.Y)(fx,(0,nh._)((0,eg._)({marker:(0,f.Y)(fm,{type:"commit"}),header:(0,f.Y)(fW,{children:(0,f.Y)(lt,{subject:n.subject})}),unfoldedContent:(0,f.Y)(fH,{commit:n})},t),{children:(0,f.Y)(fz,{author:n.author})}))}var fZ=function(e){var n=e.commit,t=e.onViewCommitClick,r=(0,tR._)(e,["commit","onViewCommitClick"]);return(0,f.Y)(fx,(0,nh._)((0,eg._)({marker:(0,f.Y)(fm,{type:"commit"}),header:(0,f.Y)(fG,{commit:n,onViewCommitClick:function(){return t(n.hash)},children:(0,f.Y)(fW,{children:(0,f.Y)(lt,{subject:n.subject})})})},r),{children:(0,f.Y)(fz,{author:n.author})}))},fj=t(79989);function fq(e){var n,t=e.commit,r=e.info,i=(0,tR._)(e,["commit","info"]);return"branch"!==r.type&&(n="pull-request"===r.type&&r.subject?r.subject:t.subject),(0,f.Y)(fx,(0,nh._)((0,eg._)({marker:(0,f.Y)(fm,{type:"merge"}),header:(0,f.FD)(fW,{children:[(0,f.Y)(a9,{text:"merged"}),(0,f.Y)(f$,{info:r,hash:t.hash,subject:t.subject})]}),unfoldedContent:(0,f.Y)(fH,{commit:t,info:r})},i),{children:(0,f.FD)(j.S,{gap:8,children:[n?(0,f.Y)(V.EY,{color:"dimmer",variant:"small",multiline:!1,children:(0,f.Y)(lt,{subject:n})}):null,(0,f.Y)(fz,{author:t.author})]})}))}var fK=function(e){var n,t=e.commit,r=e.info,i=e.onViewCommitClick,o=(0,tR._)(e,["commit","info","onViewCommitClick"]);return"branch"!==r.type&&(n="pull-request"===r.type&&r.subject?r.subject:t.subject),(0,f.Y)(fx,(0,nh._)((0,eg._)({marker:(0,f.Y)(fm,{type:"merge"}),header:(0,f.Y)(fG,{commit:t,onViewCommitClick:function(){return i(t.hash)},children:(0,f.FD)(fW,{children:[(0,f.Y)(a9,{text:"merged"}),(0,f.Y)(f$,{info:r,hash:t.hash,subject:t.subject})]})})},o),{children:(0,f.FD)(j.S,{gap:8,children:[n?(0,f.Y)(V.EY,{color:"dimmer",variant:"small",multiline:!1,children:(0,f.Y)(lt,{subject:n})}):null,(0,f.Y)(fz,{author:t.author})]})}))};function f$(e){var n=e.info,t=e.hash,r=e.subject,i=(0,f.Y)("span",{css:ea.wp.fontWeight.medium,children:r});switch(n.type){case"pull-request":return(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"pull request"}),(0,f.Y)(le,{id:n.id}),n.reverts&&n.reverts.pr?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"-"}),(0,f.Y)(a8,{text:"reverts"}),(0,f.Y)(le,{id:n.reverts.pr})]}):null]});case"branch":if(!n.target)return(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"branch"}),(0,f.Y)(lo,{name:n.source})]});return(0,f.FD)(f.FK,{children:[(0,f.Y)(lo,{name:n.source}),(0,f.Y)("span",{children:"into"}),(0,f.Y)(lo,{name:n.target})]});case"simple":return(0,f.FD)(f.FK,{children:[(0,f.Y)(ln,{hash:n.a}),(0,f.Y)(fj.A,{css:{alignSelf:"center"},size:12}),(0,f.Y)(ln,{hash:n.b})]});case"octopus":return(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"commit"}),(0,f.Y)(ln,{hash:t}),(0,f.FD)("span",{children:["(",n.parents.length," parents)"]})]});default:return i}}function fJ(e){var n=e.commit,t=e.info,r=(0,tR._)(e,["commit","info"]);return(0,f.Y)(fx,(0,nh._)((0,eg._)({marker:(0,f.Y)(fm,{type:"revert"}),header:(0,f.FD)(fW,{children:[(0,f.Y)(a8,{text:"reverted"}),(0,f.Y)(ln,{hash:t.hash}),(0,f.Y)(lt,{subject:t.subject,quoted:!0})]}),unfoldedContent:(0,f.Y)(fH,{commit:n,info:t})},r),{children:(0,f.Y)(fz,{author:n.author})}))}var fQ=function(e){var n=e.commit,t=e.info,r=e.onViewCommitClick,i=(0,tR._)(e,["commit","info","onViewCommitClick"]);return(0,f.Y)(fx,(0,nh._)((0,eg._)({marker:(0,f.Y)(fm,{type:"revert"}),header:(0,f.Y)(fG,{commit:n,onViewCommitClick:function(){return r(n.hash)},children:(0,f.FD)(fW,{children:[(0,f.Y)(a8,{text:"reverted"}),(0,f.Y)(ln,{hash:t.hash}),(0,f.Y)(lt,{subject:t.subject,quoted:!0})]})})},i),{children:(0,f.Y)(fz,{author:n.author})}))},fX=(0,eo.x)({body:[ea.wp.flex.growAndShrink(1)],virtualItem:[ea.wp.position.absolute,ea.wp.top(0),ea.wp.left(0),ea.wp.width("100%"),ea.wp.overflow("hidden")],virtualList:[ea.wp.position.relative]}),f0=function(){return 60};function f1(e){var n=e.items,t=(0,y.useRef)(null),r=(0,eP.Te)({overscan:10,count:n.length,getScrollElement:function(){return t.current},estimateSize:f0});return(0,f.Y)("div",{ref:t,css:fX.body,children:(0,f.Y)("div",{css:fX.virtualList,style:{height:"".concat(r.getTotalSize(),"px")},children:r.getVirtualItems().map(function(e){return(0,f.Y)("div",{css:fX.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:r.measureElement,children:(0,f.Y)(f2,{items:n,index:e.index})},e.key.toString())})})})}function f2(e){var n=e.items,t=e.index,r=n[t],i=0===t,o=t===n.length-1;if("boundary"===r.type)return(0,f.Y)(fT,{text:r.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},r.text);var a=n[t-1]?n[t-1].type:null,l=n[t+1]?n[t+1].type:null;return(0,f.Y)(f4,{commit:r.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:"commit"!==a,boundaryBottom:"commit"!==l,onViewCommitClick:r.onViewCommitClick},r.commit.hash)}function f4(e){var n=e.commit,t=e.onViewCommitClick,r=(0,tR._)(e,["commit","onViewCommitClick"]),i=fp(n);if(i)return t?(0,f.Y)(fK,(0,eg._)({info:i,commit:n,onViewCommitClick:t},r)):(0,f.Y)(fq,(0,eg._)({info:i,commit:n},r));var o=fl(n);return o?t?(0,f.Y)(fQ,(0,eg._)({info:o,commit:n,onViewCommitClick:t},r)):(0,f.Y)(fJ,(0,eg._)({info:o,commit:n},r)):t?(0,f.Y)(fZ,(0,eg._)({commit:n,onViewCommitClick:t},r)):(0,f.Y)(fV,(0,eg._)({commit:n},r))}var f5=(0,eo.x)({warning:[ea.wp.align.start],header:[ea.wp.fontWeight.bold]});function f3(){return(0,f.FD)(f.FK,{children:[(0,f.Y)(iX.N,{css:f5.warning,icon:(0,f.Y)(i0.A,{}),colorway:"warning",text:(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:f5.header,children:"Can't push or pull from GitHub"}),(0,f.Y)("br",{}),(0,f.Y)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),(0,f.Y)(dT,{})]})}var f7=t(21364),f6=(0,eo.x)({text:[ea.wp.flex.shrink(1)]});function f8(e){var n=e.date,t=(0,v._)((0,y.useState)(null),2),r=t[0],i=t[1];return((0,y.useEffect)(function(){if(n){var e=function(){var e=new Date,t="just now";e.getTime()-n.getTime()>6e4&&(t=(0,f7.A)(n,e,{addSuffix:!0})),i(t=t.replace(/minutes?/,"min"))};e();var t=setInterval(e,6e4);return function(){clearInterval(t),i(null)}}},[n]),r)?(0,f.FD)(V.EY,{css:f6.text,color:"dimmest",variant:"small",multiline:!1,children:["last fetched ",r]}):null}function f9(e){var n=e.hasRemoteMergeConflict,t=e.hasUnpulledCommits,r=e.hasUnpushedCommits,i=e.workTreeDirty,o=[];return i&&t&&o.push("Can't pull: you have uncommitted changes"),n&&(t||r)&&(t&&r?(i||o.push("Warning: pulling will start a merge with conflicts"),o.push("Can't push: unpulled changes must be merged first")):t?i||o.push("Warning: pulling will start a merge with conflicts"):r&&o.push("Can't push: merge conflict with remote")),o.length?(0,f.Y)(f.FK,{children:o.map(function(e){return(0,f.Y)(iX.N,{text:e,colorway:"warning",icon:(0,f.Y)(i0.A,{})},e)})}):null}var he=(0,eo.x)({divider:[ea.wp.mx(8)]});function hn(e){var n=e.ahead,t=e.behind;if(!n&&!t)return(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"Nothing to pull or push"});var r=null,i=null;if(t){var o=(0,oy.A)("commit",t);r="".concat(t," ").concat(o," to pull")}if(n){var a=(0,oy.A)("commit",n);i="".concat(n," ").concat(a," to push")}return(0,f.FD)(V.EY,{color:"dimmer",variant:"small",multiline:!1,children:[r?(0,f.Y)("span",{children:r}):null,r&&i?(0,f.Y)("span",{css:he.divider,children:"•"}):null,i?(0,f.Y)("span",{children:i}):null]})}h.ZU.Object({name:h.ZU.String(),push:h.ZU.String(),fetch:h.ZU.String()});var ht=function(e){return e.FF_ONLY="FF_ONLY",e.MERGE="MERGE",e.REBASE="REBASE",e}({});function hr(e){return hi.apply(this,arguments)}function hi(){return(hi=(0,w._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=null,[4,Promise.race([e,new Promise(function(e){return n=setTimeout(function(){rm.v4(function(e){e.setTag("gitPane",!0),rm.Cp(Error("Remote update operation timed out"))}),e({error:aN.uA.TIMEOUT})},9e4)})])];case 1:return t=r.sent(),n&&clearTimeout(n),[2,t]}})})).apply(this,arguments)}h.ZU.Enum(ht);var ho=(0,eo.x)({container:[ea.wp.flex.grow(1)],branch:[ea.wp.mr(4),ea.wp.color.foregroundDefault,ea.wp.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[ea.wp.color.foregroundDimmest],text:[ea.wp.ml(4),ea.wp.color.foregroundDimmest]});function ha(e){var n=e.upstream,t=e.remotes,r=(0,y.useMemo)(function(){return function(e,n){var t=null,r=null;if(e instanceof Map){var i=(0,dF.xM)(n),o=i[0];if(t=i[1],!o||!t)return null;var a=e.get(o);if(!a)return null;r=dN(a)}else t=n,r=dN(e);return r&&dL(r)?"".concat(r,"/tree/").concat(t):null}(t,n)},[n,t]);return(0,f.FD)(V.EY,{css:ho.container,variant:"small",multiline:!1,children:[r?(0,f.Y)("a",{css:ho.branch,href:r,target:"_blank",children:n}):(0,f.Y)("span",{css:ho.branch,children:n}),(0,f.Y)("span",{css:ho.divider,children:"•"}),(0,f.Y)("span",{css:ho.text,children:"upstream"})]})}var hl=t(85879),hs=(0,eo.x)({container:[ea.wp.borderRadius(8)],loading:[ea.wp.height(64),n$.S.backgroundPulse(),ea.wp.borderRadius(8)],header:[ea.wp.py(4),ea.wp.px(8),ea.wp.rowWithGap(8),ea.wp.align.center,ea.wp.flex.shrink(1),ea.wp.border({color:N.LU.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[ea.wp.px(8),ea.wp.pt(8),ea.wp.pb(12),ea.wp.colWithGap(8)],sync:[ea.wp.flex.grow(1)],pull:[ea.wp.pr(12),ea.wp.borderRadius(8,0,0,8),ea.wp.border({color:N.LU.outlineDefault,direction:"right"})],push:[ea.wp.borderRadius(0,8,8,0)]});function hc(e){var n=e.remotes,t=e.gotoPendingState,r=dS(),i=function(e){var n,t=e.onError,r=e.onPullConflicts,i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1],l=(0,v._)((0,y.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,y.useState)(!1),2),d=u[0],p=u[1],f=(0,v._)((0,y.useState)(!1),2),h=f[0],m=f[1],g=(0,A.A)().git,S=(0,rh.A)((n=(0,w._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,y;return(0,b.YH)(this,function(w){switch(w.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:ht.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:if((o=w.sent()).error)return[2,o];if(a=o.state,o.type!==dm.UN.NORMAL)return[2,{error:aN.uA.INVALID_STATE}];return(a===dm.Gi.DIRTY_WORKTREE||a===dm.Gi.DIRTY_INDEX)&&(i.workTreeDirty=!0),[4,e.status()];case 2:if((l=w.sent()).error)return[2,l];if(s=l.branch,c=null==(n=l.upstream)?void 0:n.branch,d=null!=(u=null==(t=l.upstream)?void 0:t.ahead)?u:0,f=null!=(p=null==(r=l.upstream)?void 0:r.behind)?p:0,!s)return[2,{error:aN.uA.HEAD_DETACHED}];if(i.ahead=d,i.behind=f,!c)return[3,7];return i.upstream=c,i.hasUnpulledCommits=f>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()];case 3:if((h=w.sent()).error)return[2,h];return i.lastFetched=h.lastFetched,[4,e.canMergeBranches(s,c)];case 4:if((m=w.sent()).error)return[2,m];if(m.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(dk.H.GITHUB))return[3,6];if(!(g=(0,dq.z5)(c)))return[2,{error:aN.uA.INVALID_REFERENCE}];return[4,e.getRemotes()];case 5:if((v=w.sent()).error)return[2,v];if(!(y=v.remotes.get(g)))return[2,{error:aN.uA.INVALID_REFERENCE}];dL(y)&&(i.needGitHubConnection=!0),w.label=6;case 6:i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?ht.MERGE:ht.REBASE),w.label=7;case 7:return[2,(0,nh._)((0,eg._)({},i),{error:null})]}})}),function(e){return n.apply(this,arguments)}));if(!S)return{type:"loading"};if(S.error||!S.upstream)return{type:"error",error:S.error};if(!S.upstream)return{type:"noUpstream"};var Y=S.upstream,_=S.hasUnpulledCommits,C=S.hasUnpushedCommits,k=S.hasRemoteMergeConflict,x=S.pullMode,D=S.canPull,E=S.canPush,R=S.workTreeDirty,I=S.needGitHubConnection,T=S.ahead,F=S.behind,P=S.lastFetched;if(I)return{type:"needGitHubConnection",upstream:Y};var L=o||s||d||h,U=!Y||I||L,N=!D||L,O=!E||L,M=!D&&!E||k||L;function H(){return(H=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(U)return[2];return a(!0),[4,hr(g.fetch())];case 1:return e=n.sent(),g.forceRefresh(),a(!1),e.error?t(e.error):dY("remote-fetched"),[2]}})})).apply(this,arguments)}function B(){return(B=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(N)return[2];return c(!0),[4,hr(g.pull({mode:x,allowConflicts:!0}))];case 1:return e=n.sent(),c(!1),e.error?t(e.error):(e.hasConflicts&&r(),g.forceRefresh(),dY("upstream-pulled")),[2]}})})).apply(this,arguments)}function z(){return(z=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(O)return[2];return p(!0),[4,hr(g.push())];case 1:return e=n.sent(),g.forceRefresh(),p(!1),e.error?t(e.error):dY("upstream-pushed"),[2]}})})).apply(this,arguments)}function W(){return(W=(0,w._)(function(){var e,n;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(M)return[2];if(m(!0),!D)return[3,2];return[4,hr(g.pull({mode:x}))];case 1:if((e=r.sent()).error)return t(e.error),m(!1),[2];dY("upstream-pulled"),r.label=2;case 2:if(!E)return[3,4];return[4,g.push()];case 3:if((n=r.sent()).error)return t(n.error),m(!1),[2];dY("upstream-pushed"),r.label=4;case 4:return g.forceRefresh(),m(!1),[2]}})})).apply(this,arguments)}return{type:"remote",fetch:function(){return H.apply(this,arguments)},fetching:o,fetchDisabled:U,lastFetched:P,pull:function(){return B.apply(this,arguments)},pulling:s,pullDisabled:N,pullMode:x,canPull:D,push:function(){return z.apply(this,arguments)},pushing:d,pushDisabled:O,canPush:E,sync:function(){return W.apply(this,arguments)},syncing:h,syncDisabled:M,upstream:Y,hasUnpulledCommits:_,hasUnpushedCommits:C,hasRemoteMergeConflict:k,workTreeDirty:R,ahead:T,behind:F}}({onError:r,onPullConflicts:t}),o="error"===i.type?i.error:null;return((0,y.useEffect)(function(){o&&r(o)},[o,r]),"loading"===i.type)?(0,f.Y)(ek.ui,{css:hs.loading,elevated:!0}):"error"===i.type||"noUpstream"===i.type?null:"needGitHubConnection"===i.type?(0,f.FD)(ek.ui,{css:hs.container,elevated:!0,children:[(0,f.FD)(j.S,{css:hs.header,children:[(0,f.Y)(ha,{upstream:i.upstream,remotes:n}),(0,f.Y)(M.$n,{css:hs.fetch,text:"Fetch",iconLeft:(0,f.Y)(oU.A,{}),disabled:!0,variant:"outlined",size:"small"})]}),(0,f.Y)(j.S,{css:hs.body,children:(0,f.Y)(f3,{})})]}):(0,f.FD)(ek.ui,{css:hs.container,elevated:!0,children:[(0,f.FD)(j.S,{css:hs.header,children:[(0,f.Y)(ha,{upstream:i.upstream,remotes:n}),(0,f.Y)(f8,{date:i.lastFetched}),(0,f.Y)(M.$n,{css:hs.fetch,text:"Fetch",iconLeft:i.fetching?(0,f.Y)(tw.A,{}):(0,f.Y)(oU.A,{}),onClick:i.fetch,loading:i.fetching,disabled:i.fetchDisabled,variant:"outlined",size:"small"})]}),(0,f.FD)(j.S,{css:hs.body,children:[(0,f.Y)(f9,{hasRemoteMergeConflict:i.hasRemoteMergeConflict,hasUnpulledCommits:i.hasUnpulledCommits,hasUnpushedCommits:i.hasUnpushedCommits,workTreeDirty:i.workTreeDirty}),(0,f.Y)(hn,{ahead:i.ahead,behind:i.behind}),(0,f.FD)(j.S,{grow:!0,row:!0,gap:8,children:[(0,f.Y)("div",{css:hs.sync,children:(0,f.Y)(Z.m_,{tooltip:"Pull & push the latest changes",children:(0,f.Y)(M.$n,{css:hs.sync,text:"Sync with Remote",iconLeft:i.syncing?(0,f.Y)(tw.A,{}):(0,f.Y)(fj.A,{rotate:90}),onClick:i.sync,loading:i.syncing,disabled:i.syncDisabled,size:"small"})})}),(0,f.FD)(j.S,{row:!0,children:[(0,f.Y)(M.$n,{css:hs.pull,text:"Pull",iconLeft:i.pulling?(0,f.Y)(tw.A,{}):(0,f.Y)(eM.A,{}),onClick:i.pull,loading:i.pulling,disabled:i.pullDisabled,size:"small"}),(0,f.Y)(M.$n,{css:hs.push,text:"Push",iconLeft:i.pushing?(0,f.Y)(tw.A,{}):(0,f.Y)(hl.A,{}),onClick:i.push,loading:i.pushing,disabled:i.pushDisabled,size:"small"})]})]})]})]})}var hu=(0,eo.x)({remoteUrl:[{border:"none"},ea.wp.height("auto"),ea.wp.py(4),ea.wp.px(8)]});function hd(e){var n=e.branch,t=e.remotes,r=(0,v._)((0,y.useMemo)(function(){if(n.type===dK.xx.LOCAL)return[null,null,null];var e=t.get(n.remote);if(!e)return[null,null,null];var r=dN(e),i=dO(e),o=dL(r);return[r,i,o]},[n,t]),3),i=r[0],o=r[1],a=r[2];return i&&o?(0,f.Y)(re.v,{css:hu.remoteUrl,text:o,href:i,target:"_blank",iconLeft:a?(0,f.Y)(dI.A,{}):void 0,iconRight:(0,f.Y)(tV.A,{}),variant:"outlined",size:"small"}):null}var hp=(0,nW.i7)({from:{opacity:0},to:{opacity:1}}),hf=(0,eo.x)({loadingView:[{animation:"".concat(hp," 0.125s 0.25s linear backwards")},ea.wp.flex.grow(1),ea.wp.display.flex,ea.wp.center]});function hh(){return(0,f.Y)(j.S,{css:hf.loadingView,children:(0,f.Y)(tw.A,{size:48})})}var hm=(0,eo.x)({view:[],sectionContainer:[ea.wp.colWithGap(8)],section:[ea.wp.pt(8),ea.wp.pb(16),ea.wp.px(8),ea.wp.colWithGap(8),ea.wp.border({color:N.LU.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[],reviewChangesHeader:[],headerText:[ea.wp.fontWeight.medium],replMergingHeader:[ea.wp.rowWithGap(8),ea.wp.align.center],switchToBranch:[ea.wp.p(4),ea.wp.flex.row,ea.wp.align.center,ea.wp.justify.spaceBetween,ea.wp.mt(0),ea.wp.mb(0)]});function hg(e){var n,t,r,i,o,a=e.status,l=e.remotes,s=e.branch,c=e.onStagedFileClick,u=e.onViewCommitClick,d=e.onViewSettingsClick,p=e.gotoPendingState,h=e.current,m=void 0!==h&&h,g=e.performPaneOperation,S=m?null==a||null==(i=a.upstream)?void 0:i.behind:void 0,Y=m?null==a||null==(o=a.upstream)?void 0:o.ahead:void 0,_=(n=dS(),r=(0,rh.A)((t=(0,w._)(function(e){var n,t,r,i,o,a,l,c,u;return(0,b.YH)(this,function(d){switch(d.label){case 0:return[4,e.isInitialized()];case 1:if((n=d.sent()).error)return rg({context:"use-branch-commits",gitService:e,result:n}),[2,{error:n.error}];if(!n.initialized)return[2,{log:[],onlyRemote:[],onlyLocal:[],error:null}];if(!s)return[2,{error:null}];if(!(!s.tracking||0===S&&0===Y))return[3,3];return t=(0,dq.qK)(s,!0),[4,e.log({max:100,revRange:t})];case 2:if((r=d.sent()).error)return rg({context:"use-branch-commits",gitService:e,result:r,data:{branch:s,behind:S,ahead:Y,revision:t}}),[2,r];return[2,{log:r.commits,error:null}];case 3:return i=(0,dq.qK)(s),[4,Promise.all([e.log({max:100,revRange:s.name}),e.log({max:100,revRange:"".concat(s.name,"..").concat(i)}),e.log({max:100,revRange:"".concat(i,"..").concat(s.name)})])];case 4:if(o=d.sent(),l=(a=(0,v._)(o,3))[0],c=a[1],u=a[2],l.error)return rg({context:"use-branch-commits-log",gitService:e,result:l,data:{branch:s,behind:S,ahead:Y,remoteBranch:i}}),[2,{error:l.error}];if(c.error)return rg({context:"use-branch-commits-only-remote",gitService:e,result:c,data:{branch:s,behind:S,ahead:Y,remoteBranch:i}}),[2,{error:c.error}];if(u.error)return rg({context:"use-branch-commits-only-local",gitService:e,result:u,data:{branch:s,behind:S,ahead:Y,remoteBranch:i}}),[2,{error:u.error}];return[2,{log:l.commits,onlyRemote:c.commits,onlyLocal:u.commits,error:null}]}})}),function(e){return t.apply(this,arguments)}),[s,S,Y]),(0,y.useMemo)(function(){if(!r)return null;if(r.error)return n(r.error),{error:r.error};var e=r.log,t=r.onlyRemote,i=r.onlyLocal;return t||i?(e&&(e=pF(e,null!=t?t:[],null!=i?i:[])),{log:e,onlyRemote:t,onlyLocal:i,error:null}):{log:e,error:null}},[n,r])),A=!!l&&l.size>0,C=(null==s?void 0:s.type)===dK.xx.LOCAL,k=(0,y.useMemo)(function(){if(!_||_.error)return[];var e=[],n=_.log,t=void 0===n?[]:n,r=_.onlyRemote,i=void 0===r?[]:r,o=_.onlyLocal,a=void 0===o?[]:o,l=t.length>0,s=i.length>0,c=a.length>0;return s&&(e.push({type:"boundary",text:"Not pulled from remote"}),e.push.apply(e,(0,em._)(hv(i,u)))),c&&(e.push({type:"boundary",text:"Not pushed to remote"}),e.push.apply(e,(0,em._)(hv(a,u)))),l&&((s||c)&&e.push({type:"boundary",text:"Up to date with remote"}),e.push.apply(e,(0,em._)(hv(t,u)))),e},[_,u]);return s?(0,f.FD)(j.S,{grow:!0,pt:4,pb:8,px:4,gap:8,children:[(0,f.FD)(j.S,{gap:8,children:[C?(0,f.Y)(j.S,{css:hm.section,children:(0,f.Y)(pT,{performPaneOperation:g,branch:s,onViewSettingsClick:d})}):null,m&&!C&&l&&A?(0,f.FD)(j.S,{css:hm.section,children:[(0,f.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(V.EY,{css:hm.headerText,multiline:!1,children:"Remote Updates"}),(0,f.Y)(hd,{branch:s,remotes:l})]}),(0,f.Y)(hc,{remotes:l,gotoPendingState:p})]}):null,m&&a?(0,f.FD)(j.S,{css:hm.section,children:[(0,f.Y)(j.S,{row:!0,gap:8,align:"center",children:(0,f.Y)(V.EY,{css:hm.headerText,multiline:!1,children:"Commit"})}),(0,f.Y)(fr,{status:a,onStagedFileClick:c})]}):null]}),_?(0,f.Y)(f1,{items:k}):(0,f.Y)(hh,{})]}):(0,f.Y)("div",{children:"No branch"})}function hv(e,n){return e.map(function(e){return{type:"commit",commit:e,onViewCommitClick:n}})}function hy(){return(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,f.Y)(V.EY,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}let hw=function(e){var n,t=(0,rh.A)((n=(0,w._)(function(n){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,n.isInitialized()];case 1:if((t=o.sent()).error)return[2,{error:t.error}];if(!t.initialized)return[2,{error:aN.uA.NOT_INITIALIZED}];return[4,n.log({max:1,revRange:e})];case 2:if((r=o.sent()).error)return[2,{error:r.error}];if(0===r.commits.length)return[2,{error:aN.uA.NO_COMMITS}];return[2,{commit:null!=(i=r.commits[0])?i:null,error:null}]}})}),function(e){return n.apply(this,arguments)}),[e]);return(0,y.useMemo)(function(){return t?t.error?{error:t.error}:t:null},[t])},hb=function(e){var n,t=dS(),r=(0,rh.A)((n=(0,w._)(function(n){var t,r,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return i=e.hash,[4,n.getFilesForCommit(i)];case 1:if(null==(o=s.sent())?void 0:o.error)return rg({context:"use-commit-diffs",gitService:n,result:o,data:{commit:e}}),[2,{error:o.error,diffs:[]}];return a=(null==o||null==(t=o.files)?void 0:t.filter(function(e){return["ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],l=(null==o||null==(r=o.files)?void 0:r.filter(function(e){return["DELETED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],[2,{error:null,diffs:Array.from(new Set((0,em._)(a).concat((0,em._)(l)))).map(function(e){var n,t;return{id:(0,nj.A)(),status:e.type,loading:!1,initial:{filename:(0,tg.WP)(null!=(n=e.originalPath)?n:e.path),path:(0,tg._6)(null!=(t=e.originalPath)?t:e.path),content:""},final:{filename:(0,tg.WP)(e.path),path:(0,tg._6)(e.path),content:""}}})}]}})}),function(e){return n.apply(this,arguments)}),[e]);return(0,y.useMemo)(function(){return r?r.error?(t(r.error),null):r:null},[t,r])};var hS=function(){var e=(0,w._)(function(e,n,t,r){var i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return i=""===n?t:"".concat(n,"/").concat(t),[4,e.getFileContents({path:i,revision:r,convertToBase64:(0,tg.FN)(i)})];case 1:if((o=l.sent()).error)throw o.error;return[2,null!=(a=null==o?void 0:o.content)?a:""]}})});return function(n,t,r,i){return e.apply(this,arguments)}}(),hY=function(){var e=(0,w._)(function(e,n,t){var r,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return i=n.hash,[4,hS(e,t.final.path,t.final.filename,i)];case 1:if(o=l.sent(),a="",!(!n.grafted&&(null==(r=n.parents)?void 0:r.length)))return[3,3];return[4,hS(e,t.initial.path,t.initial.filename,"".concat(i,"^"))];case 2:a=l.sent(),l.label=3;case 3:return[2,(0,nh._)((0,eg._)({},t),{loading:!1,initial:(0,nh._)((0,eg._)({},t.initial),{content:a}),final:(0,nh._)((0,eg._)({},t.final),{content:o})})]}})});return function(n,t,r){return e.apply(this,arguments)}}(),h_=t(17767),hA=t(53307),hC=(0,eo.x)({splitOrUnisonContainer:[ea.wp.flex.wrap],emphasizedText:[ea.wp.fontWeight.medium],buttonGroupItem:[ea.wp.width(64),ea.wp.height(32)],textContainer:[ea.wp.mt(8),ea.wp.overflow("break-all")]}),hk=function(e){var n=e.children;return(0,f.Y)(j.S,{css:hC.splitOrUnisonContainer,gap:8,align:"center",justify:"space-between",row:!0,children:n})},hx=function(e){var n=e.value,t=e.onChange;return(0,f.FD)(rL.e2,{name:"SplitOrUnifiedDiff",value:n,onChange:t,row:!0,children:[(0,f.Y)(j.S,{css:hC.buttonGroupItem,children:(0,f.Y)(rL.$O,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,f.Y)(j.S,{css:hC.buttonGroupItem,children:(0,f.Y)(rL.$O,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},hD=function(e){var n=e.value,t=e.onChange;return(0,f.Y)(eN.K0,{alt:"Markdown"===n?"View Source":"View Markdown",onClick:function(){return t("Markdown"===n?"Source":"Markdown")},children:"Markdown"===n?(0,f.Y)(h_.A,{}):(0,f.Y)(hA.A,{})})},hE=function(e){var n=e.files,t=e.totalFiles;return n===t?(0,f.FD)(V.EY,{css:hC.textContainer,children:["Showing"," ",(0,f.FD)("span",{css:hC.emphasizedText,children:[t," changed ",(0,oy.A)("file",t),"."]})]}):(0,f.FD)(V.EY,{css:hC.textContainer,children:["Showing"," ",(0,f.FD)("span",{css:hC.emphasizedText,children:[n," of ",t," changed ",(0,oy.A)("file",t),"."]})]})},hR=function(e){var n=e.query,t=e.setQuery,r=e.totalDiffs,i=e.diffs,o=e.splitOrUnified,a=e.setSplitOrUnified,l=e.folded,s=e.setFolded,c=(0,y.useMemo)(function(){return i.filter(function(e){var t="".concat(e.final.path,"/").concat(e.final.filename),r="".concat(e.initial.path,"/").concat(e.initial.filename);return t.toLowerCase().includes(n.toLowerCase())||r.toLowerCase().includes(n.toLowerCase())})},[n,i]);return(0,f.FD)(j.S,{gap:16,children:[(0,f.Y)(d6.I,{value:n,onChange:function(e){t(e.target.value)},onClear:function(){t("")},loading:!1,placeholder:"Filter changed files"}),(0,f.FD)(hk,{children:[(0,f.Y)(hE,{files:c.length,totalFiles:r}),i.length>0?(0,f.Y)(hx,{value:o,onChange:function(e){return a(e)}}):null]}),c.map(function(e){var n;return(0,f.Y)(rj,{folded:null==(n=l[e.id])||n,setFolded:function(n){return s(e.id,n)},diff:e,splitOrUnified:o},e.id)})]})},hI=(0,eo.x)({metaContainer:[ea.wp.flex.wrap]});let hT=function(e){var n=e.author,t=e.committer,r=fO(t,n),i=fM(t.date,n.date);return(0,f.FD)(j.S,{css:hI.metaContainer,row:!0,gap:4,align:"center",children:[r&&i?(0,f.FD)(f.FK,{children:[(0,f.Y)(d3,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,f.Y)(V.EY,{variant:"small",children:"authored"}),(0,f.Y)(eT.Dc,{date:n.date,textColor:"dimmest",textVariant:"small"}),(0,f.Y)(V.EY,{variant:"small",children:"and"})]}):null,r&&!i?(0,f.FD)(f.FK,{children:[(0,f.Y)(d3,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,f.Y)(V.EY,{variant:"small",children:"authored"}),(0,f.Y)(V.EY,{variant:"small",children:"and"})]}):null,(0,f.Y)(d3,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),!r&&i?(0,f.FD)(f.FK,{children:[(0,f.Y)(V.EY,{variant:"small",children:"authored "}),(0,f.Y)(eT.Dc,{date:n.date,textColor:"dimmest",textVariant:"small"}),(0,f.Y)(V.EY,{variant:"small",children:"and "})]}):null,(0,f.Y)(V.EY,{variant:"small",children:"committed"}),(0,f.Y)(eT.Dc,{date:t.date,textColor:"dimmest",textVariant:"small"})]})};var hF=(0,eo.x)({dullText:[ea.wp.color.foregroundDimmest],tooltipContainer:[ea.wp.display.inlineBlock]}),hP=function(e){var n=e.onViewCommitClick,t=e.hash;return(0,f.Y)("span",{css:hF.tooltipContainer,children:(0,f.Y)(Z.m_,{tooltip:"View commit",children:(0,f.Y)("button",{css:[ea.wp.reset.button,ea.wp.linkStyle,ea.wp.fontWeight.medium],onClick:function(){return n(t)},children:t.slice(0,7)})})})};let hL=function(e){var n=e.parents,t=e.grafted,r=e.onViewCommitClick;return(0,f.FD)(V.EY,{variant:"small",children:[(0,f.FD)("span",{css:hF.dullText,children:[t?"Grafted with ":null,n.length," ",(0,oy.A)("parent",n.length)," "]}),0===n.length?null:n.map(function(e,t){return(0,f.FD)(y.Fragment,{children:[(0,f.Y)(hP,{hash:e,onViewCommitClick:r}),t===n.length-1?"":(0,f.Y)("span",{css:hF.dullText,children:", "})]},e)})]})},hU=function(e){var n=e.source,t=e.target;return t?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"branch"}),(0,f.Y)(lo,{name:n}),(0,f.Y)("span",{children:" into "}),(0,f.Y)(lo,{name:t})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"branch"}),(0,f.Y)(lo,{name:n})]})};var hN="gitCommitSubject",hO=(0,nW.AH)([ea.wp.display.inline,{fontSize:"inherit",fontWeight:"inherit",lineHeight:"inherit"}]),hM=(0,eo.x)({header:[(u={},(0,g._)(u,"& .".concat(hN),hO),(0,g._)(u,"& .".concat(hN," > div"),hO),(0,g._)(u,"& .".concat(hN," p"),hO),u)],markerContainer:[ea.wp.display.inlineFlex,ea.wp.mr(4)],mergeContainer:[ea.wp.rowWithGap(4),ea.wp.flex.row,ea.wp.flex.wrap,ea.wp.align.stretch,ea.wp.flex.shrink(0)]});let hH=function(e){var n=e.merge,t=e.revert,r=e.subject,i=e.remotes,o=e.onViewCommitClick,a=(0,y.useMemo)(function(){var e,r=null;if(((null==n?void 0:n.type)==="pull-request"?r=n.id:t&&(null==t?void 0:t.pr)&&(r=t.pr),r)&&i){var o=i.get("origin");if(!o){var a=Array.from(i.values());if(1!==a.length)return;o=a[0]}return null!=(e=dO(o))?e:void 0}},[n,i,t]);return(0,f.FD)(V.Y9,{level:2,variant:"subheadDefault",multiline:!0,css:hM.header,children:[n?(0,f.FD)("span",{css:hM.mergeContainer,children:[(0,f.Y)("span",{css:hM.markerContainer,children:(0,f.Y)(fm,{type:"merge"})}),(0,f.Y)(a9,{text:"merged"}),(null==n?void 0:n.type)==="pull-request"?(0,f.FD)(f.FK,{children:["PR ",(0,f.Y)(le,{id:n.id,hash:!0}),(null==t?void 0:t.pr)?(0,f.FD)(f.FK,{children:[(0,f.Y)(a8,{text:"reverts"})," ",(0,f.Y)(le,{id:t.pr,hash:!0})]}):null]}):null,(null==n?void 0:n.type)==="branch"?(0,f.Y)(f.FK,{children:(0,f.Y)(hU,{source:n.source,target:n.target})}):null]}):null,t&&!n?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:hM.markerContainer,children:(0,f.Y)(fm,{type:"revert"})}),(0,f.Y)(a8,{text:"reverted"})," ",(0,f.Y)("button",{css:[ea.wp.reset.button,ea.wp.linkStyle,ea.wp.fontWeight.medium],onClick:function(){(null==t?void 0:t.hash)!==void 0&&o(t.hash)},children:t.hash.slice(0,7)})," - "]}):null,(0,f.Y)(lt,{className:hN,subject:r,remoteName:a})]})};var hB=(0,eo.x)({splitContainer:[ea.wp.display.flex,ea.wp.flex.row,ea.wp.flex.shrink(1),ea.wp.flex.wrap,ea.wp.justify.spaceBetween,ea.wp.maxWidth("100%"),ea.wp.border({color:N.LU.outlineDimmest,direction:"bottom"}),ea.wp.pb(16)]});let hz=function(e){var n,t,r=e.git,i=e.commit,o=e.info,a=e.onViewCommitClick,l=void 0===a?function(){}:a,s=e.remotes,c=e.status,u=(0,y.useMemo)(function(){return(0,pZ.b)(c?c.changes.map(function(e){return e.path}):[])},[c]),d=(0,y.useMemo)(function(){if(!c)return[];var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=c.changes[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.type.worktree!==rR.PX.UNMODIFIED&&e.push(a)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e},[c]),p=(0,nq.A)().showConfirm,h=dS(),m=(0,v._)((0,y.useState)(!1),2),g=m[0],S=m[1],Y=(0,v._)((0,y.useState)(""),2),_=Y[0],A=Y[1],C=(0,v._)((0,y.useState)("Split"),2),k=C[0],x=C[1],D=(0,v._)((0,y.useState)("Markdown"),2),E=D[0],R=D[1],I=(0,v._)((0,y.useState)({}),2),T=I[0],F=I[1],P=(0,v._)((0,y.useState)([]),2),L=P[0],U=P[1],N=fL(i,o),O=N.hideBody,M=N.merge,H=N.revert,B=i.hash,z=i.subject,W=i.body,G=i.committer,Z=i.author,q=i.grafted,K=null!=(t=i.parents)?t:[],$=hb(i),J=(0,y.useCallback)((0,w._)(function(){var e,n,t,o=arguments;return(0,b.YH)(this,function(a){switch(a.label){case 0:return e=!(o.length>0)||void 0===o[0]||o[0],[4,r.restoreFiles(e,i.hash)];case 1:if((n=a.sent()).error)return[3,3];return[4,r.status()];case 2:return(t=a.sent()).error?(h(t.error),rg({context:"commit-view",gitService:r,result:t,data:{files:e,commit:i.hash}})):p("Restored commit!"),r.forceRefresh(),[3,4];case 3:h(n.error),rg({context:"commit-view",gitService:r,result:n,data:{files:e,commit:i.hash}}),a.label=4;case 4:return[2]}})}),[i.hash,r,h,p]),Q=p6(u),X=Q.openRestoreConfirmationModal,ee=Q.restoreConfirmationModal,en=(0,y.useCallback)((0,w._)(function(){var e,n,t,r=arguments;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!0!==(e=!(r.length>0)||void 0===r[0]||r[0]))return[3,6];if(S(!0),0!==d.length)return[3,2];return[4,J()];case 1:return i.sent(),S(!1),[2];case 2:return[4,X(d)];case 3:if(!i.sent())return[3,5];return[4,J()];case 4:i.sent(),i.label=5;case 5:return S(!1),[3,10];case 6:if("string"==typeof e){if(!(t=d.find(function(n){return n.path===e})))throw S(!1),Error("Could not find file in worktree list");n=[t]}else n=d.filter(function(n){return e.includes(n.path)});return[4,X(n)];case 7:if(!i.sent())return[3,9];return[4,J(e)];case 8:i.sent(),i.label=9;case 9:S(!1),i.label=10;case 10:return[2]}})}),[X,J,d]);(0,y.useEffect)(function(){var e;U(null!=(e=null==$?void 0:$.diffs.map(function(e){return(0,nh._)((0,eg._)({},e),{loading:!0})}))?e:[])},[$]),(0,y.useEffect)(function(){null!==$&&$.error&&h($.error)},[$,h]);var et=(n=(0,w._)(function(e,n){var t,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(F(function(t){var r=(0,eg._)({},t);return r[e]=n,r}),!(t=L.find(function(n){return n.id===e})))return h(aN.uA.INVALID_STATE),rg({context:"commit-view",gitService:r,result:{error:aN.uA.INVALID_STATE},data:{diffId:e}}),[2];if(!(!n&&t.loading))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,hY(r,i,t)];case 2:return o=l.sent(),U(function(n){var t=(0,em._)(n),r=t.findIndex(function(n){return n.id===e});return t[r]=o,t}),[3,4];case 3:return rg({context:"commit-view",gitService:r,result:a=l.sent(),data:{diffId:e}}),h(a),[2];case 4:return[2]}})}),function(e,t){return n.apply(this,arguments)});return(0,f.FD)(j.S,{p:16,gap:16,children:[(0,f.Y)(hH,{remotes:s,merge:M,revert:H,subject:z,onViewCommitClick:l}),(0,f.FD)(hk,{children:[(0,f.FD)(j.S,{row:!0,gap:8,shrink:!0,align:"start",children:[(0,f.Y)(fU,{hash:B}),(0,f.Y)(fN,{onClick:function(){return en()},text:"Restore All",loading:g})]}),O?null:(0,f.Y)(hD,{value:E,onChange:function(e){R(e)}})]}),O?null:(0,f.Y)(lr,{body:W,view:E}),(0,f.FD)(j.S,{css:hB.splitContainer,children:[(0,f.Y)(hT,{author:Z,committer:G}),(0,f.Y)(hL,{parents:K,grafted:q,onViewCommitClick:l})]}),null!==M?(0,f.Y)(V.EY,{variant:"small",color:"dimmest",children:"There is more than one parent, diffing against the first parent."}):null,null===$?(0,f.Y)(hh,{}):(0,f.Y)(hR,{query:_,setQuery:A,totalDiffs:$.diffs.length,diffs:L,splitOrUnified:k,setSplitOrUnified:x,folded:T,setFolded:et}),ee]})};function hW(e){var n=e.hash,t=e.remotes,r=e.onViewCommitClick,i=e.switchMode,o=e.status,a=(0,A.A)().git,l=dS(),s=hw(null!=n?n:"");if(null===s)return(0,f.Y)(hh,{});if(s.error)return s.error===aN.uA.NOT_INITIALIZED?i({type:lY.C.CURRENT_BRANCH}):(l(s.error),(s.error===aN.uA.UNKNOWN||s.error===aN.uA.UNKNOWN_NOT_GIT)&&rg({context:"commit-view",gitService:a,result:s,data:{hash:n}})),null;if(null===s.commit)return l(aN.uA.UNKNOWN),null;var c=s.commit,u=fp(c)||fl(c);return(0,f.Y)(hz,{git:a,commit:c,info:u,onViewCommitClick:r,remotes:t,status:o})}var hG=(0,eo.x)({branch:[ob.b.nofill,ea.wp.py(12),ea.wp.px(8),ea.wp.colWithGap(2),ea.wp.justify.center,ea.wp.borderRadius(8),ea.wp.flex.shrink(1)]});function hV(e){var n=e.branch,t=e.current,r=e.onClick;return(0,f.FD)(j.S,{css:hG.branch,tabIndex:0,role:"button","aria-label":"Switch to branch ".concat((0,dq.qK)(n,!0)),onClick:r,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==r||r())},children:[(0,f.Y)(V.EY,{multiline:!1,children:(0,f.Y)(lo,{name:n.name,remote:n.type===dK.xx.REMOTE?n.remote:null,current:void 0!==t&&t,onClick:r,icon:!0})}),(0,f.Y)(hZ,{branch:n})]})}function hZ(e){var n=e.branch;return(0,f.FD)(j.S,{shrink:!0,row:!0,gap:8,align:"center",children:[(0,f.Y)(d3,{name:n.commit.author.name,email:n.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,f.Y)(eT.Dc,{date:n.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var hj=(0,eo.x)({expandButton:[{verticalAlign:"middle"},ea.wp.justify.spaceBetween],branchListContainer:[ea.wp.display.flex],topRowInteractive:[{verticalAlign:"middle"},ea.wp.justify.spaceBetween,ea.wp.borderRadius(8,8,0,0)],branchList:[ea.wp.borderRadius(8)],branchListFoldable:[ea.wp.borderRadius(0,0,8,8)]});function hq(e){var n=e.name,t=e.branches,r=e.current,i=void 0===r?null:r,o=e.foldable,a=void 0!==o&&o,l=e.folded,s=e.switchBranch,c=(0,v._)((0,y.useState)(!!a&&void 0!==l&&l),2),u=c[0],d=c[1],p=(0,y.useMemo)(function(){return t.map(function(e){return(0,f.Y)(hV,{branch:e,current:(0,dg.F)(e,i),onClick:function(){return s(e)}},(0,dq.fn)(e))})},[t,i,s]);return u?(0,f.Y)(M.$n,{css:hj.expandButton,text:n,iconRight:(0,f.Y)(rN.A,{}),onClick:function(){return d(!1)},size:"big"}):a?(0,f.FD)(j.S,{css:hj.branchListContainer,children:[(0,f.Y)(M.$n,{css:hj.topRowInteractive,text:n,iconRight:(0,f.Y)(rO.A,{}),onClick:function(){return d(!0)},size:"big"}),(0,f.Y)(ek.ui,{css:hj.branchListFoldable,elevated:!0,children:p})]}):(0,f.FD)(j.S,{css:hj.branchListContainer,children:[(0,f.Y)(j.S,{p:4,row:!0,align:"center",justify:"space-between",children:(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:n})}),(0,f.Y)(ek.ui,{css:hj.branchList,elevated:!0,children:p})]})}var hK=(0,eo.x)({container:[ea.wp.borderRadius(8)],button:[ea.wp.flex.grow(1)],inputDisabled:[{opacity:.75}]});function h$(){var e=(0,v._)((0,y.useState)(!0),2),n=e[0],t=e[1],r=(0,v._)((0,y.useState)(""),2),i=r[0],o=r[1],a=(0,v._)((0,y.useState)(!1),2),l=a[0],s=a[1],c=dS(),u=(0,A.A)().git;function d(){t(!0),o("")}function p(){return h.apply(this,arguments)}function h(){return(h=(0,w._)(function(){var e;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(n||!i||l)return[2];return s(!0),[4,u.createBranch({name:i,checkout:!0})];case 1:return(e=r.sent()).error?(c(e.error),s(!1)):(u.forceRefresh(),s(!1),o(""),t(!0),dY("branch-created")),[2]}})})).apply(this,arguments)}if(n)return(0,f.Y)(M.$n,{text:"Create Branch",iconLeft:(0,f.Y)(tq.A,{}),onClick:function(){return t(!1)}});var m=!i||!(0,dq.eB)(i);return(0,f.FD)(ek.ui,{css:hK.container,p:8,gap:8,elevated:!0,children:[(0,f.Y)(hJ,{value:i,onChange:o,onSubmit:p,onCancel:d,disabled:l}),(0,f.FD)(j.S,{row:!0,gap:4,children:[(0,f.Y)(M.$n,{css:hK.button,text:"Cancel",onClick:d,disabled:l}),(0,f.Y)(M.$n,{css:hK.button,text:"Create Branch",colorway:"primary",iconLeft:(0,f.Y)(tq.A,{}),onClick:p,loading:l,disabled:m})]})]})}function hJ(e){var n=e.value,t=e.disabled,r=e.onChange,i=e.onSubmit,o=e.onCancel;function a(e){(0,dq.Uy)(e)&&(null==r||r(e))}return(0,f.Y)(B.pd,{value:n,css:t?hK.inputDisabled:void 0,disabled:t,placeholder:"Enter a name for your new branch",onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){var t=e.key,r=function(){return e.preventDefault()};switch(t){case"Enter":null==i||i(),r();break;case"Escape":null==o||o(),r();break;case" ":if(""===n){r();break}a(n+"-"),r()}},onBlur:function(){""===n&&(null==o||o())},autoFocus:!0})}function hQ(e){var n,t,r=e.currentBranch,i=e.switchMode,o=dS(),a=(0,A.A)().git,l=(0,v._)((0,y.useState)(null),2),s=l[0],c=l[1],u=(0,rh.A)((n=(0,w._)(function(e){var n,t,r,i,a,l,s,c,u,d,p,f,h,m,g,v,y,w,S;return(0,b.YH)(this,function(b){switch(b.label){case 0:return[4,e.listBranches()];case 1:if((n=b.sent()).error)return o(n.error),rg({context:"dashboard-view",gitService:e,result:n}),[2,n];return[4,e.findDefaultBranches()];case 2:if((t=b.sent()).error)return o(t.error),[2,t];r=n.branches,i=new Set,a=!0,l=!1,s=void 0;try{for(c=function(){var e=d.value,n=r.find(function(n){return(0,dq.CC)(n,e)});n&&i.add(n)},u=t.refs[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)c()}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}p=Date.now()-5184e6,f=[],h=[],m=!0,g=!1,v=void 0;try{for(y=r[Symbol.iterator]();!(m=(w=y.next()).done);m=!0)S=w.value,i.has(S)||(S.commit.author.date>p?f.push(S):h.push(S))}catch(e){g=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw v}}return[2,{active:f,stale:h,important:Array.from(i),error:null}]}})}),function(e){return n.apply(this,arguments)}),[o]),d=(t=(0,w._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(null!==s)return[2];return(0,dq.CC)(r,e)&&i({type:lY.C.CURRENT_BRANCH}),c(e),[4,a.switchBranch(e)];case 1:return(n=t.sent()).error?(o(n.error),rg({context:"dashboard-view",gitService:a,result:n,data:{branch:e.name}}),c(null)):(a.forceRefresh(),dY("branch-switched")),[2]}})}),function(e){return t.apply(this,arguments)});if((0,y.useEffect)(function(){null!==s&&(0,dq.CC)(r,s)&&(c(null),i({type:lY.C.CURRENT_BRANCH}))},[r,s,i]),!u||null!==s)return(0,f.Y)(hh,{});if(u.error)return(0,f.Y)("div",{children:u.error});var p=u.active,h=u.stale,m=u.important;return(0,f.Y)(j.S,{gap:8,children:(0,f.FD)(j.S,{pb:8,px:8,gap:16,children:[r?(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(hq,{branches:[r],current:r,name:"Current Branch",switchBranch:d}),(0,f.Y)(h$,{})]}):null,(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,css:hm.switchToBranch,children:"Switch Branch"}),0===m.length?null:(0,f.Y)(hq,{branches:m,current:r,name:"Important",switchBranch:d,foldable:!0}),0===p.length?null:(0,f.Y)(hq,{branches:p,current:r,name:"Active",switchBranch:d,foldable:!0}),0===h.length?null:(0,f.Y)(hq,{branches:h,current:r,name:"Stale",switchBranch:d,foldable:!0,folded:!0})]})})}function hX(){return(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,f.Y)(V.EY,{multiline:!1,children:"Please checkout a branch."})]})}function h0(){return(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{multiline:!0,children:"Unsupported state: your index is currently locked. This can happen if multiple git processes are running operations at the same time."}),(0,f.Y)(V.EY,{multiline:!0,children:"Please resolve the issue. If you are sure you do not have git operations running, you can delete your .git/index.lock file."})]})}function h1(e){var n=e.files,t=e.uniquePathMap,r=e.onFileClick,i=[];if(n instanceof Map){var o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=(0,v._)(s.value,2),d=u[0],p=u[1],h=t.get(d);i.push({path:d,prefix:h,resolved:p})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}else{var m=!0,g=!1,y=void 0;try{for(var w,b=n[Symbol.iterator]();!(m=(w=b.next()).done);m=!0){var S=w.value,Y=t.get(S);i.push({path:S,prefix:Y,resolved:!0})}}catch(e){g=!0,y=e}finally{try{m||null==b.return||b.return()}finally{if(g)throw y}}}return(0,f.Y)(j.S,{gap:4,children:i.map(function(e){var n=e.path,t=e.prefix,i=e.resolved;return(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,f.FD)(j.S,{grow:!0,align:"center",row:!0,gap:8,children:[(0,f.Y)(ty.A,{path:n}),(0,f.Y)(V.EY,{multiline:!1,children:(0,f.Y)(la,{path:n,prefix:t,onClick:function(){return r({path:n,type:"conflict"})}})})]}),i?(0,f.Y)(oJ.A,{color:N.LU.greenStronger}):(0,f.Y)(i0.A,{color:N.LU.orangeStronger})]},n)})})}function h2(e){var n=e.hasConflicts?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:ea.wp.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,f.Y)("br",{}),(0,f.Y)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:ea.wp.fontWeight.medium,children:"You are in the middle of a merge."}),(0,f.Y)("br",{}),(0,f.Y)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,f.Y)(iX.N,{colorway:"warning",icon:(0,f.Y)(i0.A,{}),text:n})}var h4=(0,eo.x)({left:[{flexBasis:0,flexGrow:1},ea.wp.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[ea.wp.p(8),ea.wp.rowWithGap(4),ea.wp.flex.grow(1),ea.wp.center,ea.wp.borderRadius(8)]});function h5(e){var n,t=e.branch,r=e.refs,i=e.refsAreBranches,o=e.isUpstreamPull;if(!r.length)return null;if(o){var a=(0,v._)((0,dF.xM)(r[0]),2),l=a[0],s=a[1];l&&s&&(n=(0,f.Y)(ek.ui,{css:h4.branch,elevated:!0,children:(0,f.Y)(lo,{remote:l,name:s,icon:!0,heading:!0})}))}return n||(n=r.map(function(e){return(0,f.Y)(ek.ui,{css:h4.branch,elevated:!0,children:(0,f.Y)(lo,{name:e,icon:!!i||(0,f.Y)(rK,{size:16}),heading:!0})},e)})),(0,f.FD)(j.S,{row:!0,gap:4,align:"center",justify:"space-between",children:[(0,f.Y)(j.S,{css:h4.left,children:n}),(0,f.Y)(rU.A,{size:24,color:N.LU.foregroundDimmest}),(0,f.Y)(j.S,{css:h4.right,children:(0,f.Y)(ek.ui,{css:h4.branch,elevated:!0,children:(0,f.Y)(lo,{name:t,icon:!0,current:!0,heading:!0})})})]})}function h3(e){return(0,f.Y)(ti.Ay,(0,nh._)((0,eg._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M6 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 6a3.75 3.75 0 1 1 4.527 3.67 8.25 8.25 0 0 0 7.554 7.553A3.751 3.751 0 0 1 21.75 18a3.75 3.75 0 0 1-7.43.726 9.75 9.75 0 0 1-7.57-4.53V21a.75.75 0 0 1-1.5 0V9.675A3.751 3.751 0 0 1 2.25 6ZM18 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"})}))}var h7=(0,eo.x)({fakePaneHeader:[ea.wp.backgroundColor.backgroundDefault,ea.wp.align.center,{borderBottom:"1px solid ".concat(N.LU.outlineDimmer)}],listContainer:[ea.wp.borderRadius(8)],list:[],listDisabled:[{opacity:.5},ea.wp.pb(8),ea.wp.colWithGap(8)],listHeader:[ea.wp.pb(4),ea.wp.flex.grow(1),ea.wp.border({color:N.LU.outlineDimmer,direction:"bottom"})],listFiles:[ea.wp.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},ea.wp.rowWithGap(8)]});function h6(e){var n,t=e.onFileClick,r=e.gotoPendingState,i=(0,v._)((0,y.useState)(!0),2),o=i[0],a=i[1],l=(0,v._)((0,y.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,y.useState)(!1),2),d=u[0],p=u[1],h=s||d,m=dS(),g=(0,A.A)().git,S=(0,y.useId)(),Y=(0,rh.A)((n=(0,w._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,y,w,S,Y;return(0,b.YH)(this,function(b){switch(b.label){case 0:return[4,e.status()];case 1:if((n=b.sent()).error)return rg({context:"use-merging-view-state-status",gitService:e,result:n}),[2,n];if(!(t=n.branch))return[2,{error:aN.uA.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=b.sent()).error)return[2,r];return i=r.files,[4,e.getMergingRefs()];case 3:if((o=b.sent()).error)return rg({context:"use-merging-view-state-merging-refs",gitService:e,result:o,data:{status:n,conflictingFiles:i}}),[2,o];a=o.commits,c=(s=(l=o.branches).length>0)?l:a,u=n.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),d=!0,p=!0,f=!1,h=void 0;try{for(m=i[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)if(!(0,v._)(g.value,2)[1]){d=!1;break}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}return y=(0,pZ.b)(n.changes.map(function(e){return e.path})),w=i.size>0,S=u.length>0,Y=null!==n.upstream&&1===l.length&&l[0]===n.upstream.branch,[2,{refs:c,branch:t,conflictingFiles:i,otherChangedFiles:u,refsAreBranches:s,allIsResolved:d,uniquePathMap:y,hasConflicts:w,hasOtherChanges:S,isUpstreamPull:Y,error:null}]}})}),function(e){return n.apply(this,arguments)}));if((0,y.useEffect)(function(){(null==Y?void 0:Y.error)&&m(Y.error)},[null==Y?void 0:Y.error,m]),!Y)return(0,f.Y)(hh,{});if(Y.error)return null;var _=Y.refs,C=Y.branch,k=Y.conflictingFiles,x=Y.otherChangedFiles,D=Y.refsAreBranches,E=Y.allIsResolved,R=Y.uniquePathMap,I=Y.hasConflicts,T=Y.hasOtherChanges,F=Y.isUpstreamPull;function P(){return(P=(0,w._)(function(){var e,n,t,i,a,l,s,u,d,p,f;return(0,b.YH)(this,function(v){switch(v.label){case 0:if(!E||h)return[2];c(!0),e=[],n=!0,t=!1,i=void 0;try{for(a=k.keys()[Symbol.iterator]();!(n=(l=a.next()).done);n=!0)s=l.value,e.push(s)}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return o&&(u=e).push.apply(u,(0,em._)(x)),[4,g.stageFiles({all:!1})];case 1:if((d=v.sent()).error)return m(d.error),c(!1),[2];return[4,g.stageFiles({add:e})];case 2:if((p=v.sent()).error)return m(p.error),c(!1),[2];return[4,g.mergeContinue()];case 3:if(!(f=v.sent()).error)return[3,5];return[4,g.stageFiles({all:!1})];case 4:return v.sent(),m(f.error),c(!1),[3,6];case 5:r(),g.forceRefresh(),v.label=6;case 6:return[2]}})})).apply(this,arguments)}function L(){return(L=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(h)return[2];return p(!0),[4,g.mergeAbort()];case 1:return(e=n.sent()).error?(m(e.error),p(!1),rg({context:"merging-view-abort",gitService:g,result:e,data:{branch:C}})):(r(),g.forceRefresh()),[2]}})})).apply(this,arguments)}var U=F?"Complete in-progress pull":"Complete in-progress merge";return I&&(U=F?"Resolve pull conflicts":"Resolve merge conflicts"),(0,f.FD)(j.S,{children:[(0,f.FD)(j.S,{css:h7.fakePaneHeader,p:8,row:!0,gap:8,children:[(0,f.Y)(h3,{}),(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:U})]}),(0,f.FD)(j.S,{pt:16,pb:8,px:8,gap:12,children:[(0,f.Y)(h5,{branch:C,refs:_,refsAreBranches:D,isUpstreamPull:F}),(0,f.Y)(h2,{hasConflicts:I}),(0,f.FD)(ek.ui,{css:h7.listContainer,p:8,gap:8,elevated:!0,children:[(0,f.FD)(j.S,{pb:8,gap:8,children:[(0,f.Y)(j.S,{css:h7.listHeader,children:(0,f.Y)(V.EY,{css:ea.wp.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,f.Y)(j.S,{css:h7.listFiles,children:I?(0,f.Y)(h1,{files:k,uniquePathMap:R,onFileClick:t}):(0,f.Y)(V.EY,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),T?(0,f.FD)(j.S,{css:o?h7.list:h7.listDisabled,children:[(0,f.Y)(j.S,{css:h7.listHeader,children:(0,f.Y)(V.EY,{css:ea.wp.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,f.Y)(j.S,{css:h7.listFiles,children:(0,f.Y)(h1,{files:x,uniquePathMap:R,onFileClick:t})})]}):null]}),(0,f.FD)(j.S,{css:h7.includeOtherFiles,tag:"label",children:[(0,f.Y)(nQ.S,{id:S,checked:o,onChange:function(e){return a(e)}}),(0,f.Y)(V.EY,{multiline:!1,children:"Include other changed files in commit"})]}),(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(M.$n,{text:F?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:s?(0,f.Y)(tw.A,{}):(0,f.Y)(h3,{}),disabled:!E||h,loading:s,onClick:function(){return P.apply(this,arguments)}}),(0,f.Y)(M.$n,{text:F?"Abort pull":"Abort merge",colorway:"negative",iconLeft:d?(0,f.Y)(tw.A,{}):(0,f.Y)(lp.A,{}),disabled:h,loading:d,onClick:function(){return L.apply(this,arguments)}})]})]})]})}var h8=(0,eo.x)({fakePaneHeader:[ea.wp.backgroundColor.backgroundDefault,ea.wp.align.center,{borderBottom:"1px solid ".concat(N.LU.outlineDimmer)}],listContainer:[ea.wp.borderRadius(8)],list:[],listDisabled:[{opacity:.5},ea.wp.pb(8),ea.wp.colWithGap(8)],listHeader:[ea.wp.pb(4),ea.wp.flex.grow(1),ea.wp.border({color:N.LU.outlineDimmer,direction:"bottom"})],listFiles:[ea.wp.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},ea.wp.rowWithGap(8)]});function h9(e){var n,t=e.onFileClick,r=e.gotoPendingState,i=(0,v._)((0,y.useState)(!0),2),o=i[0],a=i[1],l=(0,v._)((0,y.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,y.useState)(!1),2),d=u[0],p=u[1],h=s||d,m=dS(),g=(0,A.A)().git,S=(0,y.useId)(),Y=(0,rh.A)((n=(0,w._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h;return(0,b.YH)(this,function(m){switch(m.label){case 0:return[4,e.status()];case 1:if((n=m.sent()).error)return rg({context:"use-rebasing-view-state-status",gitService:e,result:n}),[2,n];if(!(t=n.branch))return[2,{error:aN.uA.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=m.sent()).error)return[2,r];i=r.files,o=n.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),a=!0,l=!0,s=!1,c=void 0;try{for(u=i[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)if(!(0,v._)(d.value,2)[1]){a=!1;break}}catch(e){s=!0,c=e}finally{try{l||null==u.return||u.return()}finally{if(s)throw c}}return p=(0,pZ.b)(n.changes.map(function(e){return e.path})),f=i.size>0,h=o.length>0,[2,{branch:t,conflictingFiles:i,otherChangedFiles:o,allIsResolved:a,uniquePathMap:p,hasConflicts:f,hasOtherChanges:h,error:null}]}})}),function(e){return n.apply(this,arguments)}));if((0,y.useEffect)(function(){(null==Y?void 0:Y.error)&&m(Y.error)},[null==Y?void 0:Y.error,m]),!Y)return(0,f.Y)(hh,{});if(Y.error)return null;var _=Y.branch,C=Y.conflictingFiles,k=Y.otherChangedFiles,x=Y.allIsResolved,D=Y.uniquePathMap,E=Y.hasConflicts,R=Y.hasOtherChanges;function I(){return(I=(0,w._)(function(){var e,n,t,i,a,l,s,u,d,p,f;return(0,b.YH)(this,function(v){switch(v.label){case 0:if(!x||h)return[2];c(!0),e=[],n=!0,t=!1,i=void 0;try{for(a=C.keys()[Symbol.iterator]();!(n=(l=a.next()).done);n=!0)s=l.value,e.push(s)}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return o&&(u=e).push.apply(u,(0,em._)(k)),[4,g.stageFiles({all:!1})];case 1:if((d=v.sent()).error)return m(d.error),c(!1),[2];return[4,g.stageFiles({add:e})];case 2:if((p=v.sent()).error)return m(p.error),c(!1),[2];return[4,g.escapeHatchGitExecWrite("git rebase --continue")];case 3:if(!(f=v.sent()).error)return[3,5];return[4,g.stageFiles({all:!1})];case 4:return v.sent(),m(f.error),c(!1),[3,6];case 5:r(),g.forceRefresh(),v.label=6;case 6:return[2]}})})).apply(this,arguments)}function T(){return(T=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(h)return[2];return p(!0),[4,g.escapeHatchGitExecWrite("git rebase --abort")];case 1:return(e=n.sent()).error?(m(e.error),p(!1),rg({context:"rebasing-view-abort",gitService:g,result:e,data:{branch:_}})):(r(),g.forceRefresh()),[2]}})})).apply(this,arguments)}var F="Complete in-progress rebase";return E&&(F="Resolve conflicts"),(0,f.FD)(j.S,{children:[(0,f.FD)(j.S,{css:h8.fakePaneHeader,p:8,row:!0,gap:8,children:[(0,f.Y)(h3,{}),(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:F})]}),(0,f.FD)(j.S,{pt:16,pb:8,px:8,gap:12,children:[(0,f.Y)(h2,{hasConflicts:E}),(0,f.FD)(ek.ui,{css:h8.listContainer,p:8,gap:8,elevated:!0,children:[(0,f.FD)(j.S,{pb:8,gap:8,children:[(0,f.Y)(j.S,{css:h8.listHeader,children:(0,f.Y)(V.EY,{css:ea.wp.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,f.Y)(j.S,{css:h8.listFiles,children:E?(0,f.Y)(h1,{files:C,uniquePathMap:D,onFileClick:t}):(0,f.Y)(V.EY,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this step."})})]}),R?(0,f.FD)(j.S,{css:o?h8.list:h8.listDisabled,children:[(0,f.Y)(j.S,{css:h8.listHeader,children:(0,f.Y)(V.EY,{css:ea.wp.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,f.Y)(j.S,{css:h8.listFiles,children:(0,f.Y)(h1,{files:k,uniquePathMap:D,onFileClick:t})})]}):null]}),(0,f.FD)(j.S,{css:h8.includeOtherFiles,tag:"label",children:[(0,f.Y)(nQ.S,{id:S,checked:o,onChange:function(e){return a(e)}}),(0,f.Y)(V.EY,{multiline:!1,children:"Include other changed files in commit"})]}),(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(M.$n,{text:"commit and continue rebase",colorway:"primary",iconLeft:s?(0,f.Y)(tw.A,{}):(0,f.Y)(h3,{}),disabled:!x||h,loading:s,onClick:function(){return I.apply(this,arguments)}}),(0,f.Y)(M.$n,{text:"Abort rebase",colorway:"negative",iconLeft:d?(0,f.Y)(tw.A,{}):(0,f.Y)(lp.A,{}),disabled:h,loading:d,onClick:function(){return T.apply(this,arguments)}})]})]})]})}function me(){return(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,f.Y)(V.EY,{multiline:!1,children:"Please finish the rebase manually."})]})}function mn(){return(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,f.Y)(V.EY,{multiline:!1,children:"Please finish the revert manually."})]})}function mt(e){var n=e.username,t=e.avatar,r=e.fullName;return(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(d4.e,{src:null!=t?t:null,username:n,fullName:r}),(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:n})]})}var mr=(0,eo.x)({list:{"> div:first-child":ea.wp.borderRadius(8,8,0,0),"> div:last-child":[ea.wp.borderRadius(0,0,8,8),{border:"none"}]},profile:[ob.b.filled,ea.wp.flex.row,ea.wp.justify.spaceBetween,ea.wp.p(12),ea.wp.borderRadius(0),ea.wp.border({color:N.LU.outlineDefault,direction:"bottom"})],email:[ea.wp.flex.shrink(1)],connectToGithubContainer:[ea.wp.backgroundColor.backgroundHigher],notConnectedText:[ea.wp.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function mi(e){var n=e.profiles,t=e.current,r=e.showConnectToGithub,i=e.onSelectProvider,o=(0,ik.useRouter)(),a=(0,iL.Po)(o),l=(0,y.useId)();return(0,f.FD)(eO.z,{name:l,css:mr.list,value:null!=t?t:"",children:[n.map(function(e){var n=e.provider===dk.H.GITHUB?"GitHub":"Default Profile",r=void 0;return e.provider===dk.H.GITHUB&&(r=a?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,f.Y)(mo,{profile:e,providerName:n,current:e.provider===t,onSelectProvider:i,settingsURL:r},e.provider)}),r?(0,f.FD)(j.S,{css:mr.connectToGithubContainer,p:12,gap:4,children:[(0,f.Y)(j.S,{row:!0,gap:4,align:"center",children:(0,f.Y)(mt,{username:"GitHub Account",fullName:"GitHub Account"})}),(0,f.Y)(V.EY,{color:"dimmest",css:mr.notConnectedText,multiline:!1,children:"Your GitHub account is not connected."}),(0,f.Y)(dT,{})]}):null]})}function mo(e){var n=e.profile,t=e.current,r=e.providerName,i=e.settingsURL,o=e.onSelectProvider,a=n.provider,l=n.name,s=n.username,c=n.email,u=n.avatar,d=(0,y.useId)();return(0,f.FD)(j.S,{onClick:function(){return o(a)},css:mr.profile,children:[(0,f.FD)(j.S,{shrink:!0,gap:4,children:[(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(mt,{username:s,avatar:u,fullName:l}),i?(0,f.Y)(re.v,{css:mr.settingsButton,text:"".concat(r," Settings"),iconRight:(0,f.Y)(tV.A,{}),href:i,target:"_blank",variant:"outlined",size:"small"}):(0,f.Y)(V.EY,{color:"dimmest",variant:"small",multiline:!1,children:r})]}),(0,f.FD)(V.EY,{color:"dimmest",css:mr.email,multiline:!1,children:[l," <",c,">"]})]}),(0,f.Y)(eO.s,{css:mr.radio,id:d,checked:t,value:a})]})}var ma=(0,eo.x)({profileContainer:[ea.wp.flex.column]});function ml(){var e,n=(0,A.A)().git,t=(0,rh.A)((e=(0,w._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){return n=e.getCurrentProfile(),t=e.getProfiles(),[2,{profiles:t,current:null!=(r=null==n?void 0:n.provider)?r:null,hasGitHub:!e.hasProfile(dk.H.GITHUB),error:null}]})}),function(n){return e.apply(this,arguments)}));if(!t)return null;if(null!==t.error)return rg({context:"git-profiles",gitService:n,result:{error:t.error}}),null;var r=t.profiles,i=t.current,o=t.hasGitHub;return(0,f.Y)(j.S,{css:ma.profileContainer,children:(0,f.Y)(mi,{profiles:r,current:i,showConnectToGithub:o,onSelectProvider:function(e){n.setCurrentProfile(e),e===dk.H.REPLIT_DEFAULT?dY("profile-changed",{profile:"replit"}):e===dk.H.GITHUB&&dY("profile-changed",{profile:"github"})}})})}function ms(){var e=(0,ev._)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return ms=function(){return e},e}function mc(){var e=(0,ev._)(["\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n      }\n    }\n  }\n"]);return mc=function(){return e},e}function mu(){var e=(0,ev._)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return mu=function(){return e},e}var md={},mp=(0,ey.J1)(ms()),mf=(mc(),(0,ey.J1)(mu())),mh=t(25383),mm=t(10327),mg=(0,eo.x)({errorText:[ea.wp.color.accentNegativeStronger,ea.wp.pl(4)]});function mv(e){var n,t,r,i,o,a=e.remoteName,l=e.updateRemote,s=(0,nq.A)().showConfirm,c=(0,A.A)().git,u=(0,it.A)(),d=dE(),p=(0,nJ.c)(),h=(0,P.A)(),m=(0,y.useRef)(null),g=(0,y.useRef)(null),S=(0,v._)((0,y.useState)(),2),Y=S[0],_=S[1],C=(n={variables:{replId:h}},t=(0,eg._)({},md,n),ew.I(mp,t)).data,k=(null==C?void 0:C.repl.__typename)==="Repl"?C.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},x=k.slug,D=k.description,E=k.isPrivate,R=k.url,I=(0,v._)((r=(0,eg._)({},md,void 0),lX.n(mf,r)),2),T=I[0],F=I[1].loading,L=(0,dD.P)({onAuth:function(){dY("github-user-connected")}}),U=(0,v._)((0,y.useState)(null==E||E),2),N=U[0],O=U[1],H=(0,v._)((0,y.useState)(x),2),z=H[0],W=H[1],G=(0,v._)((0,y.useState)(),2),Z=G[0],q=G[1],K=(0,v._)((0,y.useState)(null!=D?D:R&&"Repository for https://replit.com".concat(R)),2),$=K[0],J=K[1],Q=(0,v._)((0,y.useState)(),2),X=Q[0],ee=Q[1],en=function(){q(void 0),ee(void 0),_(void 0)},et=(i=(0,w._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return[4,c.getRemotes()];case 1:if((n=i.sent()).error)return _("Error finding current remotes, ".concat(n.error)),[2];if(!n.remotes.has(a))return[3,3];return[4,c.setRemoteURL({remote:a,url:e})];case 2:if((t=i.sent()).error)return _("Error (".concat(t.error,") setting ").concat(a," to use ").concat(e," as a remote.")),[2];return l(e),dY("remote-edited"),[2];case 3:return[4,c.addRemote({name:a,url:e})];case 4:if((r=i.sent()).error)return _("Error (".concat(r.error,") adding ").concat(a," ").concat(e," as a remote.")),[2];return l(e),dY("remote-added"),[2]}})}),function(e){return i.apply(this,arguments)}),er=(o=(0,w._)(function(){var e,n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(en(),!z)return[2];if(!(0,dq.em)(z))return q("Invalid remote name."),[2];return[4,T({variables:{input:{name:z,description:null!=D?D:null,homepage:"replit.com".concat(R),isPrivate:N,ownerType:ix.nr1.User}}})];case 1:if((null==(e=(r=i.sent()).data)?void 0:e.createGithubRepo.__typename)==="UnauthorizedError"||(null==(n=r.data)?void 0:n.createGithubRepo.__typename)==="UserError")return _(r.data.createGithubRepo.message),[2];return(null==(t=r.data)?void 0:t.createGithubRepo.__typename)==="CreateGithubRepoResult"&&(et(r.data.createGithubRepo.remoteUrl),dY("github-repository-published"),s("Created repository on Github")),[2]}})}),function(){return o.apply(this,arguments)});return d?(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"Repository name"}),(0,f.Y)(B.pd,{ref:m,placeholder:"Enter repository name",value:z,onChange:function(e){q(void 0),W(e.target.value)},onKeyDown:function(e){if("Enter"===e.key){var n;e.preventDefault(),null==(n=g.current)||n.focus()}}}),(0,f.Y)(V.EY,{css:mg.errorText,multiline:!1,children:Z}),(0,f.Y)(mh.A,{height:1}),(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"Repository description"}),(0,f.Y)(B.ov,{ref:g,maxLength:350,name:"Repository description",placeholder:"Enter repository description",value:null!=$?$:void 0,onChange:function(e){ee(void 0),J(e.target.value)}}),(0,f.Y)(V.EY,{css:mg.errorText,multiline:!1,children:X}),(0,f.Y)(mh.A,{height:1}),(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,f.FD)(rL.e2,{tag:"fieldset",id:p("privacy"),name:p("privacy"),value:N,onChange:function(e){return O(e)},row:!0,css:[ea.wp.width("100%")],children:[(0,f.Y)(rL.$O,{id:p("false"),value:!1,text:"Public",icon:(0,f.Y)(mm.A,{})}),(0,f.Y)(rL.$O,{id:p("true"),value:!0,text:"Private",icon:(0,f.Y)(iw.A,{})})]}),(0,f.Y)(mh.A,{height:2}),(0,f.Y)(M.$n,{text:F?"Creating Repository on GitHub…":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,f.Y)(dI.A,{}),onClick:er,loading:F}),Y?(0,f.Y)(V.EY,{css:mg.errorText,maxLines:2,multiline:!1,children:Y}):null]}):u?(0,f.Y)(j.S,{children:(0,f.Y)(M.$n,{colorway:"primary",iconLeft:(0,f.Y)(dI.A,{}),text:"Open Account page to connect to GitHub",onClick:function(){dx.M.openExternalUrl("/account#connected-services")}})}):(0,f.Y)(j.S,{children:(0,f.Y)(M.$n,{colorway:"primary",iconLeft:(0,f.Y)(dI.A,{}),text:"Connect to GitHub",onClick:L})})}var my=(0,nW.AH)(ea.wp.border({width:1,color:N.LU.outlineDimmer}),ea.wp.borderRadius(8)),mw=(0,nW.AH)(ob.b.filled,ea.wp.flex.row,ea.wp.justify.spaceBetween,ea.wp.align.center,ea.wp.px(8),ea.wp.py(4),ea.wp.borderRadius(8,8,0,0)),mb=(0,nW.AH)(ea.wp.borderRadius(8,8,0,0)),mS=(0,nW.AH)(ea.wp.borderRadius(8)),mY=(0,nW.AH)(ea.wp.p(8)),m_=(0,nW.AH)(ea.wp.flex.growAndShrink(1));function mA(e){var n=e.title,t=e.expanded,r=e.content,i=e.onClick;return(0,f.FD)(j.S,{css:my,children:[(0,f.FD)(j.S,{css:[mw,t?mb:mS],onClick:i,children:[(0,f.Y)(j.S,{css:m_,children:(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:n})}),t?(0,f.Y)(rO.A,{size:20}):(0,f.Y)(rN.A,{size:20})]}),t?(0,f.Y)(j.S,{css:mY,children:r}):null]})}var mC=(0,nW.AH)(ea.wp.rowWithGap(4)),mk=(0,nW.AH)(ea.wp.flex.growAndShrink(1)),mx=(0,nW.AH)(ea.wp.color.accentNegativeStronger,ea.wp.pl(4));function mD(e){var n,t=e.initialRemoteUrl,r=e.remoteName,i=e.updateRemote,o=(0,A.A)().git,a=(0,v._)((0,y.useState)(),2),l=a[0],s=a[1];(0,y.useEffect)(function(){s(void 0)},[t]);var c=(0,v._)((0,y.useState)(),2),u=c[0],d=c[1],p=(0,v._)((0,y.useState)(!1),2),h=p[0],m=p[1],g=(n=(0,w._)(function(){var e,n,t;return(0,b.YH)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,6,7]),!l)return[2];if(m(!0),!(0,dq.C2)(l))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=a.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));if(!e.remotes.has(r))return[3,3];return[4,o.setRemoteURL({remote:r,url:l})];case 2:if((n=a.sent()).error)throw rg({context:"remote-input",gitService:o,result:n,data:{remote:r,url:l}}),Error("Error (".concat(n.error,") setting ").concat(r," to use ").concat(l," as a remote."));return dY("remote-edited"),i(l),[2];case 3:return[4,o.addRemote({name:r,url:l})];case 4:if((t=a.sent()).error)throw rg({context:"remote-input",gitService:o,result:t,data:{remote:r,url:l}}),Error("Error (".concat(t.error,") adding ").concat(r," ").concat(l," as a remote."));return dY("remote-added"),[3,7];case 5:return d(a.sent().message),[3,7];case 6:return m(!1),[7];case 7:return[2]}})}),function(){return n.apply(this,arguments)});return(0,f.FD)(j.S,{children:[(0,f.Y)(B.pd,{name:"Remote URL",placeholder:"Enter Remote URL",value:null!=l?l:t,autoComplete:"off",autoCorrect:"off",onChange:function(e){d(void 0),s(e.target.value)},inputMode:"url","aria-label":"Remote URL",onKeyDown:function(e){"Enter"===e.key&&g()}}),u?(0,f.Y)(V.EY,{variant:"small",css:mx,multiline:!1,children:u}):null,l&&l!==t?(0,f.FD)(f.FK,{children:[(0,f.Y)(mh.A,{height:1}),(0,f.FD)(j.S,{css:mC,children:[(0,f.Y)(M.$n,{css:mk,text:"Cancel",iconLeft:(0,f.Y)(dM.A,{}),onClick:function(){return s(void 0)}}),(0,f.Y)(M.$n,{css:mk,text:h?"Saving…":"Save",loading:h,colorway:"primary",iconLeft:(0,f.Y)(oJ.A,{}),onClick:g})]})]}):null]})}var mE="origin",mR=function(e){return e[e.GitHub=0]="GitHub",e}(mR||{});function mI(){var e,n=(0,rh.A)((e=(0,w._)(function(e){var n,t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,e.getRemotes()];case 1:if((n=o.sent()).error)return rg({context:"remote-config",gitService:e,result:n}),[2,{url:void 0,name:mE,error:n.error}];if(!(r=(0,v._)(null!=(t=n.remotes.values())?t:void 0,1)[0]))return[2,{url:void 0,name:mE,error:null}];return[2,{url:r.push||r.fetch,name:null!=(i=r.name)?i:mE,error:null}]}})}),function(n){return e.apply(this,arguments)}));return null==n?(0,f.FD)(j.S,{css:ea.wp.center,children:[(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,f.Y)(hh,{})]}):(null==n?void 0:n.error)?null:(0,f.Y)(mT,{initialRemoteUrl:null==n?void 0:n.url,remoteName:null==n?void 0:n.name})}function mT(e){var n=e.initialRemoteUrl,t=e.remoteName,r=(0,v._)((0,y.useState)(n),2),i=r[0],o=r[1],a=(0,v._)((0,y.useState)(""===n||void 0===n?0:void 0),2),l=a[0],s=a[1],c=function(e){o(e)};return(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,f.Y)(mh.A,{height:1}),(0,f.Y)(mD,{remoteName:t,initialRemoteUrl:i,updateRemote:c}),(0,f.Y)(mh.A,{height:2}),(0,f.Y)(mA,{title:"GitHub",expanded:0===l,onClick:function(){return s(function(e){return 0===e?void 0:0})},content:(0,f.Y)(mv,{remoteName:t,updateRemote:c})})]})}var mF=(0,nW.AH)(ea.wp.px(16));function mP(){return(0,f.FD)(j.S,{css:mF,children:[(0,f.Y)(mh.A,{height:2}),(0,f.Y)(mI,{}),(0,f.Y)(mh.A,{height:2}),(0,f.Y)(mL,{})]})}function mL(){return(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,f.Y)(mh.A,{height:1}),(0,f.Y)(ml,{})]})}function mU(){return(0,f.Y)(j.S,{children:(0,f.Y)(V.EY,{multiline:!0,children:"Something went wrong. Please refresh the page and try again."})})}var mN=(0,eo.x)({fakePaneHeader:[ea.wp.backgroundColor.backgroundDefault,ea.wp.align.center,{borderBottom:"1px solid ".concat(N.LU.outlineDimmer)}]});function mO(e){var n=e.onFileClick,t=e.status;return(0,f.FD)(j.S,{children:[(0,f.Y)(mM,{}),(0,f.FD)(j.S,{p:8,pt:16,gap:16,children:[(0,f.Y)(iX.N,{colorway:"orange",icon:(0,f.Y)(i0.A,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,f.FD)(j.S,{css:hm.section,children:[(0,f.Y)(j.S,{css:hm.reviewChangesHeader,children:(0,f.Y)(V.EY,{css:hm.headerText,multiline:!1,children:"Commit"})}),(0,f.Y)(fr,{status:t,onStagedFileClick:n,defaultMessage:"Initial commit"})]})]})]})}function mM(){var e,n=dS(),t=(0,rh.A)((e=(0,w._)(function(e){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,e.status()];case 1:return(t=r.sent()).error&&(rg({context:"unborn-branch-view-status",gitService:e,result:t}),n(t.error)),[2,t]}})}),function(n){return e.apply(this,arguments)}),[n]);return(null==t?void 0:t.error)?null:(0,f.Y)(j.S,{css:mN.fakePaneHeader,px:8,py:4,row:!0,gap:8,children:(null==t?void 0:t.branch)?(0,f.Y)(lo,{name:t.branch,current:!0,heading:!0}):null})}var mH=t(19807),mB=(0,eo.x)({gitPane:[ea.wp.position.relative,ea.wp.display.flex,ea.wp.minHeight("100%")],gitPaneContent:[ea.wp.overflow("auto")]});function mz(e){var n,t=e.isActive,r=e.performPaneOperation,i=e.mode,o=void 0===i?{type:lY.C.CURRENT_BRANCH}:i,a=(0,y.useRef)(),l=(0,y.useCallback)(function(e){r({operation:"replace",pane:{type:"git",data:{mode:e}}})},[r]),s=(0,v._)((0,y.useState)(!1),2),c=s[0],u=s[1];mZ(void 0!==t&&t);var d=(0,rh.A)((n=(0,w._)(function(e){var n,t,r,i,o,a,l,s,c,u;return(0,b.YH)(this,function(d){switch(d.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=d.sent()).error)return[2,n];if(t=n.state,r=n.type,i=null,o=null,a=null,r===dm.UN.INITIALIZING)return[3,6];return[4,e.status()];case 2:if((l=d.sent()).error)return rg({context:"git-pane-status",gitService:e,result:l,data:{state:t,type:r}}),[2,l];return i=l,[4,e.getRemotes()];case 3:if((s=d.sent()).error)return rg({context:"git-pane-remotes",gitService:e,result:s,data:{state:t,type:r}}),[2,s];if(o=s.remotes,!i.branch)return[3,5];return[4,e.getBranch(i.branch)];case 4:if((c=d.sent()).error)return rg({context:"git-pane-branch",gitService:e,result:c,data:{state:t,type:r}}),[2,c];a=c.branch,d.label=5;case 5:return[3,8];case 6:return[4,e.status()];case 7:if((u=d.sent()).error)return rg({context:"git-pane-status-initializing",gitService:e,result:u,data:{state:t,type:r}}),[2,{state:t,type:r,status:i,remotes:o,currentBranch:a,error:null}];i=u,d.label=8;case 8:return[2,{state:t,type:r,status:i,remotes:o,currentBranch:a,error:null}]}})}),function(e){return n.apply(this,arguments)})),p=!d||d.error?null:d.currentBranch,h=(0,y.useCallback)(function(e){switch(l(e),e.type){case lY.C.DASHBOARD:dY("pane-mode-changed",{mode:"dashboard"});break;case lY.C.BRANCH:dY("pane-mode-changed",{mode:"branch"});break;case lY.C.CURRENT_BRANCH:dY("pane-mode-changed",{mode:"current-branch"});break;case lY.C.SETTINGS:dY("pane-mode-changed",{mode:"settings"})}},[l]),m=(0,y.useCallback)(function(){a.current?(h(a.current),a.current=void 0):h({type:lY.C.CURRENT_BRANCH})},[h]),g=(0,nt.A)(o),S=(0,y.useCallback)(function(e){var n=function(e){a.current=g.current,h(e)};switch(e.type){case lY.C.DASHBOARD:n(e);break;case lY.C.BRANCH:if((0,dg.F)(e.branch,p)){n({type:lY.C.CURRENT_BRANCH});break}n(e);break;case lY.C.CURRENT_BRANCH:case lY.C.SETTINGS:case lY.C.COMMIT:n(e)}},[h,p,g]),Y=(0,y.useCallback)(function(e){var n=e.path,t=e.type,i=(0,tt.QY)({path:n});if("codeEditor"!==i)return void r({operation:"open",pane:{type:i,data:{path:n}},secondary:!0});"conflict"===(void 0===t?"change":t)?r({operation:"open",pane:{type:"codeEditor",data:{path:n}},secondary:!0}):r({operation:"open",pane:{type:"diff",data:{left:{path:n,data:{type:"git",revision:"HEAD"}},right:{path:n,data:{type:"fs"}}}},secondary:!0})},[r]),_=(0,y.useCallback)(function(e){S({type:lY.C.COMMIT,hash:e})},[S]),A=(0,y.useCallback)(function(){u(!0)},[]);if(o.type===lY.C.BRANCH&&(0,dg.F)(o.branch,p)&&h({type:lY.C.CURRENT_BRANCH}),(0,y.useEffect)(function(){return u(!1)},[d]),c||!d||d.error)return(0,f.Y)(mW,{children:(null==d?void 0:d.error)?(0,f.Y)(mH.A,{pane:{type:"git"},headerText:"Git pane is unavailable.",bodyText:(0,f.FD)(f.FK,{children:["Something went wrong. Error: ",(0,f.Y)("code",{children:d.error})]}),asciiArt:"Computer"}):(0,f.Y)(hh,{})});switch(d.type){case dm.UN.INITIALIZING:case dm.UN.INTERMEDIATE:case dm.UN.DETACHED_HEAD:return(0,f.Y)(mW,{children:(0,f.Y)(mG,{state:d.state,status:d.status,onFileClick:Y,gotoPendingState:A})});case dm.UN.NORMAL:if(o.type===lY.C.BRANCH&&!o.branch||o.type===lY.C.CURRENT_BRANCH&&!p)return(0,f.Y)(mW,{header:(0,f.Y)(pv,{mode:lY.C.DASHBOARD,branch:null,switchMode:S,onBack:m}),children:(0,f.Y)(hQ,{currentBranch:null,switchMode:S})});var C=null;return o.type===lY.C.CURRENT_BRANCH?C=p:o.type===lY.C.BRANCH&&(C=o.branch),(0,f.Y)(mW,{header:(0,f.Y)(pv,{mode:o.type,branch:C,switchMode:S,onBack:m}),children:(0,f.Y)(mV,{performPaneOperation:r,mode:o,status:d.status,remotes:d.remotes,currentBranch:p,switchMode:S,onStagedFileClick:Y,onViewCommitClick:_,onViewSettingsClick:function(){return S({type:lY.C.SETTINGS})},gotoPendingState:A})})}}function mW(e){var n=e.header,t=e.children,r=(0,v._)((0,y.useState)(function(){return(0,e0.y$)()}),1)[0];return(0,f.Y)(dv.Provider,{value:r,children:(0,f.FD)(j.S,{css:mB.gitPane,children:[(0,f.Y)(dZ,{}),n,(0,f.Y)(j.S,{css:mB.gitPaneContent,grow:!0,shrink:!0,children:t})]})})}function mG(e){var n=e.state,t=e.status,r=e.onFileClick,i=e.gotoPendingState,o=(0,i_._P)({controlName:"flag-new-rebase-editor",logFlagToAnalytics:!1,default:!1});switch(n){case dm.Gi.NOT_INITIALIZED:return(0,f.Y)(mH.A,{pane:{type:"git"},action:(0,f.Y)(dC,{})});case dm.Gi.ON_UNBORN_BRANCH:return(0,f.Y)(mO,{onFileClick:r,status:t});case dm.Gi.MERGING:return(0,f.Y)(h6,{onFileClick:r,gotoPendingState:i});case dm.Gi.REBASING:return o?(0,f.Y)(h9,{gotoPendingState:i,onFileClick:r}):(0,f.Y)(me,{});case dm.Gi.REVERTING:return(0,f.Y)(mn,{});case dm.Gi.CHERRY_PICKING:return(0,f.Y)(hy,{});case dm.Gi.APPLYING_MAILBOX:return(0,f.Y)(pS,{});case dm.Gi.BISECTING:return(0,f.Y)(pY,{});case dm.Gi.DETACHED_HEAD:return(0,f.Y)(hX,{});case dm.Gi.INDEX_LOCKED:return(0,f.Y)(h0,{});case dm.Gi.CLEAN:case dm.Gi.DIRTY_INDEX:case dm.Gi.DIRTY_WORKTREE:return(0,f.Y)(mU,{});default:(0,aA.A)(n)}}function mV(e){var n=e.mode,t=e.status,r=e.remotes,i=e.currentBranch,o=e.switchMode,a=e.onStagedFileClick,l=e.onViewCommitClick,s=e.onViewSettingsClick,c=e.gotoPendingState,u=e.performPaneOperation;switch(n.type){case lY.C.DASHBOARD:return(0,f.Y)(hQ,{currentBranch:i,switchMode:o});case lY.C.BRANCH:return(0,f.Y)(hg,{performPaneOperation:u,status:t,branch:n.branch,remotes:r,onStagedFileClick:a,onViewCommitClick:l,onViewSettingsClick:s,gotoPendingState:c});case lY.C.CURRENT_BRANCH:return(0,f.Y)(hg,{performPaneOperation:u,status:t,remotes:r,branch:i,onStagedFileClick:a,onViewCommitClick:l,onViewSettingsClick:s,gotoPendingState:c,current:!0});case lY.C.SETTINGS:return(0,f.Y)(mP,{});case lY.C.COMMIT:return(0,f.Y)(hW,{status:t,remotes:r,onViewCommitClick:l,hash:n.hash,switchMode:o});default:(0,aA.A)(n)}}function mZ(e){var n=(0,A.A)().git;(0,y.useEffect)(function(){e&&setTimeout(function(){n.forceRefresh()},100)},[e,n])}var mj=h.ZU.Object({type:h.ZU.Literal("git"),data:h.ZU.Optional(h.ZU.Object({mode:lY.$}))}),mq={Content:function(e){var n,t=e.options,r=t.isActive,i=t.performPaneOperation,o=e.pane;return(0,f.Y)(mz,{isActive:r,performPaneOperation:i,mode:null==(n=o.data)?void 0:n.mode})},Icon:function(e){var n=e.size;return(0,f.Y)(ti.Vx.Provider,{value:{color:N.LU.greenStrongest,size:n},children:(0,f.Y)(d_.A,{})})},getTitle:function(){return"Git"},description:"Version control for your App",category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(mj,e)}};function mK(){var e=(0,n0.iO)();return(0,y.useCallback)(function(n,t,r){e({origin:"History2: useHistoryBSOD",error:n,tags:{source:"ws-history2",type:t},extras:(0,eg._)({state:eR.pX.current()},r)})},[e])}function m$(e){(0,tP.u4)(tD.AZ.HISTORY_USED,{action:e,which:"ws"})}function mJ(e){var n=e.onClose;return(0,f.Y)(M.$n,{text:"Cancel",onClick:function(){m$("historyExplicitlyClosed"),n()}})}function mQ(){var e,n="/replEnvironmentMobile"===(0,ik.useRouter)().pathname,t=(0,eR.N_)(),r=(0,eR.DH)(),i=!t||0===t.count;return(0,f.Y)(ef.d,{isDisabled:i,onChange:function(e){return r({comparing:e})},isSelected:null!=(e=null==t?void 0:t.comparing)&&e,children:n?"Compare":"Compare Latest"})}function mX(){var e=(0,eR.N_)();if(!e||0===e.count)return null;var n=e.changes[e.version].timestamp;return(0,f.Y)(eT.Dc,{textColor:"dimmer",dateFormat:"switch",date:n})}function m0(e){var n=e.reversed,t=void 0!==n&&n,r=e.hideName,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=(0,eR.N_)(),s=(0,y.useMemo)(function(){return[t?ea.wp.rowReverseWithGap(4):ea.wp.rowWithGap(4),ea.wp.align.center]},[t]);if(!l)return null;if(0===l.count)return(0,f.FD)(j.S,{css:s,children:[(0,f.Y)(rn.A,{size:24}),(0,f.Y)(V.EY,{color:a,multiline:!1,children:"Server Authored"})]});var c=l.changes[l.version];if(!l.users)return(0,f.FD)(j.S,{css:s,children:[(0,f.Y)(d4.e,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,f.Y)(V.EY,{color:a,multiline:!1,children:"Unknown"})]});var u=l.users[c.userId];if(!u)if(c.timestamp>16546464e5)return(0,f.FD)(j.S,{css:s,children:[(0,f.Y)(rn.A,{size:24}),i?null:(0,f.Y)(V.EY,{color:a,multiline:!1,children:"Server Authored"})]});else return(0,f.FD)(j.S,{css:s,children:[(0,f.Y)(d4.e,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,f.Y)(V.EY,{color:a,multiline:!1,children:"Unknown"})]});return(0,f.FD)(j.S,{css:s,children:[(0,f.Y)(d4.e,{size:24,src:u.image,username:u.username}),i?null:(0,f.Y)(V.EY,{color:a,multiline:!1,children:u.username})]})}var m1=t(71672);function m2(){var e=(0,ev._)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return m2=function(){return e},e}function m4(){var e=(0,ev._)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return m4=function(){return e},e}var m5=(0,ey.J1)(m2()),m3=(m4(),t(28746)),m7=t(89264),m6=function(e){function n(e){var t;return(0,uN._)(this,n),(t=(0,uU._)(this,n,[e])).name="UserError",t}return(0,uO._)(n,e),n}((0,m7._)(Error));function m8(e,n,t){return new Promise(function(r,i){try{var o,a=e.watchTextFile(n,{onReady:(o=(0,w._)(function(e){var n,o;return(0,b.YH)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,t(e)];case 1:return n=l.sent(),r(n),[3,3];case 2:return o=l.sent(),i(o),[3,3];case 3:return a(),[2]}})}),function(e){return o.apply(this,arguments)})})}catch(e){i(e)}})}var m9=m3.Ry;function ge(){return(ge=(0,w._)(function(e,n){var t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,y,w;return(0,b.YH)(this,function(b){switch(b.label){case 0:t=new Set,r=!0,i=!1,o=void 0;try{for(a=n[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(s=l.value).userId&&t.add(s.userId)}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===t.size)return[2,{}];if(t.size>=m9)return[2,"too_many_users"];return[4,e.query({query:m5,variables:{ids:Array.from(t)}})];case 1:if(u=(c=b.sent()).data,d=c.error)throw d;p=u.currentUser?[u.currentUser].concat((0,em._)(u.usersByIds)):u.usersByIds,f={},h=!0,m=!1,g=void 0;try{for(v=p[Symbol.iterator]();!(h=(y=v.next()).done);h=!0)f[(w=y.value).id]={id:w.id,username:w.username,image:w.image}}catch(e){m=!0,g=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw g}}return[2,f]}})})).apply(this,arguments)}function gn(){return(gn=(0,w._)(function(e,n,t){var r,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:var l;return[4,m8(e,t,(l=(0,w._)(function(e){var n,t;return(0,b.YH)(this,function(r){return(n=e.fetchChanges,0===(t=e.version))?[2,{isDisposed:!1,result:[]}]:[2,n(1,t,"")]})}),function(e){return l.apply(this,arguments)}))];case 1:if((r=a.sent()).isDisposed)return[2,{data:null,handledError:"File deleted or removed."}];return[4,function(e,n){return ge.apply(this,arguments)}(n,i=r.result)];case 2:if("too_many_users"===(o=a.sent()))return[2,{data:{changes:i,users:null},handledError:null}];return[2,{data:{changes:i,users:o},handledError:null}]}})})).apply(this,arguments)}var gt=t(35700),gr=(0,nW.AH)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function gi(e){var n=e.onCloseHistory,t=(0,nq.A)().showError,r=(0,v._)((0,y.useState)(!1),2),i=r[0],o=r[1],a=(0,v._)((0,y.useState)(!1),2),l=a[0],s=a[1],c=(0,A.A)().fs,u=(0,eR.N_)(),d=mK(),p="Reset",h=!0;function m(){return(m=(0,w._)(function(){var e,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!u||!c||l)return[2];i.label=1;case 1:var a,p;return i.trys.push([1,3,4,5]),s(!0),m$("versionRestored"),e=u.filePath,[4,(a=u.version+1,m8(c,e,(p=(0,w._)(function(n){var t,r,i,o,l,s,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:if(t=n.fetchChanges,r=n.writeChange,a>(i=n.version))throw Error("Cannot reset to a version that does not exist");if(a===i)return[2];o=null,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,t(1,i,"")];case 2:if((l=p.sent()).isDisposed)throw new m6("File deleted or removed.");return o=l.result,[3,4];case 3:throw p.sent(),new m6("Something went wrong while resetting the file. It is possible that a bad connection is to blame. Please try again.");case 4:u=(s=(0,pP._)(o.slice(a,o.length).reverse()))[0],d=s.slice(1).reduce(function(e,n){return e.compose(n.invertedChanges)},u.invertedChanges);try{r(d)}catch(e){throw rm.Cp(e),new m6("Something went wrong while resetting the file. Maybe the file changed while you were restoring it? Please try again.")}return[4,c.flush(new Set([e]))];case 5:return p.sent(),[2]}})}),function(e){return p.apply(this,arguments)})))];case 2:return i.sent(),n(),[3,5];case 3:if((r=i.sent())instanceof m6)return t(r.message),[2];return d(r,"restore"),[3,5];case 4:return o(!1),s(!1),[7];case 5:return[2]}})})).apply(this,arguments)}return u?0===u.count?(p="No history",h=!0):l||i?(p="Resetting...",h=!0):u.playing?(p="Playing...",h=!0):u.version===u.count-1?(p="Viewing latest",h=!0):(p="Reset editor to here",h=!1):(p="Loading...",h=!0),(0,f.FD)(f.FK,{children:[(0,f.Y)(M.$n,{text:p,disabled:h,onClick:function(){return o(!0)},colorway:"primary",iconLeft:(0,f.Y)(gt.A,{})}),u&&0!==u.count&&(0,f.Y)(ld.a,{isOpen:i,onRequestClose:function(){l||o(!1)},children:(0,f.FD)(j.S,{gap:24,children:[(0,f.Y)(V.Y9,{variant:"headerDefault",level:2,children:"Reset file version"}),(0,f.Y)(ek.ui,{elevated:!0,css:[ea.wp.borderRadius(8)],px:16,py:12,children:(0,f.FD)("dl",{css:gr,children:[(0,f.Y)("dt",{children:"File"}),(0,f.Y)("dd",{children:u.filePath}),(0,f.Y)("dt",{children:"Version"}),(0,f.FD)("dd",{children:[u.version+1,(0,f.FD)("span",{css:[ea.wp.color.foregroundDimmest],children:[(0,f.Y)("span",{css:ea.wp.mx(8),children:"/"}),u.count]})]}),(0,f.Y)("dt",{children:"Date"}),(0,f.Y)("dd",{children:(0,f.Y)(eT.Dc,{date:u.changes[u.version].timestamp,dateFormat:"absolute"})}),(0,f.Y)("dt",{children:"Author"}),(0,f.Y)("dd",{children:(0,f.Y)(m0,{})})]})}),(0,f.Y)(iX.N,{icon:(0,f.Y)(tZ.A,{}),colorway:"positive",text:"Resetting is non-destructive. The reset content will become a new version at the end of history. You can always go back to the version you just had."}),(0,f.FD)(j.S,{row:!0,gap:8,justify:"end",children:[(0,f.Y)(M.$n,{text:"Cancel",disabled:l,onClick:function(){return o(!1)}}),(0,f.Y)(M.$n,{text:l?"Resetting Version...":"Reset Version",disabled:l,colorway:"primary",onClick:function(){return m.apply(this,arguments)},iconLeft:(0,f.Y)(gt.A,{})})]})]})})]})}let go=(0,y.forwardRef)(function(e,n){var t=(0,eR.N_)(),r=(0,y.useRef)(null);(0,y.useImperativeHandle)(n,function(){return r.current}),t&&r.current&&(r.current.setAttribute("aria-valuemin","1"),r.current.setAttribute("aria-valuemax",String(t.count)),r.current.setAttribute("aria-valuenow",String(t.version+1)));var i=(0,y.useMemo)(function(){return(0,f.Y)("div",{ref:r,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:N.LU.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(N.LU.foregroundDefault," inset")}}})},[]);return t&&t.count>1?i:null}),ga=(0,y.forwardRef)(function(e,n){var t=(0,eR.N_)(),r=(0,y.useMemo)(function(){return(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,f.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:N.LU.backgroundHighest,borderRadius:"2px"},children:(0,f.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:N.LU.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})},[n]),i=(0,y.useMemo)(function(){return(0,f.Y)("div",{ref:n,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,f.Y)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:N.LU.backgroundHighest,borderRadius:"2px"}})})},[n]);return t&&t.count>1?r:i});var gl=["ArrowLeft","ArrowRight","Home","End"];function gs(){var e=(0,eR.N_)(),n=(0,eR.DH)(),t=(0,v._)((0,y.useState)(!1),2),r=t[0],i=t[1],o=(0,y.useRef)(null),a=(0,y.useRef)(null),l=(0,y.useRef)(null),s=function(e){(0,uo.U)(o,"--scrubber-transition-time",e)},c=function(e){(0,uo.U)(o,"--scrubber-progress",e.toString())};return e&&!r&&(c(e.version/(e.count-1)),e.playing?s("50ms"):s("100ms")),(0,y.useEffect)(function(){if(e&&a.current&&l.current&&!r){var t=a.current,o=l.current,u=function(r){if(0===r.button){i(!0),o.focus();var a=t.getBoundingClientRect(),l=o.getBoundingClientRect(),u=a.width,d=l.width,p=r.target===t?d/2:r.clientX-l.left,f=null,h=function(t){var r=Math.max(0,Math.min(1,(t-a.left-p)/(u-d)));r!==f&&(f=r,c(r),n({version:Math.round(r*(e.count-1)),playing:!1}))};h(r.clientX);var m=function(e){s("0ms"),h(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),s("100ms"),i(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),r.preventDefault(),r.stopPropagation()}};return t.addEventListener("pointerdown",u),o.addEventListener("pointerdown",u),function(){t.removeEventListener("pointerdown",u),o.removeEventListener("pointerdown",u)}}},[e,n,r]),(0,y.useEffect)(function(){if(e&&l.current&&!r){var t=l.current,i=function(t){if(e&&gl.includes(t.key)){var r=t.shiftKey?10:1,i=e.version,o=e.count-1,a=Math.max(0,i-r),l=Math.min(o,i+r),s=null;switch(t.key){case"ArrowLeft":s=a;break;case"ArrowRight":s=l;break;case"Home":s=0;break;case"End":s=o}null!==s&&(n({version:s,playing:!1}),t.preventDefault(),t.stopPropagation())}};return t.addEventListener("keydown",i),function(){t.removeEventListener("keydown",i)}}},[e,n,r]),(0,y.useMemo)(function(){return(0,f.FD)(j.S,{innerRef:o,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,f.Y)(ga,{ref:a}),(0,f.Y)(go,{ref:l})]})},[])}function gc(){var e=(0,eR.N_)(),n=0,t=0;e&&0!==e.count&&(n=e.version+1,t=e.count);var r=e?"default":"dimmer";return(0,f.FD)(j.S,{row:!0,gap:4,justify:"space-between",children:[(0,f.Y)(V.EY,{css:{minWidth:"2ch",textAlign:"right"},color:r,multiline:!1,children:n}),(0,f.Y)(V.EY,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,f.Y)(V.EY,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:t})]})}function gu(e){if(e<0)throw Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}var gd=t(94982);function gp(){var e,n,t,r,i=(0,eR.N_)(),o=(0,eR.DH)(),a=(null!=(n=null==i||null==(e=i.changes)?void 0:e.length)?n:1)-1,l=null!=(t=null==i?void 0:i.version)?t:0,s=null!=(r=null==i?void 0:i.playing)&&r,c=!i||0===i.count,u=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gu,i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1],l=(0,y.useCallback)(function(){n(1)},[n]),s=(0,y.useCallback)(function(){if(e+1>t)return void a(!1);n(e+1)},[n,e,t]);return(0,y.useEffect)(function(){if(o){var e=setTimeout(function(){s()},r(t));return function(){return clearTimeout(e)}}},[o,s,r,t]),{isPlaying:o,start:function(){a(!0)},stop:function(){a(!1)},reset:l}}(l,function(e){return o({version:e})},a),d=u.isPlaying,p=u.start,h=u.stop;(0,y.useEffect)(function(){d&&!s?h():!d&&s&&p()},[s,d,p,h]);var m="Loading...";return i&&(d?m="Pause":i.version===i.count-1?m="Play file history from beginning":0===i.version?m="Play file history":i.version>0&&(m="Play file history from here")),(0,f.Y)(eN.K0,{alt:m,size:24,disabled:c,onClick:function(){l===a?o({version:0,playing:!0}):o({playing:!s})},children:d?(0,f.Y)(gd.A,{}):(0,f.Y)(oL.A,{})})}var gf=t(54613);function gh(){return(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(gp,{}),(0,f.Y)(gm,{}),(0,f.Y)(gc,{}),(0,f.Y)(gg,{})]})}function gm(){var e=(0,eR.N_)(),n=(0,eR.DH)(),t=!e||0===e.version||0===e.count;return(0,f.Y)(eN.K0,{alt:"Move backwards one version",size:24,disabled:t,onClick:function(){e&&e.version>0&&n({version:e.version-1})},children:(0,f.Y)(sN.A,{})})}function gg(){var e=(0,eR.N_)(),n=(0,eR.DH)(),t=!e||e.version===e.count-1||0===e.count;return(0,f.Y)(eN.K0,{alt:"Move forwards one version",size:24,disabled:t,onClick:function(){e&&e.version<e.count-1&&n({version:e.version+1})},children:(0,f.Y)(gf.A,{})})}function gv(e){var n,t,r,i,o,a=e.filePath,l=e.onCloseHistory,s="/replEnvironmentMobile"===(0,ik.useRouter)().pathname,c=s?ea.wp.borderRadius(0):ea.wp.borderRadius(0,0,8,8),u=(0,eR.N_)(),d=(0,eR.DH)(),p=(0,eR.s7)(),h=mK(),m=(t=(n=(0,v._)((0,y.useState)({data:null,loading:!0,error:null,handledError:null}),2))[0],r=n[1],i=(0,A.A)().fs,o=(0,m1.m)(),(0,y.useEffect)(function(){if(!a)return void r({data:null,loading:!1,error:null,handledError:null});r({data:null,loading:!0,error:null,handledError:null});var e=!1;return(function(e,n,t){return gn.apply(this,arguments)})(i,o,a).then(function(n){var t=n.data,i=n.handledError;if(!e){if(i)return void r({data:null,loading:!1,error:null,handledError:i});r({data:t,loading:!1,error:null,handledError:null})}}).catch(function(n){e||(n instanceof Error||(n=Error(n)),r({data:null,loading:!1,error:n,handledError:null}))}),function(){e=!0}},[a,i,o]),t),g=m.data,w=m.loading,b=m.error;return(0,y.useEffect)(function(){return b?void h(b,"history2-index",{filePath:a}):g&&!w?(d({filePath:a,changes:g.changes,users:g.users}),m$("historyLoaded"),function(){p()}):void 0},[a,g,w,b,h,d,p]),(0,f.FD)(j.S,{css:[ea.wp.zIndex(3),ea.wp.overflow("hidden"),c,ea.wp.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(N.LU.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],p:8,gap:8,children:[(0,f.FD)(ek.ui,{css:[ea.wp.position.relative,ea.wp.colWithGap(4),ea.wp.px(12),ea.wp.pt(8),ea.wp.pb(8),ea.wp.align.center,ea.wp.borderRadius(8),ea.wp.overflow("hidden")],elevated:!0,children:[(0,f.Y)(gs,{}),(0,f.FD)(j.S,{css:[ea.wp.display.flex,ea.wp.flex.row,ea.wp.align.center,ea.wp.justify.spaceBetween,ea.wp.width("100%")],children:[(0,f.Y)(gh,{}),u&&u.count>0?(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(mX,{}),w||s?null:(0,f.Y)(V.EY,{color:"dimmer",multiline:!1,children:"•"}),(0,f.Y)(m0,{color:"dimmer",hideName:s,reversed:!0})]}):null]})]}),(0,f.FD)(j.S,{css:[ea.wp.display.flex,ea.wp.flex.row],children:[(0,f.Y)(gy,{justify:"flex-start",children:(0,f.Y)(mQ,{})}),(0,f.FD)(gy,{justify:"flex-end",children:[(0,f.Y)(mJ,{onClose:l}),(0,f.Y)(gi,{onCloseHistory:l})]})]})]})}function gy(e){var n=e.children,t=e.justify;return(0,f.Y)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:t,columnGap:N.LU.space8,minWidth:0},children:n})}var gw=t(44725),gb=t(95866),gS=t(87581),gY=(0,t(66437).D)();function g_(e){if(!(e instanceof ng.ZX))return{compareTo:e.field(gY.state,!1),changed:!1};var n=e.state.field(gY.state,!1),t=e.startState.field(gY.state,!1)!==n;return{compareTo:n,changed:t}}function gA(e,n){e.state.field(gY.state,!1)!==n&&e.dispatch({effects:gY.effect.of(n)})}var gC=ng.sU.define({create:function(){return null},update:function(e,n){var t=g_(n),r=t.compareTo,i=t.changed;if(!r)return null;if(!n.docChanged&&!i)return e;var o=n.state.doc.toString();return new gS.PF(o,r)}}),gk=null!=(d=globalThis.requestIdleCallback)?d:globalThis.requestAnimationFrame,gx=null!=(p=globalThis.cancelIdleCallback)?p:globalThis.cancelAnimationFrame,gD=nv.NZ.line({class:"cm-diff-deleted"}),gE=function(e){function n(e,t){var r;return(0,uN._)(this,n),(r=(0,uU._)(this,n)).insertion=e,r.highlight=t,r}(0,uO._)(n,e);var t=n.prototype;return t.destroy=function(){this.pendingHighlight&&gx(this.pendingHighlight)},t.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},t.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},t.updateDOM=function(e){var n=this;return this.pendingHighlight&&(gx(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=gk(function(){if(n.highlight){n.pendingHighlight=null;try{var t=n.highlight();e.innerHTML="",e.append(t)}catch(e){}}})),!0},n}(nv.xO),gR=ng.sU.define({create:function(){return nv.NZ.none},update:function(e,n){var t=n.state.field(gC,!1);if(!t)return nv.NZ.none;var r=g_(n).changed;if(!n.docChanged&&!r)return e.map(n.changes);var i=[],o=function(e,n){i.push({from:e,to:e,value:n})},a=t.startInsertions();if(a){var l=!0,s=!1,c=void 0;try{for(var u,d=a[Symbol.iterator]();!(l=(u=d.next()).done);l=!0)!function(){var e=u.value,t=new gE(e.content,function(){return gI(n.state,e.content)});o(0,nv.NZ.widget({widget:t,side:-1,block:!0}))}()}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}}var p=!0,f=!1,h=void 0;try{for(var m,g=t.lines()[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(v.isDeleted&&o(v.from,gD),v.insertions){var y=!0,w=!1,b=void 0;try{for(var S,Y=v.insertions[Symbol.iterator]();!(y=(S=Y.next()).done);y=!0)!function(){var e=S.value,t=new gE(e.content,function(){return gI(n.state,e.content)});o(v.to,nv.NZ.widget({widget:t,side:1,block:!0}))}()}catch(e){w=!0,b=e}finally{try{y||null==Y.return||Y.return()}finally{if(w)throw b}}}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}return nv.NZ.set(i,!0)},provide:function(e){return nv.Lz.decorations.from(e)}});function gI(e,n){var t,r=document.createDocumentFragment(),i=null==(t=e.facet(gw.BH))?void 0:t.parser;if(!i){var o=document.createElement("span");return o.textContent=n,r.append(o),r}var a=i.parse(n),l=0;if((0,gb.DM)(a,{style:function(n){return(0,gw.GY)(e,n)}},function(e,t,i){if(e>l){var o=document.createElement("span");o.textContent=n.slice(l,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=n.slice(e,t),r.append(a),l=t}),l<n.length){var s=document.createElement("span");s.textContent=n.slice(l),r.append(s)}return r}var gT=function(e){function n(e){var t;return(0,uN._)(this,n),(t=(0,uU._)(this,n)).line=e,t}(0,uO._)(n,e);var t=n.prototype;return t.eq=function(e){return this.line===e.line},t.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(nv.wJ),gF=function(e){function n(e,t){var r;return(0,uN._)(this,n),(r=(0,uU._)(this,n)).elementClass="cm-diff-gutter-block",r.lines=e,t&&(r.preceding=t),r}(0,uO._)(n,e);var t=n.prototype;return t.eq=function(e){var n,t,r,i;if((null==(n=this.lines)?void 0:n.length)!==(null==e||null==(t=e.lines)?void 0:t.length)||(null==(r=this.preceding)?void 0:r.length)!==(null==e||null==(i=e.preceding)?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var s=0;s<this.lines.length;s++){var c=this.lines[s],u=e.lines[s];if(c.height!==u.height||c.left!==u.left||c.right!==u.right)return!1}return!0},t.toDOM=function(){var e=this,n=document.createElement("div");if(this.preceding){var t=this.preceding.slice().reverse(),r=0,i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r+=c.height;var u=this.piece(c);u.style.position="absolute",u.style.top="-".concat(r,"px"),n.prepend(u)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}var d=this.lines.map(function(n){return e.piece(n)});return n.append.apply(n,(0,em._)(d)),n},t.piece=function(e){var n=e.height,t=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==t&&(i.innerText=t.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(n,"px"),a.append(i,o),(null===t||null===r)&&(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===t&&a.classList.add("cm-diff-gutter-inserted")),a},n}(nv.wJ),gP=(0,nv.cU)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var n=e.viewportLineBlocks,t=[],r=g_(e.state).compareTo,i=e.state.field(gC,!1),o=function(e,n){t.push({from:e,to:e,value:n})};if(!r||!i){var a=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=e.state.doc.lineAt(d.from).number;if(d.type===nv._B.Text)o(d.from,new gT(p));else if(Array.isArray(d.type)){var f=!0,h=!1,m=void 0;try{for(var g,v=d.type[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var y=g.value;if(y.type===nv._B.Text){o(y.from,new gT(p));break}}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return ng.om.of(t,!0)}var w=!0,b=!1,S=void 0;try{for(var Y,_=n[Symbol.iterator]();!(w=(Y=_.next()).done);w=!0){var A=Y.value,C=[],k=e.state.doc.lineAt(A.from).number,x=i.line(k);if(x){var D=e.defaultLineHeight,E=x.offset,R=x.isDeleted,I=x.insertions,T=1===k?i.startInsertions():null,F=T?T.length:0,P=T?[]:null;if(!(Array.isArray(A.type)&&A.type.length>=F+(null!=(O=null==I?void 0:I.length)?O:0)+1)){if(T&&P){var L=!0,U=!1,N=void 0;try{for(var O,M,H=T[Symbol.iterator]();!(L=(M=H.next()).done);L=!0){var B=M.value;P.push({height:D,left:null,right:B.number})}}catch(e){U=!0,N=e}finally{try{L||null==H.return||H.return()}finally{if(U)throw N}}}if(C.push({height:A.height,left:k,right:R?null:k+E}),I){var z=!0,W=!1,G=void 0;try{for(var V,Z=I[Symbol.iterator]();!(z=(V=Z.next()).done);z=!0){var j=V.value;C.push({height:D,left:null,right:j.number})}}catch(e){W=!0,G=e}finally{try{z||null==Z.return||Z.return()}finally{if(W)throw G}}}o(A.from,new gF(C,P));continue}for(var q=0;q<A.type.length;q++){var K=A.type[q];if((null==K?void 0:K.type)===nv._B.Text){if(T&&P)for(var $=0;$<T.length;$++){var J,Q=T[$],X=A.type[q-$-1];P.push({height:null!=(J=null==X?void 0:X.height)?J:D,left:null,right:Q.number})}if(C.push({height:K.height,left:k,right:R?null:k+E}),I)for(var ee=0;ee<I.length;ee++){var en,et=I[ee],er=A.type[q+ee+1];C.push({height:null!=(en=null==er?void 0:er.height)?en:D,left:null,right:et.number})}break}}o(A.from,new gF(C,P))}}}catch(e){b=!0,S=e}finally{try{w||null==_.return||_.return()}finally{if(b)throw S}}return ng.om.of(t,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var n=!0,t=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(g_(a).changed)return!0}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1},initialSpacer:function(e){return new gT(e.state.doc.lines)},updateSpacer:function(e,n){var t=n.state.doc.lines;return g_(n.state).compareTo?new gF([{height:0,left:t,right:t}]):new gT(t)}}),gL="#0053A644",gU="#c93c3733",gN=[nv.Lz.theme({".cm-diff-inserted":{backgroundColor:gL},".cm-diff-deleted":{backgroundColor:gU},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:gL,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:gU,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),gY.state,gC,gR,gP,(0,gw.Lv)({openText:"▼",closedText:"▶︎"})],gO=t(48122),gM=function(e){return e[e.Insertion=0]="Insertion",e[e.Deletion=1]="Deletion",e}({}),gH=function(){function e(n){(0,uN._)(this,e),this.map=new Map,this.duration=n}var n=e.prototype;return n.set=function(e,n,t,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(n,{from:e,to:n,time:t,type:r,cursor:i})},n.get=function(e,n){var t=this.map.get(e);if(t)return t.get(n)},n.update=function(n){var t=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,s=this[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(!(t-c.time>this.duration)){var u=n.changes.mapPos(c.from,-1,ng.iR.TrackDel),d=n.changes.mapPos(c.to,-1,ng.iR.TrackDel);if(null!==u&&null!==d){var p=c.cursor;n.docChanged&&(p=!1),r.set(u,d,c.time,c.type,p)}}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n.changes.iterChangedRanges(function(e,n,i,o){r.set(i,o,t,+(i===o),!0)},!0),r},n.cursors=function(){var e,n,t,r,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:e=!0,n=!1,t=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,5];if(!(o=i.value).cursor)return[3,4];return[4,{type:o.type,pos:o.to}];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),n=!0,t=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}})},n[Symbol.iterator]=function(){var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=!0,s=!1,c=void 0;try{for(var u,d=a.values()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;e.push(p)}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e[Symbol.iterator]()},e}(),gB=function(){function e(n){var t=this;(0,uN._)(this,e),this.view=n,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],n=t.view.scrollDOM.getBoundingClientRect(),r=t.view.scrollDOM.scrollTop,i=t.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var s,c=t.elements.values()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,d=u.dom,p=u.pos,f=u.offsetX,h=u.offsetY,m=t.view.coordsAtPos(p),g=t.view.lineBlockAt(p);if(!m){e.push({dom:d,x:null,y:null});continue}var v=g.top-r+n.top+t.view.documentPadding.top,y=Math.round((m.top-v)/t.view.defaultLineHeight)*t.view.defaultLineHeight+v,w=i+m.left-n.left+f,b=r+y-n.top+h;e.push({dom:d,x:w,y:b})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return e},write:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)!function(){var e=i.value,n=e.dom,t=e.x,r=e.y;if(null===t||null===r)return n.style.visibility="hidden",n.style.transition="none";n.style.visibility="",n.style.transform="translate(".concat(t,"px, ").concat(r,"px)"),n.style.transition.startsWith("none")&&requestAnimationFrame(function(){n.style.transition=""})}()}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}}}var n=e.prototype;return n.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},n.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var n=Array.from(this.elements.values()),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=e.changes.mapPos(l.pos,-1,ng.iR.TrackDel);if(!s){this.removeElement(l.dom);continue}l.pos=s}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},n.addElement=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:n,offsetX:t,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},n.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},n.updateElement=function(e,n){var t=n.pos,r=n.offsetX,i=n.offsetY,o=this.elements.get(e);o&&(void 0!==t&&(o.pos=t),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},n.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}(),gz="cm-flash-insertion",gW="cm-flash-deletion",gG="cm-flash-element",gV=nv.Lz.theme((0,g._)({},".".concat(gz,", .").concat(gW),{display:"inline-block"})),gZ=function(e){function n(){return(0,uN._)(this,n),(0,uU._)(this,n,arguments)}(0,uO._)(n,e);var t=n.prototype;return t.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if(e instanceof n&&e.type===this.type)return!0;e=e.parentElement}return!1},t.stop=function(){var e,n;null==(n=this.animation)||null==(e=n.cancel)||e.call(n)},t.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var n=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(n>1e3)){var t=this.type===gM.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)";this.animate&&(this.animation=this.animate({backgroundColor:e?[t,t,"transparent"]:["transparent",t,"transparent"],offset:[0,.05,1]},{id:"cm-flash-anim",duration:1e3,easing:"ease-in-out",delay:-n}))}}},t.connectedCallback=function(){this.play()},t.attributeChangedCallback=function(e,n,t){"data-time"===e&&t&&this.play()},(0,gO._)(n,[{key:"type",get:function(){return this.classList.contains(gz)?gM.Insertion:gM.Deletion}},{key:"isPlaying",get:function(){var e;return(null==(e=this.animation)?void 0:e.playState)==="running"}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,m7._)(HTMLElement));customElements.get(gG)||customElements.define(gG,gZ);var gj=function(){function e(n){(0,uN._)(this,e),this.view=n,this.prevFlashes=new gH(1e3),this.decorations=nv.NZ.set([]),this.hasRenderedOnce=!1,this.overlay=new gB(n)}var n=e.prototype;return n.destroy=function(){this.overlay.destroy()},n.update=function(e){if(!this.hasRenderedOnce){e.docChanged&&(this.hasRenderedOnce=!0);return}var n=this.prevFlashes.update(e),t=[],r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;switch(s.type){case gM.Insertion:t.push({from:s.from,to:s.to,value:(c=s.time,nv.NZ.mark({class:gz,tagName:gG,attributes:{"data-time":c.toString()}}))});break;case gM.Deletion:var c,u,d=e.state.wordAt(s.from);d&&t.push({from:d.from,to:s.to,value:(u=s.time,nv.NZ.mark({class:gW,tagName:gG,attributes:{"data-time":u.toString()}}))})}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}this.overlay.clear();var p=this.view.defaultLineHeight.toString()+"px",f=!0,h=!1,m=void 0;try{for(var g,v=n.cursors()[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var y=g.value,w=y.type,b=y.pos,S=function(e,n){var t=e===gM.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=n,r.style.borderRadius="1px",r.style.backgroundColor=t,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}(w,p);this.overlay.addElement(S,b)}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}this.prevFlashes=n,this.decorations=nv.NZ.set(t,!0)},e}(),gq=nv.Z9.fromClass(gj,{decorations:function(e){return e.decorations}}),gK=ng.Nb.lowest([gV,gq]),g$=t(57762),gJ=function(){function e(n){(0,uN._)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var t=!0,r=!1,i=void 0;try{for(var o,a,l=n[Symbol.iterator]();!(t=(a=l.next()).done);t=!0)o=this,function(){var e=a.value,n=e.changes,t=e.invertedChanges,r=null,i=!1;n.iterChangedRanges(function(e,n,t,o){i||(r||(r=o),t!==o&&(i=!0))}),o.forward.push(n),o.inverted.push(t),o.locations.push(r)}()}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}var n=e.prototype;return n.slice=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(n>this.length||t>this.length||n<0||t<0)throw Error("Invalid version range");if(n===t){if(0===this.length)return[ng.VR.empty(0),null];var r=this.forward[n].newLength;return[ng.VR.empty(r),null]}var i=n<t?gQ(this.forward.slice(n,t)):gQ(this.inverted.slice(t,n).reverse()),o=n<t?n:t-1,a=null!=(e=this.locations[o])?e:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},n.get=function(e){if(e>this.length||e<0)throw Error("Invalid version");return this.changes[e]},n.documentFor=function(e){if(e>this.length||e<0)throw Error("Invalid version");if(0===this.length)return"";var n=(0,v._)(this.slice(0,e),1)[0],t=ng.EY.of([""]);return n.apply(t).sliceString(0)},(0,gO._)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function gQ(e){if(0===e.length)return ng.VR.empty(0);if(1===e.length)return e[0];var n=(0,pP._)(e),t=n[0],r=n.slice(1),i=t,o=!0,a=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;i=i.compose(u)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return i}var gX=t(83479),g0=new n_.k(function(){return(0,nv.BE)()}),g1=[gK,gN];function g2(e){var n,t,r,i=e.filePath,o=(0,eR.N_)(),a=(0,nY.A)(),l=a.ref,s=a.view;(0,gX.Hn)(s),(0,eR.sC)(s);var c=mK();n=(0,y.useMemo)(function(){return(null==o?void 0:o.changes)?new gJ(o.changes):null},[null==o?void 0:o.changes]),t=(0,y.useMemo)(function(){return n?n.documentFor(n.length):null},[n]),r=(0,y.useRef)({current:-1,next:0,pending:!1}),(0,y.useEffect)(function(){if(s)return function(){r.current.pending=!1,r.current={current:-1,next:0,pending:!1}}},[s]),(0,y.useEffect)(function(){if(s&&o&&n){o.comparing?gA(s,t):gA(s,null);var e=r.current;e.next=o.version,e.pending||e.current===e.next||(e.pending=!0,requestAnimationFrame(function(){!1!==e.pending&&(e.pending=!1,s&&n&&e.current!==e.next&&(function(e,n,t,r){var i=(0,v._)(n.slice(t+1,r+1),2),o=i[0],a=i[1];if(o.length!==e.state.doc.length){var l=(0,v._)(n.slice(0,r+1),1)[0];if(l.length!==e.state.doc.length)throw Error("Unresolvable mismatch between changes and document");e.dispatch({changes:{from:0,to:e.state.doc.length}}),e.dispatch({changes:l});return}e.dispatch({changes:o,effects:a?nv.Lz.scrollIntoView(a,{yMargin:10}):void 0})}(s,n,e.current,e.next),e.current=e.next))}))}},[s,o,n,t]);var u=g0.use();return(0,f.Y)("div",{css:g$.jy,children:(0,f.Y)("div",{css:g$.mV,children:o&&0===o.count?(0,f.Y)(g4,{}):(0,f.Y)("div",{css:g$.mV,children:(0,f.Y)(nb.Ay,{ref:l,css:g$.$1,filePath:i,extensions:[u,g1],initializing:!o,onException:function(e){c(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function g4(){return(0,f.Y)("div",{css:[g$.mV,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,f.Y)("span",{children:"This file has no history."})})}var g5=h.ZU.Object({type:h.ZU.Literal("history"),data:h.ZU.Object({path:h.ZU.Union([h.ZU.String(),h.ZU.Null()])})}),g3={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(g7,(0,nh._)((0,eg._)({},n.data),{performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.size;return(0,f.Y)(gt.A,{size:n})},getTitle:function(e){return e.data.path?"History - ".concat((0,tg.WP)(e.data.path)):"History - no file open"},category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(g5,e)}};function g7(e){var n=e.path,t=e.performPaneOperation,r=(0,v._)((0,y.useState)(function(){return(0,e0.y$)()}),1)[0],i=(0,v._)((0,y.useState)(function(){return(0,e0.y$)()}),1)[0],o=(0,ts.KA)({path:n,performPaneOperation:t});(0,tv.Qt)(function(){if(o)return{commands:[{commands:o}]}},[o]);var a=(0,pj.A)(function(){return function(){t({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})}},[n,t]);return n?(0,f.Y)(gX.dz.Provider,{value:r,children:(0,f.Y)(eR.GK.Provider,{value:i,children:(0,f.FD)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,f.Y)(ts.ou,{path:n,performPaneOperation:t}),(0,f.Y)(g2,{filePath:n}),(0,f.Y)(gv,{filePath:n,onCloseHistory:a})]})})}):null}var g6=t(79107),g8=t(69961),g9=t(50301),ve=(0,eo.x)({button:{width:"fit-content"}});function vn(e){var n=e.code,t=e.activeFile,r=(0,g9.vO)(),i=(0,g8.A)(t),o=i?{text:"Insert",iconRight:(0,f.Y)(rU.A,{}),onClick:function(){var e,t,o;return i({code:n,insertAt:null!=(o=null==(t=r())||null==(e=t.position)?void 0:e.offset)?o:"end"})}}:{text:"Copy",iconLeft:(0,f.Y)(fF.A,{}),onClick:function(){return(0,L.default)(n)}};return(0,f.Y)(ek.ui,{background:"default",children:(0,f.Y)(M.$n,(0,eg._)({size:"small",variant:"outlined",css:ve.button},o))})}var vt=(0,eo.x)({self:ea.wp.colWithGap(4),content:[ea.wp.backgroundColor.backgroundRoot,ea.wp.borderRadius(4),ea.wp.p(4),ea.wp.align.center,ea.wp.maxWidth("100%"),ea.wp.overflowX("auto"),{width:"fit-content"}]});function vr(e){var n=e.method,t=e.content,r=e.activeFile,i=(0,v._)((0,y.useState)(t),2),o=i[0],a=i[1];return(0,f.FD)(j.S,{css:vt.self,children:[(0,f.Y)(vc,{title:n}),(0,f.Y)(j.S,{css:vt.content,row:!0,gap:4,children:o.map(function(e,t){var r="".concat(n,"-").concat(t);return"input"===e.type?(0,f.Y)(vo,{i:t,value:e.value,placeholder:e.placeholder,setContent:a},r):(0,f.Y)(vl,{value:e.value},r)})}),(0,f.Y)(vn,{code:o.reduce(function(e,n){return e+(n.value||("input"===n.type?n.placeholder:""))},""),activeFile:r})]})}var vi=(0,eo.x)({self:[ea.wp.width(64),ea.wp.height(24),ea.wp.zIndex(1)]});function vo(e){var n=e.i,t=e.value,r=e.placeholder,i=e.setContent;return(0,f.Y)(B.pd,{onChange:function(e){i(function(t){return t.map(function(t,r){return n===r?(0,nh._)((0,eg._)({},t),{value:e.target.value}):t})})},placeholder:r,value:t||"",css:vi.self})}var va=(0,eo.x)({self:[ea.wp.borderRadius(0),ea.wp.backgroundColor.backgroundRoot],code:[ea.wp.font.code,ea.wp.color.greyStronger,ea.wp.p(4),{whiteSpace:"pre-wrap"}]});function vl(e){var n=e.value;return(0,f.Y)(j.S,{css:va.self,children:(0,f.Y)(V.EY,{css:va.code,children:n})})}var vs=(0,eo.x)({self:ea.wp.rowWithGap(4),bold:{fontWeight:N.LU.fontWeightMedium}});function vc(e){var n=e.title,t=(0,v._)((0,pj.A)(function(){var e=(0,pP._)(n.split(" "));return[e[0],e.slice(1).join(" ")]},[n]),2),r=t[0],i=t[1];return(0,f.FD)(j.S,{css:vs.self,children:[(0,f.Y)(V.EY,{css:vs.bold,multiline:!1,children:r}),(0,f.Y)(V.EY,{color:"dimmer",multiline:!1,children:i})]})}var vu=function(e){return e.IMPORT="Import the database",e.CREATE="Create a new database",e.SET="Set a key to a value",e.GET="Get a key's value",e.DELETE="Delete a key",e.LIST="List all keys",e.LIST_PREFIX="List keys with a prefix",e}(vu||{}),vd={language:"Bash",methods:[vm("Set a key to a value","curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),vm("Get a key's value","curl $REPLIT_DB_URL/{{key}}"),vm("Delete a key","curl -XDELETE $REPLIT_DB_URL/{{key}}"),vm("List all keys",'curl "$REPLIT_DB_URL?prefix={{key}}"')]},vp={language:"Node",methods:[vm("Import the database",'const Database = require("@replit/database")'),vm("Create a new database","const db = new Database()"),vm("Set a key to a value",'db.set("{{key}}", "{{value}}").then(() => {})'),vm("Get a key's value",'db.get("{{key}}").then(value => {})'),vm("Delete a key",'db.delete("{{key}}").then(() => {})'),vm("List all keys","db.list().then(keys => {\n  console.log(keys);\n})"),vm("List keys with a prefix",'db.list("{{prefix}}").then(matches => {})')]},vf={language:"Go",methods:[vm("Import the database",'import "github.com/replit/database-go"'),vm("Set a key to a value",'db.Set("{{key}}", "{{value}}")'),vm("Get a key's value",'value, _ := database.Get("{{key}}")'),vm("Delete a key",'database.Delete("{{key}}")'),vm("List all keys",'keys, _ := database.ListKeys("")'),vm("List keys with a prefix",'matches, _ := database.ListKeys("{{prefix}}")')]},vh={language:"Python",methods:[vm("Import the database","from replit import db"),vm("Set a key to a value",'db["{{key}}"] = "{{value}}"'),vm("Get a key's value",'db["{{key}}"]'),vm("Delete a key",'del db["{{key}}"]'),vm("List all keys","keys = db.keys()\nprint(list(keys))"),vm("List keys with a prefix",'matches = db.prefix("{{prefix}}")')]};function vm(e,n){return{method:e,content:function(e){for(var n=[],t=0;t<e.length;){var r=e.indexOf("{{",t),i=e.indexOf("}}",t);if(-1===r||-1===i){n.push({type:"code",value:e.substring(t)});break}n.push({type:"code",value:e.substring(t,r)}),n.push({type:"input",placeholder:e.substring(r+2,i)}),t=i+2}return n}(n)}}var vg=(0,eo.x)({self:ea.wp.colWithGap(24),code:[ea.wp.font.code,ea.wp.color.greyStronger,ea.wp.backgroundColor.backgroundRoot,ea.wp.p(4),ea.wp.borderRadius(4)]});function vv(e){var n=e.activeFile,t=(0,pj.A)(function(){switch(n?(0,tg.an)(n):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return vp;case"go":return vf;case"py":return vh;default:return vd}},[n]);return(0,f.FD)(j.S,{css:vg.self,children:[(0,f.FD)(V.EY,{color:"dimmer",children:["You can use the Database from any App by making HTTP requests or a client library as outlined below. We’ve set an environment variable called ",(0,f.Y)("code",{css:vg.code,children:"REPLIT_DB_URL"})," in your App if you'd like to interact with the database directly."]}),t.methods.map(function(e){return(0,f.Y)(vr,{method:e.method,content:e.content,activeFile:n},"".concat(t.language).concat(e.method))})]})}function vy(e){var n=e.title,t=e.defaultExpanded,r=e.children;return(0,f.Y)(O.A,{defaultExpanded:t,headerContent:(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:n}),children:(0,f.Y)(j.S,{p:12,gap:8,children:r})})}var vw=(0,nW.i7)("from{opacity:0}to{opacity:1}"),vb=(0,eo.x)({self:[{animation:"".concat(vw," 100ms forwards ease-in-out alternate")}],selfLoadingText:[ea.wp.height(16),ea.wp.width(48),ea.wp.borderRadius(4),n$.S.backgroundPulse()],selfLoading:[ea.wp.height(12),ea.wp.borderRadius(16),n$.S.backgroundPulse()],text:[ea.wp.rowWithGap(4),{display:"inline-flex"}],textSpan:[ea.wp.width("fit-content"),ea.wp.display.inlineFlex]});function vS(e){var n,t,r=e.database,i=e.loading,o=(null==r?void 0:r.sizeMB)||0,a=(n=1e6*(n=o)/1048576,"".concat(n.toFixed(),"/50 MiB")),l=i||!r;return(0,f.Y)(j.S,{css:vb.self,gap:8,children:l?(0,f.FD)(f.FK,{children:[(0,f.Y)(j.S,{css:vb.selfLoadingText}),(0,f.Y)(j.S,{css:vb.selfLoading})]}):(0,f.FD)(f.FK,{children:[(0,f.FD)(V.EY,{color:"dimmer",css:vb.text,multiline:!1,children:[(0,f.Y)(j.D.span,{css:vb.textSpan,children:a}),(0,f.Y)(j.D.span,{css:vb.textSpan,children:"|"}),(0,f.Y)(j.D.span,{css:vb.textSpan,children:(t=(t=null==r?void 0:r.keysCount)||0,"".concat(t," ").concat((0,oy.A)("key",t)))})]}),(0,f.Y)(cs.W,{current:o,total:50,tooltip:a})]})},l?"databaseLoadingStats":"databaseLoadedStats")}function vY(){var e=(0,ev._)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return vY=function(){return e},e}function v_(){var e=(0,ev._)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return v_=function(){return e},e}var vA={},vC=(0,ey.J1)(vY()),vk=(0,ey.J1)(v_(),vC),vx=t(52027),vD=(0,eo.x)({sectionWrapper:[ea.wp.width("100%"),ea.wp.maxWidth(450)]});function vE(e){var n,t,r,i,o,a,l,s,c,u=e.performPaneOperation,d=(l=(i={variables:{replID:(0,P.A)()},pollInterval:1e4},o=(0,eg._)({},vA,i),a=ew.I(vk,o)).data,s=a.error,c=a.loading,l&&("Repl"===l.repl.__typename?t=null==l||null==(r=l.repl)?void 0:r.database:n="Could not fetch Database info"),s&&("GraphQL error: You don't have access to this database"===s.message?t=null:n=s.message),{db:t,loading:c,error:n}),p=d.db,h=d.error,m=d.loading,g=(0,g9.rM)(),v=(0,tt.Vv)().getTitle({type:"database"});return(0,f.Y)(mH.A,{pane:{type:"database"},headerText:v,action:(0,f.FD)(j.S,{css:vD.sectionWrapper,gap:16,children:[h?(0,f.Y)(iX.N,{colorway:"negative",text:h}):null,(0,f.Y)(vy,{title:"Storage capacity",children:(0,f.Y)(vS,{database:p,loading:m})}),(0,f.Y)(vy,{title:"How to use the database",children:(0,f.Y)(vv,{activeFile:g})}),(0,f.Y)(vR,{performPaneOperation:u})]})})}function vR(e){var n=e.performPaneOperation;return(0,f.Y)(re.v,{href:t8.ik.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),n({operation:"open",pane:{type:"docs",data:{url:t8.ik.REPL_DATABASE}}})},iconLeft:(0,f.Y)(vx.A,{}),text:"Learn more in the docs"})}var vI=t(22582),vT=h.ZU.Object({type:h.ZU.Literal("database")}),vF={Content:function(e){var n=e.options.performPaneOperation;return(0,f.Y)(vE,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,f.Y)(ti.Vx.Provider,{value:{color:N.LU.blurpleStronger,size:n},children:(0,f.Y)(vI.A,{})})},getTitle:function(){return"Replit Key-Value Store"},description:"Free, easy-to-use key-value store suitable for unstructured data, caching, session management, fast lookups, and flexible data models",category:tt.bY.CloudServices,decode:function(e){return m.T(vT,e)}},vP=t(69945),vL=t.n(vP),vU=t(7357),vN=t(22074),vO=t(59255),vM=t(77694),vH=t(13528),vB=t(12056),vz=t(64237),vW=(0,y.memo)(vM.A),vG=(0,eo.x)({bodyRoot:[ea.wp.overflowY("auto")],contentRoot:[ea.wp.height("100%"),ea.wp.width("100%"),ea.wp.overflow("auto"),ea.wp.zIndex(2),ea.wp.align.center,ea.wp.py(16),ea.wp.px(16),ea.wp.borderRadius(8),(0,g._)({margin:"0 auto"},"@media only screen and (min-width: ".concat(lL.LO.tabletMin,"px)"),ea.wp.px(32))],emptyState:[{"& button":[{color:N.LU.foregroundDimmer}]}],markdownContainer:[ea.wp.width("100%"),{"& .rendered-markdown":[ea.wp.flex.column,ea.wp.center],"& .rendered-markdown > *":[ea.wp.maxWidth(840),ea.wp.width("100%")],"& .rendered-markdown > table":ea.wp.maxWidth("100%")}],paneRoot:[ea.wp.position.relative,ea.wp.display.flex,ea.wp.flex.column,ea.wp.overflowY("hidden"),ea.wp.height("100%"),ea.wp.width("100%")]});function vV(e){var n,t,r=(0,A.A)().fs,i=(0,v._)((n=(0,y.useRef)(!1),t=(0,y.useRef)(null),[(0,tF.A)(function(){n.current=!0,t.current&&clearTimeout(t.current),t.current=setTimeout(function(){n.current=!1},150)},{type:"throttle",wait:37.5}),n]),2),o=i[0],a=i[1],l=(0,y.useRef)(null),s=(0,vU.j)(),c=e.path,u=e.performPaneOperation,d=(0,y.useCallback)(function(){u({operation:"replace",pane:{type:"codeEditor",data:{path:c}}}),u({operation:"commit"})},[u,c]);(0,tv.Qt)(function(){return{commands:[{commands:[{match:vO.G2,data:{label:"Open in Editor",icon:(0,f.Y)(h_.A,{}),type:"action",run:d}}]}]}},[d]);var p=e.isHidden,h=(0,vz.Af)();(0,y.useEffect)(function(){if(!p){var e=vL()(function(e){(0,vN.A)(e,{behavior:s?"auto":"smooth",scrollMode:"if-needed"})},100),n=vL()(function(n){if(c===(null==n?void 0:n.path)&&n&&!a.current){var t=l.current?function(e,n){var t=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null==t?void 0:t.length))return null;var r=Array.from(t).reverse(),i=n.line,o=n.column,a=!0,l=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=d.dataset.sourcepos;if(!p)throw Error("Expected data source pos on selected element");var f=(0,v._)(p.split("-"),2),h=f[0],m=f[1],g=(0,v._)(h.split(":").map(Number),2),y=g[0],w=g[1],b=(0,v._)(m.split(":").map(Number),2),S=b[0],Y=b[1];if(i>=y&&o>=w&&(i<S||i===S&&o<=Y))return d}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}}(l.current,n.position):null;t&&e(t)}},200),t=h.subscribe(n);return function(){n.cancel(),e.cancel(),t()}}},[h,p,s,c]);var m=(0,v._)((0,y.useState)(null),2),g=m[0],w=m[1];return(0,y.useEffect)(function(){return w(null),r.watchTextFile(c,{onReady:function(e){w(e.initialContent.toString())},onChange:function(e){w(e.latestContent)},onMoveOrDelete:function(e){e.eventType===nn.dV.Delete&&u({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[c,r,u]),(0,f.FD)(j.S,{css:vG.paneRoot,children:[(0,f.Y)(ts.ou,{path:e.path,performPaneOperation:u,children:g&&g.trim().length?(0,f.Y)(vH.k,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:d,icon:(0,f.Y)(h_.A,{})}):null}),(0,f.Y)(j.S,{css:vG.bodyRoot,grow:!0,shrink:!0,children:(0,f.Y)(vZ,{ref:o,content:g,fs:r,markdownContainerRef:l,openInEditor:d,path:c})})]})}var vZ=(0,y.forwardRef)(function(e,n){var t=e.content,r=e.fs,i=e.markdownContainerRef,o=e.openInEditor,a=e.path;return null===t?(0,f.Y)(vj,{}):(0,f.Y)(j.S,{css:vG.contentRoot,gap:8,innerRef:n,children:(0,f.Y)(j.S,{innerRef:i,css:vG.markdownContainer,children:t.trim().length?(0,f.Y)(vW,{path:a,source:t,fs:r,sourcePos:!0}):(0,f.Y)("div",{className:"rendered-markdown rendered-markdown-empty",children:(0,f.FD)(j.S,{css:vG.emptyState,gap:4,align:"center",innerRef:n,children:[(0,f.Y)(V.EY,{color:"dimmer",children:(0,f.Y)("i",{children:"This file is empty"})}),(0,f.Y)(M.$n,{text:"Open in Editor",iconLeft:(0,f.Y)(h_.A,{}),onClick:o,variant:"nofill"})]})})})})});function vj(){var e=(0,v._)((0,y.useState)(!1),2),n=e[0],t=e[1];return(0,y.useEffect)(function(){var e=setTimeout(function(){return t(!0)},500);return function(){clearTimeout(e)}},[]),n?(0,f.Y)(vB.A,{}):null}var vq=t(51639),vK=h.ZU.Object({type:h.ZU.Literal("markdown"),data:h.ZU.Object({path:h.ZU.String({minLength:1})})}),v$={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(vV,{path:n.data.path,isHidden:!!t.isHidden,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.size;return(0,f.Y)(vq.A,{fill:"currentColor",size:n})},getTitle:function(e){return e.data.path?(0,tg.WP)(e.data.path):"Markdown"},category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(vK,e)}},vJ=h.ZU.Object({type:h.ZU.Literal("media"),data:h.ZU.Object({path:h.ZU.String()})}),vQ={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(vX,{path:n.data.path,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.pane,t=e.size;return(0,f.Y)(ty.A,{path:n.data.path,size:t})},getTitle:function(e){return(0,tg.WP)(e.data.path)},category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(vJ,e)}};function vX(e){var n=e.path,t=e.performPaneOperation,r=(0,A.A)().fs,i=(0,ts.KA)({path:n,performPaneOperation:t}),o=i?(0,em._)(i):[],a=(0,y.useCallback)(function(){t({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})},[t,n]),l={match:vO.G2,data:{label:"Open in Editor",icon:(0,f.Y)(h_.A,{}),type:"action",run:function(){a()}}};return(0,tg.Z7)(n)&&o.push(l),(0,tv.Qt)(function(){if(i)return{commands:[{commands:o}]}},[i]),(0,f.FD)(f.FK,{children:[(0,f.Y)(ts.ou,{path:n,performPaneOperation:t,children:(0,f.Y)(vH.k,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:a,icon:(0,f.Y)(h_.A,{})})}),(0,f.Y)(ts.UC,{centered:!0,children:(0,f.Y)(rP.Ay,{filePath:n,fs:r})})]})}var v0=t(22799),v1="DATABASE_URL",v2="PGDATABASE",v4="PGHOST",v5="PGPORT",v3="5432",v7="PGUSER",v6="PGPASSWORD",v8=function(e){var n=e.connectionString,t=e.databaseName,r=new URL(n.replace("postgres://","https://").replace("postgresql://","https://"));return new Map([[v1,n],[v2,t],[v4,r.host],[v5,v3],[v7,r.username],[v6,r.password]])};function v9(){return(v9=(0,w._)(function(e){var n,t;function r(){return(r=(0,w._)(function(){var e,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:return[4,n.read()];case 1:e=p.sent(),r=new Map,i=!0,o=!1,a=void 0;try{for(l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u=(c=(0,v._)(s.value,2))[0],d=c[1],e.get(u)!==d&&r.set(u,d)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r.size>0&&n.addEntries(r),[2]}})})).apply(this,arguments)}return(0,b.YH)(this,function(i){switch(i.label){case 0:return n=e.secrets,t=v8({connectionString:e.connectionString,databaseName:e.databaseName}),[4,function(){return r.apply(this,arguments)}()];case 1:return i.sent(),[2]}})})).apply(this,arguments)}var ye=t(67662),yn=function(e){(0,tP.u4)(tP.AZ.DATABASE_USED,(0,eg._)({type:"PostgreSQL",provider:"neon"},e))},yt=t(69554),yr=function(e){var n=e.envVarKey,t=e.envVarValue,r=e.isSecret,i=(0,nJ.c)()("db-env-var-".concat(n)),o=(0,v._)((0,y.useState)(!1),2),a=o[0],l=o[1];return(0,f.FD)(j.S,{css:[ea.wp.flex.wrap,ea.wp.align.end,ea.wp.pb(8),{gap:N.LU.space8}],row:!0,children:[(0,f.FD)(j.S,{css:[{flexBasis:250},ea.wp.flex.grow(0),ea.wp.flex.shrink(1)],gap:8,children:[(0,f.Y)("label",{css:ea.wp.color.foregroundDimmer,htmlFor:i,children:n}),(0,f.Y)(B.pd,{id:i,type:!r||a?"text":"password",readOnly:!0,value:t})]}),(0,f.Y)(M.$n,{text:"Copy",iconLeft:(0,f.Y)(q.A,{}),onClick:function(){(0,L.default)(t),yn({action:"envVarCopied",envVarKey:n,envVarType:"value"})}}),r?(0,f.Y)(M.$n,{text:a?"Hide":"View",iconLeft:a?(0,f.Y)(yt.A,{}):(0,f.Y)(hA.A,{}),onClick:function(){return l(function(e){return!e})}}):null]})},yi=function(e){return(0,y.useCallback)(function(n){return function(e){return v9.apply(this,arguments)}({secrets:e,connectionString:n.connectionString,databaseName:n.databaseName})},[e])},yo=function(e){var n=e.connectionString,t=e.databaseName,r=(0,pj.A)(function(){return v8({connectionString:n,databaseName:t})},[n,t]),i=r.get(v4),o=r.get(v7),a=r.get(v6);if("string"!=typeof i||"string"!=typeof o||"string"!=typeof a)throw Error("Expected all envVars to exist");var l=yi((0,A.A)().secrets);return(0,y.useEffect)(function(){l({connectionString:n,databaseName:t})},[n,t,l]),(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(yr,{envVarKey:v1,envVarValue:n,isSecret:!0}),(0,f.Y)(yr,{envVarKey:v2,envVarValue:t}),(0,f.Y)(yr,{envVarKey:v4,envVarValue:i}),(0,f.Y)(yr,{envVarKey:v5,envVarValue:v3}),(0,f.Y)(yr,{envVarKey:v7,envVarValue:o}),(0,f.Y)(yr,{envVarKey:v6,envVarValue:a,isSecret:!0})]})},ya=t(43886);function yl(){var e=(0,ev._)(["\n  fragment CurrentUserUsageBasedBillingSummary on CurrentUser {\n    __typename\n    usageBasedBilling {\n      __typename\n      ... on UserUsageBasedBillingSummary {\n        capabilities {\n          canUseUsageBasedBilling\n          explanation\n          hasPaymentMethod\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return yl=function(){return e},e}var ys=(0,ey.J1)(yl());function yc(){var e=(0,ev._)(["\n  query DatabaseFrozen {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return yc=function(){return e},e}var yu={},yd=(0,ey.J1)(yc(),ys),yp=t(25763),yf=t(29839),yh=t(35865),ym=t(97802),yg=t(41696),yv=(0,eo.x)({cta:[ea.wp.width("100%")],ctaStatusBanner:[ea.wp.textAlign.left]});function yy(e){var n=e.loading,t=e.ubbExplanation,r=e.hasPaymentMethod,i=e.handleOnUnpause,o=e.refetchUbbCapabilitiesQueryData,a=e.setShowPaymentMethodForm,l=e.showPaymentMethodForm,s=e.setShowSupportForm,c=e.replId,u=(0,iL.m6)();return t===ix.sbu.NeedsSubscription||t===ix.sbu.NeedsSubscriptionOrPaymentMethod?u?(0,f.Y)(iX.N,{text:"You need a subscription to use PostgreSQL databases. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,f.Y)(i0.A,{}),css:yv.ctaStatusBanner}):(0,f.FD)(f.FK,{children:[(0,f.Y)(iH.A,{context:"workspace_postgresql_pane",text:"Upgrade your plan to unpause database",css:yv.cta,colorway:"primary",variant:"outlined",disabled:l,onPlanCheckoutComplete:o}),(0,f.Y)(M.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:yv.cta,disabled:l,loading:n,iconLeft:(0,f.Y)(cc.A,{}),onClick:function(){return a()}})]}):t===ix.sbu.NeedsSmsVerification?(0,f.Y)(yf.A,{context:ix.SGY.Neon,onSuccess:o}):t===ix.sbu.NeedsPaymentMethod?u?(0,f.Y)(iX.N,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,f.Y)(i0.A,{}),css:yv.ctaStatusBanner}):(0,f.Y)(M.$n,{colorway:"primary",text:"Add a payment method",css:yv.cta,disabled:l,loading:n,iconLeft:(0,f.Y)(cc.A,{}),onClick:function(){return a()}}):t===ix.sbu.NeedsUnbanning?(0,f.Y)(ug.d,{text:"Your account currently has restrictions on use PostgreSQL databases. We're here to help! Please reach out to support@replit.com for assistance.",colorway:"warning",iconLeft:(0,f.Y)(i0.A,{}),css:yv.ctaStatusBanner,onClick:function(){return s()}}):t===ix.sbu.InsufficientBudget?(0,f.FD)(f.FK,{children:[(0,f.Y)(iX.N,{text:"You've reached your monthly usage budget. Increase your budget to unpause your database.",colorway:"warning",icon:(0,f.Y)(i0.A,{}),css:yv.ctaStatusBanner}),(0,f.Y)(ym.h,{onUpdateSuccess:o,replId:c})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(M.$n,{colorway:"primary",onClick:i,text:"Unpause database",loading:n,css:yv.cta}),!1===r?(0,f.Y)(ug.d,{text:"Add a payment method to avoid downtime",colorway:"warning",iconLeft:(0,f.Y)(i0.A,{}),css:yv.ctaStatusBanner,onClick:function(){return u?null:a()}}):null]})}function yw(e){var n=e.neonDatabase,t=e.replId;return n.isEphemeral?(0,f.Y)(yh.To,{isFrozen:n.isFrozen,scheduledFreezeTime:n.scheduledFreezeTime,scheduledDeletionTime:n.scheduledDeletionTime}):(0,f.Y)(yb,{replId:t,neonProjectId:n.projectId})}function yb(e){var n,t,r,i=e.replId,o=e.neonProjectId,a=(0,v._)((0,y.useState)(!1),2),l=a[0],s=a[1],c=(0,v._)((0,y.useState)(!1),2),u=c[0],d=c[1],p=(0,nq.A)().showError,h=(n={notifyOnNetworkStatusChange:!0,onError:function(e){p(e.message)}},t=(0,eg._)({},yu,n),ew.I(yd,t)),m=h.loading,g=h.data,w=h.refetch,b=(0,v._)((0,yp.Yc)({refetchQueries:[{query:ya.Or,variables:{input:{replId:i}}}],onError:function(e){p("Error when unfreezing Neon database: ".concat(e.message)),yn({action:"unfreeze",success:!1})},update:function(e,n){var t,r=n.data,a=e.readQuery({query:ya.Or,variables:{input:{replId:i}}});(null==r?void 0:r.unfreezeNeonDatabase.__typename)==="UnfreezeNeonDatabaseResult"&&(null==a||null==(t=a.getNeonDatabases)?void 0:t.__typename)==="GetNeonDatabasesResult"&&e.writeQuery({query:ya.Or,variables:{input:{replId:i}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:a.getNeonDatabases.databases.map(function(e){return e.projectId===o?(0,nh._)((0,eg._)({},e),{isFrozen:!1}):e})}}})},onCompleted:function(e){if((null==e?void 0:e.unfreezeNeonDatabase.__typename)!=="UnfreezeNeonDatabaseResult"){p("Error: Unfreezes Neon Database failed."),yn({action:"unfreeze",success:!1});return}(null==e?void 0:e.unfreezeNeonDatabase.success)?yn({action:"unfreeze",success:!0}):(p("Error: Unfreezes Neon Database failed."),yn({action:"unfreeze",success:!1}))}}),2),S=b[0],Y=b[1].loading,_=(null==g||null==(r=g.currentUser)?void 0:r.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?g.currentUser.usageBasedBilling.capabilities:null;return(0,f.FD)(f.FK,{children:[(0,f.Y)(ld.a,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,f.Y)(yg.A,{onRequestClose:function(){return d(!1)}})}),(0,f.Y)(j.S,{gap:8,children:(0,f.Y)(yy,{replId:i,loading:m||Y,ubbExplanation:null==_?void 0:_.explanation,hasPaymentMethod:null==_?void 0:_.hasPaymentMethod,handleOnUnpause:function(){S({variables:{input:{replId:i,neonProjectId:o}}})},refetchUbbCapabilitiesQueryData:w,setShowPaymentMethodForm:function(){return s(!0)},showPaymentMethodForm:l,setShowSupportForm:function(){return d(!0)}})})]})}var yS=t(32728),yY=t(63799),y_=t(58639),yA=t(53020),yC=t(68712),yk=t(94524),yx=t(48926),yD=t(87376),yE=t(8296),yR=t(23324),yI=t(33813),yT=t(51846),yF=t(34352),yP=t(93529),yL=t(50558),yU={"td,th":{border:"1px solid "+N.LU.outlineDefault}},yN={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},yO={outline:"2px solid ".concat(N.LU.accentPrimaryDefault),outlineOffset:"-2px"},yM=(0,nW.AH)({":focus:focus-visible":yO}),yH=(0,nW.AH)(yO),yB=(0,nW.AH)([yN,yU,yM]),yz=(0,nW.AH)([ea.wp.fontWeight.medium,yN,yU,yM]),yW=(0,nW.AH)({"tbody > tr:hover":{backgroundColor:N.LU.backgroundHigher,cursor:"pointer"}});function yG(e){var n=e.type,t=e.style,r=e.children,i=(0,yD.rs)().rowGroupProps;return(0,f.Y)(n,(0,nh._)((0,eg._)({},i),{style:t,children:r}))}function yV(e){var n=e.item,t=e.state,r=e.children,i=(0,y.useRef)(null),o=(0,yE.x)({node:n},t,i).rowProps;return(0,f.Y)("tr",(0,nh._)((0,eg._)({css:yz},o),{ref:i,children:r}))}function yZ(e){var n,t=e.column,r=e.state,i=(0,y.useRef)(null),o=(0,yR.f)({node:t},r,i).columnHeaderProps,a=(0,yI.o)(),l=a.isFocusVisible,s=a.focusProps;return(0,f.Y)("th",(0,nh._)((0,eg._)({},(0,yT.v)(o,s)),{css:[l&&yH,yM],colSpan:t.colspan,style:{textAlign:(null!=(n=t.colspan)?n:1)>1?"center":"left"},ref:i,children:t.rendered}))}function yj(e){var n=e.item,t=e.children,r=e.state,i=(0,y.useRef)(null),o=(0,yF.A)({node:n},r,i).rowProps,a=(0,yI.o)(),l=a.isFocusVisible,s=a.focusProps;return(0,f.Y)("tr",(0,nh._)((0,eg._)({css:[l&&yH,yB]},(0,yT.v)(o,s)),{ref:i,children:t}))}function yq(e){var n=e.cell,t=e.state,r=(0,y.useRef)(null),i=(0,yP.a)({node:n},t,r).gridCellProps,o=(0,yI.o)(),a=o.isFocusVisible,l=o.focusProps;return(0,f.Y)("td",(0,nh._)((0,eg._)({},(0,yT.v)(i,l)),{css:[a&&yH,yM],ref:r,children:n.rendered}))}function yK(e){var n=e.selectionMode,t=e.selectionBehavior,r=(0,yY.j)((0,nh._)((0,eg._)({},e),{showSelectionCheckboxes:"multiple"===n&&"replace"!==t})),i=(0,y.useRef)(null),o=r.collection,a=(0,yL.K)(e,r,i).gridProps;return(0,f.FD)("table",(0,nh._)((0,eg._)({},a),{ref:i,css:[(null==e?void 0:e.onRowAction)&&yW],style:{borderCollapse:"collapse"},children:[(0,f.Y)(yG,{type:"thead",children:o.headerRows.map(function(e){return(0,f.Y)(yV,{item:e,state:r,children:(0,em._)(e.childNodes).map(function(e){return(0,f.Y)(yZ,{column:e,state:r},e.key)})},e.key)})}),(0,f.Y)(yG,{type:"tbody",children:(0,em._)(o.body.childNodes).map(function(e){return(0,f.Y)(yj,{item:e,state:r,children:(0,em._)(e.childNodes).map(function(e){return(0,f.Y)(yq,{cell:e,state:r},e.key)})},e.key)})})]}))}var y$=function(e){var n=e.ariaTableProps,t=e.rows,r=e.columns;return(0,f.FD)(yK,(0,nh._)((0,eg._)({},n),{children:[(0,f.Y)(y_.A,{columns:r,children:function(e){return(0,f.Y)(yA.V,{children:e.value})}}),(0,f.Y)(yC.B,{items:t,children:function(e){return(0,f.Y)(yk.f,{children:function(n){return(0,f.Y)(yx.f,{children:e[n]})}})}})]}))};function yJ(e){var n=e.headerColumns,t=e.bodyData,r=e.ariaLabel,i=e.scrollRef,o=e.onRowAction,a=n.map(function(e,n){return{key:"string"==typeof e?e:"".concat(n),value:e}}),l=t.map(function(e,t){for(var r={id:t},i=0;i<e.length;i++){var o=n[i];r["string"==typeof o?o:"".concat(i)]=e[i]}return r});return(0,f.Y)(y$,{ariaTableProps:{selectionMode:"none","aria-label":void 0===r?"Database Table":r,onRowAction:o,scrollRef:i},columns:a,rows:l})}var yQ=t(2760),yX=(0,eo.x)({self:[ea.wp.flex.column,ea.wp.height("100%")],title:[ea.wp.fontSize(14),ea.wp.ml(8),ea.wp.flex.growAndShrink(1)],main:[ea.wp.overflow("auto"),ea.wp.height("calc(100% - 60px)")]}),y0=function(e){var n=e.headerTitle,t=e.onGoBack,r=e.refresh,i=e.children;return(0,f.FD)(j.S,{css:yX.self,children:[(0,f.FD)(j.S,{pb:8,align:"center",row:!0,children:[(0,f.Y)(eN.K0,{alt:"Go back",size:24,type:"button",onClick:t,children:(0,f.Y)(yQ.A,{})}),(0,f.Y)(V.EY,{css:yX.title,multiline:!1,children:n}),"function"==typeof r?(0,f.Y)(eN.K0,{alt:"Refresh",size:24,type:"button",onClick:r,children:(0,f.Y)(oU.A,{})}):null]}),(0,f.Y)(j.S,{css:yX.main,children:i})]})},y1=(0,e0.eU)(["databaseManager"]),y2=(0,e0.eU)(null,function(e,n,t){var r=e(y1);n(y1,(0,em._)(r).concat([t])),yn({action:"pageNav",databasePage:t})}),y4=(0,e0.eU)(null,function(e,n){var t=e(y1);n(y1,t.slice(0,t.length-1))}),y5=(0,e0.eU)(function(e){var n=e(y1);return n[n.length-1]}),y3=function(){return(0,e1.Xr)(y2)},y7=function(){return(0,e1.Xr)(y4)},y6=function(e,n){var t,r=(0,A.A)().psql,i=(0,v._)((0,y.useState)(),2),o=i[0],a=i[1],l=(0,v._)((0,y.useState)(!1),2),s=l[0],c=l[1],u=(0,y.useCallback)((t=(0,w._)(function(){return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!e)return[2];t.label=1;case 1:return t.trys.push([1,,3,4]),c(!0),[4,r.run({query:e,connectionString:n})];case 2:return a(t.sent()),[3,4];case 3:return c(!1),[7];case 4:return[2]}})}),function(){return t.apply(this,arguments)}),[n,r,e]);return(0,y.useEffect)(function(){u()},[n,r,e,u]),{data:o,loading:s,refetch:u}},y8=function(e){var n=e.rows,t=e.columns;return!Array.isArray(n)||n.length<1?null:{headerColumns:null!=t?t:[],bodyData:n.map(function(e){return Object.values(e)})}},y9=function(e){return y6("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",e.connectionString)},we=(0,e0.eU)(void 0),wn=(0,e0.eU)(function(e){var n=e(we);return null==n?void 0:n.rows.reduce(function(e,n){var t=n.table_name,r=n.column_name;return e[t]||(e[t]=[]),e[t].push(r),e},{})}),wt=function(e){var n=y6("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",e.connectionString).data,t=(0,e1.Xr)(we);(0,y.useEffect)(function(){t(n)},[n,t])},wr=function(e){var n=e.tableName,t=e.connectionString;return y6("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(n.replace(/"/g,'""'),"';"),t).data},wi=function(e){var n=e.tableData,t=e.scrollRef,r=n.headerColumns,i=n.bodyData,o=y3(),a=(0,y.useCallback)(function(e){var n=parseInt(String(e),10);if(!isNaN(n)){var t=i[n][r.indexOf("Name")];o("table/".concat(t))}},[o,r,i]);return(0,f.Y)(yJ,{headerColumns:r,bodyData:i,onRowAction:a,scrollRef:t})},wo=function(e){var n=e.psqlQueryResult,t=e.scrollRef,r=n.data;if(n.loading)return(0,f.Y)(j.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(tw.A,{})});if(null==r?void 0:r.error)return(0,f.Y)(j.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(V.EY,{css:[ea.wp.color.accentNegativeDefault,ea.wp.maxWidth("100%")],children:null==r?void 0:r.error})});var i=r?y8(r):null;return i?(0,f.Y)(wi,{tableData:i,scrollRef:t}):(0,f.Y)(j.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(V.EY,{css:[ea.wp.color.accentPositiveDefault,ea.wp.maxWidth("100%")],children:"No tables found"})})},wa=function(e){var n=e.connectionString,t=y7(),r=(0,y.useRef)(null),i=y9({connectionString:n}),o=i.refetch;return(0,f.Y)(y0,{headerTitle:"All tables",onGoBack:t,refresh:o,children:(0,f.Y)(j.S,{css:[ea.wp.overflow("auto")],grow:!0,shrink:!0,innerRef:r,children:(0,f.Y)(wo,{psqlQueryResult:i,scrollRef:r})})})},wl="1px solid "+N.LU.outlineDefault,ws=(0,nW.AH)([ea.wp.p(8),ea.wp.backgroundColor.backgroundDefault,ea.wp.align.center,ea.wp.borderRadius(0),{borderLeft:wl,borderRight:wl,borderBottom:wl},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(N.LU.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:N.LU.backgroundHigher}}}]),wc=function(e){var n=y9({connectionString:e.connectionString}),t=n.data,r=n.loading,i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1],l=(0,y.useCallback)(function(){a(!0)},[]),s=t?y8(t):null,c=(0,y.useRef)(null);if(!s||r)return null;var u=s.bodyData.length,d=s.headerColumns,p=s.bodyData;return(0,f.Y)(f.FK,{children:(0,f.FD)(j.S,{css:[ea.wp.overflow("auto"),ea.wp.display.grid],innerRef:c,children:[(0,f.Y)(wi,{tableData:{headerColumns:d,bodyData:o?p:p.slice(0,5)},scrollRef:c}),u-5>0&&!o?(0,f.Y)(M.$n,{text:"".concat(u-5," more"),css:ws,onClick:l}):null]})})};function wu(e){var n=e.textAtom,t=e.variant,r=e.className,i=useAtomValue(n);return i?_jsx(Text,{className:r,variant:t,multiline:!1,children:i}):null}function wd(e){var n=e.title,t=e.doWarnAtom,r=e.inactive,i=(0,e1.md)(t);return(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(V.EY,{variant:"small",css:ea.wp.color.foregroundDimmer,multiline:!1,children:void 0!==r&&r?n+" last run":n}),i?(0,f.Y)(i0.A,{color:N.LU.orangeStronger}):null]})}function wp(e){var n=e.title,t=e.totalAtom,r=e.currentAtom,i=e.countAtom,o=e.measure,a=e.limitText,l=e.inactive,s=void 0!==l&&l,c=(0,pj.A)(function(){return(0,e0.eU)(function(e){return wh(e(r),e(t))})},[r,t]),u=(0,pj.A)(function(){return(0,e0.eU)(function(e){return a||function(e,n,t,r,i){if("empty"!==e&&void 0!==n)return"vCPU"===i?wm(100*Math.min(1,n/t))+"% of "+r+" vCPUs":wm(n).toLocaleString()+"/"+wm(t).toLocaleString()+" "+i}(e(c),e(r),e(t),i&&e(i),o)})},[a,c,r,t,i,o]),d=(0,pj.A)(function(){return(0,e0.eU)(function(e){var n=e(c);return"At limit"===n||"Close to limit"===n})},[c]);return(0,f.FD)(j.S,{css:[{flexBasis:32}],grow:2,shrink:2,gap:4,children:[n?(0,f.Y)(wd,{title:n,doWarnAtom:d,inactive:s}):null,(0,f.Y)(wf,{currentAtom:r,totalAtom:t,inactive:s,limitTextAtom:u,mini:!0})]})}function wf(e){var n=e.currentAtom,t=e.totalAtom,r=e.limitTextAtom,i=e.inactive,o=e.mini,a=(0,e1.md)(t),l=(0,e1.md)(n),s=(0,e1.md)(r),c=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return N.LU.accentNegativeDefault;case"Close to limit":return N.LU.orangeDefault}}(wh(l,a));return(0,f.Y)(cs.W,{css:o&&ea.wp.height(8),total:a,current:l,color:c,disabled:i,tooltip:s})}function wh(e,n){if(void 0===e)return"empty";var t=e/n;return t>=1?"At limit":t>=.9?"Close to limit":"fine"}function wm(e){return Math.round((e+Number.EPSILON)*100)/100}var wg="https://docs.replit.com/cloud-services/storage-and-databases/postgresql-on-replit",wv=(0,eo.x)({loadingGhost:[ea.wp.borderRadius(6),{outline:"1px solid transparent"},ea.wp.height(22)],storage:ea.wp.rowWithGap(8)}),wy=function(e){var n=e.dbSize,t=e.totalSize,r=(0,yS.z)(n),i=(0,yS.z)(t),o=(0,pj.A)(function(){return(0,e0.eU)(n)},[n]),a=(0,pj.A)(function(){return(0,e0.eU)(t)},[t]);return(0,f.FD)(f.FK,{children:[(0,f.FD)(V.EY,{css:ea.wp.color.foregroundDimmer,multiline:!1,children:[r,"/",i]}),(0,f.Y)(wp,{totalAtom:a,currentAtom:o,limitText:"".concat(r," / ").concat(i),inactive:!1,measure:"MB"})]})},ww=function(e){var n,t,r=e.connectionString,i=e.quotaLogicalSizeBytes,o=y6("SELECT sum(pg_database_size(datname)) FROM pg_database;",r),a=o.data,l=o.loading,s=y6("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",r),c=s.data,u=s.loading,d=parseInt(null!=(t=null==a||null==(n=a.rows[0])?void 0:n.sum)?t:"0",10),p=null==c?void 0:c.rows.length;return l||u?(0,f.Y)(ek.ui,{elevated:!0,css:wv.loadingGhost,justify:"center",align:"center",row:!0,children:(0,f.Y)(tw.A,{})}):(0,f.FD)(j.S,{css:wv.storage,children:[(0,f.FD)(V.EY,{multiline:!1,children:[p," ",1===p?"table":"tables"]}),(0,f.Y)(wy,{dbSize:d,totalSize:i?parseInt(i,10):0x280000000})]})},wb=function(e){var n=e.neonDatabase,t=e.connectionString,r=e.onOpenDatabaseViewerClick,i=(0,ab.Z)("drizzle-studio-announcement"),o=i.setAsDone,a=i.isLoading,l=i.isDone;return(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(j.S,{children:(0,f.Y)(ww,{connectionString:t,quotaLogicalSizeBytes:n.quotaLogicalSizeBytes})}),(0,f.Y)(wc,{connectionString:t}),(0,f.Y)(M.$n,{text:"See my data",iconLeft:(0,f.Y)(vI.A,{}),onClick:function(){r(),o()}}),a||l?null:(0,f.Y)(iX.N,{colorway:"primary",closable:!0,closeAction:o,title:"New: Database Studio",text:'Click "See my data" to launch the new Database editor. Modify, query, and visualize your data in an easy-to-use interface.'})]})},wS=(0,iE.v)(["databaseStatusColor"]),wY=wS.cssVars,w_=wS.styleTokens,wA=(0,eo.x)({statusDot:[ea.wp.width(8),ea.wp.height(8),ea.wp.backgroundColor.accentPositiveStronger,ea.wp.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(w_.databaseStatusColor,")"),backgroundColor:w_.databaseStatusColor}],text:{color:w_.databaseStatusColor}});function wC(e){var n=e.isFrozen;return(0,f.FD)(j.S,{row:!0,gap:8,align:"center",style:(0,g._)({},wY.databaseStatusColor,n?N.LU.foregroundDimmest:N.LU.accentPositiveStronger),children:[n?null:(0,f.Y)(j.S,{css:wA.statusDot}),(0,f.FD)(V.EY,{css:wA.text,multiline:!1,children:["Database ",n?"paused":"connected"]}),n?(0,f.Y)(iw.A,{css:wA.text}):null]})}var wk=function(e){var n=e.psqlQueryResult,t=e.tableName,r=e.connectionString,i=e.scrollRef,o=n.data,a=n.loading,l=wr({tableName:t,connectionString:r});if(a)return(0,f.Y)(j.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(tw.A,{})});if(null==o?void 0:o.error)return(0,f.Y)(j.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(V.EY,{css:[ea.wp.color.accentNegativeDefault,ea.wp.maxWidth("100%")],children:null==o?void 0:o.error})});var s=o?y8(o):null;if(!s)return(0,f.Y)(j.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(V.EY,{css:[ea.wp.color.accentPositiveDefault,ea.wp.maxWidth("100%")],children:"No rows"})});var c=s.headerColumns,u=s.bodyData;return(0,f.Y)(yJ,{headerColumns:c.map(function(e,n){var t,r=null==l||null==(t=l.rows)?void 0:t.find(function(n){return n.column_name===e}),i=null==r?void 0:r.data_type,o=i?(0,f.Y)(W.a,{text:i}):null;return(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(V.EY,{multiline:!1,children:e}),o]},n)}),bodyData:u,scrollRef:i})},wx=function(e){var n=e.tableName,t=e.connectionString,r=y7(),i=(0,y.useRef)(null),o=y6('SELECT * FROM "'.concat(n.replace(/"/g,'""'),'" LIMIT ').concat(500),t),a=o.refetch;return(0,f.Y)(y0,{headerTitle:n,onGoBack:r,refresh:a,children:(0,f.Y)(j.S,{css:[ea.wp.overflow("auto")],grow:!0,shrink:!0,innerRef:i,children:(0,f.Y)(wk,{psqlQueryResult:o,tableName:n,connectionString:t,scrollRef:i})})})},wD=t(45843),wE=h.ZU.Literal("overview"),wR=h.ZU.Literal("commands"),wI=h.ZU.Literal("settings"),wT=h.ZU.Literal("drizzle-studio");h.ZU.Union([wE,wR,wI,wT]);var wF=h.ZU.Object({restoreToCommitId:h.ZU.Optional(h.ZU.String())}),wP=h.ZU.Union([h.ZU.Object({type:wI,data:h.ZU.Optional(wF)})]),wL=h.ZU.Optional(wP);function wU(e){if(e&&wD.J(wL,e))return e}var wN=(0,y.createContext)(void 0),wO=function(){var e=(0,y.useContext)(wN);if(!e)throw Error("useNeonPaneTabs must be used within a TabProvider");return e},wM=function(e){var n=e.children,t=e.initialOpenAtTab,r=e.performPaneOperation,i=(0,v._)((0,y.useState)(function(){return t?t.type:"overview"}),2),o=i[0],a=i[1],l=(0,v._)((0,y.useState)(function(){return wU(t)}),2),s=l[0],c=l[1],u=(0,y.useRef)(t);(0,y.useEffect)(function(){t&&t!==u.current&&(u.current=t,a(t.type),c(wU(t)))},[t]);var d=(0,y.useCallback)(function(e){a(e),s&&(u.current=void 0,c(void 0),r({operation:"replace",pane:{type:"neon"}}))},[s,r]),p=(0,y.useCallback)(function(e){r({operation:"open",pane:e})},[r]),h=(0,y.useMemo)(function(){return{selectedTab:o,openAtTab:s,selectTab:d,openPane:p}},[o,s,d,p]);return(0,f.Y)(wN.Provider,{value:h,children:n})},wH=t(15423),wB=t(40008),wz=t(23721),wW=(0,e0.eU)(""),wG=(0,e0.eU)(null),wV=(0,e0.eU)(null,function(e,n,t){var r=t.query;r&&n(wW,r);var i=e(wG);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})}),wZ=t(69737),wj=t(26325),wq=(0,wZ.tG)("replDatabasesQueryHistory",[]),wK=function(e,n){return!e.isPinned&&n.isPinned?1:e.isPinned&&!n.isPinned?-1:"number"==typeof e.pinnedTimestamp&&"number"==typeof n.pinnedTimestamp?e.pinnedTimestamp-n.pinnedTimestamp:n.timestamp-e.timestamp},w$=function(e,n){var t=e.findIndex(function(e){return!e.isPinned&&e.data===n.data});-1!==t?e.splice(t,1,n):e.push(n),e.sort(wK);var r=e.filter(function(e){return!e.isPinned}).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}},wJ=t(61191),wQ=t(51349);function wX(e){return(0,f.Y)(ti.Ay,(0,nh._)((0,eg._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M6.862 1.606A.75.75 0 0 1 7.5 1.25h9a.75.75 0 0 1 .67 1.085l-.92 1.842v6.513c.983.988 2.5 2.622 2.5 4.81a.75.75 0 0 1-.75.75h-5.25V22a.75.75 0 0 1-1.5 0v-5.75H6a.75.75 0 0 1-.75-.75c0-2.188 1.517-3.822 2.5-4.81V4.177l-.92-1.842a.75.75 0 0 1 .032-.73ZM8.714 2.75l.457.915A.75.75 0 0 1 9.25 4v7a.75.75 0 0 1-.22.53c-.878.879-1.895 1.93-2.193 3.22h10.326c-.298-1.29-1.315-2.341-2.193-3.22a.75.75 0 0 1-.22-.53V4a.75.75 0 0 1 .08-.335l.457-.915H8.714Z",clipRule:"evenodd"})}))}function w0(e){return(0,f.Y)(ti.Ay,(0,nh._)((0,eg._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M6.862 1.606A.75.75 0 0 1 7.5 1.25h9a.75.75 0 0 1 .67 1.085l-.92 1.842v6.513c.983.988 2.5 2.622 2.5 4.81a.75.75 0 0 1-.75.75h-5.25V22a.75.75 0 0 1-1.5 0v-5.75H6a.75.75 0 0 1-.75-.75c0-2.188 1.517-3.822 2.5-4.81V4.177l-.92-1.842a.75.75 0 0 1 .032-.73Z",clipRule:"evenodd"})}))}var w1=function(e){var n=e.id,t=e.data,r=e.isPinned,i=(0,wj.yF)((0,y.useCallback)(function(e,t){var r=e(wq).find(function(e){return e.id===n}),i=(null==r?void 0:r.data)||"";i&&(t(wV,{query:i}),yn({action:"queryHistoryItemSelected"}))},[n])),o=(0,wj.yF)((0,y.useCallback)(function(e,t){var r=e(wq);t(wq,(0,iD.jM)(r,function(e){var t=e.find(function(e){return e.id===n});t&&(t.isPinned=!t.isPinned,t.isPinned?t.pinnedTimestamp=Date.now():t.pinnedTimestamp=void 0),e.sort(wK)})),yn({action:"queryHistoryItemPinned"})},[n]));return(0,f.FD)(j.S,{css:[{borderTop:"1px solid ".concat(N.LU.outlineDefault),":hover":{background:N.LU.backgroundHigher}},ea.wp.flex.row,ea.wp.p(8),ea.wp.color.foregroundDimmer,ea.wp.align.center,ea.wp.cursor.pointer],onClick:i,children:[(0,f.Y)(V.EY,{css:[ea.wp.flex.growAndShrink(1)],multiline:!1,children:t}),(0,f.Y)(eN.K0,{alt:"Pin query",onClick:o,children:r?(0,f.Y)(w0,{fill:N.LU.accentPrimaryDefault}):(0,f.Y)(wX,{})})]})},w2=function(e){var n=e.onExpand,t=(0,e1.md)(wq);return(0,f.Y)(O.A,{onClick:n,headerContent:(0,f.FD)(j.S,{row:!0,gap:8,p:2,align:"center",children:[(0,f.Y)(gt.A,{}),(0,f.Y)(V.EY,{css:[ea.wp.color.foregroundDimmest],multiline:!1,children:"Query History"})]}),children:(0,f.Y)(j.S,{gap:8,css:[ea.wp.height("100%")],children:0===t.length?(0,f.Y)(j.S,{p:8,children:(0,f.Y)(V.EY,{css:[ea.wp.color.foregroundDimmer],multiline:!1,children:"No query history"})}):(0,f.Y)(j.S,{children:t.map(function(e){return(0,f.Y)(w1,(0,eg._)({},e),e.id)})})})})},w4=new ny.L(function(){return(0,nv.qf)((0,nS.J)((0,f.Y)("div",{css:[{fontFamily:N.LU.fontFamilyCode},ea.wp.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))}),w5=new n_.k(function(e){return nv.Lz.domEventHandlers({keydown:function(n){"Enter"===n.key&&n.metaKey&&(n.stopPropagation(),e())}})}),w3=new n_.k(function(e){return ng.Nb.high((0,wH.ll)((0,eg._)({dialect:wH.Rv},e)))}),w7=function(e){var n=e.queryResult,t=e.scrollRef;if(null==n?void 0:n.error)return(0,f.Y)(j.S,{px:8,children:(0,f.Y)(V.EY,{css:[ea.wp.color.accentNegativeDefault],children:null==n?void 0:n.error})});if(!(null==n?void 0:n.rows))return null;var r=y8(n);if(!r)return(0,f.Y)(j.S,{px:8,children:(0,f.Y)(V.EY,{css:[ea.wp.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var i=r.headerColumns,o=r.bodyData;return(0,f.Y)(j.S,{px:8,children:(0,f.Y)(yJ,{headerColumns:i,bodyData:o,scrollRef:t})})},w6=(0,nW.AH)([ea.wp.height("100%"),ea.wp.position.relative,ea.wp.overflow("auto")]),w8=(0,nW.AH)([ea.wp.position.sticky,ea.wp.top(0),ea.wp.left(0),ea.wp.zIndex(1),ea.wp.backgroundColor.backgroundDefault]),w9=function(e){var n=e.connectionString,t=(0,v._)((0,e1.fp)(wW),2),r=t[0],i=t[1],o=(0,nY.A)(),a=o.ref,l=o.view,s=(0,v._)((0,y.useState)(!1),2),c=s[0],u=s[1];(0,y.useEffect)(function(){return function(){var e;i(null!=(e=null==l?void 0:l.state.doc.toString())?e:"")}},[i,null==l?void 0:l.state.doc]);var d=(0,e1.Xr)(wG);(0,y.useEffect)(function(){d(l)},[d,l]),wt({connectionString:n});var p=(0,e1.md)(wn),h=wz.u4,m=(0,wB.A)({filePath:h}),g=(0,A.A)().psql,S=(0,v._)((0,y.useState)(),2),Y=S[0],_=S[1],C=(0,v._)((0,y.useState)(!1),2),k=C[0],x=C[1],D=(0,wj.yF)((0,y.useCallback)(function(e,n,t){if(t){var r={id:(0,nj.A)(),data:t,timestamp:Date.now()},i=e(wq);n(wq,(0,iD.jM)(i,function(e){w$(e,r)}))}},[])),E=(0,y.useCallback)(function(){function e(){return(e=(0,w._)(function(){var e;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!l)return[2];t.label=1;case 1:return t.trys.push([1,,3,4]),x(!0),D(e=null==l?void 0:l.state.doc.toString()),[4,g.run({query:e,connectionString:n})];case 2:return _(t.sent()),yn({action:"queryRan"}),[3,4];case 3:return x(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n,g,D,l]),R=y3(),I=(0,y.useCallback)(function(){R("databaseManager")},[R]),T=(0,y.useCallback)(function(){R("tableSchemas")},[R]),F=(0,y.useRef)(null),P=w3.use({schema:p}),L=w5.use(E),U=(0,wJ.Kg)();return(0,f.Y)(y0,{headerTitle:"Database Contents",onGoBack:I,children:(0,f.FD)(j.S,{css:[w6],gap:8,innerRef:F,children:[(0,f.FD)(j.S,{css:[c?null:w8],pb:8,gap:8,children:[(0,f.FD)(j.S,{css:[{border:"1px solid ".concat(N.LU.outlineDefault)},ea.wp.borderRadius(2)],children:[(0,f.Y)(nb.Ay,{ref:a,filePath:h,css:[g$.$1,ea.wp.backgroundColor.backgroundDefault,ea.wp.borderRadius(8),ea.wp.overflow("auto"),ea.wp.minHeight(100),ea.wp.maxHeight(500),{".cm-panel":{zIndex:1}}],initialDoc:r,extensions:[w4,P,m,L]}),(0,f.Y)(w2,{expanded:c,onExpand:function(){u(function(e){return!e})}})]}),(0,f.Y)(Z.m_,{placement:"top",tooltip:(0,f.Y)(wQ._y,{keyCombo:"".concat(U,"Enter"),fontSize:12}),children:(0,f.Y)(M.$n,{text:"Run Query",iconLeft:k?(0,f.Y)(tw.A,{}):(0,f.Y)(oJ.A,{}),onClick:E,disabled:k})})]}),(0,f.Y)(w7,{queryResult:Y,scrollRef:F}),(0,f.Y)(j.S,{gap:8,py:8,children:(0,f.Y)(M.$n,{css:ea.wp.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,f.Y)(vI.A,{}),onClick:T})})]})})};function be(e){var n=e.neonDatabase,t=e.replId,r=e.connectionString,i=(0,e1.md)(y5),o=wO().selectTab;if("queryEditor"===i)return(0,f.Y)(w9,{connectionString:r});if("tableSchemas"===i)return(0,f.Y)(wa,{connectionString:r});if(i.startsWith("table/")){var a=i.slice(i.indexOf("/")+1);return(0,f.Y)(wx,{tableName:a,connectionString:r})}return(0,f.FD)(f.FK,{children:[n.isEphemeral&&!n.isFrozen?(0,f.Y)(yh.To,{isFrozen:n.isFrozen,scheduledFreezeTime:n.scheduledFreezeTime,scheduledDeletionTime:n.scheduledDeletionTime}):null,(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(j.S,{pt:1,row:!0,gap:8,align:"center",justify:"space-between",children:(0,f.Y)(wC,{isFrozen:n.isFrozen})}),n.isFrozen?(0,f.Y)(yw,{neonDatabase:n,replId:t}):(0,f.Y)(wb,{neonDatabase:n,connectionString:r,onOpenDatabaseViewerClick:function(){return o("drizzle-studio")}})]})]})}var bn=t(69762);function bt(e){var n=e.onSelect,t=e.selectedDatabase,r=e.databases;return(0,f.Y)(j.S,{children:(0,f.Y)(bn.in,{label:null==t?void 0:t.type,items:r,trigger:(0,f.Y)(M.$n,{size:"default",variant:"nofill",text:"".concat("production"===t.type?"Production":"Development"," Database"),iconRight:(0,f.Y)(rN.A,{size:12})}),children:r.map(function(e){return(0,f.Y)(bn.Dr,{icon:(0,f.Y)(oJ.A,{visibility:e.id===(null==t?void 0:t.id)?"visible":"hidden"}),id:e.id,label:e.type,onAction:e.id!==(null==t?void 0:t.id)?function(){n(e)}:void 0},e.id)})})})}var br=t(49384),bi=t.n(br),bo=t(77582),ba=t(18278),bl=t(12127),bs=(0,eo.x)({link:[ea.wp.hover(ea.wp.color.accentPrimaryStrongest)],title:ea.wp.pb(8),card:[ea.wp.colWithGap(4),ea.wp.p(8),ea.wp.borderRadius(8),{outline:"1px solid transparent"}],projectId:[{p:ea.wp.color.foregroundDimmer}],remove:[ea.wp.py(8)]});function bc(){var e=(0,sv.ET)(),n=e.orgId,t=e.orgSlug,r=n&&t?"".concat((0,sy.EG)({slug:t}).usage.href,"#postgres-storage"):"/usage#postgres-storage";return(0,f.Y)(bi(),{href:r,css:bs.link,children:(0,f.Y)(V.EY,{children:"View account resource limits"})})}var bu=function(e){var n=e.replId,t=e.neonDatabase,r=(0,nq.A)().showError,i=(0,v._)((0,yp.BI)({refetchQueries:[{query:ya.Or,variables:{input:{replId:n}}}],update:function(e,t,r){var i=t.data,o=r.variables;if(null==i||!i.deleteNeonDatabase||"success"in i.deleteNeonDatabase){var a=e.readQuery({query:ya.Or,variables:{input:{replId:n}}});o&&(null==a?void 0:a.getNeonDatabases.__typename)==="GetNeonDatabasesResult"&&e.writeQuery({query:ya.Or,variables:{input:{replId:n}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:a.getNeonDatabases.databases.filter(function(e){return e.databaseId!==o.input.databaseId})}}})}}}),2),o=i[0],a=i[1].loading,l=(0,y.useCallback)(function(){d(!0)},[]),s=(0,y.useCallback)((0,w._)(function(){var e,i,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,o({variables:{input:{replId:n,databaseId:t.databaseId}}})];case 1:if(i=(e=l.sent()).data,a=e.errors,d(!1),a&&a.length>0)return r("Error when deleting Neon database: ".concat(null==a?void 0:a.join())),yn({action:"removed",success:!1}),[2];if((null==i?void 0:i.deleteNeonDatabase.__typename)!=="DeleteNeonDatabaseResult")return r("Error: ".concat(null==i?void 0:i.deleteNeonDatabase.message)),yn({action:"removed",success:!1}),[2];return(null==i?void 0:i.deleteNeonDatabase.success)?yn({action:"removed",success:!0}):(r("Error: Delete Neon Database failed."),yn({action:"removed",success:!1})),[2]}})}),[o,t.databaseId,n,r]),c=(0,v._)((0,y.useState)(!1),2),u=c[0],d=c[1];return{isPendingDelete:u,cancelDelete:(0,y.useCallback)(function(){d(!1)},[]),removeDatabase:s,deleteLoading:a,handleRemoveDatabaseClick:l}},bd=function(e){var n=bu({replId:e.replId,neonDatabase:e.neonDatabase}),t=n.isPendingDelete,r=n.cancelDelete,i=n.removeDatabase,o=n.deleteLoading,a=n.handleRemoveDatabaseClick;return(0,f.Y)(f.FK,{children:t||o?(0,f.FD)(ek.ui,{p:8,gap:8,elevated:!0,children:[(0,f.Y)(V.EY,{children:"Removing this database will permanently destroy all the data."}),(0,f.Y)(iX.N,{icon:(0,f.Y)(i0.A,{}),colorway:"warning",text:"This action cannot be undone."}),(0,f.Y)(M.$n,{text:"Yes, Remove Database",colorway:"negative",disabled:o,iconLeft:(0,f.Y)(tK.A,{}),onClick:i}),(0,f.Y)(M.$n,{autoFocus:!0,text:"Cancel",disabled:o,onClick:r})]}):(0,f.Y)(M.$n,{css:bs.remove,text:"Remove Database",disabled:o,iconLeft:(0,f.Y)(tK.A,{}),onClick:a})})};function bp(e){var n=e.neonDatabase,t=e.openAtTabData,r=(0,P.A)(),i=(0,bo.pK)().data,o=(0,y.useMemo)(function(){return function(e){var n,t,r=e.data;if((null==r||null==(n=r.currentUser)?void 0:n.__typename)==="CurrentUser"){var i=null==r||null==(t=r.currentUser)?void 0:t.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.neonComputeTime.usage,a=i.resources.neonDataStorage.usage,l=(0,bl.h7)(o,{resourceUsageType:"Hours"}),s=(0,bl.h7)(a,{resourceUsageType:"GiB"}),c=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{computeTimeUsageFormatted:"".concat(l," of compute time used this billing period"),storageUsageFormatted:"".concat(s," of storage used this billing period"),renewalInfo:"Renews ".concat(c," ")}}}}({data:i})},[i]);return(0,f.FD)(j.S,{justify:"space-between",grow:!0,children:[(0,f.FD)(j.S,{gap:12,children:[(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{variant:"subheadDefault",css:bs.title,children:"Database ID"}),(0,f.Y)(ek.ui,{elevated:!0,css:bs.card,children:(0,f.Y)(a3.Ay,{css:bs.projectId,children:"".concat(n.projectId)})})]}),(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{variant:"subheadDefault",css:bs.title,children:"Account resource usage"}),(0,f.Y)(ek.ui,{elevated:!0,css:bs.card,children:o?(0,f.FD)(f.FK,{children:[(0,f.FD)(j.S,{children:[(0,f.Y)(V.EY,{color:"dimmer",multiline:!1,children:null==o?void 0:o.computeTimeUsageFormatted}),(0,f.Y)(V.EY,{color:"dimmer",multiline:!1,children:null==o?void 0:o.storageUsageFormatted}),(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:null==o?void 0:o.renewalInfo})]}),(0,f.Y)(bc,{})]}):(0,f.Y)(j.S,{justify:"center",row:!0,children:(0,f.Y)(tw.A,{})})})]}),(0,f.Y)(ba.SE,{neonDatabase:n,restoreToCommitId:null==t?void 0:t.restoreToCommitId}),(0,f.Y)(ba.qP,{neonDatabase:n})]}),(0,f.Y)(bd,{replId:r,neonDatabase:n})]})}var bf=function(e){var n=e.size;return(0,f.FD)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:void 0===n?16:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,f.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,f.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,f.Y)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,f.Y)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,f.FD)("defs",{children:[(0,f.FD)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,f.Y)("stop",{stopColor:"#B9FFB3"}),(0,f.Y)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,f.FD)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,f.Y)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,f.Y)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})},bh=(0,nW.AH)([ea.wp.color.foregroundDimmest,{textDecoration:"underline"}]),bm=function(){return(0,f.Y)(j.S,{gap:8,css:[ea.wp.width("100%")],py:8,children:(0,f.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)("a",{target:"_blank",href:wg,css:bh,children:"Docs"}),(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(V.EY,{css:[ea.wp.fontSize(14)],multiline:!1,children:"Powered by"}),(0,f.Y)(bf,{})]})]})})},bg=t(73677);function bv(){return(0,f.Y)("div",{children:"Loading..."})}var by=t.n(bg)()(function(){return Promise.all([t.e(2126),t.e(8261),t.e(9956)]).then(t.bind(t,9956)).then(function(e){return e.DrizzleStudio_DO_NOT_USE_OR_YOU_WILL_BE_FIRED})},{loadableGenerated:{webpack:function(){return[9956]}},ssr:!1,loading:function(){return(0,f.Y)(bv,{})}}),bw=function(e){var n,r=(0,v._)((0,y.useState)((0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,t.e(8017).then(t.bind(t,98017))];case 1:return[2,e.sent().neon]}})})),1)[0];return(0,y.useCallback)((n=(0,w._)(function(n){var t,i,o=arguments;return(0,b.YH)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:[],i=o.length>2?o[2]:void 0,[4,r];case 1:return[4,a.sent()(e)(n,t,{arrayMode:(null==i?void 0:i.mode)==="array"})];case 2:return[2,a.sent()]}})}),function(e){return n.apply(this,arguments)}),[r,e])};function bb(e){var n=e.connectionString,t=e.databaseId,r=bw(n);return(0,tE.M)(tD.AZ.DRIZZLE_STUDIO_USED,{action:"opened"}),(0,f.Y)(by,{databaseId:"".concat(t.toString(),"-").concat(n),queryFn:r})}var bS=t(66340),bY=t(35341),b_=t(85270),bA={tab:{color:"--tab-color",borderBottomColor:"--tab-border-bottom-color"},tabList:{boxShadow:"--tab-list-box-shadow"}},bC=function(e){return"var(".concat(e,")")},bk=(0,eo.x)({tab:[ea.wp.display.flex,ea.wp.reset.button,ea.wp.position.relative,ea.wp.rowWithGap(8),ea.wp.p(8),ea.wp.borderRadius(4,4,0,0),ea.wp.align.center,{marginBottom:-1,color:bC(bA.tab.color),userSelect:"none"},ob.b.listItem,{paddingBottom:7,borderWidth:0,borderBottomWidth:"1px",borderBottomColor:bC(bA.tab.borderBottomColor)},{".with-dividers &":{"&:not(:last-child)":{marginRight:1},"&:not(:last-child)::after":{content:'""',position:"absolute",display:"block",width:1,height:16,backgroundColor:N.LU.outlineDefault,right:-1}}}],tabSpan:[{display:"inline-block",lineHeight:1}],tabList:[ea.wp.display.flex,ea.wp.flex.grow(0),ea.wp.flex.row,ea.wp.align.stretch,{paddingBottom:1,boxShadow:bC(bA.tabList.boxShadow)}],tabPanel:[ea.wp.focusRing,{'&[data-inert="true"]':{display:"none"}}]}),bx=function(e){var n,t=e.isSelected,r=e.isFocused,i=e.isDisabled,o="transparent";r?o=N.LU.accentPrimaryDefault:t&&(o=N.LU.foregroundDefault);var a=N.LU.foregroundDimmer;return t?a=N.LU.foregroundDefault:i&&(a=N.LU.foregroundDimmest),n={},(0,g._)(n,bA.tab.color,a),(0,g._)(n,bA.tab.borderBottomColor,o),n},bD=function(e){var n=e.withUnderline;return(0,g._)({},bA.tabList.boxShadow,n?"inset 0 -1px 0 ".concat(N.LU.outlineDimmest):"none")};function bE(e){var n=e.children,t=e.onSelectionChange,r=e.defaultSelectedKey,i=(0,tR._)(e,["children","onSelectionChange","defaultSelectedKey"]);return(0,bS.wR)()?null:(0,f.Y)(sB.tU,(0,nh._)((0,eg._)({},i),{onSelectionChange:t,defaultSelectedKey:r,children:n}))}var bR=(0,y.forwardRef)(function(e,n){var t=e.children,r=e.withUnderline,i=e.withDividers,o=e.className,a=(0,tR._)(e,["children","withUnderline","withDividers","className"]);return(0,f.Y)(sB.wb,(0,nh._)((0,eg._)({ref:n},a),{clsx:[o,void 0!==i&&i&&"with-dividers"],css:bk.tabList,style:bD({withUnderline:void 0===r||r}),children:t}))}),bI=(0,y.forwardRef)(function(e,n){var t=e.children,r=e.id,i=(0,tR._)(e,["children","id"]);return(0,f.Y)(sB.Kp,(0,nh._)((0,eg._)({id:r,ref:n},i),{css:bk.tabPanel,children:t}))}),bT=(0,y.forwardRef)(function(e,n){var t=e.children,r=e.iconLeft,i=e.iconRight,o=e.as,a=e.href,l=e.shallow,s=e.scroll,c=(0,tR._)(e,["children","iconLeft","iconRight","as","href","shallow","scroll"]),u=(0,eg._)((0,nh._)((0,eg._)({},c),{css:bk.tab,style:function(e){return bx({isSelected:e.isSelected,isFocused:e.isFocusVisible,isDisabled:e.isDisabled})}}),(0,b_.J)({as:o,href:a,shallow:l,scroll:s}));return"function"==typeof t?(0,f.Y)(sB.oz,(0,nh._)((0,eg._)({ref:n},u),{children:function(e){return(0,f.FD)(f.FK,{children:[r,(0,f.Y)("span",{css:bk.tabSpan,children:t(e)}),i]})}})):(0,f.FD)(sB.oz,(0,nh._)((0,eg._)({ref:n},u),{children:[r,(0,f.Y)("span",{css:bk.tabSpan,children:t}),i]}))});function bF(e){var n=e.children;return"function"==typeof n?(0,f.Y)(bY.pM,{children:n}):(0,f.Y)(f.FK,{children:n})}var bP=t(62183),bL=(0,eo.x)({wrapper:[ea.wp.flex.column,ea.wp.flex.grow(1)],tabList:[ea.wp.px(6),ea.wp.pt(4)],studioTabPanel:[ea.wp.flex.column,ea.wp.flex.grow(1)],overviewTabPanel:[ea.wp.colWithGap(8),ea.wp.flex.column,ea.wp.flex.grow(1),ea.wp.justify.spaceBetween,ea.wp.p(12)],docs:[ea.wp.maxWidth("100%")],settingsTabPanel:[ea.wp.flex.column,ea.wp.flex.grow(1),ea.wp.p(12)],title:[ea.wp.my(8),{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:N.LU.outlineDefault}]}),bU=function(e){var n,t=e.neonDatabases,r=(0,P.A)(),i=(0,v._)((0,y.useState)(t[0]),2),o=i[0],a=i[1],l=wO(),s=l.selectedTab,c=l.selectTab,u=l.openAtTab,d=(0,ye.n)(),p=(0,e1.md)(e4);if("string"!=typeof v8({connectionString:o.connectionString,databaseName:o.databaseName}).get(v4))throw Error("Expected host to be set");var h=p||((n=new URL(o.connectionString.replace("postgres://","https://").replace("postgresql://","https://"))).pathname="/".concat(o.databaseName),n.search="?sslmode=require",n.toString().replace("https://","postgresql://"));return(0,f.FD)(f.FK,{children:[d&&t.length>1?(0,f.FD)(f.FK,{children:[(0,f.Y)(j.S,{px:6,py:4,row:!0,align:"center",justify:"space-between",children:(0,f.Y)(bt,{onSelect:a,selectedDatabase:o,databases:t})}),(0,f.Y)(lJ.a,{})]}):null,(0,f.FD)(bE,{css:bL.wrapper,onSelectionChange:c,selectedKey:s,children:[(0,f.FD)(bR,{css:bL.tabList,withDividers:!1,children:[(0,f.Y)(bT,{id:"overview",iconLeft:(0,f.Y)(tZ.A,{}),children:"Overview"}),(0,f.Y)(bT,{id:"drizzle-studio",iconLeft:(0,f.Y)(bP.A,{}),isDisabled:o.isFrozen,children:"My Data"}),(0,f.Y)(bT,{id:"commands",iconLeft:(0,f.Y)(h_.A,{}),children:"Commands"}),(0,f.Y)(bT,{id:"settings",iconLeft:(0,f.Y)(oQ.A,{}),children:"Settings"})]}),(0,f.FD)(bF,{children:[(0,f.FD)(bI,{id:"overview",css:bL.overviewTabPanel,children:[(0,f.Y)(be,{neonDatabase:o,replId:r,connectionString:h}),(0,f.Y)(j.S,{pt:16,px:8,children:(0,f.Y)(bm,{})})]}),(0,f.Y)(bI,{id:"drizzle-studio",css:bL.studioTabPanel,children:o.isFrozen?(0,f.Y)(iX.N,{text:"This database is frozen and cannot be used.",colorway:"warning",icon:(0,f.Y)(i0.A,{})}):(0,f.Y)(bb,{connectionString:h,databaseId:o.databaseId})}),(0,f.FD)(bI,{id:"commands",css:bL.overviewTabPanel,children:[(0,f.Y)(a3.Ay,{css:bL.docs,children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: See [Neon documentation](https://neon.tech/docs/connect/connection-pooling) for connection pooling.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"}),(0,f.Y)(j.S,{css:bL.title,py:8,children:(0,f.Y)(V.EY,{variant:"subheadBig",multiline:!1,children:"Environment variables"})}),(0,f.Y)(yo,{connectionString:h,databaseName:o.databaseName}),(0,f.Y)(j.S,{pt:16,px:8,children:(0,f.Y)(bm,{})})]}),(0,f.FD)(bI,{id:"settings",css:bL.settingsTabPanel,children:[(0,f.Y)(bp,{neonDatabase:o,openAtTabData:(null==u?void 0:u.type)==="settings"&&(null==u?void 0:u.data)?u.data:void 0}),(0,f.Y)(j.S,{pt:16,px:8,children:(0,f.Y)(bm,{})})]})]})]})]})};function bN(){var e=(0,ev._)(["\n  query NeonStartPage($replId: String!) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          resources {\n            neonComputeTime {\n              allotment\n              usage\n            }\n            neonDataStorage {\n              allotment\n              usage\n            }\n          }\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          createDatabase {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return bN=function(){return e},e}var bO={},bM=(0,ey.J1)(bN()),bH=t(92935),bB=t(8483),bz=t(83849),bW=t(26176),bG=t(32900),bV=t(78671),bZ=t(72490),bj=t(83478),bq=t.n(bj);function bK(e){var n=e.loadingAgentCreate,t=e.loading,r=e.createDatabaseAuthz,i=e.handleOnCreate,o=e.refetchUbbCapabilitiesQueryData,a=e.onShowPaymentMethodForm,l=e.isPaymentMethodFormShown,s=e.onShowSupportForm,c=e.hasOneClickCreation,u=e.replId,d=e.handleAgentCreate,p=(0,ik.useRouter)(),h=(0,iL.Po)(p);(0,bz.A)({onChange:o});var m=(0,bB.r)();if(!r)return(0,f.Y)(j.S,{gap:8,align:"center",children:(0,f.Y)(tw.A,{})});if(!r.isAuthorized&&h&&m.includes(r.code))return(0,f.Y)(iX.N,{text:r.message,colorway:"warning",icon:(0,f.Y)(i0.A,{}),clsx:bq().ctaStatusBanner});switch(r.code){case ix.S4P.RequiresPaymentMethodOrSubscription:return(0,f.Y)(j.S,{gap:8,align:"center",children:(0,f.Y)(iH.A,{context:"workspace_postgresql_pane",text:"Upgrade your plan to create a database",clsx:bq().cta,colorway:"primary",variant:"default",disabled:l,onPlanCheckoutComplete:o})});case ix.S4P.RequiresActiveSubscription:return(0,f.FD)(j.S,{gap:8,align:"center",children:[(0,f.Y)(iH.A,{context:"workspace_postgresql_pane",text:"Upgrade your plan to create a database",clsx:bq().cta,colorway:"primary",variant:"default",disabled:l,onPlanCheckoutComplete:o}),(0,f.Y)(M.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",clsx:bq().cta,disabled:l,loading:t,iconLeft:(0,f.Y)(bZ.A,{}),onClick:a})]});case ix.S4P.RequiresSmsVerification:return(0,f.Y)(yf.A,{context:ix.SGY.Neon,onSuccess:o});case ix.S4P.RequiresPaymentMethod:return(0,f.Y)(M.$n,{colorway:"primary",text:"Add a payment method",clsx:bq().cta,disabled:l,loading:t,iconLeft:(0,f.Y)(bZ.A,{}),onClick:a});case ix.S4P.RequiresUnbanning:return(0,f.Y)(ug.d,{text:"Your account currently has restrictions on creating a database. We're here to help! Please reach out to support@replit.com for assistance.",colorway:"warning",iconLeft:(0,f.Y)(i0.A,{}),clsx:bq().ctaStatusBanner,onClick:s});case ix.S4P.InsufficientBudget:return(0,f.FD)(f.FK,{children:[(0,f.Y)(iX.N,{text:"You've reached your monthly usage budget. Increase your budget to create a database.",colorway:"warning",icon:(0,f.Y)(i0.A,{}),clsx:bq().ctaStatusBanner}),(0,f.Y)(ym.h,{onUpdateSuccess:o,replId:u})]});case ix.S4P.PaymentDelinquent:return(0,f.Y)(cA.E,{onClick:a});case ix.S4P.FeatureDisabled:case ix.S4P.FeatureUnsupportedForReplitTeams:case ix.S4P.FeatureUnsupportedForTeamsEdu:case ix.S4P.FeatureUnsupportedForTeamsFree:case ix.S4P.FeatureUnsupportedForTeamsPro:case ix.S4P.InsufficientPermissions:case ix.S4P.InsufficientQuota:case ix.S4P.RequiresActiveTeamsSubscription:case ix.S4P.RequiresEmailVerification:return(0,f.Y)(iX.N,{text:r.message,colorway:"warning",icon:(0,f.Y)(i0.A,{}),clsx:bq().ctaStatusBanner});case ix.S4P.Authorized:case ix.S4P.AuthorizedQuota:return(0,f.Y)(j.S,{gap:8,align:"center",children:c?(0,f.FD)(f.FK,{children:[(0,f.Y)(bW.C,{className:bq().cta,onSendAgentMessage:d,loading:n,disabled:t,buttonText:"Ask ".concat(iY.g$," to set up a database"),menuPrefix:"Ask"}),(0,f.Y)(M.$n,{onClick:i,clsx:bq().cta,text:t?"":"Create a database manually",iconLeft:t?(0,f.Y)(tw.A,{}):(0,f.Y)(f.FK,{}),loading:t,disabled:n})]}):(0,f.Y)(M.$n,{colorway:"primary",onClick:i,clsx:bq().cta,text:t?"":"Create a database",iconLeft:t?(0,f.Y)(tw.A,{}):(0,f.Y)(f.FK,{}),loading:t})});default:(0,aA.A)(r.code)}}var b$=function(){var e,n,t,r,i,o,a,l,s,c,u,d,p,h=(0,v._)((0,y.useState)(!1),2),m=h[0],g=h[1],Y=(0,v._)((0,y.useState)(!1),2),_=Y[0],C=Y[1],k=(0,P.A)(),x=(0,nq.A)().showError,D=(e=({openPane:wO().openPane}).openPane,n=(0,nq.A)().showError,r=(t=(0,v._)((0,y.useState)(!1),2))[0],i=t[1],o=(0,i_._P)({controlName:"agent-empty-state-db-creation"}),a=(0,S.jt)()&&o,l=(0,y.useCallback)(function(e){i(!1),n("Error creating Agent chat: ".concat(e instanceof Error?e.message:"Unknown error"))},[n]),s=(0,bG.c)({openPane:e,onError:l}),u=(0,y.useCallback)((c=(0,w._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!a)return[2];return i(!0),[4,s({kind:"requestFeatureAdd",feature:I.vqu.REQUEST_FEATURE_ADD_TYPE_NEON_DATABASE},e)];case 1:return n.sent(),i(!1),[2]}})}),function(e){return c.apply(this,arguments)}),[a,s]),{hasOneClickCreation:a,didStartAgentCreation:r,handleAgentCreate:u}),E=D.didStartAgentCreation,R=D.handleAgentCreate,T=D.hasOneClickCreation,F=(d={notifyOnNetworkStatusChange:!0,variables:{replId:k},onError:function(e){x(e.message)}},p=(0,eg._)({},bO,d),ew.I(bM,p)),L=F.loading,U=F.data,N=F.refetch,O=(0,A.A)(),M=O.psql,H=yi(O.secrets),B=(0,v._)((0,yp.ou)({refetchQueries:[{query:ya.Or,variables:{input:{replId:k}}}],onError:function(e){x("Error when creating Neon database: ".concat(e.message)),yn({action:"created",success:!1})},update:function(e,n){var t=n.data;(null==t?void 0:t.createNeonDatabase.__typename)==="CreateNeonDatabaseResult"&&e.writeQuery({query:ya.Or,variables:{input:{replId:k}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:[t.createNeonDatabase.database]}}})},onCompleted:function(e){return(0,w._)(function(){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if((null==e?void 0:e.createNeonDatabase.__typename)!=="CreateNeonDatabaseResult")return[3,5];if(!(0,bV.I)(e.createNeonDatabase.database))return x("Error: could not create database, please try again"),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,M.ensureNixPsqlModuleInstalled(!0)];case 2:return r.sent(),H({connectionString:(n=e.createNeonDatabase.database).connectionString,databaseName:n.databaseName}),yn({action:"created",success:!0}),[3,4];case 3:return t=r.sent(),x("Error: ".concat(t.message)),[3,4];case 4:return[3,6];case 5:return x("Error: ".concat(null==e?void 0:e.createNeonDatabase.message)),yn({action:"created",success:!1}),[2];case 6:return[2]}})})()}}),2),z=B[0],W=B[1].loading,G=(null==U?void 0:U.repl.__typename)==="Repl"?U.repl.authorizations.createDatabase:void 0;return(0,f.FD)(f.FK,{children:[(0,f.Y)(ld.a,{isOpen:_,onRequestClose:function(){return C(!1)},children:(0,f.Y)(yg.A,{onRequestClose:function(){return C(!1)}})}),(0,f.Y)(mH.A,{pane:{type:"neon"},maxWidth:450,body:(0,f.FD)(j.S,{gap:16,children:[(0,f.FD)(j.S,{clsx:bq().detailsItem,children:[(0,f.Y)(bH.iw,{}),(0,f.Y)(V.EY,{clsx:bq().detailsText,children:"Add a database to store data related to your application. Save and search your information easily."})]}),(0,f.FD)(j.S,{clsx:bq().detailsItem,children:[(0,f.Y)(bH.Js,{}),(0,f.FD)(V.EY,{clsx:bq().detailsText,children:["Replit ",iM.en," members get $",aw.Qz," in monthly credits to cover usage costs (",(0,f.Y)("a",{href:"https://docs.replit.com/cloud-services/about-usage-based-billing#1-postgresql-usage-metrics",target:"_blank",rel:"noopener",children:"see pricing details"}),"). You only pay for what you use."]})]})]}),action:(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(bK,{loadingAgentCreate:E,handleAgentCreate:R,hasOneClickCreation:T,replId:k,loading:L||W,createDatabaseAuthz:G,handleOnCreate:function(){z({variables:{input:{replId:k}}})},refetchUbbCapabilitiesQueryData:N,onShowPaymentMethodForm:function(){return g(!0)},isPaymentMethodFormShown:m,onShowSupportForm:function(){return C(!0)}}),(0,f.Y)(re.v,{href:wg,variant:"nofill",target:"_blank",rel:"noopener",iconLeft:(0,f.Y)(vx.A,{}),text:"Learn more"}),m?(0,f.Y)(ek.ui,{elevated:!0,clsx:bq().payment,p:16,children:(0,f.Y)(cL.y,{onClose:(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return g(!1),[4,N()];case 1:return e.sent(),[2]}})}),context:"workspace_postgresql_pane"})}):null]})})]})};let bJ=function(){var e=(0,v0.GK)(),n=e.database,t=e.loading,r=(0,v0.UK)(),i=r.database,o=r.loading,a=[n,i].filter(Boolean),l=(0,e1.md)(e2);return l?(0,f.Y)(bU,{neonDatabases:[l]}):0===a.length&&(t||o)?(0,f.Y)(mH.A,{pane:{type:"neon"},maxWidth:450,loading:!0}):a.length>0?(0,f.Y)(bU,{neonDatabases:a}):(0,f.Y)(b$,{})};var bQ=h.ZU.Object({type:h.ZU.Literal("neon"),data:h.ZU.Optional(h.ZU.Object({openAtTab:wP}))}),bX={Content:function(e){var n=e.pane.data,t=e.options;return(0,f.Y)(wM,{initialOpenAtTab:null==n?void 0:n.openAtTab,performPaneOperation:t.performPaneOperation,children:(0,f.Y)(bJ,{})})},Icon:function(e){var n=e.size;return(0,f.Y)(ti.Vx.Provider,{value:{color:N.LU.blueStrongest,size:n},children:(0,f.Y)(bP.A,{})})},getTitle:function(){return"Database"},description:"Create a Replit Database",category:tt.bY.CloudServices,decode:function(e){return m.T(bQ,e)}},b0=t(66898),b1=t(47848),b2=t(68752),b4=t(91532),b5=t(83731),b3=t(28174),b7="VNC ports do not require external port",b6=(0,eo.x)({secondaryUrl:[ea.wp.color.foregroundDimmest,ea.wp.fontSize("small"),ea.wp.focusRing,{"&:hover":[ea.wp.cursor.pointer,ea.wp.color.accentPrimaryStrongest]}],portHeader:[ea.wp.align.baseline],openPort:[ea.wp.color.accentPositiveStronger],localPortIcon:[ea.wp.color.foregroundDefault,ea.wp.px(4),{flex:"0 0 auto",marginLeft:"auto"}],portStatus:[ea.wp.py(0),ea.wp.px(4),ea.wp.overflow("hidden")],newPort:[ea.wp.color.foregroundDefault,ea.wp.rowWithGap(4),ea.wp.align.center,ea.wp.my(1),ea.wp.borderRadius(16),ea.wp.height(20)],externalPortButton:[{"&":[ea.wp.height(20),ea.wp.borderRadius(16),ea.wp.color.foregroundDefault]}],textButton:[ea.wp.cursor.pointer,ea.wp.reset.button,ea.wp.color.accentPrimaryStronger,ea.wp.focusRing,ea.wp.hover(ea.wp.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],newPortInput:[ea.wp.height(20),ea.wp.my(1)],newPortClose:ea.wp.mr(4),vncTooltip:[ea.wp.flex.growAndShrink(1)]});function b8(e){var n,t,r,i=e.localPort,o=e.externalPort,a=e.isLocalhost,l=e.onPortChange,s=(0,A.A)().ports.updateDotReplitPortsMapping,c=(n=(0,A.A)().ports,r=new Set(null==(t=(0,e_.A)(n.portsState))?void 0:t.map(function(e){var n;return null!=(n=(0,b1.Zd)(e.configuration))&&n}).filter(Boolean)),Array.from(b1.ZA).sort(function(e,n){return e-n}).map(function(e){return{isAvailable:!r.has(e),externalPort:e}}));return(0,f.Y)(j.S,{row:!0,children:void 0!==o&&0!==o?(0,f.Y)(M.$n,{css:b6.externalPortButton,iconRight:(0,f.Y)(dM.A,{}),text:":".concat(o),size:"small",onClick:function(){i&&(s(i,void 0,a),null==l||l())}}):(0,f.Y)(bn.in,{label:"Set external port",onAction:function(e){if(i){var n=c.find(function(n){return String(n.externalPort)===e});n&&n.isAvailable&&(s(i,n.externalPort,a),null==l||l())}},children:c.map(function(e){var n=e.isAvailable,t=e.externalPort;return(0,f.Y)(bn.Dr,{id:String(t),"aria-label":String(t),isDisabled:!n,label:":".concat(t)},String(t))})})})}function b9(e){var n=e.portState,t=null;switch(n.configuration.type){case b1.gH.MISCONFIGURED:t=(0,f.Y)(Z.m_,{tooltip:"Port misconfigured",delay:"default",children:(0,f.Y)(i0.A,{})});break;case b1.gH.CONFIG_MISSING:t=(0,f.Y)(Z.m_,{tooltip:"Configuration missing",delay:"default",children:(0,f.Y)(i0.A,{})});break;case b1.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE:t=(0,f.Y)(i0.A,{});break;case b1.gH.FORWARDED:t=(0,f.Y)(rU.A,{});case b1.gH.INTERNAL_ONLY:}return(0,f.Y)("span",{css:b6.localPortIcon,children:t})}function Se(e){var n=e.portState,t=e.width,r=(0,b1.s$)(n.configuration)?"localhost":"0.0.0.0";return(0,f.FD)(b2.VP,{width:t||130,children:[(0,f.FD)(V.EY,{css:n.isOpen&&b6.openPort,children:[r,":",n.configuration.localPort]}),(0,f.Y)(b9,{portState:n})]})}function Sn(e){var n=e.portState,t=e.openWebview,r=e.openVncOutput,i=e.width;if(n.configuration.type===b1.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE)return(0,f.Y)(b2.VP,{width:i||180,children:(0,f.Y)(iX.N,{css:b6.portStatus,icon:(0,f.Y)(i0.A,{}),text:"No ports available"})});var o=!!r&&n.configuration.isVnc,a=!o&&!!t&&n.isOpen&&n.configuration.type===b1.gH.FORWARDED;return(0,f.FD)(b2.VP,{width:i||180,children:[n.configuration.isVnc?(0,f.Y)(Z.m_,{tooltip:b7,css:b6.vncTooltip,children:(0,f.Y)(iX.N,{css:b6.portStatus,icon:(0,f.Y)(tZ.A,{}),text:b7})}):(0,f.Y)(b8,{localPort:n.configuration.localPort,externalPort:(0,b1.Zd)(n.configuration),isLocalhost:(0,b1.s$)(n.configuration)}),a?(0,f.Y)(eN.K0,{alt:"Open in Preview",onClick:t,css:ea.wp.color.foregroundDefault,children:(0,f.Y)(b3.A,{})}):null,o?(0,f.Y)(eN.K0,{alt:"View VNC output",onClick:r,css:ea.wp.color.foregroundDefault,children:(0,f.Y)(b3.A,{})}):null]})}function St(e){var n,t=e.portState;return t.isOpen?(0,f.FD)(f.FK,{children:[(0,f.Y)(b2.VP,{width:100,children:(n=t.processInfo.cmdline[0].split("/"))[n.length-1]}),(0,f.Y)(b2.VP,{width:100,children:t.processInfo.pid})]}):(0,f.Y)(b2.VP,{width:100})}var Sr=function(e){return e.OPEN_WEBVIEW="OPEN_WEBVIEW",e.OPEN_VNC_OUTPUT="OPEN_VNC_OUTPUT",e.EXTERNAL_LINK="EXTERNAL_LINK",e.REMOVE="REMOVE",e}(Sr||{});function Si(e){var n=e.portState,t=e.onAction,r=[{label:"Open external link",key:"EXTERNAL_LINK",icon:(0,f.Y)(tV.A,{})},{label:"Remove port config",key:"REMOVE",icon:(0,f.Y)(tK.A,{})}];return n.configuration.isVnc?r.unshift({label:"View VNC output",key:"OPEN_VNC_OUTPUT",icon:(0,f.Y)(b3.A,{})}):r.unshift({label:"Open Preview",key:"OPEN_WEBVIEW",icon:(0,f.Y)(b3.A,{})}),(0,f.Y)(b2.VP,{width:30,last:!0,children:(0,f.Y)(bn.in,{trigger:(0,f.Y)(eN.K0,{alt:"More",children:(0,f.Y)(s0.A,{})}),items:r,onAction:function(e){switch(e){case"OPEN_WEBVIEW":case"OPEN_VNC_OUTPUT":case"EXTERNAL_LINK":case"REMOVE":t({type:e,payload:{portState:n}})}},children:function(e){return(0,f.Y)(bn.Dr,{label:e.label,icon:e.icon},e.key)}})})}function So(e){var n=e.portState,t=e.portAction;return(0,f.FD)(b2.fI,{children:[(0,f.Y)(Se,{portState:n}),(0,f.Y)(Sn,{portState:n,openWebview:function(){t({type:"OPEN_WEBVIEW",payload:{portState:n}})},openVncOutput:function(){t({type:"OPEN_VNC_OUTPUT",payload:{portState:n}})}}),(0,f.Y)(St,{portState:n}),(0,f.Y)(Si,{portState:n,onAction:t})]},n.configuration.localPort)}var Sa=function(e){var n=e.text,t=e.onClick;return(0,f.Y)("button",{css:b6.textButton,onClick:t,children:n})};function Sl(e){var n,t=e.openDotReplit,r=(0,v._)((0,y.useState)(!1),2),i=r[0],o=r[1],a=(0,v._)((0,y.useState)(),2),l=a[0],s=a[1],c=null==(n=(0,A.A)().ports.portsState.current)?void 0:n.some(function(e){return e.configuration.localPort===l});return i?(0,f.FD)(b2.fI,{children:[(0,f.FD)(b2.VP,{width:130,children:[(0,f.Y)(eN.K0,{css:b6.newPortClose,alt:"Close",onClick:function(){return o(!1)},size:18,children:(0,f.Y)(dM.A,{})}),(0,f.Y)(B.pd,{css:b6.newPortInput,value:(null==l?void 0:l.toString())||"",onChange:function(e){return s(e.target.value?parseInt(e.target.value,10):void 0)}})]}),(0,f.Y)(b2.VP,{children:c?(0,f.Y)(iX.N,{css:b6.portStatus,colorway:"warning",text:"Local port already exists"}):(0,f.Y)(b8,{localPort:l,isLocalhost:!1,onPortChange:function(){return o(!1)}})})]}):(0,f.FD)(b2.fI,{children:[(0,f.Y)(b2.VP,{width:130,children:(0,f.Y)(M.$n,{css:b6.newPort,iconLeft:(0,f.Y)(tq.A,{size:12}),text:"New port",size:"small",onClick:function(){return o(!0)}})}),(0,f.Y)(b2.VP,{children:(0,f.FD)(V.EY,{variant:"small",children:["This port config is saved in the"," ",(0,f.Y)(Sa,{text:".replit file",onClick:t}),"."," "]})})]})}function Ss(e){var n,t=e.openDotReplit,r=e.openWebview,i=e.openVncOutput,o=e.ports,a=e.container,l=(0,it.A)(),s=(0,b0.Ik)({container:a,ports:o,addDevToolsSuffix:!l}),c=(0,nq.A)().showError,u=(0,i_._P)({controlName:"flag-repl-shield-toggle"}),d=(0,A.A)().ports,p=d.portsState,h=d.removeDotReplitPortsMapping,m=function(e){switch(e.type){case"OPEN_WEBVIEW":r(e.payload.portState.configuration.localPort);break;case"OPEN_VNC_OUTPUT":i();break;case"EXTERNAL_LINK":var n=(0,b1.Zd)(e.payload.portState.configuration);if(!(null==s?void 0:s.presentationUrl))return void c("URL not available.");var t=(0,b0.jq)(null==s?void 0:s.presentationUrl,n).toString();window.open(t,"_blank");break;case"REMOVE":h(e.payload.portState.configuration.localPort,(0,b1.Zd)(e.payload.portState.configuration))}};return(0,f.FD)(j.S,{p:12,gap:16,children:[u?(0,f.FD)(f.FK,{children:[(0,f.Y)(b5.A,{}),(0,f.Y)(lJ.a,{})]}):null,(null==s?void 0:s.presentationUrl)?(0,f.FD)(f.FK,{children:[(0,f.Y)(b4.A,{url:s.presentationUrl}),(0,f.Y)(lJ.a,{})]}):null,(0,f.FD)(j.S,{gap:4,children:[(0,f.FD)(j.S,{css:b6.portHeader,row:!0,gap:8,children:[(0,f.Y)(V.EY,{children:"Ports"}),(0,f.Y)(bi(),{href:"https://docs.replit.com/replit-workspace/workspace-features/webview",css:b6.secondaryUrl,target:"_blank",children:"Learn more"})]}),(0,f.FD)(b2.XI,{children:[(0,f.FD)(b2.fI,{children:[(0,f.Y)(b2.VP,{header:!0,width:130,children:"Internal Port"}),(0,f.Y)(b2.VP,{header:!0,width:180,children:"External Port"}),(0,f.Y)(b2.VP,{header:!0,width:100,children:"Name"}),(0,f.Y)(b2.VP,{header:!0,width:100,children:"Pid"})]}),p.current&&(null==(n=p.current)?void 0:n.length)>0?p.current.map(function(e){return(0,f.Y)(So,{portState:e,portAction:m},e.configuration.localPort)}):null,(0,f.Y)(Sl,{openDotReplit:t})]})]})]})}var Sc=t(41994),Su=h.ZU.Object({type:h.ZU.Literal("networking")}),Sd={Content:function(e){var n,t=e.options.performPaneOperation,r=(0,nq.A)().showError,i=(0,A.A)(),o=i.fs,a=i.container,l=i.ports;return(0,f.Y)(Ss,{openDotReplit:(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,o.stat(".replit")];case 1:if(!e.sent().exists)return r("Could not find .replit configuration file."),[2];return t({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:".replit"}}}),[2]}})}),openWebview:(n=(0,w._)(function(e){return(0,b.YH)(this,function(n){return t({operation:"open",pane:{type:"webview",data:{ports:e?{type:"local",port:e}:void 0}},secondary:!0}),[2]})}),function(e){return n.apply(this,arguments)}),openVncOutput:(0,w._)(function(){return(0,b.YH)(this,function(e){return t({operation:"open",pane:{type:"vnc"},secondary:!0}),[2]})}),container:a,ports:l})},Icon:function(e){var n=e.size;return(0,f.Y)(Sc.A,{size:n})},getTitle:function(){return"Networking"},description:"Configure web server ports for your App",category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(Su,e)}},Sp=t(78761),Sf=t(31855),Sh=h.ZU.Object({type:h.ZU.Literal("objectStorage")}),Sm={Content:Sp.A,Icon:function(e){var n=e.size;return(0,f.Y)(ti.Vx.Provider,{value:{color:N.LU.tealStrongest,size:n},children:(0,f.Y)(Sf.A,{})})},getTitle:function(){return"Object Storage"},description:"Persistent, shared file storage which can be accessed programmatically in your App",category:tt.bY.CloudServices,decode:function(e){return m.T(Sh,e)}},Sg=t(98810),Sv=t.n(Sg),Sy=t(52629),Sw=t(30095),Sb=(0,eo.x)({canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0}});function SS(e){var n=e.data,t=e.onSave,r=(0,y.useRef)(null),i=(0,y.useRef)(null),o=(0,A.A)().fs,a=(0,nq.A)(),l=a.showError,s=a.showConfirm,c=(0,v._)((0,y.useState)(!1),2),u=c[0],d=c[1],p=(0,tF.A)(function(){var e=r.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var n=e.getContext("2d");n&&(n.imageSmoothingEnabled=!1)},{type:"debounce",wait:100});return(0,y.useEffect)(function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var o=Sv()({canvas:e,data:n}),a=function(){return t(o.save())};return o.on("change",a),o.on("save",a),o.on("export",function(){return d(!0)}),i.current=o,e.focus(),function(){o&&o.cleanUp(),i.current&&(i.current=null)}}},[n,t,r]),(0,f.FD)(f.FK,{children:[(0,f.Y)("canvas",{css:Sb.canvas,ref:function(e){r.current=e,p(e)},tabIndex:0}),(0,f.Y)(ld.a,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,f.Y)(Sw.A,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return d(!1)},onConfirm:function(e){if(!i.current)return void d(!1);var n="".concat(e,".png"),t=i.current.curFrame().toPNG();o.writeFile(n,e9.A.from(t)).then(function(e){if(e.error)return void l("Failed to write to file ".concat(n));s("Successfully exported to ".concat(n)),d(!1)})}})})]})}function SY(e){var n,t=e.activeFile,r=(0,A.A)().fs,i=(0,v._)((0,y.useState)(!0),2),o=i[0],a=i[1],l=(0,v._)((0,y.useState)(null),2),s=l[0],c=l[1],u=(0,nq.A)().showError,d=t.endsWith(".kbmsprite");(0,y.useEffect)(function(){var e=!1;function n(){return(n=(0,w._)(function(){var n,i,o;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,r.readFile(t)];case 1:if(n=l.sent(),a(!1),e)return[2];if(n.error)return u("failed to read ".concat(t)),[2];return o=(i=n.content.toString())&&JSON.parse(i),c(d?(0,Sy.L)(o):o),[2]}})})).apply(this,arguments)}return!function(){n.apply(this,arguments)}(),function(){e=!0}},[r,t,u,d]);var p=(0,y.useCallback)((n=(0,w._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!d)return[3,2];return[4,(0,Sy.t)(e)];case 1:e=n.sent(),n.label=2;case 2:return[4,r.writeFile(t,e9.A.from(JSON.stringify(e)))];case 3:return n.sent().error&&u("Failed to save ".concat(t,", please try again")),[2]}})}),function(e){return n.apply(this,arguments)}),[r,t,u,d]);return o?(0,f.Y)(tw.A,{}):s?(0,f.Y)(SS,{data:s,onSave:p}):(0,f.Y)(S_,{onCreate:function(e){return c(e)}})}function S_(e){var n=e.onCreate,t=(0,v._)((0,y.useState)(""),2),r=t[0],i=t[1],o=(0,v._)((0,y.useState)(""),2),a=o[0],l=o[1],s=Number(r),c=Number(a);return(0,f.FD)(j.S,{p:8,gap:8,children:[(0,f.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Create a Pedit file"}),(0,f.Y)(B.pd,{placeholder:"width",value:r,onChange:function(e){return i(e.target.value)}}),(0,f.Y)(B.pd,{placeholder:"height",value:a,onChange:function(e){return l(e.target.value)}}),(0,f.Y)(M.$n,{text:"Create",disabled:!(s>0&&c>0),onClick:function(){n({width:Math.ceil(s),height:Math.ceil(c)})}})]})}var SA=t(83728),SC=h.ZU.Object({type:h.ZU.Literal("pedit"),data:h.ZU.Object({path:h.ZU.String()})}),Sk={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,f.Y)(Sx,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,f.Y)(SA.A,{size:n})},getTitle:function(e){return(0,tg.WP)(e.data.path)},category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(SC,e)}};function Sx(e){var n=e.path,t=e.performPaneOperation,r=(0,ts.KA)({path:n,performPaneOperation:t});return(0,tv.Qt)(function(){if(r)return{commands:[{commands:r}]}},[r]),(0,f.FD)(f.FK,{children:[(0,f.Y)(ts.ou,{path:n,performPaneOperation:t}),(0,f.Y)(ts.UC,{children:(0,f.Y)(SY,{activeFile:n})})]})}var SD=t(66485),SE=t(58770),SR=t(48726),SI=t(75409),ST=t(4083),SF=t(87743),SP=t(27659),SL=(0,S.qK)(),SU=S.Ku?[{title:"override",value:S.Ku}]:Array.from((0,em._)(Object.entries(SI.B)).concat([["custom",""]]),function(e){return{title:e[0],value:e[1]}}),SN=(0,S.lJ)()||S.Ku?SU[0]:SU[1];function SO(){var e,n,t=(0,SR.Tr)().data,r=(null==t||null==(e=t.currentUser)?void 0:e.isStaff)||!1,i=(0,v._)((0,y.useState)(!Object.values(SU).map(function(e){return e.value}).includes(SL)),2),o=i[0],a=i[1],l=(0,v._)((0,y.useState)(""),2),s=l[0],c=l[1];return r?(0,f.Y)(ST.w,{id:"chatServiceEndpoint",title:(0,f.FD)(f.FK,{children:[(0,f.FD)(j.S,{row:!0,gap:8,align:"center",justify:"start",children:[(0,f.Y)(V.EY,{multiline:!1,children:"AI Chat Service Endpoint"}),(0,f.Y)(SF._,{})]}),(0,f.FD)(j.S,{gap:8,children:[(0,f.FD)(V.EY,{variant:"small",color:"dimmest",children:["Current endpoint: ",SL]}),(0,f.Y)(V.EY,{variant:"small",color:"dimmest",children:"Reloading window is required for change to take effect."})]})]}),children:(0,f.FD)(j.S,{gap:12,children:[(0,f.Y)(SP.l,{css:[ea.wp.minWidth(184)],initialSelectedItem:null!=(n=SU.find(function(e){return e.value===SL}))?n:SL?SU[SU.length-1]:SN,onChange:function(e){(null==e?void 0:e.title)!=="custom"?((0,S.WQ)(e.value),a(!1),window.location.reload()):a(!0)},items:SU}),o?(0,f.FD)(j.S,{row:!0,gap:4,children:[(0,f.Y)(B.pd,{value:s,onChange:function(e){c(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(0,S.WQ)(s)}}),(0,f.Y)(eN.K0,{alt:"Update custom url",onClick:function(){(0,S.WQ)(s),window.location.reload()},children:SL!==s?(0,f.Y)(oU.A,{}):(0,f.Y)(oJ.A,{})})]}):null]})}):null}function SM(){var e=(0,ev._)(["\n  query CodeSuggestionPreferences($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return SM=function(){return e},e}var SH={},SB=(0,ey.J1)(SM());function Sz(e){var n=e.context,t=e.text,r=(0,v._)((0,y.useState)(!1),2),i=r[0],o=r[1];return(0,f.FD)(f.FK,{children:[(0,f.Y)(M.$n,{text:void 0===t?"Activate":t,colorway:"primary",onClick:function(){return o(!0)}}),(0,f.Y)(iU.default,{isOpen:i,onClose:function(){return o(!1)},type:"purchase",analyticsContext:{upgrade:{context:n}}})]})}function SW(){var e,n,t,r,i=(t={variables:{replId:(0,P.A)()}},r=(0,eg._)({},SH,t),ew.I(SB,r)).data,o=(null==i||null==(e=i.currentUser)?void 0:e.userSubscriptionType)===ix.Ohf.HackerPro,a=(null==i?void 0:i.getRepl.__typename)==="Repl"&&null!=(n=i.getRepl.org)&&!!n.id,l=(0,iL.Po)((0,ik.useRouter)()),s=(0,iA.f)().isTeamWithAiDisabled,c=(0,tl.g)("codeSuggestion"),u=c.preferences,d=c.update;return s?null:(0,f.FD)(j.S,{gap:12,children:[(0,f.Y)(l$.n,{currentValue:u.codeSuggestion,update:function(e){var n=d(e),t=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,v._)(o.value,2),s=l[0],c=l[1];(0,tP.u4)(tP.AZ.SETTINGS_TOGGLED,{settingChanged:s,updatedValue:c})}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n},setting:lK.KY.codeSuggestion,title:(0,f.FD)(f.FK,{children:[(0,f.Y)(j.S,{row:!0,gap:8,align:"center",children:(0,f.Y)(V.EY,{multiline:!1,children:"AI Code Completion"})}),(0,f.FD)(V.EY,{variant:"small",color:"dimmest",children:["Code completion provides inline “ghost text” suggestions while you code.",(0,f.Y)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]})}),a||o||l?null:(0,f.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(V.EY,{children:"Upgrade for full access to Replit AI"}),(0,f.Y)(Sz,{text:"Upgrade to Replit ".concat(iM.en),context:"workspace_settings_pane"})]})]})}var SG=t(32920),SV=t(15621);function SZ(e){return e.slice().sort(function(e,n){return e-n})}var Sj=(0,eo.x)({ruler:[ea.wp.borderRadius(8)],remove:[ea.wp.borderRadius(4)],title:[ea.wp.pr(8),ea.wp.overflow("visible"),ea.wp.flex.shrink(0)],body:[ea.wp.flex.wrapReverse,ea.wp.align.start,ea.wp.justify.end,ea.wp.flex.growAndShrink(1),{gap:N.LU.space4}],list:[ea.wp.flex.wrap,ea.wp.flex.growAndShrink(1),ea.wp.align.end,ea.wp.justify.end,{gap:N.LU.space4}]});function Sq(e){var n=e.pos,t=e.onRemove;return(0,f.FD)(ek.ui,{css:Sj.ruler,py:4,px:8,row:!0,gap:4,align:"center",elevated:!0,children:[(0,f.Y)(V.EY,{multiline:!1,children:n}),(0,f.Y)(eN.K0,{css:Sj.remove,alt:"Remove ruler",onClick:t,children:(0,f.Y)(SV.A,{})})]})}function SK(){var e=(0,v._)((0,y.useState)(!1),2),n=e[0],t=e[1],r=(0,v._)((0,y.useState)(80),2),i=r[0],o=r[1],a=(0,y.useRef)(null),l=(0,y.useRef)(null),s=-1===i,c=i>=0&&i<=1e3,u=(0,tl.g)("rulers"),d=u.preferences,p=u.update,h=SZ(d.rulers);return(0,f.Y)(ST.w,{id:"rulers",title:(0,f.Y)(V.EY,{css:Sj.title,multiline:!1,children:"Rulers"}),children:(0,f.FD)(j.S,{css:Sj.body,row:!0,children:[(0,f.Y)(j.S,{css:Sj.list,row:!0,children:h.map(function(e,n){return(0,f.Y)(Sq,{pos:e,onRemove:function(){p({rulers:h.filter(function(e,t){return t!==n})})}},n)})}),n?(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(B.pd,{ref:a,type:"number",style:{width:s?"6ch":i.toString().length+5.5+"ch"},value:i>=0?i.toString():"",onChange:function(e){if(""===e.target.value)o(-1);else{var n=parseInt(e.target.value,10);isNaN(n)||o(n)}},onKeyDown:function(e){"Escape"===e.key?(o(80),t(!1)):"Enter"===e.key&&c&&(p({rulers:SZ((0,em._)(h).concat([i]))}),t(!1),o(80))},onBlur:function(e){e.relatedTarget!==l.current&&(t(!1),o(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,f.Y)(M.$n,{ref:l,text:"Accept",colorway:"primary",iconLeft:(0,f.Y)(oJ.A,{}),disabled:!c,onClick:function(){c&&(p({rulers:SZ((0,em._)(h).concat([i]))}),t(!1),o(80))},onBlur:function(e){e.relatedTarget!==a.current&&(t(!1),o(80))}})]}):(0,f.Y)(f.FK,{children:h.length>=10?null:(0,f.Y)(M.$n,{text:"Add Ruler",iconLeft:(0,f.Y)(tq.A,{}),onClick:function(){return t(!0)}})})]})})}var S$=(0,eo.x)({container:[(0,g._)({},ST.c,[ea.wp.colWithGap(8)])],switchWrapper:[ea.wp.rowWithGap(8),ea.wp.align.center,ea.wp.justify.end,(0,g._)({},ST.c,[ea.wp.flex.rowReverse])],switchLabel:[(0,g._)({},ST.c,[ea.wp.ml(8)])]});function SJ(){var e=(0,tl.g)("showLeadingWhitespace","showTrailingWhitespace","showEnclosedWhitespace","showSelectedWhitespace"),n=e.preferences,t=e.update;return(0,f.FD)(j.S,{css:S$.container,row:!0,justify:"space-between",align:"start",children:[(0,f.FD)(j.S,{grow:!0,shrink:!0,children:[(0,f.Y)(V.EY,{children:"Show Whitespace"}),(0,f.Y)(V.EY,{multiline:!0,variant:"small",color:"dimmest",children:"Make whitespace characters visible, such as tabs and spaces."})]}),(0,f.FD)(j.S,{gap:12,children:[(0,f.FD)(j.S,{css:S$.switchWrapper,tag:"label",children:[(0,f.Y)(V.EY,{variant:"small",css:S$.switchLabel,children:"Leading"}),(0,f.Y)(ef.d,{"aria-label":"Show leading whitespace",isSelected:n.showLeadingWhitespace,onChange:function(e){t({showLeadingWhitespace:e})}})]}),(0,f.FD)(j.S,{css:S$.switchWrapper,tag:"label",children:[(0,f.Y)(V.EY,{variant:"small",css:S$.switchLabel,children:"Enclosed"}),(0,f.Y)(ef.d,{"aria-label":"Show enclosed whitespace",isSelected:n.showEnclosedWhitespace,onChange:function(e){t({showEnclosedWhitespace:e})}})]}),(0,f.FD)(j.S,{css:S$.switchWrapper,tag:"label",children:[(0,f.Y)(V.EY,{variant:"small",css:S$.switchLabel,children:"Trailing"}),(0,f.Y)(ef.d,{"aria-label":"Show trailing whitespace",isSelected:n.showTrailingWhitespace,onChange:function(e){t({showTrailingWhitespace:e})}})]}),(0,f.FD)(j.S,{css:S$.switchWrapper,tag:"label",children:[(0,f.Y)(V.EY,{variant:"small",css:S$.switchLabel,children:"Selected"}),(0,f.Y)(ef.d,{"aria-label":"Show selected whitespace",isSelected:n.showSelectedWhitespace,onChange:function(e){t({showSelectedWhitespace:e})}})]})]})]})}var SQ=t(12556);function SX(){var e=(0,ev._)(["\n  fragment ThemesSwitcherCustomTheme on CustomTheme {\n    id\n    title\n    isCurrentUserThemeAuthor\n    colorScheme\n  }\n"]);return SX=function(){return e},e}function S0(){var e=(0,ev._)(["\n  query ThemesSwitcherCurrentUserAuthoredThemes(\n    $input: CurrentUserAuthoredThemesInput!\n  ) {\n    currentUser {\n      id\n      authoredThemes(input: $input) {\n        ... on CustomThemeConnection {\n          items {\n            id\n            ...ThemesSwitcherCustomTheme\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return S0=function(){return e},e}function S1(){var e=(0,ev._)(["\n  query ThemesSwitcherCurrentUserInstalledThemes(\n    $input: CurrentUserInstalledThemesInput!\n  ) {\n    currentUser {\n      id\n      installedThemes(input: $input) {\n        ... on InstalledThemeConnection {\n          items {\n            id\n            themeVersion {\n              id\n            }\n            customTheme {\n              id\n              ...ThemesSwitcherCustomTheme\n            }\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return S1=function(){return e},e}var S2={},S4=(0,ey.J1)(SX()),S5=(0,ey.J1)(S0(),S4),S3=(0,ey.J1)(S1(),S4),S7=t(74838),S6=t(27469),S8=t(39695),S9=t(50336),Ye=t(42034),Yn=function(e){var n=(0,v._)((0,y.useState)(0),2),t=n[0],r=n[1];return(0,Ye.A)(function(){null!==e.current&&r(e.current.getBoundingClientRect().height)},[e]),t},Yt=t(81274),Yr=t(93825),Yi=t(83861),Yo=(0,eo.x)({self:[{border:"1px solid",borderColor:N.LU.outlineDimmest},ea.wp.zIndex(5),ea.wp.maxHeight(300),ea.wp.position.absolute,ea.wp.overflowY("auto"),ea.wp.width("100%"),ea.wp.left(0),ea.wp.borderRadius(8),ea.wp.flex.column],apron:[{borderTop:"1px solid",borderTopColor:N.LU.outlineDimmest}],menuItems:[ea.wp.overflowY("auto"),{listStyle:"none"}],menuApronItem:[ea.wp.viewStyle,ob.b.listItem],menuApronWrapper:[ea.wp.flex.column]}),Ya=(0,Yr.xQ)();let Yl=function(e){var n=e.children,t=e.className,r=e.bottomOffset;return(0,f.FD)(ek.ui,{className:t,tag:"ul",elevated:!0,css:Yo.self,style:{bottom:"calc(".concat(r,"px + ").concat(N.LU.space8,")")},children:[(0,f.Y)(j.S,{css:Yo.menuItems,grow:!0,shrink:!0,children:n}),(0,f.Y)(ek.ui,{css:Yo.apron,grow:!0,children:(0,f.FD)(j.S,{css:Yo.menuApronWrapper,children:[(0,f.FD)(bi(),{href:Ya.href,as:Ya.as,css:Yo.menuApronItem,children:[(0,f.Y)(Yi.A,{}),(0,f.Y)(V.EY,{multiline:!1,children:"Explore Themes"})]}),(0,f.Y)(bi(),{href:Yr.y_.href,as:Yr.y_.as,children:(0,f.FD)(j.S,{css:Yo.menuApronItem,p:8,row:!0,gap:12,justify:"start",align:"center",children:[(0,f.Y)(tq.A,{}),(0,f.Y)(V.EY,{multiline:!1,children:"Create a Theme"})]})})]})})]})};var Ys=(0,eo.x)({trigger:[ob.b.filled,ea.wp.p(8),ea.wp.color.foregroundDefault,ea.wp.border({width:0})],chevron:[ea.wp.transition.snappy],selectLabel:[ea.wp.flex.growAndShrink(1),{textAlign:"left",lineHeight:N.LU.lineHeightHeaderBig}],menuWrapper:[ea.wp.position.relative],sectionHeadings:[ea.wp.p(8),ea.wp.fontWeight.bold,ea.wp.fontSize(12),{borderTop:"1px solid ".concat(N.LU.outlineDimmer),textTransform:"uppercase"}],officialHeading:[ea.wp.p(8),ea.wp.fontWeight.bold,ea.wp.fontSize(12),{textTransform:"uppercase"}]}),Yc=j.D.li;function Yu(e){var n=e.id,t=e.sections,r=e.initialSelectedItem,i=e.selectedItem,o=e.onChange,a=e.placeholder,l=e.dataCy,s=e.paginationOptions,c=(0,tR._)(e,["id","sections","initialSelectedItem","selectedItem","onChange","placeholder","dataCy","paginationOptions"]),u=(0,y.useId)(),d=(0,nt.A)(o),p=(0,y.useRef)(null),h=Yn(p),m=Object.values(t).flat(),g=(0,S8.WM)((0,nh._)((0,eg._)({items:m,initialSelectedItem:r,onSelectedItemChange:function(e){var n=e.selectedItem;n&&d.current(n)},stateReducer:function(e,n){var t=n.type,r=n.changes;switch(t){case S8.WM.stateChangeTypes.MenuKeyDownEnter:case S8.WM.stateChangeTypes.MenuKeyDownSpaceButton:case S8.WM.stateChangeTypes.ItemClick:return(0,nh._)((0,eg._)({},r),{isOpen:!0});default:return r}}},void 0!==i&&{selectedItem:i}),{id:u})),v=(0,Yt.A)({onLoadMore:s.loadMore,rootMargin:"0px 0px 300px 0px"}).targetRef,w=function(e){var n,t=e.item,r=e.index;return(0,f.Y)(Yc,(0,nh._)((0,eg._)({},g.getItemProps({item:t,index:r})),{"data-cy":t.dataCy,children:(0,f.Y)(S9.A,{highlighted:r===g.highlightedIndex,selected:t.id===(null==(n=g.selectedItem)?void 0:n.id),title:t.title})}))};return(0,f.FD)(j.S,{id:n,dataCy:l,children:[(0,f.Y)(S6.s,{children:(0,f.Y)("label",(0,nh._)((0,eg._)({},g.getLabelProps()),{children:"select a theme"}))}),(0,f.Y)("button",(0,nh._)((0,eg._)({type:"button",css:Ys.trigger},c,g.getToggleButtonProps({ref:p})),{children:(0,f.FD)(j.S,{align:"center",row:!0,gap:8,children:[(0,f.Y)(Yi.A,{size:16}),g.selectedItem?(0,f.Y)(V.EY,{css:Ys.selectLabel,multiline:!1,children:g.selectedItem.title}):(0,f.Y)(V.EY,{color:"dimmer",css:Ys.selectLabel,multiline:!1,children:a}),(0,f.Y)(sD.A,{rotate:180*!!g.isOpen,css:Ys.chevron})]})})),(0,f.Y)("div",(0,nh._)((0,eg._)({},g.getMenuProps()),{css:Ys.menuWrapper,children:g.isOpen&&m.length>0?(0,f.FD)(Yl,{bottomOffset:h,children:[(0,f.Y)(V.EY,{color:"dimmer",css:Ys.officialHeading,multiline:!1,children:"Official Themes"}),t.official.map(function(e,n){return(0,f.Y)(w,{item:e,index:n},"".concat(e.id))}),t.authored.length?(0,f.FD)(f.FK,{children:[(0,f.Y)(V.EY,{color:"dimmer",css:Ys.sectionHeadings,multiline:!1,children:"Your Themes"}),t.authored.map(function(e,n){var r=t.official.length;return(0,f.Y)(w,{item:e,index:r+n},"".concat(e.id))})]}):null,t.installed.length?(0,f.FD)(f.FK,{children:[(0,f.Y)(V.EY,{color:"dimmer",css:Ys.sectionHeadings,multiline:!1,children:"Community Themes"}),t.installed.map(function(e,n){var r=t.official.length+t.authored.length;return(0,f.Y)(w,{item:e,index:r+n},"".concat(e.id))})]}):null,s.authoredHasNextPage||s.installedHasNextPage?(0,f.Y)(j.S,{align:"center",children:s.loading?(0,f.Y)(j.S,{p:8,align:"center",children:(0,f.Y)(tw.A,{size:12})}):(0,f.Y)(eN.K0,{tooltipBehavior:"hidden",alt:"Show more",onClick:s.loadMore,ref:v,children:(0,f.Y)(sD.A,{})})}):null]}):null}))]})}var Yd=function(e,n){var t,r,i=n.fetchMoreResult;if((null==(t=e.currentUser)?void 0:t.authoredThemes.__typename)==="CustomThemeConnection"&&(null==(r=i.currentUser)?void 0:r.authoredThemes.__typename)==="CustomThemeConnection"){var o=e.currentUser.authoredThemes.items,a=i.currentUser.authoredThemes.items;return(0,nh._)((0,eg._)({},i),{currentUser:(0,nh._)((0,eg._)({},i.currentUser),{authoredThemes:(0,nh._)((0,eg._)({},i.currentUser.authoredThemes),{items:(0,em._)(o).concat((0,em._)(a))})})})}return i},Yp=function(e,n){var t,r,i=n.fetchMoreResult;if((null==(t=e.currentUser)?void 0:t.installedThemes.__typename)==="InstalledThemeConnection"&&(null==(r=i.currentUser)?void 0:r.installedThemes.__typename)==="InstalledThemeConnection"){var o=e.currentUser.installedThemes.items,a=i.currentUser.installedThemes.items;return(0,nh._)((0,eg._)({},i),{currentUser:(0,nh._)((0,eg._)({},i.currentUser),{installedThemes:(0,nh._)((0,eg._)({},i.currentUser.installedThemes),{items:(0,em._)(o).concat((0,em._)(a))})})})}return i},Yf=function(e){var n=e.authoredThemesData,t=e.installedThemesData,r=e.fetchMoreAuthored,i=e.fetchMoreInstalled;return(0,y.useCallback)(function(){var e,o;(null==n||null==(e=n.currentUser)?void 0:e.authoredThemes.__typename)==="CustomThemeConnection"&&n.currentUser.authoredThemes.pageInfo.hasNextPage?r({variables:{input:{after:n.currentUser.authoredThemes.pageInfo.nextCursor,count:100}},updateQuery:Yd}):(null==t||null==(o=t.currentUser)?void 0:o.installedThemes.__typename)==="InstalledThemeConnection"&&t.currentUser.installedThemes.pageInfo.hasNextPage&&i({variables:{input:{after:t.currentUser.installedThemes.pageInfo.nextCursor,count:100}},updateQuery:Yp})},[n,t,r,i])},Yh=t(62242),Ym={select:function(e){return[e?n$.S.backgroundPulse(N.LU.accentPrimaryDefault,N.LU.accentPrimaryDimmest):{}]}};let Yg=function(e){var n,t,r,i,o,a,l,s,c,u,d=e.context,p=(0,tR._)(e,["context"]),h=(0,y.useId)(),m=(0,nq.A)().showError,g=(n={variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return m(e.message)},onCompleted:function(e){var n,t=null==(n=e.currentUser)?void 0:n.authoredThemes;((null==t?void 0:t.__typename)==="UnauthorizedError"||(null==t?void 0:t.__typename)==="UserError")&&m(t.message)}},t=(0,eg._)({},S2,n),ew.I(S5,t)),w=g.data,b=g.loading,S=g.error,Y=g.fetchMore,_=(0,v._)((r={variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return m(e.message)},onCompleted:function(e){var n,t=null==(n=e.currentUser)?void 0:n.installedThemes;((null==t?void 0:t.__typename)==="UnauthorizedError"||(null==t?void 0:t.__typename)==="UserError")&&m(t.message)}},i=(0,eg._)({},S2,r),dJ._(S3,i)),2),A=_[0],C=_[1],k=C.data,x=C.loading,D=C.error,E=C.fetchMore,R=(0,is.D)(),I=R.setActiveTheme,T=R.isSaving,F=R.error,P=R.theme;(0,y.useEffect)(function(){var e,n=null==w||null==(e=w.currentUser)?void 0:e.authoredThemes;(null==n?void 0:n.__typename)!=="CustomThemeConnection"||n.pageInfo.hasNextPage||A()},[w,A]);var L=((null==k||null==(a=k.currentUser)||null==(o=a.installedThemes)?void 0:o.__typename)==="InstalledThemeConnection"?k.currentUser.installedThemes.items:[]).map(function(e){return e.customTheme}),U=(null==w||null==(s=w.currentUser)||null==(l=s.authoredThemes)?void 0:l.__typename)==="CustomThemeConnection"?w.currentUser.authoredThemes.items:[];(0,y.useEffect)(function(){F&&m(F.message)},[F,m]);var O=Yf({authoredThemesData:w,installedThemesData:k,fetchMoreAuthored:Y,fetchMoreInstalled:E}),M=(null==w||null==(c=w.currentUser)?void 0:c.authoredThemes.__typename)==="CustomThemeConnection"&&w.currentUser.authoredThemes.pageInfo.hasNextPage,H=(null==k||null==(u=k.currentUser)?void 0:u.installedThemes.__typename)==="InstalledThemeConnection"&&k.currentUser.installedThemes.pageInfo.hasNextPage;if(S||D)return(0,f.Y)(j.S,{children:(0,f.Y)(iX.N,{colorway:"negative",text:"Something went wrong loading your themes"})});var B={official:S7.U,authored:U,installed:L};return(0,f.Y)(j.S,{children:(0,f.Y)(Yu,(0,eg._)({css:[Ym.select(T),ea.wp.backgroundColor.backgroundDefault,{":not([disabled]):hover":{background:N.LU.backgroundHigher}}],id:h,dataCy:"preferences-theme-dropdown",sections:B,disabled:T,paginationOptions:{loadMore:O,authoredHasNextPage:M,installedHasNextPage:H,loading:b||x},selectedItem:P.isOfficial?S7.U.find(function(e){return e.id===P.id}):(0,nh._)((0,eg._)({},P),{title:P.name}),onChange:function(e){I(e.id),"isCurrentUserThemeAuthor"in e&&(0,Yh.Ot)({themeId:e.id,colorScheme:e.colorScheme,isAlreadyInstalled:!0,isAuthor:e.isCurrentUserThemeAuthor,context:d})}},p))})};var Yv=(0,eo.x)({statusBannerContainer:[ea.wp.maxWidth("calc(100% - 12px)")],themesSwitcher:[ea.wp.minWidth(184),ea.wp.backgroundColor.backgroundHigher]});function Yy(){var e=(0,tl.g)("fontSize","minimapDisplay","wrapping","keyboardHandler","multiselectModifierKey","showFileTreeGitStatus","codeIntelligence","codeActionsOnSave","formatOnSave","semanticTokens","accessibleTerminal","shellBellAudio","webviewAutoOpenOnPortOpened","chatAudioNotification","agentAudioNotification","agentPushNotification","assistantPushNotification","forwardPortsAutomatically","acceptSuggestionOnCommitCharacter","enableCloseBracketMatching"),n=e.preferences,t=e.update,r=(0,iL.Po)((0,ik.useRouter)()),i=(0,iL.m5)(),o=(0,SQ.oR)(),a=(0,SE.vm)(),l=(0,i_._P)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),s=function(e){Object.keys(e).forEach(function(n){var t=e[n];(0,tP.u4)(tP.AZ.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t})}),t(e)};if(!n)return null;var c=(0,nh._)((0,eg._)({},lK.KY.multiselectModifierKey),{options:lK.KY.multiselectModifierKey.options.map(function(e){return(0,nh._)((0,eg._)({},e),{title:(0,SD.t3)("cmdOrCtrlKey"===e.id?SD.YX.CMD_OR_CTRL_KEY:SD.YX.ALT_KEY,a)})})});return(0,f.FD)(j.S,{gap:12,children:[(0,f.Y)(l$.n,{setting:lK.KY.fontSize,update:s,currentValue:n.fontSize}),(0,f.Y)(lJ.a,{}),(0,f.Y)(ST.w,{id:"acceptSuggestionOnCommitCharacter",title:(0,f.FD)(f.FK,{children:[(0,f.Y)(V.EY,{children:"Accept Suggestion on Commit Character"}),(0,f.FD)(V.EY,{variant:"small",color:"dimmest",children:["Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (",(0,f.Y)("code",{children:";"}),") can be a commit character that accepts the suggestion and types the character."]})]}),children:(0,f.Y)(ef.d,{"aria-label":"Accept suggestion on commit character",isSelected:n.acceptSuggestionOnCommitCharacter,onChange:function(e){s({acceptSuggestionOnCommitCharacter:e})}})}),(0,f.Y)(lJ.a,{}),(0,f.Y)(ST.w,{id:"enableCloseBracketMatching",title:(0,f.FD)(f.FK,{children:[(0,f.Y)(V.EY,{children:"Auto close brackets"}),(0,f.Y)(V.EY,{variant:"small",color:"dimmest",children:"Controls whether the editor should automatically close brackets after the user adds an opening bracket."})]}),children:(0,f.Y)(ef.d,{"aria-label":"Auto close brackets",isSelected:n.enableCloseBracketMatching,onChange:function(e){s({enableCloseBracketMatching:e})}})}),(0,f.Y)(lJ.a,{}),(0,f.Y)(SG.Ay,{}),(0,f.Y)(lJ.a,{}),(0,f.Y)(l$.n,{setting:lK.KY.wrapping,update:s,currentValue:n.wrapping}),(0,f.Y)(lJ.a,{}),i?null:(0,f.FD)(f.FK,{children:[(0,f.Y)(l$.n,{setting:lK.KY.minimap,update:s,currentValue:n.minimapDisplay}),(0,f.Y)(lJ.a,{})]}),(0,f.Y)(SK,{}),(0,f.Y)(lJ.a,{}),(0,f.Y)(l$.n,{setting:lK.KY.keyboardHandler,update:s,currentValue:n.keyboardHandler}),(0,f.Y)(lJ.a,{}),(0,f.Y)(l$.n,{setting:c,update:s,currentValue:n.multiselectModifierKey}),(0,f.Y)(lJ.a,{}),(0,f.Y)(l$.n,{setting:lK.KY.showFileTreeGitStatus,update:s,currentValue:n.showFileTreeGitStatus}),(0,f.Y)(lJ.a,{}),(0,f.Y)(lJ.a,{}),(0,f.Y)(SW,{}),(0,f.Y)(lJ.a,{}),(0,f.Y)(SO,{}),(0,f.Y)(lJ.a,{}),(0,f.Y)(l$.n,{setting:lK.KY.codeIntelligence,update:s,currentValue:n.codeIntelligence}),(0,f.Y)(lJ.a,{}),l&&n.codeIntelligence?(0,f.FD)(f.FK,{children:[(0,f.Y)(l$.n,{setting:lK.KY.semanticTokens,update:s,currentValue:n.semanticTokens}),(0,f.Y)(lJ.a,{})]}):null,(0,f.Y)(SJ,{}),(0,f.Y)(lJ.a,{}),(0,f.Y)(l$.n,{setting:lK.KY.accessibleTerminal,update:s,currentValue:n.accessibleTerminal}),(0,f.Y)(lJ.a,{}),(0,f.Y)(l$.n,{setting:lK.KY.shellBellAudio,update:s,currentValue:n.shellBellAudio}),(0,f.Y)(lJ.a,{}),(0,f.Y)(ST.w,{id:"webviewAutoOpenOnPortOpened",title:(0,f.FD)(f.FK,{children:[(0,f.Y)(V.EY,{children:o?"Automatic Preview (unavailable in this Repl)":"Automatic Preview"}),(0,f.Y)(V.EY,{variant:"small",color:"dimmest",children:"Open a web preview automatically when a port is open"}),o?(0,f.Y)(j.S,{css:Yv.statusBannerContainer,pt:8,children:(0,f.Y)(iX.N,{colorway:"orange",text:'This preference is unavailable in Extension Apps. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,f.Y)(ef.d,{"aria-label":"Automatic Webview",isSelected:n.webviewAutoOpenOnPortOpened,isDisabled:o,onChange:function(e){s({webviewAutoOpenOnPortOpened:e})}})}),(0,f.Y)(lJ.a,{}),(0,f.Y)(l$.n,{setting:lK.KY.forwardPortsAutomatically,update:s,currentValue:n.forwardPortsAutomatically}),r?null:(0,f.FD)(f.FK,{children:[(0,f.Y)(lJ.a,{}),(0,f.Y)(ST.w,{id:"theme",title:"Theme",children:(0,f.Y)(Yg,{css:Yv.themesSwitcher,context:Yh.iu.WorkspacePreferencesPane})})]}),(0,f.Y)(lJ.a,{}),(0,f.Y)(l$.n,{setting:lK.KY.chatAudioNotification,update:s,currentValue:n.chatAudioNotification}),(0,f.Y)(lJ.a,{}),(0,f.Y)(l$.n,{setting:lK.KY.agentAudioNotification,update:s,currentValue:n.agentAudioNotification}),(0,f.Y)(lJ.a,{}),(0,f.Y)(l$.n,{setting:lK.KY.agentPushNotification,update:s,currentValue:n.agentPushNotification}),(0,f.Y)(lJ.a,{}),(0,f.Y)(l$.n,{setting:lK.KY.assistantPushNotification,update:s,currentValue:n.assistantPushNotification})]})}var Yw=t(5204),Yb=t(90646),YS=t(96075);function YY(e){return(0,f.Y)(ti.Ay,(0,nh._)((0,eg._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M1.25 6A2.75 2.75 0 0 1 4 3.25h16A2.75 2.75 0 0 1 22.75 6v12A2.75 2.75 0 0 1 20 20.75H4A2.75 2.75 0 0 1 1.25 18V6ZM4 4.75c-.69 0-1.25.56-1.25 1.25v12c0 .69.56 1.25 1.25 1.25h16c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25H4ZM4.25 8A.75.75 0 0 1 5 7.25h2a.75.75 0 0 1 0 1.5H5A.75.75 0 0 1 4.25 8Zm5 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1A.75.75 0 0 1 9.25 8Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75Zm-13 4a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h2a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1-.75-.75Zm-9 4a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}function Y_(e){var n=(0,y.useRef)(null),t=(0,y.useRef)([]);function r(){n.current&&clearTimeout(n.current),t.current=[]}function i(n){e({type:"success",shortcut:n.length>1?[n[0],n[1]]:n[0]}),r()}return{onKeyDown:function(r){var o=n.current,a=t.current;r.preventDefault(),r.stopPropagation(),o&&clearTimeout(o);var l=(0,wJ.yz)(r);if(l){if((0,wJ.RW)(l))return void e({type:"update",recorded:a.length?[a[0],l]:[l]});if(a.length>0&&"Enter"===l)return void i(a);a.push(l),e({type:"update",recorded:a}),n.current=setTimeout(function(){return i(a)},600*(2!==a.length))}},startRecording:function(){r(),e({type:"start"})},stopRecording:function(){r(),e({type:"stop"})}}}var YA=(0,eo.x)({row:[ea.wp.minHeight(28)],right:[ea.wp.position.relative,ea.wp.flex.grow(1),ea.wp.flex.shrink(0)],recordingRow:[ea.wp.flex.column,ea.wp.align.center,ea.wp.justify.end],recordingRowKeys:[ea.wp.position.relative],recordingRowPlaceholder:[ea.wp.display.flex,ea.wp.align.baseline,ea.wp.rowWithGap(4),{fontStyle:"italic"}],keys:[ea.wp.display.inlineFlex,ea.wp.rowWithGap(12)],secondaryText:[ea.wp.display.flex,ea.wp.flex.row,ea.wp.align.center,ea.wp.rowWithGap(4)],secondaryTextId:[ea.wp.flex.grow(1),ea.wp.flex.shrink(0)],secondaryTextDescription:[ea.wp.flex.grow(0),ea.wp.flex.shrink(1),ea.wp.color.foregroundDimmest]}),YC=(0,eo.x)({input:[{opacity:0,width:1}],searchingText:[{fontStyle:"italic"}]});function Yk(e){var n,t,r,i,o=e.command,a=e.filter,l=e.shortcutsToCommands,s=e.onViewShortcutConflicts,c=(0,pO.ef)(),u=(0,pO.vU)(),d=(0,pO.UU)(o.id),p=(0,v._)((0,y.useState)(null),2),h=p[0],m=p[1],g=Y_(function(e){switch(e.type){case"start":return void m({recorded:[]});case"stop":return void m(null);case"update":return void m({recorded:e.recorded});case"success":var n=(0,wJ.u7)(e.shortcut);if(!n||c(o.id,n))return void m(null);m(null);return;case"error":return void m(function(n){var t;return{error:e.message,recorded:null!=(t=null==n?void 0:n.recorded)?t:[]}})}}),w=g.stopRecording,b=g.startRecording,S=g.onKeyDown,Y=(0,sb.A)(function(){return w()},[]),_=!!h;YT(_);var A=null!=(i=null==h?void 0:h.recorded)?i:[],C=null==h?void 0:h.error,k=a.length>0,x=null==(n=Yb.A.match(a,o.name))?void 0:n.ranges,D=null==(t=Yb.A.match(a,o.id))?void 0:t.ranges,E=(null==o?void 0:o.description)?null==(r=Yb.A.match(a,o.description))?void 0:r.ranges:void 0,R=(0,pj.A)(function(){return a.replaceAll('"',"").split("-").map(function(e){return e.toLowerCase()})},[a]);return(0,f.FD)(j.S,{gap:8,"data-testid":o.id,children:[(0,f.FD)(j.S,{css:YA.row,row:!0,gap:8,align:"center",children:[(0,f.FD)(j.S,{grow:0,shrink:!0,gap:2,children:[(0,f.Y)(uv.e,{text:o.name,highlight:x,dimmed:k}),(0,f.FD)(V.EY,{variant:"small",css:YA.secondaryText,multiline:!1,children:[k?(0,f.Y)(uv.e,{css:YA.secondaryTextId,text:o.id,highlight:D,dimmed:k}):null,o.description?(0,f.FD)(f.FK,{children:[k?(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"•"}):null,(0,f.Y)(uv.e,{css:YA.secondaryTextDescription,text:o.description,highlight:E,dimmed:k})]}):null]})]}),(0,f.FD)(j.S,{innerRef:_?Y:void 0,css:YA.right,row:!0,gap:16,align:"center",justify:"end",children:[_?(0,f.Y)(Yw.n1,{autoFocus:!0,restoreFocus:!0,children:(0,f.Y)("input",{onKeyDown:S,css:YC.input})}):null,o.shortcut&&!_&&l.length>1?(0,f.Y)(eN.K0,{"data-testid":"View conflicts",alt:"View conflicts",onClick:function(){(0,y.startTransition)(function(){o.shortcut&&s(Yx([o.shortcut]))})},children:(0,f.Y)(i0.A,{color:N.LU.foregroundDimmer})}):null,o.shortcut&&!_?(0,f.Y)(wQ._y,{small:!0,keyCombo:o.shortcut,match:R}):null,o.shortcut||_?null:(0,f.FD)(f.FK,{children:[(0,f.Y)(M.$n,{size:"small",variant:"outlined",iconLeft:(0,f.Y)(tq.A,{}),text:"Add shortcut",onClick:function(){return b()}}),d?(0,f.Y)(eN.K0,{alt:"Reset",onClick:function(){return c(o.id,d)},children:(0,f.Y)(oU.A,{})}):null]}),_?(0,f.Y)(j.S,{css:YA.recordingRow,children:(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(j.S,{css:YA.recordingRowKeys,children:A.length>0?(0,f.Y)(j.S,{css:YA.keys,children:A.map(function(e,n){return(0,f.Y)(wQ._y,{small:!0,keyCombo:e},"".concat(e,"-").concat(n))})}):(0,f.Y)(V.EY,{multiline:!1,color:"dimmest",css:YA.recordingRowPlaceholder,children:"Recording…"})}),(0,f.Y)(eN.K0,{alt:"Stop",onClick:function(){return w()},children:(0,f.Y)(YL,{})})]})}):null,o.shortcut&&!_?(0,f.FD)(j.S,{row:!0,gap:4,children:[d&&d!==o.shortcut?(0,f.Y)(eN.K0,{alt:"Reset",onClick:function(){return c(o.id,d)},children:(0,f.Y)(oU.A,{})}):null,(0,f.Y)(eN.K0,{alt:"Change",onClick:function(){return b()},children:(0,f.Y)(SA.A,{})}),(0,f.Y)(eN.K0,{alt:"Remove",onClick:function(){return u(o.id)},children:(0,f.Y)(tK.A,{})})]}):null]})]}),C?(0,f.Y)(iX.N,{icon:(0,f.Y)(i0.A,{}),colorway:"warning",text:C,closable:!0,closeAction:function(){return m(function(e){var n;return{recorded:null!=(n=null==e?void 0:e.recorded)?n:[]}})}}):null]})}function Yx(e){var n=e.flat();return n.length>1?n.map(function(e){return Yx([e])}).join(" "):(0,wJ.Ft)(n[0]).map(function(e){return'"'.concat(e,'"')}).join("-").replaceAll(" ","space")}var YD=(0,eo.x)({surface:[ea.wp.borderRadius(8),ea.wp.colWithGap(12)]});function YE(e){var n=e.search,t=e.setSearch,r=(0,y.useRef)(null),i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1];YT(o);var l=Y_(function(e){var n,i,o;switch(e.type){case"start":a(!0),t(""),null==r||null==(n=r.current)||n.focus();return;case"stop":case"error":a(!1),null==r||null==(i=r.current)||i.focus(),null==r||null==(o=r.current)||o.select();return;case"success":return void t(Yx([e.shortcut]));case"update":return void t(Yx(e.recorded))}}),s=l.stopRecording,c=l.startRecording,u=l.onKeyDown;return(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(Yw.n1,{children:(0,f.Y)(B.pd,{ref:r,placeholder:o?"Searching with pressed keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:o?s:void 0,onChange:function(e){t(e.currentTarget.value)},onKeyDown:o?function(e){"Escape"===e.key?s():u(e)}:void 0,value:n})}),(0,f.Y)(j.S,{row:!0,gap:4,align:"center",children:o?(0,f.FD)(f.FK,{children:[(0,f.Y)(V.EY,{color:"dimmest",css:YC.searchingText,multiline:!1,children:"Searching…"}),(0,f.Y)(eN.K0,{alt:"Stop Recording",onClick:s,children:(0,f.Y)(YL,{})})]}):(0,f.Y)(eN.K0,{alt:"Record Keys",onClick:c,children:(0,f.Y)(YY,{})})}),(0,f.Y)(eN.K0,{alt:"Clear Input",disabled:0===n.length,onClick:function(){var e;t(""),null==r||null==(e=r.current)||e.focus()},children:(0,f.Y)(SV.A,{})})]})}function YR(){var e=(0,v._)((0,y.useState)(""),2),n=e[0],t=e[1],r=(0,y.useDeferredValue)(n);return(0,f.FD)(j.S,{p:0,gap:8,children:[(0,f.Y)(YE,{search:n,setSearch:t}),(0,f.Y)(YI,{search:r,setSearch:t})]})}var YI=(0,y.memo)(function(e){var n=e.search,t=e.setSearch,r=(0,pO.RI)(),i=(0,pj.A)(function(){return(0,em._)(r.values())},[r]),o=(0,y.useMemo)(function(){return Yb.A.filter(n,i,{extract:function(e){var n="".concat(e.name," ").concat(e.id);return e.description&&(n+=" ".concat(e.description)),e.shortcut&&(n+=" ".concat(Yx([e.shortcut]))),n}})},[n,i]),a=(0,y.useMemo)(function(){return o.reduce(function(e,n){var t=n.original,r=t.shortcut;if(!r)return e;var i=e.get(r);return i?i.push(t):i=[t],e.set(r,i),e},new Map)},[o]);return o.length>0?(0,f.Y)(ek.ui,{css:YD.surface,pt:8,children:o.map(function(e,r){var i;return(0,f.FD)(y.Fragment,{children:[r>0?(0,f.Y)(ek.ui,{elevated:!0,style:{height:1}}):null,(0,f.Y)(Yk,{command:e.original,filter:n,shortcutsToCommands:null!=(i=a.get(e.original.shortcut))?i:[],onViewShortcutConflicts:t})]},e.original.id)})}):null});function YT(e){var n="You have unsaved changes";(0,y.useEffect)(function(){var t=function(e){return e.preventDefault(),e.returnValue=n,n};if(e)return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t)}},[e])}var YF=(0,nW.i7)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),YP=(0,eo.x)({background:[{animationName:YF,animation:"".concat(YF," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(N.LU.redStronger)},ea.wp.height(11),ea.wp.width(11),ea.wp.borderRadius("full"),ea.wp.position.absolute],container:[ea.wp.position.relative,ea.wp.align.center,ea.wp.justify.center],icon:[{zIndex:1}]});function YL(){return(0,f.FD)(j.S,{css:YP.container,children:[(0,f.Y)(YS.A,{css:YP.icon,color:N.LU.redStronger}),(0,f.Y)(j.S,{css:YP.background})]})}function YU(){var e=(0,nJ.c)()("keyboard_shortcuts");return(0,f.FD)(j.S,{gap:12,children:[(0,f.Y)(j.S,{tag:"label",htmlFor:e}),(0,f.Y)(YR,{})]})}var YN=t(37247),YO=t.n(YN);function YM(){var e=(0,iL.m5)();return(0,f.FD)(j.S,{clsx:YO().root,p:16,gap:16,grow:!0,shrink:!0,children:[(0,f.FD)(j.S,{justify:"center",gap:2,children:[(0,f.Y)(V.Y9,{variant:"subheadBig",level:3,children:"User Settings"}),(0,f.Y)(V.EY,{variant:"small",color:"dimmest",children:"The following settings apply to your account and will be used across all your Apps."})]}),e?(0,f.Y)(Yy,{}):(0,f.FD)(el.tU,{children:[(0,f.FD)(el.wb,{withDividers:!1,children:[(0,f.Y)(el.oz,{children:"Editor preferences"}),(0,f.Y)(el.oz,{children:"Keyboard shortcuts"})]}),(0,f.FD)(el.T2,{children:[(0,f.Y)(el.Kp,{clsx:YO().tabPanel,children:(0,f.Y)(Yy,{})}),(0,f.Y)(el.Kp,{clsx:YO().tabPanel,children:(0,f.Y)(YU,{})})]})]})]})}var YH=h.ZU.Object({type:h.ZU.Literal("preferences")}),YB={Content:function(){return(0,f.Y)(YM,{})},Icon:function(e){var n=e.size;return(0,f.Y)(ti.Vx.Provider,{value:{color:N.LU.greyStrongest,size:n},children:(0,f.Y)(oQ.A,{})})},getTitle:function(){return"User Settings"},description:"Configure personal editor preferences and workspace settings which apply to all Apps",category:tt.bY.Other,decode:function(e){return m.T(YH,e)}},Yz=t(23919),YW=(0,eo.x)({badge:[ea.wp.backgroundColor.backgroundHighest,ea.wp.borderRadius(4),{padding:"0 0.35em"}],header:[ea.wp.height(24)],result:[ea.wp.borderRadius(4),ea.wp.overflow("hidden")]});function YG(e){var n=e.isActive,t=e.performPaneOperation,r=(0,v._)((0,y.useState)({}),2),i=r[0],o=r[1],a=(0,k.t3)(),l=(0,tv.gB)(),s=(0,y.useCallback)(function(){var e=!0,n=!1,t=void 0;try{for(var r,i=a()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)!function(){var e,n=r.value;if("codeEditor"!==n[1].type)return;var t=l(n[0]);if(t&&"codeEditor"===t.type){var i=n[1].data.path,a=null==(e=t.fetchProblems)?void 0:e.call(t);i&&a&&o(function(e){return(0,nh._)((0,eg._)({},e),(0,g._)({},i,a))})}}()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},[l,a]);return((0,y.useEffect)(function(){n&&s()},[n,s]),(0,tv.Qt)(function(){return{type:"problems",updateProblems:function(e,n){o(function(t){return(0,nh._)((0,eg._)({},t),(0,g._)({},e,n))})}}},[o]),Object.values(i).some(function(e){return e.length>0}))?(0,f.Y)(j.S,{p:8,gap:8,children:Object.keys(i).map(function(e){return 0===i[e].length?null:(0,f.Y)(ek.ui,{elevated:!0,css:YW.result,children:(0,f.Y)(O.A,{chevron:"end",defaultExpanded:!0,headerContent:(0,f.FD)(j.S,{css:YW.header,grow:!0,pr:16,py:4,justify:"space-between",row:!0,gap:8,align:"center",children:[(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(ty.A,{path:e}),(0,f.Y)(V.EY,{children:e})]}),(0,f.Y)(j.S,{css:YW.badge,children:i[e].length>99?"99+":i[e].length})]}),children:(0,f.Y)(j.S,{px:6,py:6,children:i[e].map(function(n,r){var i=n.range.start.line+1,o=n.range.start.character;return(0,f.Y)(Yz.A,{problem:n,onClick:function(){t({operation:"open",pane:{type:"codeEditor",data:{path:e,line:i,col:o}},secondary:!0})}},"".concat(i,"-").concat(o,"-").concat(r))})})},e)},e)})}):(0,f.Y)(mH.A,{pane:{type:"problems"},maxWidth:450,bodyText:"No problems found in your workspace \uD83C\uDF89"})}function YV(e){return(0,f.Y)(ti.Ay,(0,nh._)((0,eg._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.25 1.25 0 0 0 20.25 15V5A1.25 1.25 0 0 0 19 3.75H5Zm-1.945-.695A2.75 2.75 0 0 1 5 2.25h14A2.75 2.75 0 0 1 21.75 5v10A2.75 2.75 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5c0-.73.29-1.429.805-1.945Zm7.225 4.496a.75.75 0 0 1-.153 1.05L8.254 10l1.873 1.399a.75.75 0 1 1-.897 1.202l-2.679-2a.75.75 0 0 1 0-1.202l2.679-2a.75.75 0 0 1 1.05.152Zm3.44 0a.75.75 0 0 1 1.05-.152l2.679 2a.75.75 0 0 1 0 1.202l-2.679 2a.75.75 0 1 1-.897-1.202L15.746 10l-1.873-1.399a.75.75 0 0 1-.152-1.05Z",clipRule:"evenodd"})}))}var YZ=h.ZU.Object({type:h.ZU.Literal("problems")}),Yj={Content:function(e){var n=e.options,t=n.isActive,r=n.performPaneOperation;return(0,f.Y)(YG,{isActive:t,performPaneOperation:r})},Icon:function(e){var n=e.size;return(0,f.Y)(YV,{size:n})},getTitle:function(){return"Problems"},description:"View problems in your code detected by static analysis tools like type checkers and linters",category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(YZ,e)}},Yq=t(73912);function YK(){var e=(0,ev._)(["\n  fragment ProjectMergeSectionRepl on Repl {\n    id\n    title\n  }\n"]);return YK=function(){return e},e}function Y$(){var e=(0,ev._)(["\n  fragment ProjectMergeSectionCurrentUser on CurrentUser {\n    id\n  }\n"]);return Y$=function(){return e},e}var YJ=(0,ey.J1)(YK()),YQ=(0,ey.J1)(Y$());function YX(){var e=(0,ev._)(["\n  fragment ReplToReplMergeOrg on Org {\n    id\n    slug\n  }\n"]);return YX=function(){return e},e}function Y0(){var e=(0,ev._)(["\n  fragment ReplMergeRelatedRepl on Repl {\n    id\n    url\n    nextPagePathname\n    ...ReplSelectorRepl\n  }\n  ","\n"]);return Y0=function(){return e},e}function Y1(){var e=(0,ev._)(["\n  fragment ReplToReplMergeProject on Project {\n    id\n    mainRepl {\n      id\n      ...ReplMergeRelatedRepl\n    }\n  }\n  ","\n"]);return Y1=function(){return e},e}function Y2(){var e=(0,ev._)(["\n  fragment ReplToReplMergeCurrentRepl on Repl {\n    id\n    ...ProjectMergeSectionRepl\n  }\n  ","\n"]);return Y2=function(){return e},e}function Y4(){var e=(0,ev._)(["\n  query ReplToReplMergeGetRelatedRepls($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          repls {\n            items {\n              ...ReplMergeRelatedRepl\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Y4=function(){return e},e}var Y5=(0,ey.J1)(YX()),Y3=(0,ey.J1)(Y0(),Yq.a$),Y7=(0,ey.J1)(Y1(),Y3),Y6=(0,ey.J1)(Y2(),YJ);function Y8(){var e=(0,ev._)(["\n  query ProjectPane($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        ...ReplToReplMergeCurrentRepl\n        project {\n          ...ReplToReplMergeProject\n          org {\n            ...ReplToReplMergeOrg\n          }\n        }\n      }\n    }\n    currentUser {\n      ...ProjectMergeSectionCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return Y8=function(){return e},e}Y4();var Y9={},_e=(0,ey.J1)(Y8(),Y6,Y7,Y5,YQ),_n=t(51523),_t=t(28046),_r=t(91130),_i=function(){var e=(0,v._)((0,y.useReducer)(function(){return Math.random()},Math.random()),2);return[e[0],e[1]]},_o=function(e){var n,t=e.ours,r=e.theirs,i=(0,v._)(_i(),2),o=i[0],a=i[1],l=(0,rh.A)((n=(0,w._)(function(e){var n,i,o,a,l,s,c;return(0,b.YH)(this,function(u){switch(u.label){case 0:return[4,Promise.all([e.log({max:100,revRange:t}),null!==r?e.log({max:100,revRange:"".concat(t,"..").concat(r)}):null,null!==r?e.log({max:100,revRange:"".concat(r,"..").concat(t)}):null])];case 1:if(n=u.sent(),o=(i=(0,v._)(n,3))[0],a=i[1],l=i[2],o.error)return[2,o];if(null==a?void 0:a.error)return[2,a];if(null==l?void 0:l.error)return[2,l];return[2,{error:null,both:o.commits,theirs:null!=(s=null==a?void 0:a.commits)?s:[],ours:null!=(c=null==l?void 0:l.commits)?c:[]}]}})}),function(e){return n.apply(this,arguments)}),[t,r,o]);return[(0,y.useMemo)(function(){return null===l?{error:null}:l.error?l:{error:null,both:pF(l.both,l.theirs,l.ours),theirs:l.theirs,ours:l.ours}},[l]),a]},_a=function(){var e,n=(0,A.A)().git,t=(0,v._)((0,y.useState)({loading:!1,error:null}),2),r=t[0],i=t[1];return[(0,y.useCallback)((e=(0,w._)(function(e){var t,r,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return t=e.remote,r=e.branch,a=void 0!==(o=e.allowConflicts)&&o,i({loading:!0,error:null}),[4,n.pull({mode:ht.MERGE,allowConflicts:a,experimental_override_remote:{name:t,branch:r}})];case 1:return(l=s.sent()).error?i({loading:!1,error:l.error}):(i({loading:!1,error:null}),n.forceRefresh()),[2]}})}),function(n){return e.apply(this,arguments)}),[n]),r]},_l=function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,S,Y,_,A,C,k=e.selectedReplId,x=(n=null!=k?k:null,(r=(0,rh.A)((t=(0,w._)(function(e){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!n)return[2,{hasStarted:!1,error:null,remote:null}];return[4,pD({git:e,replId:n})];case 1:if((t=r.sent()).error)return[2,{hasStarted:!0,error:t.error}];return[2,{hasStarted:!0,error:null,remote:t.remote}]}})}),function(e){return t.apply(this,arguments)}),[n]))&&r.hasStarted?r.error?{state:"Error",error:r.error}:{state:"Success",error:null,remote:r.remote}:{state:"Loading",error:null}),D=(0,v._)(_a(),2),E=D[0],R=D[1],I=(0,v._)((o=(i=(0,v._)(_i(),2))[0],a=i[1],[(0,rh.A)((l=(0,w._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.getRepositoryState()];case 1:return(n=t.sent()).error,[2,n]}})}),function(e){return l.apply(this,arguments)}),[o]),a]),2),T=I[0],F=I[1],P=(0,v._)((c=(s=(0,v._)(_i(),2))[0],u=s[1],[(0,rh.A)((d=(0,w._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.status()];case 1:return(n=t.sent()).error,[2,n]}})}),function(e){return d.apply(this,arguments)}),[c]),u]),1)[0],L=(0,v._)(_o({ours:"main",theirs:k?px({replId:k,branch:"main"}):null}),2),U=L[0],N=L[1],O=(0,v._)((f=(p={remoteName:k?pk(k):null,onCompleted:function(){F(),N()}}).remoteName,h=p.onCompleted,g=(m=(0,v._)((0,y.useState)(!1),2))[0],S=m[1],_=(Y=(0,v._)(_i(),2))[0],A=Y[1],(0,rh.A)((C=(0,w._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!f)return[2,{error:null}];return S(!0),[4,e.fetch({remote:f})];case 1:return n=t.sent(),S(!1),null==n.error&&h(),[2,n]}})}),function(e){return C.apply(this,arguments)}),[f,_]),[g,A]),2);return{state:T,status:P,commits:U,isFetching:O[0],refetch:O[1],remote:x,pull:{state:R,doPull:function(e){"Success"===x.state&&E((0,nh._)((0,eg._)({},e),{remote:x.remote.name}))}}}},_s=(0,y.createContext)(null);function _c(){var e=(0,y.useContext)(_s);if(null===e)throw Error("useProjectGitState must be used inside a ProjectGitStateProvider");return e}var _u=t(13692);function _d(){var e=(0,ev._)(["\n  fragment ProjectReplsComboBoxRepl on Repl {\n    id\n    ...ReplMergeRelatedRepl\n  }\n  ","\n"]);return _d=function(){return e},e}function _p(){var e=(0,ev._)(["\n  query ProjectReplsComboBox($id: String!, $replsInput: ProjectReplsInput!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          mainRepl {\n            ...ProjectReplsComboBoxRepl\n          }\n          repls(input: $replsInput) {\n            items {\n              ...ProjectReplsComboBoxRepl\n            }\n            pageInfo {\n              nextCursor\n              hasNextPage\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return _p=function(){return e},e}var _f={},_h=(0,ey.J1)(_d(),Y3),_m=(0,ey.J1)(_p(),_h),_g=t(46011),_v=t(62592),_y=(0,eo.x)({replSelector:[ea.wp.minWidth(300)],item:[ea.wp.display.grid,ea.wp.overflow("hidden"),{gap:4,gridAutoRows:"min-content",gridAutoFlow:"row",whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),_w={username:"Unknown User",image:""},_b=function(e){var n,t,r,i=e.replId,o=e.onSelect,a=e.selectedReplId,l=(0,tR._)(e,["replId","onSelect","selectedReplId"]),s=(0,v._)((0,y.useState)(""),2),c=s[0],u=s[1],d=(0,_g.A)(c,250),p=(0,nq.A)().showError,h=(0,v._)((0,y.useState)({options:[],mainRepl:null,nextCursor:null}),2),m=h[0],g=h[1],S=(n={variables:{id:i,replsInput:{count:10,filters:{title:{search:d}}}},ssr:!1,fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,onCompleted:function(e){var n,t,r,i=e&&"Repl"===e.repl.__typename&&(null==(n=e.repl.project)?void 0:n.__typename)==="Project"?e.repl.project:null,o=(null==i?void 0:i.repls.__typename)==="ReplConnection"?i.repls:null;i&&o||p("Something went wrong loading Apps - please try again."),g({mainRepl:null!=(t=null==i?void 0:i.mainRepl)?t:null,nextCursor:(null==o?void 0:o.pageInfo.hasNextPage)&&o.pageInfo.nextCursor?o.pageInfo.nextCursor:null,options:null!=(r=null==o?void 0:o.items)?r:[]})}},t=(0,eg._)({},_f,n),ew.I(_m,t)),Y=S.loading,_=S.refetch,A=S.networkStatus,C=(r=(0,w._)(function(){var e,n,t,r,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(!(m.nextCursor&&A!==_u.p.fetchMore))return[3,2];return n=m.options,[4,_({id:i,replsInput:{count:10,filters:{title:{search:d}},cursor:m.nextCursor}})];case 1:(r=(t=l.sent())&&"Repl"===t.data.repl.__typename&&(null==(e=t.data.repl.project)?void 0:e.__typename)==="Project"&&"ReplConnection"===t.data.repl.project.repls.__typename?t.data.repl.project.repls:null)||p("Something went wrong loading Apps - please try again."),a=null!=(o=null==r?void 0:r.items)?o:[],g((0,nh._)((0,eg._)({},m),{nextCursor:(null==r?void 0:r.pageInfo.hasNextPage)&&r.pageInfo.nextCursor?r.pageInfo.nextCursor:null,options:n.concat(a)})),l.label=2;case 2:return[2]}})}),function(){return r.apply(this,arguments)}),k=(0,pj.A)(function(){var e=m.mainRepl,n=m.options.filter(function(e){return e.id!==i});return""===d&&e&&e.id!==i?[e].concat((0,em._)(n.filter(function(n){return n.id!==e.id}))):n},[m,i,d]),x=(0,v._)((0,y.useState)(!1),2),D=x[0],E=x[1];(0,y.useEffect)(function(){if(!D){var e=k.find(function(e){return e.id===a});e&&(E(!0),""===c&&u(e.title))}},[D,c,a,k]);var R=(0,nt.A)(o),I=(0,y.useCallback)(function(e){var n=k.find(function(n){return n.id===e});n&&(R.current(n),u(n.title))},[k,R]);return(0,f.Y)(_v.a,(0,nh._)((0,eg._)({menuTrigger:"focus",inputValue:c,onInputChange:function(e){u(e)},onSelectionChange:I,items:k,selectedKey:a,css:_y.replSelector,isLoading:Y,allowsEmptyCollection:!0,onLoadMore:C,emptyMessage:"No Apps found",maxHeight:200},l),{children:function(e){var n,t,r,i;return(0,f.FD)(z.if,{textValue:e.title,children:[(0,f.Y)(d4.e,{src:null!=(r=null==(n=e.owner)?void 0:n.image)?r:_w.image,username:null!=(i=null==(t=e.owner)?void 0:t.username)?i:_w.username,size:24}),(0,f.FD)(j.S,{css:_y.item,children:[(0,f.Y)(V.EY,{children:e.title}),(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(V.EY,{children:e.owner?"@".concat(e.owner.username):""}),m.mainRepl&&m.mainRepl.id===e.id?(0,f.Y)(W.a,{text:"Main Repl",variant:"filled"}):null]})]})]})}}))},_S=t(59023),_Y=t(64254).hp,__=[{"& > span:first-child-of-type":[ea.wp.flex.grow(1),ea.wp.textAlign.left]},{"& > span":[ea.wp.flex.shrink(1)]},ea.wp.height("auto"),ea.wp.p(8),ea.wp.fontWeight.medium,ea.wp.backgroundColor.backgroundHigher,ea.wp.flex.row,ea.wp.align.center,ea.wp.justify.spaceBetween,ea.wp.overflow("hidden"),ea.wp.cursor.pointer],_A=(0,eo.x)({buttonFolded:[__,ea.wp.borderRadius(8)],buttonUnfolded:[__,ea.wp.borderRadius(8,8,0,0)],rowContainer:[ea.wp.position.relative,ea.wp.zIndex(1),ea.wp.overflow("hidden")],diffContainer:[ea.wp.borderRadius(8)],bodyContainer:[ea.wp.borderRadius(0,0,8,8),ea.wp.p(8),ea.wp.display.flex,ea.wp.flex.row,ea.wp.flex.wrap,ea.wp.align.center,ea.wp.justify.center,ea.wp.backgroundColor.backgroundDefault,ea.wp.border({color:N.LU.outlineDimmer,direction:"bottom"}),ea.wp.border({color:N.LU.outlineDimmer,direction:"left"}),ea.wp.border({color:N.LU.outlineDimmer,direction:"right"})],noChangesContainer:[ea.wp.py(8),ea.wp.px(8),ea.wp.center,ea.wp.width("100%")],innerContainer:[ea.wp.display.flex,ea.wp.align.center],splitContainer:[ea.wp.display.flex,ea.wp.flex.row,ea.wp.justify.spaceBetween,ea.wp.maxWidth("100%"),ea.wp.align.center],splitChild:[{flexBasis:"50%"}]}),_C=function(e){var n=e.folded,t=void 0!==n&&n,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,f.FD)(j.S,{css:t?_A.buttonFolded:_A.buttonUnfolded,onClick:function(){return r(!t)},children:[(0,f.FD)(j.S,{css:[_A.rowContainer,ea.wp.flex.shrink(1)],align:"center",row:!0,gap:8,children:["RENAMED"===i.status||"COPIED"===i.status?(0,f.FD)(f.FK,{children:[(0,f.Y)(ty.A,{path:o}),(0,f.Y)(V.EY,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,f.Y)(V.EY,{multiline:!1,color:"dimmest",css:[ea.wp.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,f.Y)(rU.A,{}),(0,f.Y)(ty.A,{path:a}),(0,f.Y)(V.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(V.EY,{multiline:!1,color:"dimmest",css:[ea.wp.fontWeight.normal],children:i.final.path})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(ty.A,{path:a}),(0,f.Y)(V.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(V.EY,{multiline:!1,color:"dimmest",css:[ea.wp.fontWeight.normal],children:i.final.path})]}),(0,f.Y)(H.r,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,f.FD)(j.S,{css:_A.rowContainer,align:"center",row:!0,gap:8,children:[(0,f.Y)(rF,{type:i.status}),(0,f.Y)(eN.K0,{alt:t?"Collapse diff":"Expand diff",onClick:function(){return r(!t)},children:t?(0,f.Y)(rN.A,{}):(0,f.Y)(rO.A,{})})]})]})},_k=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;return"Split"===t?(0,f.Y)(rD,{a:{filePath:n.initial.filename,doc:n.initial.content},b:{filePath:n.final.filename,doc:n.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,f.Y)(nb.Ay,{filePath:n.final.filename,initialDoc:n.final.content,extensions:[rw.X.of(ng.EY.of(n.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},_x=function(e){return(0,tg.FN)(e)?"media":(0,tg.m6)(e)?"ot":"binary"},_D=function(e){var n=e.content,t=e.type,r=e.filename,i=e.extensions;switch(t){case"media":return(0,f.Y)(j.S,{css:[{display:"flex",height:"100%"}],children:(0,f.Y)(rP.jM,{src:(0,rP.p4)(n,(0,tg.P7)(r)),fileName:r,mime:(0,tg.P7)(r)})});case"ot":return(0,f.Y)(nb.Ay,{filePath:r,initialDoc:n,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},_E=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;if(n.initial.content===n.final.content)return(0,f.Y)(j.S,{css:_A.noChangesContainer,children:(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===n.status)return(0,f.Y)(j.S,{css:_A.noChangesContainer,children:(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=(0,_S.A)(_Y.from(n.initial.content))?"binary":_x(n.initial.filename),o=(0,_S.A)(_Y.from(n.final.content))?"binary":_x(n.final.filename);if("binary"===i||"binary"===o)return(0,f.Y)(j.S,{css:_A.noChangesContainer,children:(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})});if("ADDED"===n.status)switch(o){case"media":return(0,f.Y)(j.S,{css:_A.noChangesContainer,children:(0,f.Y)(j.S,{css:_A.innerContainer,children:(0,f.Y)(rP.jM,{src:(0,rP.p4)(n.final.content,(0,tg.P7)(n.final.filename)),fileName:n.final.filename,mime:(0,tg.P7)(n.final.filename)})})});case"ot":return(0,f.Y)(j.S,{css:_A.noChangesContainer,children:(0,f.Y)(nb.Ay,{filePath:n.final.filename,initialDoc:n.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,f.Y)(j.S,{css:_A.noChangesContainer,children:(0,f.Y)(V.EY,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"ot"===i&&"ot"===o?(0,f.Y)(_k,{diff:n,splitOrUnified:t,extensions:r}):(0,f.FD)(j.S,{css:_A.splitContainer,p:8,children:[(0,f.Y)(j.S,{css:_A.splitChild,align:"center",justify:"center",children:(0,f.Y)(_D,{content:n.initial.content,type:i,filename:n.initial.filename,extensions:r})}),(0,f.Y)(j.S,{css:_A.splitChild,children:(0,f.Y)(_D,{content:n.final.content,type:o,filename:n.final.filename,extensions:r})})]})},_R=function(e){var n,t=e.diff,r=e.fetchDiffFileContents,i=e.splitOrUnified,o=(0,v._)((0,y.useState)({expanded:!1,loading:!1,content:null,error:null}),2),a=o[0],l=o[1],s=(n=(0,w._)(function(e){var n;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(l((0,nh._)((0,eg._)({},a),{expanded:!e,loading:null==a.content})),e)return[3,2];return[4,r(t)];case 1:n=i.sent(),l(function(e){return(0,nh._)((0,eg._)({},e),{loading:!1,error:n.error?n.error:null,content:null==n.error?{initial:n.content.base,final:n.content.head}:null})}),i.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)});return(0,f.FD)(j.S,{css:_A.diffContainer,grow:!0,children:[(0,f.Y)(_C,{folded:!a.expanded,setFolded:s,diff:t}),a.expanded?(0,f.FD)(ek.ui,{css:_A.bodyContainer,elevated:!0,children:[a.error?(0,f.Y)(iX.N,{colorway:"negative",icon:(0,f.Y)(i0.A,{}),text:a.error}):null,a.loading?(0,f.Y)(j.S,{p:8,children:(0,f.Y)(tw.A,{})}):null,a.content?(0,f.Y)(_E,{diff:(0,nh._)((0,eg._)({},t),{initial:(0,nh._)((0,eg._)({},t.initial),{content:a.content.initial}),final:(0,nh._)((0,eg._)({},t.final),{content:a.content.final})}),splitOrUnified:i}):null]}):null]},t.id)},_I=function(e){return e.Git="Git",e.Fs="Fs",e}({});function _T(){return(_T=(0,w._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=e.path,[4,e.fs.readFile(n,{fromDisk:!0})];case 1:if((t=r.sent()).error)return[2,{content:null,error:t.error}];return[2,{content:t.content.toString("utf8"),error:null}]}})})).apply(this,arguments)}function _F(e){return _P.apply(this,arguments)}function _P(){return(_P=(0,w._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(n=e.file,t=e.fs,r=e.git,"Fs"!==n.type)return[3,2];return[4,function(e){return _T.apply(this,arguments)}({path:n.path,fs:t})];case 1:case 3:return[2,i.sent()];case 2:return[4,r.getFileContents({path:n.path,revision:n.revision,convertToBase64:(0,tg.FN)(n.path)})]}})})).apply(this,arguments)}function _L(e){return _U.apply(this,arguments)}function _U(){return(_U=(0,w._)(function(e){var n,t,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:return n=e.fs,t=e.git,r=e.base,i=e.head,s=Promise.all,[4,_F({git:t,fs:n,file:i})];case 1:return c=[p.sent()],[4,_F({git:t,fs:n,file:r})];case 2:return[4,s.apply(Promise,[c.concat([p.sent()])])];case 3:if(a=(o=v._.apply(void 0,[p.sent(),2]))[0],(l=o[1]).error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(r.type," for ").concat(r.path),content:null}];if(a.error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(i.type," for ").concat(i.path),content:null}];return[2,{error:null,content:{base:null!=(u=l.content)?u:"",head:null!=(d=a.content)?d:""}}]}})})).apply(this,arguments)}var _N=t(27077),_O={z:!0,findCopies:!0,findCopiesHarder:!0,findRenames:!0,nameStatus:!0},_M={z:"-z",findCopies:"--find-copies",findCopiesHarder:"--find-copies-harder",findRenames:"--find-renames",nameStatus:"--name-status"};function _H(e){switch(e){case rR.PX.UNMODIFIED:return null;case rR.PX.MODIFIED:return rp.Os.MODIFIED;case rR.PX.TYPE_CHANGED:return rp.Os.TYPE_CHANGED;case rR.PX.DELETED:return rp.Os.DELETED;case rR.PX.RENAMED:return rp.Os.RENAMED;case rR.PX.COPIED:return rp.Os.COPIED;case rR.PX.UNTRACKED:case rR.PX.UNMERGED:case rR.PX.ADDED:return rp.Os.ADDED;default:(0,aA.A)(e)}}var _B=function(e,n){return""===e?n:"".concat(e,"/").concat(n)};function _z(e,n){return n.filter(function(n){var t="".concat(n.final.path,"/").concat(n.final.filename),r="".concat(n.initial.path,"/").concat(n.initial.filename);return t.toLowerCase().includes(e.toLowerCase())||r.toLowerCase().includes(e.toLowerCase())})}function _W(e){var n=e.children,t=e.headerContent;return(0,f.FD)(j.S,{gap:16,children:[(0,f.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(V.Y9,{level:2,variant:"subheadDefault",children:"Changed Files"}),t]}),n]})}function _G(e){var n,t,r,i,o,a,l,s,c,u=(0,A.A)(),d=u.fs,p=u.git,h=(0,v._)((0,y.useState)(""),2),m=h[0],g=h[1],S=(0,v._)((0,y.useState)("Split"),2),Y=S[0],_=S[1],C=(n={type:"revisionToRevisionDiff",head:e.head,base:e.base},t=(0,nh._)((0,eg._)({},n),{flags:(0,nh._)((0,eg._)({},_O),{nameStatus:!0})}),i=(0,rh.A)((r=(0,w._)(function(e){var n,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return n=function(e){var n,t=e.base,r=null!=(n=e.flags)?n:_O,i=["git","diff"];switch(Object.keys(r).forEach(function(e){_M[e]&&i.push(_M[e])}),e.type){case"revisionToRevisionDiff":i.push("".concat(t,"...").concat(e.head));break;case"revisionToIndexDiff":i.push("--staged",t);break;default:(0,aA.A)(e)}return i}(t),[4,e.escapeHatchGitExecRead(n.join(" "),{serviceMethod:"useGitDiff"})];case 1:if((r=i.sent()).error||null===r.output)return[2,{error:aN.uA.UNKNOWN}];return[2,{diff:r.output,error:null}]}})}),function(e){return r.apply(this,arguments)})),o=(0,pj.A)(function(){return null==i?{loading:!0,error:null,data:null}:i.error?{loading:!1,error:i.error,data:null}:{loading:!1,error:null,data:i.diff}},[i]),(0,pj.A)(function(){if(null==o||o.loading)return{loading:!0,error:null,data:null};if(o.error)return{loading:!1,error:o.error,data:null};var e,n=null!=(e=o.data)?e:"",t=(0,_N.By)(n),r=(0,_N.GM)(n);return{loading:!1,error:null,data:Array.from(new Set((0,em._)(t).concat((0,em._)(r)))).filter(function(e){return["DELETED","ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}).map(function(e){var n,t;return{id:(0,nj.A)(),status:e.type,initial:{filename:(0,tg.WP)(null!=(n=e.originalPath)?n:e.path),path:(0,tg._6)(null!=(t=e.originalPath)?t:e.path)},final:{filename:(0,tg.WP)(e.path),path:(0,tg._6)(e.path)}}})}},[o])),k=(0,pj.A)(function(){var e;return _z(m,null!=(e=C.data)?e:[])},[m,C]),x=(a=(0,w._)(function(n){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,_L({git:p,fs:d,base:{type:_I.Git,revision:e.base,path:_B(n.initial.path,n.initial.filename)},head:{type:_I.Git,revision:e.head,path:_B(n.final.path,n.final.filename)}})];case 1:return[2,t.sent()]}})}),function(e){return a.apply(this,arguments)}),D=(l=_c().status,s=(0,pj.A)(function(){return l&&null==l.error?l.changes:[]},[l]),(0,pj.A)(function(){return s.map(function(e){var n,t,r,i,o=null!=(r=null!=(t=_H(e.type.worktree))?t:_H(e.type.index))?r:rp.Os.UNKNOWN,a=null!=(i=null==(n=e.source)?void 0:n.path)?i:e.path;return{id:(0,nj.A)(),status:o,initial:{filename:(0,tg.WP)(a),path:(0,tg._6)(a)},final:{filename:(0,tg.WP)(e.path),path:(0,tg._6)(e.path)}}})},[s])),E=(0,pj.A)(function(){return _z(m,D)},[m,D]),R=(c=(0,w._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,_L({git:p,fs:d,base:{type:_I.Git,revision:"HEAD",path:_B(e.initial.path,e.initial.filename)},head:{type:_I.Fs,path:_B(e.final.path,e.final.filename)}})];case 1:return[2,n.sent()]}})}),function(e){return c.apply(this,arguments)});return C.loading?(0,f.Y)(_W,{children:(0,f.Y)(tw.A,{})}):C.error||null==C.data?(0,f.Y)(_W,{children:(0,f.Y)(V.EY,{children:"Something went wrong. Please try another Repl."})}):0===C.data.length&&0===D.length?(0,f.Y)(_W,{children:(0,f.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(aM.A,{}),(0,f.Y)(V.EY,{children:"No changes to merge"})]})}):(0,f.Y)(_W,{headerContent:(0,f.FD)(j.S,{row:!0,gap:8,children:[(0,f.Y)(rB,{value:Y,onChange:_}),(0,f.Y)(d6.I,{value:m,onChange:function(e){g(e.target.value)},onClear:function(){g("")},loading:!1,placeholder:"Filter changed files"})]}),children:(0,f.FD)(j.S,{gap:12,children:[E.length?(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(V.Y9,{level:3,variant:"text",color:"dimmer",children:"Uncommitted Changes"}),E.map(function(e){return(0,f.Y)(_R,{diff:e,splitOrUnified:Y,fetchDiffFileContents:R},e.id)})]}):null,k.length?(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(V.Y9,{level:3,variant:"text",color:"dimmer",children:"Committed Changes"}),k.map(function(e){return(0,f.Y)(_R,{diff:e,splitOrUnified:Y,fetchDiffFileContents:x},e.id)})]}):null]})})}var _V=function(e){var n=e.selectedRepl,t=e.isMainRepl,r=px({replId:n.id,branch:"main"}),i="HEAD";return(0,f.Y)(_G,{base:t?i:r,head:t?r:i})};function _Z(){var e=(0,v._)((0,y.useState)(!1),2),n=e[0],t=e[1],r=(0,A.A)().fs;return(0,y.useEffect)(function(){var e=!1,n=r.watchPathStat(".gitignore",{onNewStat:function(n){e||t(!n.exists)},onError:function(){}});return function(){e=!0,n()}},[r]),n?(0,f.Y)(iX.N,{icon:(0,f.Y)(tZ.A,{}),text:(0,f.FD)(V.EY,{children:["This project does not have a .gitignore file. It is recommended that all projects have a .gitignore file. You can find templates for .gitignore files for different languages"," ",(0,f.Y)("a",{href:"https://github.com/github/gitignore",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})}):null}var _j=t(97298);function _q(e){var n,t=e.selectedRepl,r=(0,rh.A)((n=(0,w._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=t.sent()).error)return[2,{error:null,message:"Something went wrong, this Repl's git state could not be read. Please make sure there is still a .git folder."}];if(n.state!==dm.Gi.CLEAN)return[2,{error:null,message:"This Repl has uncommitted changes. This will prevent any merges. Please undo or commit your changes before leaving the Repl."}];return[2,{error:null,message:null}]}})}),function(e){return n.apply(this,arguments)})),i=null==r?void 0:r.message;return(0,f.FD)(j.S,{gap:12,children:[(0,f.Y)(V.Y9,{level:2,variant:"subheadDefault",children:"Main Repl"}),(0,f.FD)(V.EY,{children:["You are in the main Repl for the project. If you want to merge in changes, head to"," ",t?(0,f.Y)(bi(),(0,nh._)((0,eg._)({target:"_blank"},(0,_j.q1)(t,{initialPaneType:"project"})),{children:t.title})):"a fork","."]}),i?(0,f.Y)(iX.N,{icon:(0,f.Y)(tZ.A,{}),colorway:"negative",text:i}):null]})}var _K=t(63280),_$=t(78638);function _J(){var e=(0,ev._)(["\n  query PushToRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return _J=function(){return e},e}var _Q={},_X=(0,ey.J1)(_J(),_$.c,_$.N),_0=t(74671),_1=t(23125),_2=t(99143),_4=t(36873);function _5(){return(_5=(0,w._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return n=e.git,t=e.commitMessage,[4,n.stageFiles({all:!0})];case 1:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];return[4,n.getRepositoryState()];case 2:if((r=i.sent()).error)return[2,{success:!1,error:"Could not commit your changes"}];if(r.state!==dm.Gi.DIRTY_INDEX)return[3,4];return[4,n.commit({message:t})];case 3:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];i.label=4;case 4:return[2,{success:!0,error:null}]}})})).apply(this,arguments)}var _3=(0,eo.x)({infoIcon:[ea.wp.color.foregroundDimmer,{marginTop:3}],infoMessage:{flex:1}}),_7=function(e){return e.CannotMerge="CannotMerge",e.NothingToMerge="NothingToMerge",e.OnlyUncommittedChanges="OnlyUncommittedChanges",e.UncommittedAndCommittedChanges="UncommittedAndCommittedChanges",e.OnlyCommittedChanges="OnlyCommittedChanges",e}(_7||{}),_6=function(){var e,n,t=_c(),r=t.commits,i=t.state;if((null==i?void 0:i.error)!=null||!(null==i?void 0:i.type)||i.type!==dm.UN.NORMAL||(null==i?void 0:i.state)==null||null!=r.error||!(null==r?void 0:r.ours))return"CannotMerge";var o=i.state===dm.Gi.DIRTY_WORKTREE||i.state===dm.Gi.DIRTY_INDEX,a=!!((null==r||null==(e=r.ours)?void 0:e.length)&&(null==r||null==(n=r.ours)?void 0:n.length)>0);return o&&!a?"OnlyUncommittedChanges":o&&a?"UncommittedAndCommittedChanges":!o&&a?"OnlyCommittedChanges":"NothingToMerge"};function _8(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,g,S,Y,_,C,k,x,D,E,R,I=e.sourceRepl,T=e.destinationRepl,F=e.projectId,P=e.mainReplId,L=e.orgId,U=e.currentUser,N=(0,nq.A)().showError,O=(0,nJ.c)()("includeUncommittedChanges"),H=(0,v._)((0,y.useState)(!1),2),B=H[0],z=H[1],W=(0,v._)((t=(n={destinationReplId:T.id,sourceReplId:I.id,onSuccess:function(e){var n=e.didAutoCommit;(0,_r.L)({action:"merge",orgId:L,projectId:F,autoCommitEnabled:n,sourceReplType:I.id===P?"mainRepl":"devRepl",destinationReplType:T.id===P?"mainRepl":"devRepl"})}}).sourceReplId,r=n.destinationReplId,i=n.onSuccess,o=(0,A.A)().git,a=(0,y.useRef)(null),s=(l=(0,v._)((0,y.useState)(!1),2))[0],c=l[1],d=(u=(0,nq.A)()).showError,p=u.showConfirm,h={variables:{id:r}},m=(0,eg._)({},_Q,h),g=ew.I(_X,m),S=(0,y.useCallback)(function(){if(!g.data)return null;var e=g.data,n=e.repl,t=e.currentUser;if(!t||"Repl"!==n.__typename)return null;if(a.current)if(a.current.replId===n.id&&a.current.currentUserId===t.id)return a.current;else a.current.container.close();var r=(0,_0.Ay)({onUnrecoverableError:function(e){rm.Cp(e,{tags:{projects:!0},extra:{replid:n.id}})}});r.connect({context:(0,_1.O)({repl:n,currentUser:t}),getMinimumRetryDelayMs:function(){return 0}});var i=(0,wz.Ay)({container:r}),o=(0,_2.A)({container:r,fs:i}),l=(0,_4.A)({container:r,fs:i,enableReplspaceSshTokenPassthrough:!0});return a.current={container:r,git:o,fs:i,replspace:l,replId:n.id,currentUserId:t.id},a.current},[g.data]),(0,y.useEffect)(function(){if(a.current){var e=a.current.container;return function(){e.close()}}},[]),[(0,y.useCallback)((0,w._)(function(){var e,n,r,a,l,s,u,f,h,m,v=arguments;return(0,b.YH)(this,function(y){switch(y.label){case 0:if(e=(v.length>0&&void 0!==v[0]?v[0]:{autoCommit:!1}).autoCommit,null==(r=(null==(n=g.data)?void 0:n.repl.__typename)==="Repl"?g.data.repl:null))return d("Please try again."),[2];a=r.title,c(!0),y.label=1;case 1:if(y.trys.push([1,7,8,9]),!e)return[3,3];return[4,function(e){return _5.apply(this,arguments)}({git:o,commitMessage:e.message})];case 2:if((l=y.sent()).error)return d(l.error),[2];y.label=3;case 3:if(!(s=S()))return d('Could not merge: the "'.concat(a,'" Repl could not be reached, please try again.')),[2];return[4,(u=s.git).getRepositoryState()];case 4:if((f=y.sent()).error)return d('Could not merge: the "'.concat(a,"\" Repl's git state could not be read, please try again.")),[2];if(f.state!==dm.Gi.CLEAN)return d('Could not merge: the "'.concat(a,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.')),[2];return[4,pD({git:u,replId:t})];case 5:if(y.sent().error)return d('Could not merge: the "'.concat(a,'" Repl could not be reached, please try again.')),[2];return[4,u.pull({experimental_override_remote:{name:pk(t),branch:"main"},allowConflicts:!1,mode:ht.REBASE})];case 6:if((h=y.sent()).error){switch(h.error){case aN.uA.MERGE_CONFLICT:m="this would result in a merge conflict. Get the latest changes in your repl, then try again.";break;case aN.uA.DIRTY_WORKTREE:m='the "'.concat(a,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.');break;case aN.uA.HEAD_DETACHED:m='the "'.concat(a,'" Repl is on an unknown branch, please open that repl and checkout a branch before merging.');break;default:m='please check the "'.concat(a,'" Repl or try again.')}return d("Could not merge: ".concat(m)),[2]}return p("Changes pushed!"),o.forceRefresh(),null==i||i({didAutoCommit:!!e}),[3,9];case 7:return y.sent(),d("Could not merge: something went wrong, please try again."),[3,9];case 8:return c(!1),[7];case 9:return[2]}})}),[g,S,t,d,p,o,i]),{loading:s}]),2),G=W[0],q=W[1].loading,K=(C=(Y={replId:T.id,orgId:L,projectId:F,currentUserId:U.id}).replId,k=Y.orgId,x=Y.projectId,D=Y.currentUserId,Object.values(null!=(_=(0,_K.Si)({orgId:k,projectId:x})[C])?_:{}).filter(function(e){return e.id!==D})),$=_6(),J="NothingToMerge"===$||"CannotMerge"===$||q,Q="Automatic commit for ".concat(I.title);switch($){case"NothingToMerge":R="You do not have any commits to merge in yet";break;case"CannotMerge":R="You cannot merge right now";break;case"OnlyUncommittedChanges":case"UncommittedAndCommittedChanges":case"OnlyCommittedChanges":R="Your changes will be pulled into ".concat(T.title);break;default:(0,aA.A)($)}var X=(E=(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:switch($){case"NothingToMerge":return[3,1];case"CannotMerge":return[3,2];case"OnlyCommittedChanges":return[3,3];case"UncommittedAndCommittedChanges":return[3,5];case"OnlyUncommittedChanges":return[3,7]}return[3,9];case 1:return N("No changes to merge"),[3,10];case 2:return N("You cannot merge right now"),[3,10];case 3:return[4,G({autoCommit:!1})];case 4:case 6:case 8:return e.sent(),[3,10];case 5:return[4,G({autoCommit:!!B&&{message:Q}})];case 7:return[4,G({autoCommit:{message:Q}})];case 9:(0,aA.A)($),e.label=10;case 10:return[2]}})}),function(){return E.apply(this,arguments)});return(0,f.FD)(j.S,{gap:8,children:[K.length>0?(0,f.Y)(iX.N,{icon:(0,f.Y)(i0.A,{}),colorway:"orange",text:"".concat(T.title," has active coders (@").concat(K[0].username).concat(K.length>1?" and others":"","). Merging may disrupt ongoing work.")}):null,(0,f.Y)(Z.m_,{tooltip:R,isDisabled:null===R,placement:"top",maxWidth:300,children:(0,f.Y)(M.$n,{colorway:"primary",text:"Merge changes into ".concat(T.title),disabled:J,onClick:X,loading:q,iconLeft:q?(0,f.Y)(tw.A,{}):void 0})}),"OnlyUncommittedChanges"===$?(0,f.FD)(j.S,{row:!0,gap:6,children:[(0,f.Y)(tZ.A,{css:_3.infoIcon}),(0,f.Y)(V.EY,{color:"dimmer",css:_3.infoMessage,children:"All changes are uncommitted, so they will be automatically committed when you merge"})]}):null,"UncommittedAndCommittedChanges"===$?(0,f.FD)(j.S,{row:!0,gap:6,children:[(0,f.Y)(nQ.S,{id:O,checked:B,onChange:z}),(0,f.Y)(c$.J,{htmlFor:O,children:(0,f.Y)(V.EY,{color:"dimmer",children:"Include uncommitted changes in merge"})}),(0,f.Y)(Z.m_,{tooltip:"Any changes you have not committed will be automatically committed and merged",delay:"default",children:(0,f.Y)(tZ.A,{css:_3.infoIcon})})]}):null]})}function _9(){var e=(0,ev._)(["\n  query ProjectCommitGraphRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return _9=function(){return e},e}var Ae={},An=(0,ey.J1)(_9()),At=t(65326),Ar=(0,eo.x)({input:[ea.wp.py(0),ea.wp.minHeight(24),ea.wp.pl(12)]}),Ai=function(){var e,n=(0,A.A)().git;return(0,y.useCallback)((e=(0,w._)(function(e){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,n.stageFiles({all:!0})];case 1:return t.sent(),[4,n.commit({message:e,allowEmpty:!1})];case 2:return t.sent(),n.forceRefresh(),[2]}})}),function(n){return e.apply(this,arguments)}),[n])},Ao=function(e){var n,t=e.onDone,r=(0,v._)((0,y.useState)(""),2),i=r[0],o=r[1],a=Ai(),l=(0,v._)((0,y.useState)(!1),2),s=l[0],c=l[1],u=(n=(0,w._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!("Enter"===e.key&&e.metaKey))return[3,2];return e.stopPropagation(),e.preventDefault(),c(!0),[4,a(i)];case 1:n.sent(),c(!1),n.label=2;case 2:return"Escape"===e.key&&(o(""),t()),[2]}})}),function(e){return n.apply(this,arguments)});return(0,f.Y)(B.pd,{autoFocus:!0,autoCapitalize:"off","aria-label":"Commit message",placeholder:"cmd+enter to commit",onKeyDown:u,onChange:function(e){o(e.target.value)},disabled:s,onBlur:t,css:Ar.input})},Aa=(0,iE.v)(["commit-text-foreground","commit-extended-text-foreground","commit-graph-color","segment-grid-area"]),Al=Aa.cssVars,As=Aa.styleTokens,Ac=[ea.wp.position.absolute,{top:6,left:3,width:10,height:10,borderRadius:"50%"}],Au=(0,eo.x)({graph:[ea.wp.display.grid,{gridTemplateAreas:'\n        "title-left title-left"\n        "action-left action-left"\n        "left left"\n        "spacer title-right"\n        "spacer action-right"\n        "spacer right"\n        "split-left split-right"\n        "common common"',gridTemplateColumns:"minmax(16px, min-content) 1fr",gridTemplateRows:"min-content ".repeat(8).trim()},(0,g._)({},ea.kL.min("tabletMin"),{gridTemplateAreas:'\n          "title-left title-right"\n          "action-left action-right"\n          "left right" \n          "split-left split-right"  \n          "common common"',gridTemplateColumns:"1fr 1fr",gridTemplateRows:"min-content ".repeat(5).trim()})],segment:[ea.wp.flex.column,ea.wp.align.start,ea.wp.justify.end,{listStyleType:"none",gridArea:As["segment-grid-area"],minWidth:0,maxWidth:"100%"}],action:[{gridArea:As["segment-grid-area"]}],title:[{gridArea:As["segment-grid-area"]}],commit:[{minWidth:0,maxWidth:"100%"},{'&[data-interactive="true"]':[ob.b.nofill,ea.wp.border({width:0})]}],decoration:[ea.wp.position.relative,{height:"100%",width:16}],commitDot:[Ac,{backgroundColor:As["commit-graph-color"]}],commitDotUntracked:[Ac,{"&:before":[Ac,{boxSizing:"border-box",top:-2,left:-2,content:'""',border:"2px dashed ".concat(As["commit-graph-color"])}],border:"2px solid ".concat(N.LU.accentPrimaryStronger)}],line:[{marginLeft:"auto",marginRight:"auto",position:"absolute",width:"2px",left:"calc(50% - ".concat(1,"px)"),height:"calc(100% - ".concat(8,"px)"),backgroundColor:As["commit-graph-color"],transform:"translateY(".concat(15,"px)")},{background:"linear-gradient(to top, transparent 0%,  ".concat(As["commit-graph-color"]," ").concat(10,"px)")},{"li:last-child  &":{height:"calc(100% - ".concat(15,"px)"),background:"none",backgroundColor:As["commit-graph-color"]}}],commitColumn:[ea.wp.viewStyle,ea.wp.colWithGap(8),ea.wp.minHeight(24),{minWidth:0,maxWidth:"calc(100% - ".concat(16,"px)"),overflow:"hidden"}],commitMessage:[{color:As["commit-text-foreground"]}],commitDescription:[{color:As["commit-extended-text-foreground"]}],splitLeft:[{gridArea:"split-left",position:"relative",height:16,width:"100%"}],splitRight:[{gridArea:"split-right",position:"relative",height:16,width:16}],curveRight:[ea.wp.position.absolute,{bottom:0,left:7,borderRadius:"100% 0 0 0",borderTop:"2px solid ".concat(As["commit-graph-color"]),borderLeft:"2px solid ".concat(As["commit-graph-color"]),height:9,width:9}],curveUp:[ea.wp.position.absolute,{top:0,left:0,borderRadius:"0 0 100% 0",borderBottom:"2px solid ".concat(As["commit-graph-color"]),borderRight:"2px solid ".concat(As["commit-graph-color"]),height:9,width:9}],fullLine:[{position:"absolute",width:2,height:"100%",left:7,backgroundColor:As["commit-graph-color"]}],sidewaysLine:[{position:"absolute",width:"calc(100% - ".concat(16,"px)"),height:2,left:16,top:7,backgroundColor:As["commit-graph-color"]}],compactLine:[ea.wp.height("100%"),ea.wp.position.relative,{gridArea:"spacer"},(0,g._)({},ea.kL.min("tabletMin"),{display:"none"})]}),Ad=function(e){var n=e.children,t=e.hasLeft,r=e.hasRight;return(0,f.FD)(j.S,{css:Au.graph,children:[n,(0,f.Y)(Am,{hasLeft:t,hasRight:r}),(0,f.Y)("div",{css:Au.compactLine,children:(0,f.Y)("div",{css:Au.decoration,children:(0,f.Y)("div",{css:Au.fullLine,style:t?(0,g._)({},Al["commit-graph-color"],N.LU.accentPrimaryDefault):{}})})})]})},Ap=function(e){var n,t,r=e.children,i=e.area,o=e.title,a=e.action;if(!y.Children.count(r))return null;var l="common"===i?(n={},(0,g._)(n,Al["segment-grid-area"],i),(0,g._)(n,Al["commit-graph-color"],N.LU.outlineDefault),(0,g._)(n,Al["commit-text-foreground"],N.LU.foregroundDimmer),(0,g._)(n,Al["commit-extended-text-foreground"],N.LU.foregroundDimmest),n):(t={},(0,g._)(t,Al["segment-grid-area"],i),(0,g._)(t,Al["commit-graph-color"],N.LU.accentPrimaryDefault),(0,g._)(t,Al["commit-text-foreground"],N.LU.accentPrimaryStrongest),(0,g._)(t,Al["commit-extended-text-foreground"],N.LU.foregroundDimmest),t);return(0,f.FD)(f.FK,{children:["common"===i?null:(0,f.Y)(Ah,{area:i,children:o}),"common"===i?null:(0,f.Y)(Af,{area:i,children:a}),(0,f.Y)(j.S,{style:l,tag:"ol",css:Au.segment,"aria-label":i,children:r})]})},Af=function(e){var n=e.children,t=e.area,r=(0,g._)({},Al["segment-grid-area"],"action-".concat(t));return(0,f.Y)(j.S,{style:r,css:Au.action,py:4,row:!0,gap:8,children:n})},Ah=function(e){var n=e.children,t=e.area,r=(0,g._)({},Al["segment-grid-area"],"title-".concat(t));return(0,f.Y)(j.S,{style:r,css:Au.title,children:"string"==typeof n?(0,f.Y)(V.Y9,{level:3,variant:"subheadDefault",color:"dimmer",children:n}):n})},Am=function(e){var n=e.hasLeft,t=e.hasRight,r=(0,g._)({},Al["commit-graph-color"],n?N.LU.accentPrimaryDefault:"transparent"),i=(0,g._)({},Al["commit-graph-color"],t?N.LU.accentPrimaryDefault:"transparent");return n||t?(0,f.FD)(f.FK,{children:[(0,f.FD)("div",{css:Au.splitLeft,children:[(0,f.FD)("div",{css:Au.decoration,children:[(0,f.Y)("div",{css:Au.line,"data-line":!0,style:r}),(0,f.Y)("div",{css:Au.fullLine,"data-full-line":!0,style:r})]}),(0,f.Y)("div",{css:Au.curveRight,style:i}),(0,f.Y)("div",{css:Au.sidewaysLine,style:i})]}),(0,f.Y)("div",{css:Au.splitRight,style:i,children:(0,f.Y)("div",{css:Au.curveUp})})]}):null},Ag=function(e){var n=e.onClick,t=e.children,r=e.className;return n?(0,f.Y)(M.SC,{className:r,onPress:n,css:ea.wp.reset.button,children:t}):(0,f.Y)("div",{className:r,children:t})},Av=function(e){var n=e.message,t=e.description,r=e.type,i=e.onClick;return(0,f.FD)(j.S,{tag:"li",css:Au.commit,pr:8,row:!0,align:"start",justify:"start","data-interactive":!!i,children:[(0,f.FD)("div",{css:Au.decoration,children:[(0,f.Y)("div",{css:Au.line}),(0,f.Y)("div",{css:"working"===r?Au.commitDotUntracked:Au.commitDot})]}),(0,f.FD)(Ag,{onClick:i,css:Au.commitColumn,children:[(0,f.Y)(V.EY,{multiline:!1,css:Au.commitMessage,style:"working"===r?(0,g._)({},Al["commit-text-foreground"],N.LU.accentPrimaryStronger):{},children:n}),t?(0,f.Y)(V.EY,{css:Au.commitDescription,children:t}):null]})]})},Ay=function(){var e=(0,v._)((0,y.useState)(!1),2),n=e[0],t=e[1];return n?(0,f.Y)("li",{children:(0,f.Y)(Ao,{onDone:function(){return t(!1)}})}):(0,f.Y)(Av,{type:"working",message:"uncommitted changes",onClick:function(){return t(!0)}})},Aw=function(e){var n,t,r,i,o,a,l,s,c,u,d,p=(u={variables:{id:e.selectedRepl.id}},d=(0,eg._)({},Ae,u),ew.I(An,d)).data,h=_c(),m=h.state,g=h.commits,v=(null==m?void 0:m.error)?null:null!=(l=null==m?void 0:m.state)?l:null,y=(null==m?void 0:m.error)?null:null!=(s=null==m?void 0:m.type)?s:null,w=(null==p||null==(n=p.repl)?void 0:n.__typename)==="Repl"&&p.repl.title||"Remote",b=((c=y===dm.UN.NORMAL&&v!==dm.Gi.CLEAN,true),c);if(null==g?void 0:g.error)return(0,f.Y)(V.EY,{children:g.error});var S=!!(null==g||null==(t=g.theirs)?void 0:t.length),Y=!!(null==g||null==(r=g.ours)?void 0:r.length)||b;return(0,f.FD)(Ad,{hasLeft:S,hasRight:Y,children:[S?(0,f.Y)(Ap,{area:"left",title:w,children:null==g||null==(i=g.theirs)?void 0:i.map(function(e){return(0,f.Y)(Av,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,At.K)(e.author.date))},e.hash)})}):null,Y?(0,f.FD)(Ap,{area:"right",title:"My workspace",children:[b?(0,f.Y)(Ay,{}):null,null==g||null==(o=g.ours)?void 0:o.map(function(e){return(0,f.Y)(Av,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,At.K)(e.author.date))},e.hash)})]}):null,(0,f.Y)(Ap,{area:"common",children:null==g||null==(a=g.both)?void 0:a.map(function(e){return(0,f.Y)(Av,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,At.K)(e.author.date))},e.hash)})})]})},Ab=function(e){var n=(0,v._)((0,y.useState)(function(){return(0,e0.y$)()}),1)[0];return(0,f.FD)(dv.Provider,{value:n,children:[(0,f.Y)(dZ,{}),(0,f.Y)(Aw,(0,eg._)({},e))]})},AS=(0,eo.x)({header:[ea.wp.border({color:N.LU.outlineDimmest,direction:"bottom"})],headerLeft:[ea.wp.flex.wrap,ea.wp.align.center,{flex:1}],comboBoxAndActions:[ea.wp.flex.wrap,ea.wp.flex.shrink(1)],iconButton:[ea.wp.color.foregroundDimmer,ea.wp.hover(ea.wp.color.foregroundDefault)],swapIcon:[ea.wp.color.foregroundDimmest,{rotate:"90deg"}],warnings:[{"&:empty":ea.wp.display.none}],toggle:[ea.wp.minWidth(123)],errorView:[ea.wp.rowWithGap(8),ea.wp.justify.center],viewSection:[ea.wp.px(8),ea.wp.py(12),{":not(:last-of-type)":ea.wp.border({color:N.LU.outlineDimmest,direction:"bottom"})}]}),AY=function(e){var n=e.selectedRepl,t=e.currentRepl,r=e.remoteResult,i=e.tab,o=e.isMainRepl;return n?"Loading"===r.state?(0,f.Y)(tw.A,{}):"Error"===r.state?(0,f.Y)(V.EY,{children:"Something went wrong, please try again."}):"changes"===i?(0,f.Y)(_V,{selectedRepl:n,isMainRepl:o}):(0,f.Y)(Ab,{selectedRepl:n,currentRepl:t}):(0,f.Y)(V.EY,{children:"Select a Repl to compare against your current Repl."})},A_=(0,y.forwardRef)(function(e,n){var t,r,i,o,a,l=e.repl,s=e.project,c=e.openGitPane,u=e.org,d=e.currentUser,p=!!s.mainRepl&&l.id===s.mainRepl.id,h=(0,v._)((0,y.useState)(p?null:null!=(r=s.mainRepl)?r:null),2),m=h[0],g=h[1],w=(0,v._)((0,y.useState)("changes"),2),b=w[0],S=w[1],Y=function(){return S("changes"===b?"commits":"changes")};(0,y.useEffect)(function(){(0,_r.L)({action:"tabOpened",orgId:u.id,projectId:s.id,tab:b,replType:p?"mainRepl":"devRepl"})},[b,s,u,p]);var _=_l({selectedReplId:null!=(i=null==m?void 0:m.id)?i:null}),A=_.isFetching,C=_.refetch,k=_.state,x=_.remote,D=_.pull,E=D.doPull,R=D.state,I=R.error,T=R.loading,F=(null==k?void 0:k.error)?null:null!=(o=null==k?void 0:k.state)?o:null;return(0,f.Y)(_s.Provider,{value:_,children:(0,f.FD)(j.S,{innerRef:n,children:[(0,f.FD)(j.S,{css:AS.header,p:8,row:!0,gap:2,children:[(0,f.FD)(j.S,{css:AS.headerLeft,row:!0,gap:8,children:["changes"===b?(0,f.Y)(M.$n,{css:AS.toggle,text:"Changes",iconLeft:(0,f.Y)(aM.A,{}),iconRight:(0,f.Y)(fj.A,{css:AS.swapIcon}),onClick:Y},"toggle"):(0,f.Y)(M.$n,{css:AS.toggle,text:"Commits",iconLeft:(0,f.Y)(rK,{}),iconRight:(0,f.Y)(fj.A,{css:AS.swapIcon}),onClick:Y},"toggle"),(0,f.Y)(V.EY,{color:"dimmer",multiline:!0,children:"compared against"}),(0,f.FD)(j.S,{css:AS.comboBoxAndActions,row:!0,gap:8,children:[(0,f.Y)(_b,{"aria-label":"Select a Repl",replId:l.id,selectedReplId:null!=(a=null==m?void 0:m.id)?a:null,onSelect:g}),(0,f.FD)(j.S,{row:!0,gap:0,align:"center",children:[(0,f.Y)(eN.K0,{alt:"Pull",onClick:function(){E({branch:"main"}),(0,_r.L)({action:"pull",orgId:u.id,projectId:s.id,replType:p?"mainRepl":"devRepl"})},disabled:T||p,css:AS.iconButton,children:A?(0,f.Y)(tw.A,{}):(0,f.Y)(fR.A,{})}),m?(0,f.Y)(sk.A,(0,nh._)((0,eg._)({alt:"Go to ".concat(m.title),target:"_blank"},(0,_j.q1)(m,{initialPaneType:"project"})),{css:AS.iconButton,children:(0,f.Y)(tV.A,{})})):null]})]})]}),(0,f.Y)(j.S,{pt:4,row:!0,gap:8,children:(0,f.Y)(eN.K0,{alt:"Fetch",onClick:C,disabled:"Success"!==x.state,css:AS.iconButton,children:A?(0,f.Y)(tw.A,{}):(0,f.Y)(oU.A,{})})})]}),(0,f.FD)(j.S,{css:AS.warnings,p:8,gap:12,children:[I===aN.uA.DIRTY_WORKTREE?(0,f.Y)(j.S,{css:AS.errorView,children:(0,f.Y)(iX.N,{colorway:"negative",icon:(0,f.Y)(i0.A,{}),text:"You have uncommitted changes. Please commit them before pulling."})}):null,I===aN.uA.MERGE_CONFLICT?(0,f.FD)(j.S,{css:AS.errorView,children:[(0,f.Y)(iX.N,{colorway:"negative",icon:(0,f.Y)(i0.A,{}),text:"There were conflicts in the changes you are trying to pull. Click to resolve them."}),(0,f.Y)(M.$n,{text:"Resolve Manually",onClick:function(){c(),E({branch:"main",allowConflicts:!0}),(0,_r.L)({projectId:s.id,orgId:u.id,action:"pullWithConflicts",replType:p?"mainRepl":"devRepl"})},colorway:"negative"})]}):null,F===dm.Gi.MERGING?(0,f.Y)(iX.N,{colorway:"primary",text:"Merge in progress"}):null,F===dm.Gi.REBASING?(0,f.Y)(iX.N,{colorway:"primary",text:"Rebase in progress"}):null,(0,f.Y)(_Z,{})]}),p?(0,f.Y)(j.S,{css:AS.viewSection,children:(0,f.Y)(_q,{selectedRepl:null!=m?m:void 0})}):null,!p&&m?(0,f.Y)(j.S,{css:AS.viewSection,children:(0,f.Y)(_8,{destinationRepl:m,sourceRepl:l,projectId:s.id,mainReplId:null==(t=s.mainRepl)?void 0:t.id,orgId:u.id,currentUser:d})}):null,(0,f.Y)(j.S,{css:AS.viewSection,children:(0,f.Y)(AY,{currentRepl:l,selectedRepl:m,remoteResult:x,isMainRepl:p,tab:b})})]})})}),AA=t(49382),AC=(0,eo.x)({container:[ea.wp.p(8)]});function Ak(e){var n,t,r,i,o=e.isActive,a=e.performPaneOperation,l=(0,_t.Jw)(_n.X.id,_n.F.ProjectPane),s=(0,P.A)(),c=(0,AA.Q)(),u=(n={variables:{id:s}},t=(0,eg._)({},Y9,n),ew.I(_e,t)),d=u.data,p=u.loading,h=u.error,m=(null==d?void 0:d.repl.__typename)==="Repl"?d.repl:null,g=(null==d?void 0:d.currentUser)?d.currentUser:null,v=(null==m||null==(r=m.project)?void 0:r.__typename)==="Project"?m.project:null,w=(null==v||null==(i=v.org)?void 0:i.__typename)==="Org"?v.org:null,b=(0,nq.A)().showError,S="error"===c.state?c.error:null;return((0,y.useEffect)(function(){S&&b(S)},[b,S]),mZ(o),p||"loading"===c.state)?(0,f.Y)(j.S,{p:16,row:!0,gap:8,justify:"center",children:(0,f.Y)(tw.A,{})}):w&&v?!h&&m&&g?(0,f.Y)(A_,{ref:l,repl:m,project:v,org:w,openGitPane:function(){return a({operation:"open",pane:{type:"git"}})},currentUser:g}):(0,f.Y)(j.S,{css:AC.container,children:(0,f.Y)(V.EY,{children:"Something went wrong, please try again."})}):(0,f.Y)(j.S,{css:AC.container,children:(0,f.Y)(V.EY,{children:"This Repl is not a project!"})})}function Ax(e){return(0,f.Y)(ti.Ay,(0,nh._)((0,eg._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M6 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 6a3.75 3.75 0 1 1 4.5 3.675V21a.75.75 0 0 1-1.5 0V9.675A3.751 3.751 0 0 1 2.25 6Zm10 0a.75.75 0 0 1 .75-.75h3A2.75 2.75 0 0 1 18.75 8v6.325A3.751 3.751 0 0 1 18 21.75a3.75 3.75 0 0 1-.75-7.425V8A1.25 1.25 0 0 0 16 6.75h-3a.75.75 0 0 1-.75-.75ZM18 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"})}))}var AD=h.ZU.Object({type:h.ZU.Literal("project")}),AE={Content:function(e){var n=e.options,t=n.isActive,r=n.performPaneOperation;return(0,f.Y)(Ak,{isActive:t,performPaneOperation:r})},Icon:function(){return(0,f.Y)(Ax,{})},getTitle:function(){return"Project"},description:"Manage changes in your Project and sync or merge changes across Apps in the Project",category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(AD,e)}},AR=h.ZU.Object({type:h.ZU.Literal("replitAuth")}),AI=t(2810),AT=t(49156),AF=t(17221),AP=t(73621),AL=t(43218);function AU(e){var n=e.openPane,t=(0,bG.c)({openPane:n}),r=(0,v._)((0,y.useState)(!1),2),i=r[0],o=r[1],a=(0,y.useCallback)(function(e){t("Add Replit Auth to my app",e),o(!1)},[t]);return(0,f.FD)(aL.Wv,{isOpen:i,onOpenChange:o,label:"Ask Agent options",placement:"bottom start",children:[(0,f.Y)(ug.d,{iconLeft:(0,f.Y)(tZ.A,{}),text:"Replit Auth is not configured. Click set up with Agent, and log into your app once with Replit Auth to configure.",colorway:"primary",onClick:function(){return o(!0)}}),(0,f.Y)(AL._,{onClick:a})]})}var AN=t(17957),AO=t(15178),AM=t(1193),AH=t(31599),AB=(0,eo.x)({loadingContainer:[ea.wp.height("100%")],sectionContainer:[ea.wp.mb(24)],providerItem:[ea.wp.gap(8)],form:[ea.wp.p(0)],sectionTitle:[ea.wp.mb(16)],sectionSubtitle:[ea.wp.mb(16)],providerIconContainer:[ea.wp.mr(8),ea.wp.flex.row,ea.wp.align.center],errorText:[{color:N.LU.foregroundDefault}],configContent:[{maxWidth:430}],pageTitle:[ea.wp.mb(16)],saveButton:[ea.wp.mt(16)]}),Az=[{id:"google",label:"Google",icon:(0,f.Y)(function(e){return(0,f.Y)(ti.Ay,(0,nh._)((0,eg._)({},e),{children:(0,f.Y)("path",{d:"M16.855 6.55c-1.25-1.19-2.83-1.8-4.6-1.8-3.13 0-5.78 2.11-6.73 4.96-.24.72-.38 1.49-.38 2.29s.13 1.57.38 2.29c.95 2.85 3.6 4.96 6.73 4.96 1.62 0 2.99-.44 4.07-1.16 1.26-.85 2.11-2.1 2.4-3.58h-6.47V10h11.3c.12.73.19 1.48.19 2.27 0 3.65-1.3 6.73-3.56 8.82-1.98 1.83-4.69 2.91-7.93 2.91-4.69 0-8.74-2.7-10.71-6.62a11.86 11.86 0 0 1 0-10.76C3.515 2.7 7.565 0 12.255 0c3.24 0 5.95 1.19 8.02 3.13l-3.42 3.42Z"})}))},{size:16})},{id:"github",label:"GitHub",icon:(0,f.Y)(dI.A,{size:16})},{id:"x",label:"X",icon:(0,f.Y)(AH.A,{size:16})},{id:"apple",label:"Apple",icon:(0,f.Y)(AO.A,{size:16})},{id:"email",label:"Email",icon:(0,f.Y)(AM.A,{size:16})}];function AW(e){var n,t=e.replId,r=e.hasAuthUsers,i=e.openPane,o=(0,AI.CX)({variables:{id:t}}),a=o.data,l=o.loading,s=(0,nq.A)(),c=s.showError,u=s.showConfirm,d=(0,v._)((0,y.useState)(""),2),p=d[0],h=d[1],m=(0,v._)((0,y.useState)([]),2),g=m[0],S=m[1],Y=(0,nJ.c)(),_=(0,y.useRef)(void 0),A=(0,y.useRef)([]);(0,tE.M)(tP.AZ.AUTH_PANE_USED,{action:"Configure Tab Viewed",replId:t});var C=(0,v._)((0,AT.KZ)({onError:function(e){return c((0,AF.A)(e.message))},onCompleted:function(e){u("App info updated successfully");var n=e.updateRepl.repl;n&&"url"in n&&n.url&&n.url!==_.current&&(window.history.replaceState(null,"",n.url+window.location.search+window.location.hash),_.current=n.url)}}),1)[0],k=(0,v._)((0,AI.tP)({onError:function(e){c((0,AF.A)(e.message))},onCompleted:function(e){if(!e.updateReplitAuthProviderConfig||"AuthProviderConfig"!==e.updateReplitAuthProviderConfig.__typename)return void c("Failed to update login providers");u("Login providers updated"),A.current=(0,em._)(g)}}),2),x=k[0],D=k[1].loading,E=(0,y.useCallback)(function(){if((null==a?void 0:a.getRepl)&&"Repl"===a.getRepl.__typename){h(a.getRepl.title||""),"url"in a.getRepl&&"string"==typeof a.getRepl.url&&(_.current=a.getRepl.url);var e=a.getRepl.authProviderConfig,n=Az.map(function(e){return e.id});e&&"AuthProviderConfig"===e.__typename&&e.minimizedProviders&&(n=n.filter(function(n){return!e.minimizedProviders.includes(n)})),S(n),A.current=(0,em._)(n)}},[a]);(0,y.useEffect)(function(){a&&E()},[a,E]);var R=function(){(0,tP.u4)(tP.AZ.AUTH_PANE_USED,{action:"App Info Saved",appName:p}),C({variables:{input:{id:t,title:p}}})},I=(n=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:return e=Az.map(function(e){return e.id}).filter(function(e){return!g.includes(e)}),(0,tP.u4)(tP.AZ.AUTH_PANE_USED,{action:"Login Providers Saved",selectedProviders:g,minimizedProviders:e}),[4,x({variables:{input:{replId:t,minimizedProviders:e}}})];case 1:return n.sent(),[2]}})}),function(){return n.apply(this,arguments)}),T=function(e){S(function(n){return n.includes(e)?n.filter(function(n){return n!==e}):(0,em._)(n).concat([e])})};if(l)return(0,f.Y)(j.S,{css:AB.loadingContainer,row:!0,justify:"center",align:"center",children:(0,f.Y)(tw.A,{size:24})});var F=(null==a?void 0:a.getRepl)&&"Repl"===a.getRepl.__typename?a.getRepl:null;return F?(0,f.FD)(j.S,{css:AB.configContent,gap:12,children:[!1===r&&(0,f.Y)(AU,{openPane:i}),(0,f.Y)(V.EY,{variant:"subheadBig",css:AB.pageTitle,children:"Configure your log in screen"}),(0,f.FD)(j.S,{css:AB.sectionContainer,children:[(0,f.Y)(V.EY,{css:AB.sectionTitle,variant:"subheadDefault",children:"App info"}),(0,f.Y)("form",{css:AB.form,onSubmit:function(e){e.preventDefault(),R()},children:(0,f.Y)(j.S,{align:"stretch",gap:16,children:(0,f.FD)(ek.ui,{background:"default",gap:16,children:[(0,f.Y)(j.S,{children:(0,f.FD)(j.S,{gap:4,children:[(0,f.FD)(j.S,{row:!0,justify:"space-between",align:"end",children:[(0,f.Y)("label",{htmlFor:Y("app-name"),children:(0,f.Y)(V.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,f.Y)(AN.A,{maxLength:60,value:p,hideLabel:!0})]}),(0,f.Y)(B.pd,{value:p,onChange:function(e){return h(e.target.value)},onBlur:R,placeholder:"Your app name",maxLength:60,id:Y("app-name")})]})}),(0,f.Y)(AP.A,{replId:t,authz:{isAuthorized:F&&F.authorizations.editMetadata.isAuthorized},initialIconUrl:F.iconUrl||"",originIconUrl:""})]})})})]}),(0,f.FD)(j.S,{css:AB.sectionContainer,children:[(0,f.Y)(V.EY,{css:AB.sectionTitle,variant:"subheadDefault",children:"Log in providers"}),(0,f.Y)(V.EY,{multiline:!0,css:AB.sectionSubtitle,children:"Choose which login options to display prominently. Unchecked options will appear in a dropdown menu."}),(0,f.Y)(j.S,{gap:12,children:Az.map(function(e){return(0,f.FD)(j.S,{css:AB.providerItem,row:!0,align:"center",children:[(0,f.Y)(nQ.S,{checked:g.includes(e.id),onChange:function(){return T(e.id)},id:Y("provider-".concat(e.id))}),(0,f.Y)("label",{htmlFor:Y("provider-".concat(e.id)),children:(0,f.FD)(j.S,{css:ea.wp.flex.row,align:"center",children:[(0,f.Y)(j.S,{css:AB.providerIconContainer,children:e.icon}),(0,f.Y)(V.EY,{children:e.label})]})})]},e.id)})}),(0,f.Y)(j.S,{css:AB.saveButton,children:(0,f.Y)(M.$n,{onClick:I,text:"Save providers",colorway:"primary",loading:D,disabled:D})})]})]}):(0,f.Y)(j.S,{children:(0,f.Y)(V.EY,{css:AB.errorText,children:"Error loading app information."})})}var AG=t(10962),AV=t(38192),AZ=t(83042),Aj=t(34170),Aq={userId:"USER_ID",name:"NAME",username:"USERNAME",added:"LAST_LOGIN",email:"EMAIL"},AK=[{key:"userId",label:"User ID",isRowHeader:!0,className:"userIdColumn",allowSorting:!1},{key:"email",label:"Email",className:"emailColumn",allowSorting:!0},{key:"name",label:"Name",className:"nameColumn",allowSorting:!0},{key:"lastLoggedIn",label:"Last logged in",className:"lastLoggedInColumn",allowSorting:!0},{key:"actions",label:"",alignment:"end",className:"actionsColumn"}],A$=(0,eo.x)({wrapper:[ea.wp.height("100%"),ea.wp.display.flex,ea.wp.flex.column],container:[ea.wp.flex.column,ea.wp.flex.grow(1),ea.wp.height("100%")],headerTitle:[ea.wp.mb(16),ea.wp.flex.row,ea.wp.align.center,ea.wp.gap(8)],tableWrapper:[ea.wp.flex.column,ea.wp.flex.growAndShrink(1),ea.wp.minHeight(0),ea.wp.overflow("hidden")],table:[ea.wp.width("100%"),ea.wp.height("100%"),ea.wp.container("table"),ea.wp.flex.grow(1),{"& .userIdColumn":{minWidth:100,maxWidth:200,width:"15%"},"& .nameColumn":{minWidth:200,maxWidth:350,width:"20%"},"& .emailColumn":(0,g._)({minWidth:200,maxWidth:350,width:"25%"},ea.kL.max(800,"table"),[{display:"none"}]),"& .lastLoggedInColumn":{minWidth:150,maxWidth:200,width:"10%"},"& .actionsColumn":{width:"10%"}}],searchContainer:[ea.wp.mb(16),{width:"fit-content"}]}),AJ=(0,eo.x)({modalContent:[ea.wp.flex.column,ea.wp.gap(16)],detailsRow:[ea.wp.flex.column,ea.wp.gap(4)],label:[ea.wp.color.foregroundDefault,{fontSize:N.LU.fontSizeSmall,lineHeight:N.LU.lineHeightDefault,fontWeight:N.LU.fontWeightMedium}],value:[ea.wp.gap(8),ea.wp.color.foregroundDimmer,{fontSize:N.LU.fontSizeDefault,lineHeight:N.LU.lineHeightDefault}],buttonsContainer:[ea.wp.gap(8)]}),AQ=(0,eo.x)({title:[ea.wp.mb(16)]});function AX(e,n){var t,r=(0,nq.A)(),i=r.showConfirm,o=r.showError,a=(0,v._)((0,AI.ye)(),1)[0];return t=(0,w._)(function(){var t,r;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(!n)return[2];l.label=1;case 1:return l.trys.push([1,3,,4]),(0,tP.u4)(tP.AZ.AUTH_PANE_USED,{action:n.banned?"User Unbanned":"User Banned",userId:n.userId}),[4,a({variables:{input:{replId:e,userId:Number(n.userId),action:n.banned?"UNBAN":"BAN"}},update:function(e,t){var r=t.data;(null==r?void 0:r.updateReplitAuthUserBanStatus.__typename)==="UpdateReplitAuthUserBanStatusOutput"&&r.updateReplitAuthUserBanStatus.success&&e.modify({id:e.identify({__typename:"ReplitAuthUser",id:n.id}),fields:{banned:function(){return!n.banned}}})}})];case 2:return(null==(r=null==(t=l.sent().data)?void 0:t.updateReplitAuthUserBanStatus)?void 0:r.__typename)==="UpdateReplitAuthUserBanStatusOutput"&&r.success?i(r.message):(null==r?void 0:r.__typename)==="NotFoundError"||(null==r?void 0:r.__typename)==="UnauthorizedError"?o(r.message):o("Failed to update ban status"),[3,4];case 3:return l.sent(),o("Failed to update ban status"),[3,4];case 4:return[2]}})}),function(){return t.apply(this,arguments)}}function A0(e){var n,t=e.replId,r=e.hasAuthUsers,i=e.openPane,o=(0,v._)((0,y.useState)(""),2),a=o[0],l=o[1],s=(0,v._)((0,y.useState)(null),2),c=s[0],u=s[1],d=(0,v._)((0,y.useState)(!1),2),p=d[0],h=d[1],m=(0,v._)((0,y.useState)({field:"LAST_LOGIN",direction:"DESC"}),2),g=m[0],S=m[1],Y=(0,y.useRef)(null),_=(0,_g.A)(a,500);(0,tE.M)(tP.AZ.AUTH_PANE_USED,{action:"Users Tab Viewed",replId:t}),(0,tE.r)(tP.AZ.AUTH_PANE_USED,{action:"Users Searched"},function(){return!!_},[_]);var A=(0,AI.Uo)({variables:{id:t,count:50,orderBy:g,filter:_?{search:_}:void 0},fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,ssr:!1}),C=A.data,k=A.loading,x=A.error,D=A.fetchMore,E=(0,y.useMemo)(function(){if((null==C?void 0:C.getRepl)&&"Repl"===C.getRepl.__typename&&C.getRepl.authUsers)return C.getRepl.authUsers},[C]),R=(0,y.useMemo)(function(){var e;return null!=(e=null==E?void 0:E.items)?e:[]},[E]),I=null!=(n=null==E?void 0:E.pageInfo.hasNextPage)&&n,T=(0,y.useMemo)(function(){return R.some(function(e){return e.email})},[R]),F=(0,y.useMemo)(function(){return AK.filter(function(e){return"email"!==e.key||T})},[T]),P=(0,y.useCallback)((0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(k||!I)return[2];return[4,D({variables:{id:t,count:50,after:null==E?void 0:E.pageInfo.nextCursor,orderBy:g,filter:_?{search:_}:void 0},updateQuery:function(e,n){var t,r,i=n.fetchMoreResult;if((null==(t=i.getRepl)?void 0:t.__typename)!=="Repl"||!i.getRepl.authUsers)return e;var o=(null==(r=e.getRepl)?void 0:r.__typename)==="Repl"&&e.getRepl.authUsers?e.getRepl.authUsers.items:[],a=(0,em._)(o).concat((0,em._)(i.getRepl.authUsers.items));return(0,nh._)((0,eg._)({},i),{getRepl:(0,nh._)((0,eg._)({},i.getRepl),{authUsers:(0,nh._)((0,eg._)({},i.getRepl.authUsers),{items:a})})})}})];case 1:return e.sent(),[2]}})}),[k,I,D,t,null==E?void 0:E.pageInfo.nextCursor,g,_]),L=(0,y.useCallback)(function(e){if(e.column){var n=Aq[e.column]||"LAST_LOGIN",t="ascending"===e.direction?"ASC":"DESC";(0,tP.u4)(tP.AZ.AUTH_PANE_USED,{action:"Users Sorted",sortField:n,sortDirection:t}),S({field:n,direction:t})}},[]),U=(0,y.useMemo)(function(){return null!==c&&R.find(function(e){return e.userId===c})||null},[R,c]);return(0,f.Y)("div",{ref:Y,css:A$.wrapper,children:(0,f.FD)(j.S,{css:A$.container,gap:12,children:[!r&&(0,f.Y)(AU,{openPane:i}),(0,f.FD)(j.S,{css:A$.headerTitle,children:[(0,f.Y)(J.A,{size:24}),(0,f.Y)(V.EY,{variant:"subheadBig",children:"Users"})]}),(0,f.Y)(j.S,{css:A$.searchContainer,children:(0,f.Y)(d6.I,{placeholder:"Search users",value:a,onChange:function(e){return l(e.target.value)},onClear:function(){l("")}})}),(0,f.Y)(ek.ui,{css:A$.tableWrapper,elevated:!0,children:(0,f.Y)(AV.h,{css:A$.table,autoLayout:!0,title:"Authenticated Users",columns:F,items:R,selectionMode:"none",selectionBehavior:"replace",loading:k,loadingPlaceholder:{numRows:50,height:36},errorMessage:null==x?void 0:x.message,emptyState:(0,f.Y)(AG.A,{title:k?"Loading users...":"No users",description:function(){if(!k)return _?"No users match your search criteria.":"Users who log in to your app will appear here."}(),illustration:(0,f.Y)(J.A,{size:24})}),canLoadMore:I,onLoadMore:P,isLoadingMore:E&&k,onSortChange:L,children:function(e){return(0,f.FD)(Aj.H,{id:e.id,children:[(0,f.Y)(AZ.n,{className:"userIdColumn",children:(0,f.Y)(V.EY,{children:e.userId})},"userId-".concat(e.id)),T?(0,f.Y)(AZ.n,{className:"emailColumn",children:(0,f.Y)(V.EY,{children:e.email||""})},"email-".concat(e.id)):null,(0,f.Y)(AZ.n,{className:"nameColumn",children:(0,f.FD)(j.S,{row:!0,align:"center",gap:8,children:[(0,f.Y)(d4.e,{src:e.image||null,username:e.displayName||"",size:20}),(0,f.Y)(V.EY,{children:e.displayName||""}),e.banned?(0,f.Y)(W.a,{text:"Banned",colorway:"negative",variant:"muted",compact:!0}):null]})},"name-".concat(e.id)),(0,f.Y)(AZ.n,{className:"lastLoggedInColumn",children:e.lastLoggedIn?(0,f.Y)(eT.Dc,{date:e.lastLoggedIn,dateFormat:"relative"}):"Never"},"lastLoggedIn-".concat(e.id)),(0,f.Y)(AZ.n,{className:"actionsColumn",children:(0,f.Y)(A1,{user:e,onViewDetails:function(){u(e.userId),h(!0)},replId:t})},"actions-".concat(e.id))]},e.id)}})}),U?(0,f.Y)(A2,{user:U,isOpen:p,onClose:function(){h(!1),u(null)},portalContainer:Y.current,replId:t}):null]})})}var A1=function(e){var n=e.user,t=e.onViewDetails,r=AX(e.replId,n);return(0,f.Y)(j.S,{row:!0,justify:"end",children:(0,f.FD)(bn.in,{placement:"bottom end",trigger:(0,f.Y)(eN.K0,{alt:"Actions",children:(0,f.Y)(s0.A,{})}),children:[(0,f.Y)(bn.Dr,{label:"View details",onAction:function(){(0,tP.u4)(tP.AZ.AUTH_PANE_USED,{action:"User Details Viewed",userId:n.userId}),t()}}),(0,f.Y)(bn.Dr,{label:n.banned?"Unban user":"Ban user",onAction:r})]})})};function A2(e){var n=e.user,t=e.isOpen,r=e.onClose,i=e.portalContainer,o=AX(e.replId,n);return n?(0,f.Y)(ld.a,{isOpen:t,onRequestClose:r,portalContainer:i,children:(0,f.FD)(j.S,{css:AJ.modalContent,children:[(0,f.FD)(j.S,{row:!0,align:"center",gap:8,css:AQ.title,children:[(0,f.Y)(d4.e,{src:n.image||null,username:n.displayName||"",size:32}),(0,f.Y)(V.EY,{variant:"subheadBig",children:n.displayName||""}),n.banned?(0,f.Y)(W.a,{colorway:"negative",text:"Banned",variant:"muted"}):null]}),(0,f.FD)(j.S,{css:AJ.detailsRow,children:[(0,f.Y)(V.EY,{css:AJ.label,children:"User ID"}),(0,f.Y)(V.EY,{css:AJ.value,children:n.userId})]}),n.displayName?(0,f.FD)(j.S,{css:AJ.detailsRow,children:[(0,f.Y)(V.EY,{css:AJ.label,children:"Name"}),(0,f.Y)(V.EY,{css:AJ.value,children:n.displayName})]}):null,n.email?(0,f.FD)(j.S,{css:AJ.detailsRow,children:[(0,f.Y)(V.EY,{css:AJ.label,children:"Email"}),(0,f.Y)(V.EY,{css:AJ.value,children:n.email})]}):null,(0,f.FD)(j.S,{css:AJ.detailsRow,children:[(0,f.Y)(V.EY,{css:AJ.label,children:"Account created"}),(0,f.Y)(V.EY,{css:AJ.value,children:(0,f.Y)(eT.Dc,{dateFormat:"absolute",absoluteFormat:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},date:new Date(n.timeCreated)})})]}),(0,f.FD)(j.S,{css:AJ.detailsRow,children:[(0,f.Y)(V.EY,{css:AJ.label,children:"Last login"}),(0,f.Y)(V.EY,{css:AJ.value,children:(null==n?void 0:n.lastLoggedIn)?(0,f.Y)(eT.Dc,{dateFormat:"absolute",absoluteFormat:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},date:new Date(n.lastLoggedIn)}):"Never"})]}),(0,f.Y)(j.S,{row:!0,justify:"start",css:AJ.buttonsContainer,children:(0,f.Y)(M.$n,{text:n.banned?"Unban User":"Ban User",onClick:o,colorway:n.banned?"primary":"negative",iconLeft:n.banned?void 0:(0,f.Y)(lp.A,{})})})]})}):(r(),null)}var A4=t(56508),A5=(0,eo.x)({container:[ea.wp.flex.column,ea.wp.flex.growAndShrink(1),ea.wp.height("100%")],header:[ea.wp.border({color:N.LU.outlineDimmest,width:1,direction:"bottom"}),ea.wp.overflowX("auto"),ea.wp.overflowY("hidden")],help:[ea.wp.border({color:N.LU.outlineDimmest,width:1,direction:"bottom"})],tabs:[ea.wp.flex.growAndShrink(1),{height:"100%",'[role="tablist"]':{height:"100%"}}],body:[ea.wp.overflowY("auto")],content:[ea.wp.maxHeight("100%")],centered:[ea.wp.flex.column,ea.wp.justify.center,ea.wp.align.center,ea.wp.height("100%"),ea.wp.p(16)],bannerWrapper:[ea.wp.width("fit-content")],loadingContainer:[ea.wp.flex.column,ea.wp.justify.center,ea.wp.align.center,ea.wp.height("100%")]});function A3(e){var n,t,r,i=e.performPaneOperation,o=(0,P.A)(),a=(0,v._)((0,y.useState)(0),2),l=a[0],s=a[1],c=(0,y.useCallback)(function(e){return i({operation:"open",pane:e})},[i]),u=(0,AI.CX)({variables:{id:o}}),d=u.data,p=u.loading,h=(null==d||null==(n=d.getRepl)?void 0:n.__typename)==="Repl"?d.getRepl:null,m=null==h?void 0:h.hasAuthUsers;return p?(0,f.Y)(j.S,{css:A5.loadingContainer,children:(0,f.Y)(tw.A,{})}):(null==h||null==(r=h.authorizations)||null==(t=r.manageAuth)?void 0:t.isAuthorized)?(0,f.FD)(j.S,{css:A5.container,children:[(0,f.FD)(j.S,{css:A5.header,row:!0,justify:"space-between",children:[(0,f.Y)(el.tU,{css:A5.tabs,selectedIndex:l,onSelectionChange:s,children:(0,f.FD)(el.wb,{"aria-label":"Authentication Options",children:[(0,f.Y)(el.oz,{children:(0,f.FD)(j.S,{row:!0,align:"center",gap:8,children:[(0,f.Y)(J.A,{size:16})," Users"]})}),(0,f.Y)(el.oz,{children:(0,f.FD)(j.S,{row:!0,align:"center",gap:8,children:[(0,f.Y)(oQ.A,{size:16})," Configure"]})})]})}),(0,f.Y)(j.S,{row:!0,css:A5.help,align:"center",children:(0,f.Y)(sk.A,{alt:"Visit the Replit Auth documentation to learn more.",target:"_blank",href:t8.ik.REPLIT_AUTH,children:(0,f.Y)(A4.A,{})})})]}),(0,f.Y)(ek.ui,{css:A5.body,elevated:!1,grow:!0,shrink:!0,children:(0,f.Y)(j.S,{css:A5.content,p:16,children:0===l?(0,f.Y)(A0,{replId:o,hasAuthUsers:m,openPane:c}):(0,f.Y)(AW,{replId:o,hasAuthUsers:m,openPane:c})})})]}):(0,f.Y)(j.S,{css:A5.centered,children:(0,f.FD)(j.S,{css:A5.bannerWrapper,gap:8,children:[(0,f.Y)(iX.N,{colorway:"warning",icon:(0,f.Y)(i0.A,{}),text:"You are not authorized to manage Auth."}),(0,f.Y)(bi(),{href:t8.ik.REPLIT_AUTH,target:"_blank",rel:"noopener",children:"Visit the Replit Auth documentation to learn more."})]})})}var A7=t(45623),A6={Content:function(e){var n=e.options;return(0,f.Y)(A3,{performPaneOperation:n.performPaneOperation})},Icon:function(e){var n=e.size;return(0,f.Y)(ti.Vx.Provider,{value:{color:N.LU.orangeStrongest,size:n},children:(0,f.Y)(A7.A,{color:N.LU.limeStrongest})})},getTitle:function(){return"Auth"},description:"Let users log in to your App using a prebuilt login page",category:tt.bY.CloudServices,decode:function(e){return m.T(AR,e)}},A8=t(22091),A9=t(77359),Ce=t(90342),Cn=t(52949),Ct=t(90930),Cr=t(96400),Ci=(0,e0.eU)(0),Co=(0,e0.eU)(function(e){return e(Ci)<=Cr.bX?"compact":"normal"}),Ca={CURSOR_SAVE:"\x1b[s",CURSOR_RESTORE:"\x1b[u",ERASE_TO_END_OF_SCREEN:"\x1b[0J",COLOR_RESET:"\x1b[0m",COLOR_BRIGHT_BLACK:"\x1b[0;90m"},Cl=(0,nW.AH)([ea.wp.position.absolute,ea.wp.left(8),ea.wp.right(0),ea.wp.zIndex(5)]);function Cs(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m=e.lineNumber,g=e.paneHeight,Y=e.shell,_=e.sendToShellChannel,A=e.onClose,C=(0,y.useMemo)(function(){return null==Y?void 0:Y._term},[Y]),k=(0,y.useMemo)(function(){var e,n=null==C?void 0:C._core;return null!=(e=null==n?void 0:n._renderService.dimensions.css.cell)?e:{width:0,height:0}},[C]),x=(0,y.useRef)(""),E=(0,y.useRef)(!1),R=(0,y.useRef)(null),T=(0,v._)((0,y.useState)(64),2),F=T[0],P=T[1],L=(0,y.useRef)(null),U=(0,y.useCallback)(function(e){return P(e.height)},[P]),N=(t=(0,S.NC)(),i=(r=(0,v._)((0,y.useState)(null),2))[0],o=r[1],l=(a=(0,v._)((0,y.useState)(!1),2))[0],s=a[1],c=(0,y.useCallback)((n=(0,w._)(function(e){var n,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return s(!0),[4,t.sessions.create({sessionType:I.dF3.INLINE_CHAT})];case 1:if(!(n=i.sent()).ok)return s(!1),[2,n];return o(r=n.payload),[4,r.appendEvent({kind:"shellSuggestion",message:e,modelType:I.e3q.BASIC})];case 2:return i.sent(),[2]}})}),function(e){return n.apply(this,arguments)}),[t]),u=(0,y.useCallback)((0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!i)return[3,2];return[4,i.abortLastEvent()];case 1:e.sent(),s(!1),e.label=2;case 2:return[2]}})}),[i]),p=(d=(0,D.Rj)(function(){return null==i?void 0:i.reduce(Cc,1)},[i],{default:{message:"",completed:!1}})).message,h=d.completed,(0,y.useEffect)(function(){h&&s(!1)},[h]),{sendMessage:c,stopMessage:u,loading:l,message:p,completed:h}),O=N.sendMessage,H=N.stopMessage,B=N.message,z=N.loading,W=N.completed;(0,y.useEffect)(function(){if(0===B.length){x.current="";return}x.current!==B&&(E.current&&(Y.write(Ca.CURSOR_RESTORE),Y.write(Ca.ERASE_TO_END_OF_SCREEN)),Y.write(Ca.CURSOR_SAVE),Y.write(Ca.COLOR_BRIGHT_BLACK),Y.write(B.replaceAll("\n","\r\n").trim()),Y.write(Ca.COLOR_RESET),E.current=!0,x.current=B)},[Y,B]);var G=(0,y.useCallback)(function(){(0,tP.u4)(tP.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell"}),H(),E.current&&(Y.write(Ca.CURSOR_RESTORE),Y.write(Ca.ERASE_TO_END_OF_SCREEN),Y.write(Ca.COLOR_RESET)),A()},[Y,H,A]);(0,y.useEffect)(function(){return Y.onData(function(){H(),A()}).dispose},[Y,H,A]);var V=(0,Cr.D3)({id:(0,nj.A)(),inputRef:L,loading:z,onSubmit:function(){Q?J():((0,tP.u4)(tP.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:Z}),X())},onClose:G}),Z=V.value,q=V.setValue,K=V.onKeyDown,$=V.escPressed,J=(0,y.useCallback)(function(){if(!E.current||!B)return void G();Y.write(Ca.CURSOR_RESTORE),Y.write(Ca.ERASE_TO_END_OF_SCREEN),Y.write(Ca.COLOR_RESET),_(B),(0,tP.u4)(tP.AZ.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",source:"shell"}),A()},[B,Y,_,A,G]),Q=W&&R.current===Z,X=(0,y.useCallback)(function(){R.current=Z,(0,tP.u4)(tP.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:Z}),O(Z)},[O,Z]),ee=k.height*(m+1)+8,en="top";ee+F>g&&(en="bottom",ee=g-k.height*(m+1)+4);var et=(0,S.Gk)(),er=(0,v._)((0,y.useState)(function(){return(0,e0.y$)()}),1)[0],ei=(0,e1.Xr)(Ci,{store:er}),eo=(0,e1.md)(Co,{store:er}),ea=(0,tF.A)(function(e){return ei(e.width)});return(0,f.Y)(j.S,{css:Cl,style:{top:"top"===en?ee:void 0,bottom:"bottom"===en?ee:void 0},children:(0,f.FD)(Cr.y1,{requestMeasure:U,type:"generateCode",isCodeMirrorPocket:!1,innerRef:ea,children:[(0,f.Y)(Cr.pd,{value:Z,inputRef:L,onChange:function(e){return q(e.currentTarget.value)},placeholder:"Enter a prompt to generate a shell command",onKeyDown:K,autoFocus:!0}),(0,f.FD)(Cr.wi,{children:[(0,f.FD)(f.FK,{children:[(0,f.Y)(Cr.sb,{type:"generateCode"}),W?(0,f.Y)(eN.K0,{alt:"Rerun the same prompt",onClick:function(){return X()},size:12,colorway:"grey",children:(0,f.Y)(oU.A,{})}):null]}),Q?(0,f.FD)(f.FK,{children:[(0,f.Y)(M.$n,{variant:"outlined",size:"small",text:"Reject",onClick:function(){(0,tP.u4)(tP.AZ.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",source:"shell"}),G()}}),(0,f.Y)(M.$n,{size:"small",text:"Accept",colorway:"blurple",onClick:J,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,f.Y)(Cr.XT,{escPressed:$,connecting:!et,loading:z,disabled:!Z||!Z.trim(),promptPresentation:"normal"===eo,onClick:function(){z?((0,tP.u4)(tP.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell",message_content:Z}),H()):((0,tP.u4)(tP.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:Z}),X())}})]})]})})}var Cc={direction:"reverse",state:{message:"",completed:!1},reducer:function(e,n){var t;e.sender.type===I.utd.AI&&(null==(t=e.contents.contents)?void 0:t.$kind)==="shellSuggestionEventContents"&&e.contents.contents.shellSuggestionEventContents.content&&(n.message=e.contents.contents.shellSuggestionEventContents.content,n.completed=e.state===I.qOk.COMPLETE)}},Cu=t(41425);function Cd(e){var n=e.portsOpenedByThisShell,t=e.performPaneOperation,r=e.onClose,i=(0,A.A)().ports,o=(0,y.useCallback)(function(e){i.updateDotReplitPortsMapping(e,void 0)},[i]),a=(0,y.useCallback)(function(e){i.tryExposingPortAutomatically(e)},[i]);return(0,f.Y)(Cu.yN,{configurations:n.map(function(e){return e.configuration}),openWebview:function(){t({operation:"open",secondary:!0,pane:{type:"webview",data:{ports:n.length>0?{type:"local",port:n[0].configuration.localPort}:void 0}}})},openNetworkingTool:function(){t({operation:"open",secondary:!0,pane:{type:"networking"}})},onClose:function(){null==r||r()},onDontExposePort:function(){1===n.length&&o(n[0].configuration.localPort)},onDoExposePort:function(){1===n.length&&a(n[0].configuration.localPort)}})}var Cp=t(39022),Cf=t(62688),Ch=(0,nW.AH)([ea.wp.height("100%"),ea.wp.overflow("hidden"),{"& .xterm":[ea.wp.pl(8),ea.wp.pt(8),ea.wp.pb(4),ea.wp.height("100%")]}]),Cm=(0,eo.x)({container:[ea.wp.height("100%"),{"&:focus-within .controls":{opacity:1}}],xterm:Ch,xtermWithBorderRadius:[Ch,{"& .xterm-viewport":[ea.wp.borderRadius(0,0,8,8)]}]}),Cg=(0,nW.AH)([ea.wp.position.absolute,ea.wp.flex.row,ea.wp.top(8),ea.wp.right(8),ea.wp.height(30),ea.wp.align.center,ea.wp.zIndex(8),{opacity:0}]);function Cv(e){var n,t,r=e.shell,i=e.shellMetadata,o=e.sendToShellChannel,a=e.shellRef,l=e.className,s=e.openSearchAndReplace,c=e.openAssistantWithMessage,u=e.performPaneOperation,d=e.isGeneratePromptVisible,p=e.currentPromptLineNumber,h=e.onOpenGeneratePrompt,m=e.onCloseGeneratePrompt,g=e.searchState,w=e.setSearchState,b=(0,tl.g)("accessibleTerminal").preferences.accessibleTerminal,S=(0,Ce.kP)(null!=(n=null==i?void 0:i.cgroup)?n:void 0);r&&g.isSearching&&(t=(0,f.Y)(Cp.p,{searchValue:g.searchText,setSearchValue:function(e){w({isSearching:!0,searchText:e})},findPrevious:r.findPrevious,findNext:r.findNext,exit:function(){return w({isSearching:!1})}}));var Y=(0,iL.m5)(),_=(0,Cn.EF)().onContextMenu,A=(0,Ct.P)({xterm:r,isWorkflowsTerminal:!1,openAssistantWithMessage:c,openShellSearch:function(e){w({isSearching:!0,searchText:e})},openSearchAndReplace:s,openGeneratePrompt:h});(0,Cf.Z)({xterm:r,onAskAssistant:function(e){c((0,A9.yt)(e))}}),(0,y.useEffect)(function(){null==r||r.fit()},[r,S]);var C=(0,v._)((0,y.useState)(0),2),k=C[0],x=C[1],D=(0,tF.A)(function(e){x(e.height)},{type:"throttle",wait:200});return(0,f.FD)(j.S,{className:l,innerRef:D,css:Cm.container,onKeyDown:function(e){"f"===e.key&&(0,SD.T$)(e)&&(w({isSearching:!0,searchText:""}),e.preventDefault())},children:[!b&&(0,f.Y)(S6.s,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,f.FD)(j.S,{css:[ea.wp.coverContainer,ea.wp.flex.column],onClick:function(){d&&(m(),null==r||r.focus())},children:[(0,f.Y)(j.S,{css:[Y?Cm.xterm:Cm.xtermWithBorderRadius,ea.wp.flex.growAndShrink(1),d?{pointerEvents:"none",filter:"opacity(0.75)"}:null],innerRef:a,onContextMenu:function(e){return _(e,{command:A})}}),(0,f.Y)(Cd,{portsOpenedByThisShell:S,performPaneOperation:u,onClose:function(){null==r||r.focus(),null==r||r.fit()}})]}),r&&d?(0,f.Y)(Cs,{lineNumber:p,paneHeight:k,shell:r,sendToShellChannel:o,onClose:function(){m(),r.focus()}}):null,r?(0,f.Y)(j.S,{className:"controls",css:Cg,children:t}):null]})}var Cy=t(28854),Cw=t(64254).hp,Cb=(0,nW.AH)([ea.wp.position.relative,ea.wp.height("100%")]);function CS(e){var n,t,r=e.shellId,i=e.paneId,o=e.performPaneOperation,a=e.userId,l=e.xterm,s=e.xtermRef,c=e.currentPromptLineNumber,u=e.isGeneratePromptVisible,d=e.onOpenGeneratePrompt,p=e.onCloseGeneratePrompt,h=e.searchState,m=e.setSearchState,g=(0,v._)((0,y.useState)(void 0),2),Y=g[0],_=g[1],A=(0,y.useCallback)(function(e){o({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[o]),C=(0,Cy.H)({openPane:function(e){o({operation:"open",secondary:!0,pane:e})}}),k=(0,S.dm)().assistantMode,x=(0,S.jt)(),D=(0,y.useCallback)(function(e){(0,tP.u4)(tP.AZ.ASSISTANT_USED,{action:"message_sent",assistant_mode:k,message_content:e,message_source:"shell",is_agent_repl:x}),C(e)},[x,k,C]),E=(0,y.useRef)(null);(0,nC.b)((n=(0,w._)(function(e,n){var t,o,s,c,u,d,p;return(0,b.YH)(this,function(f){var h;return(t=n.signal,l)?(s=(o=e.shellExec.connect.stream({id:r,userId:a,processViewId:i,size:l.getSize()},{signal:t})).reqWritable,c=o.resReadable,E.current=u=function(e){s.write({$kind:"stdin",stdin:new Uint8Array(Cw.from(e))})},d=l.onResize((h=(0,w._)(function(n){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.shellExec.resize.rpc({id:r,userId:a,processViewId:i,size:n})];case 1:return t.sent(),[2]}})}),function(e){return h.apply(this,arguments)})),p=l.onData(u),l.write("\x1bc"),(0,w._)(function(){var e,n,t,r,i,o,a;return(0,b.YH)(this,function(s){switch(s.label){case 0:e=!1,n=!1,s.label=1;case 1:s.trys.push([1,6,7,12]),r=(0,R._)(c),s.label=2;case 2:return[4,r.next()];case 3:if(!(e=!(i=s.sent()).done))return[3,5];if(!(o=i.value).ok)return l.clear(),[2];"output"===o.payload.$kind&&l.write(o.payload.output),s.label=4;case 4:return e=!1,[3,2];case 5:return[3,12];case 6:return a=s.sent(),n=!0,t=a,[3,12];case 7:if(s.trys.push([7,,10,11]),!(e&&null!=r.return))return[3,9];return[4,r.return()];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:if(n)throw t;return[7];case 11:return[7];case 12:return[2]}})})(),[2,function(){E.current=null,s.close(),d.dispose(),p.dispose()}]):[2]})}),function(e,t){return n.apply(this,arguments)}),[l,r,a,i]),(0,nC.b)((t=(0,w._)(function(e,n){var t,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=n.signal,i=e.shellExec.monitor.subscribe({id:r},{signal:t}).resReadable,o=!1,a=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),s=(0,R._)(i),p.label=2;case 2:return[4,s.next()];case 3:if(!(o=!(c=p.sent()).done))return[3,5];if(!(u=c.value).ok)if("NO_PROCESS_MATCHING_ID"===u.payload.code)return[3,4];else return[3,5];"NotStarted"!==u.payload.state&&u.payload.cgroupPath&&_({cgroup:u.payload.cgroupPath}),p.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),a=!0,l=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(o&&null!=s.return))return[3,9];return[4,s.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(a)throw l;return[7];case 11:return[7];case 12:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[r]);var I=(0,y.useCallback)(function(e){return!!E.current&&(E.current(e),!0)},[E]);return(0,f.Y)(j.S,{css:Cb,children:(0,f.Y)(Cv,{shell:l,shellMetadata:Y,shellRef:s,performPaneOperation:o,currentPromptLineNumber:c,isGeneratePromptVisible:u,sendToShellChannel:I,openSearchAndReplace:A,openAssistantWithMessage:D,onOpenGeneratePrompt:d,onCloseGeneratePrompt:p,searchState:h,setSearchState:m})})}var CY=t(16771),C_=t(35422),CA=t(76982),CC=t(17545),Ck=(0,eo.x)({wrapper:[ea.wp.height("100%"),ea.wp.flex.column],headerWrapper:[ea.wp.border({direction:"bottom",color:N.LU.outlineDimmest}),ea.wp.height(28)],failureWrapper:[ea.wp.color.accentNegativeStronger],terminalWrapper:[ea.wp.height("100%"),ea.wp.flex.growAndShrink(1)],shellListItemWrapper:[ea.wp.width("100%"),ea.wp.overflow("hidden")],shellListButton:[ea.wp.viewStyle,ea.wp.reset.button,ea.wp.p(2),ea.wp.height(22),ea.wp.rowWithGap(8),ea.wp.align.center,ob.t.nofill,ea.wp.flex.shrink(1),{transitionProperty:"background-color, box-shadow, opacity",opacity:.8}],shellListButtonLabel:[ea.wp.display.flex,ea.wp.align.center,ea.wp.rowWithGap(8),ea.wp.flex.shrink(1)],shellListItem:[ea.wp.display.flex,ea.wp.rowWithGap(8),ea.wp.borderRadius(),ea.wp.px(6),ea.wp.py(4),ea.wp.align.center,ea.wp.color.foregroundDefault,ea.wp.cursor.pointer,{transitionProperty:"background-color, box-shadow",backgroundColor:"transparent",borderWidth:1,borderStyle:"solid",borderColor:"transparent",outline:"2px solid ".concat(N.LU.accentPrimaryDefault),outlineOffset:"-2px",outlineColor:"transparent"},{"&[data-hovered],&[data-focused]":{backgroundColor:N.LU.interactiveBackground},"&[data-selected]":{backgroundColor:N.LU.interactiveBackgroundActive},"&[aria-disabled]":{color:N.LU.foregroundDimmest,cursor:"not-allowed"}}],shellListItemText:[ea.wp.font.code,ea.wp.fontSize(N.LU.fontSizeSmall),ea.wp.flex.shrink(0)],shellListItemCommand:[ea.wp.font.code,ea.wp.fontSize(N.LU.fontSizeSmall),ea.wp.flex.growAndShrink(1),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],shellListCurrentText:[ea.wp.fontSize(N.LU.fontSizeSmall),ea.wp.color.greyDefault],shellListNotRunningText:[ea.wp.fontSize(N.LU.fontSizeSmall),ea.wp.color.greyDefault],runningShellsCountBadge:[ea.wp.width(18),ea.wp.height(18),ea.wp.align.center,ea.wp.justify.center,ea.wp.backgroundColor.backgroundHighest,ea.wp.borderRadius("full"),ea.wp.fontSize(N.LU.fontSizeSmall)]});function Cx(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,w,b,S,Y,_,C,k,x,D,E,R,I,T,F,L,U,N,O,M,H,B,z,W=e.paneId,G=e.performPaneOperation,V=e.emitPaneMetrics,Z=e.initialPwd,q=e.initialCmd,K=e.isActive,$=(0,v._)((0,y.useState)({state:"not-connected"}),2),J=$[0],Q=$[1],X="connected"===J.state?J.id:void 0,ee=(0,oq.T)(),en=(0,y.useCallback)(function(e){return Q({state:"connected",id:e})},[Q]),et=(r=(n={isActive:K,performPaneOperation:G,emitPaneMetrics:V}).performPaneOperation,i=n.emitPaneMetrics,o=n.isActive,a=(0,y.useCallback)(function(e){r({operation:"open",secondary:!0,pane:{type:(0,tt.QY)(e),data:e}})},[r]),l=(0,y.useCallback)(function(e,n){r({operation:"open",secondary:!0,pane:{type:"webview",data:{ports:{type:"local",path:e,port:n}}}})},[r]),s=(0,A.A)().fs,c=(0,P.A)(),u=(0,y.useRef)(null),d=(0,y.useRef)(""),h=(p=(0,v._)((0,y.useState)(0),2))[0],m=p[1],b=(w=(0,v._)((0,y.useState)(!1),2))[0],S=w[1],Y=(0,y.useRef)(!1),_=(0,CY.QU)({onFTCSState:function(e){var n=e.state;n===CY.Od.CommandExecuted&&(Y.current=!0),n===CY.Od.CommandFinished&&(Y.current=!1),u.current=n},onOpenGeneratePrompt:function(){Y.current||S(!0)},onUpdateCurrentPromptLineNumber:m}),C=(0,y.useCallback)(function(e,n){if(n.startsWith("A")){var t=n.replace(/^A;/,"");(0,tP.u4)(tP.AZ.SHELL_COMMAND_EVALED,{context:t,replId:c,api:"pid2",pwd:d.current})}n.startsWith("B")&&(d.current=n.replace(/^B;/,""))},[c]),k=(0,y.useCallback)(function(e){return r({operation:"open",pane:e,secondary:!0})},[r]),D=(x=(0,v._)((0,CA.A)({openFile:a,listFiles:s.listFiles,openWebview:l,onInBandOSCMessages:(t={},(0,g._)(t,CY.n8,_),(0,g._)(t,82,C),t),openPane:k,emitPaneMetrics:i}),2))[0],E=x[1],R=(0,y.useCallback)(function(){Y.current||((0,tP.u4)(tP.AZ.AI_SHELL_CONTEXT_MENU_GENERATE_CLICKED),S(!0))},[]),I=(0,y.useCallback)(function(){S(!1)},[]),T=(0,y.useId)(),F="scope-shell-".concat(T),(0,pO.RD)(F,o),(0,pO.SJ)(function(){return[CY.Ws.id,{run:function(){Y.current||S(!0)},scope:F,bubble:!1}]},[S]),(0,tv.HP)(function(){return D},[D]),U=(L=(0,v._)((0,y.useState)({isSearching:!1}),2))[0],N=L[1],O=(0,y.useCallback)(function(){var e;N({isSearching:!0,searchText:null!=(e=null==D?void 0:D._term.getSelection())?e:""})},[D]),M=(0,y.useCallback)(function(){N({isSearching:!1})},[]),H=(0,y.useCallback)(function(){U.isSearching?M():O()},[O,M,U]),B=(0,y.useCallback)(function(){null==D||D.clear()},[D]),z=(0,y.useMemo)(function(){return[{match:vO.G2,data:{type:"action",label:"Clear Shell",icon:(0,f.Y)(tK.A,{}),run:B}},{match:vO.G2,data:{type:"action",label:"Find in Shell",icon:(0,f.Y)(ub.A,{}),run:O}}]},[O,B]),(0,tv.Qt)(function(){return{commands:[{commands:z}],type:"shell"}},[z]),{xterm:D,xtermRef:E,searchState:U,setSearchState:N,toggleSearch:H,isGeneratePromptVisible:b,currentPromptLineNumber:h,onOpenGeneratePrompt:R,onCloseGeneratePrompt:I,clearShell:B});return(0,f.FD)(j.S,{css:Ck.wrapper,children:[(0,f.Y)(CD,{step:J,setStep:Q,shellId:X,initialCmd:q,initialPwd:Z,switchShellSession:en,toggleSearch:et.toggleSearch,clearShell:et.clearShell}),(0,f.FD)(j.S,{css:Ck.terminalWrapper,children:[ee&&void 0!==X?(0,f.Y)(CS,(0,eg._)({shellId:X,paneId:W,performPaneOperation:G,userId:ee},et)):null,"errored"===J.state?(0,f.Y)(j.S,{css:Ck.failureWrapper,p:8,children:"Failed to load the Shell."}):null]})]})}function CD(e){var n=e.shellId,t=e.step,r=e.setStep,i=e.initialPwd,o=e.initialCmd,a=e.switchShellSession,l=e.toggleSearch,s=e.clearShell,c=(0,y.useRef)(!1),u=(0,nd.I)(function(e){var n;return n=(0,w._)(function(n){var t;return(0,b.YH)(this,function(a){switch(a.label){case 0:if(c.current)return[2];return c.current=!0,[4,e.shellExec.spawn.rpc({cmd:"bash",cwd:(null==n?void 0:n.restoreFromPaneState)?i:void 0,initialCmd:(null==n?void 0:n.restoreFromPaneState)?o:void 0,autoCleanup:!0})];case 1:return(t=a.sent()).ok?r({state:"connected",id:t.payload.id}):"UNEXPECTED_DISCONNECT"===t.payload.code?r({state:"not-connected"}):r({state:"errored"}),c.current=!1,[2]}})}),function(e){return n.apply(this,arguments)}},[r,i,o]),d=(0,nd.I)(function(e){return(0,w._)(function(){return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!n)return[3,2];return[4,e.shellExec.kill.rpc({id:n})];case 1:t.sent(),t.label=2;case 2:return[2]}})})},[n]);return(0,f.FD)(j.S,{css:Ck.headerWrapper,grow:0,shrink:0,align:"center",justify:"space-between",row:!0,gap:4,px:4,children:[(0,f.FD)(j.S,{grow:!0,shrink:!0,row:!0,gap:2,align:"center",children:[(0,f.Y)(CE,{shellId:n,spawnShell:u,switchShellSession:a,step:t}),(0,f.Y)(CT,{})]}),(0,f.FD)(j.S,{shrink:0,row:!0,gap:4,align:"center",children:[(0,f.Y)(eN.K0,{alt:"Search in Shell",onClick:function(){l()},children:(0,f.Y)(ub.A,{color:N.LU.foregroundDimmest})}),(0,f.Y)(eN.K0,{alt:"Clear Output",onClick:function(){s()},children:(0,f.Y)(tK.A,{color:N.LU.foregroundDimmest})}),(0,f.Y)(eN.K0,{alt:"Kill Shell",disabled:void 0===d,onClick:function(){null==d||d()},children:(0,f.Y)(dM.A,{color:N.LU.foregroundDimmest})})]})]})}function CE(e){var n,t=e.step,r=e.shellId,i=e.spawnShell,o=e.switchShellSession,a=(0,v._)((0,y.useState)([]),2),l=a[0],s=a[1],c=l.find(function(e){return e.id===r});return((0,nC.b)((n=(0,w._)(function(e,n){var t,r,i,o,a,l,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=n.signal,r=e.shellExec.monitorAll.subscribe({},{signal:t}).resReadable,i=!1,o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),l=(0,R._)(r),p.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(c=p.sent()).done))return[3,5];if(!(u=c.value).ok)return[2];s(u.payload.processes.filter(function(e){return"Running"===e.state})),p.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),o=!0,a=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[]),(0,y.useEffect)(function(){"not-connected"===t.state&&(null==i||i({restoreFromPaneState:!0}))},[i,t.state]),(0,y.useEffect)(function(){"connected"===t.state&&(l.find(function(e){return e.id===r})||(l.length>0?o(l[0].id):null==i||i()))},[r,l,i,t.state,o]),c&&"Running"===c.state)?(0,f.Y)(f.FK,{children:(0,f.FD)(bn.in,{trigger:(0,f.FD)(cZ.$,{css:Ck.shellListButton,children:[(0,f.Y)(rN.A,{size:12}),(0,f.Y)(j.S,{css:Ck.shellListButtonLabel,children:(0,f.Y)(CI,{shellState:c})}),(0,f.Y)(CR,{userIdsToProcessViewIds:c.userIdsToProcessViewIds}),l.length>1?(0,f.Y)(Z.m_,{tooltip:"".concat(l.length," Shells are running"),children:(0,f.Y)(j.S,{css:Ck.runningShellsCountBadge,children:l.length})}):null]}),children:[l.filter(function(e){return"Running"===e.state}).sort(function(e,n){var t,r;return("Running"===e.state&&null!=(t=e.idx)?t:0)-("Running"===n.state&&null!=(r=n.idx)?r:0)}).map(function(e){var n,t=null!=(n=e.command)?n:e.previousCommand,r=e.cwd.replace(/^\/home\/runner/,"~"),i="".concat(r).concat(t?": ".concat(t):""),a=e.id===c.id;return(0,f.FD)(up.Dr,{css:Ck.shellListItem,onAction:function(){o(e.id)},textValue:i,children:[(0,f.Y)(CI,{shellState:e}),a?(0,f.Y)(V.EY,{css:Ck.shellListCurrentText,children:"Current"}):null,(0,f.Y)(CR,{userIdsToProcessViewIds:e.userIdsToProcessViewIds})]},e.id)}),(0,f.Y)(bn.wv,{}),(0,f.Y)(bn.Dr,{label:"New Shell",icon:(0,f.Y)(tq.A,{}),onAction:function(){null==i||i()}})]})}):null}function CR(e){var n=e.userIdsToProcessViewIds,t=(0,g9.Q4)(),r=(0,y.useMemo)(function(){var e;return null!=(e=Object.keys(null!=n?n:{}).map(function(e){return parseInt(e,10)}).map(function(e){return t.find(function(n){return n.id===e})}).filter(Boolean))?e:[]},[n,t]);return 0===r.length?null:(0,f.Y)(j.S,{grow:0,shrink:0,row:!0,gap:4,align:"center",children:r.map(function(e){return(0,f.Y)(CC.A,{user:e,size:16},e.id)})})}function CI(e){var n,t=e.shellState;if("Running"!==t.state)return(0,f.Y)(V.EY,{css:Ck.shellListNotRunningText,children:"Not Running"});var r=void 0!==t.command||void 0!==t.previousCommand;return(0,f.FD)(j.S,{css:Ck.shellListItemWrapper,row:!0,children:[(0,f.Y)(V.EY,{css:Ck.shellListItemText,children:t.cwd.replace(/^\/home\/runner/,"~")}),r?(0,f.FD)(f.FK,{children:[":\xa0",(0,f.Y)(V.EY,{css:Ck.shellListItemCommand,style:{color:void 0===t.command?N.LU.greyDefault:void 0},children:null!=(n=t.command)?n:t.previousCommand})]}):null]})}function CT(){var e=(0,C_.A)();return(null==e?void 0:e.status)==="rebuilding"||(null==e?void 0:e.status)==="rebuilding-after-error"?(0,f.Y)(Z.m_,{tooltip:"The environment is rebuilding in the background due to a change in configuration files",children:(0,f.Y)(tw.A,{color:N.LU.foregroundDimmest})}):null}var CF=h.ZU.Object({type:h.ZU.Literal("shell"),data:h.ZU.Optional(h.ZU.Object({initialPwd:h.ZU.Optional(h.ZU.String()),initialCmd:h.ZU.Optional(h.ZU.String())}))}),CP={Content:function(e){var n,t,r=e.pane,i=e.options;return(0,f.Y)(Cx,{paneId:i.paneId,isActive:i.isActive,initialPwd:null==(n=r.data)?void 0:n.initialPwd,initialCmd:null==(t=r.data)?void 0:t.initialCmd,performPaneOperation:i.performPaneOperation,emitPaneMetrics:i.emitPaneMetrics})},Icon:function(e){var n=e.size;return(0,f.Y)(ti.Vx.Provider,{value:{color:N.LU.blueStrongest,size:n},children:(0,f.Y)(oN.A,{})})},getTitle:function(){return"Shell"},description:"Directly access your App through a command line interface (CLI)",category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(CF,e)}};function CL(){var e=(0,ev._)(["\n  query SshPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          connectUsingSsh {\n            isAuthorized\n            message\n            code\n          }\n        }\n        org {\n          id\n          type\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n"]);return CL=function(){return e},e}function CU(){var e=(0,ev._)(["\n  query SshPaneCurrentUser {\n    currentUser {\n      id\n      __typename\n      publicSshKeys {\n        ... on PublicSshKeysOutput {\n          keys {\n            id\n            key\n            label\n            timeCreated\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n"]);return CU=function(){return e},e}var CN={},CO=(0,ey.J1)(CL()),CM=(0,ey.J1)(CU()),CH=t(96846),CB=t(60800),Cz=t(32859),CW=t(13988),CG=t(12157),CV=t(70489),CZ=t(58791),Cj=t(95047),Cq=t(7379),CK=t(92618),C$=t(73762),CJ=t(55576),CQ=t(89905),CX=t(52153);function C0(e){return(0,f.FD)(CX.A,(0,nh._)((0,eg._)({},e),{children:[(0,f.FD)("g",{clipPath:"url(#clip0_6530_283)",children:[(0,f.Y)("mask",{id:"mask0_6530_283",width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:(0,f.Y)("path",{fill:"#fff",fillRule:"evenodd",d:"M17.019 23.836c.378.147.809.138 1.19-.046l4.942-2.377A1.5 1.5 0 0 0 24 20.06V3.939a1.5 1.5 0 0 0-.85-1.352L18.21.21a1.494 1.494 0 0 0-1.705.29l-9.46 8.63-4.12-3.128a.999.999 0 0 0-1.276.057L.327 7.261a1 1 0 0 0-.001 1.48L3.899 12 .326 15.26a1 1 0 0 0 .001 1.479L1.65 17.94a.999.999 0 0 0 1.276.057l4.12-3.128 9.46 8.63c.15.15.325.262.514.336Zm.985-17.284L10.826 12l7.178 5.448V6.552Z",clipRule:"evenodd"})}),(0,f.FD)("g",{mask:"url(#mask0_6530_283)",children:[(0,f.Y)("path",{fill:"#0065A9",d:"M23.15 2.591 18.207.211A1.495 1.495 0 0 0 16.5.5L.312 15.26a1 1 0 0 0 0 1.479l1.323 1.202a1 1 0 0 0 1.277.057l19.495-14.79A.993.993 0 0 1 24 4v-.057a1.5 1.5 0 0 0-.85-1.352Z"}),(0,f.Y)("g",{filter:"url(#filter0_d_6530_283)",children:(0,f.Y)("path",{fill:"#007ACC",d:"m23.15 21.409-4.944 2.38A1.495 1.495 0 0 1 16.5 23.5L.312 8.74a1 1 0 0 1 0-1.479L1.636 6.06a1 1 0 0 1 1.277-.057l19.495 14.79A.993.993 0 0 0 24 20v.058a1.5 1.5 0 0 1-.85 1.35Z"})}),(0,f.Y)("g",{filter:"url(#filter1_d_6530_283)",children:(0,f.Y)("path",{fill:"#1F9CF0",d:"M18.206 23.79a1.495 1.495 0 0 1-1.706-.29c.553.553 1.5.162 1.5-.621V1.12C18 .34 17.053-.054 16.5.5a1.496 1.496 0 0 1 1.706-.29l4.944 2.377c.52.25.85.776.85 1.352v16.122a1.5 1.5 0 0 1-.85 1.352l-4.944 2.377Z"})}),(0,f.Y)("path",{fill:"url(#paint0_linear_6530_283)",fillRule:"evenodd",d:"M17.004 23.836c.378.147.81.138 1.19-.046l4.942-2.377a1.5 1.5 0 0 0 .85-1.352V3.939a1.5 1.5 0 0 0-.85-1.352L18.195.21A1.494 1.494 0 0 0 16.49.5L7.03 9.13 2.91 6.002a.999.999 0 0 0-1.276.057L.313 7.261a1 1 0 0 0-.002 1.48L3.885 12 .31 15.26a1 1 0 0 0 .002 1.479l1.321 1.202a.999.999 0 0 0 1.276.057l4.12-3.128 9.46 8.63c.15.15.325.263.514.336Zm.985-17.284L10.812 12l7.177 5.448V6.552Z",clipRule:"evenodd",opacity:".25"})]})]}),(0,f.FD)("defs",{children:[(0,f.FD)("filter",{id:"filter0_d_6530_283",width:"28.015",height:"22.139",x:"-2.015",y:"3.799",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[(0,f.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.Y)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,f.Y)("feOffset",{}),(0,f.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,f.Y)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,f.Y)("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_6530_283"}),(0,f.Y)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6530_283",result:"shape"})]}),(0,f.FD)("filter",{id:"filter1_d_6530_283",width:"11.5",height:"27.876",x:"14.5",y:"-1.938",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[(0,f.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.Y)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,f.Y)("feOffset",{}),(0,f.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,f.Y)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,f.Y)("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_6530_283"}),(0,f.Y)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6530_283",result:"shape"})]}),(0,f.FD)("linearGradient",{id:"paint0_linear_6530_283",x1:"11.985",x2:"11.985",y1:".062",y2:"23.938",gradientUnits:"userSpaceOnUse",children:[(0,f.Y)("stop",{stopColor:"#fff"}),(0,f.Y)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,f.Y)("clipPath",{id:"clip0_6530_283",children:(0,f.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}))}function C1(){return(0,f.Y)(CJ.A,{src:"/public/images/cursor-ide-logo.png",width:24,height:24,alt:"Cursor Logo"})}function C2(e){var n=e.editor,t=e.disabled,r=(0,Cq.A)(n),i=r.openEditor,o=r.onConfirmConfig,a=r.isConfigModalOpen,l=r.closeConfigModal;return(0,f.FD)(ek.ui,{css:C3.connectInstructions,elevated:!0,children:[(0,f.FD)(j.S,{css:C3.connectHeader,children:[(0,f.FD)(V.Y9,{level:3,children:["Connect to ","vscode"===n?"VS Code":"Cursor"]}),(0,f.FD)(V.EY,{color:"dimmer",children:["One-click SSH setup will launch"," ","vscode"===n?"VS Code":"Cursor"," and configure keys for you."]})]}),(0,f.Y)(M.$n,{text:t?"SSH Key Setup Required":"Launch ".concat("vscode"===n?"VS Code":"Cursor"),iconLeft:"vscode"===n?(0,f.Y)(C0,{}):(0,f.Y)(C1,{}),css:C3.launchEditorButton,disabled:t,onClick:function(){(0,tP.u4)(tP.AZ.OPEN_IN_VSCODE_CLICKED,{source:"ssh_pane",editor:n}),i()}}),(0,f.Y)(ld.a,{isOpen:a,onRequestClose:l,centered:!0,children:(0,f.Y)(CV.A,{onConfirm:o})})]})}function C4(e){var n=e.sshHostname,t=e.sshUser,r=e.sshPort,i=(0,Cj.A)(),o="ssh -i ".concat(i,"/.ssh/replit -p ").concat(r," ").concat(t,"@").concat(n);return(0,f.FD)(ek.ui,{css:C3.connectInstructions,elevated:!0,children:[(0,f.FD)(j.S,{css:C3.connectHeader,children:[(0,f.Y)(V.Y9,{level:3,children:"Connect manually"}),(0,f.Y)(V.EY,{color:"dimmer",children:"Use the command below to connect via CLI or another IDE."})]}),(0,f.Y)(CG.A,{code:o,header:"Shell command",multiline:!1,onCopy:function(){(0,tP.u4)(tP.AZ.COPY_SSH_KEY_COMMAND_CLICKED,{source:"ssh_pane"})}})]})}function C5(e){var n=e.onPurchaseComplete,t=e.org,r=e.sshAuthz,i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1];return r.code===ix.S4P.RequiresActiveSubscription&&(null==t?void 0:t.type)!==ix.NT1.Team?(0,f.FD)(j.S,{gap:16,children:[(0,f.FD)(V.Y9,{level:3,variant:"subheadDefault",children:["SSH is only available to Replit ",iM.en," Members."]}),(0,f.FD)(V.EY,{children:["With SSH, you can access your App's shell remotely. SSH enables workflows like easy file transfer or using your favorite local IDE to edit your code on Replit."," ",(0,f.Y)("a",{href:"https://docs.replit.com/replit-workspace/ssh",target:"_blank",children:"Learn more here"})]}),(0,f.Y)(M.$n,{onClick:function(){return a(!0)},text:"Join Replit ".concat(iM.en),iconLeft:(0,f.Y)(cJ.A,{}),colorway:"blurple"}),(0,f.Y)(iU.default,{isOpen:o,onClose:function(){return a(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",onPurchaseComplete:n,analyticsContext:{upgrade:{context:"workspace_ssh_pane"}}})]}):(0,f.Y)(iX.N,{colorway:"warning",text:r.message})}var C3=(0,eo.x)({tabContainer:[ea.wp.colWithGap(8),ea.wp.p(8)],connectEmptyState:[ea.wp.center,ea.wp.border({color:N.LU.outlineDefault,width:1,style:"dashed"}),ea.wp.borderRadius(4),ea.wp.py(24),ea.wp.px(12)],connectHeader:[ea.wp.colWithGap(4)],connectInstructions:[ea.wp.colWithGap(12),ea.wp.p(8),ea.wp.borderRadius(4)],launchEditorButton:[ea.wp.borderRadius(8)]});function C7(e){var n=e.legacyKeys,t=e.openFile,r=(0,P.A)(),i="legacy-ssh-keys-warning-".concat(r),o=(0,v._)((0,y.useState)(function(){return!eQ.A.get(i,"boolean")}),2),a=o[0],l=o[1],s=(0,y.useRef)(!1);return((0,y.useEffect)(function(){return eQ.A.get(i,"boolean")||l(!0),function(){s.current&&eQ.A.set(i,!0)}},[i]),n&&0!==n.length&&a)?(0,f.Y)(j.S,{children:(0,f.Y)(ug.d,{colorway:"warning",iconLeft:(0,f.Y)(i0.A,{}),text:"Don't see your SSH keys here? We're moving from App-level keys to user-level keys. Click here to view your existing keys and re-add them using the 'New SSH Key' button above.",onClick:function(){t(CW.L),s.current=!0}})}):null}function C6(e){var n,t,r,i,o,a,l=(o=(0,eg._)({},CN,void 0),ew.I(CM,o)),s=l.data,c=l.loading,u=(0,v._)((0,y.useState)(!1),2),d=u[0],p=u[1],h=(0,v._)((0,y.useState)(0),2),m=h[0],g=h[1],S=(t=(n=(0,v._)((0,y.useState)(null),2))[0],r=n[1],i=(0,A.A)().fs,(0,y.useEffect)(function(){function e(){return(e=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,i.readFile(CW.L)];case 1:if((e=n.sent()).error===nn.Tr.NotFound||e.error===nn.Tr.IsDirectory)return[2];if(e.error)throw Error("Unexpected error reading authorized keys");return r(e.content.toString().split("\n").map(function(e){return e.startsWith("#")||(0,CB.A)(e)?null:e}).filter(Boolean)),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[i]),t),Y=(0,C$.A)();if(c||!Y)return(0,f.Y)(mH.A,{pane:{type:"ssh"},loading:!0,maxWidth:450});var _=Y.sshHostname,C=Y.sshUser,k=Y.sshPort,x=s&&(null==(a=s.currentUser)?void 0:a.__typename)==="CurrentUser"&&"PublicSshKeysOutput"===s.currentUser.publicSshKeys.__typename?s.currentUser.publicSshKeys.keys:[],D=x.length>=CH.L,E=0===x.length;return(0,f.FD)(el.tU,{selectedIndex:m,onSelectionChange:g,children:[(0,f.FD)(el.wb,{children:[(0,f.Y)(el.oz,{iconLeft:(0,f.Y)(cJ.A,{}),children:"Connect"}),(0,f.Y)(el.oz,{iconLeft:(0,f.Y)(CQ.A,{}),children:"Keys"})]}),(0,f.FD)(el.T2,{children:[(0,f.Y)(el.Kp,{children:(0,f.FD)(j.S,{css:C3.tabContainer,children:[(0,f.Y)(V.Y9,{variant:"subheadDefault",level:2,children:"Use Replit with another editor"}),(0,f.Y)(V.EY,{color:"dimmer",children:"SSH allows you to connect to an App from another machine or IDE."}),(0,f.FD)(j.S,{py:8,gap:16,children:[(0,f.Y)(C2,{editor:"vscode",disabled:E}),(0,f.Y)(C2,{editor:"cursor",disabled:E}),E?(0,f.FD)(j.S,{css:C3.connectEmptyState,gap:8,children:[(0,f.Y)(CQ.A,{size:24,color:N.LU.foregroundDimmest}),(0,f.Y)(V.EY,{color:"dimmer",children:"You need to add an SSH key to your account before connecting"}),(0,f.Y)(M.$n,{text:"Manage SSH keys",colorway:"primary",size:"small",onClick:function(){g(1)}})]}):(0,f.Y)(C4,{sshHostname:_,sshPort:k,sshUser:C})]}),(0,f.Y)(CZ.p,{})]})}),(0,f.Y)(el.Kp,{children:(0,f.FD)(j.S,{css:C3.tabContainer,children:[(0,f.FD)(j.S,{row:!0,justify:"space-between",children:[(0,f.Y)(V.Y9,{variant:"subheadDefault",level:2,children:"Manage SSH Keys"}),(0,f.Y)(Z.m_,{tooltip:"You are over the SSH key limit. Please remove some of your keys to add more.",isDisabled:!D,children:(0,f.Y)(M.$n,{text:"Add SSH key",colorway:"primary",size:"small",disabled:D,iconLeft:(0,f.Y)(tq.A,{}),onClick:function(){return p(!0)}})})]}),(0,f.Y)(V.EY,{color:"dimmer",children:"Add authorized keys to configure SSH access to this App."}),(0,f.Y)(C7,{legacyKeys:S,openFile:e.openFile}),(0,f.Y)(CK.f,{keys:x}),(0,f.Y)(ld.a,{isOpen:d,onRequestClose:function(){return p(!1)},centered:!0,children:(0,f.Y)(Cz.P,{onConfirm:function(){return p(!1)}})})]})})]})]})}function C8(e){var n,t,r,i=(t={variables:{replId:(0,P.A)()}},r=(0,eg._)({},CN,t),ew.I(CO,r)),o=i.data,a=i.loading,l=i.refetch;if(!o||a)return(0,f.Y)(mH.A,{pane:{type:"ssh"},loading:!0,maxWidth:450});if("ReplRedirect"===o.repl.__typename)throw Error("Got repl redirect for replId query");if("SubscriptionExpiredError"===o.repl.__typename)return(0,f.Y)(j.S,{children:(0,f.Y)(V.EY,{children:"This App is private and your subscription expired. Please reload for further action."})});var s=o.repl.authorizations.connectUsingSsh;return s.isAuthorized?(0,f.Y)(C6,(0,eg._)({},e)):(0,f.Y)(C5,{sshAuthz:s,org:null!=(n=o.repl.org)?n:void 0,onPurchaseComplete:function(){l()}})}var C9=h.ZU.Object({type:h.ZU.Literal("ssh")}),ke=(0,eo.x)({root:[ea.wp.height("100%"),ea.wp.overflowY("auto"),tt.tK],wrapper:[ea.wp.position.relative]}),kn={Content:function(e){var n=e.options;return(0,f.Y)(j.S,{css:ke.root,children:(0,f.Y)(j.S,{grow:!0,gap:8,children:(0,f.Y)(j.S,{css:ke.wrapper,grow:!0,py:8,children:(0,f.Y)(C8,{openFile:function(e){return n.performPaneOperation({operation:"open",pane:(0,ts.af)(e),secondary:!0})}})})})})},Icon:function(e){var n=e.size;return(0,f.Y)(ti.Vx.Provider,{value:{color:N.LU.yellowStrongest,size:n},children:(0,f.Y)(YY,{})})},getTitle:function(){return"SSH"},description:"Configure remote access to connect to this Repl from another machine or IDE",category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(C9,e)}},kt=["youtube.com","youtube-nocookie.com","vimeo.com","wistia.com","sadanandpai.github.io"],kr=function(e){try{var n=new URL(e).hostname;return kt.some(function(e){return n===e||n.endsWith("."+e)})}catch(e){return!1}},ki=h.ZU.Object({type:h.ZU.Literal("videoPlayer"),data:h.ZU.Object({embedUrl:h.ZU.String(),title:h.ZU.String()})}),ko={Content:function(e){var n=e.pane.data;return(0,f.Y)(ka,{title:n.title,embedUrl:n.embedUrl})},Icon:function(e){var n=e.size;return(0,f.Y)(aE.A,{size:n})},getTitle:function(e){return e.data.title},category:tt.bY.Other,decode:function(e){return m.T(ki,e)}};function ka(e){var n,t=e.embedUrl,r=e.borderRadius,i=e.title;return kr(t)?(0,f.Y)("iframe",{title:i,src:t,frameBorder:"0",css:[ea.wp.coverContainer,(n=ea.wp).borderRadius.apply(n,(0,em._)(void 0===r?[0,0,8,8]:r))]}):(0,f.FD)("div",{children:["Only YouTube, Vimeo, and Wistia videos are supported."," ",(0,f.Y)("a",{href:t8.WA,target:"_blank",children:"Request more formats here."})]})}var kl=t(11602),ks=t(9527),kc=(0,eo.x)({toolButton:[ea.wp.display.inlineBlock],actionContent:[ea.wp.width(450),ea.wp.maxWidth("100%"),ea.wp.colWithGap(16)]});function ku(e){var n=e.vncUrl,t=e.onRetry,r=e.openNetworkingTool,i=null!=(0,Ce.ff)(kl.wF),o=(0,f.Y)(M.$n,{iconLeft:(0,f.Y)(oU.A,{}),text:"Refresh connection",onClick:t});return i?(0,f.Y)(mH.A,{pane:{type:"vnc"},action:(0,f.FD)(j.S,{css:kc.actionContent,children:[(0,f.Y)(iX.N,{colorway:"warning",text:(0,f.FD)(f.FK,{children:["There was an error connecting to the server",n?(0,f.FD)(f.FK,{children:[" at ",(0,f.Y)("br",{}),n]}):""]})}),n?(0,f.Y)(O.A,{headerContent:"Diagnosis",children:(0,f.Y)(j.S,{p:8,gap:8,children:(0,f.Y)(a3.Ay,{children:"If you see a connection error, it's possible that your internet service provider (ISP) has security settings blocking the URL shown above.\n\nPlease contact your ISP and ask them to unblock the URL. Here are the support links for common ISPs:\n\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n      "})})}):null,o]})}):(0,f.Y)(mH.A,{pane:{type:"vnc"},bodyText:(0,f.FD)(V.EY,{multiline:!0,children:["No VNC server is currently running with compatible ports available to view. Try running your App, and check the"," ",(0,f.Y)(M.$n,{css:kc.toolButton,text:"Networking tool",iconLeft:(0,f.Y)(Sc.A,{}),size:"small",onClick:r})," ","to ensure ports are being forwarded correctly."]}),action:o})}var kd=function(e){return e.Connecting="Connecting",e.Connected="Connected",e.Disconnected="Disconnected",e.Errored="Errored",e}(kd||{}),kp=(0,eo.x)({root:[ea.wp.position.relative,ea.wp.height("100%"),ea.wp.width("100%")],target:[ea.wp.height("100%"),ea.wp.width("100%")],overlay:[ea.wp.coverContainer,ea.wp.backgroundColor.backgroundDefault,{"&:empty":[ea.wp.display.none]}],audio:[ea.wp.position.absolute,ea.wp.bottom(0),ea.wp.right(0),{padding:"0.2em"}]});function kf(e){var n,r,i,o,a=e.fs,l=e.secrets,s=e.container,c=e.openNetworkingTool,u=(0,v._)((0,y.useState)(null),2),d=u[0],p=u[1],h=(0,v._)((0,y.useState)(void 0),2),m=h[0],g=h[1],S=(0,v._)((0,y.useState)(!1),2),Y=S[0],_=S[1],A=(0,v._)((0,y.useState)("Connecting"),2),C=A[0],k=A[1],x=(0,v._)((0,y.useState)(null),2),D=x[0],E=x[1],R=(0,v._)((0,y.useState)(!1),2),I=R[0],T=R[1],F=(0,v._)((0,y.useState)(!1),2),L=F[0],U=F[1],N=(0,y.useRef)(0),O=(0,y.useRef)(!1),M=(r=(n=(0,v._)((0,y.useState)(null),2))[0],i=n[1],o=(0,ks.A)(s).url,(0,y.useEffect)(function(){if(!r){if(s.getConnectionState()===kl.KN.CONNECTED){if(!o)return;i((0,b0.jq)(o.replace("http","ws"),kl.wF).toString());return}return s.onConnectionStateChanged(function(e){e===kl.KN.CONNECTED&&o&&i((0,b0.jq)(o.replace("http","ws"),kl.wF).toString())})}},[o,r,s]),{vncUrl:r}).vncUrl;(0,tP.u4)(tP.AZ.VNC_OPENED),(0,y.useEffect)(function(){return O.current=!0,function(){O.current=!1}},[]);var H=(0,v._)((0,y.useState)(null),2),B=H[0],z=H[1],W=(0,y.useRef)(function(){return null});(0,y.useEffect)(function(){W.current()},[B]);var G=(0,tF.A)(function(e){return z(e.width&&e.height?{width:e.width,height:e.height}:null)},{type:"throttle",wait:100}),V=(0,y.useRef)(function(e){});(0,y.useEffect)(function(){V.current(L)},[L]),(0,y.useEffect)(function(){if(!d){var e=!1;return t.e(8635).then(t.bind(t,38635)).then(function(n){e||p(n)}),function(){e=!0}}},[d]),(0,y.useEffect)(function(){"Disconnected"===C&&setTimeout(function(){k("Connecting")},Math.random()*(Math.pow(2,N.current)-1)*1e3)},[C]),(0,y.useEffect)(function(){if("Disconnected"===C){var e=setTimeout(function(){k("Connecting")},Math.random()*(Math.pow(2,N.current)-1)*1e3);return function(){clearTimeout(e)}}},[C]);var Z=(0,P.A)(),j=(0,i_._P)({controlName:"flag-computer-use-vnc"});return(0,y.useEffect)(function(){if(M&&D&&d&&"Connecting"===C){N.current++;var e=d.default,n=s.getConnectionMetadata(),t={credentials:{username:null==n?void 0:n.token,password:null!=m?m:""},viewOnly:j};(0,tP.u4)(tP.AZ.VNC_CONNECTED);var r=new e(D,M,t);r.viewOnly=j,r.scaleViewport=!0,r.resizeSession=!j;var i=function(){N.current=0,k("Connected")},o=function(e){var n=e.detail.capabilities.audio;T(void 0!==window.MediaSource&&!!n)},a=function(e){if(W.current=function(){return null},V.current=function(e){},r.removeEventListener("securityfailure",c),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),!e.detail.clean){var n=s.getConnectionMetadata(),t=n?(0,eq.p)(n.token):null;(0,tP.u4)(tP.AZ.VNC_ERRORED,{vncUrl:M,replId:Z,cluster:null==t?void 0:t.cluster}),k("Errored");return}k("Disconnected")},c=function(){var e,n=function(){_(!0)};(e=(0,w._)(function(){var e;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,l.read()];case 1:if(!(e=t.sent().get("VNC_PASSWORD")))return n(),[2];return g(e),[2]}})}),function(){return e.apply(this,arguments)})().catch(function(e){return rm.Cp(e)})};return r.addEventListener("connect",i),r.addEventListener("capabilities",o),r.addEventListener("disconnect",a),r.addEventListener("securityfailure",c),W.current=function(){return r._windowResize()},T(!1),U(!1),V.current=function(n){n?((0,tP.u4)(tP.AZ.VNC_AUDIO_ENABLED),r.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):r.disableAudio()},function(){O.current||(W.current=function(){return null},V.current=function(e){},r.removeEventListener("securityfailure",c),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),r.disconnect())}}},[d,D,s,M,a,m,C,Z,l,j]),(0,f.FD)("div",{"data-cy":"vnc",css:kp.root,children:[I?(0,f.FD)("label",{css:kp.audio,children:["\uD83C\uDFA7"," ",(0,f.Y)("input",{type:"checkbox",checked:L,onChange:function(e){return U(e.target.checked)}})]}):null,(0,f.Y)("div",{ref:function(e){G(e),E(e)},css:kp.target,"data-cy":"vnc-output-".concat(C.toLowerCase())}),(0,f.FD)("div",{css:kp.overlay,children:["Connecting"===C?(0,f.Y)(mH.A,{pane:{type:"vnc"},loading:!0}):null,"Disconnected"===C?(0,f.Y)(mH.A,{pane:{type:"vnc"},bodyText:"Disconnected"}):null,"Errored"===C?(0,f.Y)(ku,{vncUrl:M,onRetry:function(){return k("Connecting")},openNetworkingTool:c}):null]}),(0,f.Y)(ld.a,{isOpen:Y,onRequestClose:function(){return _(!1)},children:(0,f.Y)(Sw.A,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return _(!1)},onConfirm:function(e){g(e),_(!1)}})})]})}var kh=h.ZU.Object({type:h.ZU.Literal("vnc")}),km={Content:function(e){var n=e.options.performPaneOperation,t=(0,A.A)(),r=t.fs,i=t.container,o=t.secrets,a=(0,y.useCallback)(function(){return n({operation:"open",secondary:!0,pane:{type:"networking"}})},[n]);return(0,f.Y)(j.S,{grow:!0,shrink:!0,children:(0,f.Y)(kf,{fs:r,container:i,secrets:o,openNetworkingTool:a})})},Icon:function(e){var n=e.size;return(0,f.Y)(b3.A,{size:n})},getTitle:function(){return"VNC"},description:"View your app's desktop screen output",category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(kh,e)}},kg=t(67197),kv=t(68641),ky=h.ZU.Object({type:h.ZU.Literal("workflows")}),kw={Content:function(){return(0,f.Y)(kv.A,{})},Icon:function(e){var n=e.size;return(0,f.Y)(ti.Vx.Provider,{value:{color:N.LU.greenStrongest,size:n},children:(0,f.Y)(aE.A,{})})},getTitle:function(){return"Workflows"},description:"Configure different ways to run your App",category:tt.bY.WorkspaceFeatures,decode:function(e){return m.T(ky,e)}},kb=t(89588),kS=t(63492),kY=(0,e0.eU)(null),k_=(0,e0.eU)(null),kA=t(24689),kC=t(3617),kk=t.n(kC);function kx(e){var n,t=e.severity,r=e.loading,i=e.resolved,o=N.LU.blueDimmest,a=N.LU.blueStrongest,l="";switch(t){case kA.A.LOW:o=N.LU.blueDimmest,a=N.LU.blueStrongest,n=(0,f.Y)(tZ.A,{}),l="Low severity vulnerability";break;case kA.A.MODERATE:o=N.LU.yellowDimmest,a=N.LU.yellowStrongest,n=(0,f.Y)(i0.A,{}),l="Moderate severity vulnerability";break;case kA.A.HIGH:o=N.LU.orangeDimmest,a=N.LU.orangeStrongest,n=(0,f.Y)(i0.A,{}),l="High severity vulnerability";break;case kA.A.CRITICAL:o=N.LU.redDimmest,a=N.LU.redStrongest,n=(0,f.Y)(i5.A,{}),l="Critical severity vulnerability"}return i&&(o=N.LU.accentPositiveDimmest,a=N.LU.accentPositiveStrongest,n=(0,f.Y)(oJ.A,{}),l="This vulnerability has been resolved"),r&&(o=N.LU.accentPrimaryDimmest,a=N.LU.accentPrimaryStrongest,l="Security scan in progress",n=(0,f.Y)(tw.A,{})),(0,f.Y)(Z.m_,{tooltip:l,placement:"top",isDisabled:r,children:(0,f.Y)("div",{clsx:kk().severity,style:{background:o,color:a},children:n})})}var kD=function(e){return e.Dependency="dependency",e.Analysis="analysis",e}({}),kE=function(e){return e.Fixed="fixed",e.Pending="pending",e}({});function kR(e){return!e||"fixed"===e.status}function kI(e){return"dependency"!==e.type||e.fix.available&&!e.fix.breakingChanges}var kT=function(e,n){var t=n.filter(function(e){var n=(0,kA.T)(String(e.severity));return n===kA.A.CRITICAL||n===kA.A.HIGH}).map(function(e){return(0,nh._)((0,eg._)({},e),{severity:(0,kA.T)(e.severity),id:"dependencyAudit"===e.kind?e.name:e.fingerprint,source:"dependencyAudit"===e.kind?"npm":"opengrep"})}),r=[];e.forEach(function(e){var n=t.find(function(n){return n.id===e.id});switch(e.status){case"fixed":n&&r.push({id:e.id,status:"pending"});break;case"pending":n||r.push({id:e.id,status:"fixed"});break;default:(0,aA.A)(e.status)}});var i=t.map(function(e){var n;return"dependencyAudit"!==e.kind?{type:"analysis",id:e.fingerprint,name:e.checkId,status:"pending",message:e.message,location:e.location,severity:(0,kA.T)(e.severity),source:"opengrep",ignored:e.ignored}:(n="boolean"==typeof e.fixAvailable?e.fixAvailable?{available:!0,breakingChanges:!1}:{available:!1}:{available:!0,breakingChanges:!0,version:e.fixAvailable},{type:"dependency",id:e.id,status:"pending",severity:e.severity,name:e.name,source:e.source,isDirect:e.isDirect,currentVersion:e.version,fix:n,ignored:e.ignored})}),o=e.map(function(e){var n=i.find(function(n){return n.id===e.id}),t=r.find(function(n){return n.id===e.id});return t?(0,nh._)((0,eg._)({},e,n),{status:t.status}):(0,nh._)((0,eg._)({},e,n),{status:e.status})});return(0,em._)(o).concat((0,em._)(i.filter(function(n){return!e.find(function(e){return e.id===n.id})})))};function kF(e){var n=e.onClick;return(0,f.Y)(M.$n,{text:"View Agent Session",iconRight:(0,f.Y)(o2.A,{}),variant:"nofill",size:"small",onClick:n})}function kP(e){var n=e.disabled,t=e.loading,r=e.onClick;return(0,f.Y)(M.$n,{text:"Update automatically",disabled:n,loading:t,size:"small",onClick:r})}function kL(e){var n=e.disabled,t=e.loading,r=e.tooltip,i=e.onClick;return(0,f.Y)(Z.m_,{isDisabled:!r,tooltip:r,children:(0,f.Y)(M.$n,{text:"Fix with Agent",disabled:n,loading:t,colorway:"primary",size:"small",onClick:i})})}function kU(e){var n=e.open,t=e.onClick;return(0,f.Y)(eN.K0,{alt:n?"Hide details":"Show details",onClick:t,children:n?(0,f.Y)(rO.A,{}):(0,f.Y)(rN.A,{})})}function kN(e){var n=e.state,t=e.expanded,r=e.setExpanded,i=e.openAgentSession,o=e.onUpdateDependencies,a=e.onFixWithAgent,l=e.disabled,s=e.updatingDependencies,c=e.hasUnresolvedFixableVulns,u=e.ignored,d=e.ignoreIssue,p=e.unignoreIssue,h=e.allowIgnore,m="";return n.running?m="Agent is currently working on another task":n.fixing?m="Your session is being created":l&&(m="An action is in progress, please wait"),(0,f.FD)(j.S,{row:!0,grow:!0,align:"center",justify:"end",gap:8,children:[i&&n.session?(0,f.Y)(kF,{onClick:function(){return i(n.session)}}):null,n.resolved||n.fixing||n.running?null:(0,f.Y)(kO,{allowIgnore:h,disabled:null!=l&&l,ignored:!!h&&u,ignoreIssue:h?d:void 0,unignoreIssue:h?p:void 0}),o&&c&&!n.session?(0,f.Y)(kP,{disabled:l,loading:s,onClick:function(){return o()}}):null,!a||n.resolved||n.session||u?null:(0,f.Y)(kL,{disabled:l||n.fixing||n.running,loading:n.fixing,tooltip:m,onClick:function(){return a()}}),(0,f.Y)(kU,{open:t,onClick:function(){return r(!t)}})]})}function kO(e){var n=e.allowIgnore,t=e.disabled,r=e.ignored,i=e.ignoreIssue,o=e.unignoreIssue;return r?(0,f.Y)(M.$n,{variant:"outlined",text:"Move to active",size:"small",disabled:t,onClick:function(){return null==o?void 0:o()}}):(0,f.Y)(Z.m_,{isDisabled:n,tooltip:n?void 0:"This is a critical issue and cannot be hidden.",children:(0,f.Y)(M.$n,{variant:"outlined",text:"Hide",size:"small",disabled:t||!n,onClick:function(){return null==i?void 0:i()}})})}var kM=t(13319),kH=t.n(kM);function kB(e){var n,t,r,i=e.disabled,o=e.states,a=e.updatingDependencies,l=e.openAgentSession,s=e.onFixWithAgent,c=e.onUpdateDependencies,u=(0,v._)((0,y.useState)(!1),2),d=u[0],p=u[1],h=(t=null==(n=o.find(function(e){return e.session}))?void 0:n.session,{running:o.some(function(e){return e.running}),fixing:o.some(function(e){return e.fixing}),resolved:o.every(function(e){return e.resolved}),session:null!=t?t:null}),m=o.filter(function(e){return e.type===kD.Dependency}).filter(function(e){return kI(e.vulnerability)}),w=o.filter(function(e){return e.type===kD.Dependency}).filter(function(e){return!kI(e.vulnerability)}),b=m.length>0,S=w.length>0,Y=m.some(function(e){return kI(e.vulnerability)&&!kR(e.vulnerability)});return b||S?(0,f.FD)(ek.ui,{clsx:kH().vulnerability,elevated:!0,p:8,children:[(0,f.FD)(j.S,{clsx:(r={},(0,g._)(r,kH().vulnerabilityHeader,!0),(0,g._)(r,kH().isExpanded,!h.resolved||d),r),row:!0,gap:8,align:"center",justify:"space-between",wrap:!h.resolved,shrink:!0,children:[(0,f.FD)(j.S,{row:!0,gap:8,align:"center",shrink:!0,children:[(0,f.Y)(kx,{severity:function(e){var n=kA.A.LOW,t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.severity===kA.A.CRITICAL){n=kA.A.CRITICAL;break}l.severity===kA.A.HIGH&&(n=kA.A.HIGH),l.severity===kA.A.MODERATE&&n!==kA.A.HIGH&&(n=kA.A.MODERATE)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(o.map(function(e){return e.vulnerability})),loading:h.running||h.fixing,resolved:h.resolved}),(0,f.Y)(V.EY,{color:h.resolved?"dimmer":"default",shrink:!0,children:"Outdated dependencies have known vulnerabilities"})]}),(0,f.Y)(kN,{openAgentSession:l,onUpdateDependencies:c,updatingDependencies:a,onFixWithAgent:s?function(){var e=o.filter(function(e){return e.vulnerability.status!==kE.Fixed}).map(function(e){return e.vulnerability}).filter(function(e){return e.type===kD.Dependency});s(e),(0,tP.u4)(tP.AZ.FIX_VULNERABILITY_AGENT,{checkIds:e.map(function(e){return e.id}),type:kD.Dependency})}:void 0,state:h,disabled:i,hasUnresolvedFixableVulns:Y,expanded:d,setExpanded:p,allowIgnore:!1})]}),h.resolved&&!d?null:(0,f.FD)(j.S,{gap:16,children:[(0,f.Y)(V.EY,{color:"dimmer",variant:"small",children:"There are dependencies that have vulnerabilities and may need to be updated."}),b?(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(V.EY,{color:"dimmer",variant:"small",children:"These dependencies can be updated automatically."}),(0,f.Y)(j.S,{clsx:kH().dependencyVulnerabilityGroup,gap:4,children:m.map(function(e){var n=e.vulnerability;return(0,f.Y)(kz,{name:n.name,status:n.status,version:n.currentVersion},n.id)})})]}):null,S?(0,f.FD)(j.S,{gap:8,children:[(0,f.FD)(V.EY,{color:"dimmer",variant:"small",children:["These dependencies may cause issues if updated without making additional changes."," ",s?"You can have the Agent update them for you and make any necessary changes.":null]}),(0,f.Y)(j.S,{clsx:kH().dependencyVulnerabilityGroup,gap:4,children:w.map(function(e){var n=e.vulnerability;return(0,f.Y)(kz,{name:n.name,status:n.status,version:n.currentVersion},n.id)})})]}):null]})]}):null}function kz(e){var n=e.name,t=e.status,r=e.version,i=t===kE.Fixed;return(0,f.FD)(j.S,{row:!0,gap:8,align:"center",children:[t!==kE.Fixed?null:(0,f.Y)(oJ.A,{color:N.LU.accentPositiveStronger}),t!==kE.Pending?null:(0,f.Y)(tj.A,{}),(0,f.Y)(V.EY,{color:i?"dimmer":"default",children:(0,f.FD)("span",{clsx:kH().dependencyVulnerabilityName,children:[n,r?"@".concat(r):null]})})]})}var kW=t(9898),kG=t.n(kW);function kV(e){var n,t=e.disabled,r=e.state,i=e.openAgentSession,o=e.onFixWithAgent,a=e.ignoreIssue,l=e.unignoreIssue,s=(0,v._)((0,y.useState)(!1),2),c=s[0],u=s[1];return(0,f.FD)(ek.ui,{clsx:kG().vulnerability,elevated:!0,p:8,children:[(0,f.FD)(j.S,{clsx:(n={},(0,g._)(n,kG().vulnerabilityHeader,c),(0,g._)(n,kG().isExpanded,!r.resolved||c),n),row:!0,gap:8,align:"center",justify:"space-between",wrap:!r.resolved,shrink:!0,children:[(0,f.FD)(j.S,{row:!0,gap:8,align:"center",shrink:!0,children:[(0,f.Y)(kx,{severity:r.vulnerability.severity,loading:r.running||r.fixing,resolved:r.resolved}),(0,f.FD)(V.EY,{color:r.resolved?"dimmer":"default",shrink:!0,children:["Detected potential vulnerability in"," ",(0,f.Y)("span",{clsx:kG().filePath,children:r.vulnerability.location.path})]})]}),(0,f.Y)(kN,{allowIgnore:!0,ignored:r.vulnerability.ignored,ignoreIssue:a,unignoreIssue:l,openAgentSession:i,onFixWithAgent:o?function(){o(r.vulnerability),(0,tP.u4)(tP.AZ.FIX_VULNERABILITY_AGENT,{checkIds:[r.vulnerability.id],type:kD.Analysis})}:void 0,state:r,disabled:t,expanded:c,setExpanded:u})]}),c?(0,f.FD)(j.S,{gap:8,children:[(0,f.Y)(V.EY,{color:"dimmer",variant:"small",children:r.vulnerability.message}),(0,f.FD)(j.S,{clsx:kG().analysisVulnerabilityCode,gap:4,children:[(0,f.FD)(j.S,{row:!0,align:"center",gap:8,children:[(0,f.Y)(ty.A,{path:r.vulnerability.location.path,size:16}),(0,f.Y)(V.EY,{clsx:kG().filePath,color:"dimmest",variant:"small",children:r.vulnerability.location.path})]}),(0,f.Y)(x.A,{code:r.vulnerability.location.lines,filePath:r.vulnerability.location.path,fontSize:12,lineNumbersStart:r.vulnerability.location.start.line,lineNumbers:!0})]})]}):null]})}function kZ(e,n){return(0,iD.jM)(e,function(t){switch(n.type){case"UPDATE":var r=new Set(e.vulnerabilities.keys()),i=!0,o=!1,a=void 0;try{for(var l,s=n.vulns[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r.delete(c.id);var u=t.vulnerabilities.get(c.id);u?(u.vulnerability=c,u.resolved=kR(c)):t.vulnerabilities.set(c.id,{type:c.type,vulnerability:c,resolved:kR(c),session:null,running:!1,fixing:!1})}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var d=!0,p=!1,f=void 0;try{for(var h,m=r[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value;t.vulnerabilities.delete(g)}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}t.running.id&&r.has(t.running.id)&&(t.running.id=null);break;case"RUNNING":t.running.state=n.state,n.session?t.running.id=n.session.id:t.running.id=null;var v=!0,y=!1,w=void 0;try{for(var b,S=t.vulnerabilities.values()[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y,_=b.value;_.running=(null==(Y=_.session)?void 0:Y.id)===t.running.id}}catch(e){y=!0,w=e}finally{try{v||null==S.return||S.return()}finally{if(y)throw w}}break;case"SESSION_OPENED":t.running.id=n.session.id;var A=!0,C=!1,k=void 0;try{for(var x,D=n.ids[Symbol.iterator]();!(A=(x=D.next()).done);A=!0){var E=x.value,R=t.vulnerabilities.get(E);R&&(R.session=n.session)}}catch(e){C=!0,k=e}finally{try{A||null==D.return||D.return()}finally{if(C)throw k}}break;case"FIXING":var I=!0,T=!1,F=void 0;try{for(var P,L=n.ids[Symbol.iterator]();!(I=(P=L.next()).done);I=!0){var U=P.value,N=t.vulnerabilities.get(U);N&&(N.fixing=n.state)}}catch(e){T=!0,F=e}finally{try{I||null==L.return||L.return()}finally{if(T)throw F}}}})}function kj(e){var n=e.scanResult,t=e.currentAgentSession,r=e.openAgentSession,i=e.onFixWithAgent,o=e.onUpdateDependencies,a=e.isScanning,l=e.isUpdatingDependencies,s=(0,v._)((0,y.useReducer)(kZ,null,function(){return{running:{id:null,state:!1},updatingDependencies:!1,vulnerabilities:new Map}}),2),c=s[0],u=s[1],d=(k=(0,kS.ob)(kY),x=(0,nd.I)(function(e){var n;return n=(0,w._)(function(n){var t,r;return(0,b.YH)(this,function(i){return t=n.kind,r=n.fingerprint,[2,e.securityScan.ignoreScan.rpc({kind:t,fingerprint:r})]})}),function(e){return n.apply(this,arguments)}}),R=(0,y.useCallback)((E=(0,w._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(n=e.kind,t=e.id,!x)return[2];return[4,x({kind:n,fingerprint:t})];case 1:if(!r.sent().ok)return[2];return k(function(e){return e?e.map(function(e){return e.id===t?(0,nh._)((0,eg._)({},e),{ignored:!0}):e}):null}),[2]}})}),function(e){return E.apply(this,arguments)}),[x,k]),T=(0,nd.I)(function(e){var n;return n=(0,w._)(function(n){var t,r;return(0,b.YH)(this,function(i){return t=n.kind,r=n.fingerprint,[2,e.securityScan.unignoreScan.rpc({kind:t,fingerprint:r})]})}),function(e){return n.apply(this,arguments)}}),{ignoreIssue:R,unignoreIssue:(0,y.useCallback)((F=(0,w._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(n=e.kind,t=e.id,!T)return[2];return[4,T({kind:n,fingerprint:t})];case 1:if(!r.sent().ok)return[2];return k(function(e){return e?e.map(function(e){return e.id===t?(0,nh._)((0,eg._)({},e),{ignored:!1}):e}):null}),[2]}})}),function(e){return F.apply(this,arguments)}),[T,k])}),p=d.ignoreIssue,h=d.unignoreIssue;(0,y.useEffect)(function(){u({type:"UPDATE",vulns:n})},[n]);var m=(0,y.useMemo)(function(){if(i){var e;return e=(0,w._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:u({type:"FIXING",ids:Array.isArray(e)?e.map(function(e){return e.id}):[e.id],state:!0}),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,i(e)];case 2:return n=t.sent(),u({type:"SESSION_OPENED",ids:Array.isArray(e)?e.map(function(e){return e.id}):[e.id],session:n}),[2,n];case 3:return u({type:"FIXING",ids:Array.isArray(e)?e.map(function(e){return e.id}):[e.id],state:!1}),[7];case 4:return[2]}})}),function(n){return e.apply(this,arguments)}}},[i]);(0,D.q3)(null==t?void 0:t.agent.state,{next:function(e){(null==e?void 0:e.state)!==I.g32.AGENT_STATE_PAUSED&&(null==e?void 0:e.state)!==I.g32.AGENT_STATE_NOT_STARTED?u({type:"RUNNING",session:t,state:!0}):u({type:"RUNNING",session:null,state:!1})}});var g=[],S=[],Y=[],_=!0,A=!1,C=void 0;try{for(var k,x,E,R,T,F,P,L=c.vulnerabilities.values()[Symbol.iterator]();!(_=(P=L.next()).done);_=!0){var U=P.value;U.type===kD.Dependency?U.vulnerability.fix.available?g.push(U):S.push(U):U.type===kD.Analysis&&Y.push(U)}}catch(e){A=!0,C=e}finally{try{_||null==L.return||L.return()}finally{if(A)throw C}}var N=c.running.state;return(0,f.FD)(j.S,{gap:16,children:[(0,f.Y)(kB,{disabled:a||l||N,states:g,updatingDependencies:l,openAgentSession:r,onFixWithAgent:m,onUpdateDependencies:o}),Y.length&&(g.length||S.length)?(0,f.Y)(lJ.a,{}):null,Y.map(function(e){return(0,f.Y)(kV,{disabled:a||l||N,state:e,openAgentSession:r,onFixWithAgent:m,ignoreIssue:(0,w._)(function(){return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,p({kind:"sast",id:e.vulnerability.id})];case 1:return n.sent(),(0,tP.u4)(tP.AZ.HIDE_ISSUE_CLICKED,{type:"sast",vulnerabilityId:e.vulnerability.id,vulnerabilityName:e.vulnerability.name,severity:e.vulnerability.severity}),[2]}})}),unignoreIssue:(0,w._)(function(){return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,h({kind:"sast",id:e.vulnerability.id})];case 1:return n.sent(),(0,tP.u4)(tP.AZ.UNHIDE_ISSUE_CLICKED,{type:"sast",vulnerabilityId:e.vulnerability.id,vulnerabilityName:e.vulnerability.name,severity:e.vulnerability.severity}),[2]}})})},e.vulnerability.id)})]})}var kq=t(34415),kK=new Set;function k$(){var e,n=(0,v._)((0,y.useState)(!1),2),t=n[0],r=n[1],i=(0,v._)((0,y.useState)(!1),2),o=i[0],a=i[1],l=(0,y.useRef)(null),s=(0,kS.h)(kY),c=(0,kS.ob)(kY),u=(0,kS.h)(k_),d=(0,kS.ob)(k_),p=(0,y.useCallback)(function(){l.current&&(l.current.write({kind:"start-scan"}),a(!0))},[]);(0,nC.b)((e=(0,w._)(function(e,n){var t,r,i,o,s,u,p,f,h,m,g;return(0,b.YH)(this,function(v){switch(v.label){case 0:t=n.signal,r=n.session,o=(i=e.securityScan.scan.stream({session:r.from},{signal:t})).resReadable,l.current=i.reqWritable,s=!1,u=!1,v.label=1;case 1:v.trys.push([1,6,7,12]),f=function(){var e=m.value;if(!e.ok)return"UNEXPECTED_DISCONNECT"===e.payload.code||"CANCEL"===e.payload.code?"break":(rm.v4(function(n){n.setTag("securityScan",!0),n.setExtra("riverError",e.payload),rm.Cp(Error("Unhandled error during security scan"))}),a(!1),"continue");var n=e.payload;if("started"===n.kind)return a(!0),"continue";c(function(e){return kT(null!=e?e:[],n.results)}),d(new Date),a(!1),kK.has(n.scanId)||(kK.add(n.scanId),(0,kq.ci)(n.results))},h=(0,R._)(o),v.label=2;case 2:return[4,h.next()];case 3:if(!(s=!(m=v.sent()).done)||"break"===f())return[3,5];v.label=4;case 4:return s=!1,[3,2];case 5:return[3,12];case 6:return g=v.sent(),u=!0,p=g,[3,12];case 7:if(v.trys.push([7,,10,11]),!(s&&null!=h.return))return[3,9];return[4,h.return()];case 8:v.sent(),v.label=9;case 9:return[3,11];case 10:if(u)throw p;return[7];case 11:return[7];case 12:return[2]}})}),function(n,t){return e.apply(this,arguments)}),[c,d,a]);var f=(0,nd.I)(function(e){return(0,w._)(function(){return(0,b.YH)(this,function(n){switch(n.label){case 0:return r(!0),[4,e.securityScan.fixDependencyAudit.rpc({})];case 1:return n.sent(),r(!1),a(!0),p(),[2]}})})},[p]);return{runScan:p,scanResult:s,lastScanDate:u,isScanning:o,isUpdatingDependencies:t,updateDependencies:f}}var kJ=function(){function e(){(0,uN._)(this,e),this.state={fixing:!1,currSession:null,prevSession:null}}var n=e.prototype;return n.startFixWithAgent=function(e){var n,t=e.sessionId,r=e.vulns;this.state.fixing&&this.completeFixing(!1),n=this.state.currSession,this.state={fixing:!0,prevSession:n,currSession:{sessionId:t,vulns:r,commits:0,startTime:new Date,endTime:null,fixed:!1}}},n.commit=function(e){var n=e.sessionId;this.state.fixing&&n===this.state.currSession.sessionId&&this.state.currSession.commits++},n.hasAgentFixedVulns=function(e){if(!this.state.fixing)return!1;var n=this.state.currSession.vulns;return Array.isArray(n)?n.every(function(n){return kR(e.find(function(e){return e.id===n.id}))}):kR(e.find(function(e){return e.id===n.id}))},n.completeFixing=function(e){if(this.state.fixing){var n=(0,nh._)((0,eg._)({},this.state.currSession),{endTime:new Date,fixed:e});this.state={fixing:!1,currSession:n,prevSession:this.state.prevSession},this.trackAgentFix()}},n.trackAgentFix=function(){if(!this.state.fixing&&this.state.currSession){var e=this.state.currSession,n=e.sessionId,t=e.vulns,r=e.commits,i=e.startTime,o=e.endTime,a=e.fixed,l=o.getTime()-i.getTime();(0,tP.u4)(tP.AZ.AGENT_FIX_COMPLETED,{sessionId:n,vulns:t,commits:r,timeTaken:l,fixed:a,type:Array.isArray(t)?kD.Dependency:kD.Analysis})}},n.updateScanResult=function(e){this.state.fixing&&this.hasAgentFixedVulns(e)&&this.completeFixing(!0)},n.agentFixFailed=function(e){this.state.fixing&&e===this.state.currSession.sessionId&&this.completeFixing(!1)},e}(),kQ=t(46103),kX=t(45693),k0=t.n(kX),k1=h.ZU.Object({type:h.ZU.Literal("securityScan")}),k2={Content:function(e){var n=e.options.performPaneOperation,t=(0,y.useCallback)(function(e){n({operation:"open",pane:{type:"agentChat",data:{sessionId:e}}})},[n]),r=(0,y.useCallback)(function(e){n({operation:"open",secondary:!1,pane:e})},[n]);return(0,f.Y)(k4,{openAgentSession:t,openPane:r})},Icon:function(e){var n=e.size;return(0,f.Y)(ti.Vx.Provider,{value:{color:N.LU.blueStrongest,size:n},children:(0,f.Y)(kQ.A,{})})},getTitle:function(){return"Security Scanner"},description:"Scan your app for vulnerabilities",category:rs.b.CloudServices,decode:function(e){return m.T(k1,e)}},k4=function(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,g,Y=e.openAgentSession,_=e.openPane,A=k$(),C=A.scanResult,k=A.lastScanDate,x=A.runScan,E=A.isScanning,R=A.isUpdatingDependencies,F=A.updateDependencies;(0,y.useEffect)(function(){E||C||x()},[E,x,C]);var P=(0,S.jt)(),L=(0,S.NC)(),U=(0,D.J2)(L.sessions.agent.current,null),N=(!(n=(0,y.useRef)()).current&&(n.current=new kJ),t=n.current,i=(r=k$()).isScanning,o=r.runScan,a=r.scanResult,l=r.updateDependencies,s=(0,S.NC)(),u=(c=(0,v._)((0,y.useState)(null),2))[0],d=c[1],p=(0,D.Rj)(function(){return u?s.sessions.get(u):null},[u,s]),h=(0,D.Rj)(function(){return null==p?void 0:p.data.select(function(e){return e.readOnly})},[p],{default:!1}),g=(0,y.useCallback)((m=(0,w._)(function(e){var n,r,i,o,a,c,u,p,f,h,m,g,v,y,w,S,_;return(0,b.YH)(this,function(b){switch(b.label){case 0:if(n="",Array.isArray(e))return[3,1];return n=["A recent security scan returned the following vulnerability alert using static code analysis: ",e.message.split("\n").map(function(e){return"> ".concat(e)}).join("\n"),"> **Location:** `".concat(e.location.path,"` (lines ").concat(e.location.start.line,"-").concat(e.location.end.line,")"),"","**Instructions:**","- Examine the code at the specified location to understand the vulnerability context","- Decide whether the reported issue is real. *Use execution path, context, and impact to judge.*","- If you have high confidence that it's exploitable, provide the smallest safe patch. Tell the user it is important to test their app before continuing with their deployment.","- Otherwise make **no code change** and explain why the issue is not exploitable."].join("\n"),[3,4];case 1:if(r=[],!(i=e.filter(function(e){return e.type===kD.Dependency}).filter(function(e){return e.status===kE.Pending})).length)return[3,3];o=!0,a=!1,c=void 0;try{for(u=i[Symbol.iterator]();!(o=(p=u.next()).done);o=!0)(f=p.value).fix.available&&r.push({name:f.name,from:f.currentVersion,to:f.fix.breakingChanges&&"object"===(0,nm._)(f.fix.version)?f.fix.version.version:void 0})}catch(e){a=!0,c=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw c}}return[4,null==l?void 0:l()];case 2:b.sent(),b.label=3;case 3:h="",m=!0,g=!1,v=void 0;try{for(y=r[Symbol.iterator]();!(m=(w=y.next()).done);m=!0)S=w.value,h+=S.from&&S.to?"".concat(S.name,"@").concat(S.from," -> ").concat(S.name,"@").concat(S.to,"\n"):"".concat(S.name,"\n")}catch(e){g=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw v}}h&&(h=h.trim()),h&&(n=["In response to a security scan, the following dependencies were updated:","```",h,"```","","Ensure that the app still works and fix any issues that may have come up."].join("\n")),b.label=4;case 4:if(!n)throw Error("No message to send");return[4,s.sessions.create({sessionType:I.dF3.AGENT_SESSION})];case 5:if(!(_=b.sent()).ok)throw _;return _.payload.appendEvent({kind:"message",intent:I.qRv.AGENT,message:n}),Y(_.payload.id),t.startFixWithAgent({sessionId:_.payload.id,vulns:e}),d(_.payload.id),[2,_.payload]}})}),function(e){return m.apply(this,arguments)}),[s,l,Y,d,t]),(0,y.useEffect)(function(){a&&t.state.fixing&&t.updateScanResult(a)},[a,t]),(0,y.useEffect)(function(){u&&h&&t.state.fixing&&t.agentFixFailed(u)},[h,u,t]),(0,S.zv)("received-completed-event",function(e){var n=e.event;(0,T.cL)(n,"commitData")&&t.state.fixing&&(t.commit({sessionId:n.sessionId}),i||o())}),{fixWithAgent:g}).fixWithAgent,O=(0,y.useCallback)(function(){x(),(0,kq.kB)(kq.aJ.SECURITY_SCANNER_PANE)},[x]),H=(0,y.useMemo)(function(){var e;return null!=(e=null==C?void 0:C.filter(function(e){return!e.ignored}))?e:[]},[C]),B=(0,y.useMemo)(function(){var e;return null!=(e=null==C?void 0:C.filter(function(e){return e.ignored}))?e:[]},[C]);return(0,f.FD)(j.S,{justify:"space-between",grow:!0,height:"100%",px:32,py:16,align:"center",clsx:k0().root,children:[(0,f.FD)(j.S,{gap:16,grow:!0,children:[(0,f.FD)(j.S,{row:!0,gap:8,align:"start",children:[(0,f.Y)(V.EY,{variant:"headerDefault",children:"Security Scanner"}),(0,f.Y)(j.S,{pt:4,children:(0,f.Y)(W.a,{colorway:"primary",text:"Beta",variant:"filled"})})]}),(0,f.FD)(V.EY,{variant:"small",color:"dimmer",children:["Run a scan to check for potential security risks in your application. Scans are typically complete within minutes."," ",(0,f.Y)("a",{href:"https://docs.replit.com/replit-workspace/workspace-features/security-scanner",target:"_blank",children:"Learn more"})]}),(0,f.Y)(j.S,{align:"start",children:(0,f.Y)(M.$n,{text:E?"Scanning for vulnerabilities":"Run scan",iconLeft:E?(0,f.Y)(tw.A,{}):(0,f.Y)(kQ.A,{}),loading:E,onClick:O})}),(0,f.Y)(bE,{children:(0,f.FD)(j.S,{children:[(0,f.FD)(bR,{withUnderline:!0,children:[(0,f.Y)(bT,{id:"active-issues",children:"Active Issues"}),(0,f.Y)(bT,{id:"hidden-issues",children:"Hidden Issues"})]}),(0,f.FD)(bF,{children:[(0,f.FD)(bI,{id:"active-issues",children:[null!==C&&k?(0,f.Y)(f.FK,{children:(0,f.Y)(k5,{count:C?H.filter(function(e){return e.status===kE.Pending&&(e.type!==kD.Dependency||e.fix.available)}).length:0,timestamp:k,openPane:_})}):null,0===H.length?null:(0,f.Y)(kj,{isScanning:E,isUpdatingDependencies:R,scanResult:H,currentAgentSession:U,onUpdateDependencies:null!=F?F:void 0,openAgentSession:function(e){return Y(e.id)},onFixWithAgent:P?N:void 0})]}),(0,f.Y)(bI,{id:"hidden-issues",children:(0,f.Y)(j.S,{clsx:k0().ignoredIssuesContainer,children:0===B.length?(0,f.Y)(f.FK,{children:(0,f.Y)(V.EY,{className:k0().ignoredIssuesText,children:"No hidden issues found."})}):(0,f.Y)(kj,{isScanning:E,isUpdatingDependencies:R,scanResult:B,currentAgentSession:U,onUpdateDependencies:null!=F?F:void 0,openAgentSession:function(e){return Y(e.id)},onFixWithAgent:P?N:void 0})})})]})]})})]}),(0,f.Y)(kb.A,{})]})};function k5(e){var n=e.count,t=e.timestamp,r=e.openPane,i="No vulnerabilities found.";return 1===n?i="1 potential vulnerability found.":n>1&&(i="".concat(n," potential vulnerabilities found.")),(0,f.FD)(j.S,{gap:4,clsx:k0().lastScanSummaryContainer,children:[(0,f.FD)(j.S,{row:!0,wrap:!0,gap:4,children:[(0,f.Y)(V.EY,{clsx:k0().lastScanSummaryText,children:i}),0===n?(0,f.FD)(j.S,{gap:4,row:!0,children:[(0,f.Y)(V.EY,{color:"dimmer",children:"Ready to deploy?"}),(0,f.Y)(M.$n,{colorway:"blue",variant:"underlinedOnHover",text:"Go back to Deployments",onClick:function(){r({type:"deployments"}),(0,tP.u4)(tP.AZ.DEPLOYMENT_PANE_REDIRECTED)}})]}):null]}),(0,f.FD)(j.S,{row:!0,children:[(0,f.Y)(V.EY,{variant:"small",color:"dimmer",children:"Last ran on"}),"\xa0",(0,f.Y)(eT.Dc,{date:t,textVariant:"small",textColor:"dimmer",dateFormat:"absolute"})]})]})}function k3(){return{codeEditor:tA.N,webview:kg.QS,media:vQ,binary:tY,pedit:Sk,vnc:km,adminPanel:ta,runnerOutput:A8.a,shell:CP,dependencies:rd,envEditor:iS,draw:ig,git:mq,diff:r3,history:g3,database:vF,neon:bX,markdown:v$,csvPreview:tC.J,ssh:kn,ghostwriterChat:dh,problems:Yj,networking:Sd,objectStorage:Sm,workflows:kw,project:AE,agentFiles:tm,integrations:g6.u,videoPlayer:ko,replitAuth:A6,securityScan:k2,preferences:YB}}},2526:(e,n,t)=>{"use strict";t.d(n,{Zw:()=>P,yf:()=>R,rj:()=>_});var r,i,o=t(12694),a=t(62019),l=t(37743),s=t(83846),c=t(1833),u=t(89264),d=function(e){return e.FILE_HEADER_MISSING="FILE_HEADER_MISSING",e.FILE_HEADER_INVALID="FILE_HEADER_INVALID",e.FILE_HEADER_SAME_SIDE="FILE_HEADER_SAME_SIDE",e.FILE_HEADER_MISSING_LABEL="FILE_HEADER_MISSING_LABEL",e.HUNK_EMPTY="HUNK_EMPTY",e.HUNK_HEADER_INVALID="HUNK_HEADER_INVALID",e.HUNK_LINE_INVALID="HUNK_LINE_INVALID",e.GIT_DIFF_HEADER_MISSING="GIT_DIFF_HEADER_MISSING",e.GIT_DIFF_HEADER_INVALID="GIT_DIFF_HEADER_INVALID",e.GIT_DIFF_HEADER_LINE_INVALID="GIT_DIFF_HEADER_LINE_INVALID",e.NEVER="NEVER",e}({}),p=(r={},(0,s._)(r,"FILE_HEADER_MISSING","Missing one-of either `---` or `+++` headers"),(0,s._)(r,"FILE_HEADER_INVALID","File header does not match the expected format"),(0,s._)(r,"FILE_HEADER_SAME_SIDE","Both file headers use the same prefix (e.g. `---`)"),(0,s._)(r,"FILE_HEADER_MISSING_LABEL","File header is missing a label"),(0,s._)(r,"HUNK_EMPTY","Hunk is empty"),(0,s._)(r,"HUNK_HEADER_INVALID","Hunk header does not match the expected format"),(0,s._)(r,"HUNK_LINE_INVALID","Hunk line does not match the expected format"),(0,s._)(r,"GIT_DIFF_HEADER_MISSING","Git diff header is missing"),(0,s._)(r,"GIT_DIFF_HEADER_INVALID","Git diff header does not match the expected format"),(0,s._)(r,"GIT_DIFF_HEADER_LINE_INVALID","Incorrectly formatted or unknown git diff header line"),(0,s._)(r,"NEVER","Encountered unreachable code, this should never happen"),r),f=function(e){function n(e){var t,r,i,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l._)(this,n),(t=(0,a._)(this,n,["Exception when parsing diff: ".concat(e," - ").concat(p[e])])).name="ParseError",t.reason=e,t.context=null!=(r=s.context)?r:null,t.chunk=null!=(i=s.chunk)?i:null,t.patch=null!=(o=s.patch)?o:null,t}return(0,c._)(n,e),n}((0,u._)(Error)),h=/(?:\\[0-7]{1,3})+/g,m=/\\([0-7]{1,3})/g,g=/\\([0btvfrn])/g;function v(e){return e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1).replaceAll("\\\\","￼").replaceAll('\\"','"').replace(h,function(e){null!=i||(i=new TextDecoder);var n=Uint8Array.from(Array.from(e.matchAll(m)),function(e){return parseInt(e[1],8)});return i.decode(n)}).replace(g,function(e,n){switch(n){case"0":return"\0";case"b":return"\b";case"t":return"	";case"v":return"\v";case"f":return"\f";case"r":return"\r";case"n":return"\n";default:throw Error("unexpected match")}}).replaceAll("￼","\\"):e}function y(e,n){var t=e.startsWith("a/"),r=n.startsWith("b/");return e=t&&(r||"/dev/null"===n)?e.slice(2):e,n=r&&(t||"/dev/null"===e)?n.slice(2):n,[e,n]}var w=/^(---|\+\+\+)[ \t](.+?)([ \t]\d+-\d+-\d+[ \t]\d+:\d+:\d+(?:\.\d+)?[ \t](?:-|\+)\d+)?$/,b=RegExp("^@@[ \\t]+-(\\d+)(?:,(\\d+))?[ \\t]\\+(\\d+)(?:,(\\d+))?[ \\t]@@(?:[ \\t](.*))?$","s"),S=RegExp("^([ +-])(.*)$","s"),Y=/(?:^|\n)(?=@@)/;function _(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.split(/\r?\n/),i=r[0],a=r[1];if(!i||!a)throw new f(d.FILE_HEADER_MISSING,{context:e});var l=w.exec(i),s=w.exec(a);if(!l||!s)throw new f(d.FILE_HEADER_INVALID,{context:e,chunk:l?a:i});if(l[1]===s[1])throw new f(d.FILE_HEADER_SAME_SIDE,{context:e});var c=null,u=null;if("---"===l[1]?c=l[2]:"+++"===l[1]&&(u=l[2]),"---"===s[1]?c=s[2]:"+++"===s[1]&&(u=s[2]),null===c||null===u)throw new f(d.FILE_HEADER_MISSING_LABEL,{context:e});t.git&&(c=v(c),u=v(u),c=(n=(0,o._)(y(c,u),2))[0],u=n[1],c="/dev/null"===c?null:c,u="/dev/null"===u?null:u);var p=r.slice(2).join("\n").split(Y);return 1===p.length&&""===p[0]?{labelA:c,labelB:u,hunks:[]}:{labelA:c,labelB:u,hunks:p.map(function(n){var t=n.split("\n").filter(function(e){return"\\ No newline at end of file"!==e});if(t.length&&!t[t.length-1]&&t.pop(),!t.length)throw new f(d.HUNK_EMPTY,{context:e,chunk:n});var r=b.exec(t[0]);if(!r)throw new f(d.HUNK_HEADER_INVALID,{context:e,chunk:t[0]});var i=parseInt(r[1],10),o=i+(r[2]?parseInt(r[2],10):1)-1,a=parseInt(r[3],10),l=a+(r[4]?parseInt(r[4],10):1)-1,s=r[5]||null,c=i,u=a;return{fromA:i,toA:o,fromB:a,toB:l,heading:s,lines:t.slice(1).map(function(n){var t,r,i,o=S.exec(n);if(!o)throw new f(d.HUNK_LINE_INVALID,{context:e,chunk:n});var a=o[2];switch(o[1]){case" ":t="same",r=c,i=u,c++,u++;break;case"+":t="added",r=null,i=u,u++;break;case"-":t="removed",r=c,i=null,c++;break;default:throw new f(d.NEVER,{context:e,chunk:n})}return{type:t,content:a,numberA:r,numberB:i}})}})}}var A={"old mode":/^old mode[ \t](\d{6})$/,"new mode":/^new mode[ \t](\d{6})$/,"deleted file mode":/^deleted file mode[ \t](\d{6})$/,"new file mode":/^new file mode[ \t](\d{6})$/,"copy from":/^copy from[ \t](.+)$/,"copy to":/^copy to[ \t](.+)$/,"rename from":/^rename from[ \t](.+)$/,"rename to":/^rename to[ \t](.+)$/,"similarity index":/^similarity index[ \t](\d+)%$/,"dissimilarity index":/^dissimilarity index[ \t](\d+)%$/,index:/^index (.+?)\.\.(.+?)(?:[ \t]([0-7]{6}))?$/},C=/^Binary files (.*) and (.*) differ$/,k=/^diff --git ("a\/.*?"|a\/.*?)[ \t]("b\/.*?"|b\/.*?)$/,x=/(?:^|\n)(?=diff --git)/;function D(e){for(var n in A){var t=A[n],r=e.match(t);if(r)switch(n){case"old mode":case"new mode":case"deleted file mode":case"new file mode":return{type:n,mode:r[1]};case"copy from":case"copy to":case"rename from":case"rename to":return{type:n,path:v(r[1])};case"similarity index":case"dissimilarity index":return{type:n,index:parseInt(r[1],10)};case"index":return{type:n,hashA:r[1],hashB:r[2],mode:r[3]?r[3]:null}}}throw new f(d.GIT_DIFF_HEADER_LINE_INVALID,{chunk:e})}function E(e){var n=e.split(/\r?\n/);if(!n[0])throw new f(d.GIT_DIFF_HEADER_MISSING,{context:e});if(!k.test(n[0]))throw new f(d.GIT_DIFF_HEADER_INVALID,{context:e,chunk:n[0]});var t=n.findIndex(function(e){return e.startsWith("---")});if(-1===t){var r,i=n[0].match(k);if(!i)throw new f(d.FILE_HEADER_INVALID,{context:e,chunk:n[0]});var a=i[1],l=i[2],s=!1;a=v(a),l=v(l),a=(r=(0,o._)(y(a,l),2))[0],l=r[1],a="/dev/null"===a?null:a,l="/dev/null"===l?null:l;for(var c=[],u=1;u<n.length;u++)if(n[u].trim()){if(C.test(n[u])){s=!0;break}c.push(D(n[u]))}return{pathA:a,pathB:l,headers:c,binary:s,hunks:[]}}for(var p=!1,h=[],m=1;m<t;m++){if(C.test(n[m])){p=!0;break}h.push(D(n[m]))}var g=_(n.slice(t).join("\n"),{git:!0});return{pathA:g.labelA,pathB:g.labelB,headers:h,binary:p,hunks:g.hunks}}function R(e){var n=e.split(x);n.length&&!n[0].startsWith("diff --git")&&n.shift();try{return n.map(function(e){return e.endsWith("\n")?e.slice(0,-1):e}).map(E)}catch(n){throw n instanceof f&&(n.patch=e),n}}var I=t(684),T=I.ZU.Union([I.ZU.Object({type:I.ZU.Literal("added"),content:I.ZU.String(),numberA:I.ZU.Null(),numberB:I.ZU.Number()},{title:"HunkLineAdded"}),I.ZU.Object({type:I.ZU.Literal("removed"),content:I.ZU.String(),numberA:I.ZU.Number(),numberB:I.ZU.Null()},{title:"HunkLineRemoved"}),I.ZU.Object({type:I.ZU.Literal("same"),content:I.ZU.String(),numberA:I.ZU.Integer(),numberB:I.ZU.Integer()},{title:"HunkLineSame"})],{title:"HunkLine"}),F=I.ZU.Object({fromA:I.ZU.Integer(),toA:I.ZU.Integer(),fromB:I.ZU.Integer(),toB:I.ZU.Integer(),heading:I.ZU.Union([I.ZU.String(),I.ZU.Null()]),lines:I.ZU.Array(T)},{title:"Hunk"}),P=I.ZU.Object({labelA:I.ZU.Union([I.ZU.String(),I.ZU.Null()]),labelB:I.ZU.Union([I.ZU.String(),I.ZU.Null()]),hunks:I.ZU.Array(F)},{title:"UnifiedDiff"}),L=I.ZU.Union([I.ZU.Object({type:I.ZU.Literal("old mode"),mode:I.ZU.String()},{title:"GitDiffHeaderLineOldMode"}),I.ZU.Object({type:I.ZU.Literal("new mode"),mode:I.ZU.String()},{title:"GitDiffHeaderLineNewMode"}),I.ZU.Object({type:I.ZU.Literal("deleted file mode"),mode:I.ZU.String()},{title:"GitDiffHeaderLineDeletedFileMode"}),I.ZU.Object({type:I.ZU.Literal("new file mode"),mode:I.ZU.String()},{title:"GitDiffHeaderLineNewFileMode"}),I.ZU.Object({type:I.ZU.Literal("copy from"),path:I.ZU.String()},{title:"GitDiffHeaderLineCopyFrom"}),I.ZU.Object({type:I.ZU.Literal("copy to"),path:I.ZU.String()},{title:"GitDiffHeaderLineCopyTo"}),I.ZU.Object({type:I.ZU.Literal("rename from"),path:I.ZU.String()},{title:"GitDiffHeaderLineRenameFrom"}),I.ZU.Object({type:I.ZU.Literal("rename to"),path:I.ZU.String()},{title:"GitDiffHeaderLineRenameTo"}),I.ZU.Object({type:I.ZU.Literal("similarity index"),index:I.ZU.Integer()},{title:"GitDiffHeaderLineSimilarityIndex"}),I.ZU.Object({type:I.ZU.Literal("dissimilarity index"),index:I.ZU.Integer()},{title:"GitDiffHeaderLineDissimilarityIndex"}),I.ZU.Object({type:I.ZU.Literal("index"),hashA:I.ZU.String(),hashB:I.ZU.String(),mode:I.ZU.Union([I.ZU.String(),I.ZU.Null()])},{title:"GitDiffHeaderLineIndex"})],{title:"GitDiffHeaderLine"});I.ZU.Object({pathA:I.ZU.Union([I.ZU.String(),I.ZU.Null()]),pathB:I.ZU.Union([I.ZU.String(),I.ZU.Null()]),headers:I.ZU.Array(L),binary:I.ZU.Optional(I.ZU.Boolean()),hunks:I.ZU.Array(F)},{title:"GitDiff"})},2568:(e,n,t)=>{"use strict";t.d(n,{G:()=>s});var r=t(29935),i=t(82643),o=t(49022),a=t(37872),l=t(71424);function s(){var e=(0,l.A)().toolchain;function n(){return(n=(0,r._)(function(n){return(0,i.YH)(this,function(t){return[2,e.setModuleConfig(n)]})})).apply(this,arguments)}function t(){return(t=(0,r._)(function(n){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,e.addModule(n).catch(function(e){a.vF.error("Toolchain: failed to add Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function s(){return(s=(0,r._)(function(n){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,e.removeModule(n).catch(function(e){a.vF.error("Toolchain: failed to remove Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function c(){return(c=(0,r._)(function(n,t){return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,e.upgradeModule(n,t).catch(function(e){a.vF.error("Toolchain: failed to upgrade Nix module: "+e.message)})];case 1:return r.sent(),[2]}})})).apply(this,arguments)}return{modules:(0,o.A)(e.modules),configs:(0,o.A)(e.configs),moduleConfig:(0,o.A)(e.moduleConfig),setModuleConfig:function(e){return n.apply(this,arguments)},addModule:function(e){return t.apply(this,arguments)},removeModule:function(e){return s.apply(this,arguments)},upgradeModule:function(e,n){return c.apply(this,arguments)}}}},2810:(e,n,t)=>{"use strict";t.d(n,{CX:()=>m,Uo:()=>v,tP:()=>w,ye:()=>S});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175);function s(){var e=(0,i._)(["\n  query ReplitAuth($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n        iconUrl\n        hasAuthUsers\n        authorizations {\n          editMetadata {\n            isAuthorized\n          }\n          manageAuth {\n            isAuthorized\n            code\n            message\n          }\n        }\n        authProviderConfig {\n          ... on AuthProviderConfig {\n            id\n            minimizedProviders\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query ReplitAuthUsers(\n    $id: String!\n    $count: Int\n    $after: String\n    $orderBy: ReplitAuthUserOrderByInput\n    $filter: ReplitAuthUserFilterInput\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        authUsers(\n          count: $count\n          after: $after\n          orderBy: $orderBy\n          filter: $filter\n        ) {\n          items {\n            id\n            banned\n            timeCreated\n            lastLoggedIn\n            displayName\n            image\n            email\n            userId\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation UpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        title\n        iconUrl\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation UpdateReplitAuthProviderConfig(\n    $input: UpdateReplitAuthProviderConfigInput!\n  ) {\n    updateReplitAuthProviderConfig(input: $input) {\n      ... on AuthProviderConfig {\n        id\n        minimizedProviders\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation UpdateReplitAuthUserBanStatus(\n    $input: UpdateReplitAuthUserBanStatusInput!\n  ) {\n    updateReplitAuthUserBanStatus(input: $input) {\n      ... on UpdateReplitAuthUserBanStatusOutput {\n        success\n        message\n        user {\n          id\n          banned\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,o.J1)(s());function m(e){var n=(0,r._)({},f,e);return a.I(h,n)}var g=(0,o.J1)(c());function v(e){var n=(0,r._)({},f,e);return a.I(g,n)}u();var y=(0,o.J1)(d());function w(e){var n=(0,r._)({},f,e);return l.n(y,n)}var b=(0,o.J1)(p());function S(e){var n=(0,r._)({},f,e);return l.n(b,n)}},3175:(e,n,t)=>{"use strict";t.d(n,{S:()=>a});var r=t(21462),i=t(8950),o=t(18069);function a(){var e=(0,o.C9)().agentState;return(0,r.useMemo)(function(){return e?e.select(function(e){switch(null==e?void 0:e.state){case i.g32.AGENT_STATE_RUNNING:case i.g32.AGENT_STATE_PAUSING:return!0;default:return!1}}):null},[e])}},3417:(e,n,t)=>{"use strict";t.d(n,{A:()=>g,q:()=>h});var r=t(81073),i=t(4083),o=t(18509),a=t(27023),l=t(52749),s=t(1684),c=t(36073),u=t(4616),d=t(78626),p=t(85389),f=t(48604);function h(e){var n=e.flagHasNeonProductionDatabases,t=e.hasNeonProductionDatabase,r=e.hasNeonDevelopmentDatabase,i=e.isRedeploy;return!!n&&(!!r||!!t)&&(!i||!!t)}var m=(0,o.x)({titleRow:[a.wp.gap(8),a.wp.align.center]});function g(e){var n=e.createDatabase,t=e.setCreateDatabase,o=e.hasNeonProductionDatabase,a=e.hasNeonDevelopmentDatabase,h=e.isRedeploy,g=o?"Production database deployed":"Create production database",v="Create a dedicated production database for your live data.";o?v="You already have a production database deployed.":a?h&&(v="Creating new production databases during redeploy is not supported yet."):v="You need a development database before creating a production database.";var y=h||!a;return(0,r.FD)(r.FK,{children:[(0,r.Y)(i.w,{id:"createNeonProductionDatabase",title:(0,r.FD)(r.FK,{children:[(0,r.FD)(p.S,{css:m.titleRow,row:!0,children:[(0,r.Y)(u.EY,{color:"dimmer",children:g}),(0,r.Y)(s.a,{text:"Beta",colorway:"primary",compact:!0})]}),(0,r.Y)(u.EY,{variant:"small",color:"dimmest",children:"Separate your production and development environments by creating a dedicated database for your live data. This keeps your real-world data safe while you continue building."})]}),children:(0,r.Y)(d.m_,{isDisabled:!y,tooltip:v,children:(0,r.Y)(l.S,{"aria-label":g,checked:n,disabled:y,onChange:function(e){t(e)}})})}),!h&&n?(0,r.Y)(c.N,{colorway:"primary",text:"Once your production database is deployed, development database secrets will no longer sync with production.",icon:(0,r.Y)(f.A,{})}):null]})}},3549:(e,n,t)=>{"use strict";t.d(n,{F:()=>d});var r=t(81073),i=t(21462),o=t(11602),a=t(71424),l=t(8782),s=t(18509),c=t(27023),u=(0,s.x)({webview:[c.wp.height("auto"),c.wp.flex.grow(1),c.wp.position.relative]}),d=(0,i.forwardRef)(function(e,n){var t=e.isMobilePIP,s=e.readonlyBannerVariant,c=e.zoomLevel,d=void 0===c?1:c,p=e.darkerDarkTheme,f=e.openPane,h=(0,i.useRef)(null);(0,i.useImperativeHandle)(n,function(){return{refresh:function(){var e;null==(e=h.current)||e.refresh()},navigateTo:function(e,n){var t;null==(t=h.current)||t.navigateTo(e,n)}}},[]);var m=(0,a.A)(),g=m.container,v=m.ports,y="/index.html",w={};return 1!==d&&(w.zoomLevel=String(d)),void 0!==p&&p&&(w.darkerDarkTheme="true"),y+=Object.keys(w).length?"?"+new URLSearchParams(w).toString():"",(0,r.Y)(l.Q,{ref:h,css:u.webview,container:g,ports:v,initialPath:y,initialPort:o.no,isMobilePIP:t,readonlyBannerVariant:void 0===s?"default":s,openPane:f})})},3594:(e,n,t)=>{"use strict";t.d(n,{Y:()=>eh,m:()=>eg});var r=t(29935),i=t(17844),o=t(93629),a=t(17459),l=t(12694),s=t(82643),c=t(81073),u=t(21462),d=t(82315),p=t(7990),f=t.n(p),h=t(12101),m=t.n(h),g=t(71983),v=t(37608),y=t(2568),w=t(86402),b=t(30819),S=t(54907),Y=t(45744),_=t(85389),A=/(.+)(?:\S+)?<([^>,]+)[>,]/,C=_.D.span;function k(e){var n=e.author,t=A.exec(n);if(t){var r=t[1],i=t[2];return(0,c.FD)(c.FK,{children:["By ",r,(0,c.FD)("a",{href:"mailto:".concat(i),children:["<",i,">"]})]})}return(0,c.FD)(C,{children:["By ",n]})}var x=t(31518),D=t(54148),E=t(63456),R=t(81650);function I(e){var n=e.isInstalled,t=e.isInQueue;return e.isCurrentAction?(0,c.Y)(E.A,{}):t?(0,c.Y)(x.A,{}):n?(0,c.Y)(R.A,{}):(0,c.Y)(D.A,{})}var T=t(60852),F=t(35563),P=t(32852),L=t(36937),U=t(18509),N=t(24602),O=t(27023),M=t(11769),H=t(83070),B=t(36073),z=t(41358),W=t(4616),G=t(54613),V=t(36540),Z=t(71872),j=_.D.span,q=(0,U.x)({metadataSkeletonVersion:[N.S.foregroundPulse(),O.wp.height(16),O.wp.maxWidth(64),O.wp.borderRadius(4)],metadataSkeletonDescription:[N.S.foregroundPulse(),O.wp.height(16),O.wp.borderRadius(4),O.wp.maxWidth(425)],root:[O.wp.borderRadius(8),O.wp.p(8)],headerTitle:[O.wp.display.flex,O.wp.rowWithGap(8),O.wp.flex.growAndShrink(1)],headerTitleText:[O.wp.display.inline,O.wp.flex.growAndShrink(1),O.wp.overflow("hidden"),O.wp.truncate],headerTitlePills:[O.wp.display.inlineFlex,O.wp.rowWithGap(4),O.wp.flex.shrink(0)],headerButton:[],error:[O.wp.mt(4)],actions:[O.wp.mt(8)],consoleButton:[O.wp.width("calc(50% - ".concat(L.LU.space8,")"))],cancelButton:[O.wp.width("calc(50% - ".concat(L.LU.space8,")"))],actionButton:[O.wp.flex.grow(1),O.wp.flex.shrink(0)]});function K(e){var n=e.title,t=e.content,r=e.isExpanded;return(0,c.FD)(_.S,{gap:2,children:[n?(0,c.Y)(W.EY,{color:"dimmer",children:n}):null,t?(0,c.Y)(W.EY,{maxLines:r?void 0:1,children:t}):null]})}function $(e){var n=e.title,t=e.content;return(0,c.FD)(_.S,{pt:4,gap:8,children:[void 0===n||n?(0,c.Y)(_.S,{css:q.metadataSkeletonVersion}):null,void 0===t||t?(0,c.Y)(_.S,{css:q.metadataSkeletonDescription}):null]})}function J(e){var n,t=e.name,r=e.pkg,i=e.isMetadataLoading,o=e.openConsole,a=e.pills,s=(0,P.UK)(),d=(0,F.H_)(null==s?void 0:s.id),p=(0,F.xB)(null==s?void 0:s.id),f=(0,F.BL)(),h=(0,F.n5)(),m=(0,F.D6)(),g=(0,T.A)(r.license),v=(0,u.useMemo)(function(){return!!(null!==f&&f.pkgs.find(function(e){return e.name===r.name}))},[f]),y=(0,u.useMemo)(function(){return h.find(function(e){return e.pkgs.find(function(e){return e.name===r.name})})},[h]),w=h.length>1&&!!y,b=(0,u.useMemo)(function(){return!!d.find(function(e){var n,t;return(null==(n=e.name)?void 0:n.toLowerCase())===(null==(t=r.name)?void 0:t.toLowerCase())})},[d]),S=!!(r.homepageURL||r.license||r.author),Y=(0,u.useMemo)(function(){return!!p.find(function(e){return e.name===r.name})},[p]),A=(0,l._)((0,u.useState)(!1),2),C=A[0],x=A[1],D=(0,F.rD)(),E=(0,F.q3)(),R=(0,F.Gg)();return(0,c.FD)(z.ui,{css:q.root,elevated:!0,children:[(0,c.FD)(_.S,{row:!0,justify:"space-between",children:[(0,c.FD)(W.Y9,{css:q.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,c.FD)(j,{css:q.headerTitleText,children:[null!=t?t:r.name,r.version?(0,c.FD)(W.EY,{color:"dimmer",children:["@",r.version]}):null]}),a?(0,c.Y)(_.S,{css:q.headerTitlePills,children:a}):null]}),S?(0,c.Y)(H.K0,{css:q.headerButton,alt:"Show more info",tooltipBehavior:"hidden",onClick:function(){return x(function(e){return!e})},children:(0,c.Y)(G.A,{rotate:90*!!C})}):null]}),(0,c.Y)(_.S,{gap:4,children:void 0!==i&&i?(0,c.Y)($,{title:!1}):(0,c.FD)(c.FK,{children:[(0,c.Y)(K,{content:null!=(n=r.description)?n:"This package has no description.",isExpanded:!0}),r.homepageURL&&C?(0,c.Y)(K,{content:(0,c.Y)("a",{href:r.homepageURL,rel:"noreferrer noopener",target:"_blank",children:r.homepageURL}),isExpanded:C}):null,g&&C?(0,c.Y)(K,{content:g,isExpanded:C}):null,r.author&&C?(0,c.Y)(K,{content:(0,c.Y)(k,{author:r.author}),isExpanded:C}):null]})}),Y?(0,c.Y)(B.N,{css:q.error,colorway:"negative",icon:(0,c.Y)(Z.A,{}),text:"Couldn't ".concat(b?"uninstall":"install"," package. See Console for details, or try again.")}):null,(0,c.Y)(_.S,{css:q.actions,row:!0,gap:8,children:Y?(0,c.FD)(c.FK,{children:[(0,c.Y)(M.$n,{css:q.consoleButton,text:"Console",onClick:function(){o()},disabled:v||w,colorway:"primary",iconLeft:(0,c.Y)(V.A,{})}),(0,c.Y)(M.$n,{css:q.actionButton,text:"Try Again",onClick:function(){(null==s?void 0:s.id)&&(m(s.id,[r]),b?E({id:s.id,pkg:r}):D({id:s.id,pkg:r}))},loading:v||w,colorway:b?"red":void 0,variant:b?"outlined":void 0,iconLeft:(0,c.Y)(I,{isInstalled:b,isInQueue:w,isCurrentAction:v})})]}):(0,c.FD)(c.FK,{children:[(0,c.Y)(M.$n,{css:q.actionButton,text:v?(null==f?void 0:f.kind)===F.Vr.Install?"Installing":"Removing":w?(null==y?void 0:y.kind)===F.Vr.Install?"Waiting to install":"Waiting to remove":b?"Remove":"Install",onClick:function(){(null==s?void 0:s.id)&&(b?E({id:s.id,pkg:r}):D({id:s.id,pkg:r}))},loading:v||w,colorway:b?"red":void 0,variant:b?"outlined":void 0,iconLeft:(0,c.Y)(I,{isInstalled:b,isInQueue:w,isCurrentAction:v})}),w?(0,c.Y)(M.$n,{css:q.cancelButton,text:"Cancel",onClick:function(){r.name&&R(r.name)},disabled:v,loading:v}):null]})})]})}var Q=t(79315),X=t(71424),ee=t(44191),en=t(81539),et=t(24928),er=t(1684),ei=t(53384),eo=t(52637),ea=t(78626),el=t(2760),es=t(67524),ec=(0,U.x)({root:[O.wp.flex.column,O.wp.flex.growAndShrink(1)],headerRoot:[O.wp.border({color:L.LU.outlineDimmest,width:1,direction:"bottom"})],header:[O.wp.width("100%"),O.wp.maxWidth(Y.Vq),O.wp.colWithGap(8),O.wp.p(8),{margin:"0 auto"},O.wp.rowWithGap(8),O.wp.p(8),O.wp.align.center],select:[O.wp.minWidth(160)],resultsRoot:[O.wp.overflow("auto")],resultsScroller:[O.wp.width("100%"),O.wp.maxWidth(600),O.wp.flex.growAndShrink(1),O.wp.p(8),{margin:"0 auto"},O.wp.overflow("auto")]});function eu(e){var n,t,o=e.query,a=e.openConsole,d=e.computePills,p=(0,l._)((0,u.useState)([]),2),f=p[0],h=p[1],m=(0,u.useRef)(0),g=(0,l._)((0,u.useState)(!1),2),y=g[0],w=g[1],b=(n=(0,X.A)(),t=(0,P.Ot)(),(0,u.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t();return(null==o?void 0:o.id)?(0,ee.N)(o.id).search((0,i._)({id:o.id,query:e,services:n},r)):[]},[]));return((0,u.useEffect)(function(){if(""===o.trim())return void h([]);w(!0)},[o]),(0,v.A)(function(){var e,n=++m.current;(e=(0,r._)(function(){var e;return(0,s.YH)(this,function(t){switch(t.label){case 0:return[4,b(o)];case 1:return e=t.sent(),n===m.current&&(h(e),w(!1)),[2]}})}),function(){return e.apply(this,arguments)})()},[o],500),y)?(0,c.Y)(Y.Gu,{}):0===f.length?(0,c.Y)(Y.pp,{children:o?"No results were found.":"Start typing above to see results."}):(0,c.Y)(_.S,{gap:8,children:f.map(function(e){var n,t=null!=(n=null==d?void 0:d(e))?n:[];return(0,c.Y)(J,{pkg:e,openConsole:a,pills:t},e.name)})})}function ed(e){return e.length>0&&m()(e)}function ep(e){var n,t,r,i,o,a=e.query,l=(0,b.A)(),s=(0,y.G)().modules,p=(0,u.useMemo)(function(){return new Set(null==s?void 0:s.map(function(e){return e.id}))},[s]),h=(t=(n={modules:null!=(o=null==l?void 0:l.fullModules)?o:[],query:a}).modules,r=n.query,i=(0,u.useMemo)(function(){return new d.Rk(t,{selector:function(e){return e.name},tiebreakers:[function(e,n){var t=2===e.item.displayVersion.split(".").length?"".concat(e.item.displayVersion,".0"):e.item.displayVersion,r=2===n.item.displayVersion.split(".").length?"".concat(n.item.displayVersion,".0"):n.item.displayVersion;return ed(t)||ed(r)?!ed(r)&&ed(t)?1:!ed(t)&&ed(r)||f()(t,r)?-1:+!!f()(r,t):0}]})},[t]),(0,u.useMemo)(function(){return r?i.find(r).map(function(e){return e.item}):t},[i,t,r]));return 0===(h=(0,u.useMemo)(function(){return h.sort(function(e,n){var t=e.internal||e.demoted,r=n.internal||n.demoted;return t&&!r?1:!t&&r?-1:0})},[h])).length?(0,c.Y)(Y.pp,{children:a?"No results were found.":"Start typing above to see results."}):(0,c.Y)(_.S,{gap:8,children:h?h.map(function(e){var n="".concat(e.id,"-").concat(e.resolutionPath,"-").concat(e.version),t=p.has(e.id);return(0,c.Y)(_.S,{row:!0,align:"center",justify:"space-between",children:(0,c.Y)(S.A,{module:e,isInstalled:t,defaultExpanded:!1})},n)}):null})}function ef(e){var n=e.onBack,t=e.initialQuery,r=e.setQuery,i=e.categories,o=e.category,a=e.setCategory,s=e.children,d=e.disableCategorySelection,p=e.searchPlaceholder,f=(0,l._)((0,u.useState)(null!=t?t:""),2),h=f[0],m=f[1],g=(0,u.useDeferredValue)(h);return(0,u.useEffect)(function(){r(g)},[g,r]),(0,c.FD)(_.S,{css:ec.root,children:[(0,c.Y)(_.S,{css:ec.headerRoot,children:(0,c.FD)(_.S,{css:ec.header,children:[(0,c.Y)(H.K0,{alt:"Back",onClick:function(){return n()},children:(0,c.Y)(el.A,{})}),!d&&i&&i.length>0?(0,c.Y)(eo.l,{items:i,css:ec.select,"aria-label":"Change search context",selectedKey:o,onSelectionChange:function(e){var n=null==i?void 0:i.find(function(n){return n.value===e});if(!n)throw Error("Expected config");m(""),a(n.value)},children:function(e){return(0,c.Y)(et.nh,{id:e.value,label:e.label})}}):null,(0,c.Y)(_.S,{grow:!0,shrink:!0,children:(0,c.Y)(ei.I,{value:h,onChange:function(e){m(e.target.value)},onClear:function(){return m("")},placeholder:void 0===p?"Search packages...":p,autoFocus:!0})})]})}),(0,c.Y)(_.S,{css:ec.resultsRoot,grow:!0,shrink:!0,children:(0,c.Y)(_.S,{css:ec.resultsScroller,children:s})})]})}function eh(e){var n=e.onBack,t=e.initialCategory,r=e.openConsole,s=(0,a._)(e,["onBack","initialCategory","openConsole"]),d=(0,Q.J)().configs,p=(0,l._)((0,u.useState)(""),2),f=p[0],h=p[1],m=(0,u.useMemo)(function(){return d.filter(function(e){return"nix"!==e.id}).map(function(e){return{value:e.id,label:e.name.replace(/\s*packager\s*.*$/,"")}})},[d]),g=(0,l._)((0,u.useState)(null!=t?t:m[0].value),2),v=g[0],y=g[1],w=(0,u.useMemo)(function(){return d.find(function(e){return e.id===v})},[v,d]);return(0,c.Y)(ef,(0,o._)((0,i._)({categories:m,initialQuery:f,setQuery:h,onBack:n,setCategory:function(e){h(""),y(e)},category:v},s),{children:(0,c.Y)(en.A,{config:w,children:(0,c.Y)(eu,{query:f,openConsole:r})})}))}var em=[{value:"Modules",label:"Modules"},{value:"Packages",label:"Packages"}];function eg(e){var n=e.onBack,t=e.initialCategory,r=void 0===t?em[0].value:t,s=e.openConsole,d=(0,a._)(e,["onBack","initialCategory","openConsole"]),p=(0,Q.J)().configs,f=(0,u.useMemo)(function(){return p.find(function(e){return"nix"===e.id})},[p]),h=(0,l._)((0,u.useState)(""),2),m=h[0],v=h[1],y=(0,l._)((0,u.useState)(r),2),b=y[0],S=y[1];return((0,w.r)(g.AZ.NIX_MODULE_SEARCH_VIEWED,{},function(){return"Modules"===b},[]),(0,w.r)(g.AZ.NIX_MODULE_SEARCH_USED,{query:m},function(){return!!(m&&"Modules"===b)},[m]),f)?(0,c.Y)(ef,(0,o._)((0,i._)({categories:em,initialQuery:m,setQuery:v,onBack:n,setCategory:function(e){v(""),S(e)},category:b,searchPlaceholder:"Modules"===b?"Search modules...":void 0},d),{children:"Packages"===b?(0,c.Y)(en.A,{config:f,children:(0,c.Y)(eu,{query:m,openConsole:s,computePills:function(e){var n;return null!=(n=e.present)&&n?[(0,c.Y)(ea.m_,{tooltip:"Cached packages are faster to install in your App",children:(0,c.Y)(er.a,{text:"cached",iconLeft:(0,c.Y)(es.A,{}),colorway:"green"})},"cached-".concat(e.name,"-").concat(e.version))]:[]}})}):(0,c.Y)(ep,{query:m})})):null}},3617:e=>{e.exports={severity:"SeverityIcon_severity__ukcYp"}},3652:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(46434),i=t(29935),o=t(82643),a=t(21462),l=t(98679),s=t(39159),c=t(36873);function u(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function d(e){var n,t,d=e.fs,p=e.openMultipleFiles,f=e.openMultipleURLs,h=e.waitForFileClose,m=e.isMobileWorkspace,g=void 0!==m&&m,v=(0,l.A)(h),y=(0,a.useCallback)((n=(0,i._)(function(e){var n,t,r;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(n=e.filename,t=e.waitForClose,!g)return[3,2];if(!n.endsWith(".git/COMMIT_EDITMSG"))return p({paths:[n]}),[2];return r=window.prompt("Enter a commit message"),[4,d.writeFile(n,null!=r?r:"")];case 1:case 4:return i.sent(),[2];case 2:if(u(),p({paths:[n]}),!t||!v.current)return[2];return[4,v.current(n)];case 3:return i.sent(),[4,d.flush()]}})}),function(e){return n.apply(this,arguments)}),[d,g,p,v]);(0,s.b)((t=(0,i._)(function(e,n){var t,i,a,l,s,d,h,m,g,v,w,b,S,Y,_,A;return(0,o.YH)(this,function(o){switch(o.label){case 0:t=n.session,i=n.signal,l=(a=e.replspaceApi.init.stream({session:t.from},{signal:i})).reqWritable,s=a.resReadable,d=!1,h=!1,o.label=1;case 1:o.trys.push([1,12,13,18]),g=(0,r._)(s),o.label=2;case 2:return[4,g.next()];case 3:if(!(d=!(v=o.sent()).done))return[3,11];if(!(w=v.value).ok)return[3,10];switch(w.payload.$kind){case"openFile":return[3,4];case"openMultipleFiles":return[3,6];case"openMultipleURLs":return[3,7];case"getSSHToken":return[3,8]}return[3,10];case 4:return[4,y(w.payload)];case 5:return o.sent(),w.payload.waitForClose&&l.write({$kind:"closeFile",filename:w.payload.filename,nonce:w.payload.nonce}),[3,10];case 6:return w.payload.files.length>0&&(u(),p({paths:w.payload.files})),[3,10];case 7:return w.payload.urls.length>0&&(u(),f({urls:w.payload.urls})),[3,10];case 8:return S=(b=w.payload).nonce,Y=b.replId,[4,(0,c.p)({replId:Y})];case 9:return"success"!==(_=o.sent()).type?l.write({$kind:"sshToken",nonce:S,error:_.message}):l.write({$kind:"sshToken",nonce:S,token:_.data.token,SSHHostname:_.data.ssh_hostname}),[3,10];case 10:return d=!1,[3,2];case 11:return[3,18];case 12:return A=o.sent(),h=!0,m=A,[3,18];case 13:if(o.trys.push([13,,16,17]),!(d&&null!=g.return))return[3,15];return[4,g.return()];case 14:o.sent(),o.label=15;case 15:return[3,17];case 16:if(h)throw m;return[7];case 17:return[7];case 18:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[f,p,y])}},3674:(e,n,t)=>{"use strict";t.d(n,{F4:()=>i,l0:()=>s});var r=t(86105);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],i=function(e){return e.forEach(function(e){return e&&t.push("-g",e)})},l=[],c=[],u=!0,d=!1,p=void 0;try{for(var f,h=e[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,g=a(m);g.startsWith("**")?l.push(g):c.push(g)}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return c.length>0&&(i(["!*"]),new Set(c).forEach(function(e){i((function(e){var n=function(e){Array.isArray(i[e])||(i[e]=[]);var n,o=t[e],a=o.startsWith("{")&&o.endsWith("}")?s(o.substring(1,o.length-1),","):[o];(n=i[e]).push.apply(n,(0,r._)(a.map(function(n){var t=i[e-1];return t&&t.length>0?t.map(function(e){return"".concat(e,"/").concat(n)}):n}).flat(2)))},t=s(e,"/").filter(function(e){return e.length>0});"**"!==t[t.length-1]&&t.push("**");for(var i={},o=0;o<t.length;o++)n(o);return Object.values(i).flat(2)})(e).map(o))})),i(l),i(n.map(function(e){return"!".concat(o(a(e)))})),t}function o(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function a(e){return e.replaceAll(/\*/g,function(e,n,t){return n>0&&("*"===t[n-1]||"\\"===t[n-1])||n<t.length-1&&"*"===t[n+1]?e:"**"})}var l=function(){var e={},n={},t=function(t,r){e[t]=r,n[r]=t};return t("{","}"),t("(",")"),t("[","]"),{hasKey:function(n){return n in e},getKey:function(n){return e[n]},hasValue:function(e){return e in n},getValue:function(e){return n[e]}}}();function s(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var t=[],r=[],i="",o=!0,a=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;if(d===n){if(0===r.length){t.push(i),i="";continue}}else if(l.hasKey(d))r.push(d);else if(l.hasValue(d)&&r.pop()!==l.getValue(d))return[e];i+=d}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return 0!==r.length?[e]:(i.length>0&&t.push(i),t)}},3677:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(12694),i=t(86105),o=t(21462),a=t(71424);function l(){var e=(0,a.A)().secrets,n=(0,r._)((0,o.useState)(null),2),t=n[0],l=n[1],s=(0,o.useMemo)(function(){return!!t&&(0,i._)(t.values()).some(function(e){return!e})},[t]);return(0,o.useEffect)(function(){return e.watch(l)},[t,e]),s}},3964:(e,n,t)=>{"use strict";t.d(n,{A:()=>Y});var r=t(12694),i=t(81073),o=t(21462),a=t(98414),l=t(7868),s=t(34229),c=t(36937),u=t(18509),d=t(27023),p=t(11769),f=t(40259),h=t(85144),m=t(36073),g=t(4616),v=t(85389),y=t(81650),w=t(71872),b=(0,u.x)({repls:[d.wp.maxHeight("60vh"),d.wp.overflow("auto"),{"& > div":[d.wp.py(8),{borderTop:"1px solid "+c.LU.outlineDimmest}],"& > div:last-of-type":{borderBottom:"1px solid "+c.LU.outlineDimmest}}],row:[d.wp.colWithGap(8)]}),S=function(e){var n,t=e.repl,l=e.onConfirmedChange,c=(0,r._)((0,o.useState)(""),2),u=c[0],d=c[1],p=(null==(n=t.hostingDeployment)?void 0:n.__typename)==="HostingDeployment"?t.hostingDeployment:null,h=(0,o.useRef)(!1),y=(null==p?void 0:p.replitAppSubdomain)?p.replitAppSubdomain:t.title;return(0,i.FD)(v.S,{gap:8,children:[(0,i.FD)(v.S,{row:!0,gap:8,align:"center",children:[(0,i.Y)(s.Ay,{size:24,iconUrl:t.iconUrl,alt:""}),(0,i.Y)(g.EY,{height:"singleLine",multiline:!1,children:t.title}),p?(0,i.Y)(a.y,{deployment:p}):null]},t.id),p?(0,i.FD)(i.FK,{children:[(0,i.Y)(m.N,{icon:(0,i.Y)(w.A,{}),colorway:"red",text:"This App has been deployed. If you delete this App, the associated\nproduction deployment will also be shut down and deleted. To\nproceed, please type: ".concat(y)}),(0,i.Y)(f.pd,{placeholder:"Type here",value:u,onChange:function(e){var n=e.currentTarget.value;d(n);var t=n.trim()===y;t!==h.current&&l(t),h.current=t}})]}):null]})};let Y=function(e){var n=e.selectedRepls,t=e.isOpen,a=e.onClose,s=e.onDelete,c=e.deleting,u=n.length,d=(0,l.A)("App",u),f=n.filter(function(e){var n;return(null==(n=e.hostingDeployment)?void 0:n.__typename)==="HostingDeployment"}).length,m=(0,l.A)("Deployment",f),w=f>0?" & ".concat(f>1?f+" ":""," ").concat(m):"",Y=(0,r._)((0,o.useState)(0),2),_=Y[0],A=Y[1];return(0,o.useEffect)(function(){t||A(0)},[t]),(0,i.Y)(h.a,{isOpen:t,onRequestClose:a,children:(0,i.FD)(v.S,{gap:16,children:[(0,i.FD)(g.Y9,{variant:"subheadBig",level:2,children:["Delete ",d,f>0?" & ".concat(m):"","?"]}),(0,i.Y)(g.EY,{color:"dimmer",children:"Are you sure? This cannot be undone. Some Apps may take a few minutes to finish deleting."}),(0,i.Y)(v.S,{css:b.repls,children:n.map(function(e){return(0,i.Y)(S,{css:b.row,repl:e,onConfirmedChange:function(e){return A(function(n){return n+(e?1:-1)})}},e.id)})}),(0,i.FD)(v.S,{row:!0,gap:12,justify:"end",children:[(0,i.Y)(p.$n,{text:"Cancel",onClick:a,disabled:c}),(0,i.Y)(p.$n,{iconLeft:(0,i.Y)(y.A,{}),onClick:s,disabled:c||_<f,text:"Yes, delete ".concat(u>1?u+" ":""," ").concat(d).concat(w),colorway:"negative"})]})]})})}},4015:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(21462),i=t(71514),o=t(55100),a=t(17089),l=t(71424),s=new Set([3e3,3001,3002,3003,3306,4e3,4200,5e3,5432,5173,6e3,6800,7e3,7001,8e3,8008,8080,8081,8888,9e3,9001,1e4,25565,25577,8887,27017,27018]);function c(){var e=(0,l.A)().container,n=(0,i.g)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,t=(0,o.A)();(0,r.useEffect)(function(){return e.onPortOpened(function(e){var r=e.port,i=e.address,o=e.isForwarded,l=e.isVnc,c=e.externalPort;if(o)return void(0,a.u4)(a.AZ.WS_PORT_OPENED,{type:l?"vnc":"webview",replId:t,port:r,externalPort:c,address:i,webviewAutoOpenOnPortOpened:n});(0,a.u4)(a.AZ.WS_UNFORWARDED_PORT_OPENED,{port:r,isCommon:s.has(r),address:i,type:l?"vnc":"webview",replId:t,externalPort:c})})},[e,t,n])}},4067:(e,n,t)=>{"use strict";t.d(n,{T:()=>i});var r=t(684),i=r.ZU.Object({name:r.ZU.String(),email:r.ZU.String(),date:r.ZU.Number()})},4083:(e,n,t)=>{"use strict";t.d(n,{c:()=>d,w:()=>f});var r=t(83846),i=t(81073),o=t(21462),a=t(18509),l=t(27023),s=t(28290),c=t(4616),u=t(85389),d="@container (max-width: 480px)",p=(0,a.x)({wrapper:[(0,r._)({},d,[l.wp.colWithGap(8),l.wp.align.start])]});function f(e){var n=e.id,t=e.title,r=e.children,a=(0,s.c)()(n);return(0,i.FD)(u.S,{css:p.wrapper,row:!0,gap:8,justify:"space-between",align:"center",children:[(0,i.Y)(u.S,{grow:!0,shrink:!0,tag:"label",htmlFor:a,children:"string"==typeof t?(0,i.Y)(c.EY,{multiline:!1,children:t}):t}),(0,o.cloneElement)(r,{id:a})]})}},4180:(e,n,t)=>{"use strict";t.d(n,{F:()=>r});var r=function(e){return e.PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",e.EMPTY_RESULTS="Nothing came up searching your App's content.",e.EMPTY_QUERY="No search query was provided.",e.INVALID_LINE="We encountered an invalid line while parsing your search results.",e.INVALID_COMMAND="Ripgrep returned an invalid response.",e.CONTAINER_DISCONNECTED="Disconnected from the container.",e.CONTAINER_CONNECTING="Connecting to the container.",e.CHANNEL_CLOSED="Channel was closed.",e}({})},4620:(e,n,t)=>{"use strict";function r(e){var n=[],t=[],r=!1,i=!0,o=!1,a=void 0;try{for(var l,s=e.selection.ranges[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;c.empty||(n.push(e.sliceDoc(c.from,c.to)),t.push(c))}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(!n.length){var u=-1,d=!0,p=!1,f=void 0;try{for(var h,m=e.selection.ranges[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value.from,v=e.doc.lineAt(g);v.number>u&&(n.push(v.text),t.push({from:v.from,to:Math.min(e.doc.length,v.to+1)})),u=v.number}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}r=!0}return{text:n.join(e.lineBreak),ranges:t,linewise:r}}t.d(n,{i:()=>r})},4710:(e,n,t)=>{"use strict";t.d(n,{HT:()=>g,TO:()=>y,px:()=>h,vz:()=>f});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n    ignoredSecrets\n    timeCreated\n    currentBuild {\n      timeCreated\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n      machineJob {\n        timezone\n        crontab\n        timeoutSeconds\n        failureNotifications\n      }\n      isPrivate\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment DeploymentsDeployOptionsAuthzRepl on Repl {\n    id\n    authorizations {\n      editDeploymentSecrets {\n        isAuthorized\n        message\n      }\n      editSecrets {\n        isAuthorized\n        message\n      }\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation DeployOptionsToggleSecretSyncing($input: ToggleSyncingSecretInput!) {\n    toggleSyncingSecret(input: $input) {\n      __typename\n      ... on HostingDeployment {\n        id\n        ignoredSecrets\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  query DeploymentsDeployOptionsAuthz($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...DeploymentsDeployOptionsAuthzRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,o.J1)(l()),h=(0,o.J1)(s()),m=(c(),(0,o.J1)(u(),f));function g(e){var n=(0,r._)({},p,e);return a.I(m,n)}var v=(0,o.J1)(d(),h);function y(e){var n=(0,r._)({},p,e);return a.I(v,n)}},4746:e=>{e.exports={root:"Main_root__uRf4V",content:"Main_content__XPD_I",enter:"Main_enter__3h2eI",enterActive:"Main_enterActive__9h2Q4",exit:"Main_exit___Zl9M",exitActive:"Main_exitActive__onRCl",fade:"Main_fade__esRgZ"}},4842:(e,n,t)=>{"use strict";t.d(n,{a:()=>l});var r=t(12584),i=t(41114),o=t(91295);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    isFeaturedRepl\n    user {\n      id\n      ...UserLinkUser\n    }\n    org {\n      id\n      name\n      image\n      slug\n      type\n    }\n    project {\n      id\n      title\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.J1)(a(),o.N)},4936:e=>{e.exports={toolsUsedLabel:"ToolUsedSection_toolsUsedLabel__r8Rju",container:"ToolUsedSection_container__xe4dl",toolLabels:"ToolUsedSection_toolLabels__T3heL",arrowIcon:"ToolUsedSection_arrowIcon__kro6a"}},4977:(e,n,t)=>{"use strict";t.d(n,{g:()=>S,h:()=>y});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(81073),s=t(90629),c=t(53522),u=t(59255),d=t(92301),p=t(43813),f=t(4616),h=t(85389),m=t(27301),g=t(74726),v=t(71872);function y(e){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:if(n=e.searchQuery,t=e.paths,r=e.run,i=e.description,!n)return[2,t.map(function(e){return{data:{type:"action",label:e,icon:(0,l.Y)(p.A,{path:e}),description:i,run:function(){return r(e)}},match:function(){return{score:1,render:(0,d.SS)({path:e,description:i})}}}})];return[4,(0,d.UI)(n,t)];case 1:return[2,o.sent().map(function(e){var n=e.path,t=e.score,o=e.ranges;return{data:{type:"action",label:n,icon:(0,l.Y)(p.A,{path:n}),run:function(){return r(n)}},match:function(){return{score:t,render:(0,d.SS)({path:n,ranges:o,description:i})}}}})]}})})).apply(this,arguments)}function b(){return(0,l.FD)(h.S,{row:!0,gap:8,children:[(0,l.Y)(v.A,{}),(0,l.Y)(f.EY,{color:"dimmest",multiline:!1,children:"Something went wrong searching your App's files. Please try again."})]})}function S(e){var n;return(0,u.gu)({type:"context",label:"Files",description:"Find a file",icon:(0,l.Y)(g.A,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,u.u4)({defaultScore:m.q.findOrCreateFile}),commands:(n=(0,r._)(function(n){var t,u,d,f,h,m,g,w,S,Y,_,A,C,k,x,D,E,R,I,T;return(0,a.YH)(this,function(F){switch(F.label){case 0:return t=e.fs,u=e.shouldHideFile,[4,Promise.resolve(e.getRecentFiles())];case 1:if(d=F.sent(),f=[],!(n.searchQuery||n.active))return[3,3];return[4,t.listFiles()];case 2:if((h=F.sent()).error)return s.Cp(Error("Find or create file returned an error"),{extra:{message:h.error}}),[2,[{data:{type:"error",label:h.error,icon:(0,l.Y)(v.A,{})},match:function(){return{score:1,render:{content:(0,l.Y)(b,{})}}}}]];if(!h.files)throw Error("Expected files");m=!0,g=!1,w=void 0;try{for(S=h.files[Symbol.iterator]();!(m=(Y=S.next()).done);m=!0)_=Y.value,u(_)||d.includes(_)||f.push(_)}catch(e){g=!0,w=e}finally{try{m||null==S.return||S.return()}finally{if(g)throw w}}F.label=3;case 3:return A=[],[4,Promise.all([y({searchQuery:n.searchQuery,paths:d,description:"Recently opened",run:function(n){e.openFile({path:n})}}),y({searchQuery:n.searchQuery,paths:f,run:function(n){e.openFile({path:n})}})])];case 4:if(k=(C=i._.apply(void 0,[F.sent(),2]))[0],x=C[1],!e.getCurrentlyOpenFilePanesCommands)return[3,6];return[4,e.getCurrentlyOpenFilePanesCommands({searchQuery:n.searchQuery})];case 5:E=F.sent(),(D=A).push.apply(D,(0,o._)(E)),F.label=6;case 6:return k.length&&(R=A).push.apply(R,(0,o._)(k)),x.length&&(I=A).push.apply(I,(0,o._)(x)),0===x.length&&0===k.length&&n.active&&(T=n.searchQuery,A.push({data:{label:T,description:"Create a new file",icon:(0,l.Y)(p.A,{path:T}),type:"action",run:(0,r._)(function(){return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,t.writeFile(T,c.A.from(""))];case 1:if(n.sent().error)return[2,{type:"error",message:'Could not create "'+T+'"'}];return e.openFile({path:T}),[2]}})})},match:function(){return{score:1}}})),[2,A]}})}),function(e){return n.apply(this,arguments)})})}},5142:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(17844),i=t(93629),o=t(81073),a=t(36937),l=t(52351);function s(e){return(0,o.FD)(l.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.FD)("g",{clipPath:"url(#clip0_7329_267)",children:[(0,o.Y)("path",{fill:a.LU.tealDefault,d:"M7.714 0a3.429 3.429 0 0 1 3.429 3.429v.026a5.143 5.143 0 0 0 5.137 5.116h.006a3.429 3.429 0 0 1 0 6.858 5.143 5.143 0 0 0-5.143 5.142 3.429 3.429 0 1 1-3.429-3.428h.007a5.143 5.143 0 0 0-.007-10.286 3.429 3.429 0 0 1 0-6.857Z"}),(0,o.Y)("path",{fill:a.LU.tealStronger,d:"M11.143 12a3.429 3.429 0 1 0-6.857 0 3.429 3.429 0 0 0 6.857 0Z"}),(0,o.Y)("path",{fill:"url(#paint0_radial_7329_267)",d:"M7.714 0a3.429 3.429 0 0 1 3.429 3.429v.026a5.143 5.143 0 0 0 5.137 5.116h.006a3.429 3.429 0 0 1 0 6.858 5.143 5.143 0 0 0-5.143 5.142 3.429 3.429 0 1 1-3.429-3.428h.007a5.143 5.143 0 0 0-.007-10.286 3.429 3.429 0 0 1 0-6.857Z",opacity:".5"}),(0,o.Y)("path",{fill:"url(#paint1_radial_7329_267)",d:"M7.714 8.571a3.429 3.429 0 1 1 0 6.858 3.429 3.429 0 0 1 0-6.858Z",opacity:".5"})]}),(0,o.FD)("defs",{children:[(0,o.FD)("radialGradient",{id:"paint0_radial_7329_267",cx:"0",cy:"0",r:"1",gradientTransform:"rotate(44.479 -2.762 5.679)scale(29.1694)",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#fff",stopOpacity:".79"}),(0,o.Y)("stop",{offset:"1"})]}),(0,o.FD)("radialGradient",{id:"paint1_radial_7329_267",cx:"0",cy:"0",r:"1",gradientTransform:"rotate(44.479 -2.763 5.679)scale(29.1694)",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#fff",stopOpacity:".79"}),(0,o.Y)("stop",{offset:"1"})]}),(0,o.Y)("clipPath",{id:"clip0_7329_267",children:(0,o.Y)("path",{fill:"#fff",d:"M0 .274C0 .123.123 0 .274 0h23.452c.151 0 .274.123.274.274v23.452a.274.274 0 0 1-.274.274H.274A.274.274 0 0 1 0 23.726V.274Z"})})]})]}))}},5479:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(17844),i=t(93629),o=t(17459),a=t(81073),l=t(18509),s=t(27023),c=t(83070),u=(0,l.x)({checked:[s.wp.backgroundColor.backgroundHigher],unchecked:[s.wp.color.foregroundDimmest]});function d(e){var n=e.alt,t=e.icon,l=e.checked,s=e.onClick,d=(0,o._)(e,["alt","icon","checked","onClick"]);return(0,a.Y)(c.K0,(0,i._)((0,r._)({},d),{css:l?u.checked:u.unchecked,alt:"".concat(l?"Disable":"Enable"," ").concat(n),onClick:s,children:t}))}},5932:(e,n,t)=>{"use strict";t.d(n,{d:()=>r});var r=function(e){return e.Loading="Loading",e.Ready="Ready",e.Preparing="Preparing",e.PreparingDatabase="PreparingDatabase",e.Deploying="Deploying",e.ProcessingLifecycleCommand="ProcessingLifecycleCommand",e.Suspended="Paused",e}({})},5966:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(29935),i=t(82643),o=t(41467);function a(e,n){return l.apply(this,arguments)}function l(){return(l=(0,r._)(function(e,n){var t,r,a,l,s;return(0,i.YH)(this,function(i){return t=(0,o.P7)(e),r=(0,o.WP)(e),a=new Blob([n.toBuffer()],{type:t}),(l=document.createElement("a")).download=r,l.href=s=window.URL.createObjectURL(a),l.style.display="none",document.body.appendChild(l),l.click(),setTimeout(function(){document.body.removeChild(l),URL.revokeObjectURL(s)},1e4),[2]})})).apply(this,arguments)}},6762:(e,n,t)=>{"use strict";t.d(n,{J9:()=>u});var r=t(12694),i=t(86105),o=t(41467),a=t(33090),l=["json","md","draw","txt"],s=[".gitignore",".replit"];function c(e,n){var t=new Map,a=!0,l=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d,p=c.value,f=(0,o.an)(p);if(f&&(!n||f.startsWith(n))){var h=null!=(d=t.get(f))?d:0;t.set(f,h+1)}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return(0,i._)(t.entries()).sort(function(e,n){var t=(0,r._)(e,2)[1];return(0,r._)(n,2)[1]-t}).map(function(e){return(0,r._)(e,1)[0]})}function u(e,n){if(e.fileType===a.pt.Directory||!e.input)return[];if("."===e.input)return s.map(function(e){return{value:e,highlight:[{from:1,to:e.length}]}});if(e.input.startsWith("."))return s.filter(function(n){return n.startsWith(e.input)}).map(function(n){return{value:n,highlight:[{from:n.length-e.input.length,to:n.length}]}});var t=(0,o.an)(e.input),r=c(e.siblings.map(function(e){return e.filename}),t);if(r.length<3&&r.push.apply(r,(0,i._)(c(n(),t))),r.length<3){var u=t?l.filter(function(e){return e.startsWith(t)}):l;r.push.apply(r,(0,i._)(u))}return(0,i._)(new Set(r)).slice(0,3).map(function(n){var r=e.input;r.endsWith(".")?r=r.slice(0,-1):t&&(r=r.slice(0,-(t.length+1)));var i=r+"."+n;return{value:i,highlight:[{from:e.input.length,to:i.length}]}})}},6966:e=>{e.exports={container:"SuggestDeploy_container__mhqVk",assistant:"SuggestDeploy_assistant__3QtV_",message:"SuggestDeploy_message__iTjaA",cannotDeploy:"SuggestDeploy_cannotDeploy__k4COd",status:"SuggestDeploy_status__pC0MY",isConfiguredManually:"SuggestDeploy_isConfiguredManually__AoTAt",isStale:"SuggestDeploy_isStale__2mrmU",properties:"SuggestDeploy_properties__fshqC",propertiesHeader:"SuggestDeploy_propertiesHeader__Coxab",urlContainer:"SuggestDeploy_urlContainer__rAPHp"}},7306:(e,n,t)=>{"use strict";t.d(n,{N:()=>E,M:()=>D});var r=t(17844),i=t(93629),o=t(17459),a=t(12694),l=t(81073),s=t(21462),c=t(62019),u=t(37743),d=t(1833),p=t(49069),f=t(45773),h=t(87581),m=f.Lz.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),g=f.NZ.line({attributes:{class:"cm-diff-inserted"}}),v=f.NZ.line({attributes:{class:"cm-diff-deleted"}}),y=p.Pe.define({map:function(e,n){return e.map(n)}}),w=function(e){function n(){return(0,u._)(this,n),(0,c._)(this,n,arguments)}(0,d._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},t.ignoreEvent=function(){return!1},n}(f.xO);function b(e){var n=new p.vB,t=new w;e.sort(function(e,n){return e.character-n.character});var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var s=a.value,c=s.character,u=s.padding,d=0;d<u;d++)n.add(c,c,f.NZ.widget({widget:t,side:-1,block:!0}))}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}function S(e){var n=e.coloredLines,t=e.colorDecoration;return[m,f.Z9.fromClass(function e(r){(0,u._)(this,e);var i=new p.vB,o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value,f=r.state.doc.line(d);i.add(f.from,f.from,t)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}this.decorations=i.finish()},{decorations:function(e){return e.decorations}}),p.sU.define({create:function(){return f.NZ.none},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(y))return l.value}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.docChanged?e.map(n.changes):e},provide:function(e){return f.Lz.decorations.from(e)}})]}var Y=t(47701),_=t(66905),A=t(66169),C=function(){var e=function(e,n){return f.Lz.domEventHandlers({scroll:function(t,r){if(r===e&&t.target){var i=t.target;if(i.scrollTop){var o=i.scrollTop;n.scrollDOM.scrollTo({top:o})}}}})},n=new p.xx,t=new p.xx;return{extensions:function(){return{right:n.of([]),left:t.of([])}},setup:function(r,i){r.dispatch({effects:t.reconfigure(e(r,i))}),i.dispatch({effects:n.reconfigure(e(i,r))})}}}(),k=C.extensions,x=C.setup;function D(e){var n=e.left,t=e.right,l=e.showDiffDecorations,c=void 0===l||l,u=n.code,d=(0,o._)(n,["code"]),f=t.code,m=(0,o._)(t,["code"]),w=(0,_.A)(),Y=w.ref,A=w.view,C=(0,_.A)(),D=C.ref,E=C.view,R=(0,s.useMemo)(function(){var e=k().left;return d.extensions?[d.extensions,e]:e},[d.extensions]),I=(0,s.useMemo)(function(){var e=k().right;return m.extensions?[m.extensions,e]:e},[m.extensions]);d=(0,i._)((0,r._)({},d),{extensions:R}),m=(0,i._)((0,r._)({},m),{extensions:I});var T=(0,a._)((0,s.useState)(!1),2),F=T[0],P=T[1],L=(0,a._)((0,s.useState)(!1),2),U=L[0],N=L[1];return(0,s.useEffect)(function(){if(A&&E&&F&&U&&c){var e=setTimeout(function(){var e;x(A,E),e=(0,h.nw)(A.state.doc.sliceString(0),E.state.doc.sliceString(0)),A.dispatch({effects:[p.Pe.appendConfig.of(S({coloredLines:e.leftColored.sort(function(e,n){return e-n}),colorDecoration:v})),y.of(b(e.leftPadded))]}),E.dispatch({effects:[p.Pe.appendConfig.of(S({coloredLines:e.rightColored.sort(function(e,n){return e-n}),colorDecoration:g})),y.of(b(e.rightPadded))]})});return function(){return clearTimeout(e)}}},[A,E,F,U,c]),(0,s.useEffect)(function(){A&&(A.dispatch({changes:{from:0,to:A.state.doc.length,insert:u}}),P(!0))},[u,A]),(0,s.useEffect)(function(){E&&(E.dispatch({changes:{from:0,to:E.state.doc.length,insert:f}}),N(!0))},[f,E]),{left:{view:A,ref:Y,code:u,options:d,ready:F},right:{view:E,ref:D,code:f,options:m,ready:U}}}function E(e){var n=e.diffViewer,t=(0,o._)(e,["diffViewer"]),i=(0,r._)({},n.options,t);return(0,l.FD)(l.FK,{children:[(0,l.Y)(Y.Ay,(0,r._)({ref:n.ref,css:{height:n.ready?0:"auto"},initialDoc:n.code,lineWrapping:!1,readOnly:!0},i)),!n.ready&&(0,l.Y)(A.A,{code:n.code,language:i.language,filePath:i.filePath,lineNumbers:!i.hideGutter,fontSize:i.fontSize})]})}},7379:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(12694),i=t(21462),o=t(71424),a=t(73762),l=t(78104);function s(e){var n=(0,r._)((0,i.useState)(!1),2),t=n[0],s=n[1],c=function(e){var n,t,l,s,c=(0,a.A)(),u=(n=(0,o.A)().container,l=(t=(0,r._)((0,i.useState)("/home/runner"),2))[0],s=t[1],(0,i.useEffect)(function(){n.exec("pwd").then(function(e){var n;e.output&&s((null==(n=e.output)?void 0:n.replace("\n",""))||"")})},[n]),l);if(!c)return"".concat(e,"://vscode-remote/ssh-remote");var d=c.sshUser,p=c.sshHostname,f=c.sshPort,h="".concat(e,"://vscode-remote/ssh-remote+").concat(d,"@").concat(p,":").concat(f).concat(u);try{return window.encodeURI(h)}catch(e){return h}}(e),u=(0,l.A)("ssh","workspace-ssh-connect-to-vscode-config-tour"),d=u.register;return(0,i.useEffect)(function(){d()},[d]),{openEditor:(0,i.useCallback)(function(){if(u.shouldDisplay)return void s(!0);window.location.href=c},[u.shouldDisplay,c]),onConfirmConfig:(0,i.useCallback)(function(){s(!1),u.dismiss(),window.location.href=c},[u,c]),isConfigModalOpen:t,closeConfigModal:(0,i.useCallback)(function(){s(!1)},[])}}},7481:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M4 3.75A1.25 1.25 0 0 0 2.75 5v14A1.25 1.25 0 0 0 4 20.25h16A1.25 1.25 0 0 0 21.25 19V8A1.25 1.25 0 0 0 20 6.75h-9a.75.75 0 0 1-.624-.334L8.599 3.75H4Zm-1.945-.695A2.75 2.75 0 0 1 4 2.25h5a.75.75 0 0 1 .624.334l1.777 2.666H20A2.75 2.75 0 0 1 22.75 8v11A2.75 2.75 0 0 1 20 21.75H4A2.75 2.75 0 0 1 1.25 19V5c0-.73.29-1.429.805-1.945ZM12 10.25a.75.75 0 0 1 .75.75v2.25H15a.75.75 0 0 1 0 1.5h-2.25V17a.75.75 0 0 1-1.5 0v-2.25H9a.75.75 0 0 1 0-1.5h2.25V11a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},7548:(e,n,t)=>{"use strict";t.d(n,{g:()=>m});var r=t(17844),i=t(93629),o=t(17459),a=t(21462),l=t(17341),s=t(71355),c=t(8950),u=t(67917),d=t(73176),p=t(83244),f=t(8479),h=t(18069);function m(){var e,n=(0,u.NC)(),t=(0,d.Rj)(function(){return n.sessions.agent.current},[n.sessions],{default:void 0}),r=(0,d.Rj)(function(){return n.sessions.agent.all.list.map(function(e){return e[e.length-1]})},[n.sessions],{default:void 0}),i=(0,d.Rj)(function(){return n.sessions.agent.all.list.select(function(e){return e.length>1})},[n.sessions],{default:!1}),o=(0,u.MG)(),p=(0,u.Ik)(),m=(0,u.xq)(),v=(0,u.C)(),y=(0,u.xe)(),w=(0,u.rj)(),b=(0,h.hT)();(0,u.zv)("received-event",function(e){var n=e.event;if((0,l.TW)(n,"agentPlanEventContents")){var t=n.contents.contents,r=(0,s.QN)(t),i=n.sender.type===c.utd.AI&&r.requiresApproval,o=n.state===c.qOk.IN_PROGRESS;i&&o&&w(null)}});var S=(0,f.e)(null!=r?r:null),Y=(null==S?void 0:S.event)&&(0,l.TW)(null==S?void 0:S.event,"agentPlanEventContents"),_=Y&&(null==S||null==(e=S.event)?void 0:e.state)===c.qOk.IN_PROGRESS,A=(0,a.useMemo)(function(){return null==r?void 0:r.reduce(g(_?null:y),"global")},[r,_,y]),C=(0,d.J2)(null==A?void 0:A.result,{proposedPlan:void 0,approvedPlan:void 0}),k=C.proposedPlan,x=C.approvedPlan;(0,a.useEffect)(function(){if(t){if(i)return void o("approved");if("approved"!==p&&"revising"!==p){if(x){o("approved"),v(x),m(k);return}k&&(k.eventState===c.qOk.IN_PROGRESS?Y?o("generating"):o("iterating"):Y?o("awaiting-approval"):o("iterating"),m(k))}}},[p,b,k,o,Y,m,i,t,x,v])}var g=function(e){return{direction:"reverse",state:{proposedPlan:void 0,approvedPlan:void 0},reducer:function(n,t){if((0,l.TW)(n,"agentPlanEventContents")){var a,u=(0,s.QN)(n.contents.contents),d=u.objective,f=u.stackBlueprint,h=u.planId,m=(0,o._)(u,["objective","stackBlueprint","planId"]),g=(0,i._)((0,r._)({},m),{planId:h,stackBlueprint:f,eventCreatedAt:n.created,eventState:n.state,objective:d.description,supportsVisualPreview:(0,p.l)(f)});if(!e||h===e){if(g.requiresApproval)return t.proposedPlan=g,!1;else if(t.approvedPlan=g,t.proposedPlan&&(null==(a=t.proposedPlan)?void 0:a.eventState)===c.qOk.COMPLETE)return!1}}}}}},7589:(e,n,t)=>{"use strict";t.d(n,{f:()=>w});var r=t(12694),i=t(81073),o=t(21462),a=t(79203),l=t(46708),s=t(98679),c=t(85336),u=t(11418),d=t(37069),p=t(28046),f=t(85144),h=t(70707);function m(){var e,n,t=(0,p.rA)(),r=t.activeStep,o=t.goto,a=t.totalSteps,l=t.currentStepIndex,s=t.done;if(null==r)return null;var c=null!=(n=null==(e=r.modalConfig)?void 0:e.width)?n:320;return(0,i.Y)(f.a,{preventClose:!0,isOpen:!0,onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,transparent:!0,children:(0,i.Y)(h.p,{title:r.hideTitle?void 0:r.title,"aria-label":r.title,subtitle:r.subtitle,icon:r.icon,content:function(){return(0,i.Y)(i.FK,{children:"function"==typeof r.content?(0,i.Y)(r.content,{}):r.content})},hideCloseButton:r.hideCloseButton,hideNavigation:r.hideNavigation,onDismiss:function(){return s()},currentStepIndex:l,onCurrentStepChange:o,totalSteps:a,cypressCloseData:"tour-popover-close-button",compact:!0,colorway:r.colorway,containerStyle:{width:c}})})}var g=t(74055),v=t(95570),y=d.O5.Provider;function w(e){var n,t,p=e.children,f=e.tour,h=e.onStep,w=e.onDone,b=e.colorway,S=(0,r._)((0,o.useState)(function(){return(0,d.Ws)({tour:f})}),1)[0],Y=(0,a.md)(d.MN,{store:S}),_=(0,a.md)(d.$h,{store:S});if(-1===_)throw Error("Current tour step is not in tour steps");var A=(0,r._)((0,l.en)({variables:{name:f.id},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen2:{__typename:"TourSeen",id:f.id,seen:!0}}}),1)[0],C=(0,a.Xr)(d._,{store:S}),k=(0,o.useRef)();(0,o.useEffect)(function(){k.current=Y},[Y]);var x=(0,a.Xr)(d.vs,{store:S}),D=(0,a.md)(d.Tf,{store:S}),E=(0,a.md)(d.DA,{store:S}),R=(0,a.Xr)(d.$t,{store:S});window.startTour=function(){v.log("starting tour:",f.id,"from",f.steps[0].id),R()};var I=(0,a.md)(d.Yg,{store:S}),T=(0,a.md)(d.b5,{store:S}),F=(0,s.A)(h),P=(0,s.A)(w);(0,o.useEffect)(function(){return S.sub(d.Nc,function(){var e,n=S.get(d.Nc);n&&(null==(e=F.current)||e.call(F,n))})},[S,F,P]);var L=(0,o.useRef)(!1);(0,o.useEffect)(function(){var e;!L.current&&Y&&Y.id===f.steps[0].id&&(null==(e=F.current)||e.call(F,Y.id),L.current=!0)},[Y,F,f]),(0,o.useEffect)(function(){return S.sub(d._,function(){var e,n=S.get(d._),t=S.get(d.Nc);n&&(t&&(null==(e=P.current)||e.call(P,t)),A())})},[S,A,P]);var U=(0,l.D$)({variables:{tours:f.id},onCompleted:function(e){var n;S.set(d._,!!(null==e||null==(n=e.currentUser)?void 0:n.toursSeen[0].seen))}}).loading,N=(0,a.Xr)(d.cS,{store:S});(0,o.useEffect)(function(){N(U)},[N,U]);var O=(0,a.md)(d.MN,{store:S}),M=(0,a.Xr)(d.Hl,{store:S}),H=(0,a.md)(d.GM,{store:S}),B=(0,a.Xr)(d.GM,{store:S});if((0,c.CW)({targetElement:D,activeTourStep:O,goToNextStep:M,setTourPausedReason:B}),!E||!Y)return(0,i.Y)(y,{value:S,children:p});if(Y.isModal)return(0,i.FD)(y,{value:S,children:[(0,i.Y)(m,{}),p]});var z=0===_||!!(null==(n=k.current)?void 0:n.isModal)||!!(null==(t=f.options)?void 0:t.disableAnimation);return(0,i.FD)(y,{value:S,children:[D?(0,i.FD)(i.FK,{children:["user"===H?null:(0,i.Y)(u.J,{targetElement:D,transparent:Y.hideOverlay||"async"===H,disableAnimation:z}),!Y.hideTooltip&&(0,i.Y)(g.C,{targetElement:D,activeStep:Y,currentStepIndex:I,done:function(){return C(!0)},goto:function(e){x(e+_-I)},totalSteps:T,disableAnimation:z,colorway:b,doneText:f.doneText})]}):null,p]})}},7613:(e,n,t)=>{"use strict";t.d(n,{OI:()=>f,_O:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(27641);function s(){var e=(0,i._)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n        initialLayoutState\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,o.J1)(s(),l.E),p=(0,o.J1)(c());function f(e){var n=(0,r._)({},u,e);return a.I(p,n)}},8030:(e,n,t)=>{"use strict";t.d(n,{F9:()=>h,K3:()=>d,Ni:()=>u,QC:()=>l,TG:()=>f,gR:()=>m});var r=t(17844),i=t(93629),o=t(86105),a=t(89546);function l(e){return e.split(".").pop()}function s(e,n){return e.some(function(e){return e.path===n})}function c(e,n){var t=e.findIndex(function(e){return l(e.path)===l(n)});if(-1===t)return e;var a=(0,i._)((0,r._)({},e[t]),{path:n});return(0,o._)(e.slice(0,t)).concat([a],(0,o._)(e.slice(t+1)))}function u(e){var n=[];return e.forEach(function(e){var t=l(e.path),r=a.A.allSupportedByPopularity().find(function(e){return e.ext===t});r&&!n.includes(r.key)&&n.push(r.key)}),n}function d(e){var n=e.files,t=e.language,r=a.A.getMainFileName(null!=t?t:"python");if(!r)return n;var i=n;return s(n,r)||(i=c(i,r)),"html"!==t||s(n,"style.css")||(i=c(i,"style.css")),"html"!==t||s(n,"script.js")||(i=c(i,"script.js")),i}var p=["GoogleCloudPlatform","googleapis"];function f(e){return p.includes(e)}var h="b3294059-2b61-4b20-abde-f06b61a9a1b3",m="gcloud"},8216:(e,n,t)=>{"use strict";t.d(n,{VW:()=>L,pR:()=>P,wQ:()=>F});var r=t(17844),i=t(93629),o=t(12694),a=t(81073),l=t(21462),s=t(12584),c=t(41114),u=t(86997),d=t(68389);function p(){var e=(0,s._)(["\n  query ReservedVMMachineConfigurations($replId: String) {\n    hostingMachineConfigurations(input: { provider: gce, replId: $replId }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var f={},h=(0,c.J1)(p(),d.yH),m=t(13843),g=t(30331),v=t(97626),y=t(62792),w=t(25827),b=t(16240),S=t(54251),Y=t(36937),_=t(18509),A=t(24602),C=t(27023),k=t(11769),x=t(40259),D=t(4616),E=t(85389),R=t(27659),I=t(1035),T=(0,_.x)({header:[C.wp.mb(16)],cost:[C.wp.align.baseline],selectWrapper:C.wp.rowWithGap(12),select:[C.wp.border({color:Y.LU.outlineDefault}),{flex:"1 1 auto"}]});function F(e){var n,t,i=e.replId,o=e.onError,a=(n={variables:{replId:i},onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&o("Something went wrong")},onError:function(e){return o(e.message)}},t=(0,r._)({},f,n),u.I(h,t)),l=a.data,s=a.loading;return{machineConfigurations:(null==l?void 0:l.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?l.hostingMachineConfigurations.results:null,loading:s}}function P(e){var n=e.machineConfigurations;return e.isTeamRepl?n.find(function(e){return"e2-micro"===e.slug}):n.find(function(e){return"e2-small"===e.slug})}var L=function(e){var n=e.replId,t=e.initialMachineConfiguration,s=e.isTeamRepl,c=e.onChange,u=e.onConfirm,d=e.onError,p=e.onBack,f=(0,o._)((0,l.useState)(t?(0,i._)((0,r._)({},t),{maxInstances:1}):void 0),2),h=f[0],Y=f[1],_=(0,(0,g._k)().getRvmDeploymentCostDetailsByConfigurationSlug)(null==h?void 0:h.configurationSlug),L=_.costPerHour,U=_.costPerMonth,N=(0,o._)((0,l.useState)(!1),2),O=N[0],M=N[1],H=F({replId:n,onError:d}),B=H.machineConfigurations,z=H.loading;(0,l.useEffect)(function(){(0,v.Ae)({context:y.P.AutoscaleMachineConfiguration})},[]),(0,l.useEffect)(function(){if(B&&!h){var e=P({machineConfigurations:B,isTeamRepl:s});if(!e)return void d("An error occurred trying to validate default machine configuration");var n={configurationId:e.id,configurationLabel:e.label,configurationSlug:e.slug,maxInstances:1};Y(n),"function"==typeof c&&c(n)}},[B,h,s,c,d]);var W=B&&(null==B?void 0:B.length)>0,G=z||s||O||!W;return(0,a.FD)(a.FK,{children:[(0,a.Y)(b.A,{maxWidth:!0,children:(0,a.Y)(S.fw,{onBack:p})}),(0,a.FD)(b.A,{maxWidth:!0,children:[(0,a.FD)(E.S,{css:T.header,gap:4,children:[(0,a.Y)(D.EY,{variant:"subheadBig",children:"Reserved VM configuration"}),(0,a.Y)(D.EY,{variant:"small",color:"dimmer",children:"Reserved VM apps are always on and can have a dedicated machine. You are billed for the total number of hours your machines have been running for. The cost per hour changes depending on your machine configuration."})]}),(0,a.Y)(w.K,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app. You can change it at any time.",children:h?(0,a.FD)(a.FK,{children:[(0,a.Y)(E.S,{css:T.selectWrapper,children:s?(0,a.Y)(x.pd,{value:h.configurationLabel,disabled:!0}):(0,a.FD)(a.FK,{children:[(0,a.Y)(E.S,{grow:!0,shrink:!0,children:(0,a.Y)(R.l,{css:T.select,initialSelectedItem:{id:h.configurationId,title:h.configurationLabel},items:W?Object.values(B).map(function(e){var n=e.id;return{title:e.label,id:n}}):[],onChange:function(e){var n=e.id,t=null==B?void 0:B.find(function(e){return e.id===n});if(!t)return void d("An error occurred trying to validate selected machine configuration");var r={configurationId:t.id,configurationLabel:t.label,configurationSlug:t.slug,maxInstances:1};Y(r),"function"==typeof c&&c(r)},disabled:G})}),(0,a.Y)(E.S,{shrink:!0,row:!0,gap:2,align:"center",children:(0,a.FD)(E.S,{css:T.cost,row:!0,gap:4,children:[(0,a.FD)(D.EY,{variant:"subheadDefault",multiline:!1,children:["$",U]}),(0,a.Y)(D.EY,{color:"dimmer",variant:"small",multiline:!1,children:"per month"}),(0,a.FD)(D.EY,{color:"dimmer",variant:"small",multiline:!1,children:["($",L,"/hour)"]})]})})]})}),"function"==typeof u?(0,a.FD)(E.S,{gap:8,pt:8,children:[(0,a.Y)(k.$n,{colorway:"primary",text:"Approve and update",iconRight:(0,a.Y)(I.A,{}),onClick:function(){if(!h)return void d("An error occurred trying to validate selected machine configuration");M(!0),u(h)},loading:z,disabled:G}),(0,a.FD)(D.EY,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,a.Y)("a",{href:m.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]}):null]}):(0,a.Y)(E.S,{css:[A.S.foregroundPulse(),C.wp.borderRadius(8)],children:(0,a.Y)(x.pd,{disabled:!0})})})]})]})}},8479:(e,n,t)=>{"use strict";t.d(n,{e:()=>i});var r=t(73176);function i(e){return(0,r.Rj)(function(){return null==e?void 0:e.reduce(o,1)},[e],{default:null})}var o={direction:"reverse",state:{id:null,event:null,state:null,senderType:null},reducer:function(e,n){return n.id=e.id,n.state=e.state,n.event=e,n.senderType=e.sender.type,!1}}},8483:(e,n,t)=>{"use strict";t.d(n,{r:()=>l});var r=t(67313),i=t(21462),o=t(66890),a=t(54682);function l(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOrg:!1}).isOrg,n=(0,r.useRouter)(),t=(0,a.ME)(n,"stripePayment");return(0,i.useMemo)(function(){return t&&!e?[o.S4P.RequiresUnbanning]:[o.S4P.RequiresUnbanning,o.S4P.RequiresPaymentMethod,o.S4P.PaymentDelinquent,o.S4P.InsufficientBudget]},[t,e])}},8616:(e,n,t)=>{"use strict";t.d(n,{L:()=>i,M:()=>o});var r=t(49069),i=r.Pe.define(),o=r.Pe.define()},8782:(e,n,t)=>{"use strict";t.d(n,{Q:()=>na,E:()=>ni});var r=t(29935),i=t(83846),o=t(17844),a=t(12694),l=t(82643),s=t(81073),c=t(21462),u=t(67917),d=t(93188),p=t(57829),f=t(34140),h=t(98679),m=t(55100),g=t(31092),v=t(97841),y=t(54682),w=t(82112),b=t(66898),S=t(47848),Y=t(90342),_=t(30938),A=t(107),C=t(58770),k=t(17459),x=t(17089);function D(e){var n=e.actionType,t=(0,k._)(e,["actionType"]);(0,x.u4)(x.AZ.WS_WEBVIEW_USED,(0,o._)({type:n},t))}function E(){D({actionType:"open_new_window"})}var R=t(60690),I=t(42793),T=t(36937),F=t(18509),P=t(27023),L=t(86733),U=t(83070),N=t(40259),O=t(41358),M=t(4616),H=t(78626),B=t(85389),z=t(2760),W=t(1035),G=t(15149),V=t(63456),Z=t(77595),j=(0,I.AH)([P.wp.borderRadius(6),P.wp.color.foregroundDimmer,P.wp.height(24),{borderColor:T.LU.outlineDimmer}]),q=(0,F.x)({root:[P.wp.border({color:T.LU.outlineDimmest,direction:"bottom"}),P.wp.p(2),P.wp.container("root"),P.wp.zIndex(1),P.wp.p(4),P.wp.gap(4),P.wp.height(40)],devControls:[P.wp.gap(4)],navControls:[P.wp.flex.growAndShrink(1)],navButton:[P.wp.p(6),P.wp.borderRadius(4),P.wp.flex.shrink(0),{border:"none"}],urlWrapper:[P.wp.position.relative,P.wp.flex.row,P.wp.flex.growAndShrink(1)],urlPath2:[P.wp.py(0),P.wp.fontSize(12),P.wp.flex.grow(1),P.wp.borderRadius(8)],goButton:[P.wp.position.absolute,P.wp.right(4),P.wp.top("50%"),{transform:"translateY(-50%)"}],buttons:[(0,i._)({},P.kL.max(500,"root"),{"svg + span":{display:"none"},svg:{marginRight:0}})],fakeUrl:[P.wp.fontSize(12),P.wp.border(),{boxSizing:"content-box"},P.wp.borderRadius(6),P.wp.px(8),P.wp.py(2),P.wp.flex.grow(1),P.wp.rowWithGap(4),P.wp.align.center]});function K(e){var n=e.webviewPageState,t=e.navigationState;return(0,s.FD)(O.ui,{css:q.root,row:!0,align:"center",justify:"space-between",children:["active"===n.state?(0,s.Y)($,{navigationState:t}):(0,s.Y)(J,{}),(0,s.Y)(B.S,{row:!0,children:(0,s.Y)(B.S,{css:q.buttons,row:!0,align:"center",children:(0,s.Y)(B.S,{css:q.devControls,row:!0,children:(0,s.Y)(L.v,{size:"small",variant:"outlined",css:j,href:t.getExternalUrl(),target:"_blank",iconLeft:(0,s.Y)(G.A,{}),text:"New tab",onClick:function(){E()},noNextLink:!0})})})})]})}function $(e){var n=e.navigationState,t=n.canNavigateBack,r=n.navigateBack,i=n.canNavigateForward,o=n.navigateForward,a=n.canNavigateToInputRelativeUrl,l=n.navigateToInputRelativeUrl,c=n.inputRelativeUrl,u=n.setInputRelativeUrl,d=n.refresh,p=(0,C.vm)(),f=(0,R.Jn)("webviewpane.reload");return(0,s.FD)(B.S,{css:q.navControls,row:!0,gap:4,children:[(0,s.Y)(U.K0,{alt:"Back",tooltipDelay:"long",onClick:r,disabled:!t,css:q.navButton,children:(0,s.Y)(z.A,{})}),(0,s.Y)(U.K0,{alt:"Forward",tooltipDelay:"long",onClick:o,disabled:!i,css:q.navButton,children:(0,s.Y)(W.A,{})}),(0,s.Y)(U.K0,{alt:"Refresh".concat(f?" (".concat((0,R.LH)(f,p),")"):""),tooltipDelay:"long",onClick:d,css:q.navButton,children:n.isRefreshing?(0,s.Y)(V.A,{}):(0,s.Y)(Z.A,{})}),(0,s.FD)(B.S,{css:q.urlWrapper,row:!0,children:[(0,s.Y)(N.pd,{css:q.urlPath2,value:c,onKeyDown:function(e){"Enter"===e.key&&a&&l()},onChange:function(e){if(""===e.currentTarget.value)return void u("/");u(e.target.value)}}),(0,s.Y)(O.ui,{elevated:!0,css:q.goButton,children:(0,s.Y)(U.K0,{alt:"Go to URL",disabled:!a,onClick:l,size:18,tooltipContents:(0,s.Y)(R._y,{keyCombo:"Enter"}),children:(0,s.Y)(W.A,{})})})]})]})}function J(){return(0,s.Y)(B.S,{css:q.navControls,align:"center",row:!0,gap:4,children:(0,s.FD)(O.ui,{elevated:!0,css:q.fakeUrl,children:[(0,s.Y)(H.m_,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,s.Y)(V.A,{})}),(0,s.Y)(M.EY,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}var Q=t(85144),X=(0,F.x)({modalContent:[P.wp.flex.column,P.wp.gap(16)],modalTitle:[P.wp.fontWeight.bold],modalSection:[P.wp.flex.column,P.wp.gap(8)],modalSectionTitle:[P.wp.fontWeight.medium,{fontSize:T.LU.fontSizeSubheadDefault}],modalText:[{fontSize:T.LU.fontSizeDefault,lineHeight:1.5}],bulletList:[P.wp.flex.column,P.wp.gap(8),{paddingLeft:T.LU.space16}],bulletItem:[{position:"relative",paddingLeft:T.LU.space8,"&::before":{content:'"•"',position:"absolute",left:"-12px",color:T.LU.yellowStrongest}}]});function ee(e){var n=e.isOpen,t=e.onRequestClose;return(0,s.Y)(Q.a,{isOpen:n,onRequestClose:t,centered:!0,maxWidth:500,children:(0,s.FD)(B.S,{css:X.modalContent,p:16,children:[(0,s.Y)(M.EY,{variant:"headerDefault",css:X.modalTitle,children:"Cookie Restrictions in Preview"}),(0,s.FD)(B.S,{css:X.modalSection,children:[(0,s.Y)(M.EY,{css:X.modalSectionTitle,children:"Why are cookies restricted?"}),(0,s.Y)(M.EY,{css:X.modalText,multiline:!0,children:"Browser security policies limit cookie access in iframes like Preview to protect user privacy and prevent cross-site tracking."})]}),(0,s.FD)(B.S,{css:X.modalSection,children:[(0,s.Y)(M.EY,{css:X.modalSectionTitle,children:"How does this affect my app?"}),(0,s.Y)(M.EY,{css:X.modalText,multiline:!0,children:"In Preview, your app may not be able to set or read cookies, affecting authentication, sessions, and user preferences. Your app works normally in a regular browser tab."})]}),(0,s.FD)(B.S,{css:X.modalSection,children:[(0,s.Y)(M.EY,{css:X.modalSectionTitle,children:"What can I do?"}),(0,s.FD)(B.S,{css:X.bulletList,children:[(0,s.Y)(B.S,{css:X.bulletItem,children:(0,s.Y)(M.EY,{css:X.modalText,children:'Use "New tab" to test cookie functionality in a regular browser environment.'})}),(0,s.Y)(B.S,{css:X.bulletItem,children:(0,s.Y)(M.EY,{css:X.modalText,children:"Try Chrome browser."})}),(0,s.Y)(B.S,{css:X.bulletItem,children:(0,s.FD)(M.EY,{css:X.modalText,children:["Try"," ",(0,s.Y)("a",{href:"https://replit.com/desktop",target:"_blank",rel:"noopener noreferrer",style:{color:T.LU.accentPrimaryStronger,textDecoration:"none"},children:"Replit Desktop App"}),"."]})}),(0,s.Y)(B.S,{css:X.bulletItem,children:(0,s.Y)(M.EY,{css:X.modalText,children:"Adjust your browser settings to allow cross-site tracking cookies (could be risky)."})})]})]})]})})}var en=t(87064),et=t(71872),er=(0,F.x)({root:[P.wp.border({width:0}),{color:T.LU.orangeStrongest,backgroundColor:T.LU.orangeDimmest,containerType:"inline-size"}],content:[P.wp.width("100%")],closeButton:[{color:T.LU.orangeStrongest},P.wp.hover({backgroundColor:T.LU.orangeDimmer})],tooltipText:[P.wp.flex.shrink(1)],newTabButton:[{color:T.LU.orangeStrongest,backgroundColor:T.LU.orangeDimmest,borderColor:T.LU.orangeStrongest,borderWidth:1,marginLeft:"8px"},P.wp.borderRadius(6),P.wp.height(24),P.wp.hover({backgroundColor:T.LU.orangeDimmer})],learnMoreButton:[{color:T.LU.orangeStrongest,backgroundColor:"transparent",marginLeft:"8px",padding:0,border:"none",textDecoration:"underline"},P.wp.hover({fontWeight:"bolder",backgroundColor:"transparent"})]});function ei(e){var n=e.navigationState,t=e.onDismiss,r=(0,a._)((0,c.useState)(!1),2),i=r[0],o=r[1],l=function(){o(!0)};return(0,s.FD)(s.FK,{children:[(0,s.Y)(B.S,{css:er.root,grow:0,shrink:0,p:4,pl:8,gap:4,align:"start",children:(0,s.FD)(B.S,{css:er.content,row:!0,gap:6,align:"center",justify:"space-between",children:[(0,s.Y)(et.A,{}),(0,s.FD)(B.S,{row:!0,gap:4,align:"center",grow:!0,shrink:!0,children:[(0,s.Y)(M.EY,{css:er.tooltipText,variant:"small",children:"Open a new tab to test authentication and file uploads."}),(0,s.Y)(L.v,{size:"small",variant:"outlined",css:er.newTabButton,href:n.getExternalUrl(),target:"_blank",iconLeft:(0,s.Y)(G.A,{}),text:"New tab",onClick:function(){E()},noNextLink:!0}),(0,s.Y)(L.v,{size:"small",variant:"outlined",css:er.learnMoreButton,href:"#",onClick:function(e){e.preventDefault(),l()},text:"Learn more"})]}),(0,s.Y)(U.K0,{onClick:t,alt:"Dismiss",css:er.closeButton,children:(0,s.Y)(en.A,{})})]})}),(0,s.Y)(ee,{isOpen:i,onRequestClose:function(){return o(!1)}})]})}var eo=t(12584),ea=t(41114),el=t(86997);function es(){var e=(0,eo._)(["\n  query WebviewDeployBanner($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n        authorizations {\n          viewDeploymentConfig {\n            isAuthorized\n          }\n        }\n      }\n    }\n  }\n"]);return es=function(){return e},e}var ec={},eu=(0,ea.J1)(es()),ed=t(11769),ep=t(24140),ef=t(8486),eh=t(48604),em=(0,F.x)({root:[{color:T.LU.accentPrimaryStrongest,backgroundColor:T.LU.accentPrimaryDimmest,containerType:"inline-size"}],content:[P.wp.width("100%")],tooltipText:[P.wp.flex.growAndShrink(1)],closeButton:[{marginLeft:"auto"}]}),eg=function(e){var n=e.onClick,t=e.onDismiss,r="function"==typeof t;return(0,s.Y)(B.S,{css:em.root,grow:!0,shrink:!0,px:6,py:4,gap:4,align:"start",children:(0,s.FD)(B.S,{css:em.content,row:!0,gap:6,align:"center",justify:"space-between",children:[(0,s.FD)(B.S,{row:!0,gap:8,align:"center",children:[(0,s.Y)(H.m_,{tooltip:(0,s.Y)(B.S,{gap:4,justify:"start",align:"start",children:["Deploy to any URL","Configurable machine","Always on"].map(function(e,n){return(0,s.FD)(B.S,{row:!0,gap:8,align:"center",justify:"center",children:[(0,s.Y)(ep.A,{size:12}),(0,s.Y)(M.EY,{variant:"small",multiline:!1,children:e})]},n)})}),delay:"none",children:(0,s.Y)(eh.A,{})}),(0,s.Y)(M.EY,{css:em.tooltipText,variant:"small",children:"Ready to share with the world?"})]}),(0,s.Y)(ed.$n,{size:"small",colorway:"primary",iconLeft:(0,s.Y)(ef.A,{}),text:"Deploy",onClick:n}),r?(0,s.Y)(B.S,{css:em.closeButton,children:(0,s.Y)(U.K0,{alt:"Dismiss",onClick:t,children:(0,s.Y)(en.A,{})})}):null]})})},ev=t(78104);function ey(e){var n,t,r,i=e.replId,a=e.onClick,l=(n={variables:{id:i}},t=(0,o._)({},ec,n),el.I(eu,t)).data,u=(0,ev.A)("workspace","workspace-deployments-webview-banner"),d=u.shouldDisplay,p=u.register,f=u.dismiss;(0,c.useEffect)(function(){p()},[p]);var h=function(){f()},m=(null==l?void 0:l.getRepl.__typename)==="Repl"?l.getRepl:null;if(!m)return null;var g=m.authorizations.viewDeploymentConfig.isAuthorized,v=(null==(r=m.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"&&m.hostingDeployment.currentBuild;return g&&!v&&d?(0,s.Y)(B.S,{children:(0,s.Y)(eg,{onClick:function(){(0,x.u4)(x.AZ.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner",has_agent_session:!0,is_agent_suggesting_deployment:!0}),h(),a()},onDismiss:h})}):null}var ew=t(13843),eb=t(81686),eS=(0,F.x)({modalText:[P.wp.pl(8),P.wp.display.block],subHeadingText:[P.wp.display.block,P.wp.mb(8)],bulletList:[P.wp.flex.column,P.wp.gap(8),P.wp.pl(24)],statusItem:[P.wp.flex.row,P.wp.gap(8),P.wp.p(8),P.wp.borderRadius(8),P.wp.align.center,P.wp.backgroundColor.backgroundRoot],statusCircle:[{width:"10px",height:"10px",borderRadius:"50%",flexShrink:0,'&[data-reachable="true"]':{backgroundColor:T.LU.accentPrimaryDefault},'&[data-reachable="false"]':{backgroundColor:T.LU.accentNegativeDefault}}]});function eY(e){var n=e.isOpen,t=e.onRequestClose,r=e.reachability;return(0,s.Y)(Q.a,{isOpen:n,onRequestClose:t,centered:!0,maxWidth:500,children:(0,s.FD)(B.S,{gap:16,children:[(0,s.Y)(M.EY,{variant:"headerDefault",children:"App Reachability Status"}),(0,s.FD)("ul",{css:eS.bulletList,children:[(0,s.FD)("li",{css:eS.statusItem,children:[(0,s.Y)(B.S,{css:eS.statusCircle,"data-reachable":r.dotdev}),(0,s.FD)(M.EY,{css:eS.modalText,children:["replit.dev domain:"," ",r.dotdev?"Reachable":"Unreachable"]})]}),(0,s.FD)("li",{css:eS.statusItem,children:[(0,s.Y)(B.S,{css:eS.statusCircle,"data-reachable":r.replCo}),(0,s.FD)(M.EY,{css:eS.modalText,children:["repl.co domain:"," ",r.replCo?"Reachable":"Unreachable"]})]})]}),(0,s.FD)(eb.s,{children:[(0,s.Y)(M.EY,{css:eS.subHeadingText,variant:"subheadDefault",children:"Why might my app be unreachable?"}),(0,s.Y)(M.EY,{css:eS.modalText,multiline:!0,children:"Your browser may be unable to access your app's development domains (replit.dev and repl.co). This can happen due to:"}),(0,s.FD)("ul",{css:eS.bulletList,children:[(0,s.Y)("li",{children:(0,s.Y)(M.EY,{css:eS.modalText,children:"Internet service provider blocking requests"})}),(0,s.Y)("li",{children:(0,s.Y)(M.EY,{css:eS.modalText,children:"Router firewall rules"})}),(0,s.Y)("li",{children:(0,s.Y)(M.EY,{css:eS.modalText,children:"Browser or extension blocking requests"})})]})]}),(0,s.FD)(eb.s,{children:[(0,s.Y)(M.EY,{css:eS.subHeadingText,variant:"subheadDefault",children:"What can I do?"}),(0,s.FD)("ul",{css:eS.bulletList,children:[(0,s.Y)("li",{children:(0,s.Y)(M.EY,{css:eS.modalText,children:"Connect to a different network if possible (e.g. mobile data)"})}),(0,s.Y)("li",{children:(0,s.Y)(M.EY,{css:eS.modalText,children:"Check with your network administrator if you're on a restricted network (e.g. corporate or school WIFI)"})}),(0,s.Y)("li",{children:(0,s.FD)(M.EY,{css:eS.modalText,children:["See our"," ",(0,s.Y)("a",{href:ew.ik.TROUBLESHOOTING_REACHABILITY,target:"_blank",rel:"noopener noreferrer",style:{color:T.LU.accentPrimaryStronger,textDecoration:"none"},children:"FAQ"})," ","for more troubleshooting steps"]})})]})]})]})})}var e_=(0,F.x)({root:[P.wp.border({width:0}),{color:T.LU.orangeStrongest,backgroundColor:T.LU.orangeDimmest,containerType:"inline-size"}],content:[P.wp.width("100%")],closeButton:[{color:T.LU.orangeStrongest},P.wp.hover({backgroundColor:T.LU.orangeDimmer})],tooltipText:[P.wp.flex.shrink(1)],learnMoreButton:[{color:T.LU.orangeStrongest,backgroundColor:"transparent",marginLeft:"8px",padding:0,border:"none",textDecoration:"underline"},P.wp.hover({fontWeight:"bolder",backgroundColor:"transparent"})]});function eA(e){var n=e.onDismiss,t=e.reachability,r=(0,a._)((0,c.useState)(!1),2),i=r[0],o=r[1];return(0,s.FD)(s.FK,{children:[(0,s.Y)(B.S,{css:e_.root,grow:0,shrink:0,p:4,pl:8,align:"start",children:(0,s.FD)(B.S,{css:e_.content,row:!0,gap:6,align:"center",justify:"space-between",children:[(0,s.Y)(et.A,{}),(0,s.FD)(B.S,{row:!0,gap:4,align:"center",grow:!0,shrink:!0,children:[(0,s.Y)(M.EY,{css:e_.tooltipText,variant:"small",children:t.dotdev&&t.replCo?"There may be connectivity issues with your app.":"Your app might not be reachable from this network."}),(0,s.Y)(ed.$n,{size:"small",variant:"outlined",css:e_.learnMoreButton,onClick:function(){return o(!0)},text:"Learn more"})]}),(0,s.Y)(U.K0,{onClick:n,alt:"Dismiss",css:e_.closeButton,children:(0,s.Y)(en.A,{})})]})}),(0,s.Y)(eY,{isOpen:i,onRequestClose:function(){return o(!1)},reachability:t})]})}var eC=t(21762),ek=t(41930),ex=t(7868),eD=t(83731),eE=t(91532),eR=t(52751),eI=t(85051),eT=t(28290),eF=t(62862),eP=t(69762),eL=t(37252),eU=t(37582),eN=t(49748),eO=t(28174),eM=t(51055),eH=t(46103),eB=t(5414),ez=[P.wp.reset.button,eI.b.nofill,P.wp.color.accentPositiveStronger,P.wp.fontSize("small"),{border:"0 none !important","&:hover":[P.wp.color.accentPositiveStrongest,{backgroundColor:"transparent !important"}],"&:active":[P.wp.color.accentPositiveStronger,{backgroundColor:"transparent !important"}]},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},P.wp.align.center,P.wp.pr(0),P.wp.pl(4)],eW=(0,F.x)({root:[P.wp.border({color:T.LU.outlineDimmest,direction:"bottom"}),P.wp.p(2),P.wp.container("root"),P.wp.zIndex(1),P.wp.px(4),P.wp.py(6),P.wp.gap(4),{height:36}],devControls:[{"button:not(:hover)":{color:T.LU.foregroundDimmest},"a:not(:hover)":{color:T.LU.foregroundDimmest}}],urlWrapper:[P.wp.position.relative,P.wp.height(24)],urlOptionsRoot:[P.wp.overflow("hidden"),P.wp.borderRadius(4),{":hover":{boxShadow:"0 0 0 1px "+T.LU.outlineDimmer},":focus-within":{outline:"2px solid ".concat(T.LU.accentPrimaryDefault)}}],urlOptions:[P.wp.borderRadius(4)],urlOptionsSection:[P.wp.border({direction:"bottom"}),{":last-child":{paddingBottom:0,borderBottom:0}}],portRadioGroup:[P.wp.colWithGap(8)],portOption:[P.wp.rowWithGap(8),P.wp.color.foregroundDimmer],portOptionSelected:[P.wp.rowWithGap(8),P.wp.color.foregroundDefault],portOptionLabel:[{"&:hover":[P.wp.cursor.pointer,P.wp.color.foregroundDefault]}],url:ez,urlPath2:[P.wp.p(0),P.wp.fontSize(12),P.wp.flex.grow(1),{backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0,border:"0 none !important",outline:"none !important"}],goButton:[P.wp.position.absolute,P.wp.right(4),P.wp.top("50%"),{transform:"translateY(-50%)"}],fakeUrl:[P.wp.borderRadius(4),P.wp.height(24)],devtoolsErrorsBadge:[P.wp.position.absolute,P.wp.center,P.wp.textAlign.center,P.wp.backgroundColor.accentNegativeStronger,P.wp.color.accentNegativeDimmest,P.wp.right(0),P.wp.top(-2),P.wp.p(2),P.wp.minWidth(14),P.wp.height(14),P.wp.borderRadius(16),P.wp.fontSize(10),{pointerEvents:"none"}],screenSizeMenuWrapper:[P.wp.p(4)]}),eG="Dev URLs are only active when someone is in the workspace. The dev URL is also subject to change. For production hosting, use Deployments.";function eV(e){var n=e.isInDesktopApp;return(0,s.FD)(B.S,{grow:!0,shrink:!0,children:[(0,s.Y)(M.EY,{children:n?"Open in web browser":"Open in a new tab"}),(0,s.Y)(M.EY,{variant:"small",color:"dimmer",children:eG})]})}function eZ(e){return(0,s.FD)(B.S,{css:P.wp.position.relative,children:[e.children,e.errorCount>0?(0,s.Y)(B.S,{css:eW.devtoolsErrorsBadge,children:(0,s.Y)(M.EY,{variant:"small",multiline:!1,children:e.errorCount>99?"99+":e.errorCount.toString()})}):null]})}function ej(e){var n=e.url,t=e.webviewPageState,r=e.navigationState,i=e.forwardedPorts,o=e.devtoolsErrorCount,l=e.onToggleDevtools,u=e.onOpenPortSettings,d=e.screenSize,p=e.setScreenSize,h=e.replShield,m=(0,f.A)(),g=(0,a._)((0,c.useState)(!1),2),v=g[0],y=g[1],w="active"!==t.state&&"external-page"!==t.state,b=(0,ek.a)();return(0,s.FD)(O.ui,{css:eW.root,row:!0,align:"center",justify:"space-between",children:["external-page"===t.state?(0,s.Y)(eJ,{backToLocal:function(){return r.refresh()}}):(0,s.Y)(e$,{loading:w,url:n,navigationState:r,forwardedPorts:i,onOpenPortSettings:u,replShield:h}),(0,s.FD)(B.S,{row:!0,align:"center",gap:2,css:eW.devControls,children:["external-page"!==t.state?(0,s.FD)(s.FK,{children:[b?null:(0,s.FD)(eL.Wv,{isOpen:v,onOpenChange:function(e){y(e)},label:"Screen size",background:"higher",children:[(0,s.Y)(U.K0,{alt:"Screen size",disabled:w,children:(0,s.Y)(eO.A,{})}),(0,s.Y)(eX,{screenSize:d,setScreenSize:p})]}),(0,s.Y)(eZ,{errorCount:o,children:(0,s.Y)(U.K0,{onClick:l,alt:"Devtools",disabled:w,children:(0,s.Y)(eB.A,{})})})]}):null,(0,s.Y)(eF.A,{disabled:w,tooltipContents:(0,s.Y)(eV,{isInDesktopApp:m}),href:r.getExternalUrl(),target:"_blank",alt:m?"Open in web browser":"New tab",onClick:function(){E()},children:(0,s.Y)(G.A,{})})]})]})}var eq=B.D.button;function eK(e){var n=e.url,t=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,o=e.replShield,l=t.canNavigateToInputRelativeUrl,u=t.navigateToInputRelativeUrl,d=t.inputRelativeUrl,p=t.setInputRelativeUrl,f=t.selectedPort,h=t.setPort,m=(0,a._)((0,c.useState)(!1),2),g=m[0],v=m[1],y=(0,eT.c)(),w=y("radioGroup"),S=(0,eC._P)({controlName:"flag-repl-shield-toggle"});return(0,s.FD)(O.ui,{elevated:!0,css:eW.urlOptionsRoot,grow:!0,shrink:!0,row:!0,children:[(0,s.FD)(eL.Wv,{isOpen:g,onOpenChange:v,label:"Show URL Options",background:"higher",children:[(0,s.FD)(eq,{row:!0,gap:2,css:eW.url,children:[(0,s.Y)(H.m_,{tooltip:eG,children:o?(0,s.Y)(eH.A,{size:12}):(0,s.Y)(eN.A,{size:12})}),".".concat(n.includes("replit.dev")?"replit.dev":"repl.co").concat((0,b.r$)(f)?"":":"+f)]}),(0,s.FD)(O.ui,{css:eW.urlOptions,p:8,gap:6,children:[S?(0,s.Y)(B.S,{css:eW.urlOptionsSection,pb:8,gap:4,children:(0,s.Y)(eD.A,{})}):null,(0,s.FD)(B.S,{css:eW.urlOptionsSection,pb:8,gap:4,children:[(0,s.FD)(B.S,{grow:!0,row:!0,gap:0,justify:"space-between",children:[(0,s.FD)(M.EY,{children:["Listening on ",(0,ex.A)("port",r.length),":"]}),i?(0,s.Y)(U.K0,{alt:"Networking tool",onClick:i,children:(0,s.Y)(eM.A,{})}):null]}),(0,s.Y)(eU.z,{tag:"fieldset",css:eW.portRadioGroup,name:w,value:f.toString(),onChange:function(e){h(parseInt(e.target.value,10)),v(!1)},children:r.map(function(e,n){return(0,s.FD)(B.S,{css:f===e.configuration.externalPort?eW.portOptionSelected:eW.portOption,children:[(0,s.Y)(eU.s,{id:y(e.configuration.externalPort),value:e.configuration.externalPort.toString()}),(0,s.Y)("label",{htmlFor:y(e.configuration.externalPort),css:eW.portOptionLabel,children:":".concat(e.configuration.localPort," → :").concat(e.configuration.externalPort)})]},"".concat(n,"-").concat(e.configuration.externalPort,":").concat(e.configuration.localPort))})})]}),(0,s.Y)(eE.A,{url:n})]})]}),(0,s.Y)(N.pd,{css:eW.urlPath2,value:d,onKeyDown:function(e){"Enter"===e.key&&l&&u()},onChange:function(e){if(""===e.currentTarget.value)return void p("/");p(e.target.value)}})]})}function e$(e){var n=e.url,t=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,o=e.replShield,a=e.loading,l=t.canNavigateBack,c=t.navigateBack,u=t.canNavigateForward,d=t.navigateForward,p=t.canNavigateToInputRelativeUrl,f=t.navigateToInputRelativeUrl,h=t.refresh,m=(0,C.vm)(),g=(0,R.Jn)("webviewpane.reload");return(0,s.FD)(B.S,{row:!0,gap:4,align:"center",grow:!0,shrink:!0,children:[(0,s.Y)(U.K0,{alt:"Back",tooltipDelay:"long",onClick:c,disabled:!l,children:(0,s.Y)(z.A,{})}),(0,s.Y)(U.K0,{alt:"Forward",tooltipDelay:"long",onClick:d,disabled:!u,children:(0,s.Y)(W.A,{})}),(0,s.Y)(U.K0,{alt:"Refresh".concat(g?" (".concat((0,R.LH)(g,m),")"):""),tooltipDelay:"long",onClick:h,disabled:a,children:t.isRefreshing?(0,s.Y)(V.A,{}):(0,s.Y)(Z.A,{})}),(0,s.FD)(B.S,{css:eW.urlWrapper,grow:!0,shrink:!0,children:[a?(0,s.Y)(eQ,{}):(0,s.Y)(eK,{url:n,navigationState:t,forwardedPorts:r,onOpenPortSettings:i,replShield:o}),(0,s.Y)(O.ui,{elevated:!0,css:eW.goButton,children:(0,s.Y)(U.K0,{alt:"Go to URL",disabled:a||!p,onClick:f,size:18,tooltipContents:(0,s.Y)(R._y,{keyCombo:"Enter"}),children:(0,s.Y)(W.A,{})})})]})]})}function eJ(e){var n=e.backToLocal,t=(0,a._)((0,c.useState)(!1),2),r=t[0],i=t[1];return(0,s.FD)(B.S,{row:!0,gap:4,align:"center",grow:!0,shrink:!0,children:[(0,s.Y)(ed.$n,{size:"small",variant:"nofill",onClick:function(){n(),i(!0)},loading:r,text:"Back to my page",iconLeft:r?(0,s.Y)(V.A,{}):(0,s.Y)(z.A,{})}),(0,s.FD)(O.ui,{row:!0,grow:!0,shrink:!0,elevated:!0,gap:4,align:"center",css:eW.fakeUrl,children:[(0,s.Y)(H.m_,{tooltip:"The URL bar is not supported when navigating to external pages. You can open in a new tab to use your browser instead.",delay:"none",placement:"auto",children:(0,s.Y)(et.A,{size:12})}),(0,s.Y)(M.EY,{variant:"small",color:"dimmer",children:"External page"})]})]})}function eQ(){return(0,s.FD)(O.ui,{row:!0,grow:!0,shrink:!0,gap:4,align:"center",elevated:!0,css:eW.fakeUrl,px:4,children:[(0,s.Y)(H.m_,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,s.Y)(V.A,{size:12})}),(0,s.Y)(M.EY,{variant:"small",color:"dimmer",children:"Loading your page…"})]})}function eX(e){var n=e.screenSize,t=e.setScreenSize;return(0,s.FD)(eP.W1,{"aria-label":"Screen size menu",onAction:function(e){if("Full size"===e)null==t||t(void 0);else{var n=eR.U.find(function(n){return n.title===e});if(!n)return;null==t||t(n)}},css:eW.screenSizeMenuWrapper,children:[(0,s.Y)(e0,{isSelected:void 0===n,title:"Full size"}),(0,s.Y)(eP.wv,{}),eR.U.map(function(e){return(0,s.Y)(e0,{isSelected:(null==n?void 0:n.title)===e.title,title:e.title},e.title)})]})}function e0(e){var n=e.isSelected,t=e.title;return(0,s.FD)(eP.iy,{id:t,textValue:t,children:[(0,s.Y)(M.EY,{children:t}),n?(0,s.Y)(ep.A,{}):null]})}var e1=t(14417),e2=t(93629),e4=t(22531),e5=t(90629),e3=t(37743),e7=t(27741),e6=function e(n){var t=this,r=n.initialRelativeUrl,i=n.initialPort,o=n.onChange,a=n.navigateTo;(0,e3._)(this,e),this.history=[],this.historyIndex=-1,this.init=function(e,n){t.history.push({relativeUrl:e,port:n}),t.historyIndex=t.history.length-1,t.notifyChanges()},this.notifyChanges=function(){t.onChange(t.canGoBack(),t.canGoForward(),t.getCurrentRelativeUrl(),t.getCurrentPort(),t.isRefreshing)},this.canGoBack=function(){return t.historyIndex>0},this.canGoForward=function(){return t.historyIndex<t.history.length-1},this.getCurrentRelativeUrl=function(){return t.history[t.historyIndex].relativeUrl},this.getCurrentPort=function(){return t.history[t.historyIndex].port},this.push=function(e,n){(e!==t.getCurrentRelativeUrl()||n!==t.getCurrentPort())&&(t.history=t.history.slice(0,t.historyIndex+1),t.history.push({relativeUrl:e,port:n}),t.historyIndex=t.history.length-1),t.notifyChanges()},this.relativeUrlUpdate=function(e){t.push(e,t.getCurrentPort())},this.back=function(){D({actionType:"history_back"}),t.canGoBack()&&(t.historyIndex-=1,t.navigate(t.getCurrentRelativeUrl(),t.getCurrentPort()))},this.forward=function(){D({actionType:"history_forward"}),t.canGoForward()&&(t.historyIndex+=1,t.navigate(t.getCurrentRelativeUrl(),t.getCurrentPort()))},this.navigate=function(e,n){var r=null!=n?n:t.getCurrentPort();t.navigateTo.current(e,r),t.push(e,r)},this.refresh=function(){var e,n;D({actionType:"refresh"}),t.isRefreshing=!0,t.notifyChanges(),t.navigateTo.current(null!=(e=t.getCurrentRelativeUrl())?e:"/",null!=(n=t.getCurrentPort())?n:80).finally(function(){t.isRefreshing=!1,t.notifyChanges()})},this.setPort=function(e){var n=t.getCurrentRelativeUrl();t.navigate(n,e)},this.onChange=o,this.isRefreshing=!1,this.navigateTo=a,this.init(r,i)};function e8(e){var n,t=e.iframeSrc,r=e.port,i=e.path,o=e.navigateThroughWorkspaceDevtools,a=e.mintReplShieldToken,l=(0,k._)(e,["iframeSrc","port","path","navigateThroughWorkspaceDevtools","mintReplShieldToken"]);if(o&&"id"in l){var s=(0,b.jq)(t,r);s.searchParams.set("initialPath",i),s.searchParams.set("id",l.id),a&&s.searchParams.set("replShieldMintedToken",a),n=s.href}else{var c=new URL(i,t);r&&(c=(0,b.jq)(c.toString(),r)),a&&c.searchParams.set("replShieldMintedToken",a),n=c.toString()}return n}var e9=t(67057),ne=t(43303),nn=(0,t(15311).v)(["width","height","transform","borderRadius","border","colorScheme"]),nt=nn.cssVars,nr=nn.styleTokens;function ni(e,n){var t=function(e,n){var t,r,i,o=void 0;if((null==e||null==(t=e.ports)?void 0:t.type)==="external")o=null==e||null==(i=e.ports)?void 0:i.port;else if((null==e||null==(r=e.ports)?void 0:r.type)==="local"){var a=n.find(function(n){var t;return n.configuration.localPort===(null==(t=e.ports)?void 0:t.port)});o=null==a?void 0:a.configuration.externalPort}return o}(e,n);return t?t:n.length>0?n.find(function(e){return 80===e.configuration.externalPort})?80:n[0].configuration.externalPort:void 0}var no=(0,F.x)({screenshotWrapper:{width:"100%",height:"100%",backgroundSize:"cover"},iframeWrapper:[P.wp.overflow("hidden"),{'&[data-is-readonly-preview="true"]':[{cursor:"not-allowed"}]}],iframeMiddle:[P.wp.position.relative,{borderRadius:nr.borderRadius,border:nr.border,width:nr.width,height:nr.height}],iframeInner:[P.wp.position.absolute,{top:0,left:0,overflow:"hidden",width:nr.width,height:nr.height,transform:nr.transform,transformOrigin:"top left"}],scalingFactor:[P.wp.color.foregroundDimmest,P.wp.fontSize(T.LU.fontSizeSmall),{position:"absolute",top:46,left:0,right:0,textAlign:"center"}],desktopAppWebview:[P.wp.flex.growAndShrink(1),{border:"none",backgroundColor:T.LU.white}],iframe:[P.wp.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:T.LU.white,colorScheme:nr.colorScheme}],self:[P.wp.height("100%"),{overflow:"hidden"}]}),na=(0,c.forwardRef)(function(e,n){var t,C,k,E,R,I,F,P,L,U,N,O,M,H,z,W,G,V,Z,j,q,$,J,Q,X,ee,en,et,er,eo,ea,el,es,ec,eu,ed,ep,ef,eh,em,eg,ev,ew,eb,eS,eY,e_,eC,ek,ex,eD,eE,eR,eI,eT,eF,eP,eL,eU,eN,eO,eM,eH,eB,ez,eW=e.initialPort,eG=e.initialPath,eV=void 0===eG?"/":eG,eZ=e.openPane,eq=e.ports,eK=e.container,e$=e.previewScreenSize,eJ=e.setPreviewScreenSize,eQ=e.isMobilePIP,eX=e.readonlyBannerVariant,e0=void 0===eX?"default":eX,e3=(0,a._)((0,c.useState)(!0),2),nn=e3[0],nr=e3[1],ni=(0,a._)((0,c.useState)(!1),2),na=ni[0],nl=ni[1],ns=(0,e9.rN)(),nc=(0,e9.nb)(),nu=(0,c.useId)(),nd=(0,m.A)(),np=(0,f.A)(),nf=(0,_.qX)(),nh=(0,S.th)(eW),nm=(0,c.useRef)(null),ng=(0,c.useRef)(!1),nv=(0,a._)((0,c.useState)(0),2),ny=nv[0],nw=nv[1],nb=(t=({desiredScreenSize:e$}).desiredScreenSize,k=(C=(0,a._)((0,c.useState)(void 0),2))[0],E=C[1],{resizeRef:(0,g.A)(function(e){E(e)}),screenSize:(0,c.useMemo)(function(){if(t&&k){var e=k.width-80,n=k.height-80,r=t.screen,i=r.width,o=r.height,a=i/o,l=n*a,s=e,c=e/a;l<=e&&(s=l,c=n);var u=Math.min(1,s/i,c/o);return s=1===u?i:s,c=1===u?o:c,{width:i,height:o,scaledWidth:s,scaledHeight:c,scale:u}}},[t,k])}),nS=nb.resizeRef,nY=nb.screenSize,n_=(0,e1.nL)().token,nA=(0,c.useMemo)(function(){return!np&&!nf&&!nh&&!eQ},[np,nf,nh,eQ]),nC=(0,b.Ik)({ports:eq,container:eK,addDevToolsSuffix:nA}),nk=(0,c.useMemo)(function(){return!(null==nC?void 0:nC.reachability.dotdev)&&!(null==nC?void 0:nC.reachability.replCo)&&!na},[nC,na]),nx=null!=nC,nD=(0,Y.w)(eq),nE=(R=nm,I=(0,a._)((0,c.useState)({visible:new d.N(!1)}),1)[0],F=(0,c.useRef)(null),P=(0,c.useCallback)(function(e){if("screenshot"===e.type){var n;null==(n=F.current)||n.call(F,e.result.ok?e.result.data:null)}},[]),L=(0,c.useCallback)((0,r._)(function(){return(0,l.YH)(this,function(e){return[2,Promise.race([new Promise(function(e){var n,t;F.current=e,null==(t=R.current)||null==(n=t.contentWindow)||n.postMessage({type:"takeScreenshot",source:"manual"},"*")}),new Promise(function(e){setTimeout(function(){return e(null)},3e3)})]).finally(function(){F.current=null})]})}),[R]),(0,c.useEffect)(function(){return I.visible.subscribe(function(e){var n,t;null==(t=R.current)||null==(n=t.contentWindow)||n.postMessage({type:"drawToolsVisibility",source:"manual",visibility:e},"*")})},[R,I]),(0,c.useMemo)(function(){return{state:I,onReceiveDrawEvent:P,onTakeScreenshot:L}},[P,I,L])),nR=(U=(0,c.useRef)([]),N=(0,w.I)(function(e){return(0,r._)(function(){var n;return(0,l.YH)(this,function(t){return(n=U.current,U.current=[],n&&n.length)?[2,e.agentToolWebviewLogs.store.rpc(n)]:[2]})})},[]),O=(0,c.useMemo)(function(){return(0,p.A)((0,r._)(function(){return(0,l.YH)(this,function(e){return[2,null==N?void 0:N()]})}),{wait:500})},[N]),(0,c.useCallback)(function(e,n){U.current.push({method:e,message:n}),O()},[O]));(0,c.useEffect)(function(){np&&nx&&nm.current.addEventListener("dom-ready",function(){ng.current=!0})},[np,nx]);var nI=(0,c.useCallback)((M=(0,r._)(function(e,n){var t,r;return(0,l.YH)(this,function(i){return nm.current&&(null==(t=nm.current)?void 0:t.contentWindow)&&(null==nC?void 0:nC.iframeSrc)?(r=e8({id:nu,iframeSrc:nC.iframeSrc,port:n,path:e,mintReplShieldToken:n_||void 0,navigateThroughWorkspaceDevtools:nA}),nm.current.src=r,[2,new Promise(function(e){var n,t,r=function(){var e,n;clearTimeout(a),null==(e=nm.current)||e.removeEventListener("load",i),null==(n=nm.current)||n.removeEventListener("error",o)},i=function(){r(),e()},o=function(){r(),e()},a=setTimeout(function(){r(),e()},1e4);null==(n=nm.current)||n.addEventListener("load",i),null==(t=nm.current)||t.addEventListener("error",o)})]):[2]})}),function(e,n){return M.apply(this,arguments)}),[nu,nA,nC,n_]),nT=(0,h.A)(nI),nF=(0,a._)((0,c.useState)(null),2),nP=nF[0],nL=nF[1],nU=(0,c.useCallback)(function(e){return nL(e)},[nL]),nN=(0,y.m5)(),nO=(0,_.GK)({isSupported:!eQ&&nf,navigateIframeRef:nT,onReceiveWebviewLog:nR,onReceiveWebviewScreenshot:nU,initialPort:eW,initialPath:eV,baseUrl:null==nC?void 0:nC.baseUrl}),nM=(z=(H={replId:nd,webviewId:nu,iframeOrWebviewRef:nm,iframeSrc:null==nC?void 0:nC.iframeSrc,onDevtoolsErrorCountChange:nw,onReceiveWebviewLog:nR,onReceiveDrawEvent:nE.onReceiveDrawEvent,bonsaiWebviewBridge:nO,onThirdPartyCookieCheck:function(e){e||nr(!1)}}).replId,W=H.webviewId,G=H.iframeOrWebviewRef,V=H.iframeSrc,Z=H.onDevtoolsErrorCountChange,j=H.onReceiveDrawEvent,q=H.onReceiveWebviewLog,$=H.bonsaiWebviewBridge,J=H.onThirdPartyCookieCheck,X=(Q=(0,a._)((0,c.useState)({state:"loading",relativeUrl:null}),2))[0],ee=Q[1],en=(0,f.A)(),(0,c.useEffect)(function(){if(en&&V){if(!G.current)throw Error("Expected iframe to be defined when iframerc exists");var e=G.current,n=new URL(V);return e.addEventListener("did-navigate",t),e.addEventListener("did-navigate-in-page",t),function(){e.removeEventListener("did-navigate",t),e.removeEventListener("did-navigate-in-page",t)}}function t(e){var t=new URL(e.url),r=t.pathname+t.search+t.hash;if(t.hostname!==n.hostname)return void ee(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});ee(function(e){return"active"===e.state&&e.relativeUrl===r?e:{state:"active",relativeUrl:r}})}},[en,V,G]),(0,c.useEffect)(function(){if($)return $.path.subscribe(function(e){ee(function(n){return"active"===n.state&&"path"===n.relativeUrl?n:{state:"active",relativeUrl:e}})})},[$]),(0,c.useEffect)(function(){if(!en&&!$&&V){var e=new URL(V);return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}function n(n){if(n.origin&&"null"!==n.origin){if(new URL(n.origin).hostname===e.hostname&&"object"===(0,e4._)(n.data)&&(null==(t=n.data)?void 0:t.type)){var t,r=n.data;if(null==r||!r.id||r.id===W)switch(r.type){case"event":var i=n.data,a=i.event,l=i.payload;"error"===a?e5.Cp(l):(0,x.u4)(a,(0,e2._)((0,o._)({},l),{replId:z}));break;case"show-badge":Z(n.data.count);break;case"forward-log":q(r.method,r.message);break;case"screenshot":j(r);break;case"third-party-cookie-check":J(r.payload.enabled);break;case"page-navigation":if(r.payload.isExternal)return void ee(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});var s=r.payload.relativeUrl;ee(function(e){return"active"===e.state&&e.relativeUrl===s?e:{state:"active",relativeUrl:s}})}}}}},[z,W,en,V,G,Z,q,j,$,J]),{webviewPageState:X}).webviewPageState,nH=(0,c.useCallback)((et=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(r){return(nw(0),nE.state.visible.set(!1),nC)?np?ng.current?(t=e8({id:nu,iframeSrc:nC.iframeSrc,port:n,path:e,mintReplShieldToken:n_||void 0,navigateThroughWorkspaceDevtools:nA}),[2,nm.current.loadURL(t)]):[2]:(nO&&nO.handleNavigateTo({port:null!=n?n:80,path:e,base:nC.baseUrl}),[2,nI(e,n)]):[2]})}),function(e,n){return et.apply(this,arguments)}),[nE.state.visible,nC,np,nO,nI,nu,nA,n_]),nB=(eo=(er={initialPort:eW,initialPath:eV,presentationalUrl:null==nC?void 0:nC.presentationUrl,webviewPageState:nM,navigateTo:function(e,n){return nH(e,n)}}).initialPort,ea=er.initialPath,el=er.presentationalUrl,es=er.webviewPageState,ec=er.navigateTo,ed=(eu=(0,a._)((0,c.useState)(!1),2))[0],ep=eu[1],eh=(ef=(0,a._)((0,c.useState)(!1),2))[0],em=ef[1],ev=(eg=(0,a._)((0,c.useState)("Loading..."),2))[0],ew=eg[1],eS=(eb=(0,a._)((0,c.useState)(80),2))[0],eY=eb[1],eC=(e_=(0,a._)((0,c.useState)(!1),2))[0],ek=e_[1],ex=(0,c.useCallback)(function(e,n,t,r,i){ep(e),em(n),ew(t),eY(r),ek(i)},[]),eD=(0,h.A)(ec),eE=(0,h.A)(eo),eR=(0,h.A)(ea),eI=(0,e7.A)(function(){return new e6({initialRelativeUrl:eR.current,initialPort:eE.current,onChange:ex,navigateTo:eD})},[eR,eE,ex,eD]),(0,c.useEffect)(function(){"loading"===es.state&&eE.current!==eS&&eI.setPort(eE.current)},[eo,eE,eI,eS,es]),(0,c.useEffect)(function(){"active"===es.state&&eI.relativeUrlUpdate(es.relativeUrl)},[es.state,es.relativeUrl,eI]),(0,c.useEffect)(function(){eI.navigate(eR.current,eo)},[eo,eR,eI]),eT=(0,c.useCallback)(function(){D({actionType:"navigated_to",path:ev}),eI.navigate(ev)},[ev,eI]),eF=(0,c.useCallback)(function(){var e=(0,b.jq)(el||"",eS);return ev&&(e.pathname=ev),e.toString()},[ev,el,eS]),eP=(0,c.useCallback)(function(){return eI.back()},[eI]),eL=(0,c.useCallback)(function(){return eI.forward()},[eI]),eU=(0,c.useCallback)(function(){return eI.refresh()},[eI]),eN=(0,c.useCallback)(function(e){return eI.setPort(e)},[eI]),{canNavigateBack:ed,canNavigateForward:eh,navigateBack:eP,navigateForward:eL,canNavigateToInputRelativeUrl:(0,c.useMemo)(function(){return ev!==es.relativeUrl},[ev,es.relativeUrl]),navigateToInputRelativeUrl:eT,inputRelativeUrl:ev,setInputRelativeUrl:ew,refresh:eU,setPort:eN,selectedPort:eS,getExternalUrl:eF,isRefreshing:eC}),nz=(0,h.A)(nB),nW=(0,Y.ff)(nB.selectedPort);(0,c.useEffect)(function(){nW&&nW.configuration.isLocalhost&&"loading"===nM.state&&nz.current.refresh()},[nz,nW,nM.state]);var nG=(0,u.X1)();(0,c.useEffect)(function(){nh&&nN&&(null==nG?void 0:nG.planId)&&nz.current.refresh()},[nN,nh,nz,nG]),(0,c.useImperativeHandle)(n,function(){return{refresh:function(){return nz.current.refresh()},navigateTo:nH,getCurrentPath:function(){return nM.relativeUrl}}},[nH,nz,nM.relativeUrl]);var nV=(0,ne.D)().isDarkColorScheme,nZ=!eQ,nj=!nO&&nZ;(0,c.useEffect)(function(){nO&&nO.setInsets({top:nh?48:40})},[nO,nh]);var nq=(0,c.useCallback)(function(){return eZ({type:"networking"})},[eZ]);if(!nC)return null;var nK="0 0 ".concat(T.LU.space4," ").concat(T.LU.space4);return(nY?nK=T.LU.space4:nN&&(nK="0"),eO=eQ||nh||!nP?(0,s.Y)(B.S,{css:no.iframeWrapper,grow:!0,shrink:!0,"data-is-readonly-preview":nh,innerRef:nS,align:"center",justify:"center",children:(0,s.Y)(B.S,{style:(eH={overflow:"hidden"},(0,i._)(eH,nt.width,nY?"".concat(nY.scaledWidth,"px"):"100%"),(0,i._)(eH,nt.height,nY?"".concat(nY.scaledHeight,"px"):"100%"),(0,i._)(eH,nt.borderRadius,nK),(0,i._)(eH,nt.border,nY?"1px solid ".concat(T.LU.outlineDefault):"none"),eH),css:no.iframeMiddle,children:(0,s.Y)(B.S,{style:(eB={},(0,i._)(eB,nt.width,nY?"".concat(nY.width,"px"):"100%"),(0,i._)(eB,nt.height,nY?"".concat(nY.height,"px"):"100%"),(0,i._)(eB,nt.transform,"scale(".concat(null!=(eM=null==nY?void 0:nY.scale)?eM:1,")")),eB),css:no.iframeInner,children:np?(0,s.Y)("webview",(0,o._)({"data-cy":"ws-webview",ref:nm,src:e8({iframeSrc:nC.iframeSrc,port:eW,path:eV,id:nu,mintReplShieldToken:n_||void 0,navigateThroughWorkspaceDevtools:nA}),style:(0,i._)({},nt.colorScheme,nV?"dark":"light"),css:no.desktopAppWebview},v.A)):(0,s.Y)("iframe",(0,o._)({title:"webview","data-cy":"ws-webview",ref:nm,src:e8({iframeSrc:nC.iframeSrc,port:eW,path:eV,id:nu,mintReplShieldToken:n_||void 0,navigateThroughWorkspaceDevtools:nA}),style:(0,i._)({},nt.colorScheme,nV?"dark":"light"),css:no.iframe},v.A))})})}):(0,s.Y)("div",{css:no.screenshotWrapper,style:{backgroundImage:"url(".concat(nP,")")}}),nh)?(0,s.FD)(B.S,{css:no.self,children:[nZ&&"none"!==e0?(0,s.Y)(A.p,{isRapidBuildInProgress:"default"===e0}):null,eO]}):(ez=eQ?null:nf?(0,s.Y)(K,{webviewPageState:nM,navigationState:nB,bonsaiWebviewBridge:nO}):(0,s.Y)(ej,{replId:nd,url:nC.presentationUrl,webviewPageState:nM,navigationState:nB,forwardedPorts:nD,devtoolsErrorCount:ny,onToggleDevtools:function(){if(D({actionType:"devtools_opened"}),nw(0),!np){var e,n;null==(n=nm.current)||null==(e=n.contentWindow)||e.postMessage({type:"toggleDevtools",source:"manual"},"*");return}var t=nm.current;t&&ng&&(t.isDevToolsOpened()?t.closeDevTools():t.openDevTools())},onOpenPortSettings:nq,screenSize:e$,setScreenSize:eJ,replShield:!!n_}),(0,s.FD)(B.S,{css:no.self,children:[ez,nj&&eZ?(0,s.Y)(ey,{replId:nd,onClick:function(){return eZ({type:"deployments",flow:{skipIntro:!1}})}}):null,nk?(0,s.Y)(eA,{reachability:nC.reachability,navigationState:nB,onDismiss:function(){return nl(!0)}}):null,nk||nn||ns?null:(0,s.Y)(ei,{navigationState:nB,onDismiss:function(){return nc(!0)}}),nY?(0,s.FD)(B.S,{css:no.scalingFactor,children:[Math.round(100*nY.scale),"%"]}):null,eO]}))})},8907:(e,n,t)=>{"use strict";t.d(n,{x:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query GetIsGuestInStarterPlanUserRepl($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          __typename\n          id\n        }\n        owner {\n          __typename\n          ... on User {\n            id\n            isSubscribed\n          }\n        }\n        isOwner\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(55100);function d(){var e,n,t,i,o=(t={variables:{replId:(0,u.A)()}},i=(0,r._)({},s,t),a.I(c,i)).data,l=(null==o?void 0:o.getRepl.__typename)==="Repl"&&null!=(e=o.getRepl.org)&&!!e.id;return(null==o?void 0:o.getRepl.__typename)==="Repl"&&(null==(n=o.getRepl.owner)?void 0:n.__typename)==="User"&&!o.getRepl.owner.isSubscribed&&!o.getRepl.isOwner&&!l}},8923:(e,n,t)=>{"use strict";t.d(n,{S:()=>nD,D:()=>nk});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(81073),s=t(292),c=t.n(s),u=t(21462),d=t(35992),p=t(4710),f=t(66890),h=t(82706),m=t(78251),g=t(33090),v=t(22799),y=t(54564),w=t(30331),b=t(22940),S=t(5932),Y=t(97626),_=t(67662),A=t(20203),C=t(32331),k=t(21762),x=t(98679),D=t(86215),E=t(18509),R=t(85051),I=t(27023),T=t(78626),F=t(85389),P=t(10327),L=t(49748),U=t(30445);function N(e){var n=e.existsInDev;return e.isAutoSynced?(0,l.Y)(T.m_,{tooltip:"This secret is automatically synced to your deployment",children:(0,l.Y)(F.S,{css:M.deploymentOnly,children:(0,l.Y)(L.A,{})})}):n?(0,l.Y)(T.m_,{tooltip:"Syncing has been disabled for this secret",children:(0,l.Y)(F.S,{css:M.unsynced,children:(0,l.Y)(U.A,{})})}):(0,l.Y)(T.m_,{tooltip:"This secret only exists as a deployment secret",children:(0,l.Y)(F.S,{css:M.deploymentOnly,children:(0,l.Y)(P.A,{})})})}var O=[I.wp.borderRadius(8),I.wp.width(32),I.wp.height(32),R.b.filled,I.wp.justify.center,I.wp.align.center],M=(0,E.x)({unsynced:(0,o._)(O).concat([I.wp.color.orangeStrongest]),deploymentOnly:(0,o._)(O).concat([I.wp.color.accentPrimaryStrongest])}),H=t(36937),B=t(24602),z=t(28290),W=t(49058),G=t(83070),V=t(40259),Z=t(36073),j=t(41358),q=t(4616),K=t(24140),$=t(87064),J=t(63456),Q=t(71872),X=(0,E.x)({input:[I.wp.color.greyStrongest],loading:[B.S.backgroundPulse(H.LU.backgroundHighest,H.LU.backgroundHigher)],error:[I.wp.color.accentNegativeStronger]}),ee=function(e){var n=e.id,t=e.value,r=e.loading,i=e.disabled,o=e.onChange,a=e.error,s=e.placeholder,c=e.type,d=void 0===c?"text":c,p=e.onFocus,f=(0,m.mU)(t),h=(0,u.useId)();return d||(d="text"),(0,l.FD)(F.S,{grow:!0,shrink:!0,gap:4,children:[(0,l.Y)(V.pd,{id:n,value:!r&&f?t:"",onChange:function(e){return o(e.target.value)},css:r?X.loading:X.input,disabled:r||i,"aria-describedby":h,placeholder:r?"":s,type:d,onFocus:p}),a?(0,l.Y)(F.S,{css:X.error,"aria-live":"polite","aria-atomic":"true",id:h,children:(0,l.Y)("span",{children:a})}):null]})},en=(0,E.x)({root:[I.wp.rowWithGap(8),I.wp.align.center],iconButton:[I.wp.height("100%"),I.wp.borderRadius(8),{"& button":I.wp.height(32)}],keyInput:[I.wp.width("40%")],error:[I.wp.color.accentNegativeDefault]}),et=function(e){var n=e.index,t=e.name,r=e.value,o=e.disabled,a=e.updateEnvVarName,s=e.updateEnvVarValue,c=e.removeEnvVar,d=e.otherKeys,p=e.devSecrets,f=e.canEditDevSecretsDisabledMessage,h=e.canEditDeploySecretsDisabledMessage,m=e.ignoredSecrets,g=e.optOutSyncing,v=e.optInSyncing,y=e.syncToWorkspace,w=(0,z.c)(),b=(0,i._)((0,u.useState)(""===t||""===r),2),S=b[0],Y=b[1],_=!!(t&&r),A=(0,x.A)(_),k=(0,C.A)(function(){k.current&&A.current&&Y(!1)},[A]),E=!!(p&&p.has(t)),R=void 0===h,I=E?m.includes(t)?{type:"unsynced",sync:function(){return y(t)}}:{type:"synced",optOut:function(){return g(t)}}:{type:"deploymentOnly"};if(S)return(0,l.FD)(l.FK,{children:[(0,l.FD)(F.S,{css:en.root,innerRef:k,children:[(0,l.Y)(F.S,{css:en.keyInput,children:(0,l.Y)(V.pd,{placeholder:"Name",id:"".concat(w,"-name-").concat(n),value:t,onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&_&&(g(t),Y(!1))},disabled:o})}),(0,l.Y)(F.S,{grow:!0,shrink:!0,children:(0,l.Y)(V.pd,{placeholder:"Value",name:"".concat(w,"-value-").concat(n),value:r,onChange:function(e){return s(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&_&&(g(t),Y(!1))},disabled:o})}),o?null:(0,l.Y)(j.ui,{elevated:!0,css:en.iconButton,children:(0,l.Y)(G.K0,{alt:"Add",tooltipBehavior:"hidden",onClick:function(){_?(g(t),Y(!1)):(c(),v(t))},children:_?(0,l.Y)(K.A,{}):(0,l.Y)($.A,{})})})]}),d.includes(t)?(0,l.FD)(q.EY,{variant:"small",css:en.error,children:['Secret "',t,'" already exists']}):null]});var T=(0,l.Y)(N,{existsInDev:E,isAutoSynced:!m.includes(t)&&E});return(0,l.FD)(F.S,{css:en.root,children:[void 0===f?T:null,(0,l.Y)(D.Ge,{value:t}),(0,l.Y)(D.iJ,{value:r,canEditDisabledMessage:h}),R?(0,l.Y)(D.R6,{onEdit:function(){return Y(!0)},onDelete:function(){c(),v(t)},autoSyncState:I}):null]})},er=function(e){var n,t,r,i=e.id,o=e.subdomain,a=e.deploymentId,s=e.onChange,c=e.updateValidity,d=(0,k._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:h.co}),p=d!==h.co,f=(0,A.qA)({variables:{subdomain:o,deploymentId:a},skip:0===o.length}),m=f.data,g=f.loading,v=f.error,y=(null==m?void 0:m.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&m.replitAppSubdomainAvailability.available,w=(null==m?void 0:m.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?m.replitAppSubdomainAvailability.message:null==m||null==(n=m.replitAppSubdomainAvailability)?void 0:n.errorMessage;return((0,u.useEffect)(function(){c(y)},[y]),v)?(0,l.Y)(Z.N,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,l.FD)(F.S,{children:[(0,l.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(V.pd,{id:i,placeholder:"subdomain",value:o,onChange:function(e){return s(e.target.value)}}),(0,l.FD)(q.EY,{multiline:!1,children:[(null==(r=window)||null==(t=r.location)?void 0:t.hostname)!=="replit.com"?".staging":"",".",d]})]}),(0,l.FD)(F.S,{row:!0,gap:4,pt:4,align:"center",children:[g?(0,l.FD)(l.FK,{children:[(0,l.Y)(J.A,{}),(0,l.Y)(q.EY,{multiline:!1,children:"Checking availability"})]}):null,y?(0,l.FD)(l.FK,{children:[(0,l.Y)(K.A,{color:"green"}),(0,l.Y)(q.EY,{css:[I.wp.color.greenDefault],multiline:!1,children:"Available"})]}):null,y||g?null:(0,l.FD)(l.FK,{children:[(0,l.Y)(Q.A,{color:"red"}),(0,l.Y)(q.EY,{css:[I.wp.color.redDefault],multiline:!1,children:w})]}),p?(0,l.Y)(Z.N,{colorway:"warning",text:"The ".concat(h.co," domain is currently unavailable, please use the ").concat(d," URL above.")}):null]})]})},ei=function(e){var n=e.appType,t=e.onChange,r=(0,z.c)();return(0,l.Y)(W.e2,{name:"deploymentTargetSelector",value:n,onChange:t,row:!0,css:[I.wp.width("100%"),I.wp.flex.row],children:[{value:f.JX5.Server,name:"Web Server",description:"ex. an API or website"},{value:f.JX5.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(function(e,n){return(0,l.Y)(F.S,{grow:!0,children:(0,l.Y)(T.m_,{tooltip:e.description,children:(0,l.Y)(W.$O,{id:r(e.value),value:e.value,text:e.name})})},n)})})},eo=t(25827),ea=t(90205),el=t(33612),es=t(3417),ec=t(62792),eu=t(4083),ed=t(34415),ep=t(11769),ef=t(1684),eh=t(45894),em=(0,E.x)({titleRow:[I.wp.gap(8),I.wp.align.center]});function eg(e){var n=e.onViewAction;return(0,l.Y)(l.FK,{children:(0,l.Y)(eu.w,{id:"privateDeployments",title:(0,l.FD)(l.FK,{children:[(0,l.FD)(F.S,{css:em.titleRow,row:!0,children:[(0,l.Y)(q.EY,{color:"dimmer",children:"Pre-deployment security scan"}),(0,l.Y)(ef.a,{text:"Beta",colorway:"primary",compact:!0})]}),(0,l.FD)(q.EY,{variant:"small",color:"dimmest",children:["Before deploying your app, run a security scan powered by our partner Semgrep to identify potential vulnerabilities."," ",(0,l.Y)("a",{target:"_blank",href:"https://docs.replit.com/replit-workspace/workspace-features/security-scanner",children:"Learn more"})]})]}),children:(0,l.Y)(ep.$n,{onClick:function(){n({type:ec.k.OpenPane,payload:{type:"securityScan"}}),(0,ed.kB)(ed.aJ.DEPLOYMENT_PANE_FINAL_PAGE)},iconRight:(0,l.Y)(eh.A,{color:H.LU.foregroundDimmest}),text:"Run scan"})})})}var ev=t(99400),ey=t(83846),ew=t(6724),eb=t.n(ew),eS=t(60666),eY=t(49022),e_=t(47848),eA=t(68752),eC=t(38692),ek=t(57731),ex=(0,E.x)({self:[I.wp.mt(8)],accordion:[I.wp.mb(0)],textButton:[I.wp.cursor.pointer,I.wp.reset.button,I.wp.color.accentPrimaryStronger,I.wp.focusRing,I.wp.hover(I.wp.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],tableHeader:[I.wp.color.foregroundDimmer,I.wp.m(4),I.wp.textAlign.left],tableWrapper:[I.wp.mb(8),I.wp.colWithGap(8),(0,ey._)({},eS.sX,I.wp.rowWithGap(0))],table:[I.wp.flex.column,I.wp.width("100%"),(0,ey._)({},eS.sX,[I.wp.width("50%"),I.wp.colWithGap(6),{"&:first-child":{table:{borderRight:"1px solid "+H.LU.outlineDimmer}}}])],ghostRow:[I.wp.display.none,(0,ey._)({},eS.sX,I.wp.display.flex)]}),eD=function(e){var n=e.text,t=e.onClick;return(0,l.Y)("button",{css:ex.textButton,onClick:t,children:n})};function eE(e){var n=e.hasPortsConfigured,t=e.hasPort80Configured,r=e.hasConflictingPorts,i=e.hasLocalhostPort80,o=e.openNetworkingPane;return n?t?r?(0,l.Y)(Z.N,{text:(0,l.FD)(l.FK,{children:["Potential port conflict. Make sure no External Ports have conflicts in your configuration and that you only have one External Port configured on port :80. Open the"," ",(0,l.Y)(eD,{text:"Networking pane to resolve.",onClick:o})]}),colorway:"warning"}):i?(0,l.Y)(Z.N,{text:(0,l.FD)(l.FK,{children:["Hosting your deployment on localhost can cause security or performance issues in some cases. Open the"," ",(0,l.Y)(eD,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,l.Y)(Z.N,{text:(0,l.FD)(l.FK,{children:["Deployment forwarding to External Port :80. Open the"," ",(0,l.Y)(eD,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,l.Y)(Z.N,{text:(0,l.FD)(l.FK,{children:["Potential port issue. Deployments require an External Port configured on port :80. Open the"," ",(0,l.Y)(eD,{text:"Networking pane to configure.",onClick:o})]}),colorway:"warning"}):(0,l.Y)(Z.N,{text:(0,l.FD)(l.FK,{children:["No ports configured. Deployments will automatically forward the first Internal Port that opens. Open the"," ",(0,l.Y)(eD,{text:"Networking pane to configure.",onClick:o})]})})}var eR=function(e){return 80===(0,e_.Zd)(e.configuration)};function eI(e){var n=e.portState,t=(0,e_.s$)(n.configuration),r=(0,e_.Zd)(n.configuration),i=eR(n);return(0,l.FD)(l.FK,{children:[(0,l.FD)(eA.VP,{width:"50%",children:[(0,l.Y)(q.EY,{children:t?"localhost":"0.0.0.0"}),i&&t?(0,l.Y)(ek.A,{size:16,color:H.ky.primary.default}):null]}),(0,l.FD)(eA.VP,{width:"50%",children:[(0,l.FD)(q.EY,{children:[":",r]}),i?(0,l.Y)(K.A,{size:16,color:H.ky.positive.default}):(0,l.Y)($.A,{size:16,color:H.ky.negative.default})]})]})}function eT(e){var n=e.ports,t=e.openNetworkingPane,r=(0,eY.A)(n.portsState),o=(null==r?void 0:r.filter(function(e){return(0,e_.Zd)(e.configuration)}).sort(function(e,n){var t,r;return(null!=(t=(0,e_.Zd)(e.configuration))?t:0)-(null!=(r=(0,e_.Zd)(n.configuration))?r:0)}))||null,a=null==o?void 0:o.find(eR),s=!!a,c=!!(o&&o.length>0),d=!!o&&!!a&&!!(o.filter(eR).length>1||o.some(function(e){return(0,e_.Zd)(e.configuration)===a.configuration.localPort})),p=!!(a&&(0,e_.s$)(a.configuration)),f=c&&!s||d,h=(0,i._)((0,u.useState)(!1),2),m=h[0],g=h[1];return(0,l.Y)(eC.A,{headerContent:(0,l.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(eo.K,{id:"deploymentPortConfiguration",title:"Port configuration",information:"Configure which port your deployment should use for incoming requests."}),f?(0,l.Y)(Q.A,{size:16,color:H.ky.warning.strongest}):null]}),expanded:m,onClick:function(){return g(!m)},css:ex.accordion,children:(0,l.FD)(F.S,{css:ex.self,gap:8,children:[(0,l.Y)(eE,{hasPortsConfigured:c,hasPort80Configured:s,hasConflictingPorts:d,hasLocalhostPort80:p,openNetworkingPane:t}),(0,l.Y)(F.S,{children:(0,l.FD)(F.S,{css:ex.tableWrapper,children:[(0,l.FD)(F.S,{css:ex.table,children:[(0,l.Y)(q.EY,{css:ex.tableHeader,children:"Deployment expects:"}),(0,l.FD)(eA.XI,{children:[(0,l.FD)(eA.fI,{children:[(0,l.Y)(eA.VP,{header:!0,width:"50%",children:"Host"}),(0,l.Y)(eA.VP,{header:!0,width:"50%",children:"External Port"})]}),(0,l.FD)(eA.fI,{children:[(0,l.Y)(eA.VP,{width:"50%",children:(0,l.Y)(q.EY,{children:"0.0.0.0"})}),(0,l.FD)(eA.VP,{width:"50%",children:[(0,l.Y)(q.EY,{children:":80"}),(0,l.Y)(K.A,{size:16,color:H.ky.positive.default})]})]}),c&&o?eb()((null==o?void 0:o.length)-1).map(function(e){return(0,l.Y)(eA.fI,{css:ex.ghostRow,children:(0,l.Y)(eA.VP,{children:(0,l.Y)(q.EY,{children:"\xa0"})})},e)}):null]})]}),(0,l.FD)(F.S,{css:ex.table,children:[(0,l.Y)(q.EY,{css:ex.tableHeader,children:"Your External Port configuration(s):"}),(0,l.FD)(eA.XI,{children:[(0,l.FD)(eA.fI,{children:[(0,l.Y)(eA.VP,{header:!0,width:"50%",children:"Host"}),(0,l.Y)(eA.VP,{header:!0,width:"50%",children:"External Port"})]}),c?null==o?void 0:o.map(function(e){return(0,l.Y)(eA.fI,{children:(0,l.Y)(eI,{portState:e})},e.configuration.localPort)}):(0,l.FD)(eA.fI,{children:[(0,l.Y)(eA.VP,{width:"50%",children:(0,l.Y)(q.EY,{children:"-"})}),(0,l.Y)(eA.VP,{width:"50%",children:(0,l.Y)(q.EY,{children:"-"})})]})]})]})]})})]})})}var eF=t(96034),eP=t(83603),eL=t(42546),eU=t(8017),eN=t(74033),eO=(0,E.x)({titleRow:[I.wp.gap(8),I.wp.align.center]});function eM(e){var n=e.isPrivate,t=e.setIsPrivate,r=e.isRedeploy,i=(0,eP.ET)(),o=i.loading,a=i.orgId,s=(0,eL.A)(a),c=s.requirePrivateDeployments,u=s.adminOnlyPublicDeployments,d=s.isAdmin,p=!o&&!a,f=c||!d&&u;return(0,l.Y)(l.FK,{children:(0,l.Y)(eu.w,{id:"privateDeployments",title:(0,l.FD)(l.FK,{children:[(0,l.FD)(F.S,{css:eO.titleRow,row:!0,children:[(0,l.Y)(q.EY,{color:"dimmer",children:"Private Deployment"}),p?(0,l.Y)(eN.A,{plan:"Teams",size:"small",tooltipProps:{description:"Private Deployments are only available on Replit ".concat(eF.$B,".")}}):null]}),(0,l.FD)(q.EY,{variant:"small",color:"dimmest",children:[p?(0,l.Y)(l.FK,{children:"Limit deployment access to team members."}):(0,l.FD)(l.FK,{children:["Limit deployment access to team members who have edit access.",r?" Visibility changes apply after next deployment.":""]}),(0,l.Y)("a",{target:"_blank",href:"https://docs.replit.com/cloud-services/deployments/private-deployments",children:"Learn more"})]})]}),children:(0,l.Y)(T.m_,{isDisabled:!f,tooltip:c?"Private deployments are required for this organization.":"Only admins can deploy public apps.",children:(0,l.Y)(eU.d,{"aria-label":"Private Deployments",isSelected:n||!!f,isReadOnly:!!f,onChange:function(e){t(e)}})})})})}var eH=t(68264),eB=t(4729),ez=t(59318),eW=t(17844),eG=t(93629),eV=t(23972),eZ=t(96907),ej=t.n(eZ),eq=t(71449),eK=t(37252),e$=t(27789),eJ=t(48604),eQ=(0,E.x)({self:{ul:{maxHeight:"300px"}},select:[I.wp.border()],error:[I.wp.color.accentNegativeStronger],button:[I.wp.reset.button,I.wp.viewStyle,R.b.nofill,I.wp.align.center,I.wp.display.inlineFlex,{borderColor:R.b.outlined.borderColor}],popover:[I.wp.width("max-content"),I.wp.overflow("auto"),I.wp.p(1),I.wp.minWidth(240)],listbox:[I.wp.maxHeight(300),I.wp.minWidth(300),I.wp.overflow("auto")],dropdownItemAndContainer:[I.wp.flex.row,I.wp.align.center,R.b.listItem,I.wp.px(8),I.wp.py(4)],selectedTimezoneCode:[I.wp.textAlign.left,I.wp.rowWithGap(8)],timezoneCode:[I.wp.textAlign.left,I.wp.rowWithGap(8)],header:[I.wp.pt(8),I.wp.px(8),I.wp.pb(4),I.wp.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(H.LU.outlineDimmest)}],search:[{borderBottom:"1px solid ".concat(H.LU.outlineDimmest)}],searchInput:[I.wp.width("100%")],dropdownHeader:[I.wp.fontWeight.medium],loading:[I.wp.maxWidth(70),B.S.backgroundPulse(H.LU.backgroundHighest,H.LU.backgroundHigher)]});function eX(e){var n=e.initialTimezone,t=e.onChange,r=e.loading,o=e.error,a=(0,i._)((0,u.useState)(),2),s=a[0],c=a[1],d=(0,u.useId)();return(0,u.useEffect)(function(){if(!r){if(n&&!s)return void c(n);if(!s&&!n){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if((0,h._j)(e)){t(e),c(e);return}var i="America/Los_Angeles";i&&(t(i),c(i))}}},[t,s,n,r]),(0,l.FD)(F.S,{css:eQ.self,children:[r||!s?(0,l.Y)(V.pd,{css:eQ.loading,disabled:!0}):(0,l.Y)(e7,{selectedTzCode:s,onSelectionChange:function(e){"string"==typeof e&&(t(e),c(e))},css:eQ.select}),o?(0,l.Y)(F.S,{css:eQ.error,"aria-live":"polite","aria-atomic":"true",id:d,children:(0,l.Y)("span",{children:o})}):null]})}var e0=(0,E.x)({self:[eQ.dropdownItemAndContainer,I.wp.justify.spaceBetween,{backgroundColor:H.LU.interactiveBackground}]});function e1(e){var n=e.title;return(0,l.FD)(F.S,{px:8,py:4,justify:"space-between",align:"center",row:!0,gap:8,children:[(0,l.Y)(F.S,{css:eQ.selectedTimezoneCode,align:"center",children:(0,l.Y)(q.EY,{variant:"text",color:"dimmer",children:n})}),(0,l.Y)(e$.A,{})]})}function e2(e){var n=e.tzCode,t=e.selected;return(0,l.FD)(F.S,{css:t?e0.self:eQ.dropdownItemAndContainer,children:[(0,l.Y)(F.S,{css:eQ.timezoneCode,align:"center",children:(0,l.Y)(q.EY,{variant:"text",color:t?"default":"dimmer",children:n.replace(/_/g," ").replace(/\//g,", ")})}),(0,l.Y)(F.S,{align:"center",row:!0,children:t?(0,l.Y)(K.A,{size:16}):null})]})}var e4=(0,E.x)({self:[eQ.button,I.wp.align.center,I.wp.px(8),I.wp.py(4),(0,ey._)({},I.$_.min("mobileMax"),[I.wp.rowWithGap(4)])]});function e5(e){return e.toLowerCase().replaceAll("_"," ")}var e3=eq.m.map(function(e){var n=e.value,t=e.abbr,r=e.utc,i=e5(n),a=e5(t),l=r.map(function(e){return{tzCode:e,normalizedUtcValue:e5(e)}});return(0,eG._)((0,eW._)({},e),{normalizedValue:i,normalizedAbbr:a,normalizedUtc:l,searchableText:e5([e.value,e.abbr].concat((0,o._)(e.utc)).join(" "))})});function e7(e){var n=e.selectedTzCode,t=e.onSelectionChange,r=(0,i._)((0,u.useState)(""),2),o=r[0],a=r[1],s=(0,i._)((0,u.useState)(eq.m),2),c=s[0],d=s[1],p=(0,i._)((0,u.useState)(eq.m.find(function(e){return e.utc.includes(n)})),2),f=p[0],h=p[1];(0,u.useEffect)(function(){h(eq.m.find(function(e){return e.utc.includes(n)}))},[n]);var m=ej()(function(e){d(function(e){if(!e)return eq.m;var n=e5(e);return e3.map(function(t){var r=0,i=t.searchableText,o=t.normalizedValue,a=t.normalizedAbbr,l=t.normalizedUtc,s=t.utc;if(i.includes(n)){o.includes(n)&&(r+=10/(o.indexOf(n)+1)),a.includes(n)&&(r+=8/(a.indexOf(n)+1));var c=s;return l.some(function(e){return e.normalizedUtcValue.includes(n)})&&(r+=5,e.length>=3&&(c=l.map(function(e){var t=e.tzCode,r=e.normalizedUtcValue;return r.includes(n)?{tzCode:t,utcScore:5/(r.indexOf(n)+1)}:{tzCode:t,utcScore:0}}).sort(function(e,n){return n.utcScore-e.utcScore}).map(function(e){return e.tzCode}))),(0,eG._)((0,eW._)({},t),{utc:c,score:r})}return(0,eG._)((0,eW._)({},t),{score:0})}).filter(function(e){return e.score>0}).sort(function(e,n){return n.score-e.score})}(e))},100),g=function(e){a(e),m(e)};return(0,l.FD)(eH.l6,{onSelectionChange:t,"aria-label":"Timezone Select",children:[f?(0,l.Y)(eB.$,{css:eQ.button,children:(0,l.Y)(e1,{title:f.abbr})}):(0,l.Y)(T.m_,{tooltip:"Could not detect valid timezone. Please try again, or contact support.",children:(0,l.FD)(eB.$,{css:e4.self,children:[(0,l.Y)(q.EY,{color:"dimmer",children:"Select"}),(0,l.Y)(eJ.A,{})]})}),(0,l.FD)(eK.g_,{css:eQ.popover,background:"default",placement:"bottom right",children:[(0,l.Y)(F.S,{css:eQ.search,p:8,children:(0,l.Y)(V.pd,{css:eQ.searchInput,value:o,onChange:function(e){return g(e.target.value)},placeholder:"Search"})}),(0,l.Y)(ez.qF,{css:eQ.listbox,children:c.map(function(e){var t=e.value,r=e.abbr,i=e.utc;return(0,l.FD)(ez.rd,{children:[(0,l.Y)(eV.Y,{css:eQ.header,children:(0,l.FD)(q.EY,{variant:"small",color:"dimmest",css:eQ.dropdownHeader,children:[t," (",r,")"]})}),i.map(function(e){return(0,l.Y)(ez.nh,{id:e,textValue:e,children:(0,l.Y)(e2,{tzCode:e,selected:e===n})},e)})]},t)})})]})]})}var e6=t(68682),e8=t(8950),e9=t(71355),ne=t(67917),nn=t(73176),nt=t(66297),nr=t(17089),ni={scheduleToCronExpression:{inputTarget:e8.Hnw.ENGLISH,outputTarget:e8.Hnw.CRON},cronExpressionToSchedule:{inputTarget:e8.Hnw.CRON,outputTarget:e8.Hnw.ENGLISH}},no=function(e){var n,t,o,l,s,c,d,p,f,h,m,g,v,y,w,b=e.type,S=e.onTranslation,Y=e.onError,_=(0,u.useRef)(null),A=(0,i._)((0,u.useState)(!1),2),C=A[0],k=A[1],x=function(e,n){(0,nt.Q)({error:Error(e),context:"useScheduledMachineConfigurationTranslator"}),Y(n||e)},D=(o=(n={onTranslation:function(e,n,t){if(!C&&(_.current&&clearTimeout(_.current),n)){if(!e)return void S("Unable to derive valid translation from description");var r,i=(r=e.match(/`([^`]+)`(?=[^`]*$)/))?r[1]:null;if(!i||"scheduleToCronExpression"===b&&!(0,e6.isValidCron)(i))return void S("Unable to derive valid Cron expression from description");S(i),(0,nr.u4)(nr.AZ.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:b,translation:e,prompt:t})}},onError:function(e){return x(e,"Error translating description")}}).onTranslation,l=n.onError,s=(0,ne.NC)(),d=(c=(0,i._)((0,u.useState)(!1),2))[0],p=c[1],h=(f=(0,i._)((0,u.useState)(null),2))[0],m=f[1],g=(0,u.useRef)(""),v=(0,u.useCallback)((t=(0,r._)(function(e){var n;return(0,a.YH)(this,function(t){switch(t.label){case 0:return p(!0),g.current=e.content,[4,s.sessions.create({sessionType:e8.dF3.SINGLE_USE_SESSION})];case 1:if(!(n=t.sent()).ok)return p(!1),l("Failed to create session"),[2];return m(n.payload),[4,n.payload.appendEvent({kind:"translate",content:e.content,inputTarget:e.inputTarget,outputTarget:e.outputTarget,modelType:e8.e3q.BASIC})];case 2:return t.sent().ok||(p(!1),l("Failed to send translation request")),[2]}})}),function(e){return t.apply(this,arguments)}),[s.sessions,l]),y=(0,u.useMemo)(function(){return null==h?void 0:h.reduce(na,"global").result},[h]),(0,nn.q3)(y,{next:function(e){(null==e?void 0:e.completed)&&d&&p(!1),(null==e?void 0:e.code)&&o(e.code,e.completed,g.current)}}),{sendMessage:v,loading:d}),E=D.sendMessage,R=D.loading,I=(w=(0,r._)(function(e){var n;return(0,a.YH)(this,function(t){return(_.current&&clearTimeout(_.current),e)?"cronExpressionToSchedule"!==b||(0,e6.isValidCron)(e)?(n=ni[b],E((0,eG._)((0,eW._)({},n),{content:e})),_.current=setTimeout(function(){k(!0),x("Translation timed out")},8e3)):S("Invalid cron expression"):S(""),[2]})}),function(e){return w.apply(this,arguments)});return(0,u.useEffect)(function(){return function(){_.current&&clearTimeout(_.current)}},[_]),{translate:I,loading:R}},na={direction:"reverse",state:{code:null,completed:!1},reducer:function(e,n){(0,e9.VF)(e.contents.contents,"messageEventContents")&&e.sender.type===e8.utd.AI&&(n.code=(0,e9.QN)(e.contents.contents).content,n.completed=e.state===e8.qOk.COMPLETE&&!!n.code)}};function nl(){return(0,l.FD)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.Y)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.97978 15.6465C2.78451 15.8417 2.78451 16.1583 2.97978 16.3536L7.64644 21.0202C7.8417 21.2155 8.15829 21.2155 8.35355 21.0202C8.54881 20.825 8.54881 20.5084 8.35355 20.3131L4.54044 16.5L9.66666 16.5C9.9428 16.5 10.1667 16.2762 10.1667 16C10.1667 15.7239 9.9428 15.5 9.66666 15.5L4.54044 15.5L8.35355 11.6869C8.54881 11.4916 8.54881 11.1751 8.35355 10.9798C8.15829 10.7845 7.8417 10.7845 7.64644 10.9798L2.97978 15.6465Z",fill:H.LU.blurpleStronger}),(0,l.Y)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3889 12.2661C16.259 11.9113 15.741 11.9113 15.6111 12.2661L14.7182 14.7055C14.675 14.8237 14.577 14.9153 14.4536 14.9531L12.2883 15.6156C11.9044 15.7331 11.9037 16.2592 12.2873 16.3776L14.4544 17.0466C14.5773 17.0846 14.6749 17.1761 14.718 17.2939L15.6111 19.7339C15.741 20.0887 16.259 20.0887 16.3889 19.7339L17.2819 17.2942C17.3251 17.1762 17.4228 17.0846 17.546 17.0468L19.7122 16.381C20.0959 16.263 20.0959 15.737 19.7122 15.619L17.546 14.9532C17.4228 14.9154 17.3251 14.8238 17.2819 14.7058L16.3889 12.2661Z",fill:H.LU.blurpleStronger}),(0,l.Y)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M29.0202 15.6465C29.2155 15.8417 29.2155 16.1583 29.0202 16.3536L24.3536 21.0202C24.1583 21.2155 23.8417 21.2155 23.6465 21.0202C23.4512 20.825 23.4512 20.5084 23.6465 20.3131L27.4596 16.5L22.3333 16.5C22.0572 16.5 21.8333 16.2762 21.8333 16C21.8333 15.7239 22.0572 15.5 22.3333 15.5L27.4596 15.5L23.6465 11.6869C23.4512 11.4916 23.4512 11.1751 23.6465 10.9798C23.8417 10.7845 24.1583 10.7845 24.3536 10.9798L29.0202 15.6465Z",fill:H.LU.blurpleStronger})]})}var ns=I.kL.min(480),nc=(0,E.x)({cronConfig:[(0,ey._)({},ns,[I.wp.colWithGap(0),I.wp.rowWithGap(8),I.wp.align.start])],crontabLabeledInput:[I.wp.flex.growAndShrink(1),I.wp.maxWidth(128)],translationSwitch:[I.wp.mb(4),(0,ey._)({transform:"rotate(90deg)",alignSelf:"flex-start"},ns,{transform:"rotate(0deg)",marginBottom:0,paddingTop:30})],translationSwitchIcon:[I.wp.height(32),I.wp.width(32),I.wp.center],timezoneSelect:[I.wp.flex.shrink(1),(0,ey._)({minWidth:75},ns,{paddingTop:30})],timeoutConfig:[I.wp.width("100%"),I.wp.align.start,I.wp.pb(8)],selectedTimeoutUnits:[I.wp.textAlign.left,I.wp.rowWithGap(8)],button:[I.wp.reset.button,I.wp.viewStyle,R.b.nofill,I.wp.align.center,I.wp.display.inlineFlex,{borderColor:R.b.outlined.borderColor},I.wp.minWidth(100)],timeoutUnitsDropdown:[I.wp.ml(4)],dropdownItemAndContainer:[I.wp.flex.row,I.wp.align.center,R.b.listItem,I.wp.px(8),I.wp.py(4)],dropdownItem:[I.wp.textAlign.left,I.wp.rowWithGap(8)],popover:[I.wp.width("max-content"),I.wp.overflow("auto"),I.wp.p(1),I.wp.minWidth(120)]}),nu=(0,E.x)({self:[nc.dropdownItemAndContainer,I.wp.justify.spaceBetween,{backgroundColor:H.LU.interactiveBackground}]}),nd=["minutes","hours"];function np(e,n){var t=parseInt(e,10);if(!isNaN(t))if("hours"===n.toLowerCase())return 3600*t;else return 60*t;return 0}function nf(e){return/^\d+$/.test(e.trim())&&!isNaN(parseInt(e,10))}function nh(e,n){return nf(e)&&np(e,n)>86400}function nm(e){var n=e.title;return(0,l.FD)(F.S,{px:8,py:4,justify:"space-between",align:"center",row:!0,gap:8,children:[(0,l.Y)(F.S,{css:nc.selectedTimeoutUnits,align:"center",children:(0,l.Y)(q.EY,{variant:"text",color:"dimmer",children:n})}),(0,l.Y)(e$.A,{})]})}function ng(e){var n=e.item,t=e.selected;return(0,l.FD)(F.S,{css:t?nu.self:nc.dropdownItemAndContainer,children:[(0,l.Y)(F.S,{css:nc.dropdownItem,align:"center",children:(0,l.Y)(q.EY,{variant:"text",color:t?"default":"dimmer",children:n})}),(0,l.Y)(F.S,{align:"center",row:!0,children:t?(0,l.Y)(K.A,{size:16}):null})]})}function nv(e){var n=e.callback,t=e.delay,r=(0,u.useRef)();return(0,u.useEffect)(function(){return function(){r.current&&clearTimeout(r.current)}},[]),{callerFunction:function(e){r.current&&clearTimeout(r.current),r.current=setTimeout(function(){return n(e)},t)}}}function ny(e){var n=e.crontab,t=e.setCrontab,r=e.crontabError,o=e.timezone,a=e.setTimezone,s=e.timezoneError,c=e.loading,d=void 0!==c&&c,p=e.timeoutValue,f=e.setTimeoutValue,h=e.timeoutUnits,m=e.setTimeoutUnits,g=e.setTimeoutValueError,v=(0,i._)((0,u.useState)(!1),2),y=v[0],w=v[1],b=(0,i._)((0,u.useState)(null),2),S=b[0],Y=b[1],_=(0,i._)((0,u.useState)(null),2),A=_[0],C=_[1],k=(0,i._)((0,u.useState)("scheduleToCronExpression"),2),x=k[0],D=k[1],E="scheduleToCronExpression"===x,R="cronExpressionToSchedule"===x,I=no({type:x,onTranslation:function(e){w(!1),E?t(e):R&&C(e)},onError:function(e){w(!1),Y(e)}}),P=I.translate,L=I.loading,U=nv({callback:function(e){return P(e)},delay:3e3}).callerFunction,N=nv({callback:w,delay:500}).callerFunction,O=function(e,n){switch(n){case"scheduleToCronExpression":C(e);break;case"cronExpressionToSchedule":t(e)}M&&w(!1),""!==e&&null!==e&&(N(!0),U(e))},M=L||y;if((0,u.useEffect)(function(){g(!nf(p)||nh(p,h))},[p,h,g]),S)return(0,l.FD)(F.S,{children:[(0,l.Y)(F.S,{css:nc.crontabLabeledInput,children:(0,l.Y)(eo.K,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",warning:"".concat(S,". Enter valid Cron expression."),grow:!0,children:(0,l.Y)(ee,{id:"cronExpression",value:n,placeholder:"* * * * *",loading:d,disabled:!1,onChange:t,error:r})})}),(0,l.Y)(F.S,{css:nc.timezoneSelect,children:(0,l.Y)(eX,{initialTimezone:o,onChange:a,error:s,loading:d})})]});var B="";return nf(p)?nh(p,h)&&(B="Please enter a value less than the maximum of 24 hours"):B="Please enter a positive whole number",(0,l.FD)(F.S,{children:[(0,l.FD)(F.S,{css:nc.cronConfig,grow:!0,shrink:!0,pb:16,gap:8,children:[(0,l.Y)(F.S,{grow:!0,shrink:!0,children:(0,l.Y)(eo.K,{id:"schedule",title:"Schedule description",information:"Describe when you want your scheduled deployment to run",grow:!0,children:(0,l.Y)(ee,{id:"describeSchedule",value:A,placeholder:n?"":"Every day at 3:00 AM",loading:d,disabled:M&&!E,onChange:function(e){return O(e,"scheduleToCronExpression")},onFocus:function(){return D("scheduleToCronExpression")}})})}),(0,l.Y)(F.S,{css:nc.translationSwitch,shrink:!0,children:(0,l.Y)(T.m_,{tooltip:"When you type, Replit AI will translate between these properties",children:(0,l.Y)(F.S,{css:nc.translationSwitchIcon,children:M?(0,l.Y)(J.A,{color:H.LU.blurpleStronger}):(0,l.Y)(nl,{})})})}),(0,l.Y)(F.S,{css:nc.crontabLabeledInput,children:(0,l.Y)(eo.K,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",grow:!0,children:(0,l.Y)(ee,{id:"cronExpression",value:n,placeholder:"* * * * *",loading:d,disabled:M&&!R,onChange:function(e){return O(e,"cronExpressionToSchedule")},onFocus:function(){return D("cronExpressionToSchedule")},error:r})})}),(0,l.Y)(F.S,{css:nc.timezoneSelect,children:(0,l.Y)(eX,{initialTimezone:o,onChange:a,error:s,loading:d})})]}),(0,l.Y)(F.S,{css:nc.timeoutConfig,grow:!0,shrink:!0,row:!0,children:(0,l.Y)(eo.K,{id:"timeout",title:"Job timeout",information:"The maximum amount of time each execution of your scheduled job will run before being stopped",grow:!0,children:(0,l.FD)(F.S,{row:!0,children:[(0,l.Y)(ee,{id:"timeoutValue",value:p,placeholder:"",loading:d,disabled:!1,onChange:function(e){return f(null!=e?e:"")},error:B,type:"number"}),(0,l.FD)(eH.l6,{css:nc.timeoutUnitsDropdown,defaultSelectedKey:nd[0],selectedKey:h,onSelectionChange:function(e){return m(e.toString())},children:[(0,l.Y)(eB.$,{css:nc.button,children:(0,l.Y)(nm,{title:h})}),(0,l.Y)(eK.g_,{css:nc.popover,background:"default",placement:"bottom right",children:(0,l.Y)(ez.qF,{children:nd.map(function(e){return(0,l.Y)(ez.nh,{id:e,textValue:e,children:(0,l.Y)(ng,{item:e,selected:e===h})},e)})})})]})]})})})]})}var nw=t(86891),nb=t(93067),nS=t(75174),nY=t(85144),n_=t(8486),nA=t(6064);function nC(){return(nC=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,d,p,f,h,m,v,y,w;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],t=!0,r=!1,i=void 0,a.label=1;case 1:a.trys.push([1,6,7,8]),o=n[Symbol.iterator](),a.label=2;case 2:if(t=(l=o.next()).done)return[3,5];return s=l.value,[4,e.stat(s)];case 3:if(!((c=a.sent()).exists&&c.type===g.pt.File))return[3,4];return[2,"dist"];case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return u=a.sent(),r=!0,i=u,[3,8];case 7:try{t||null==o.return||o.return()}finally{if(r)throw i}return[7];case 8:d=["dist","build","public"],p=!0,f=!1,h=void 0,a.label=9;case 9:a.trys.push([9,14,15,16]),m=d[Symbol.iterator](),a.label=10;case 10:if(p=(v=m.next()).done)return[3,13];return y=v.value,[4,e.stat(y)];case 11:if(!((w=a.sent()).exists&&w.type===g.pt.Directory))return[3,12];return[2,y];case 12:return p=!0,[3,10];case 13:return[3,16];case 14:return u=a.sent(),f=!0,h=u,[3,16];case 15:try{p||null==m.return||m.return()}finally{if(f)throw h}return[7];case 16:return[2]}})})).apply(this,arguments)}function nk(e){var n=e.replId,t=e.isNewDeployment,o=e.provider,l=e.fs,s=e.secrets,c=e.onOptions,d=e.onError,p=e.dotReplit,h=e.currentBuild,m=(0,i._)((0,u.useState)(!0),2),g=m[0],v=m[1],y=(0,x.A)(d),w=(0,x.A)(c),b=(0,ea.Gx)({secrets:s,replId:n});return(0,u.useEffect)(function(){var e=!1;function n(){return(n=(0,r._)(function(){var n,r,s,c,u,d,m,g,y,S;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=f.JX5.Server,r=null,s=null,c=null,u=null,[4,Promise.all([t?b():Promise.resolve(null!=(d=null==h?void 0:h.envVars)?d:[]),(0,ea.XE)(p)])];case 1:if(g=(m=i._.apply(void 0,[a.sent(),2]))[0],y=m[1],e)return[2];if(t)switch(o){case f.Q0q.Gce:n=y.ignorePorts?f.JX5.Worker:f.JX5.Server;break;case f.Q0q.CloudRun:n=f.JX5.CloudRun;break;case f.Q0q.Static:n=f.JX5.Static;break;case f.Q0q.Cron:n=f.JX5.Cron}else y.appType&&(n=y.appType);if(s=y.buildCommand,n===f.JX5.Static)return[3,2];return r=y.runCommand,[3,5];case 2:if(!y.publicDir)return[3,3];return c=y.publicDir,[3,5];case 3:return[4,function(e){return nC.apply(this,arguments)}(l)];case 4:(S=a.sent())&&(c=S),a.label=5;case 5:return o===f.Q0q.Gce&&(u=y.ignorePorts),w.current({appType:n,envVars:g,buildCommand:s,runCommand:r,publicDir:c,ignorePorts:u}),v(!1),[2]}})})).apply(this,arguments)}try{!function(){n.apply(this,arguments)}()}catch(e){y.current(e.message),v(!1)}return function(){e=!0}},[o,l,p,y,w,t,b,h]),{loading:g}}var nx=(0,E.x)({self:I.wp.colWithGap(16),footer:I.wp.colWithGap(0),deployButton:I.wp.flex.grow(1),statusBanner:[I.wp.textBalance,I.wp.flex.shrink(1)]}),nD=function(e){var n,t,s,g,A,C,x=e.deploymentId,D=e.replId,E=e.initialSubdomain,R=e.provider,I=e.machine,P=e.secrets,U=e.fs,N=e.ports,O=e.dotReplit,M=e.onDeploy,H=e.onCancel,B=e.onError,z=e.initialSecretsSyncExpanded,W=e.openNetworkingPane,G=e.hasAgentSession,V=e.onViewAction,j=(0,b.u)(),K=(0,w.Tp)().deployBuild,$=(0,nw.R)(D).orgId,Q=(0,k._P)({controlName:"flag-security-scanning"}),X=(0,_.n)(),en=(0,p.HT)({skip:!x,variables:{id:null!=x?x:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var n,t=(null==(r=e.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?e.hostingDeployment:null;if(t){if(t.replitAppSubdomain&&(eO(t.replitAppSubdomain),ez(!0)),t.currentBuild.machineJob&&(e0(t.currentBuild.machineJob.timezone),e7(t.currentBuild.machineJob.crontab),t.currentBuild.machineJob.timeoutSeconds)){var r,i,a,l=t.currentBuild.machineJob.timeoutSeconds;l%3600==0?(i=l/3600,a="Hours"):(i=Math.floor(l/60),a="Minutes"),ng(i.toString()),nD(a)}var s=t.currentBuild.envVars.map(function(e){return{name:e.name,value:e.value}}),c=new Set(s.map(function(e){return e.name})),u=h.dz>new Date(t.currentBuild.timeCreated)&&h.dz>new Date(t.timeCreated)?(0,o._)(c):null!=(n=t.ignoredSecrets)?n:[];nt(s),em(u),null!=t.currentBuild.isPrivate&&nP(t.currentBuild.isPrivate)}}}),ea=en.data,ec=en.loading,eu=(0,p.TO)({variables:{replId:D}}).data,ed=(null==ea||null==(g=ea.hostingDeployment)?void 0:g.__typename)==="HostingDeployment"?ea.hostingDeployment:null,ef=(0,i._)((0,u.useState)(null!=(A=null==ed?void 0:ed.ignoredSecrets)?A:[]),2),eh=ef[0],em=ef[1],ey=nk({replId:D,provider:R,fs:U,secrets:P,dotReplit:O,isNewDeployment:!x,onError:B,currentBuild:null==ed?void 0:ed.currentBuild,onOptions:function(e){e.appType&&eL(e.appType),nt(e.envVars),e.ignorePorts&&no(e.ignorePorts),e.buildCommand&&eV(e.buildCommand),e.runCommand&&eq(e.runCommand),e.publicDir&&ns(e.publicDir)}}).loading,ew=null==ed?void 0:ed.currentBuild,eb=void 0!==ew,eS=(null==eu?void 0:eu.getRepl.__typename)==="Repl"?eu.getRepl.authorizations:void 0,eY=null==eS?void 0:eS.editDeploymentSecrets,e_=null==eS?void 0:eS.editSecrets,eA=(0,v.GK)(),eC=eA.loading,ek=eA.database,ex=(0,v.UK)(),eD=ex.loading,eE=ex.database,eR=!eC&&!!ek,eI=!eD&&!!eE,eF=(0,i._)((0,u.useState)(f.JX5.Server),2),eP=eF[0],eL=eF[1],eU=(0,i._)((0,u.useState)(E),2),eN=eU[0],eO=eU[1],eH=(0,i._)((0,u.useState)(!1),2),eB=eH[0],ez=eH[1],eW=(0,i._)((0,u.useState)(null),2),eG=eW[0],eV=eW[1],eZ=(0,i._)((0,u.useState)(null),2),ej=eZ[0],eq=eZ[1],eK=(0,i._)((0,u.useState)(void 0),2),e$=eK[0],eJ=eK[1],eQ=(0,i._)((0,u.useState)(null),2),eX=eQ[0],e0=eQ[1],e1=(0,i._)((0,u.useState)(void 0),2),e2=e1[0],e4=e1[1],e5=(0,i._)((0,u.useState)(null),2),e3=e5[0],e7=e5[1],e6=(0,i._)((0,u.useState)(void 0),2),e8=e6[0],e9=e6[1],ne=(0,i._)((0,u.useState)(null!=(C=null==ew?void 0:ew.envVars.map(function(e){return{name:e.name,value:e.value}}))?C:[]),2),nn=ne[0],nt=ne[1],nr=(0,i._)((0,u.useState)(!1),2),ni=nr[0],no=nr[1],na=(0,i._)((0,u.useState)(null),2),nl=na[0],ns=na[1],nc=(0,i._)((0,u.useState)(void 0),2),nu=nc[0],nf=nc[1],nh=(0,i._)((0,u.useState)("10"),2),nm=nh[0],ng=nh[1],nv=(0,i._)((0,u.useState)(nd[0]),2),nC=nv[0],nD=nv[1],nE=(0,i._)((0,u.useState)(!1),2),nR=nE[0],nI=nE[1],nT=(0,i._)((0,u.useState)(!!$&&R!==f.Q0q.Cron),2),nF=nT[0],nP=nT[1],nL=(0,i._)((0,u.useState)((0,es.q)({flagHasNeonProductionDatabases:X,hasNeonProductionDatabase:eI,hasNeonDevelopmentDatabase:eR,isRedeploy:eb})),2),nU=nL[0],nN=nL[1],nO=(0,el.g)({secrets:P,replId:D}).devSecrets;(0,u.useEffect)(function(){(0,Y.Ae)({context:"deploy_options"})},[]);var nM=(0,u.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,t=e.value;nt(function(e){return(0,d.jM)(e,function(e){e.push({name:null!=n?n:"",value:null!=t?t:""})})})},[nt]),nH=function(e,n){nt(function(t){return(0,d.jM)(t,function(t){t[e].name=n})})},nB=function(e,n){nt(function(t){return(0,d.jM)(t,function(t){t[e].value=n})})},nz=function(e){nt(function(n){return(0,d.jM)(n,function(n){n.splice(e,1)})})},nW=eP!==f.JX5.Static,nG=R===f.Q0q.Gce,nV=eP===f.JX5.Static,nZ=R!==f.Q0q.Cron&&!(null==ed?void 0:ed.replitAppSubdomain),nj=R===f.Q0q.Cron,nq=eP===f.JX5.Server||eP===f.JX5.CloudRun,nK=R!==f.Q0q.Cron,n$=(n=(0,r._)(function(){var e,n,t,r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=(!nZ||eB)&&eN.length?eN:void 0,i=null!=(r=null==ed||null==(n=ed.currentBuild)||null==(e=n.machineJob)?void 0:e.failureNotifications)&&r,!t)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,K({ignoredSecrets:eh,envVars:nn.filter(function(e){return(0,m.zV)(e)}),subdomain:t,machineConfigurationId:(null==I?void 0:I.configurationId)||void 0,maxMachineInstances:(null==I?void 0:I.maxInstances)||void 0,machineJob:eX&&e3?{timezone:eX,crontab:e3,timeoutSeconds:np(nm,nC),failureNotifications:i}:void 0,config:{buildCommand:eG,runCommand:ej,appType:eP,ignorePorts:ni,publicDir:nl},isPrivate:nF,hasAgentSession:G,createNeonProductionDatabase:nU})];case 2:return a.sent(),M(),[3,4];case 3:if((o=a.sent())instanceof y.kS)return eJ("Run command cannot be empty."),[2];if(o instanceof y.uF)return nf("Public directory cannot be empty."),[2];if(o instanceof y.xF)return e4(o.message||"Invalid timezone."),[2];if(o instanceof y.f_)return e9(o.message||"Invalid crontab."),[2];return B(o.message),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),nJ=(0,i._)((0,u.useState)(!1),2),nQ=nJ[0],nX=nJ[1],n0=(0,i._)((0,u.useState)(!1),2),n1=n0[0],n2=n0[1],n4=function(e){em(function(n){return(0,o._)(n).concat([e])})},n5=function(e){nO&&nO.has(e)||em(function(n){return n.filter(function(n){return n!==e})})},n3=(t=(0,r._)(function(e){var n,t;return(0,a.YH)(this,function(r){return!((n=nn.findIndex(function(n){return n.name===e}))<0)&&nO&&nO.has(e)&&(t=nO.get(e),c()(t),em(function(n){return n.filter(function(n){return n!==e})}),nt(function(r){return(0,o._)(r.slice(0,n)).concat([{name:e,value:t}],(0,o._)(r.slice(n+1)))})),[2]})}),function(e){return t.apply(this,arguments)}),n7=(0,(0,w.mj)().getDeployabilityByProvider)(R,nF),n6=eb?n7.redeploy.isAuthorized:n7.deploy.isAuthorized,n8=ec||ey||j===S.d.Preparing||nR,n9=n8||!n6,te=nn.map(function(e){return e.name}),tn=(s=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return nX(!0),[4,P.addEntries(nn.map(function(e){return{key:e.name,value:e.value}}))];case 1:return e.sent(),nX(!1),n2(!1),[2]}})}),function(){return s.apply(this,arguments)}),tt=ey?(0,l.FD)(l.FK,{children:[(0,l.Y)(eo.r,{}),(0,l.Y)(eo.r,{}),(0,l.Y)(eo.r,{})]}):(0,l.FD)(l.FK,{children:[nj?(0,l.Y)(ny,{crontab:e3,setCrontab:e7,crontabError:e8,timezone:eX,setTimezone:e0,timezoneError:e2,loading:ec,timeoutValue:nm,setTimeoutValue:ng,timeoutUnits:nC,setTimeoutUnits:nD,setTimeoutValueError:nI}):null,nZ?(0,l.Y)(eo.K,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,l.Y)(er,{id:"primaryDomain",subdomain:eN,deploymentId:x||void 0,onChange:eO,updateValidity:ez})}):null,nK?(0,l.Y)(eM,{isPrivate:nF,setIsPrivate:nP,isRedeploy:eb}):null,nV?(0,l.Y)(eo.K,{id:"publicDir",title:"Public directory",information:"The public directory is the folder where the browser should start when serving your static site",children:(0,l.Y)(ee,{id:"publicDir",value:nl,onChange:ns,loading:ey,disabled:n8,error:nu})}):null,(0,l.Y)(eo.K,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,l.Y)(ee,{id:"buildCommand",value:eG,onChange:eV,loading:ey,disabled:n8})}),nW?(0,l.Y)(eo.K,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,l.Y)(ee,{id:"runCommand",value:ej,onChange:eq,loading:ey,disabled:n8,error:e$})}):null,X?(0,l.Y)(es.A,{createDatabase:nU,setCreateDatabase:nN,hasNeonProductionDatabase:eI,hasNeonDevelopmentDatabase:eR,isRedeploy:eb}):null,(0,l.FD)(eo.K,{id:"envVars",title:"Deployment secrets",information:"Secrets, or environment variables, are private keys you can use to access APIs and services",children:[$?(0,l.Y)(Z.N,{icon:(0,l.Y)(L.A,{}),css:nx.statusBanner,colorway:"primary",text:"Secrets now sync automatically with your team's deployments. "+"Deployment secrets added before ".concat((0,nb.r)(h.dz.toISOString())," ")+"remain unchanged to avoid disrupting existing workflows. Manage syncing below."}):null,(0,l.FD)(F.S,{gap:12,children:[nn.length>0?nn.map(function(e,n){var t=e.name,r=e.value;return(0,l.Y)(et,{index:n,name:t,value:r,updateEnvVarName:function(e){return nH(n,e)},updateEnvVarValue:function(e){return nB(n,e)},removeEnvVar:function(){return nz(n)},disabled:n8,otherKeys:te.filter(function(e,t){return t!==n}),devSecrets:nO,ignoredSecrets:eh,canEditDevSecretsDisabledMessage:(null==e_?void 0:e_.isAuthorized)===!1?e_.message:void 0,canEditDeploySecretsDisabledMessage:(null==eY?void 0:eY.isAuthorized)===!1?eY.message:void 0,optOutSyncing:n4,optInSyncing:n5,syncToWorkspace:n3},n)}):null,nO&&(null==e_?void 0:e_.isAuthorized)&&(null==eY?void 0:eY.isAuthorized)?(0,l.Y)(nS.H,{secrets:new Map(nn.map(function(e){return[e.name,e.value]})),otherSecrets:nO,otherEnvName:"workspace",onAddSecret:function(e){return nM({name:e.key,value:e.value})},initialExpanded:z}):null,(0,l.Y)(T.m_,{tooltip:null==eY?void 0:eY.message,isDisabled:null==eY?void 0:eY.isAuthorized,children:(0,l.Y)(ep.$n,{onClick:function(){(0,Y.Rl)({replId:D}),nM()},text:"Add deployment secret",iconLeft:(0,l.Y)(nA.A,{}),disabled:ec||!(null==eY?void 0:eY.isAuthorized)})})]})]}),nG?(0,l.Y)(eo.K,{id:"deploymentAppType",title:"App type",information:"Configure your app based on whether it needs to serve traffic from the web.",children:(0,l.Y)(ei,{appType:eP,onChange:function(e){eL(e),no((e===f.JX5.Server||e===f.JX5.Worker)&&e===f.JX5.Worker)}})}):null,nq?(0,l.Y)(eT,{ports:N,openNetworkingPane:W}):null,Q?(0,l.Y)(eg,{onViewAction:V}):null]});return(0,l.FD)(l.FK,{children:[(0,l.FD)(F.S,{css:nx.self,children:[tt,(0,l.FD)(F.S,{css:nx.footer,children:[(0,l.Y)(ev.Y,{deployability:n7,isRedeploy:eb}),(0,l.FD)(F.S,{pt:12,row:!0,gap:8,children:[ew?(0,l.Y)(ep.$n,{text:"Cancel",onClick:H}):null,(0,l.Y)(F.S,{css:nx.deployButton,children:(0,l.Y)(ep.$n,{colorway:"primary",onClick:n$,text:j===S.d.Preparing&&"Preparing..."||ey&&"Fetching options..."||"Deploy",iconLeft:ey||j===S.d.Preparing?(0,l.Y)(J.A,{}):(0,l.Y)(n_.A,{}),disabled:n9||nZ&&!eB})})]})]})]}),(0,l.Y)(nY.a,{isOpen:n1,onRequestClose:function(){nQ||n2(!1)},children:(0,l.FD)(F.S,{gap:8,children:[(0,l.Y)(q.EY,{variant:"subheadBig",children:"Copy secrets from Deployment to Development?"}),(0,l.Y)(q.EY,{children:"Are you sure you want to copy all of your secrets from Deployment to Development? Secrets already present in Development will be overwritten and lost permanently."}),(0,l.FD)(F.S,{pt:8,row:!0,gap:8,justify:"end",children:[(0,l.Y)(ep.$n,{text:"Cancel",disabled:nQ,onClick:function(){n2(!1)}}),(0,l.Y)(ep.$n,{text:"Yes, copy secrets",colorway:"negative",disabled:nQ,loading:nQ,onClick:tn})]})]})})]})}},9077:(e,n,t)=>{"use strict";t.d(n,{A:()=>y});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(81073),s=t(21462),c=t(78502),u=t(39159),d=t(56965),p=t(66147),f=t(18509),h=t(27023),m=t(85389),g=t(64254).hp,v=(0,f.x)({terminalWrapper:[h.wp.overflow("hidden"),{"& .xterm":[h.wp.borderRadius(0,0,4,4)]}]});function y(e){var n,t=e.processId,f=e.openPane,h=e.maxHeight,y=e.interactive,w=void 0!==y&&y,b=(0,c.T)(),S=(0,s.useId)(),Y=(0,p.V)(),_=(0,d.Ui)({maxHeight:h,openPane:f}),A=_.visibleHeight,C=_.bufferHeight,k=_.wrapperResizeRef,x=_.xterm,D=_.xtermRef,E=(0,o._)((0,s.useState)(null),2),R=E[0],I=E[1],T=(0,s.useCallback)(function(e){return I(function(){return e}),function(){}},[]);return(0,u.b)((n=(0,i._)(function(e,n){var o,l,s,c,u,d,p,f,h,m,v,y,Y,_;return(0,a.YH)(this,function(A){switch(A.label){case 0:var C;if(o=n.signal,!b||!R||!x)return[2];s=(l=e.shellExec.connect.stream({id:t,userId:b,processViewId:S},{signal:o})).resReadable,c=l.reqWritable,u=function(e){w&&c.write({$kind:"stdin",stdin:new Uint8Array(g.from(e))})},d=x.onResize((C=(0,i._)(function(n){return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e.shellExec.resize.rpc({id:t,userId:b,processViewId:S,size:n})];case 1:return r.sent(),[2]}})}),function(e){return C.apply(this,arguments)})),p=x.onData(u),f=!1,h=!1,A.label=1;case 1:A.trys.push([1,6,7,12]),v=(0,r._)(s),A.label=2;case 2:return[4,v.next()];case 3:if(!(f=!(y=A.sent()).done))return[3,5];if(!(Y=y.value).ok){if("UNEXPECTED_DISCONNECT"===Y.payload.code||"CANCEL"===Y.payload.code||"NO_PROCESS_MATCHING_ID"===Y.payload.code||"PROCESS_IS_NOT_RUNNING"===Y.payload.code)return[3,5];throw Error("[".concat(Y.payload.code,"]: ").concat(Y.payload.message))}"output"===Y.payload.$kind&&R(Y.payload.output),A.label=4;case 4:return f=!1,[3,2];case 5:return[3,12];case 6:return _=A.sent(),h=!0,m=_,[3,12];case 7:if(A.trys.push([7,,10,11]),!(f&&null!=v.return))return[3,9];return[4,v.return()];case 8:A.sent(),A.label=9;case 9:return[3,11];case 10:if(h)throw m;return[7];case 11:return[7];case 12:return[2,function(){d.dispose(),p.dispose()}]}})}),function(e,t){return n.apply(this,arguments)}),[b,w,R,t,S,x]),(0,l.Y)(m.S,{css:v.terminalWrapper,style:{height:A,background:null==Y?void 0:Y.background},children:(0,l.Y)(d._x,{xterm:x,wrapperResizeRef:k,bufferHeight:C,setOnMessage:T,children:(0,l.Y)(d.DJ,{xtermRef:D,visibleHeight:A,maxHeight:h})})})}},9176:(e,n,t)=>{"use strict";t.d(n,{Q:()=>f,z:()=>p});var r=t(17844),i=t(93629),o=t(49069),a=t(45773),l=t(8616),s=t(40769),c=t(76484),u=t(17089);function d(e){var n=e.state.field(p);if(n){var t=n.type;return"explainCode"===t?(0,u.u4)(u.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:n.source}):"generateCode"===t?(0,u.u4)(u.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:n.source}):"transformCode"===t&&(0,u.u4)(u.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:n.source}),e.dispatch({effects:l.L.of(null)}),!0}return!1}var p=o.sU.define({create:function(){return null},update:function(e,n){if((0,c.C)(n,l.L,function(n){e=n.value?{id:n.value.id,codeReference:n.value.codeReference,type:n.value.type,source:n.value.source,loading:n.value.loading,data:n.value.data}:null}),!e||n.changes.empty)return e;var t=e.codeReference.range.indexFrom>n.newDoc.length?n.newDoc.length:n.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>n.newDoc.length?n.newDoc.length:n.changes.mapPos(e.codeReference.range.indexTo);return t>=o?null:e=(0,i._)((0,r._)({},e),{codeReference:(0,i._)((0,r._)({},e.codeReference),{range:{indexFrom:t,indexTo:o,lineFrom:n.newDoc.lineAt(t).number,lineTo:n.newDoc.lineAt(o).number}})})},provide:function(e){return[o.Nb.highest(a.w4.of([{key:"Escape",run:d}])),s.Rh.from(e,function(e){var n;return null!=(n=(null==e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)?n:null})]}}),f=o.sU.define({create:function(){return null},update:function(e,n){if(!n.state.field(p))return null;var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;s.is(l.L)&&(e=null),s.is(l.M)&&(e=s.value)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}})},9453:(e,n,t)=>{"use strict";t.d(n,{Nf:()=>l,X$:()=>c,zg:()=>s});var r=t(21462),i=t(76957),o=t(63492),a=(0,i.eU)(!1);function l(){return(0,o.h)(a)}function s(){var e=(0,o.ob)(a);return(0,r.useCallback)(function(){return e(!0)},[e])}function c(e){var n=(0,o.ob)(a),t=(0,r.useRef)(!1);(0,r.useEffect)(function(){t.current||(t.current=!0,n(e))},[n,e])}},9470:e=>{e.exports={root:"InlineVisualPreview_root__WdgQM"}},9604:(e,n,t)=>{"use strict";t.d(n,{C5:()=>y,DO:()=>M,G:()=>R,GS:()=>N,Je:()=>P,NF:()=>h,NT:()=>F,No:()=>k,Rp:()=>d,Sh:()=>E,T1:()=>S,TJ:()=>b,VW:()=>_,WM:()=>U,Yb:()=>v,ZH:()=>s,b8:()=>w,gb:()=>C,k4:()=>I,kR:()=>T,mN:()=>L,sC:()=>B,tH:()=>O,uu:()=>H,xP:()=>l,yh:()=>f});var r=t(76957),i=t(76969),o=t(42793),a=t(36937),l=[1,2,4,8],s=(0,r.eU)(i.Cz),c=(0,r.eU)(function(e){var n=e(s),t=n.costPerComputeUnitUsd*n.computeUnitsPerCpu;return[t,2*t,4*t,8*t]}),u=[[0,3],[0,4],[2,5],[3,6]],d=l.length-1,p=1/(2*d),f=(0,r.eU)(2),h=(0,r.eU)(function(e){return l[e(f)]}),m=(0,r.eU)(function(e){return e(c)[e(f)]}),g=(0,r.eU)(function(e){return u[e(f)]}),v=(0,r.eU)(0),y=(0,r.eU)(function(e){var n=e(D)[0]/d,t=e(D)[1]/d,r=0,i=0;return e(v)<n&&(r=(n-e(v))/p,i=n-p),e(v)>t&&(r=(e(v)-t)/p,i=t+p),{overage:r,point:i}}),w=(0,r.eU)(0),b=(0,r.eU)(0),S=[.5,1,2,4,8,16,32],Y=[[0,1],[0,1],[0,2],[0,3],[1,3],[2,3],[3,3]],_=S.length-1,A=1/(2*_),C=(0,r.eU)(4),k=(0,r.eU)(function(e){return S[e(C)]}),x=(0,r.eU)(function(e){var n=e(s).costPerComputeUnitUsd;return e(L)*n}),D=(0,r.eU)(function(e){return Y[e(C)]}),E=(0,r.eU)(0),R=(0,r.eU)(function(e){var n=e(g)[0]/_,t=e(g)[1]/_,r=0,i=0;return e(E)<n&&(r=(n-e(E))/A,i=n-A),e(E)>t&&(r=(e(E)-t)/A,i=t+A),{overage:r,point:i}}),I=(0,r.eU)(null,function(e,n){var t=e(f),r=e(D)[0],i=e(D)[1];t<r&&n(f,r),t>i&&n(f,i)}),T=(0,r.eU)(null,function(e,n){var t=e(C),r=e(g)[0],i=e(g)[1];t<r&&n(C,r),t>i&&n(C,i)}),F=(0,r.eU)(function(e){var n=e(D)[0]/d,t=e(D)[1]/d,r=e(g)[0]/_,i=e(g)[1]/_;return e(v)<n?(n-e(v))/p:e(v)>t?(e(v)-t)/p:e(E)<r?(r-e(E))/A:e(E)>i?(e(E)-i)/A:0}),P=(0,r.eU)(function(e){var n;return(1e5*(n={ramCost:e(x),cpuCost:e(m)}).ramCost+1e5*n.cpuCost)/1e5}),L=(0,r.eU)(function(e){var n=e(s).computeUnitsPerRam;return e(k)*n}),U=(0,r.eU)(function(e){var n=e(s).computeUnitsPerCpu;return e(h)*n}),N=(0,r.eU)(function(e){return e(L)+e(U)}),O=function(e){return e.None="0ms",e.Normal="200ms",e}({}),M=["ArrowLeft","ArrowRight","Home","End"],H=(0,o.AH)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),B=(0,o.AH)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:a.LU.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(a.LU.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}})},9786:(e,n,t)=>{"use strict";t.d(n,{C:()=>l});var r=t(81073),i=t(46449),o=t(62862),a=t(12813);function l(e){var n=e.org,t=e.disabled,l=e.onClick,s=n?(0,i.EG)({slug:n.slug}):void 0,c=s?s.home.href:"/home",u=s?s.home.as:"/~";return(0,r.Y)(o.A,{"aria-label":"Home",alt:"Home",dataCy:"home-button",href:c,size:32,as:u,disabled:t,onClick:l,children:(0,r.Y)(a.A,{})})}},9873:e=>{e.exports={root:"WebPageVisit_root__oLhVh",divider:"WebPageVisit_divider__wQO3N",visitContent:"WebPageVisit_visitContent__9cmXb",markdown:"WebPageVisit_markdown__1_gOy"}},9898:e=>{e.exports={vulnerability:"SASTVulnerability_vulnerability__sKTlU",vulnerabilityHeader:"SASTVulnerability_vulnerabilityHeader__2wLyv",isExpanded:"SASTVulnerability_isExpanded__u6r0Z",analysisVulnerabilityCode:"SASTVulnerability_analysisVulnerabilityCode__PcNYM",filePath:"SASTVulnerability_filePath__ZyJsR"}},10208:(e,n,t)=>{"use strict";t.d(n,{G:()=>q});var r=t(81073),i=t(21462),o=t(41930),a=t(49022),l=t(74055),s=t(87584),c=t(50301),u=t(47322),d=t(17089),p=t(85144);function f(e){var n=e.shouldShowUpgradeModal,t=e.isUpgrading,i=e.onUpgradeConfirm,o=e.onUpgradeCancel,a=e.onClose;return(0,r.Y)(p.a,{isOpen:n,onRequestClose:function(){(0,d.u4)(d.AZ.VISUAL_EDITOR_UPGRADE_ACTION,{action:"closed"}),a()},centered:!0,maxWidth:450,children:(0,r.Y)(u.A,{title:"Update Required",confirmLabel:"Update",loading:t,onConfirm:function(){(0,d.u4)(d.AZ.VISUAL_EDITOR_UPGRADE_ACTION,{action:"confirmed"}),i()},onCancel:function(){(0,d.u4)(d.AZ.VISUAL_EDITOR_UPGRADE_ACTION,{action:"cancelled"}),o()},children:"This app needs to be updated to use the latest version of the visual editor tool. This will restart the application. Would you like to update it now?"})})}var h=t(90629),m=t(79203),g=t(71983),v=t(21762),y=t(41668),w=t(90696),b=t(64556),S=t(29935),Y=t(12694),_=t(82643),A=t(76957),C=t(1982),k=t(68167),x=t(37872),D=t(82112),E=t(81740),R=(0,A.eU)("unchecked"),I=t(8950),T=t(67917),F=t(93188),P=t(73176),L=t(82839),U={direction:"reverse",state:{count:0},map:function(e){return e.count>=5},reducer:function(e,n){var t;if(e.sender.type===I.utd.USER&&(null==(t=e.contents.contents)?void 0:t.$kind)==="messageEventContents"&&(n.count+=1),n.count>=5)return!1}},N=t(6699),O=t(42793),M=t(36937),H=t(18509),B=t(27023),z=t(11769),W=t(54694),G=t(78626),V=t(10708),Z=(0,H.x)({button:[B.wp.height(24),B.wp.p(4),B.wp.color.foregroundDimmer,{"&:hover:not([disabled], [aria-disabled])":B.wp.color.foregroundDefault}],badgeText:{color:M.LU.foregroundDefault},buttonGlow:{position:"relative","&::before":{content:'""',position:"absolute",top:-2,left:-2,right:-2,bottom:-2,border:"1px solid ".concat(M.LU.blueDimmest),borderRadius:M.LU.borderRadius6,animation:"".concat((0,O.i7)({"0%":{borderColor:M.LU.blueDimmest,boxShadow:"0 0 4px ".concat(M.LU.blueDimmest)},"50%":{borderColor:M.LU.blueDefault,boxShadow:"0 0 8px 2px ".concat(M.LU.blueDefault)},"100%":{borderColor:M.LU.blueDimmest,boxShadow:"0 0 4px ".concat(M.LU.blueDimmest)}})," 3s ease-in-out infinite"),pointerEvents:"none",zIndex:0}}}),j={icon:function(){return(0,r.Y)(W.Hf,{name:"New",color:"primary",css:Z.badgeText})},id:"deterministic-edits-callout",title:"Visual Editor",content:"Visually select and edit elements in your app.",hideCloseButton:!1,hideNavigation:!1};function q(e){var n,t,u,p,A,I,O,M,H,B,W,q,K,$,J,Q,X,ee,en,et,er,ei,eo,ea,el,es,ec,eu,ed,ep,ef,eh,em,eg=e.context,ev=e.disabled,ey=e.disabledReason,ew=(0,N.Z)({context:eg}),eb=ew.isActive,eS=ew.toggleVisualEditor,eY=ew.isSelectorScriptLoaded,e_=ew.element,eA=ew.isEditingSupported,eC=(0,c.Av)(),ek=null!=(em=(0,a.A)(eC))&&em,ex=(0,s.M)();n=(0,m.Xr)(y.zq),t=(0,m.Xr)(y.$j),u=(0,m.Xr)(y.DV),p=(0,m.Xr)(y.vD),A=(0,m.Xr)(y.gN),I=(0,m.Xr)(w.V2),O=(0,m.Xr)(w.VL),M=(0,m.Xr)(y.cT),H=(0,v._P)({type:"string",controlName:"flag-cartographer-version",default:"0.0.10"}),B=(0,v._P)({type:"boolean",controlName:"flag-killswitch-standalone-beacon"}),W=(0,i.useCallback)(function(){try{A(),(0,b.wr)()}catch(e){h.Cp(e)}},[A]),(0,i.useEffect)(function(){var e=function(e){var r;if(null==(r=e.data)?void 0:r.type)switch(e.data.type){case"ELEMENT_SELECTED":if(e.data.payload){n(e.data.payload),O(e.data.payload),e.data.payload.screenshotBlob&&p(e.data.payload.screenshotBlob);var i=(0,b.qP)(e);i&&(0,b.wr)({excludeIframe:i}),(0,d.u4)(g.AZ.VISUAL_SELECTOR_ELEMENT_SELECTED,{element:(0,b.xC)(e.data.payload)})}break;case"ELEMENT_TEXT_CHANGED":e.data.payload&&I(e.data.payload.textContent);break;case"REPLIT_VISUAL_EDITOR_ENABLED":t(!0);break;case"ELEMENT_UNSELECTED":case"REPLIT_VISUAL_EDITOR_DISABLED":W();break;case"SELECTOR_SCRIPT_LOADED":var o=e.data.version;if(M(o),B&&o.includes("standalone"))return;o&&o.localeCompare(H,void 0,{numeric:!0})>-1&&(u(!0),W())}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e),W()}},[n,t,u,A,W,H,p,B,I,O,M]);var eD=(0,o.a)({tablet:!0}),eE=!eY||!ek||ex||eD,eR=(0,i.useRef)(null),eI=(q=(0,T.NC)(),K=(0,v._P)({controlName:"flag-visual-editor-feature-callout"}),J=($=(0,L.Z)("deterministic-edits-callout")).isDone,Q=$.setAsDone,X=$.isLoading,ee=(0,P.Rj)(function(){return F.cP.combine(q.sessions.agent.current,q.sessions.chat.open.latest).select(function(e){var n=(0,Y._)(e,2),t=n[0],r=n[1];return t||r||null})},[q]),en=(0,P.Rj)(function(){return null==ee?void 0:ee.reduce(U,100)},[ee],{default:!1}),{shouldShowCallout:K&&!X&&!J&&en&&eA,setAsDone:Q}),eT=eI.shouldShowCallout,eF=eI.setAsDone,eP=(0,i.useCallback)(function(){eS(),eT&&eF()},[eS,eT,eF]),eL=(er=(et=(0,Y._)((0,i.useState)(!1),2))[0],ei=et[1],ea=(eo=(0,Y._)((0,i.useState)(!1),2))[0],el=eo[1],es=(0,m.md)(R),ec=(0,m.Xr)(R),eu=(0,m.md)(y.y0).version,ed=(0,E.d_)(),ep=(0,v._P)({controlName:"flag-visual-editor-upgrade-threshold",type:"string",default:"0.2.5"}),ef=(0,C.A)().showError,eh=(0,D.I)(function(e){return(0,S._)(function(){var n;return(0,_.YH)(this,function(t){switch(t.label){case 0:el(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,e.agentToolPackager.installPackages.rpc({pkgs:["@replit/vite-plugin-cartographer@latest"],language:"nodejs-npm"})];case 2:if(t.sent().ok)ei(!1),ec("ok"),ed();else throw Error("Failed to upgrade cartographer package");return[3,5];case 3:return n=t.sent(),x.vF.error("Error Upgrading Cartographer Package",{errorMessage:n.message}),ef("Error Upgrading Package"),ei(!1),ec("refused-upgrade"),[3,5];case 4:return el(!1),[7];case 5:return[2]}})})},[ed,ec,ef]),{shouldShowUpgradeModal:er,isUpgrading:ea,checkVersionAndProceed:(0,i.useCallback)(function(){return"ok"===es||"refused-upgrade"===es||("needs-upgrade"===es?(ei(!0),!1):eu&&!eu.includes("standalone")&&0>(0,k.C)(eu.replace(/[^0-9.]/g,""),ep)?(ec("needs-upgrade"),ei(!0),!1):(ec("ok"),!0))},[ec,eu,es,ep]),handleUpgradeConfirm:(0,i.useCallback)(function(){eh&&eh()},[eh]),handleUpgradeCancel:(0,i.useCallback)(function(){ei(!1),ec("refused-upgrade")},[ec]),handleModalClose:(0,i.useCallback)(function(){ei(!1)},[]),versionCheckResult:es}),eU=eL.shouldShowUpgradeModal,eN=eL.isUpgrading,eO=eL.checkVersionAndProceed,eM=eL.handleUpgradeConfirm,eH=eL.handleUpgradeCancel,eB=eL.handleModalClose,ez=(0,i.useCallback)(function(){eH(),eP()},[eH,eP]),eW=(0,i.useCallback)(function(){eO()&&eP()},[eO,eP]);if(eE)return null;var eG=[Z.button,eT&&Z.buttonGlow],eV=!!ey,eZ=eA?"Visual Editor":"Element selector";return eV&&(eZ=ey),(0,r.FD)(r.FK,{children:[(0,r.Y)(G.m_,{isDisabled:eT&&!eV,tooltip:eZ,placement:"top-start",children:(0,r.Y)(z.$n,{ref:eR,css:eG,disabled:eE||void 0!==ev&&ev,variant:eb?"default":"nofill",colorway:eb?"primary":void 0,size:"small",text:(null==e_?void 0:e_.componentName)?e_.componentName:eb?"":eA?"Edit":"Select",onClick:eW,iconLeft:(0,r.Y)(V.A,{size:16})})}),eT&&eR.current&&(0,r.Y)(l.C,{targetElement:eR.current,activeStep:j,currentStepIndex:0,totalSteps:1,done:eF,goto:function(){},disableAnimation:!0,placement:"top-start",colorway:!1}),(0,r.Y)(f,{shouldShowUpgradeModal:eU,isUpgrading:eN,onUpgradeConfirm:eM,onUpgradeCancel:ez,onClose:eB})]})}},10806:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(21462),i=t(96907),o=t.n(i),a=t(50301);function l(e){!function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;(0,r.useEffect)(function(){if(null!=n)return n.portsState.subscribe(o()(function(n){if(null!=n){var t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.isOpen&&!l.configuration.isVnc)return void e.set(!0)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}e.set(!1)}},t))},[n,e,t])}((0,a.Av)(),e)}},11122:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M20.777 2.774a.844.844 0 0 1 .329 1.147l-.844 1.52a.845.845 0 1 1-1.476-.818l.845-1.52a.844.844 0 0 1 1.146-.33Zm4.368 3.148a.844.844 0 0 1-.308 1.152L22.77 8.267a.843.843 0 1 1-.844-1.46l2.067-1.194a.844.844 0 0 1 1.152.309ZM8.052 20.36a3.375 3.375 0 0 0 6.618-1.031l-6.618 1.03Zm-1.677.26-1.82.284a2.363 2.363 0 0 1-2.408-1.152l-.478-.825a2.346 2.346 0 0 1 .199-2.65L12.024 3.61a2.362 2.362 0 0 1 3.885.295l6.37 10.994a2.355 2.355 0 0 1-1.677 3.506l-4.257.662a5.062 5.062 0 0 1-9.97 1.553Zm18.577-9.766-1.63-.436a.844.844 0 0 0-.437 1.63l1.63.436a.844.844 0 0 0 .437-1.63Zm-11.61-6.189L3.184 17.331a.658.658 0 0 0-.056.75l.478.827a.675.675 0 0 0 .688.328l16.048-2.5a.666.666 0 0 0 .475-.99L14.45 4.749a.675.675 0 0 0-1.107-.087"}),(0,o.Y)("path",{d:"M20.777 2.774a.844.844 0 0 1 .329 1.147l-.844 1.52a.845.845 0 1 1-1.476-.818l.845-1.52a.844.844 0 0 1 1.146-.33Zm4.368 3.148a.844.844 0 0 1-.308 1.152L22.77 8.267a.843.843 0 1 1-.844-1.46l2.067-1.194a.844.844 0 0 1 1.152.309ZM8.052 20.36a3.375 3.375 0 0 0 6.618-1.031l-6.618 1.03Zm-1.677.26-1.82.284a2.363 2.363 0 0 1-2.408-1.152l-.478-.825a2.346 2.346 0 0 1 .199-2.65L12.024 3.61a2.362 2.362 0 0 1 3.885.295l6.37 10.994a2.355 2.355 0 0 1-1.677 3.506l-4.257.662a5.062 5.062 0 0 1-9.97 1.553Zm18.577-9.766-1.63-.436a.844.844 0 0 0-.437 1.63l1.63.436a.844.844 0 0 0 .437-1.63Zm-11.61-6.189L3.184 17.331a.658.658 0 0 0-.056.75l.478.827a.675.675 0 0 0 .688.328l16.048-2.5a.666.666 0 0 0 .475-.99L14.45 4.749a.675.675 0 0 0-1.107-.087"})]}))}},11418:(e,n,t)=>{"use strict";t.d(n,{J:()=>u,f:()=>c});var r=t(17844),i=t(81073),o=t(47993),a=t(85336),l=t(42793),s=t(36937),c=t(27023).r1-1;function u(e){var n=e.targetElement,t=e.transparent,u=e.disableAnimation,p=(0,a.my)(n);if(null==p||null==n)return null;var f=(0,l.AH)({backgroundColor:t?"transparent":s.LU.backgroundOverlay,zIndex:c,position:"fixed",transition:u?"all":"all 0.5s ease-out"});return(0,o.createPortal)((0,i.FD)(i.FK,{children:[(0,i.Y)("div",{id:"wat",css:[d((0,r._)({side:"left-top"},p)),f]}),(0,i.Y)("div",{css:[d((0,r._)({side:"top-right"},p)),f]}),(0,i.Y)("div",{css:[d((0,r._)({side:"right-bottom"},p)),f]}),(0,i.Y)("div",{css:[d((0,r._)({side:"bottom-left"},p)),f]})]}),document.body)}function d(e){var n=e.side,t=e.rect,r=e.docWidth,i=e.docHeight;switch(n){case"left-top":return(0,l.AH)({top:0,left:0,width:Math.max(0,t.left),height:Math.max(0,t.bottom)});case"top-right":return(0,l.AH)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.left),"px)"),height:Math.max(0,t.top)});case"right-bottom":return(0,l.AH)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.top),"px)")});case"bottom-left":return(0,l.AH)({bottom:0,left:0,width:Math.max(0,t.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.bottom),"px)")})}}},11473:e=>{e.exports={userMessage:"Events_userMessage__Ne1GX",fullWidthStatusBar:"Events_fullWidthStatusBar__qs0Bd",agentAction:"Events_agentAction__Mzw2m",eventContainer:"Events_eventContainer__sKam9",eventDefaultWidth:"Events_eventDefaultWidth__eSPKu",eventExpandedWidth:"Events_eventExpandedWidth__153D2"}},11798:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M8.5 3.75a3.25 3.25 0 1 0 0 6.5 3.25 3.25 0 0 0 0-6.5ZM3.75 7a4.75 4.75 0 1 1 9.5 0 4.75 4.75 0 0 1-9.5 0ZM20 7.25a.75.75 0 0 1 .75.75v2.25H23a.75.75 0 0 1 0 1.5h-2.25V14a.75.75 0 0 1-1.5 0v-2.25H17a.75.75 0 0 1 0-1.5h2.25V8a.75.75 0 0 1 .75-.75ZM1.641 15.641A4.75 4.75 0 0 1 5 14.25h7A4.75 4.75 0 0 1 16.75 19v2a.75.75 0 0 1-1.5 0v-2A3.25 3.25 0 0 0 12 15.75H5A3.25 3.25 0 0 0 1.75 19v2a.75.75 0 0 1-1.5 0v-2c0-1.26.5-2.468 1.391-3.359Z",clipRule:"evenodd"})}))}},12056:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(81073),i=t(18509),o=t(27023),a=t(85389),l=t(63456),s=(0,i.x)({root:[o.wp.coverContainer,o.wp.center]});function c(){return(0,r.Y)(a.S,{css:s.root,children:(0,r.Y)(l.A,{size:32})})}},12127:(e,n,t)=>{"use strict";t.d(n,{$p:()=>d,XV:()=>a,h7:()=>l,lX:()=>u});var r=t(91326),i=t(76969),o=t(7868),a=.01,l=function(e,n){var t=n.resourceUsageType,r=n.forceGib,i=n.precision,o=n.skipUnits,a=n.additional,l=n.minimumValue,s=n.truncateToMillions,u=n.gibsDisplayAsBytes,d=c({input:e,resourceUsageType:t,forceGib:void 0!==r&&r,precision:void 0===i?4:i,minimumValue:void 0===l?null:l,truncateToMillions:void 0!==s&&s,gibsDisplayAsBytes:void 0!==u&&u});return void 0!==o&&o?d.formattedValue:void 0!==a&&a?[d.formattedValue,"additional",d.units].join(" "):[d.formattedValue,d.units].join(" ")};function s(e,n){var t=n.precision,r=n.minimumValue,i=n.forceGib,o=r&&0!==e;return e>=0x40000000*(null!=r?r:1)||i?o&&e<0x40000000*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:t})),units:"GiB"}:{formattedValue:d(e).toFixed(t),units:"GiB"}:o&&e<1048576*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:t})),units:"MiB"}:{formattedValue:u(e).toFixed(t),units:"MiB"}}var c=function(e){var n=e.input,t=e.resourceUsageType,a=e.forceGib,l=e.precision,c=e.minimumValue,u=e.truncateToMillions,d=e.gibsDisplayAsBytes,p=c&&0!==n&&n<c;switch(t){case"Bytes":return s(n,{precision:l,minimumValue:c,forceGib:a});case"GiB":if(0===n)return{formattedValue:n.toFixed(l),units:"GiB"};if(d)return s(0x40000000*n,{precision:l,minimumValue:c,forceGib:!1});if(p)return{formattedValue:"<".concat(c.toLocaleString(void 0,{minimumFractionDigits:l})),units:"GiB"};return{formattedValue:n.toFixed(l),units:"GiB"};case"GiB-months":if(0===n)return{formattedValue:n.toFixed(l),units:"GiB-months"};if(p)return{formattedValue:"<".concat(c.toLocaleString(void 0,{minimumFractionDigits:l})),units:"GiB-months"};return{formattedValue:n.toFixed(l),units:"GiB-months"};case"ComputeUnits":if(n>=1e6&&u)return{formattedValue:(n/1e6).toLocaleString(void 0,{maximumFractionDigits:n>=1e6&&u?2:0})+" million",units:"compute units"};return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute units"};case"ComputeHours":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute hours"};case"Requests":if(n>=1e6&&u)return{formattedValue:(n/1e6).toLocaleString(void 0,{maximumFractionDigits:n>=1e6&&u?2:0})+" million",units:"requests"};return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"requests"};case"Site":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"site"};case"Hours":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:2}),units:"hours"};case"Deployments":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:2}),units:"days"};case"Tokens":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"tokens"};case"Minutes":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"minutes"};case"Dollars":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:2,style:"currency",currency:"USD"}),units:"dollars"};case"PlanSteps":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"plan steps"};case"Checkpoints":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"checkpoints"};case"EditRequests":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:(0,o.A)(i.go)};case"None":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:""};default:(0,r.A)(t)}},u=function(e){return e/1048576},d=function(e){return e/0x40000000}},12331:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(37743),i=t(22531),o=function(){function e(){(0,r._)(this,e)}return e.get=function(e,n){var t,r;try{t=sessionStorage.getItem(e)}catch(e){}if(null==t)return null;try{r=JSON.parse(t)}catch(e){}return null==r||"array"===n&&!Array.isArray(r)||n&&(void 0===r?"undefined":(0,i._)(r))!==n?null:r},e.set=function(e,n){try{sessionStorage.setItem(e,JSON.stringify(n))}catch(e){}},e.remove=function(e){try{sessionStorage.removeItem(e)}catch(e){}},e.keys=function(){try{return Object.keys(sessionStorage)}catch(e){return[]}},e}()},12378:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.365 4.356a.75.75 0 0 1 .74-.016l13 7a.75.75 0 0 1 0 1.32l-13 7A.75.75 0 0 1 2 19V5a.75.75 0 0 1 .365-.644Zm1.135 1.9v11.488L14.168 12 3.5 6.256ZM18.5 12a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1-.75-.75ZM11 6a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5h-10.5A.75.75 0 0 1 11 6ZM11 18a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5h-10.5A.75.75 0 0 1 11 18Z",clipRule:"evenodd"})}))}},12556:(e,n,t)=>{"use strict";t.d(n,{oR:()=>w,HG:()=>b,s_:()=>S,Ju:()=>Y});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),s=t(86997),c=t(50175);function u(){var e=(0,a._)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,a._)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,l.J1)(u()),h=(0,l.J1)(d()),m=t(26494),g=t(55100),v=t(71424),y=t(45330);function w(){var e,n=(0,i.useContext)(y.A),t=(0,r._)((0,i.useState)(null!=(e=null==n?void 0:n.replConfigIsExtension)&&e),2),o=t[0],a=t[1],l=(0,v.A)().dotReplit;return(0,i.useEffect)(function(){return l.watch(function(e){var n,t,r;a(null!=(r=null==(t=e.config)||null==(n=t.extension)?void 0:n.isExtension)&&r)})},[l]),o}function b(){var e=(0,r._)((0,i.useState)(null),2),n=e[0],t=e[1],o=(0,v.A)().dotReplit;return(0,i.useEffect)(function(){return o.watch(function(e){var n,r,i=null==(r=e.config)||null==(n=r.extension)?void 0:n.extensionID;i?t((0,m.PM)(i)):t(null)})},[o]),n}var S=function(){var e=(0,v.A)().dotReplit,n=(0,r._)((0,i.useState)(null),2),t=n[0],o=n[1];return(0,i.useEffect)(function(){return e.watch(function(e){var n,t,r=null==(t=e.config)||null==(n=t.extension)?void 0:n.staticDirectory;r?o({path:r,relativePath:r.replace(/^\.\//,"")}):o(null)})},[e]),t};function Y(){var e,n,t,a,l,u=(0,g.A)(),d=(e={variables:{replId:u}},n=(0,o._)({},p,e),s.I(f,n)),m=d.data,y=d.loading,w=d.error,b=(0,r._)((t=(0,o._)({},p,void 0),c.n(h,t)),1)[0],S=!y&&!w&&!!(null==m?void 0:m.repl)&&"Repl"===m.repl.__typename&&null!=(l=null==(a=m.repl.config)?void 0:a.isExtension)&&l,Y=(0,r._)((0,i.useState)(!1),2),_=Y[0],A=Y[1],C=(0,v.A)().dotReplit;(0,i.useEffect)(function(){return C.watch(function(e){var n,t,r;A(null!=(r=null==(t=e.config)||null==(n=t.extension)?void 0:n.isExtension)&&r)})},[C]),(0,i.useEffect)(function(){y||w||_!==S&&b({variables:{replId:u,isExtension:_},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:u,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:_}}}}})},[y,w,u,S,_,b])}},12755:e=>{e.exports={container:"PoweredBySemgrep_container__cptzP",semgrepLogo:"PoweredBySemgrep_semgrepLogo__hTS0C"}},12921:e=>{e.exports={root:"RollbackStatus_root__Cf_GE",revertIcon:"RollbackStatus_revertIcon__XSNIH",flexShrink:"RollbackStatus_flexShrink__bs9jZ",subtext:"RollbackStatus_subtext___5aWR",dividerContainer:"RollbackStatus_dividerContainer__oXvqd",dividerLine:"RollbackStatus_dividerLine__gMm3D",dividerText:"RollbackStatus_dividerText__qbHCG"}},13196:e=>{e.exports={root:"StatusBar_root__gmUta",hasFlagPlanInWorkspace:"StatusBar_hasFlagPlanInWorkspace__7oDMm",inner:"StatusBar_inner__0Llrv",surface:"StatusBar_surface__uvty0",statusLabelText:"StatusBar_statusLabelText__CjKPB",planGeneratingStatusLabel:"StatusBar_planGeneratingStatusLabel__7iafT"}},13319:e=>{e.exports={vulnerability:"DependencyVulnerability_vulnerability__etruT",vulnerabilityHeader:"DependencyVulnerability_vulnerabilityHeader__QAGOh",isExpanded:"DependencyVulnerability_isExpanded__mCj_2",dependencyVulnerabilityGroup:"DependencyVulnerability_dependencyVulnerabilityGroup__y7l3_",dependencyVulnerabilityName:"DependencyVulnerability_dependencyVulnerabilityName__JdCz_"}},13383:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.25 1.25 0 0 0 20.25 15v-3a.75.75 0 0 1 1.5 0v3A2.75 2.75 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5A2.75 2.75 0 0 1 5 2.25h7a.75.75 0 0 1 0 1.5H5Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M19 1a.8.8 0 0 1 .8.8v2.4h2.4a.8.8 0 0 1 0 1.6h-2.4v2.4a.8.8 0 0 1-1.6 0V5.8h-2.4a.8.8 0 0 1 0-1.6h2.4V1.8A.8.8 0 0 1 19 1Z"})]}))}},13385:(e,n,t)=>{"use strict";t.d(n,{Sv:()=>i,_3:()=>a,xC:()=>o});var r=t(76969),i={autoscaleDeploymentCostDetails:r.Cz,rvmDeploymentCostDetails:r.N3,scheduledDeploymentCostDetails:r.$S,staticDeploymentCostDetails:r.uE};function o(){return i}function a(e,n){switch(e){case"e2-micro":case"e2-small":case"e2-medium":case"n1-custom-1-4096":case"e2-standard-2":case"e2-standard-4":return n.rvmDeploymentCostDetails[e];default:return{costPerHour:null,costPerMonth:null}}}},13528:(e,n,t)=>{"use strict";t.d(n,{g:()=>y,k:()=>v});var r=t(17844),i=t(93629),o=t(17459),a=t(86105),l=t(81073),s=t(36937),c=t(18509),u=t(85051),d=t(27023),p=t(8017),f=t(85389),h=t(52351),m=[d.wp.reset.button,d.wp.p(2),d.wp.height(22),d.wp.rowWithGap(4),d.wp.align.center,u.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}],g=(0,c.x)({button:m,disabledButton:(0,a._)(m).concat([{color:s.LU.foregroundDimmest,cursor:"default"}]),text:[{fontSize:s.LU.fontSizeSmall}],switchWrapper:[d.wp.height(22),d.wp.pr(4),u.b.nofill,{opacity:.8,userSelect:"none","& > label":{gap:0,cursor:"pointer"},"& > label > svg":{scale:"0.6"}}]});function v(e){var n=e.altText,t=e.buttonText,a=e.icon,s=(0,o._)(e,["altText","buttonText","icon"]);return(0,l.FD)(f.S,(0,i._)((0,r._)({},s),{alt:n,tag:"button",css:s.disabled?g.disabledButton:g.button,children:[(0,l.Y)(h.Vx.Provider,{value:{size:12},children:a}),(0,l.Y)(f.S,{css:g.text,children:t})]}))}function y(e){var n=e.text,t=e.isSelected,r=e.onChange;return(0,l.Y)(f.S,{css:g.switchWrapper,row:!0,align:"center",children:(0,l.Y)(p.d,{colorway:"primary","aria-label":n,isSelected:t,onChange:r,children:(0,l.Y)(f.S,{css:g.text,children:n})})})}},13601:(e,n,t)=>{"use strict";t.d(n,{D:()=>i,O:()=>r});var r="users.noreply.replit.com",i="users.noreply.github.com"},13850:(e,n,t)=>{"use strict";t.d(n,{oD:()=>d,wo:()=>f});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(44753);function s(){var e=(0,i._)(["\n  fragment TransferReplReplInfo on Repl {\n    id\n    slug\n    title\n    owner {\n      ... on Team {\n        id\n        username\n      }\n      ... on User {\n        id\n        username\n      }\n    }\n    org {\n      id\n      slug\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query TransferReplDialog {\n    currentUser {\n      id\n      ...ReplOwnerCurrentUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},d=(0,o.J1)(s()),p=(0,o.J1)(c(),l.nM);function f(e){var n=(0,r._)({},u,e);return a.I(p,n)}},13880:(e,n,t)=>{"use strict";t.d(n,{u:()=>g});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(17844),s=t(12584),c=t(41114),u=t(51026);function d(){var e=(0,s._)(["\n  query CheckForAgentSession($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        supportsAgent\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(67917),m=t(55100);function g(){var e,n,t=(0,h.NC)(),s=(0,h.jt)(),c=(0,h.Wq)(),d=(0,i._)((e={variables:{replId:(0,m.A)()}},n=(0,l._)({},p,e),u._(f,n)),1)[0];(0,a.useEffect)(function(){if(!s){var e=!1;return!function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,r._)(function(){var n,r,i;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,t.sessions.agent.all.map.once()];case 1:if(n=o.sent(),e)return[2];if(0!==n.size)return[3,3];return[4,d()];case 2:if(!((null==(r=(i=o.sent()).data)?void 0:r.getRepl.__typename)==="Repl"&&i.data.getRepl.supportsAgent))return[2];o.label=3;case 3:return c(),[2]}})})).apply(this,arguments)}},[t,s,c,d])}},14397:(e,n,t)=>{"use strict";t.d(n,{z:()=>o});var r=t(81073),i=t(42793);function o(){return(0,r.Y)(i.mL,{styles:[{body:{overflow:"hidden"}}]})}},14417:(e,n,t)=>{"use strict";t.d(n,{nL:()=>S});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(76957),s=t(79203),c=t(17844),u=t(12584),d=t(41114),p=t(50175);function f(){var e=(0,u._)(["\n  mutation MintReplShieldToken($input: MintReplShieldTokenInput!) {\n    mintReplShieldToken(input: $input) {\n      ... on ReplShieldToken {\n        token\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return f=function(){return e},e}var h={},m=(0,d.J1)(f()),g=t(98679),v=t(55100),y=function(e){try{var n=e.split(".")[1],t=JSON.parse(atob(n));return t.exp?1e3*t.exp:null}catch(e){return null}},w=(0,l.eU)(null),b=(0,l.eU)(!1);function S(){var e,n=(0,v.A)(),t=(0,i._)((e=(0,c._)({},h,void 0),p.n(m,e)),2),l=t[0],u=t[1].loading,d=(0,i._)((0,s.fp)(w),2),f=d[0],S=d[1],Y=(0,i._)((0,s.fp)(b),2),_=Y[0],A=Y[1],C=(0,a.useRef)(null),k=(0,g.A)(u),x=(0,a.useCallback)((0,r._)(function(){var e,t,r;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(!n||k.current)return[2];A(!1),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,l({variables:{input:{replId:n}}})];case 2:if((t=null==(e=i.sent().data)?void 0:e.mintReplShieldToken)&&"ReplShieldToken"===t.__typename){if(!(r=t.token))return[2,null];return S(r),[2,r]}return A(!0),[2,null];case 3:return i.sent(),A(!0),[2,null];case 4:return[2]}})}),[n,l,S,A,k]),D=(0,a.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){return S(null),A(!1),[2,x()]})}),[x,S,A]),E=(0,a.useCallback)(function(){if(!f)return!1;var e=y(f);if(!e)return!1;var n=e-Date.now();return!(n<=0)&&!(n<=3e5)},[f]),R=(0,a.useCallback)(function(){if(C.current&&(clearTimeout(C.current),C.current=null),f){var e=y(f);if(e){var n=e-Date.now();if(n<=3e5)return void x();C.current=setTimeout(function(){x()},n-3e5)}}},[f,x]);return(0,a.useEffect)(function(){return!n||f||k.current||_||x(),n&&f&&!k.current&&!_&&(E()?R():x()),function(){C.current&&(clearTimeout(C.current),C.current=null)}},[n,f,x,_,E,R,k]),{token:f,error:_,retry:x,loading:u,forceRemint:D}}},14566:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.25 8.25h2.325a3.751 3.751 0 0 0 7.35 0h9.825a.75.75 0 0 0 0-1.5h-9.825a3.751 3.751 0 0 0-7.35 0H2.25a.75.75 0 0 0 0 1.5Zm6-3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 15.75a.75.75 0 0 0 0 1.5h9.825a3.751 3.751 0 0 0 7.35 0h2.325a.75.75 0 0 0 0-1.5h-2.325a3.751 3.751 0 0 0-7.35 0H2.25Zm11.25.75a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0Z",clipRule:"evenodd"})}))}},14760:(e,n,t)=>{"use strict";t.d(n,{A:()=>S,v:()=>_});var r=t(17844),i=t(93629),o=t(86105),a=t(81073),l=t(49384),s=t.n(l),c=t(10571),u=t(34229),d=t(42793),p=t(36937),f=t(27023),h=t(22422),m=t(41358),g=t(4616),v=t(85389),y=t(97298),w=t(55352),b=(0,d.AH)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function S(e){var n=e.post,t=n.repl,o=n.user,l=t.isTemplate?"Template":"Repl";return(0,a.FD)(v.S,{gap:8,children:[(0,a.FD)(v.S,{row:!0,align:"center",justify:"space-between",children:[(0,a.Y)(v.S,{row:!0,align:"center",children:(0,a.FD)(v.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)(h.e,{size:24,username:o.username,src:o.image}),(0,a.FD)(v.S,{row:!0,gap:4,children:[(0,a.Y)(g.EY,{multiline:!1,children:o.username}),(0,a.FD)(g.EY,{color:"dimmest",multiline:!1,children:[" ","published a ",l]})]})]})}),(0,a.Y)(w.A,{size:12})]}),(0,a.FD)(m.ui,{css:[f.wp.borderRadius(8),f.wp.colWithGap(8),f.wp.p(8),f.wp.position.relative,{border:"1px solid "+p.LU.outlineDimmest}],children:[(0,a.Y)(v.S,{gap:16,children:(0,a.Y)(v.S,{row:!0,gap:16,justify:"space-between",children:(0,a.FD)(v.S,{grow:!0,shrink:!0,row:!0,gap:8,align:"start",children:[(0,a.Y)(u.Ay,{iconUrl:t.iconUrl,alt:t.title,size:84,css:[f.wp.backgroundColor.backgroundHigher]}),(0,a.FD)(v.S,{grow:!0,shrink:!0,gap:4,children:[(0,a.FD)(v.S,{row:!0,children:[(0,a.Y)(s(),(0,i._)((0,r._)({},(0,y.z9)(t)),{css:[f.wp.viewStyle,{color:"inherit"},b,f.wp.flex.growAndShrink(1),f.wp.minWidth(0)],onClick:function(e){return e.preventDefault()},children:(0,a.Y)(g.EY,{variant:"subheadBig",multiline:!1,children:t.title})})),t.isTemplate?(0,a.Y)(Y,{}):null]}),t.description?(0,a.Y)(g.EY,{color:"dimmer",maxLines:2,multiline:!1,children:t.description}):null]})]})})}),(0,a.Y)(v.S,{css:[f.wp.minHeight(24)],row:!0,gap:8,justify:"space-between",children:(0,a.Y)(c.A,{repl:{id:t.id,publicForkCount:0,likeCount:0}})})]})]})}var Y=function(){return(0,a.Y)("span",{css:[f.wp.display.inlineFlex,f.wp.align.center,f.wp.height(24),f.wp.px(8),f.wp.borderRadius(16),f.wp.backgroundColor.yellowDimmest,f.wp.color.yellowStrongest,f.wp.justify.center,f.wp.ml(8),{fontSize:p.LU.fontSizeSmall,lineHeight:p.LU.fontSizeSmall}],children:"Template"})},_=function(){return(0,a.FD)(v.S,{gap:8,css:[{opacity:.5}],children:[(0,a.FD)(v.S,{grow:!0,justify:"space-between",row:!0,align:"center",children:[(0,a.FD)(v.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(24),f.wp.height(24),f.wp.borderRadius(16)]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(126),f.wp.height(12),f.wp.borderRadius(4)]})]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(12),f.wp.height(12),f.wp.borderRadius(8)]})]}),(0,a.FD)(v.S,{css:[f.wp.backgroundColor.backgroundDefault,f.wp.width("100%"),f.wp.height(132),f.wp.borderRadius(8),f.wp.colWithGap(8),f.wp.p(8)],children:[(0,a.FD)(v.S,{row:!0,gap:8,children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.height(84),f.wp.width(84),f.wp.borderRadius(4)]}),(0,a.FD)(v.S,{gap:12,grow:!0,pt:4,children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(80),f.wp.height(16),f.wp.borderRadius(4)]}),(0,a.FD)(v.S,{gap:8,children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width("100%"),f.wp.height(12),f.wp.borderRadius(4)]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width("80%"),f.wp.height(12),f.wp.borderRadius(4)]})]})]})]}),(0,a.FD)(v.S,{grow:!0,align:"center",justify:"space-between",row:!0,children:[(0,a.Y)(v.S,{row:!0,gap:16,children:(0,o._)([,,,]).map(function(e,n){return(0,a.FD)(v.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(12),f.wp.height(12),f.wp.borderRadius(8)]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(16),f.wp.height(8),f.wp.borderRadius(2)]})]},n)})}),(0,a.Y)(v.S,{row:!0,gap:4,children:(0,o._)([,,]).map(function(e,n){return(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(48),f.wp.height(24),f.wp.borderRadius(16)]},n)})})]})]})]})}},14792:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M3.25 6A2.75 2.75 0 0 1 6 3.25h12A2.75 2.75 0 0 1 20.75 6v12A2.75 2.75 0 0 1 18 20.75H6A2.75 2.75 0 0 1 3.25 18V6Z",clipRule:"evenodd"})}))}},15178:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M20.34 8.5c-.128.1-2.38 1.37-2.38 4.192 0 3.265 2.866 4.42 2.952 4.449-.013.07-.456 1.582-1.512 3.122-.941 1.355-1.925 2.708-3.42 2.708-1.497 0-1.882-.869-3.61-.869-1.682 0-2.28.898-3.65.898-1.368 0-2.323-1.254-3.42-2.794C4.027 18.397 3 15.588 3 12.92c0-4.277 2.781-6.546 5.518-6.546 1.454 0 2.667.955 3.58.955.869 0 2.224-1.012 3.879-1.012.627 0 2.88.057 4.363 2.183ZM15.19 4.508c.685-.812 1.169-1.938 1.169-3.065 0-.156-.014-.314-.042-.442-1.113.042-2.438.741-3.237 1.668-.627.713-1.212 1.84-1.212 2.981 0 .172.029.343.042.398.07.014.185.029.3.029.998 0 2.254-.669 2.98-1.569Z"})}))}},15333:(e,n,t)=>{"use strict";t.d(n,{DY:()=>f,LM:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(55130);function s(){var e=(0,i._)(["\n  fragment ConvertedToProjectModalRepl on Repl {\n    id\n    org {\n      id\n    }\n    project {\n      id\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query ConvertedToProjectModal($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        org {\n          id\n          slug\n        }\n        project {\n          id\n          title\n          mainRepl {\n            id\n          }\n        }\n        ...CreateProjectForkRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},d=(0,o.J1)(s()),p=(0,o.J1)(c(),l.T);function f(e){var n=(0,r._)({},u,e);return a.I(p,n)}},15493:(e,n,t)=>{"use strict";t.d(n,{d:()=>S});var r=t(83846),i=t(81073),o=t(49384),a=t.n(o),l=t(21462),s=t(36937),c=t(27503),u=t(18509),d=t(85051),p=t(27023),f=t(83070),h=t(41358),m=t(4616),g=t(85389),v=t(87064),y=t(52351),w=(0,u.x)({anchor:[p.wp.viewStyle,p.wp.reset.button,p.wp.rowWithGap(16),p.wp.center,p.wp.flex.growAndShrink(1),(0,r._)({},p.$_.max("mobileMax"),[p.wp.rowWithGap(8)])],bView:[p.wp.reset.button,p.wp.rowWithGap(16),p.wp.center,p.wp.flex.growAndShrink(1),p.wp.cursor.pointer,(0,r._)({},p.$_.max("mobileMax"),[p.wp.rowWithGap(8)])],closeIcon:[{background:"transparent"}]}),b=g.D.button,S=(0,l.forwardRef)(function(e,n){var t=e.className,r=e.colorway,o=e.closable,l=e.iconLeft,u=e.iconRight,S=e.title,Y=e.text,_=e.closeAction,A=e.textAlign,C={title:[p.wp.fontWeight.bold,p.wp.pb(4),A?p.wp.textAlign[A]:p.wp.textAlign.center],text:[p.wp.flex.growAndShrink(1),A?p.wp.textAlign[A]:p.wp.textAlign.center]},k=(0,i.FD)(i.FK,{children:[(0,i.Y)(y.Z_,{size:16,children:l}),(0,i.FD)(g.S,{grow:!0,shrink:!0,children:[S?(0,i.Y)(m.EY,{css:C.title,variant:"text",children:S}):null,(0,i.Y)(m.EY,{css:C.text,variant:"small",children:Y})]}),(0,i.Y)(y.Z_,{size:16,children:u})]}),x=r?s.ky[r].default:s.LU.accentPrimaryDefault,D=[p.wp.rowWithGap(4),p.wp.align.center,S?p.wp.p(8):p.wp.p(4),p.wp.pl(8),p.wp.borderRadius(),p.wp.flex.growAndShrink(1),r?(0,c.KU)(r):d.b.filledAndOutlined,{"&:focus-within":{boxShadow:"0 0 0 2px "+x}}];return(0,i.FD)(g.S,{css:D,children:["href"in e?(0,i.Y)(a(),{as:e.as,href:e.href,prefetch:e.prefetch,replace:e.replace,scroll:e.scroll,shallow:e.shallow,ref:n,className:t,rel:e.rel,role:"link",target:e.target,css:w.anchor,children:k}):(0,i.Y)(b,{ref:n,className:t,onClick:e.onClick,type:e.type,css:w.bView,children:k}),o?(0,i.Y)(h.ui,{elevated:!0,css:w.closeIcon,grow:0,children:(0,i.Y)(f.K0,{alt:"Close",tooltipBehavior:"hidden",colorway:r,onClick:_,children:(0,i.Y)(v.A,{})})}):null]})});S.displayName="StatusBannerButton"},15621:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.436 3.506A.75.75 0 0 1 8 3.25h13A2.75 2.75 0 0 1 23.75 6v12A2.75 2.75 0 0 1 21 20.75H8a.75.75 0 0 1-.564-.256l-7-8a.75.75 0 0 1 0-.988l7-8ZM8.34 4.75 1.997 12l6.343 7.25H21A1.25 1.25 0 0 0 22.25 18V6A1.25 1.25 0 0 0 21 4.75H8.34Zm3.13 3.72a.75.75 0 0 1 1.06 0L15 10.94l2.47-2.47a.75.75 0 1 1 1.06 1.06L16.06 12l2.47 2.47a.75.75 0 1 1-1.06 1.06L15 13.06l-2.47 2.47a.75.75 0 1 1-1.06-1.06L13.94 12l-2.47-2.47a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},15703:(e,n,t)=>{"use strict";t.d(n,{V:()=>i});var r=t(684),i=r.ZU.Object({type:r.ZU.Literal("agentChat"),data:r.ZU.Optional(r.ZU.Object({sessionId:r.ZU.Optional(r.ZU.String())}))})},15765:e=>{e.exports={root:"PlanProposal_root__dnDT8",elevated:"PlanProposal_elevated__FBDtg",selected:"PlanProposal_selected__jcf8g",expanded:"PlanProposal_expanded__o6IN9",disabled:"PlanProposal_disabled__LRA5J",matchFooterWidth:"PlanProposal_matchFooterWidth__ZZUip",planContainer:"PlanProposal_planContainer__GIOTu",planDetails:"PlanProposal_planDetails__yIii0",hasVisualPreviewSibling:"PlanProposal_hasVisualPreviewSibling__al_dj",title:"PlanProposal_title__x8QcZ",divider:"PlanProposal_divider__ddK_Q",visualPreviewContainer:"PlanProposal_visualPreviewContainer__1FEnW",collapseExpandTransition:"PlanProposal_collapseExpandTransition__4u9rb"}},16240:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(17844),i=t(93629),o=t(17459),a=t(81073),l=t(60666),s=t(27023),c=t(85389),u=[s.wp.width("100%"),s.wp.p(8)],d=[s.wp.py(32),s.wp.minHeight("100%"),s.wp.center],p=function(e){var n=e.children,t=e.centered,s=e.maxWidth,p=(0,o._)(e,["children","centered","maxWidth"]),f=[u,t&&d,s&&l.R1.maxWidth].filter(Boolean);return(0,a.Y)(c.S,(0,i._)((0,r._)({},p),{css:f,children:n}))}},16391:(e,n,t)=>{"use strict";t.d(n,{s:()=>r});var r=function(e){return e.Visited="visited",e.LanguageChanged="language-changed",e.ImportStarted="import-started",e.ImportEnded="import-ended",e.ConfigDone="config-done",e}({})},16645:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M6.196 4.696a1.475 1.475 0 0 1 1.043-.432h2.897a.632.632 0 0 0 0-1.264H7.239A2.74 2.74 0 0 0 4.5 5.74v12.642a2.74 2.74 0 0 0 2.74 2.74h11.378c.35 0 .632-.283.632-.632v-8.534a.738.738 0 0 0-1.475 0v3.687H7.24a2.74 2.74 0 0 0-1.475.431V5.74c0-.39.156-.766.432-1.043ZM7.4 17.12h10.376v2.528H7.399a1.52 1.52 0 0 1-1.007-.37 1.197 1.197 0 0 1-.417-.894c0-.335.15-.657.417-.894a1.52 1.52 0 0 1 1.007-.37Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M16.389 2.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})]}))}},16771:(e,n,t)=>{"use strict";t.d(n,{Od:()=>p,QU:()=>v,Ws:()=>h,n8:()=>g});var r=t(81073),i=t(21462),o=t(54988),a=t(71514),l=t(54682),s=t(58864),c=t(60690),u=t(61191),d=t(18509),p=function(e){return e.Prompt="Prompt",e.CommandStart="CommandStart",e.CommandExecuted="CommandExecuted",e.CommandFinished="CommandFinished",e}({}),f={A:"Prompt",B:"CommandStart",C:"CommandExecuted",D:"CommandFinished"},h={id:"shell.generateWithAI",name:"Generate with AI in the shell",default:(0,u.FM)({cmdOrCtrl:!0,key:"i"})},m=(0,d.x)({root:{marginLeft:"auto"}}),g=133;function v(e){var n=e.onFTCSState,t=e.onOpenGeneratePrompt,u=e.onUpdateCurrentPromptLineNumber,d=(0,a.g)("fontSize").preferences.fontSize,p=(0,i.useRef)(null),g=(0,i.useRef)(null),v=(0,l.m5)(),y=(0,c.Jn)(h.id),w=(0,i.useRef)(null);return(0,i.useCallback)(function(e,i){var a=f[i.split(";")[0]];if(a&&n&&n({state:a,data:i.split(";")[1]}),"B"===i){var l,c,h=e.buffer.active,b=h.cursorX,S=h.cursorY;u(S),p.current&&p.current.dispose(),g.current&&g.current.dispose(),w.current&&(w.current.unmount(),w.current=null);var Y=Math.round(12.6);p.current=e.registerMarker(0),g.current=null!=(c=e.registerDecoration({marker:p.current,x:Math.max(0,e.cols-Y),width:Y,layer:"top"}))?c:null,null==(l=g.current)||l.onRender(function(n){for(var i=!1,a=e.buffer.active._buffer.lines._array[S],l=b;l<e.cols;l++)if((null==a?void 0:a.hasContent(l))!==0){i=!0;break}var c=!i;w.current||(w.current=(0,o.createRoot)(n)),w.current.render(c?(0,r.Y)(s.u,{css:m.root,onClick:function(e){e.stopPropagation(),t()},keyCombo:v?void 0:y,text:"Generate",fontSize:Math.round(.9*d)}):null)})}},[t,u,v,y,d,n])}},17168:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M11.063 14.918V9.021h.875v.921h.077c.122-.315.32-.56.595-.733.274-.177.603-.265.987-.265.389 0 .712.088.97.265.262.174.466.418.611.733h.062c.15-.305.377-.546.68-.726.301-.181.664-.272 1.086-.272.527 0 .959.165 1.294.495.335.328.503.838.503 1.532v3.947h-.906v-3.947c0-.435-.12-.746-.357-.933a1.321 1.321 0 0 0-.841-.28c-.415 0-.736.125-.964.376-.228.248-.342.563-.342.945v3.84h-.921v-4.04c0-.335-.109-.605-.326-.81-.218-.208-.498-.311-.841-.311-.236 0-.456.062-.66.188a1.42 1.42 0 0 0-.492.522c-.123.22-.184.475-.184.764v3.686h-.906ZM6.706 15.056c-.374 0-.713-.07-1.018-.21a1.746 1.746 0 0 1-.726-.62c-.179-.27-.268-.598-.268-.982 0-.338.066-.612.2-.822.132-.212.31-.379.533-.499.223-.12.468-.21.737-.268.271-.062.544-.11.818-.146.358-.046.649-.081.872-.104.225-.026.389-.068.491-.127.105-.059.157-.161.157-.307v-.03c0-.38-.103-.674-.31-.884-.205-.21-.516-.315-.934-.315-.432 0-.771.095-1.017.284-.246.19-.419.392-.518.607l-.86-.307c.153-.358.358-.637.614-.837.258-.202.54-.343.845-.422.307-.082.609-.123.906-.123.19 0 .407.023.652.069.249.043.488.134.718.272.233.139.427.347.58.626.154.28.23.653.23 1.122v3.885h-.906v-.799h-.046a1.595 1.595 0 0 1-.307.411c-.143.146-.334.27-.572.373-.238.102-.528.153-.871.153Zm.138-.814c.358 0 .66-.07.906-.21a1.437 1.437 0 0 0 .752-1.249v-.829c-.038.046-.122.088-.253.127a4.271 4.271 0 0 1-.445.096 20.362 20.362 0 0 1-.868.115c-.236.03-.456.08-.66.15a1.138 1.138 0 0 0-.492.303c-.123.133-.184.315-.184.545 0 .315.116.553.35.714.235.159.533.238.894.238Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M4.15 4.75A1.65 1.65 0 0 0 2.5 6.4v11.2c0 .911.739 1.65 1.65 1.65h15.2A1.65 1.65 0 0 0 21 17.6V6.4a1.65 1.65 0 0 0-1.65-1.65H4.15ZM1 6.4a3.15 3.15 0 0 1 3.15-3.15h15.2A3.15 3.15 0 0 1 22.5 6.4v11.2a3.15 3.15 0 0 1-3.15 3.15H4.15A3.15 3.15 0 0 1 1 17.6V6.4Z",clipRule:"evenodd"})]}))}},17221:(e,n,t)=>{"use strict";function r(e){return e.replace("GraphQL error: ","")}t.d(n,{A:()=>r})},17254:(e,n,t)=>{"use strict";t.d(n,{_:()=>s});var r=t(29935),i=t(82643),o=t(66241),a=t(71514),l=t(83365);function s(){var e,n,t,s=(0,a.g)("showFileTreeGitStatus").preferences.showFileTreeGitStatus,c=(0,l.A)((t=(0,r._)(function(e){var n,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:if(!s)return[2,{status:null,error:null}];return[4,e.getRepositoryState()];case 1:if((n=r.sent()).error)return[2,n];if(n.type!==o.UN.NORMAL)return[2,{status:null,error:null}];return[4,e.status()];case 2:if((t=r.sent()).error)return[2,t];return[2,{status:t,error:null}]}})}),function(e){return t.apply(this,arguments)}),[s]);return c&&!c.error&&(null==(e=c.status)?void 0:e.changes)?function(e){var n=new Map,t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(null==(n=c.status)?void 0:n.changes):null}},17289:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M8.53 5.47a.75.75 0 0 1 0 1.06L3.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06l-6-6a.75.75 0 0 1 0-1.06l6-6a.75.75 0 0 1 1.06 0ZM19.5 9.5a.75.75 0 0 1 1.06 0l1.97 1.97a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 0 1-1.06-1.06L20.94 12l-1.44-1.44a.75.75 0 0 1 0-1.06ZM14.889 3.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})}))}},17337:(e,n,t)=>{"use strict";t.d(n,{A:()=>F});var r=t(81073),i=t(49384),o=t.n(i),a=t(12694),l=t(90629),s=t(17844),c=t(12584),u=t(41114),d=t(50175),p=t(49625);function f(){var e=(0,c._)(["\n  mutation RemoveMultiplayerUser($replId: String!, $username: String!) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,c._)(["\n  mutation DeleteMultiplayerInvite($replId: String!, $email: String!) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          collaborators {\n            user {\n              ...MultiplayerUser\n            }\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var m={},g=(0,u.J1)(f(),p._9),v=(0,u.J1)(h(),p._9),y=t(92930),w=t(1982);let b=function(){var e,n,t,r,i=(0,w.A)(),o=i.showConfirm,c=i.showError,u=(0,y.X)(),p=function(e,n){l.ZQ({message:n}),l.Cp(Error(e.message)),c("Something unexpected happened, please try again.")},f=(0,a._)((e={onError:function(e){return p(e,"useRemoveMultiplayerUser")},onCompleted:function(e){var n,t=null==(n=e.removeMultiplayerUser.user)?void 0:n.username;t?o("@".concat(t," removed")):o("User removed"),"data"===u.type&&u.refetch()}},n=(0,s._)({},m,e),d.n(g,n)),2),h=f[0],b=f[1].loading,S=(0,a._)((t={onError:function(e){return p(e,"useDeleteMultiplayerInviteMutation")},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInvite.__typename)return void c(e.deleteMultiplayerInvite.message);if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;o("Invite canceled for ".concat(n))}}},r=(0,s._)({},m,t),d.n(v,r)),2);return{removeMultiplayerUser:h,loadingRemoveUser:b,deleteMultiplayerInvite:S[0],loadingDeleteInvite:S[1].loading}};var S=t(70645),Y=t(36937),_=t(18509),A=t(27023),C=t(83070),k=t(4616),x=t(47876),D=t(85389),E=t(52447),R=t(87971),I=t(87064),T=(0,_.x)({root:[A.wp.cursor.default,A.wp.justify.spaceBetween],userContainer:[A.wp.viewStyle,A.wp.color.foregroundDefault],userContainer_pending:[A.wp.flex.grow(1),A.wp.flex.row,A.wp.rowWithGap(8),A.wp.align.center,{fontStyle:"italic"}]});let F=function(e){var n,t=e.isPendingInvitation,i=e.canEditMultiplayers,a=e.replId,l=b(),s=l.removeMultiplayerUser,c=l.loadingRemoveUser,u=l.deleteMultiplayerInvite,d=l.loadingDeleteInvite,p=!t,f=p?(0,r.Y)(E.A,{size:"m",url:e.user.image,username:e.user.username,fullName:e.user.fullName}):(0,r.Y)(R.A,{color:Y.LU.outlineDefault,size:32}),h=p?e.user.username:e.email;return(0,r.FD)(D.S,{css:T.root,px:16,py:4,row:!0,gap:8,align:"center",children:[p?(0,r.Y)(S.A,{username:e.user.username,children:(0,r.Y)(o(),{href:"/@".concat(e.user.username),css:T.userContainer,children:(0,r.Y)(x.K,{username:e.user.username,src:null!=(n=e.user.image)?n:null})})}):(0,r.FD)(D.S,{css:[T.userContainer_pending],children:[f,(0,r.Y)(k.EY,{color:p?"default":"dimmest",multiline:!1,children:h})]}),(0,r.FD)(D.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(k.EY,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),i?(0,r.Y)(C.K0,{alt:p?"Remove member":"Cancel invitation",onClick:function(){i&&(c||d||(p?s({variables:{replId:a,username:e.user.username}}):u({variables:{replId:a,email:e.email}})))},children:(0,r.Y)(I.A,{size:12})}):null]})]})}},17341:(e,n,t)=>{"use strict";t.d(n,{HM:()=>s,TW:()=>a,cL:()=>l,k:()=>u,kt:()=>i,qL:()=>o,zL:()=>c});var r=t(71355),i=new Date("2025-03-13"),o=new Date("2025-03-08");function a(e,n){var t,r;return(null==(r=e.contents)||null==(t=r.contents)?void 0:t.$kind)===n}function l(e,n){var t,r,i,o,a,l;return(null==(r=e.contents)||null==(t=r.contents)?void 0:t.$kind)==="agentTimelineEventContents"&&(null==(l=e.contents)||null==(a=l.contents)||null==(o=a.agentTimelineEventContents)||null==(i=o.toolData)?void 0:i.$kind)===n}function s(e,n){return l(e,n)?(0,r.QN)(e.contents.contents.agentTimelineEventContents.toolData):null}function c(e){if(a(e,"iterativeAgentEventContents")){var n=(0,r.QN)(e.contents.contents).contents;if((0,r.VF)(n,"appliedFileChanges"))return n.appliedFileChanges.eventWhichProposedChanges;if((0,r.VF)(n,"revertedFileChanges"))return(0,r.QN)(n).eventWhichProposedChanges;if((0,r.VF)(n,"installingPackages")||(0,r.VF)(n,"installedPackages"))return(0,r.QN)(n).eventWhichProposedPackageInstall;if((0,r.VF)(n,"startedShellExecution")||(0,r.VF)(n,"finishedShellExecution"))return(0,r.QN)(n).eventWhichProposedShellExecution;if((0,r.VF)(n,"appliedRunConfiguration"))return(0,r.QN)(n).eventWhichProposedRunConfiguration;if((0,r.VF)(n,"appliedDeploymentConfiguration"))return(0,r.QN)(n).eventWhichProposedDeploymentConfiguration;if((0,r.VF)(n,"appliedWorkflowConfiguration"))return(0,r.QN)(n).eventWhichProposedWorkflowConfiguration}}function u(e){var n=null==e?void 0:e.contents.contents;if(!e||!(0,r.VF)(n,"messageEventContents"))return!1;var t=n.messageEventContents,i=t.extraActions,o=t.assistantProposedActions;if(e.created<new Date("2025-01-22")){if((0,r.VF)(i,"proposedFileChanges")&&i.proposedFileChanges.changes.length)return!0;else if(o.fileChanges.length>0||o.shellCommands.length>0)return!0}else if(o.didCountEditRequest)return!0;return!1}},17375:(e,n,t)=>{"use strict";t.d(n,{A:()=>rQ});var r=t(17844),i=t(93629),o=t(12694),a=t(81073),l=t(67313),s=t(21462),c=t(90629),u=t(66890),d=t(49156),p=t(47322),f=t(34140),h=t(98679),m=t(1982),g=t(55100),v=t(17221),y=t(63172),w=t(17089),b=t(46449),S=t(72521),Y=t(73621),_=t(73997),A=t(83846),C=t(12546),k=t(29935),x=t(82643),D=t(33090),E=t(21762),R=t(41930),I=t(36937),T=t(85051),F=t(27023),P=t(4616),L=t(85389),U=t(24140),N=L.D.button,O=function(){return(0,a.Y)(L.S,{css:[{borderTop:"1px solid ".concat(I.LU.outlineDimmest)}],grow:!0,row:!0})},M=function(e){var n=e.isActive,t=e.isComplete,r=e.children,i=e.onClick,o=e.disabled;return(0,a.FD)(N,{type:"button",css:[F.wp.reset.button,F.wp.position.relative,T.b.nofill,n&&F.wp.backgroundColor.backgroundHigher,F.wp.p(4),F.wp.borderRadius(4)],onClick:i,disabled:o,children:[(0,a.Y)(P.EY,{variant:"small",multiline:!1,children:r}),t?(0,a.Y)(U.A,{size:6,strokeWidth:6,color:I.LU.foregroundDimmer,css:[F.wp.position.absolute,{top:2,right:-2}]}):null]})},H=t(62019),B=t(37743),z=t(1833),W=t(89264),G=t(12584),V=t(41114),Z=t(86997);function j(){var e=(0,G._)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return j=function(){return e},e}var q={},K=(0,V.J1)(j(),C.xS),$=t(76554),J=t(50175),Q=t(7613);function X(){var e=(0,G._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return X=function(){return e},e}function ee(){var e=(0,G._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return ee=function(){return e},e}var en={},et=(0,V.J1)(X(),C.xS,Q._O),er=(0,V.J1)(ee(),C.xS,Q._O),ei="Something went wrong publishing your Template";function eo(e){if(e.error)return e.error.message||ei;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;else if("Repl"!==e.data.createReplDeployment.__typename)return ei}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;else if("Repl"!==e.data.createReplRelease.__typename)return ei}}}function ea(){var e,n,t,i,a=(0,o._)((e=(0,r._)({},en,void 0),J.n(et,e)),2),l=a[0],s=a[1],c=(0,o._)((n=(0,r._)({},en,void 0),J.n(er,n)),2),u=c[0],d=c[1];return{createRelease:(t=(0,k._)(function(e){var n,t;return(0,x.YH)(this,function(r){switch(r.label){case 0:if(n=e.input,s.loading||d.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u({refetchQueries:["ReplEnvironmentHeader"],variables:{input:n}})];case 2:return[2,{data:(t=r.sent()).data,error:eo(t)}];case 3:return r.sent(),[2,{data:null,error:ei}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),createDeployment:(i=(0,k._)(function(e){var n,t;return(0,x.YH)(this,function(r){switch(r.label){case 0:if(n=e.input,s.loading||d.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l({variables:{input:n}})];case 2:return[2,{data:(t=r.sent()).data,error:eo(t)}];case 3:return r.sent(),[2,{data:null,error:ei}];case 4:return[2]}})}),function(e){return i.apply(this,arguments)}),data:s.data||d.data,loading:s.loading||d.loading,error:eo(s||d)}}function el(){var e=(0,G._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return el=function(){return e},e}var es={},ec=(0,V.J1)(el(),C.xS);function eu(e){var n,t,r,i,o,a,l;return e.error?e.error.message||"Something went wrong saving your Cover page":(null==(t=e.data)||null==(n=t.setReplViewSettings)?void 0:n.__typename)==="NotFoundError"||(null==(i=e.data)||null==(r=i.setReplViewSettings)?void 0:r.__typename)==="UnauthorizedError"||(null==(a=e.data)||null==(o=a.setReplViewSettings)?void 0:o.__typename)==="UserError"?e.data.setReplViewSettings.message:(null==(l=e.data)?void 0:l.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function ed(){var e=(0,G._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return ed=function(){return e},e}var ep={},ef=(0,V.J1)(ed(),C.xS);function eh(e){return e.message||"Something went wrong saving updates to your App"}var em=function(e){return e[e.Default=0]="Default",e[e.Saved=1]="Saved",e[e.Current=2]="Current",e}({}),eg=t(62976);function ev(e){var n=(0,o._)((0,s.useState)(null),2),t=n[0],a=n[1],l=(0,o._)((0,s.useState)(null),2),c=l[0],u=l[1],d=(0,eg.A)({onUpload:function(n){var t=n.url;a(null),e(t)},onUploadPreview:function(e){var n=e.dataUrl;u(null),a(n)},onError:function(e){a(null),u(e.message)}}),p=(0,s.useCallback)(function(){return u(null)},[]);return(0,i._)((0,r._)({},d),{error:c,clearError:p,previewUrl:t})}var ey=function(e){return e.ReplFile="repl_file",e.ReplImage="repl_image",e}({});function ew(e){return"repl_file"===e||"repl_image"===e}var eb=function(e){function n(){return(0,B._)(this,n),(0,H._)(this,n,arguments)}return(0,z._)(n,e),n}((0,W._)(Error)),eS=function(e){function n(){return(0,B._)(this,n),(0,H._)(this,n,arguments)}return(0,z._)(n,e),n}((0,W._)(Error)),eY=function(e){function n(){return(0,B._)(this,n),(0,H._)(this,n,arguments)}return(0,z._)(n,e),n}((0,W._)(Error));function e_(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your App a title"}}function eA(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this App do?"}}var eC=(0,s.createContext)(null),ek=function(e){var n=(0,s.useContext)(eC);if(!n)throw Error("usePublishField must be used within a PublishInputContext");return n["".concat(e,"Field")]},ex=function(){var e=(0,s.useContext)(eC);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e},eD=t(49384),eE=t.n(eD),eR=t(22115),eI=t(31450),eT=t(18509),eF=t(86733),eP=t(11938),eL=t(41358),eU=t(97298),eN=t(31599),eO=(0,eT.x)({truncateText:[F.wp.flex.growAndShrink(1),{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}]}),eM=function(e){var n=e.repl,t=(0,eU.z9)(n),o=n.url?(0,eU.fJ)(n):"",l=(0,eR.A)({text:"Check out what I just made on Replit: ".concat(n.title),url:o});return(0,a.FD)(eL.ui,{background:"default",css:[F.wp.borderRadius(8),F.wp.overflow("hidden"),F.wp.colWithGap(16),F.wp.width(510),F.wp.p(16),F.wp.flex.growAndShrink(1),(0,A._)({},"@media (max-width: ".concat(eI.LO.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,a.FD)(L.S,{gap:16,children:[(0,a.Y)(P.EY,{variant:"subheadBig",multiline:!1,children:"Share your App"})," ",(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)(P.EY,{variant:"small",multiline:!1,color:"dimmer",children:"Cover page link"}),(0,a.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(eE(),(0,i._)((0,r._)({},t),{css:eO.truncateText,children:o})),(0,a.Y)(eP.r,{tooltipDelay:"none",tooltipText:"Copy link",textToCopy:o})]})]})]}),(0,a.Y)(L.S,{css:[(0,A._)({alignItems:"flex-end"},F.$_.max("mobileMax"),[F.wp.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],row:!0,gap:12,justify:"end",children:(0,a.Y)(eF.v,{prefetch:!1,href:l,iconLeft:(0,a.Y)(eN.A,{}),text:"Share to X",target:"_blank",css:[(0,A._)({},F.$_.max("mobileMax"),[F.wp.mr(0)])]})})]})},eH=t(14760),eB=t(71872);function ez(e){var n=e.error,t=e.dataCy;return n?(0,a.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(eB.A,{css:[F.wp.color.accentNegativeStronger]}),(0,a.Y)(P.EY,{css:[F.wp.flex.growAndShrink(1),F.wp.color.accentNegativeStronger],dataCy:t,children:n.message})]}):null}var eW=t(28290),eG=t(40259),eV=L.D.label,eZ=(0,s.forwardRef)(function(e,n){return(0,a.Y)(eV,(0,i._)((0,r._)({},e),{ref:n,css:F.wp.color.foregroundDimmer}))}),ej=function(){var e=(0,eW.c)(),n=e("replName"),t=e("replDescription"),r=ex(),i=r.replTitleField,o=r.replDescriptionField,l=r.isSaving;return(0,a.FD)(L.S,{gap:16,grow:!0,shrink:!0,children:[(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)(L.S,{css:[F.wp.align.baseline,F.wp.justify.spaceBetween],row:!0,children:(0,a.Y)(eZ,{css:[F.wp.color.foregroundDimmer,{lineHeight:I.LU.lineHeightSmall}],htmlFor:n,children:"Repl name"})}),i.value]}),(0,a.FD)(L.S,{gap:4,children:[(0,a.FD)(L.S,{css:[F.wp.align.baseline,F.wp.justify.spaceBetween],row:!0,children:[(0,a.Y)(eZ,{css:[F.wp.color.foregroundDimmer,{lineHeight:I.LU.lineHeightSmall}],htmlFor:t,children:"Repl description"}),(0,a.FD)(P.EY,{multiline:!1,css:{color:o.value.length>1e3?I.LU.accentNegativeStronger:I.LU.foregroundDimmest},children:[o.value.length,"/",1e3]})]}),(0,a.Y)(eG.ov,{id:t,value:o.value,disabled:l,onChange:function(e){o.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[F.wp.minHeight(128),F.wp.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),o.touched?(0,a.Y)(ez,{error:o.error,dataCy:"publish-form-repl-description-error"}):null]})]})},eq=t(52492),eK=function(e){var n=e.showPlayButton,t=e.children,r=e.active;return(0,a.FD)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,a.Y)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?I.LU.accentPrimaryDimmest:void 0},children:t}),(0,a.FD)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,a.Y)("rect",{width:"268",height:"17",fill:I.LU.backgroundDefault}),(0,a.Y)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:I.LU.accentPositiveDimmer}),(0,a.Y)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:I.LU.backgroundHighest}),(0,a.Y)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:I.LU.backgroundHighest}),(0,a.Y)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?I.LU.accentPrimaryDefault:I.LU.outlineDimmer}),n?(0,a.Y)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:I.LU.white}):null,(0,a.Y)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?I.LU.accentPrimaryDefault:I.LU.outlineDimmer,strokeWidth:"1"})]})]})},e$=t(39695),eJ=t(41467),eQ=t(42793),eX=t(53384),e0=L.D.ol,e1=L.D.li,e2=(0,eQ.AH)([F.wp.py(4),F.wp.borderRadius(8),{border:"1px solid ".concat(I.LU.outlineDimmest),borderRadius:I.LU.borderRadius8,backgroundColor:I.LU.interactiveBackground,zIndex:F.r1,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:I.LU.space8,listStyle:"none"}]),e4={backgroundColor:I.LU.interactiveBackgroundActive},e5={backgroundColor:I.LU.accentPrimaryDimmer},e3=(0,eQ.AH)([F.wp.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,r._)({},e4),":active":(0,r._)({},e5)}}]);function e7(e){var n,t,l,c,u,d,p,f,m,g,v,y,w,b,S,Y,_=e.fs,A=e.initiallySelectedFile,C=e.onFileSelect,D=e.onClear,E=(0,s.useRef)(null),R=(t=(n=(0,o._)((0,s.useState)({isLoading:!0,error:null,files:[]}),2))[0],l=n[1],(0,s.useEffect)(function(){function e(){return(e=(0,k._)(function(){var e,n;return(0,x.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,_.listFiles()];case 1:if((e=t.sent()).error)throw Error(e.error);return l({isLoading:!1,error:null,files:(null!=(n=e.files)?n:[]).slice().sort(function(e,n){return e.localeCompare(n)}).map(function(e){return{file:e,pathDepth:(0,eJ.jP)(e)}}).sort(function(e,n){return e.pathDepth-n.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return t.sent(),l({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[_]),(0,r._)({},t)),I=R.isLoading,T=R.files,U=R.error,N=(u=(c={files:T,inputRef:E,initiallySelectedFile:A}).files,d=c.inputRef,p=c.initiallySelectedFile,m=(f=(0,o._)((0,s.useState)(!1),2))[0],g=f[1],y=(v=(0,o._)((0,s.useState)(u),2))[0],w=v[1],b=(0,s.useCallback)(function(e){return u.filter(function(n){return n.toLowerCase().includes(e.toLowerCase())})},[u]),S=(0,e$.Bp)({items:y,isOpen:m,initialInputValue:p,initialSelectedItem:y.find(function(e){return e===p}),onIsOpenChange:function(e){g(!!e.isOpen)},onInputValueChange:function(e){var n;w(b(null!=(n=e.inputValue)?n:""))}}),Y=(0,s.useCallback)(function(){var e;g(!1),null==(e=d.current)||e.blur()},[d]),(0,s.useEffect)(function(){var e;w(b(null!=(e=S.inputValue)?e:""))},[u,b,S.inputValue]),(0,s.useEffect)(function(){S.selectedItem&&Y()},[S.selectedItem,Y]),(0,i._)((0,r._)({},S),{closeMenu:Y,items:y})),O=(0,h.A)(C);return(0,s.useEffect)(function(){N.selectedItem&&O.current(N.selectedItem)},[N.selectedItem,O]),(0,a.FD)(L.S,{children:[(0,a.Y)(L.S,(0,i._)((0,r._)({},N.getComboboxProps({refKey:"innerRef"})),{css:[F.wp.position.relative],children:(0,a.Y)(eX.I,(0,i._)((0,r._)({},N.getInputProps({onFocus:N.openMenu,ref:E,refKey:"inputRef",disabled:I,placeholder:"Search your files"})),{onClear:function(){var e;N.reset(),null==(e=E.current)||e.focus(),D()},loading:I}))})),(0,a.FD)(L.S,(0,i._)((0,r._)({},N.getMenuProps({refKey:"innerRef"})),{css:[F.wp.position.relative],children:[U?(0,a.Y)(L.S,{p:8,children:(0,a.Y)(P.EY,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!U&&N.isOpen?(0,a.Y)(e0,{css:[e2],children:N.items.length>0?N.items.map(function(e,n){return(0,a.Y)(e1,(0,i._)((0,r._)({css:[e3,N.highlightedIndex===n&&e4,e===N.selectedItem&&e5]},N.getItemProps({item:e,index:n,onClick:function(){N.closeMenu()}})),{children:(0,a.Y)(P.EY,{multiline:!1,children:e})}),e)}):(0,a.Y)(e1,{css:[F.wp.p(8)],children:(0,a.FD)(P.EY,{multiline:!1,children:['No files found for "',N.inputValue,'"']})})}):null]}))]})}var e6=t(24840),e8=function(e){var n=(0,s.useRef)(null);return{inputProps:{onChange:function(n){var t=n.target,r=t.validity,i=t.files;if(r.valid){var o=i?i[0]:null;o&&e(o)}},"aria-hidden":"true",ref:n,accept:e6.DA.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null==(e=n.current)?void 0:e.click()}},inputRef:n}},e9=function(e){var n=e8(e.onFile),t=n.inputProps,o=n.buttonProps;return(0,a.FD)(a.FK,{children:[(0,a.Y)("input",(0,i._)((0,r._)({},t),{css:{display:"none"}})),e.children(o)]})},ne=t(55576),nn=(0,eQ.AH)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function nt(e){var n=e.src,t=e.alt;return(0,a.FD)(L.S,{css:[nn,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,a.Y)(ne.A,{objectFit:"cover",layout:"fill",src:n,alt:t}),(0,a.Y)(L.S,{css:[nn,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}var nr=t(11769),ni=t(37582),no=t(36073),na=t(27959),nl=t(63456),ns=[{value:ey.ReplImage,text:"Photo"},{value:ey.ReplFile,text:"File"}],nc=function(e){var n,t,l,c,u,d,p=e.fs,f=(0,eW.c)(),h=f("coverPage"),m=ex(),g=m.selectedRepl,v=m.coverFileField,y=m.coverUrlField,w=m.coverDefaultViewField,b=(0,o._)((n=(0,k._)(function(e){var n;return(0,x.YH)(this,function(t){switch(t.label){case 0:if(!(null==e?void 0:e.length)||!(n=e[0]).type.startsWith("image/"))return[2];return[4,_.uploadImage(n,eq.VL.ReplCoverImage)];case 1:return t.sent(),[2]}})}),t=function(e){return n.apply(this,arguments)},c=(l=(0,o._)((0,s.useState)(!1),2))[0],u=l[1],d=(0,s.useRef)(0),[c,(0,s.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),d.current++,u(!0)},onDragLeave:function(e){e.preventDefault(),d.current--,0===d.current&&u(!1)},onDrop:function(e){e.preventDefault(),d.current=0,u(!1),e.persist();var n,r,i=Array.from(null!=(r=null==e||null==(n=e.dataTransfer)?void 0:n.files)?r:[]);if(0===i.length)return void t(null);t(i)},onDragOver:function(e){e.preventDefault()}}},[t])]),2),S=b[0],Y=b[1],_=ev(y.setValue);return(0,a.FD)(L.S,(0,i._)((0,r._)({gap:16},Y),{children:[(0,a.FD)(L.S,{gap:12,children:[(0,a.Y)(L.S,{row:!0,gap:8,children:(0,a.Y)(ni.z,{tag:"fieldset",css:[F.wp.rowWithGap(24)],name:h,value:w.value,onChange:function(e){ew(e.target.value)&&w.setValue(e.target.value)},children:ns.map(function(e){return(0,a.FD)(L.S,{row:!0,gap:8,children:[(0,a.Y)(ni.s,{id:f(e.value),value:e.value}),(0,a.Y)("label",{htmlFor:f(e.value),children:e.text})]},e.value)})})}),w.value===ey.ReplImage&&(0,a.FD)(L.S,{gap:4,align:"center",children:[(0,a.Y)(e9,{onFile:function(e){return _.uploadImage(e,eq.VL.ReplCoverImage)},children:function(e){var n=e.onClick;return(0,a.Y)(nr.$n,{onClick:n,colorway:S?"primary":void 0,text:"Upload a cover photo",iconLeft:_.isLoading?(0,a.Y)(nl.A,{}):(0,a.Y)(na.A,{}),stretch:!0})}}),_.error?(0,a.Y)(no.N,{colorway:"negative",icon:(0,a.Y)(eB.A,{}),text:_.error}):null,(0,a.Y)(P.EY,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),w.value===ey.ReplFile&&(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(e7,{fs:p,initiallySelectedFile:v.value,onFileSelect:v.setValue,onClear:function(){return v.setValue("")}},null==g?void 0:g.id),(0,a.Y)(ez,{error:v.error})]})]}),w.value===ey.ReplImage&&(0,a.FD)(eK,{active:S,showPlayButton:w.value===ey.ReplImage&&!!y.value&&!_.isLoading,children:[w.value===ey.ReplImage&&y.value?(0,a.Y)(nt,{src:y.value,alt:"cover"}):null,_.isLoading?(0,a.Y)(L.S,{css:[{position:"absolute",inset:0},F.wp.align.center,F.wp.justify.center],children:(0,a.Y)(nl.A,{color:I.LU.white,size:24})}):null]})]}))},nu=t(34229),nd=t(87064),np=function(){ek("iconUrl");var e=ex(),n=e.replIconInput,t=e.replIconUrl;return(0,a.FD)(L.S,{gap:16,align:"center",children:[(0,a.FD)(L.S,{gap:8,children:[(0,a.FD)(L.S,{row:!0,gap:8,children:[(0,a.Y)(e9,{onFile:function(e){return n.uploadImage(e,eq.VL.ReplIcon)},css:F.wp.backgroundColor.accentNegativeDefault,children:function(e){var n=e.onClick;return(0,a.Y)(nr.$n,{onClick:n,text:"Upload image",iconLeft:(0,a.Y)(na.A,{}),css:[F.wp.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),n.error?(0,a.Y)(L.S,{children:(0,a.Y)(no.N,{icon:(0,a.Y)(eB.A,{}),colorway:"negative",text:n.error,closable:!0,closeAction:n.clearError})}):null]}),(0,a.Y)(nu.Mn,{alt:"icon",size:84,iconUrl:t,isLoading:!!n.previewUrl,css:[F.wp.backgroundColor.backgroundHigher]})]})},nf=function(){return(0,a.Y)(L.S,{gap:8,children:(0,a.Y)(L.S,{children:(0,a.FD)(P.EY,{children:["See the"," ",(0,a.Y)("a",{href:"https://docs.replit.com/replit-workspace/templates",target:"_blank",children:"template docs"})," ","for a guide on what makes a good template. Please make sure your Repl abides by the"," ",(0,a.Y)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})})},nh=t(23099),nm=t.n(nh),ng=t(91246),nv=t.n(ng),ny=t(17459),nw=t(79166),nb=t(29267),nS=(0,eT.x)({container:[F.wp.maxWidth(100),F.wp.backgroundColor.backgroundDefault,F.wp.borderRadius(4),{aspectRatio:"1 / 1"}],stacked:[F.wp.flex.grow(1),F.wp.colWithGap(2),F.wp.justify.spaceEvenly],sideBySide:[F.wp.flex.grow(1),F.wp.rowWithGap(2)],paneGroup:[F.wp.p(2),F.wp.flex.grow(1),F.wp.backgroundColor.backgroundHigher,F.wp.center]});function nY(e){var n=e.layoutState,t=(0,ny._)(e,["layoutState"]);return(0,a.Y)(L.S,(0,i._)((0,r._)({css:nS.container,p:4,row:!0},t),{children:(0,a.Y)(n_,{root:n.layout,paneData:n.data})}))}function n_(e){var n,t=e.root,r=e.paneData;return null==t.tiling?null:(0,a.Y)(L.S,{grow:!0,row:!0,children:(null==(n=t.tiling)?void 0:n.type)==="split"?(0,a.Y)(nA,{split:t.tiling,paneData:r,depth:1}):(0,a.Y)(nC,{group:t.tiling,paneData:r,depth:1})})}function nA(e){var n=e.split,t=e.paneData,r=e.depth;return r>2?(0,a.Y)(nk,{}):(0,a.Y)(L.S,{css:n.stacked?nS.stacked:nS.sideBySide,children:n.children.map(function(e){return"split"===e.type?(0,a.Y)(nA,{split:e,paneData:t,depth:r+1},e.type+r):(0,a.Y)(nC,{group:e,paneData:t,depth:r+1},e.type+r)})})}function nC(e){var n=e.group,t=e.paneData,r=e.depth,i=t[n.panes[n.activeIndex]],o=(0,nw.Vv)(),l=o.Icon({pane:i,size:r>1?12:16}),s=o.getTitle(i);return(0,a.Y)(L.S,{css:nS.paneGroup,title:s,children:l})}function nk(){return(0,a.Y)(L.S,{css:nS.paneGroup,children:(0,a.Y)(nb.A,{})})}var nx=t(86105),nD=(0,eT.x)({layoutButton:[F.wp.borderRadius(4),F.wp.p(8),F.wp.border({width:1,color:I.LU.greyDimmer}),F.wp.backgroundColor.backgroundHigher,F.wp.cursor.pointer,{"&:hover":[F.wp.backgroundColor.backgroundHighest],'&[data-selected="true"]':[F.wp.backgroundColor.accentPrimaryDimmest,F.wp.border({color:I.LU.blueDimmer})],'&[data-selected="true"]:hover':[F.wp.backgroundColor.accentPrimaryDimmer],'&[data-disabled="true"]':[F.wp.backgroundColor.backgroundDefault,F.wp.border({color:I.LU.greyDimmest}),F.wp.color.foregroundDimmer,{"&:hover":{cursor:"not-allowed"}}]}],layoutButtonRow:[F.wp.rowWithGap(8),F.wp.justify.spaceBetween,F.wp.width("100%")],layoutButtonText:[F.wp.flex.growAndShrink(1),F.wp.flex.column,F.wp.justify.center],layoutButtonHeader:[F.wp.mb(4)],layoutPreview:[F.wp.width(80),F.wp.height(80),{alignSelf:"center"}]});function nE(e){var n,t=e.getCurrentLayoutState(),r=nm()(nv()(t,"sidebarPercent"),nv()(e.savedLayoutState,"sidebarPercent")),i=(n=(0,nw.Vv)(),(0,s.useCallback)(function(e){if((null==e?void 0:e.layout.tiling)==null)return"No tiled panes in layout";for(var t=[],r=[e.layout.tiling];r.length>0;){var i=r.pop();(null==i?void 0:i.type)==="paneGroup"?t.push.apply(t,(0,nx._)(i.panes)):(null==i?void 0:i.children)&&r.push.apply(r,(0,nx._)(i.children))}return t.reverse().map(function(t){return n.getTitle(e.data[t])}).join(", ")},[n])),o=(0,s.useMemo)(function(){return i(e.savedLayoutState)},[i,e.savedLayoutState]),l=(0,s.useMemo)(function(){return i(t)},[t,i]);return(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(P.EY,{variant:"small",children:"Choose an initial workspace layout for new Apps using this template."}),(0,a.Y)(eL.ui,{css:nD.layoutButton,"data-selected":e.templateLayout.value===em.Default,onClick:function(){return e.templateLayout.setValue(em.Default)},children:(0,a.Y)(L.S,{css:nD.layoutButtonRow,children:(0,a.FD)(L.S,{css:nD.layoutButtonText,children:[(0,a.Y)(P.Y9,{level:3,variant:"text",css:nD.layoutButtonHeader,children:"Default layout"}),(0,a.Y)(P.EY,{multiline:!0,variant:"small",children:"User's default layout (either side-by-side or stacked)."})]})})}),e.savedLayoutState?(0,a.Y)(eL.ui,{css:nD.layoutButton,"data-selected":e.templateLayout.value===em.Saved,onClick:function(){return e.templateLayout.setValue(em.Saved)},children:(0,a.FD)(L.S,{css:nD.layoutButtonRow,children:[(0,a.FD)(L.S,{css:nD.layoutButtonText,children:[(0,a.Y)(P.Y9,{level:3,variant:"text",css:nD.layoutButtonHeader,children:"Saved layout"}),(0,a.Y)(P.EY,{variant:"small",children:o})]}),(0,a.Y)(nY,{css:nD.layoutPreview,layoutState:e.savedLayoutState})]})}):null,(0,a.Y)(eL.ui,{css:nD.layoutButton,"data-selected":e.templateLayout.value===em.Current,"data-disabled":r,onClick:r?void 0:function(){return e.templateLayout.setValue(em.Current)},children:(0,a.FD)(L.S,{css:nD.layoutButtonRow,children:[(0,a.FD)(L.S,{css:nD.layoutButtonText,children:[(0,a.Y)(P.Y9,{level:3,variant:"text",css:nD.layoutButtonHeader,children:"Current layout"}),(0,a.Y)(P.EY,{variant:"small",children:r?"Same as saved layout":l})]}),(0,a.Y)(nY,{css:nD.layoutPreview,layoutState:t})]})})]})}function nR(e){var n=e.getCurrentLayoutState,t=ek("layout");return(0,a.Y)(L.S,{gap:8,children:null==n?(0,a.Y)(P.EY,{children:"Initial layouts may only be customized in the desktop environment."}):(0,a.Y)(nE,{templateLayout:t,getCurrentLayoutState:n})})}var nI=t(39363),nT=t(74671),nF=t(23125),nP=t(7733),nL=t(37523),nU=t(42683),nN=t(10752),nO=t(47456),nM=t(78626),nH=t(88173),nB=t(2760),nz=t(1035),nW=t(81785),nG=(0,eT.x)({rootContainer:[(0,A._)({},(0,nH.wm)("tabletMin"),{display:"flex"}),F.wp.flex.growAndShrink(1),F.wp.p(16),F.wp.colWithGap(12),F.wp.align.center,F.wp.display.none],heading:[F.wp.width("100%"),{fontWeight:I.LU.fontWeightMedium}],contentContainer:[F.wp.width("100%"),F.wp.maxWidth(432),F.wp.position.relative],topShadow:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+I.LU.backgroundRoot+", inset 0 -48px 24px -24px "+I.LU.backgroundRoot},feed:[F.wp.height(416),F.wp.colWithGap(24),F.wp.justify.center,F.wp.overflow("hidden"),F.wp.backgroundColor.backgroundRoot]}),nV=L.D.form,nZ=function(e){var n=e.user,t=ex(),o=t.selectedRepl,l=t.replTitleField,s=t.replDescriptionField,c=t.replIconUrl;return(0,a.FD)(eL.ui,{background:"root",css:nG.rootContainer,children:[(0,a.Y)(P.EY,{multiline:!1,variant:"small",color:"dimmer",css:nG.heading,children:"Preview"}),(0,a.FD)(L.S,{css:nG.contentContainer,children:[(0,a.Y)(L.S,{css:nG.topShadow}),(0,a.FD)(L.S,{css:nG.feed,children:[(0,a.Y)(eH.v,{}),o&&c?(0,a.Y)(eH.A,{post:{user:n,repl:(0,i._)((0,r._)({},o),{title:l.value,iconUrl:c,description:s.value,isTemplate:!0})}}):(0,a.Y)(L.S,{grow:!0,align:"center",justify:"center",children:(0,a.Y)(nl.A,{})}),(0,a.Y)(eH.v,{})]})]})]})},nj=["Basics","Icon","Cover page","Layout","Publishing"],nq=(0,eT.x)({rootContainer:[F.wp.borderRadius(8),F.wp.flex.row,F.wp.overflow("hidden"),(0,A._)({},(0,nH.wm)("tabletMax"),{minWidth:850})],formContainer:[F.wp.minWidth(320),F.wp.flex.growAndShrink(1),(0,A._)({},(0,nH.wm)("tabletMin"),{maxWidth:370})],form:[F.wp.colWithGap(16),F.wp.flex.growAndShrink(1)],loadingContainer:[F.wp.color.foregroundDimmer],submitButton:[{boxShadow:"0px 0px 16px 0px ".concat(I.LU.accentPrimaryDimmer," !important")}]});function nK(e){var n,t,i,l,c,d,p,f,m,g,v,y,b,S,Y,_,A,C,I,T,U,N,H,B=e.replId,z=e.currentUser,W=e.source,G=e.getDesktopLayoutState,V=(n=(0,k._)(function(e){var n;return(0,x.YH)(this,function(t){switch(t.label){case 0:if(!eN)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,eN.stat(e)];case 2:if(!(n=t.sent()).exists||n.type!==D.pt.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return t.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),j=(0,R.a)({tablet:!0}),Q=(0,E._P)({type:"boolean",controlName:"flag-template-layout-author"}),X=!j&&Q&&null!=G,ee=function(e){var n,t,i,a,l,c,d,p,f=(n={variables:{id:e.replId}},t=(0,r._)({},q,n),Z.I(K,t)),m=(null==(i=f.data)?void 0:i.repl.__typename)==="Repl"?f.data.repl:null,g=!!(null==m?void 0:m.publishedAs),v=(0,$.W)("",e_),y=(0,$.W)("",eA),b=(0,$.W)(null,function(){return null}),S=(0,$.W)("repl_image",function(){return null}),Y=(0,$.W)(null,function(){return null}),_=(0,$.W)("",e.fileValidator),A=(0,$.W)(em.Default,function(){}),C=[v,y,b,S,Y,_,A],D=function(){var e,n=(0,o._)((e=(0,r._)({},es,void 0),J.n(ec,e)),2),t=n[0],i=n[1];function a(){return(a=(0,k._)(function(e){var n;return(0,x.YH)(this,function(r){switch(r.label){case 0:if(i.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t({variables:{input:e}})];case 2:return[2,{data:(n=r.sent()).data,error:eu(n)}];case 3:return r.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})).apply(this,arguments)}return{data:i.data,loading:i.loading,error:eu(i),setReplViewSettings:function(e){return a.apply(this,arguments)}}}(),E=function(){var e,n=(0,o._)((e=(0,r._)({},ep,void 0),J.n(ef,e)),2),t=n[0],i=n[1];function a(){return(a=(0,k._)(function(e){return(0,x.YH)(this,function(n){switch(n.label){case 0:if(i.loading)return[2,{data:null,error:null}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t({variables:{input:e}})];case 2:return[2,{data:n.sent().data,error:null}];case 3:return[2,{data:null,error:eh(n.sent())}];case 4:return[2]}})})).apply(this,arguments)}return{data:i.data,loading:i.loading,error:i.error&&eh(i.error),updateRepl:function(e){return a.apply(this,arguments)}}}(),R=ea(),I=(null==m||null==(a=m.replViewSettings)?void 0:a.defaultView)&&ew(m.replViewSettings.defaultView)?m.replViewSettings.defaultView:"repl_image",T=(0,h.A)(v.setValue),F=(0,h.A)(y.setValue),P=(0,h.A)(b.setValue),L=(0,h.A)(Y.setValue),U=(0,h.A)(S.setValue),N=(0,h.A)(_.setValue);(0,s.useEffect)(function(){var e,n,t,r;m&&(U.current(I),N.current(null!=(n=null==(e=m.replViewSettings)?void 0:e.replFile)?n:""),T.current(m.isRenamed?m.title:"",{preventTouch:!0}),F.current(null!=(t=m.description)?t:"",{preventTouch:!0}),P.current(m.iconUrl.endsWith(".svg")?null:m.iconUrl),L.current(null!=(r=m.imageUrl)?r:null))},[m,L,P,T,F,I,U,N]);var O=ev(b.setValue),M=O.previewUrl||b.value||(null==m?void 0:m.iconUrl)||(null==m?void 0:m.templateInfo.iconUrl),H=null!=(p=null==(d=C.filter(function(e){return(e!==_||"repl_file"===S.value)&&e.error}))||null==(c=d[0])||null==(l=c.error)?void 0:l.message)?p:null;function B(){return(B=(0,k._)(function(){var e,n,t,r,i,o,a,l,s;return(0,x.YH)(this,function(c){switch(c.label){case 0:if(!m)throw new eb("Missing repl");if(n=m.title!==v.value,t=m.description!==y.value,r=m.iconUrl!==b.value,i="repl_image"===S.value&&m.imageUrl!==Y.value,o=_.value&&"repl_file"===S.value&&(null==(e=m.replViewSettings)?void 0:e.replFile)!==_.value,a=S.value&&I!==S.value,!(n||t||r))return[3,2];if(v.error||y.error||b.error)throw new eb;return[4,E.updateRepl({id:m.id,title:n?v.value:void 0,description:t?y.value:void 0,iconUrl:r?b.value:void 0})];case 1:if((l=c.sent()).error)throw new eS(l.error);c.label=2;case 2:if(!(a||i||o))return[3,4];if("repl_image"===S.value&&Y.error||"repl_file"===S.value&&_.error)throw new eb;return[4,D.setReplViewSettings({replId:m.id,defaultView:"repl_image"===S.value?u.Qjt.ReplImage:u.Qjt.ReplFile,replImage:i?Y.value:void 0,replFile:o?_.value:void 0})];case 3:if((s=c.sent()).error)throw new eS(s.error);c.label=4;case 4:return[2]}})})).apply(this,arguments)}function z(){return(z=(0,k._)(function(){var n,t,r;return(0,x.YH)(this,function(i){switch(i.label){case 0:if(!m)throw new eb("Missing repl");if(H)throw new eb(null!=H?H:"Something went wrong");return n=null,e.canAuthorTemplateLayout&&A.value===em.Current&&(n=null==(t=e.getDesktopLayoutState)?void 0:t.call(e)),[4,R.createDeployment({input:{replId:m.id,description:y.value,iconUrl:M||m.iconUrl,initialLayoutState:n}})];case 1:if((r=i.sent()).error)throw new eY(r.error);return(0,w.u4)(w.AZ.POST_MADE,{source:e.source,replType:"template_repl",title:v.value,description:y.value,defaultView:S.value}),[2]}})})).apply(this,arguments)}var W=E.loading||D.loading,G=E.error||D.error,V=R.loading,j=R.error;return{selectedRepl:m,isReplLoading:f.loading,replLoadingError:f.error,replTitleField:v,replDescriptionField:y,iconUrlField:b,coverDefaultViewField:S,coverUrlField:Y,coverFileField:_,layoutField:A,replIconInput:O,replIconUrl:M,inputError:H,save:function(){return B.apply(this,arguments)},isSaving:W,savingError:G,publishInitialRelease:function(){return z.apply(this,arguments)},isPublishing:V,publishingError:j,isPublished:g}}({replId:B,fileValidator:V,source:W,canAuthorTemplateLayout:X,getDesktopLayoutState:G}),en=ee.selectedRepl,et=ee.isReplLoading,er=ee.replLoadingError,ei=ee.replTitleField,eo=ee.replDescriptionField,el=ee.iconUrlField,ed=ee.coverDefaultViewField,eg=ee.coverUrlField,ek=ee.coverFileField,ex=ee.layoutField,eD=ee.save,eE=ee.isSaving,eR=ee.savingError,eI=ee.publishInitialRelease,eT=ee.isPublishing,eF=ee.publishingError,eP=ee.isPublished,eU=(i=(t={repl:en,currentUser:z}).repl,l=t.currentUser,d=(c=(0,o._)((0,nN.eY)(),2))[0],p=c[1],f=(0,nN.ZM)(),g=(m=(0,o._)((0,s.useState)(function(){var e,n,t;return e=(0,nT.Ay)({onUnrecoverableError:(0,nU.A)({throwBsod:p,origin:"Publish: services/onUnrecoverableError"})}),n=(0,nL.A)({container:e}),t=(0,nI.A)({container:e,fs:n}),{container:e,fs:n,dotReplit:t}}),1)[0]).container,v=m.fs,y=m.dotReplit,S=(b=(0,o._)((0,s.useState)(function(){return g.getConnectionState()===nT.KN.CONNECTED}),2))[0],Y=b[1],_=(0,nF.$)(i?{repl:i,currentUser:l}:null),A=(0,nP.L)(),(0,s.useEffect)(function(){if(i&&_&&g.getConnectionState()===nT.KN.DISCONNECTED)return g.connect({context:_,getMinimumRetryDelayMs:A}),function(){return g.close()}},[i,g,_]),(0,s.useEffect)(function(){return g.onConnectionStateChanged(function(e){Y(e===nT.KN.CONNECTED)})},[g]),{isConnected:S,container:g,fs:v,dotReplit:y,bsodId:null==d?void 0:d.eventId,devClearBsod:function(){return f()}}),eN=eU.fs,eO=eU.dotReplit,eH=eU.bsodId,ez=X&&!eP?[]:["Layout"],eW=(0,o._)((0,s.useState)(0),2),eG=eW[0],eV=eW[1],eZ=nj[eG],eq=eG===nj.length-1,eK=(0,o._)((0,s.useState)({show:!1,isUpdate:!1}),2),e$=eK[0],eJ=eK[1],eQ=(0,o._)((0,s.useState)(function(){return Array(nj.length).fill(!1)}),2),eX=eQ[0],e0=eQ[1],e1=(0,s.useCallback)(function(e,n){eX[e]=n,e0(eX)},[eX]);(0,s.useEffect)(function(){ee.replTitleField.value&&ee.replDescriptionField.value?e1(0,!0):e1(0,!1),ee.iconUrlField.value?e1(2,!0):e1(2,!1),ee.coverDefaultViewField.value===ey.ReplImage&&ee.coverUrlField.value||ee.coverDefaultViewField.value===ey.ReplFile&&ee.coverFileField.value?e1(3,!0):e1(3,!1)},[eX,ee,e1]);var e2=(I=(C=(0,o._)((0,s.useState)({isLoading:!0,error:null,entryPoint:null}),2))[0],T=C[1],(0,s.useEffect)(function(){function e(){return(e=(0,k._)(function(){var e,n,t;return(0,x.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,eO.getConfig()];case 1:if((n=r.sent()).error)throw Error(n.errorMessage);return T({isLoading:!1,error:null,entryPoint:null!=(t=null==n||null==(e=n.config)?void 0:e.entrypoint)?t:null}),[3,3];case 2:return r.sent(),T({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[eO]),(0,r._)({},I));(0,s.useEffect)(function(){e2.isLoading||!e2.entryPoint||ek.value||ek.setValue(e2.entryPoint)},[e2.isLoading,e2.entryPoint,ek]);var e4=(0,o._)((0,s.useState)(!1),2),e5=e4[0],e3=e4[1];(0,s.useEffect)(function(){e5||B&&(et||eP)||(e3(!0),(0,w.u4)(w.AZ.PUBLISH_SELECTED,{source:W}))},[e5,W,B,et,eP]);var e7=(0,h.A)(!!(null==en?void 0:en.publishedAs)),e6=(0,h.A)(eZ);if((0,s.useEffect)(function(){return function(){e7.current||(0,w.u4)(w.AZ.PUBLISH_FLOW_EXITED,{source:W,lastSectionVisited:e6.current})}},[W,e7,e6]),eH)return(0,a.Y)(nO.A,{});if(e$.show&&en)return(0,a.Y)(eM,{repl:en});var e8={Basics:{hasError:!!(ei.error||eo.error),isValid:(0,k._)(function(){return(0,x.YH)(this,function(e){switch(e.label){case 0:return[4,Promise.all([ei.validate(),eo.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})},Icon:{hasError:!!el.error,isValid:(0,k._)(function(){return(0,x.YH)(this,function(e){switch(e.label){case 0:return[4,el.validate()];case 1:return[2,!e.sent()]}})})},"Cover page":{hasError:!!(ed.value===ey.ReplImage?eg.error:ek.error),isValid:(0,k._)(function(){var e;return(0,x.YH)(this,function(n){switch(n.label){case 0:if(ed.value!==ey.ReplImage)return[3,2];return[4,eg.validate()];case 1:return e=!n.sent(),[3,4];case 2:return[4,ek.validate()];case 3:e=!n.sent(),n.label=4;case 4:return[2,e]}})})},Layout:{hasError:!!ex.error,isValid:(0,k._)(function(){return(0,x.YH)(this,function(e){switch(e.label){case 0:return[4,ex.validate()];case 1:return[2,!e.sent()]}})})},Publishing:{hasError:!1,isValid:(0,k._)(function(){return(0,x.YH)(this,function(e){return[2,!0]})})}},e9=e8[eZ].hasError,ne=e8[eZ].isValid,nn=null!=(H=nj.find(function(e){return e8[e].hasError}))?H:null,nt=null;en?er||eR||eF?nt="Something went wrong - please try again":e9&&(nt="Please fill out the the form"):nt="Please select a Repl";var ni=!!(!en||e9||er||et||eE||eT),na=(U=(0,k._)(function(e){var n;return(0,x.YH)(this,function(t){switch(t.label){case 0:if(n=ni)return[3,2];return[4,ne()];case 1:n=!t.sent(),t.label=2;case 2:if(n)return[2];if(!ez.includes(nj[e]))return[3,4];return[4,na(e+1)];case 3:case 6:return t.sent(),[2];case 4:return t.trys.push([4,6,,7]),eV(e),[4,eD()];case 5:return t.sent(),[3,7];case 7:return[2]}})}),function(e){return U.apply(this,arguments)}),ns=eG>0;return(0,a.Y)(eC.Provider,{value:ee,children:(0,a.FD)(eL.ui,{css:nq.rootContainer,background:"default",dataCy:"publish-form-container",children:[(0,a.FD)(L.S,{css:nq.formContainer,p:16,gap:12,children:[(0,a.Y)(P.EY,{variant:"subheadBig",multiline:!1,children:eP?"Edit publish settings":"Publish template"}),(0,a.FD)(nV,{onSubmit:(N=(0,k._)(function(e){var n,t,r,i,o,a;return(0,x.YH)(this,function(l){switch(l.label){case 0:if(e.preventDefault(),!eq)return[3,13];n=!0,t=!1,r=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),i=nj[Symbol.iterator](),l.label=2;case 2:if(n=(o=i.next()).done)return[3,5];return[4,e8[o.value].isValid()];case 3:if(!l.sent())return[2];l.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,r=a,[3,8];case 7:try{n||null==i.return||i.return()}finally{if(t)throw r}return[7];case 8:if(eP)return[3,10];return[4,eI()];case 9:return l.sent(),eJ({show:!0,isUpdate:!1}),[3,12];case 10:return[4,eD()];case 11:l.sent(),eJ({show:!0,isUpdate:!0}),l.label=12;case 12:return[3,14];case 13:na(eG+1),l.label=14;case 14:return[2]}})}),function(e){return N.apply(this,arguments)}),css:nq.form,children:[(0,a.Y)(L.S,{row:!0,gap:4,align:"center",children:nj.map(function(e,n){return ez.includes(e)?null:(0,a.FD)(s.Fragment,{children:[0!==n&&(0,a.Y)(O,{}),(0,a.Y)(M,{isActive:eG===n,isComplete:eX[n],onClick:function(){return na(n)},disabled:ni,children:e})]},e)})}),(0,a.FD)(L.S,{grow:!0,shrink:!0,children:["Basics"===eZ&&(0,a.Y)(ej,{}),"Icon"===eZ&&(0,a.Y)(np,{}),"Cover page"===eZ&&(0,a.Y)(nc,{fs:eN}),"Layout"===eZ&&(0,a.Y)(nR,{getCurrentLayoutState:G}),"Publishing"===eZ&&(0,a.Y)(nf,{})]}),(0,a.FD)(L.S,{children:[eq&&nn&&nn!==eZ?(0,a.Y)(no.N,{colorway:"negative",icon:(0,a.Y)(eB.A,{}),text:"Please fix error in ".concat(nn," section")}):null,eR?(0,a.Y)(no.N,{colorway:"negative",icon:(0,a.Y)(eB.A,{}),text:eR}):null,eF?(0,a.Y)(no.N,{colorway:"negative",icon:(0,a.Y)(eB.A,{}),text:eF}):null]}),(0,a.FD)(L.S,{css:[ns?F.wp.justify.spaceBetween:F.wp.justify.end],row:!0,gap:8,align:"center",children:[ns?(0,a.Y)(nr.$n,{type:"button",iconLeft:(0,a.Y)(nB.A,{}),disabled:ni,onClick:function(){return na(eG-1)},text:"Back"}):null,eE?(0,a.Y)(L.S,{css:nq.loadingContainer,row:!0,gap:4,children:(0,a.Y)(nl.A,{})}):null,(0,a.FD)(nM.m_,{tooltip:nt,placement:"bottom",isDisabled:!nt,children:[!eq&&(0,a.Y)(nr.$n,{type:"submit",colorway:"primary",iconLeft:(0,a.Y)(nz.A,{}),disabled:ni,text:"Next",dataCy:"publish-form-next-button"}),eq&&!eP?(0,a.Y)(nr.$n,{type:"submit",colorway:"primary",css:nq.submitButton,iconLeft:eT?(0,a.Y)(nl.A,{}):(0,a.Y)(nW.A,{}),disabled:!!(ni||nn),text:"Submit",dataCy:"publish-form-publish-button"}):null,eq&&eP?(0,a.Y)(nr.$n,{type:"submit",colorway:"primary",iconLeft:eT?(0,a.Y)(nl.A,{}):(0,a.Y)(nW.A,{}),disabled:!!(ni||nn),text:"Save"}):null]})]})]})]}),(0,a.Y)(nZ,{user:z})]})})}var n$=(0,eT.x)({loadingContainer:[F.wp.center,F.wp.p(32),F.wp.width(512),(0,A._)({},"@media (max-width: ".concat(eI.LO.tabletMin,"px)"),[{width:"100%"}])],errorContainer:[F.wp.center,F.wp.p(32)]});function nJ(e){var n,t,r=e.replId,i=e.source,o=e.getDesktopLayoutState,l=(0,C.Df)(),s=(null==(t=l.data)||null==(n=t.currentUser)?void 0:n.__typename)==="CurrentUser"?l.data.currentUser:null;return l.loading?(0,a.Y)(L.S,{css:n$.loadingContainer,children:(0,a.Y)(nl.A,{})}):l.error||!s?(0,a.Y)(L.S,{css:n$.errorContainer,children:(0,a.Y)(P.EY,{multiline:!1,children:"Something went wrong, please try again."})}):(0,a.Y)(nK,{source:i,replId:r,currentUser:s,getDesktopLayoutState:o})}var nQ=t(76334),nX=t(13843);function n0(){var e=(0,G._)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return n0=function(){return e},e}var n1={},n2=(0,V.J1)(n0());function n4(){var e=(0,G._)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return n4=function(){return e},e}var n5={},n3=(0,V.J1)(n4()),n7=t(52749),n6=t(43813),n8=L.D.form;function n9(e){if(0===e.length)return{message:"You cannot leave this empty."}}function te(e){var n,t,r=e.changeType;return r===u.qZ1.NewFile?(n=I.LU.accentPositiveStronger,t="Added"):r===u.qZ1.DeletedFile?(n=I.LU.accentNegativeStronger,t="Deleted"):(n=I.LU.foregroundDefault,t="Changed"),(0,a.Y)(P.EY,{variant:"small",css:[{color:n}],multiline:!1,children:t})}var tn=(0,eT.x)({loadingContainer:[F.wp.center],container:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:I.LU.space8}]});function tt(e){var n=e.pendingChangesState,t=e.isReplitTemplate;if(n.loading)return(0,a.Y)(L.S,{css:tn.loadingContainer,children:(0,a.Y)(nl.A,{})});if(n.error)return(0,a.Y)(no.N,{icon:(0,a.Y)(eB.A,{}),text:n.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!n.pendingChanges||0===n.pendingChanges.length)return t?null:(0,a.Y)(P.EY,{children:"No file changes to publish."});var r=n.pendingChanges,i=r.slice(0,15);return(0,a.FD)(L.S,{css:tn.container,children:[i.map(function(e){return(0,a.FD)(s.Fragment,{children:[(0,a.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(n6.A,{size:12,path:e.fileName}),(0,a.Y)(P.EY,{multiline:!1,children:e.fileName})]},e.fileName),(0,a.Y)(te,{changeType:e.changeType})]},e.fileName)}),r.length>i.length&&(0,a.FD)(P.EY,{multiline:!1,children:["And ",r.length-i.length," other files..."]})]})}var tr=(0,eT.x)({header:[F.wp.mb(16)],grid:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:I.LU.space8}],activeLabel:[F.wp.p(4),{display:"flex"}]});function ti(e){var n,t=e.repl,i=function(){var e,n,t=(0,o._)((e={refetchQueries:["ReplEnvironmentHeader"]},n=(0,r._)({},n1,e),J.n(n2,n)),2),i=t[0];function a(){return(a=(0,k._)(function(e){var n;return(0,x.YH)(this,function(t){switch(t.label){case 0:return[4,i({variables:{input:e.input}})];case 1:return[2,{data:(n=t.sent()).data,error:function(e){if(!e.data)return null;var n=e.data;if("revertReplRelease"in n){if("NotFoundError"===n.revertReplRelease.__typename||"UnauthorizedError"===n.revertReplRelease.__typename||"UserError"===n.revertReplRelease.__typename)return n.revertReplRelease.message;else if("Repl"!==n.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}(n)}]}})})).apply(this,arguments)}return{revertTemplateRelease:function(e){return a.apply(this,arguments)},state:t[1]}}(),l=(n=(0,k._)(function(e){return(0,x.YH)(this,function(n){switch(n.label){case 0:return[4,i.revertTemplateRelease({input:{replId:t.id,releaseId:e}})];case 1:return n.sent(),[2]}})}),function(e){return n.apply(this,arguments)});return(0,a.FD)(L.S,{children:[(0,a.Y)(P.Y9,{level:1,variant:"subheadBig",css:tr.header,children:"Existing Releases"}),(0,a.Y)(L.S,{css:tr.grid,children:t.releases.items.map(function(e){var n,r;return(0,a.FD)(s.Fragment,{children:[(0,a.Y)("span",{children:(0,nQ.A)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,a.Y)("span",{children:e.description}),(0,a.Y)("span",{style:{justifySelf:"end"},children:e.id===(null==(r=t.deployment)||null==(n=r.activeRelease)?void 0:n.id)?(0,a.Y)("span",{css:tr.activeLabel,children:"(active)"}):(0,a.Y)(nr.$n,{text:"revert",colorway:"primary",size:"small",onClick:function(){l(e.id)}})})]},e.id)})})]})}var to=(0,eT.x)({container:[F.wp.colWithGap(24),F.wp.p(16)],descriptionLabel:[F.wp.color.foregroundDimmer,{fontSize:I.LU.fontSizeSmall,lineHeight:I.LU.lineHeightSmall}],descriptionInput:[F.wp.width("100%"),F.wp.minHeight(64),F.wp.maxHeight(128),{resize:"vertical"}]});function ta(e){var n,t,l,c,u,d,p,f,h,m,g,v,y,w=e.repl,b=e.getDesktopLayoutState,S=(0,eW.c)(),Y=(0,o._)((0,s.useState)(!1),2),_=Y[0],C=Y[1],D=(0,o._)((0,s.useState)(!1),2),I=D[0],T=D[1],F=(u=function(e){var n,t,i,o,a=(i={variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1},o=(0,r._)({},n5,i),Z.I(n3,o)),l=a.data,s=a.loading,c=a.error;if(s)return{loading:s,pendingChanges:null,error:null};if(c)return{loading:!1,pendingChanges:null,error:c};var u=(null==l?void 0:l.repl.__typename)==="Repl"?l.repl:null;return u?{loading:!1,pendingChanges:(null==(t=u.deployment)||null==(n=t.activeRelease)?void 0:n.pendingChanges)||[],error:c}:{loading:!1,pendingChanges:null,error:Error("Repl not found")}}({replId:{replId:w.id}.replId}),d=(0,s.useMemo)(function(){return u.pendingChanges?u.pendingChanges.slice().sort(function(e,n){return e.fileName.localeCompare(n.fileName)}).map(function(e){return{file:e,pathDepth:(0,eJ.jP)(e.fileName)}}).sort(function(e,n){return e.pathDepth-n.pathDepth}).map(function(e){return e.file}):[]},[u.pendingChanges]),(0,i._)((0,r._)({},u),{pendingChanges:d})),U=ea(),N=(0,$.W)("",n9),O=(null==(f=F.pendingChanges)?void 0:f.length)!==0,M=(null==(h=w.user)?void 0:h.username)===nX.GA||(null==(m=w.user)?void 0:m.username)==="templates",H=(0,o._)((0,s.useState)({ran:!1,tested:!1}),2),B=H[0],z=H[1],W=(0,R.a)({tablet:!0}),G=(0,E._P)({type:"boolean",controlName:"flag-template-layout-author"}),V=!W&&G&&null!=b,j=(0,o._)((n=w,l=(t=(0,o._)((0,s.useState)(n.releases.items[0]),2))[0],c=t[1],(0,s.useEffect)(function(){n.releases.items.length>0&&c(n.releases.items.slice().sort()[0])},[n.releases.items]),[l,c]),2),q=j[0],K=j[1],J=(null==q?void 0:q.initialLayoutState)!=null,Q=(0,$.W)(J?em.Saved:em.Default,function(){}),X=J?Q.value!==em.Saved:Q.value!==em.Default,ee=O||X;(0,s.useEffect)(function(){z({ran:!1,tested:!1})},[z]);var en=!!(N.error||U.loading||!M&&!ee||M&&(!B.ran||!B.tested)),et=M&&(null==(v=w.releases)||null==(g=v.items)?void 0:g.length)>1,er="";return(N.error?er="Please fill out the form":M||ee||(er="No file or layout changes to publish in this release"),_)?(0,a.Y)(eM,{repl:w}):I?(0,a.Y)(L.S,{p:16,gap:16,children:(0,a.Y)(ti,{repl:w})}):(0,a.FD)(n8,{onSubmit:(p=(0,k._)(function(e){var n,t,r,i;return(0,x.YH)(this,function(o){switch(o.label){case 0:if(e.preventDefault(),en||N.validate())return[2];return t=null,V&&(Q.value===em.Current?t=b():Q.value===em.Saved&&J&&(t=null==q?void 0:q.initialLayoutState)),[4,U.createRelease({input:{replId:w.id,description:N.value,initialLayoutState:t}})];case 1:if((r=o.sent()).error)return[2];return C(!0),(null==(n=r.data)?void 0:n.createReplRelease.__typename)==="Repl"&&(K(i=r.data.createReplRelease.releases.items.slice().sort()[0]),Q.setValue((null==i?void 0:i.initialLayoutState)!=null?em.Saved:em.Default)),[2]}})}),function(e){return p.apply(this,arguments)}),css:to.container,children:[(0,a.Y)(P.Y9,{level:1,variant:"headerDefault",children:"Publish template changes"}),(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(P.Y9,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,a.Y)(tt,{pendingChangesState:F,isReplitTemplate:M})]}),V?(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(P.Y9,{level:2,variant:"subheadDefault",children:"Workspace layout"}),(0,a.Y)(nE,{getCurrentLayoutState:b,savedLayoutState:null==q?void 0:q.initialLayoutState,templateLayout:Q})]}):null,M||ee?(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:S("description"),css:to.descriptionLabel,children:"Description"}),(0,a.Y)(eG.ov,{id:S("description"),"aria-label":"Description",onChange:function(e){return N.setValue(e.target.value)},css:to.descriptionInput,placeholder:"Explain what has changed about your template"}),N.error?(0,a.Y)(no.N,{icon:(0,a.Y)(eB.A,{}),text:null==(y=N.error)?void 0:y.message,colorway:"negative"}):null]}):null,M?(0,a.Y)(tl,{repl:w,state:B,onChange:function(e,n){return z(function(t){return(0,i._)((0,r._)({},t),(0,A._)({},e,n))})}}):null,(0,a.Y)(L.S,{children:U.error?(0,a.Y)(no.N,{icon:(0,a.Y)(eB.A,{}),text:U.error,colorway:"negative"}):null}),(0,a.FD)(L.S,{row:!0,gap:12,justify:"end",children:[et?(0,a.Y)(nr.$n,{text:"Revert to older",colorway:"negative",onClick:function(){return T(!0)}}):null,(0,a.Y)(nM.m_,{tooltip:er,placement:"bottom",isDisabled:!er,children:(0,a.Y)(nr.$n,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,a.Y)(nW.A,{}),disabled:en})})]})]})}function tl(e){var n,t,r,i=e.repl,o=e.state,l=e.onChange,s=(0,eW.c)(),c=(0,Q.OI)(),u=c.data,d=c.loading,p=null==u||null==(n=u.currentUser)?void 0:n.username;return(0,a.FD)(L.S,{gap:12,children:[(0,a.Y)(P.Y9,{level:2,children:"Official Replit Template publishing checklist"}),(0,a.FD)(L.S,{children:[(0,a.FD)(ts,{children:[(0,a.Y)(n7.S,{id:s("ran"),checked:o.ran,onChange:function(e){return l("ran",e)}}),(0,a.Y)("label",{htmlFor:s("ran"),children:"Ran Repl:"}),(0,a.FD)("span",{children:["I ran the Repl to generate and cache package guesser result into"," ",(0,a.Y)("code",{children:".upm"}),"."]})]}),(0,a.FD)(ts,{children:[(0,a.Y)(n7.S,{id:s("tested"),checked:o.tested,onChange:function(e){return l("tested",e)}}),(0,a.Y)("label",{htmlFor:s("tested"),children:"Ran tests:"}),(0,a.FD)("span",{children:['I ran "Test working copy" for @',null==(t=i.user)?void 0:t.username,"/",i.slug," in"," ",(0,a.Y)("a",{href:"https://template-tester.replit.app/",target:"_blank",children:"template tester"}),". ",(0,a.Y)("br",{}),"If there are no tests, consider adding one."]})]})]}),d||(null==(r=i.user)?void 0:r.username)!==p?null:(0,a.Y)(no.N,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}function ts(e){var n=e.children;return(0,a.Y)(L.S,{py:2,row:!0,gap:8,children:n})}var tc=t(3964),tu=t(79050),td=t(73745),tp=t(99528),tf=t(38067),th=t(44462),tm=t(95245),tg=t(36976),tv=t(66241),ty=t(6518),tw=t(71424),tb=t(93034),tS=t(49382),tY=t(45351),t_=t(81686),tA=(0,eT.x)({dialog:[F.wp.py(2),F.wp.colWithGap(16)],reachOut:[F.wp.border({direction:"top",color:I.LU.outlineDimmest}),{marginInline:-16}]}),tC=function(e){var n,t,r,i,l,c,d,p,f,v,y,w,b,S=e.repl,Y=e.org,_=e.onRequestClose,A=e.onForkSeparately,C=(0,m.A)().showError,E=Y.id,R=(0,o._)((0,ty.A)({navigateAfterFork:!0,replLinkOptions:{initialPaneType:"project"},onFork:function(){_()},onError:function(){C("Error creating remixed app - please try again")}}),2),I=R[0],T=R[1].loading,F=(0,o._)((n=function(){var e,n,t;I({originId:S.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!=(t=null==(n=S.deployment)||null==(e=n.activeRelease)?void 0:e.id)?t:void 0,orgId:E,trackingData:{forkSource:"projectDialog",isOnboarding:!1,isApp:S.publishedAs===u.Q_w.App,isTemplate:S.publishedAs===u.Q_w.Template}})},r=(t=(0,tw.A)()).git,i=t.fs,c=(l=(0,o._)((0,s.useState)({loading:!1,error:null,success:!1}),2))[0],d=l[1],p=(0,g.A)(),f=(0,o._)((0,tm.H3)({}),1)[0],v=(0,h.A)(n),y=(0,o._)((0,tm.NP)(),1)[0],[(0,s.useCallback)((w=(0,k._)(function(e){var n,t,o,a,l,s,c,u;return(0,x.YH)(this,function(h){switch(h.label){case 0:d({loading:!0,error:null,success:!1}),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,y({variables:{id:p},fetchPolicy:"no-cache"})];case 2:if(!(t=h.sent().data)||"Repl"!==t.getRepl.__typename)throw Error("Please try again");if(null==(n=t.getRepl.project)?void 0:n.id)throw Error("This App is already part of a project");return[3,4];case 3:return d({loading:!1,error:"message"in(o=h.sent())?o.message:"Please try again",success:!1}),[2];case 4:return[4,r.init({includeAllInitialFiles:!0,initialCommit:!0})];case 5:if(!(a=h.sent()).error)return[3,11];if(a.error!==tg.uA.ALREADY_INITIALIZED)return[3,10];return[4,r.getRepositoryState()];case 6:if((l=h.sent()).error)return d({loading:!1,error:"Could not create Project - please try again",success:!1}),[2];if(l.state===tv.Gi.CLEAN)return[3,9];return[4,r.stageFiles({all:!0})];case 7:return h.sent(),[4,r.commit({message:"Initial project commit",allowEmpty:!1})];case 8:h.sent().error&&d({loading:!1,error:"Could not generate initial commit to create Project",success:!1}),h.label=9;case 9:return[3,11];case 10:return d({loading:!1,error:"Could not initialize a repository",success:!1}),[2];case 11:return[4,(0,tS.x)(r)];case 12:return h.sent().error&&d({loading:!1,error:"Could not create Project, please try again",success:!1}),[4,i.flush()];case 13:return h.sent(),[4,i.persist({skipDebounce:!0})];case 14:if((s=h.sent()).error||!s.success)return d({loading:!1,error:"Could not initialize a repository",success:!1}),[2];return[4,new Promise(function(e){if(i.getStatus()===D.sn.Clean)return void e();i.onStatusChange(function(n){if(n===D.sn.Clean)return void e()})})];case 15:h.sent(),h.label=16;case 16:return h.trys.push([16,18,,19]),[4,f({variables:{input:{mainReplId:p,orgId:e}}})];case 17:if((u=h.sent()).errors||!(null==(c=u.data)?void 0:c.createProject))throw Error("Could not create project");if("Project"!==u.data.createProject.__typename)throw Error(u.data.createProject.message);return[3,19];case 18:return d({loading:!1,error:h.sent().message,success:!1}),[2];case 19:return d({loading:!1,error:null,success:!0}),v.current(),[2]}})}),function(e){return w.apply(this,arguments)}),[r,i,p,f,v,y]),c]),2),U=F[0],N=F[1],O=(b=(0,k._)(function(){return(0,x.YH)(this,function(e){return N.loading||U(E),[2]})}),function(){return b.apply(this,arguments)});return(0,a.FD)(tY.lV,{css:tA.dialog,onSubmit:function(e){e.preventDefault(),O()},children:[(0,a.Y)(P.Y9,{level:1,variant:"subheadDefault",children:"Planning to merge your changes back into this App?"}),(0,a.Y)(tb.I,{}),(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(P.EY,{children:"Consider starting a Project – a set of connected Apps for better collaborative development and versioning. Within a Project, you can:"}),(0,a.Y)(t_.s,{children:(0,a.FD)("ul",{children:[(0,a.Y)("li",{children:"Remix an App to work on a feature in isolation, and merge back when ready"}),(0,a.Y)("li",{children:"View all ongoing development in one place"}),(0,a.FD)("li",{children:["Share secrets and configuration between remixed apps"," ",(0,a.Y)(P.EY,{color:"dimmest",children:"(coming soon)"})]})]})})]}),N.error?(0,a.Y)(no.N,{colorway:"negative",icon:(0,a.Y)(eB.A,{}),text:N.error}):null,(0,a.FD)(L.S,{row:!0,gap:8,justify:"end",children:[(0,a.Y)(nr.$n,{loading:N.loading||T,text:"Remix separately",onClick:function(){_(),A()}}),(0,a.Y)(nr.$n,{loading:N.loading||T,text:"Remix & start a Project",colorway:"primary",type:"submit"})]}),(0,a.Y)(L.S,{css:tA.reachOut,pt:16,px:16,children:(0,a.FD)(P.EY,{color:"dimmest",children:["If you have questions or feedback, reach out to"," ",(0,a.Y)("a",{href:"mailto:teams@replit.com",children:"teams@replit.com"})]})})]})},tk=t(91759),tx=function(e){return e.DeleteRepl="DeleteRepl",e.TransferRepl="TransferRepl",e.PowerUp="PowerUp",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishedTemplateSettings="EditPublishedTemplateSettings",e.PublishTemplate="PublishTemplate",e.UpdatePublishedTemplate="UpdatePublishedTemplate",e.Share="Share",e.FeatureRepl="FeatureRepl",e}({}),tD=t(22422),tE=t(83070),tR=t(69762),tI=t(85144),tT=t(59968),tF=t(64743),tP=t(83728),tL=t(15149),tU=t(69554),tN=t(11478),tO=t(49748),tM=t(63837),tH=t(76804),tB=t(79989),tz=t(82462),tW=t(81650),tG=t(85879);function tV(e){var n=e.repl,t=(0,f.A)(),o=(0,s.useMemo)(function(){if(n.org){var e;return{text:n.org.name,css:[{"&, & span":F.wp.flex.shrink(1)}],iconLeft:(0,a.Y)(tD.e,{src:null!=(e=n.org.image)?e:null,username:n.org.name,fullName:n.org.name,size:24})}}return n.user?{text:n.user.username,css:[{"&, & span":F.wp.flex.shrink(1)}],iconLeft:(0,a.Y)(tD.e,{src:n.user.image,username:n.user.username,size:24})}:{text:""}},[n]);if(!n.user||!n.org&&!n.user)return null;var l=n.org?(0,b.EG)(n.org).repls:(0,th.M)(n.user),c=n.org?(0,b.EG)(n.org).repls.href.toString():(0,th.M)(n.user).as;return t?(0,a.Y)(nr.$n,(0,i._)((0,r._)({},o),{size:"small",onClick:function(){tp.M.openExternalUrl(c)}})):(0,a.Y)(eF.v,(0,i._)((0,r._)({},o),{as:l.as,href:l.href,prefetch:!1,size:"small"}))}function tZ(e){var n,t,l=e.setActiveDialog,c=e.repl,d=e.isTemplate,p=e.showCloseButton,h=e.setIsEditing,g=e.updateReplInfo,v=e.isFeaturedRepl,y=e.onAppResources,w=!!c.publishedAs,b=(0,o._)((0,s.useState)(!1),2),S=b[0],Y=b[1],_=(0,f.A)(),C=!!c.org&&c.org.type===u.NT1.Team,k=(0,tT.Z)().fork,x=(0,tk.Q)(),D=(0,m.A)(),R=D.showConfirm,T=D.showError,U=(0,o._)((0,tf.B)({onFork:function(){R("Repl forked, redirecting...")},onError:function(){T("Error creating fork - please try again")}}),2),N=U[0],O=U[1].loading,M=(0,E._P)({controlName:"flag-olympic-torch",logFlagToAnalytics:!1}),H=(0,s.useCallback)(function(){var e;return(null==(e=c.org)?void 0:e.id)&&!x.loading?x.isEligibleForProject&&!x.hasProject?void Y(!0):x.hasProject?void N({orgId:c.org.id,repl:c,forkSource:"replInfoHeader"}):void k():void k()},[c,k,x,N]),B=[];c.authorizations.fork.isAuthorized&&B.push({value:"Remix",label:"Remix",icon:O?(0,a.Y)(nl.A,{}):(0,a.Y)(tN.A,{}),isDisabled:O});var z=c.authorizations.publish.isAuthorized;if(!_&&!C){var W=c.isPrivate||!c.isRenamed||!z,G="";c.isPrivate?G="Make App public to publish":c.isRenamed||(G="Rename App to publish"),null==c.publishedAs&&B.push({value:tx.PublishTemplate,label:"Publish as Template",icon:(0,a.Y)(tz.A,{}),isDisabled:W,description:G,dataCy:"repl-info-header-settings-publish"}),d&&!W&&(B.push({value:tx.UpdatePublishedTemplate,label:"Publish template changes",icon:(0,a.Y)(tG.A,{})}),B.push({value:tx.UnpublishTemplate,label:"Unpublish Template",icon:(0,a.Y)(tU.A,{})})),w&&!W&&B.push({value:tx.EditPublishedTemplateSettings,label:"Edit Template publish settings",icon:(0,a.Y)(tP.A,{})})}if(C){var V=c.isPrivate;B.push({value:tx.FeatureRepl,label:v?"Remove from Featured Apps":"Feature on Profile",icon:(0,a.Y)(tH.A,{}),description:V?"Make App public to feature":"",isDisabled:V})}return c.authorizations.deleteRepl.isAuthorized&&(M&&B.push({isDestructive:!1,value:tx.TransferRepl,label:"Transfer",icon:(0,a.Y)(tB.A,{})}),B.push({isDestructive:!0,value:tx.DeleteRepl,label:"Delete",icon:(0,a.Y)(tW.A,{})})),(0,a.FD)(L.S,{gap:8,p:8,children:[(0,a.FD)(L.S,{css:[(0,A._)({},F.$_.max("mobileMax"),[F.wp.flex.columnReverse,F.wp.align.start,{gap:I.LU.space8}])],row:!0,gap:8,align:"center",justify:"space-between",children:[(0,a.Y)(L.S,{row:!0,gap:8,css:[F.wp.center,F.wp.flex.shrink(1)],children:(0,a.Y)(tV,{repl:c})}),(0,a.FD)(L.S,{css:[(0,A._)({},F.$_.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],align:"center",row:!0,gap:8,children:[_?null:(0,a.Y)(eF.v,(0,i._)((0,r._)({size:"small",prefetch:!1},(0,eU.z9)(c)),{iconRight:(0,a.Y)(tL.A,{}),colorway:"primary",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}})),d||_||C?null:(0,a.Y)(nM.m_,{tooltip:"Make Repl public to share",isDisabled:!c.isPrivate,children:(0,a.Y)(nr.$n,{size:"small",type:"button",iconLeft:(0,a.Y)(tG.A,{}),onClick:function(){l(tx.Share)},text:"Share",disabled:c.isPrivate})}),_?(0,a.Y)(eP.i,{textToCopy:window.location.href,tooltipText:"Copy App URL",tooltipSuccessText:"Copied!",iconLeft:(0,a.Y)(tO.A,{}),text:""}):null,(0,a.Y)(tE.K0,{size:32,onClick:y,alt:"App resources",dataCy:"repl-resources-button",children:(0,a.Y)(tF.A,{})}),B.length>0&&(0,a.Y)(tR.in,{dataCy:"repl-info-header-settings",trigger:(0,a.Y)(tE.K0,{alt:"More options",size:32,children:(0,a.Y)(tM.A,{size:16})}),"aria-label":"More options",onAction:function(e){switch(e){case"Remix":return void H();case tx.UpdatePublishedTemplate:l(tx.UpdatePublishedTemplate);return;case tx.UnpublishTemplate:l(tx.UnpublishTemplate);return;case tx.DeleteRepl:l(tx.DeleteRepl);return;case tx.TransferRepl:l(tx.TransferRepl);return;case tx.EditPublishedTemplateSettings:l(tx.EditPublishedTemplateSettings);return;case tx.PublishTemplate:l(tx.PublishTemplate);return;case tx.FeatureRepl:l(tx.FeatureRepl);return}},children:B.map(function(e){return(0,a.Y)(tR.Dr,{id:e.value,label:e.label,icon:e.icon,isDestructive:e.isDestructive,isDisabled:e.isDisabled,description:e.description,dataCy:e.dataCy},e.value)})}),p?(0,a.Y)(tE.K0,{alt:"Close",tooltipBehavior:"hidden",onClick:function(){g(),h(!1)},children:(0,a.Y)(nd.A,{})}):null]})]}),(null==(n=c.org)?void 0:n.type)===u.NT1.Team&&(null==(t=c.user)?void 0:t.__typename)==="User"?(0,a.FD)(P.EY,{variant:"small",color:"dimmest",children:["Created by @",c.user.username]}):null,S&&c.org?(0,a.Y)(tI.a,{isOpen:!0,onRequestClose:function(){return Y(!1)},children:(0,a.Y)(tC,{repl:c,org:c.org,onRequestClose:function(){return Y(!1)},onForkSeparately:k})}):null]})}var tj=t(50303),tq=t(1441),tK=t(1867),t$=t(21640),tJ=t(37252),tQ=L.D.span,tX=(0,eT.x)({triggerWrapper:[{":focus":{outline:"2px solid ".concat(I.LU.accentPrimaryDefault),outlineOffset:"-1px",borderRadius:"4px"}}]});function t0(e){var n=e.label,t=e.children,r=(0,o._)(t,2),i=r[0],l=r[1],c=(0,o._)((0,s.useState)(!1),2),u=c[0],d=c[1],p=(0,o._)((0,s.useState)(!1),2),f=p[0],h=p[1],m=(0,s.useRef)(!1);return(0,s.useEffect)(function(){f&&(m.current=!0);var e=setTimeout(function(){d(f)},200);return function(){clearTimeout(e)}},[f]),(0,a.FD)(tJ.Wv,{label:n,isOpen:u,onOpenChange:function(){return d(!u)},placement:"right",offset:16,children:[(0,a.Y)(tQ,{onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},onClick:function(){return d(!0)},onKeyDown:function(e){"Enter"===e.key&&d(!0)},tabIndex:0,css:tX.triggerWrapper,children:i}),(0,a.Y)(tQ,{onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},children:l})]})}var t1=t(23068),t2=t(43303),t4=t(30124),t5=t(12127);function t3(e){return e>tj.O8?"".concat((0,t5.$p)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,t5.lX)(e)).toLocaleString()," MiB")}t$.t1.register(t$.No,t$.dN);var t7=(0,eT.x)({sectionPadding:[F.wp.py(4),F.wp.px(12)],rowSpacing:[F.wp.rowWithGap(8),F.wp.justify.spaceBetween,F.wp.align.center]}),t6=(0,eT.x)({wrapper:[F.wp.borderRadius(4),F.wp.border({color:I.LU.outlineDimmer}),F.wp.overflow("hidden")],rowSection:[t7.sectionPadding,t7.rowSpacing],hoverRowSection:[t7.sectionPadding,t7.rowSpacing,{":hover":{backgroundColor:I.LU.backgroundHigher}}],hoverColumnSection:[t7.sectionPadding,F.wp.colWithGap(8),{":hover":{backgroundColor:I.LU.backgroundHigher}}],sectionHeading:[F.wp.fontWeight.bold],alignedRow:[F.wp.rowWithGap(8),F.wp.align.center],alignedSpaceBetweenRow:[t7.rowSpacing],detailContent:[F.wp.width(260)],detailSectionsWrapper:[F.wp.borderRadius(4),F.wp.border({color:I.LU.outlineDimmer}),F.wp.overflow("hidden")],warningText:[F.wp.color.orangeStronger],dangerText:[F.wp.color.redStronger],chartWrapper:[F.wp.width(22),F.wp.height(18),F.wp.borderRadius(2)],indentAgain:[F.wp.pl(24)]});function t8(){var e=(0,t1.Ni)();return(0,a.FD)(L.S,{css:t6.wrapper,children:[(0,a.FD)(L.S,{css:t6.rowSection,children:[(0,a.Y)(P.EY,{css:t6.sectionHeading,children:"Compute"}),(0,a.Y)(L.S,{css:t6.alignedRow,children:(0,a.FD)(P.EY,{color:"dimmer",children:[e.numVCpu," vCPU, ",e.ramTotalGB," GiB RAM"]})})]}),(0,a.Y)(t4.a,{}),(0,a.Y)(t9,{}),(0,a.Y)(re,{})]})}function t9(){var e=(0,t1.FE)();return(0,a.Y)(rn,{title:"CPU",displayValue:"".concat(e.currentPercent,"%"),recentPercents:e.recentUtilPercents,status:e.status,detailText:"The amount of processing power this Repl is using.",detailRows:[{title:"User",displayValue:"".concat(e.currentUserPercent,"%"),recentPercents:e.recentUserUtilPercents},{title:"System",displayValue:"".concat(e.currentSystemPercent,"%"),recentPercents:e.recentSystemUtilPercents}]})}function re(){var e=(0,t1.VZ)();return(0,a.Y)(rn,{title:"RAM",displayValue:"".concat(e.currentPercent,"%"),recentPercents:e.recentUtilPercents,status:e.status,detailText:"The memory this Repl is using.",detailRows:[{title:"Active",displayValue:t3(e.currentRssInBytes),recentPercents:e.recentRssUtilPercents},{title:"Cache",displayValue:t3(e.currentCacheInBytes),recentPercents:e.recentCacheUtilPercents}]})}function rn(e){var n=e.title,t=e.displayValue,r=e.status,i=e.recentPercents,o=e.detailText,l=e.detailRows;return(0,a.FD)(t0,{label:"Compute details",children:[(0,a.FD)(L.S,{css:t6.hoverRowSection,children:[(0,a.FD)(L.S,{css:t6.alignedRow,children:[(0,a.Y)(P.EY,{children:n}),(0,a.Y)(rt,{status:r})]}),(0,a.FD)(L.S,{css:t6.alignedRow,children:[(0,a.Y)(P.EY,{color:"dimmer",children:t}),(0,a.Y)(L.S,{css:t6.chartWrapper,children:(0,a.Y)(rr,{data:i,colorAreaUnderLine:!0})})]})]}),(0,a.FD)(L.S,{css:t6.detailContent,p:8,gap:8,children:[(0,a.Y)(P.EY,{children:o}),(0,a.Y)(L.S,{css:t6.detailSectionsWrapper,children:l.map(function(e,n){return(0,a.FD)(L.S,{css:t6.rowSection,children:[(0,a.Y)(P.EY,{children:e.title}),(0,a.FD)(L.S,{css:t6.alignedRow,children:[(0,a.Y)(P.EY,{color:"dimmer",children:e.displayValue}),(0,a.Y)(L.S,{css:t6.chartWrapper,children:(0,a.Y)(rr,{data:e.recentPercents,colorAreaUnderLine:!0})})]})]},n)})})]})]})}function rt(e){var n=e.status;return"warning"===n?(0,a.FD)(a.FK,{children:[(0,a.Y)(eB.A,{color:I.LU.orangeStronger}),(0,a.Y)(P.EY,{css:t6.warningText,children:"Near limit"})]}):"danger"===n?(0,a.FD)(a.FK,{children:[(0,a.Y)(eB.A,{color:I.LU.redStronger}),(0,a.Y)(P.EY,{css:t6.dangerText,children:"At limit"})]}):null}function rr(e){var n=e.data,t=e.colorAreaUnderLine,r=void 0!==t&&t,i=e.showHorizontalGridLines,o=(0,t2.D)().values,l=n.map(function(e,n){return{x:-n,y:e}}),s=t1.$E-.05,c=t1.Sv-.02;return(0,a.Y)(tK.N1,{updateMode:"none",options:{clip:4,animation:!1,maintainAspectRatio:!1,events:[],elements:{point:{radius:0},line:{tension:.3,borderWidth:1}},scales:{x:{display:!1,type:"linear",grid:{display:!1},min:0,max:-(n.length-1)},y:{display:void 0!==i&&i,min:0,max:100,ticks:{display:!1,stepSize:10},afterBuildTicks:function(e){var n=[10,50,90];e.ticks=e.ticks.filter(function(e){return n.includes(e.value)})},grid:{color:function(e){return e.tick.value>100*s?o.global.orangeDimmer:o.global.outlineDimmest},drawTicks:!1},border:{dash:[2,2],display:!1}}}},data:{datasets:[{data:l,fill:{target:"origin"},borderColor:function(e){var n=e.chart,t=n.ctx,r=n.chartArea;if(r){var i=t.createLinearGradient(0,r.bottom,0,r.top),a=o.global.blueDefault,l=o.global.orangeDefault,u=o.global.redDefault;return i.addColorStop(0,a),i.addColorStop(s-.08,a),i.addColorStop(s+.08,l),i.addColorStop(c-.08,l),i.addColorStop(c,u),i}},backgroundColor:function(e){if(!r)return"transparent";var t=e.chart,i=t.ctx,a=t.chartArea;if(a){var u=i.createLinearGradient(a.left,0,a.right,0),d=ri(o.global.blueDimmest),p=ri(o.global.orangeDimmest),f=ri(o.global.redDimmest);return l.forEach(function(e,t){if(u){var r=1-t/(n.length-1);e.y<100*s?u.addColorStop(r,d):e.y<100*c?u.addColorStop(r,p):u.addColorStop(r,f)}}),u}}}]}})}function ri(e){var n,t,r=(n=(n=e).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,n,t,r){return n+n+t+t+r+r}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n))?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null);if(!r)return e;var i=r.r,o=r.g,a=r.b;return"rgba(".concat(i,", ").concat(o,", ").concat(a,", ",.5,")")}function ro(e){var n=e.alertDialogType,t=e.onRequestUpgrade,r=(0,t1.Dj)();if(!r)return null;var i="cpu_alert"===n?r.cpuRecentUtilPercents:r.ramRecentUtilPercents,o="cpu_alert"===n?"CPU":"RAM",l="You have been near the ".concat("cpu_alert"===n?"".concat(r.numVCpu," vCPU"):"".concat((0,t5.$p)(1024*r.ramQuotaMiBs*1024)," GiB RAM")," limit of the free plan ").concat(t1.HQ," or more times in the past ").concat(t1.Yu," seconds. More ").concat("cpu_alert"===n?"vCPUs":"RAM"," would improve performance and limit disruptions.");return(0,a.FD)(L.S,{p:8,gap:8,children:[(0,a.Y)(eB.A,{color:I.LU.orangeStrongest}),(0,a.FD)(P.EY,{variant:"subheadDefault",multiline:!1,children:["High ",o," usage"]}),(0,a.Y)(P.EY,{color:"dimmer",children:l}),(0,a.Y)(L.S,{css:ra.chartWrapper,children:(0,a.Y)(rr,{data:i,showHorizontalGridLines:!0})}),(0,a.Y)(nr.$n,{size:"big",colorway:"warning",text:"Increase ".concat(o," limit"),onClick:function(){(0,w.u4)(w.AZ.UPGRADE_SELECTED,{source:"compute_alert_dialog"}),t()}})]})}var ra=(0,eT.x)({chartWrapper:[F.wp.height(67),F.wp.backgroundColor.backgroundRoot,F.wp.borderRadius(12),F.wp.py(12),F.wp.px(16)]});function rl(){var e=(0,G._)(["\n  query ReplResourcesCurrentUser {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n        userSubscription {\n          isTrial\n        }\n        paymentMethod {\n          __typename\n          ... on PaymentMethod {\n            id\n            last4\n          }\n        }\n      }\n    }\n  }\n"]);return rl=function(){return e},e}function rs(){var e=(0,G._)(["\n  query ReplResourcesReplInfo($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          __typename\n          id\n          type\n        }\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        authorizations {\n          editResources {\n            isAuthorized\n            code\n            message\n          }\n          editFileContents {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return rs=function(){return e},e}var rc={},ru=(0,V.J1)(rl()),rd=(0,V.J1)(rs()),rp=t(96034),rf=t(96502),rh=function(){var e=(0,tq.A)(),n=e.showResourcesUpsell,t=e.refetch,r=(0,o._)((0,s.useState)(!1),2),i=r[0],l=r[1];return n?(0,a.FD)(a.FK,{children:[(0,a.Y)(nM.m_,{tooltip:rm,children:(0,a.Y)(rf.a,{css:rg.pill,text:"CPU/RAM Limited",onClick:function(){return l(!0)}})}),(0,a.Y)(td.default,{isOpen:i,onClose:function(){return l(!1)},type:"purchase",onPurchaseComplete:function(){return t()},reloadPageAfterPurchaseComplete:!0,contextualUpsell:(0,a.FD)(a.FK,{children:[(0,a.Y)(P.EY,{variant:"subheadBig",children:"Upgrade for a faster Workspace"}),(0,a.FD)(P.EY,{multiline:!0,children:["Unlock 4 vCPU, 8 GiB RAM, and ",(0,t5.$p)(tj.RB)," ","GiB of storage"]})]}),headingText:"Upgrade for a faster Workspace",subHeadingText:"Unlock 4 vCPU, 8 GiB RAM, and ".concat((0,t5.$p)(tj.RB)," GiB of storage"),analyticsContext:{upgrade:{context:"repl_resources"}},highlightUpsell:"resources"})]}):null},rm="Your development resources are limited. Upgrade for more speed, storage, better AI, and more.",rg=(0,eT.x)({pill:[F.wp.cursor.pointer]});function rv(){var e=(0,G._)(["\n  query ReplResourcesCurrentUserStorageUsage {\n    currentUser {\n      id\n      userSubscriptionType\n      storageInfo {\n        accountStorageUtilization {\n          ... on AccountStorageUtilization {\n            total\n          }\n        }\n      }\n    }\n  }\n"]);return rv=function(){return e},e}var ry={},rw=(0,V.J1)(rv()),rb=t(57829),rS=t(61655),rY=t(67963);function r_(e){return e>tj.O8?"".concat((0,t5.$p)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,t5.lX)(e)).toLocaleString()," MiB")}function rA(e,n){return 0===n||0===e?0:Math.round(e/n*100)}function rC(e){var n,t,i=e.isTeamRepl,o=e.isFileEditor,l=(0,t1.MJ)(),c=(0,t1.Zb)(),u=(n=(0,r._)({},ry,void 0),Z.I(rw,n)),d=u.data,p=u.refetch,f=(null==d||null==(t=d.currentUser)?void 0:t.storageInfo.accountStorageUtilization.__typename)==="AccountStorageUtilization"?Number(d.currentUser.storageInfo.accountStorageUtilization.total):0,h=(0,s.useMemo)(function(){return(0,rb.A)(function(){return p()},{wait:12e4,maxWait:3e5})},[p]);return(0,s.useEffect)(function(){var e,n=!1,t=null,r=(e=(0,k._)(function(){return(0,x.YH)(this,function(e){switch(e.label){case 0:if(n)return[2];return[4,h()];case 1:return e.sent(),t=setTimeout(r,3e5),[2]}})}),function(){return e.apply(this,arguments)});return r(),function(){n=!0,t&&clearTimeout(t),h.isScheduled()&&h.flush()}},[h,l,c,p]),o?(0,a.FD)(L.S,{css:t6.wrapper,children:[(0,a.Y)(L.S,{css:t6.rowSection,children:(0,a.Y)(P.EY,{css:t6.sectionHeading,children:"Storage"})}),(0,a.Y)(t4.a,{}),(0,a.Y)(rk,{accountUsedInBytes:f,children:(0,a.Y)(rx,{isTeamRepl:i})})]}):null}function rk(e){var n=e.accountUsedInBytes,t=e.children,r=(0,o._)((0,s.useState)(!1),2),i=r[0],l=r[1],c=(0,t1.MS)(),u=c.replUsedInMib,d=c.scratchUsedInMib,p=c.nixUsedInMib,f=c.workspaceUsedInMib,h=[{title:"This App",usageDisplayText:"".concat(r_(1024*u*1024)),percentOfUsage:rA(1024*u*1024,n),indent:0},{title:"Workspace",usageDisplayText:"".concat(r_(1024*f*1024)),percentOfUsage:null,indent:1},{title:"Nix packages",usageDisplayText:"".concat(r_(1024*p*1024)),percentOfUsage:null,nix:!0,indent:1},{title:"Scratch disk",usageDisplayText:"".concat(r_(1024*d*1024)),percentOfUsage:rA(1024*d*1024,n),indent:0}];return(0,a.FD)(a.FK,{children:[(0,a.FD)(t0,{label:"Storage details",children:[(0,a.Y)(L.S,{css:t6.hoverColumnSection,children:t}),(0,a.FD)(L.S,{p:8,gap:8,css:t6.detailContent,children:[(0,a.Y)(P.EY,{children:"This App's storage usage"}),(0,a.Y)(L.S,{css:t6.detailSectionsWrapper,children:h.map(function(e,n){return(0,a.FD)(L.S,{css:t6.rowSection,children:[(0,a.FD)(L.S,{css:t6.alignedRow,children:[e.indent>0?(0,a.Y)(L.S,{css:e.indent>1&&t6.indentAgain,children:(0,a.Y)(rY.A,{color:I.LU.outlineDefault,size:16})}):null,(0,a.Y)(P.EY,{children:e.title})]}),e.nix?(0,a.Y)(L.S,{css:t6.alignedRow,children:(0,a.Y)(tE.K0,{onClick:function(){return l(!0)},alt:"Delete Nix packages",disabled:p<1,children:(0,a.Y)(tW.A,{})})}):null,(0,a.FD)(L.S,{css:t6.alignedRow,children:[(0,a.Y)(P.EY,{color:"dimmer",children:e.usageDisplayText}),null===e.percentOfUsage?null:(0,a.FD)(P.EY,{color:"dimmer",children:["(",e.percentOfUsage,"%)"]})]})]},n)})})]})]}),(0,a.Y)(rD,{isOpen:i,onClose:function(){return l(!1)}})]})}function rx(e){var n=e.isTeamRepl,t=(0,t1.MJ)(),r=(0,t1.Zb)(),i=1024*t*1024,o=rA(i,1024*r*1024);return(0,a.FD)(L.S,{css:t6.alignedSpaceBetweenRow,children:[(0,a.Y)(L.S,{css:t6.alignedRow,children:(0,a.Y)(P.EY,{children:"This App"})}),(0,a.FD)(P.EY,{color:"dimmer",children:[r_(i)," ",n?"(".concat(o,"% of total)"):null]})]})}var rD=function(e){var n=e.onClose,t=e.isOpen,r=(0,tw.A)().container;return(0,a.Y)(tI.a,{isOpen:t,onRequestClose:n,children:(0,a.Y)(rS.A,{name:"Nix Packages",description:"this App's Nix packages",confirmDescription:"Nix packages",hideModal:n,delete:function(){n();var e=r.openChannel({service:"file",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(n){return n.channel.request({resetNixFilesystem:{}}).then(function(n){n.ok&&e()}),function(){}})}})})},rE=t(1684),rR=t(565),rI=(0,eT.x)({trialButton:[F.wp.borderRadius(4)],loadingStateWrapper:[F.wp.center,F.wp.p(16)]});function rT(e){var n,t,i,o,l,s,c,u,d,p,f,h,m,v,y,w,b,S,Y=e.onRequestUpgrade,_=(l=(0,r._)({},rc,void 0),Z.I(ru,l)),A=_.data,C=_.loading,k=(s={variables:{replId:(0,g.A)()}},c=(0,r._)({},rc,s),Z.I(rd,c)),x=k.data,D=k.loading,E=(null==x?void 0:x.repl.__typename)==="Repl"?x.repl:null,R=(null==E||null==(u=E.org)?void 0:u.id)!==void 0&&(null==E||null==(d=E.org)?void 0:d.type)==="team",I=(null==E||null==(p=E.owner)?void 0:p.__typename)==="Team"||R,T=(null==E||null==(f=E.owner)?void 0:f.id)===(null==A||null==(h=A.currentUser)?void 0:h.id),U=null==A||null==(m=A.currentUser)?void 0:m.userSubscriptionType,N=(null==A||null==(y=A.currentUser)||null==(v=y.paymentMethod)?void 0:v.__typename)==="PaymentMethod"&&null!==A.currentUser.paymentMethod.id,O=null==A||null==(b=A.currentUser)||null==(w=b.userSubscription)?void 0:w.isTrial,M=T&&("HACKER_PRO"!==U||O&&!N)&&!R,H=(0,tq.A)().showResourcesUpsell,B=null==E?void 0:E.authorizations.editResources,z=null!=(S=null==E?void 0:E.authorizations.editFileContents.isAuthorized)&&S,W=(0,t1.ln)();return C||D||W||!B?(0,a.Y)(L.S,{css:rI.loadingStateWrapper,children:(0,a.Y)(nl.A,{})}):(0,a.FD)(L.S,{p:8,gap:8,children:[(0,a.FD)(L.S,{gap:4,children:[(0,a.FD)(L.S,{row:!0,gap:8,children:[(0,a.Y)(P.EY,{variant:"subheadDefault",children:"Resources"}),(0,a.Y)(rF,{resourceTier:(t=(n={isTeamRepl:I,isReplOwner:T,plan:U}).isTeamRepl,i=n.isReplOwner,o=n.plan,t?"team":i&&"HACKER_PRO"===o?"member":i&&null===o?"free":"hidden"),isOnTrial:O,showResourcesUpsell:H})]}),(0,a.Y)(P.EY,{color:"dimmest",children:"Resources for cloud development environment"})]}),(0,a.Y)(t8,{}),!R||z?(0,a.Y)(rC,{isTeamRepl:I,isFileEditor:z}):null,M?(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(nr.$n,{colorway:"blurple",iconLeft:(0,a.Y)(rR.A,{}),text:"Join Replit ".concat(rp.en),onClick:function(){return Y()},css:rI.trialButton}),(0,a.FD)(P.EY,{css:F.wp.textAlign.center,color:"dimmer",variant:"small",children:["Get 4 vCPU, 8 GiB RAM, and ",(0,t5.$p)(tj.RB)," GiB Storage"]})]}):null]})}function rF(e){var n=e.resourceTier,t=e.isOnTrial,r=e.showResourcesUpsell;switch(n){case"free":return r?(0,a.Y)(rh,{}):(0,a.Y)(rE.a,{text:"Free",colorway:"grey"});case"member":if(t)return(0,a.Y)(rE.a,{text:"".concat(rp.en," Trial"),colorway:"blue"});return(0,a.Y)(rE.a,{text:"".concat(rp.en),colorway:"purple"});case"team":return(0,a.Y)(rE.a,{text:"Team",colorway:"green"});default:return null}}var rP=t(54682),rL=t(78104),rU=t(81740);function rN(e){var n,t,r,i,c,u,d,p,f,h,m,g,v,y,w,b,S,Y,_,A,C=e.repl,k=e.currentUser,x=(0,o._)((0,s.useState)("resources"),2),D=x[0],E=x[1],R=(0,tq.A)(),I=R.showResourcesUpsell,T=R.refetch,F=(r=(n={repl:C,currentUser:k,onAlert:function(e){E(e)}}).repl,i=n.currentUser,c=n.onAlert,u=(0,t1.xp)(),d=(0,l.useRouter)(),f=(p=(0,o._)((0,s.useState)(!1),2))[0],h=p[1],m=(null==(t=r.owner)?void 0:t.__typename)==="User"&&r.owner.id===(null==i?void 0:i.id),g=null==i?void 0:i.userSubscriptionType,y=(v=(0,rL.A)("announcement","resources-upgrade-modal")).shouldDisplay,w=v.register,b=v.dismiss,(0,s.useEffect)(function(){!(0,rP.Po)(d)&&m&&null===g&&w()},[m,w,d,g]),Y=(S=(0,o._)((0,s.useState)(!0),2))[0],_=S[1],(0,s.useEffect)(function(){var e=setTimeout(function(){_(!1)},6e4);return function(){return clearTimeout(e)}},[]),A=(0,rU.lO)().isRunning,(0,s.useEffect)(function(){!f&&A&&(f||h(!0))},[A,f]),(0,s.useEffect)(function(){if(!(Y||(0,rP.Po)(d))&&y&&f)return u.subscribe(function(e){e&&c(e.type)})},[u,w,Y,m,c,d,y,g,f]),{dismissAlert:b}).dismissAlert,U=(0,o._)((0,s.useState)(!1),2),N=U[0],O=U[1];return(0,a.FD)(a.FK,{children:[(0,a.FD)(L.S,{css:{overflow:"auto",maxHeight:"80vh"},children:["resources"===D?(0,a.Y)(rT,{onRequestUpgrade:function(){return O(!0)}}):null,"cpu_alert"===D||"ram_alert"===D?(0,a.FD)(L.S,{css:rO.alertDialogWrapper,children:[(0,a.Y)(tE.K0,{onClick:function(){F(),E("resources")},alt:"Close",css:rO.alertDialogCloseButton,children:(0,a.Y)(nd.A,{})}),(0,a.Y)(ro,{alertDialogType:D,onRequestUpgrade:function(){return O(!0)}})]}):null]}),(0,a.Y)(td.default,{isOpen:N,onClose:function(){return O(!1)},onPurchaseComplete:function(){return T()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:I?(0,a.FD)(a.FK,{children:[(0,a.Y)(P.EY,{variant:"subheadBig",children:"Upgrade for a faster Workspace"}),(0,a.FD)(P.EY,{multiline:!0,children:["Unlock 4 vCPU, 8 GiB RAM, and"," ",(0,t5.$p)(tj.RB)," GiB of storage"]})]}):void 0,headingText:"Upgrade for a faster Workspace",subHeadingText:"Unlock 4 vCPU, 8 GiB RAM, and ".concat((0,t5.$p)(tj.RB)," GiB of storage"),analyticsContext:{upgrade:{context:"repl_resources"}},highlightUpsell:"resources"})]})}var rO=(0,eT.x)({alertDialogWrapper:[F.wp.position.relative],alertDialogCloseButton:[F.wp.position.absolute,F.wp.top(8),F.wp.right(8),F.wp.zIndex(1)]}),rM=t(49058),rH=t(17957),rB=t(13850),rz=t(71920),rW=t(22464),rG=t(15493),rV=L.D.form,rZ=(0,eT.x)({form:[F.wp.colWithGap(24)]}),rj=function(e){var n,t,r,i=e.currentUser,l=e.repl,c=e.onDone,u=e.onCancel,d=l.owner?l.owner:l.org,p=null!=(r=null==(n=l.owner)?void 0:n.username)?r:null==(t=l.org)?void 0:t.slug,f=p?"".concat(p,"/").concat(l.slug):l.slug,h=(0,o._)((0,rW.p)(i,null==d?void 0:d.id),3),m=h[0],g=h[1],v=h[2],y=(0,o._)((0,s.useState)(""),2),w=y[0],b=y[1],S=w===f,Y=(0,eW.c)(),_="You do not have permission to transfer this Repl.";return(0,a.Y)(rV,{css:rZ.form,onSubmit:function(e){e.preventDefault(),S&&(alert("Beep boop would transfer Repl, redirecting"),c())},children:(0,a.FD)(L.S,{gap:16,children:[(0,a.Y)(P.EY,{children:"Transfer this Repl to another account or organization."}),(0,a.Y)(rG.d,{colorway:"grey",text:"Transferring ownership might result in losing some features, depending on the subscription status of the selected organization. Click here for more details.",iconLeft:(0,a.Y)(eB.A,{}),href:"https://docs.replit.com/teams/collaboration-on-replit#transferring-repls-to-organizations",target:"_blank"}),(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:Y("owner"),children:(0,a.Y)(P.EY,{color:"dimmer",variant:"small",children:"New Owner"})}),(0,a.Y)(rz.A,{id:Y("owner"),owners:v,selectedOwner:m,setSelectedOwner:g})]}),_?(0,a.Y)(no.N,{colorway:"negative",text:_}):null,(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:Y("confirmName"),children:(0,a.FD)(P.EY,{color:"dimmer",variant:"small",children:["Type the name ",f," to delete"]})}),(0,a.Y)(eG.pd,{id:Y("confirmName"),disabled:!1,autoFocus:!0,value:w,onChange:function(e){return b(e.currentTarget.value)}})]}),(0,a.FD)(L.S,{row:!0,gap:12,justify:"end",children:[(0,a.Y)(nr.$n,{type:"button",onClick:u,text:"Cancel"}),(0,a.Y)(nr.$n,{type:"submit",disabled:!S,iconLeft:(0,a.Y)(tB.A,{}),colorway:"negative",text:"Yes, transfer this Repl"})]})]})})},rq=function(e){var n=e.repl,t=e.onDone,r=e.onCancel,i=(0,rB.wo)().data,o=null==i?void 0:i.currentUser;return(0,a.FD)(L.S,{gap:24,children:[(0,a.FD)(P.Y9,{variant:"subheadBig",level:2,children:["Transfer ",n.title]}),o?(0,a.Y)(rj,{currentUser:o,repl:n,onDone:t,onCancel:r}):(0,a.Y)(L.S,{align:"center",children:(0,a.Y)(nl.A,{})})]})},rK=t(10327),r$=t(67611),rJ=(0,eT.x)({loadingRoot:[F.wp.center,F.wp.p(16)],root:{overflow:"auto",maxHeight:"80vh"},form:[F.wp.p(8)]});function rQ(e){var n=e.getDesktopLayoutState,t=e.setIsEditing,r=e.showCloseButton,i=(0,g.A)(),o=(0,d.P6)({variables:{replId:i}}).data,l=(null==o?void 0:o.getRepl.__typename)==="Repl"?o.getRepl:null,s=null==o?void 0:o.currentUser;return l&&s?(0,a.Y)(r0,{getDesktopLayoutState:n,setIsEditing:t,showCloseButton:r,repl:l,currentUser:s}):(0,a.Y)(L.S,{css:rJ.loadingRoot,children:(0,a.Y)(nl.A,{})})}var rX=[u.rTW.Submit,u.rTW.PublishTemplate,u.rTW.EditTemplate];function r0(e){var n,t,g,A,C,k,x,D,E=e.repl,R=e.getDesktopLayoutState,I=e.showCloseButton,T=e.setIsEditing,U=e.currentUser,N=(0,l.useRouter)(),O=(0,f.A)(),M=(0,o._)((0,s.useState)(null),2),H=M[0],B=M[1],z=(0,o._)((0,s.useState)(!1),2),W=z[0],G=z[1],V=(0,o._)((0,s.useState)(E.isRenamed?E.title:""),2),Z=V[0],j=V[1],q=(0,o._)((0,s.useState)(E.description||""),2),K=q[0],$=q[1],J=(0,o._)((0,s.useState)(E.rawTemplateLabel),2),Q=J[0],X=J[1],ee=(0,m.A)().showError,en=E.publishedAs===u.Q_w.Template,et=(null==(n=E.org)?void 0:n.type)!=="team"&&(E.authorizations.editVisibility.isAuthorized||E.authorizations.editVisibility.code===u.S4P.RequiresActiveSubscription);(0,s.useEffect)(function(){$(E.description||"")},[E.description]);var er=(0,s.useRef)(E),ei=(0,o._)((0,d.aI)({variables:{id:E.id},onCompleted:function(){var e;if(O)return void N.push("/desktopApp/home");if((null==(e=E.org)?void 0:e.type)==="team"){var n=(0,b.EG)(E.org);N.push(n.home.href);return}N.push("/home","/~")},update:function(e,n){var t;(null==(t=n.data)?void 0:t.deleteRepl)&&(e.evict({id:e.identify(n.data.deleteRepl)}),e.gc())},onError:function(e){return ee((0,v.A)(e.message))}}),2),eo=ei[0],ea=ei[1].loading,el=(0,o._)((0,d.KZ)({onError:function(e){return ee((0,v.A)(e.message))},onCompleted:function(e){var n=e.updateRepl.repl,t=er.current,r={};t.description!==n.description&&(r.description=n.description),t.title!==n.title&&(r.title=n.title),t.url!==n.url&&(r.url=n.url,window.history.replaceState(null,"",n.url+window.location.search+window.location.hash)),t.isRenamed!==n.isRenamed&&(r.isRenamed=!!n.isRenamed),er.current=E,Object.keys(r).length>0&&T(!1)}}),2),es=el[0],ec=el[1].loading,eu=(0,o._)((0,d.SY)({variables:{input:{replId:E.id}},onError:function(e){c.Cp(e),ee((0,v.A)(e.message))}}),2),ed=eu[0],ep=eu[1],ef=(0,s.useMemo)(function(){return!!Z&&Z!==E.title||Q!==E.rawTemplateLabel||(""!==K||!!E.description)&&K!==E.description},[E,Z,K,Q]),eh=(0,h.A)(ef),em=(0,s.useCallback)(function(){ef&&es({variables:{input:{id:E.id,title:Z.trim()||E.title,description:K,templateLabel:E.authorizations.editTemplateMetadata.isAuthorized?Q:void 0}}})},[ef,es,E,Z,K,Q]),eg=(0,h.A)(em);(0,s.useLayoutEffect)(function(){return function(){eh.current&&eg.current()}},[eg,eh]);var ev=function(){es({variables:{input:{id:E.id,isPrivate:!E.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i._)((0,r._)({},E),{isPrivate:!E.isPrivate})}}}),(0,w.u4)(w.AZ.PRIVATE_TOGGLED,{enabled:!E.isPrivate,source:"workspace_info_modal"})},ey=E.isRenamed?"Name your App":"Default name: ".concat(E.title),ew=rX.includes(E.workspaceCta),eb=(0,eW.c)(),eS=(null==(t=E.owner)?void 0:t.__typename)==="Team";return W?(0,a.FD)(L.S,{css:rJ.root,p:8,children:[(0,a.Y)(L.S,{row:!0,children:(0,a.Y)(nr.$n,{variant:"outlined",onClick:function(){return G(!1)},text:"Back",iconLeft:(0,a.Y)(nB.A,{}),size:"small"})}),(0,a.Y)(rN,{repl:E,currentUser:U})]}):(0,a.FD)("div",{css:rJ.root,"data-can-change-description":E.authorizations.editMetadata.isAuthorized,children:[(0,a.Y)(tT.B,{forkParams:{trackingData:{forkSource:"editReplPopoverMenuItem"}},repl:E,teamContext:(null==(g=E.owner)?void 0:g.__typename)==="Team"?E.owner.id:void 0,children:(0,a.Y)(tZ,{repl:E,isTemplate:en,showCloseButton:I,setActiveDialog:B,setIsEditing:T,updateReplInfo:em,isFeaturedRepl:E.isFeaturedRepl,onAppResources:function(){(0,w.u4)(w.AZ.REPL_RESOURCES_OPENED),G(!0)}})}),(0,a.Y)("form",{css:rJ.form,onSubmit:function(e){e.preventDefault(),em()},children:(0,a.FD)(L.S,{align:"stretch",gap:16,children:[(0,a.FD)(eL.ui,{background:"default",gap:16,children:[(0,a.Y)(L.S,{children:(0,a.FD)(L.S,{gap:4,children:[(0,a.FD)(L.S,{row:!0,justify:"space-between",align:"end",children:[(0,a.Y)("label",{htmlFor:eb("name"),children:(0,a.Y)(P.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,a.Y)(rH.A,{maxLength:60,value:Z,hideLabel:!0})]}),(0,a.Y)(eG.pd,{style:{cursor:E.authorizations.editMetadata.isAuthorized?"auto":"not-allowed"},disabled:!E.authorizations.editMetadata.isAuthorized,maxLength:60,placeholder:ey,value:Z,onChange:function(e){return j(e.target.value)},spellCheck:!1,id:eb("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,a.Y)(L.S,{children:(0,a.FD)(L.S,{gap:4,children:[(0,a.FD)(L.S,{row:!0,justify:"space-between",align:"end",children:[(0,a.Y)("label",{htmlFor:eb("description"),children:(0,a.Y)(P.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,a.Y)(rH.A,{maxLength:tu.z,value:K,hideLabel:!0})]}),(0,a.Y)(eG.ov,{disabled:!E.authorizations.editMetadata.isAuthorized,maxLength:tu.z,value:K,onChange:function(e){return $(e.target.value)},placeholder:"What does this App do?",css:[F.wp.minHeight(96),F.wp.maxHeight(256),{resize:"vertical"}],id:eb("description")})]})})]}),en&&E.authorizations.editTemplateMetadata.isAuthorized?(0,a.Y)(eL.ui,{background:"default",gap:4,children:(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:eb("template"),children:(0,a.Y)(P.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,a.Y)(eG.pd,{value:Q,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return X(e.target.value)},id:eb("template")})]})}):null]})}),ew?null:(0,a.FD)(L.S,{gap:24,p:8,children:[(0,a.FD)(L.S,{gap:24,children:[(0,a.Y)(Y.A,{replId:E.id,authz:E.authorizations.editMetadata,initialIconUrl:E.iconUrl,originIconUrl:null==(A=E.templateInfo)?void 0:A.iconUrl}),(0,a.Y)(S.A,{replId:E.id,authz:E.authorizations.editMetadata,initialImageUrl:null!=(D=E.imageUrl)?D:null==(C=E.templateInfo)?void 0:C.imageUrl,originImageUrl:null==(k=E.templateInfo)?void 0:k.imageUrl})]}),et?(0,a.FD)(L.S,{gap:8,children:[(0,a.FD)(rM.e2,{tag:"fieldset",name:eb("privacy"),value:E.isPrivate.toString(),onChange:function(){if(!ec){(0,w.u4)(w.AZ.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!E.isPrivate,source:"workspace_info_modal"});var e,n=!E.isPrivate;if(E.authorizations.editVisibility.isAuthorized||!1===n)return void ev();E.authorizations.editVisibility.code===u.S4P.RequiresActiveSubscription&&(null==(e=E.org)?void 0:e.__typename)!=="Org"?B(tx.PowerUp):ee(E.authorizations.editVisibility.message)}},row:!0,primary:!0,stretch:!0,children:[(0,a.Y)(rM.$O,{id:eb("false"),value:"false",text:"Public",icon:(0,a.Y)(rK.A,{})}),(0,a.Y)(rM.$O,{id:eb("true"),value:"true",text:"Private",icon:(0,a.Y)(r$.A,{})})]}),(0,a.Y)(P.EY,{variant:"small",color:"dimmest",children:(0,y.A)(E.isPrivate,eS)})]}):null]}),(0,a.Y)(tc.A,{isOpen:H===tx.DeleteRepl,onClose:function(){return B(null)},selectedRepls:[E],onDelete:function(){eo()},deleting:ea}),(0,a.Y)(td.default,{isOpen:H===tx.PowerUp,onClose:function(){return B(null)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"workspace_info_modal"}}}),(0,a.Y)(tI.a,{isOpen:H===tx.UnpublishTemplate,onRequestClose:function(){return B(null)},children:(0,a.Y)(p.A,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return B(null)},onConfirm:function(){ep.loading||(ed(),B(null))},children:"Your App will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,a.Y)(tI.a,{isOpen:H===tx.EditPublishedTemplateSettings,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,a.Y)(nJ,{source:"replEnvironment",replId:E.id,getDesktopLayoutState:R})}),(0,a.Y)(tI.a,{isOpen:H===tx.PublishTemplate,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,a.Y)(nJ,{source:"replEnvironment",replId:E.id,getDesktopLayoutState:R})}),(0,a.Y)(tI.a,{isOpen:H===tx.UpdatePublishedTemplate,onRequestClose:function(){return B(null)},noPadding:!0,children:(0,a.Y)(ta,{repl:E,getDesktopLayoutState:R})}),(0,a.Y)(tI.a,{isOpen:H===tx.Share,onRequestClose:function(){return B(null)},noPadding:!0,children:(0,a.Y)(eM,{repl:E})}),(0,a.Y)(tI.a,{isOpen:H===tx.TransferRepl,onRequestClose:function(){return B(null)},children:(0,a.Y)(rq,{repl:E,onDone:function(){return B(null)},onCancel:function(){return B(null)}})}),(0,a.Y)(tI.a,{isOpen:H===tx.FeatureRepl,onRequestClose:function(){return B(null)},centered:!0,maxWidth:650,children:(0,a.Y)(_.A,{isFeatured:E.isFeaturedRepl,repl:E,orgId:null==(x=E.org)?void 0:x.id,onCompleted:function(){return B(null)}})})]})}},17523:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(12694),i=t(21462),o=t(71424);function a(){var e=(0,o.A)().presence,n=(0,r._)((0,i.useState)(e.getFollowedUser()),2),t=n[0],a=n[1];return(0,i.useEffect)(function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)},[e]),t}},17545:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(17844),i=t(93629),o=t(81073),a=t(36937),l=t(18509),s=t(27023),c=t(22422),u=t(78626),d=t(85389),p=(0,l.x)({default:[],withOnClick:[s.wp.cursor.pointer,{transition:"all 0.2s ease","&:hover":{filter:"brightness(95%)",boxShadow:a.LU.shadow1}}]});function f(e){var n=e.user,t=e.onClick,a=e.size,l=void 0===a?24:a;return(0,o.Y)(u.m_,{placement:"bottom",tooltip:t?"Observe ".concat(n.username):n.username,children:function(e,a){return(0,o.Y)(d.S,(0,i._)((0,r._)({},e),{innerRef:a,onClick:t,children:(0,o.Y)(c.e,{size:l,src:n.image||null,username:n.username,ringColor:n.color,css:t?p.withOnClick:p.default})}))}})}},17562:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M14.25 3a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0V4.81l-5.72 5.72a.75.75 0 1 1-1.06-1.06l5.72-5.72H15a.75.75 0 0 1-.75-.75Zm-3.72 10.47a.75.75 0 0 1 0 1.06l-5.72 5.72H9a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75v-6a.75.75 0 0 1 1.5 0v4.19l5.72-5.72a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"})}))}},17574:(e,n,t)=>{"use strict";t.d(n,{y:()=>d});var r=t(81073),i=t(21462),o=t(83603),a=t(17089),l=t(46449),s=t(89305),c=t(59474),u=t(15407),d=function(e){var n=e.sessionId,t=e.type,d=void 0===t?"assistant":t,p=(0,o.ET)(),f=p.orgId,h=p.orgSlug,m=(0,c.L)(null!=n?n:null),g=(0,s.w)(null!=n?n:null).cents,v="assistant"===d?m:g,y=f&&h?"".concat((0,l.EG)({slug:h}).usage.href,"#").concat(d):"/usage#".concat(d),w=(0,i.useCallback)(function(){(0,a.u4)("assistant"===d?a.AZ.ASSISTANT_USED:a.AZ.AGENT_USED,{action:"opened_usage_link",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),window.open(y,"_blank")},[y,d]),b=(0,i.useMemo)(function(){return{data:{type:"action",icon:(0,r.Y)(u.A,{}),label:v?"Usage (this chat: $".concat((v/100).toFixed(2),")"):"Usage",run:w}}},[v,w]),S=(0,i.useMemo)(function(){return{name:"Usage",commands:[b]}},[b]);return{handleUsageClick:w,usageCommand:b,usageCommandGroup:S,cents:v,usageHref:y}}},18069:(e,n,t)=>{"use strict";t.d(n,{C9:()=>l,hT:()=>s,sz:()=>c,zS:()=>u});var r=t(21462),i=t(8950),o=t(67917),a=t(73176);function l(){var e=(0,o.NC)(),n=(0,a.J2)(e.sessions.agent.current),t=(0,o.hM)(),l=(0,r.useCallback)(function(e){null==n||n.agent.update(e),e===i.g32.AGENT_STATE_PAUSED&&t(!0)},[n,t]);return{agentState:null==n?void 0:n.agent.state,updateAgentState:l}}function s(){var e=l().agentState;return(0,a.Rj)(function(){return null==e?void 0:e.select(function(e){return null==e?void 0:e.state})},[e])}function c(){return s()===i.g32.AGENT_STATE_RUNNING}function u(){var e=l().updateAgentState;return(0,r.useCallback)(function(){return e(i.g32.AGENT_STATE_PAUSED)},[e])}},18278:(e,n,t)=>{"use strict";t.d(n,{qP:()=>V,SE:()=>z,JW:()=>B});var r=t(29935),i=t(17844),o=t(12694),a=t(82643),l=t(81073),s=t(21462),c=t(12161),u=t(88011),d=t(69320),p=t(58271),f=t(77582),h=t(27915),m=t(91873),g=t(55100),v=t(83365),y=t(90629);function w(e,n,t){return y.v4(function(r){r.setTag("neon-pane",!0),r.setTag("context",n),t&&r.setExtras(t),y.Cp(e)}),e}var b=t(18509),S=t(27023),Y=t(11769),_=t(47245),A=t(24928),C=t(85144),k=t(52637),x=t(36073),D=t(41358),E=t(4616),R=t(85389),I=t(62183),T=t(63456),F=t(71872),P=(0,b.x)({title:S.wp.pb(8),card:[S.wp.p(8),S.wp.borderRadius(8),{outline:"1px solid transparent"}],error:[S.wp.color.accentNegativeStronger],dialogMessage:[S.wp.flex.growAndShrink(1)],dialogButtonContainer:[S.wp.display.flex,S.wp.flex.row,S.wp.justify.end],list:[S.wp.fontSize(12),{li:[S.wp.pt(1),{"&:before":[S.wp.mr(4),{content:'"•"'}]}]}],statusDateInput:[{margin:"4px -4px 0"}]}),L=new c.p("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"});function U(e){var n=e.timeZone,t=e.validationError,r=e.commitError;return t?(0,l.Y)(E.EY,{css:P.error,children:t}):r?(0,l.Y)(E.EY,{css:P.error,children:"Could not determine timestamp from agent rollback"}):(0,l.Y)(E.EY,{color:"dimmest",children:n})}function N(e){var n=e.value,t=e.loading,r=e.restored,i=e.error,a=e.validationError,c=e.onRestore,u=(0,o._)((0,s.useState)(!1),2),d=u[0],p=u[1];return(0,l.FD)(l.FK,{children:[(0,l.Y)(Y.$n,{text:t?"":r?"Restored":"Restore",loading:t,iconLeft:t?(0,l.Y)(T.A,{}):void 0,disabled:!!i||!!a||!n||t||r,onClick:function(){return p(!0)},colorway:r?"positive":"primary"}),i&&(0,l.Y)(E.EY,{css:P.error,children:i}),(0,l.Y)(C.a,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,l.FD)(R.S,{gap:16,children:[(0,l.FD)(R.S,{row:!0,gap:8,align:"center",children:[(0,l.Y)(I.A,{size:20}),(0,l.Y)(E.Y9,{variant:"subheadDefault",level:1,children:"Restoring your database"})]}),(0,l.FD)(R.S,{gap:8,children:[(0,l.Y)(E.EY,{multiline:!0,css:P.dialogMessage,children:"Your database will be restored to it's past state at:"}),(0,l.Y)(x.N,{text:n?L.format(n.toDate()):"Could not determine restore date"}),(0,l.Y)(x.N,{icon:(0,l.Y)(F.A,{}),colorway:"warning",text:(0,l.FD)(l.FK,{children:["This action cannot be undone.",(0,l.Y)("br",{}),(0,l.FD)("ul",{css:P.list,children:[(0,l.Y)("li",{children:"All current data will be replaced with data from this backup"}),(0,l.Y)("li",{children:"Any changes made after this backup point will be lost"}),(0,l.Y)("li",{children:"Connected services may need to be reconfigured"}),(0,l.Y)("li",{children:"If you've deployed, any production data changed after this time will be lost"})]})]})})]}),(0,l.Y)(R.S,{css:P.dialogButtonContainer,children:(0,l.Y)(Y.$n,{colorway:"primary",onClick:function(){p(!1),c(n)},text:"Continue"})})]})})]})}function O(e){var n=e.value,t=e.loading,r=e.restored,i=e.error,o=e.minValue,a=e.maxValue,s=e.isFrozen,c=e.validationError,d=e.timeZone,p=e.onChange,f=e.onRestore;return(0,l.FD)(l.FK,{children:[(0,l.Y)(m.A,{granularity:"second",hourCycle:24,minValue:o,maxValue:a,value:n?(0,u.tR)(n):void 0,onChange:p,"aria-labelledby":"restore-timestamp",isDisabled:s||t}),(0,l.Y)(U,{timeZone:d,validationError:c}),(0,l.Y)(N,{value:n,loading:t,onRestore:f,restored:r,error:i,validationError:c})]})}function M(e){var n,t=e.restoreToCommitId,i=e.value,o=e.loading,c=e.restored,p=e.error,f=e.minValue,h=e.maxValue,g=e.isFrozen,y=e.validationError,w=e.timeZone,b=e.onChange,S=e.onRestore,_=(0,v.A)((n=(0,r._)(function(e){var n;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e.getCommit({commit:t})];case 1:if((n=r.sent()).error)return[2,n];return[2,{timestamp:n.committer.date,error:null}]}})}),function(e){return n.apply(this,arguments)}),[t]),A=(0,s.useMemo)(function(){if(_&&!_.error)return(0,d.TL)(new Date(_.timestamp).toISOString(),w)},[_,w]),C=!i||(null==A?void 0:A.compare(i))===0;return((0,s.useEffect)(function(){!i&&A&&b((0,u.tR)(A))},[i,A,b]),_&&_.error)?(0,l.Y)(x.N,{text:_.error,colorway:"negative"}):(0,l.FD)(l.FK,{children:[(0,l.Y)(x.N,{colorway:C?"blurple":void 0,text:(0,l.FD)(l.FK,{children:[C?"Restoring database to time of agent rollback":(0,l.FD)(R.S,{row:!0,gap:4,children:["Restoring database to selected timestamp,"," ",(0,l.Y)(Y.$n,{text:"restore to agent rollback",variant:"underlined",size:"small",onClick:function(){A&&b((0,u.tR)(A))}})]}),(0,l.Y)(R.S,{css:P.statusDateInput,children:(0,l.Y)(m.A,{granularity:"second",hourCycle:24,minValue:f,maxValue:h,value:i?(0,u.tR)(i):void 0,onChange:b,"aria-labelledby":"restore-timestamp",isDisabled:g||o||!i})})]})}),(0,l.Y)(U,{timeZone:w,validationError:y,commitError:null==_?void 0:_.error}),(0,l.Y)(N,{value:i||A,loading:o,onRestore:S,restored:c,error:p,validationError:y})]})}function H(e){return(0,l.FD)(l.FK,{children:[(0,l.Y)(_.J,{variant:"text","aria-label":"restore-timestamp",children:"Timestamp"}),"restoreToCommitId"in e&&e.restoreToCommitId?(0,l.Y)(M,(0,i._)({},e)):(0,l.Y)(O,(0,i._)({},e))]})}function B(e,n){if(e.isFrozen)return(0,h._)("Database is frozen and cannot be restored");var t=(0,p.Xj)(),r=(0,p.tB)(t),i=e.historyRetentionSeconds;if(0===i)return(0,h._)("History retention is disabled so there are no restore points.");var o=(0,d.TL)(new Date(e.timeCreated).toISOString(),t).add({minutes:1}),a=r.subtract({seconds:i}),l=(0,u.uB)(o,t),s=(0,u.uB)(a,t),c=(0,u.uB)(r,t);if(0>n.compare(l)){var f=l.toDate().toLocaleString();return(0,h._)("Restore point is before database creation time (".concat(f,")"))}if(0>n.compare(s)){var m=s.toDate().toLocaleString();return(0,h._)("Restore point is before the configured database history retention period (".concat(m,")"))}return n.compare(c)>0?(0,h._)("Restore point is in the future"):(0,h.Ok)(!0)}function z(e){var n,t,r,i=e.neonDatabase,a=e.restoreToCommitId,c=(0,g.A)(),h=(0,p.Xj)(),m=(0,p.tB)(h),v=i.historyRetentionSeconds,y=0===v,b=(0,d.TL)(new Date(i.timeCreated).toISOString(),h).add({minutes:1}),S=m.subtract({seconds:v}),Y=(0,o._)((0,s.useState)(),2),_=Y[0],A=Y[1],C=(0,o._)((0,s.useState)(),2),k=C[0],I=C[1],T=(0,o._)((0,s.useState)(!1),2),L=T[0],U=T[1],N=(0,o._)((0,s.useState)(),2),O=N[0],M=N[1],z=(0,o._)((0,f.Ak)({onError:function(e){w(e,"rollbackNeonDatabase",{replId:c,neonProjectId:i.projectId}),M("Something went wrong.")},onCompleted:function(e){if("RollbackNeonDatabaseResult"!==e.rollbackNeonDatabase.__typename)return void M(e.rollbackNeonDatabase.message);U(!0)}}),2),W=z[0],G=z[1].loading,V=i.isFrozen||y;return(0,l.FD)(R.S,{children:[(0,l.Y)(E.EY,{variant:"subheadDefault",css:P.title,children:"Restore"}),(0,l.FD)(D.ui,{elevated:!0,css:P.card,gap:4,children:[(0,l.Y)(R.S,{children:(0,l.Y)(E.EY,{color:"dimmer",children:"Quickly restore a branch to a point within it's history retention period."})}),V?(0,l.Y)(x.N,{text:(t=(n={isFrozen:i.isFrozen,hasDisabledHistoryRetention:y}).isFrozen,r=n.hasDisabledHistoryRetention,t?"Database is frozen. You cannot restore a database that has been frozen.":r?"History retention is disabled. You cannot restore a database with history retention disabled.":void 0),colorway:"warning",icon:(0,l.Y)(F.A,{})}):(0,l.Y)(H,{restoreToCommitId:a,value:_,loading:G,restored:L,error:O,minValue:S>b?S:b,maxValue:m,isFrozen:i.isFrozen,validationError:k,timeZone:h,onChange:function(e){if(e){L&&(U(!1),M(void 0));var n=(0,u.uB)(e,h),t=B(i,n);t.ok?(I(void 0),A(n)):I(t.error)}},onRestore:function(e){if(!e)return void M("Could not determine restore date");W({variables:{input:{neonProjectId:i.projectId,replId:c,timestamp:e.toAbsoluteString()}}})}})]})]})}var W=[{value:0,title:"Disabled"},{value:21600,title:"6 Hours"},{value:43200,title:"12 Hours"},{value:86400,title:"1 Day"},{value:172800,title:"2 Days"},{value:432e3,title:"5 Days"},{value:604800,title:"7 Days"}];function G(e){var n=e.currentRetentionPeriod,t=e.loading,r=e.success,i=e.disabled,a=e.onClick,c=e.error,u=(0,o._)((0,s.useState)(n),2),d=u[0],p=u[1],f=r||d!==n;return(0,l.FD)(R.S,{gap:12,children:[(0,l.FD)(R.S,{gap:8,children:[(0,l.Y)(_.J,{htmlFor:"history-retention-period",children:(0,l.Y)(E.EY,{children:"History Retention Period"})}),(0,l.Y)(k.l,{id:"history-retention-period","aria-labelledby":"history-retention-period",selectedKey:d,onSelectionChange:function(e){p(parseInt(String(e),10))},items:W,isDisabled:i,children:function(e){return(0,l.Y)(A.nh,{id:e.value,label:e.title},e.value)}})]}),f?(0,l.FD)(l.FK,{children:[(0,l.Y)(x.N,{text:"Increasing your retention window will increase your project's storage usage. Decreasing your retention window will prevent you from restoring to a point in time older than the new retention window and will delete any historical data that was being retained beyond it.",colorway:"warning",icon:(0,l.Y)(F.A,{})}),(0,l.Y)(Y.$n,{text:t?"":r?"Updated":"Confirm",loading:t,iconLeft:t?(0,l.Y)(T.A,{}):void 0,disabled:!!c||t||r,onClick:function(){return a(d)},colorway:r?"positive":"primary"}),c&&(0,l.Y)(E.EY,{css:P.error,children:c})]}):null]})}function V(e){var n=e.neonDatabase,t=(0,g.A)(),r=(0,o._)((0,s.useState)(!1),2),i=r[0],a=r[1],c=(0,o._)((0,s.useState)(),2),u=c[0],d=c[1],p=(0,o._)((0,f.yQ)({onError:function(e){w(e,"setNeonHistoryRetentionPeriod",{replId:t,neonProjectId:n.projectId}),d("Something went wrong.")},onCompleted:function(e){if("SetNeonDatabaseConfigurationResult"!==e.setNeonDatabaseConfiguration.__typename)return void d(e.setNeonDatabaseConfiguration.message);a(!0)}}),2),h=p[0],m=p[1].loading;return(0,l.FD)(R.S,{children:[(0,l.Y)(E.EY,{variant:"subheadDefault",css:P.title,children:"History Retention"}),(0,l.FD)(D.ui,{elevated:!0,css:P.card,gap:4,children:[(0,l.Y)(R.S,{children:(0,l.Y)(E.EY,{color:"dimmer",children:"Maintain a history of changes for a period of time, enabling features like point-in-time restore and restoring a database back to an agent checkpoint."})}),n.isFrozen||n.isEphemeral?(0,l.Y)(x.N,{text:n.isFrozen?"Database is frozen. You cannot update the history retention of a frozen database.":"Temporary databases created on the free Starter plan do not support configurable history retention.",colorway:"warning",icon:(0,l.Y)(F.A,{})}):null,(0,l.Y)(G,{currentRetentionPeriod:n.historyRetentionSeconds,loading:m,success:i,disabled:m||n.isFrozen||n.isEphemeral,onClick:function(e){h({variables:{input:{neonProjectId:n.projectId,replId:t,historyRetentionSeconds:e}}})},error:u})]})]})}},18329:(e,n,t)=>{"use strict";t.d(n,{R:()=>p});var r=t(81073),i=t(21462),o=t(1982),a=t(3677),l=t(42793),s=t(27023),c=t(11769),u=t(89905),d=(0,l.AH)([s.wp.mt(8)]);function p(e){var n=e.onOpenEnvEditor,t=(0,a.A)(),l=(0,o.A)(),s=(0,i.useRef)(!1);(0,i.useEffect)(function(){if(t&&!s.current){var e=l.showNotice((0,r.FD)(r.FK,{children:[(0,r.Y)("div",{children:"This App contains secrets that are missing values."}),(0,r.Y)("div",{children:"Add values to ensure the App runs as expected."}),(0,r.Y)("div",{children:(0,r.Y)(c.$n,{size:"small",iconLeft:(0,r.Y)(u.A,{}),css:d,colorway:"primary",onClick:function(){n(),l.hideMessage(e)},text:"Manage secrets"})})]}),1e4);s.current=!0}},[t])}},18404:e=>{e.exports={root:"FreemiumQuotaExceeded_root__VICrJ",text:"FreemiumQuotaExceeded_text__KTXul",buttonContainer:"FreemiumQuotaExceeded_buttonContainer__o50NS",upgradeButton:"FreemiumQuotaExceeded_upgradeButton__Bz_QD"}},18456:(e,n,t)=>{"use strict";t.d(n,{Ln:()=>l,li:()=>a});var r=t(76957),i=t(63492),o=(0,r.eU)(null);function a(){return(0,i.ob)(o)}function l(){return(0,i.h)(o)}},18911:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14A1.25 1.25 0 0 0 5 20.25h1.25V13a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 .75.75v7.25H19A1.25 1.25 0 0 0 20.25 19V8.31l-2.5-2.5V8a.75.75 0 0 1-.75.75H7A.75.75 0 0 1 6.25 8V3.75H5Zm0-1.5A2.75 2.75 0 0 0 2.25 5v14A2.75 2.75 0 0 0 5 21.75h14A2.75 2.75 0 0 0 21.75 19V8a.75.75 0 0 0-.22-.53l-5-5a.75.75 0 0 0-.53-.22H5Zm2.75 1.5v3.5h8.5V4.31l-.56-.56H7.75Zm8.5 16.5v-6.5h-8.5v6.5h8.5Z",clipRule:"evenodd"})}))}},19340:(e,n,t)=>{"use strict";t.d(n,{r:()=>el});var r=t(83846),i=t(17844),o=t(81073),a=t(21462),l=t(98679),s=t(31092),c=t(27741),u=t(81986),d=t(60690),p=t(36937),f=t(18509),h=t(85051),m=t(24602),g=t(27023),v=t(36073),y=t(85389),w=t(83528),b=t(60943),S=t(54613),Y=(0,f.x)({root:[g.wp.reset.button,g.wp.viewStyle,g.wp.flex.row,g.wp.align.center,g.wp.borderRadius(0),g.wp.cursor.pointer,g.wp.color.foregroundDimmer,g.wp.px(4),{gap:p.LU.space6,"&:hover":{color:p.LU.foregroundDefault}}],icon:[g.wp.position.relative,b.Ef,{width:b.eQ.iconSize,height:b.eQ.iconSize}],iconRight:[b.Ef,{width:b.eQ.iconSize,height:b.eQ.iconSize}],text:[g.wp.truncate,g.wp.flex.shrink(1),{fontSize:b.eQ.fontSize}]}),_=(0,a.memo)(function(){var e=(0,w.if)(),n=e.breadcrumbs,t=e.iconOnly,r=e.onClick;return n.length?(0,o.Y)(o.FK,{children:n.map(function(e,n){if(!e.data||!("label"in e.data))return null;var i=e.data,a=i.label,l=i.icon;return(0,o.FD)("button",{css:Y.root,onClick:function(){return r(e)},children:[(0,o.Y)(y.S,{css:Y.icon,children:l}),t?null:(0,o.Y)(y.S,{css:Y.text,children:a}),(0,o.Y)(y.S,{css:Y.iconRight,children:(0,o.Y)(S.A,{})})]},a+n)})}):null}),A=t(42793),C=t(87064),k=t(63456),x=(0,A.AH)([g.wp.reset.button,g.wp.viewStyle,g.wp.center,g.wp.height("100%"),g.wp.cursor.pointer,g.wp.color.foregroundDimmest,g.wp.px(4),{"&:hover":{color:p.LU.foregroundDefault}},b.Ef]);function D(e){return(0,o.Y)("button",{css:x,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,o.Y)(k.A,{}):(0,o.Y)(C.A,{})})}var E=t(22237),R=t(93629),I=t(4880),T=t(29757),F=t(1684),P=t(41358),L=t(78626),U=t(51240),N=t(90097),O=t(19202),M=t(48604),H=[g.wp.position.absolute,g.wp.top(0),g.wp.left(0),g.wp.width("100%")],B=(0,f.x)({item:[H,(0,r._)({userSelect:"none",cursor:"pointer","> div":{borderRadius:"4px",marginInline:b.eQ.inputBarPadding,height:"100%",justifyContent:"center"},"&:hover > div":{backgroundColor:p.LU.interactiveBackground}},g.kL.min(E.aF,E.yN),{"> div":{borderRadius:"4px"}})]}),z=(0,a.memo)((0,a.forwardRef)(function(e,n){var t=(0,T.H)(),r=(0,w.mg)(),l=(0,w.IT)(e.index),s=l.row,c=l.active,u=l.onClick,d=l.ariaAttrs;if(!s)return null;var p={height:r?void 0:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===s.type)return(0,o.Y)(j,{innerRef:n,path:s.path,style:p,border:e.index>0,index:e.index,tooltip:s.tooltip});var f=s.item,h=f.data,m=f.match;if("group"===h.type)return null;var g=m.render;if(g&&"content"in g&&g.content)return(0,o.FD)(y.S,(0,R._)((0,i._)({innerRef:n,css:B.item,style:p,onClick:u,"data-index":e.index},d),{children:[(0,o.Y)(P.ui,{elevated:c,children:(0,a.cloneElement)(g.content,{active:c})}),t?(0,o.Y)(K,{score:m.score}):null]}));var v=h.label,b=h.icon,S=h.dataCy,Y=g&&"ranges"in g?g.ranges:void 0;return(0,o.FD)(y.S,(0,R._)((0,i._)({innerRef:n,css:B.item,style:p,onClick:u,dataCy:S,"data-index":e.index},d),{children:[(0,o.Y)(G,{active:c,icon:b,text:v,highlight:Y,description:h.description,shortcut:h.keyboardShortcut,hasChildren:"context"===f.data.type}),t?(0,o.Y)(K,{score:m.score}):null]}))}));z.displayName="Row";var W=(0,f.x)({root:[g.wp.height("100%"),{userSelect:"none",paddingInline:b.eQ.inputBarPadding,minHeight:b.eQ.inputBarHeight}],iconText:[g.wp.maxWidth("100%"),{gap:p.LU.space8,flexShrink:1}],description:[g.wp.truncate,{fontSize:"0.9em",flexGrow:1,flexShrink:2}],right:[{gap:p.LU.space4,justifySelf:"end",marginLeft:"auto"}],chevron:"calc(".concat(b.eQ.iconSize," - 2px)")});function G(e){var n=(0,N.h)(w.KO);return(0,o.FD)(P.ui,{row:!0,align:"center",gap:b.eQ.inputBarPadding,elevated:e.active,css:W.root,children:[(0,o.FD)(y.S,{css:W.iconText,align:"center",row:!0,children:[(0,o.Y)(y.S,{className:"icon",css:V.root,children:e.icon}),(0,o.Y)(O.e,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,o.Y)(y.S,{css:W.description,style:{color:e.active?p.LU.foregroundDimmer:p.LU.foregroundDimmest},children:e.description}):null,(0,o.FD)(y.S,{css:W.right,row:!0,align:"center",children:[e.shortcut?(0,o.Y)(d._y,{keyCombo:e.shortcut,fontSize:Math.round(.85*n)}):null,e.hasChildren?(0,o.Y)(y.S,{css:W.chevron,children:(0,o.Y)(S.A,{size:12,style:{pointerEvents:"none"}})}):null]})]})}var V=(0,f.x)({root:[g.wp.position.relative,b.Ef,{width:b.eQ.iconSize,height:b.eQ.iconSize}]}),Z=(0,f.x)({borderHeaderWrap:[H,g.wp.flex.column,{userSelect:"none",paddingTop:p.LU.space4,paddingInline:b.eQ.inputBarPadding}],borderWrap:[H,g.wp.justify.center,{userSelect:"none",paddingInline:b.eQ.inputBarPadding}],headerWrap:[{userSelect:"none",paddingInline:b.eQ.inputBarPadding},H],header:[{userSelect:"none"},{paddingInline:b.eQ.inputBarPadding}],text:[{userSelect:"none"},g.wp.flex.shrink(1),g.wp.color.foregroundDimmest,g.wp.truncate,{fontSize:"0.9em"}],border:[g.wp.height(1),g.wp.width("100%")]}),j=(0,a.memo)(function(e){var n=(0,w.gM)(),t=(0,U.Z)(e.path,n),r=(0,o.Y)(P.ui,{elevated:!0,css:Z.border});if(0===t.length)return(0,o.Y)(y.S,{"data-index":e.index,css:Z.borderWrap,style:e.style,innerRef:e.innerRef,children:r});var i=(0,o.FD)(y.S,{css:Z.header,row:!0,align:"center",gap:4,children:[t.map(function(e,n){return(0,o.FD)(a.Fragment,{children:[n>0?(0,o.Y)(S.A,{color:p.LU.foregroundDimmest}):null,(0,o.Y)(y.S,{css:Z.text,children:e})]},e+n)}),e.tooltip?(0,o.Y)(L.m_,{tooltip:e.tooltip,placement:"right",children:(0,o.Y)(M.A,{size:12,color:p.LU.foregroundDimmest})}):null]});return e.border?(0,o.FD)(y.S,{justify:"start",gap:6,align:"stretch",css:Z.borderHeaderWrap,style:e.style,innerRef:e.innerRef,"data-index":e.index,children:[r,i]}):(0,o.Y)(y.S,{css:Z.headerWrap,style:e.style,innerRef:e.innerRef,"data-index":e.index,justify:"start",children:i})}),q={pill:[g.wp.position.absolute,g.wp.top("50%"),g.wp.right(4),{transform:"translateY(-50%)"}]};function K(e){var n=e.score;return(0,o.Y)(F.a,{text:"".concat(n),colorway:"red",css:q.pill})}var $=t(46998),J=(0,f.x)({root:[g.wp.overflow("hidden"),{paddingTop:b.eQ.menuPaddingTop}],scrollParent:[g.wp.height("100%"),g.wp.overflowY("auto"),g.wp.flex.growAndShrink(1)]}),Q=(0,a.memo)(function(e){var n,t=(0,w.b)(),r=t.rows,l=t.isOpen,s=t.scrollRef,c=t.currentPathIndex,u=t.ariaAttrs,d=(0,N.ob)(w.Uo),f=(0,N.h)(w.tL),h=(0,w.mg)(),m=(0,I.Te)({count:r.length,overscan:null!=(n=e.overscan)?n:1,paddingEnd:4,getScrollElement:function(){return s.current},getItemKey:function(e){var n=r[e];return n?"section"===n.type?n.key:(0,$.p)(n.item.path):""},estimateSize:function(n){var t=r[n];return t?function(e){var n,t=e.row,r=e.currentPathIndex,i=e.compact,o=e.isFirst,a=e.minItemHeight;if("section"===t.type){var l=i?16:20,s=(0,U.Z)(t.path,r).length>0;return o?s?l:0:t.unlabeled?i?6:8:13+l}var c=t.item.match.render;return c&&"content"in c?Math.max(null!=(n=c.height)?n:a,a):a}({row:t,currentPathIndex:c,compact:f,isFirst:0===n,minItemHeight:e.minItemHeight}):0},onChange:function(e){d(e.getTotalSize())}}),g=m.scrollToIndex,v=m.getVirtualItems,b={borderRadius:e.hasFooter?void 0:p.LU.space8,display:l?void 0:"none"},S=(0,w.Je)();return(0,a.useEffect)(function(){var e,n=S;if(!(n<0)){if(1===n&&(null==(e=v()[0])?void 0:e.size))n=0;else if(!v()[n])return;var t=setTimeout(function(){g(n)});return function(){clearTimeout(t)}}},[g,v,S]),(0,o.Y)(y.S,(0,R._)((0,i._)({css:J.root,grow:!0,shrink:!0},u),{style:b,children:(0,o.Y)(y.S,{innerRef:s,css:J.scrollParent,children:(0,o.Y)(y.S,{style:{height:"".concat(m.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:l?m.getVirtualItems().map(function(e){return(0,o.Y)(z,{index:e.index,y:e.start,height:e.size,ref:h?m.measureElement:void 0},e.key.toString())}):null})})}))}),X=(0,f.x)({root:[g.wp.width("100%"),g.wp.height("100%"),g.wp.flex.row,g.wp.justify.center,g.wp.borderRadius(4),{containerName:E.yN,containerType:b.eQ.containerType}],content:[g.wp.maxWidth("calc(".concat(E.aF,"px - ").concat(p.LU.space16,")")),{fontSize:b.eQ.fontSize}],footer:{paddingTop:p.LU.space8},keyComboBlocks:{paddingRight:p.LU.space8},running:[g.wp.center,g.wp.flex.growAndShrink(1)],error:{padding:p.LU.space8}}),ee=(0,f.x)({root:[g.wp.viewStyle,g.wp.flex.growAndShrink(1),g.wp.height("100%"),g.wp.py(0),g.wp.px(8),{color:p.LU.foregroundDefault,fontSize:b.eQ.fontSize,backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:p.LU.foregroundDimmest},"&:hover::placeholder":{color:p.LU.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:p.LU.foregroundDimmest}}]}),en=(0,a.memo)(function(e){var n=(0,w.Ge)();return(0,o.Y)("input",(0,i._)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:ee.root,placeholder:n.placeholder,value:n.value,onChange:n.onChange,ref:n.ref,onBlur:n.onBlur,disabled:n.disabled,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off"},n.ariaAttrs))}),et=[h.b.filled,g.wp.viewStyle,g.wp.flex.row,g.wp.align.center,g.wp.flex.growAndShrink(1),{height:b.eQ.inputBarHeight,borderRadius:4}],er=(0,f.x)({container:[{paddingTop:b.eQ.inputBarPadding,paddingInline:b.eQ.inputBarPadding,"& > div > button + input":{paddingLeft:0}}],surface:[et,{":after":{display:"none"}}],surfaceRunning:[et,m.S.foregroundPulse()]});function ei(e){var n=(0,w.d9)(),t=(0,w.f6)(),i=(0,N.ob)(w.wm),l=(0,s.A)(function(e){return i(e.height)}),c=(0,a.useRef)(null);return(0,u.d)(c,t,function(e){var n;return n={},(0,r._)(n,b.O3.borderBottomRightRadius,e?p.LU.space8:"0"),(0,r._)(n,b.O3.borderBottomLeftRadius,e?p.LU.space8:"0"),n}),(0,o.Y)(o.FK,{children:(0,o.Y)(y.S,{css:er.container,innerRef:l,style:{},children:(0,o.Y)(y.S,{innerRef:c,css:n?er.surfaceRunning:er.surface,children:e.children})})})}var eo=(0,a.memo)(function(e){var n=(0,w.J4)(),t=(0,w.oh)();return n?(0,o.Y)(D,{onClick:e.onClick,isLoading:t}):null}),ea=(0,a.memo)(function(){var e,n,t,i,u=(0,w.MO)(),f=u.isOpen,h=u.focus,m=u.clearCommands,S=u.isClearable,Y=u.onKeyDown,A=u.inputValue,C=u.noResults,x=u.hasHighlightedItem,D=u.isRunning,E=u.actionError,R=(0,l.A)({inputValue:A,noResults:C,hasHighlightedItem:x});e=(0,N.Ou)(w.Ai),n=(0,N.h)(w.wm),t=(0,N.AI)(w.PI),(0,a.useEffect)(function(){var r=function(n){var t=e().onTotalHeightChange;t&&(0===i&&(i=n),t({initial:i,current:n}))};if(0!==n){var i=0;return r(t.current),t.subscribe(r)}},[n,e,t]);var I=(0,N.h)(w.Tu),T=(0,N.h)(w.Hi),F=(0,N.h)(w.$6),P=(0,N.h)(w.nW),L=(0,N.h)(w.RY),U=(0,N.h)(w.yr),O=(0,N.Ou)(w.Ai),M=(0,c.A)(function(){return function(e){var n,t=R.current,r=O();if(null==(n=r.onKeyDown)||n.call(r,e,{inputValue:t.inputValue,noResults:t.noResults,hasHighlightedItem:t.hasHighlightedItem}),!e.defaultPrevented){if("Enter"===e.key&&t.inputValue&&t.noResults&&r.onSubmit)return void r.onSubmit(t.inputValue);Y(e)}}},[R,Y,O]);(0,a.useEffect)(function(){L&&(L.current=h)},[h,L]);var H=(0,w._f)(),B=(0,N.ob)(w.Uz),z=(0,s.A)(function(e){return B(e.height)}),W=(0,N.h)(w.KO),G=(0,N.h)(w.tL),V=(0,N.h)(w.b7);return(0,o.Y)(y.S,{css:X.root,grow:!0,shrink:!0,style:(i={},(0,r._)(i,b.O3.fontSize,W+"px"),(0,r._)(i,b.O3.iconSize,G?"12px":"16px"),(0,r._)(i,b.O3.inputBarHeight,G?"28px":"32px"),(0,r._)(i,b.O3.inputBarPadding,G?p.LU.space4:p.LU.space8),(0,r._)(i,b.O3.menuPaddingTop,G?p.LU.space4:p.LU.space8),(0,r._)(i,b.O3.containerType,G?"normal":"inline-size"),i),children:(0,o.FD)(y.S,{css:X.content,grow:!0,shrink:!0,style:V?{maxWidth:"100%"}:void 0,children:[(0,o.Y)("label",{id:H.label,htmlFor:H.input,css:g.wp.visuallyHidden,children:"Commands"}),(0,o.FD)(ei,{children:[(0,o.Y)(_,{}),(0,o.Y)(en,{autoFocus:I,onKeyDown:M}),(0,o.Y)(eo,{onClick:function(){return m({focus:!0})}}),T&&!S?(0,o.Y)(y.S,{css:X.keyComboBlocks,children:(0,o.Y)(d._y,{keyCombo:T,fontSize:.85*W})}):null]}),E?(0,o.Y)(y.S,{css:X.error,children:(0,o.Y)(v.N,{colorway:"warning",text:E})}):null,f&&!D?(0,o.FD)(o.FK,{children:[(0,o.Y)(Q,{minItemHeight:U,overscan:F,hasFooter:!!P}),P?(0,o.Y)(y.S,{innerRef:z,css:X.footer,children:P}):null]}):null,D?(0,o.Y)(y.S,{css:X.running,children:(0,o.Y)(k.A,{size:24})}):null]})})});function el(e){var n=(0,w.PY)(e);return(0,o.Y)(N.Pd.Provider,{value:n,children:(0,o.Y)(ea,{})})}},19807:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(83846),i=t(81073),o=t(79166),a=t(18509),l=t(15311),s=t(27023),c=t(4616),u=t(85389),d=t(95793),p=t(63456),f=(0,l.v)(["maxWidth"]),h=f.cssVars,m=f.styleTokens,g=(0,a.x)({container:[s.wp.width("100%"),s.wp.minHeight("100%"),s.wp.center],centeredContent:[s.wp.width("100%"),s.wp.maxWidth(m.maxWidth),s.wp.colWithGap(16),s.wp.p(16),s.wp.center],imageWithHeader:[s.wp.center,s.wp.flex.shrink(1),s.wp.textAlign.center],bodyText:[s.wp.textAlign.center,s.wp.color.foregroundDimmest]});function v(e){var n=e.pane,t=e.asciiArt,a=e.headerText,l=e.bodyText,s=e.body,f=e.action,m=e.icon,v=e.loading,y=e.maxWidth,w=e.innerRef,b=(0,o.Vv)(),S=b.getDescription(n),Y=(0,i.Y)(b.Icon,{pane:n,size:48}),_=null!=s?s:S;void 0!==v&&v?_=(0,i.FD)(u.S,{gap:4,align:"center",row:!0,children:[(0,i.Y)(p.A,{size:16}),(0,i.Y)(c.EY,{css:g.bodyText,children:"Loading…"})]}):void 0!==l&&(_=(0,i.Y)(u.S,{children:(0,i.Y)(c.EY,{css:g.bodyText,multiline:!0,children:l})}));var A=Y;return void 0!==m?A=m:void 0!==t&&(A=(0,i.Y)(d.A,{art:t})),(0,i.Y)(u.S,{css:g.container,style:(0,r._)({},h.maxWidth,"".concat(void 0===y?600:y,"px")),innerRef:w,children:(0,i.FD)(u.S,{css:g.centeredContent,children:[(0,i.FD)(u.S,{css:g.imageWithHeader,gap:16,children:[A,(0,i.Y)(c.Y9,{level:1,variant:"subheadBig",multiline:!0,children:null!=a?a:S})]}),_,f]})})}},19875:e=>{e.exports={loading:"SegmentedMeasureBar_loading__vZXB1","background-pulse":"SegmentedMeasureBar_background-pulse__WskGa"}},20203:(e,n,t)=>{"use strict";t.d(n,{qA:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.I(c,n)}},20775:(e,n,t)=>{"use strict";t.d(n,{L:()=>h});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment AssistantAuthorizations on OrgAuthorizations {\n    basicAssistant: useAiAssistant(mode: basic) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n    advancedAssistant: useAiAssistant(mode: advanced) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  query GetAssistantReplAuthorizations($orgId: String) {\n    currentUser {\n      id\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...AssistantAuthorizations\n        }\n        ... on Error {\n          message\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ... on OrgAuthorizations {\n              ...AssistantAuthorizations\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u),p=t(86891),f=t(55100);function h(){var e,n,t,i,o=(0,f.A)(),l=(0,p.R)(o),s=l.orgId,u=l.loading,h=l.hasError,m=(e={variables:{orgId:s}},n=(0,r._)({},c,e),a.I(d,n)),g=m.data,v=m.loading,y=m.error,w=m.refetch;return u||h||v||y?{refetch:w,loading:u||v}:void 0===s?{authorizations:(null==g||null==(i=g.currentUser)?void 0:i.personalOrgAuthorizations.__typename)==="OrgAuthorizations"?g.currentUser.personalOrgAuthorizations:void 0,refetch:w,loading:!1}:{authorizations:(null==g||null==(t=g.currentUser)?void 0:t.org.__typename)==="Org"?g.currentUser.org.authorizations:void 0,refetch:w,loading:!1}}},21472:e=>{e.exports={taskItem:"TaskList_taskItem__K9yCZ"}},21963:(e,n,t)=>{"use strict";t.d(n,{L:()=>_});var r=t(17844),i=t(93629),o=t(17459),a=t(12694),l=t(81073),s=t(21462),c=t(70368),u=t(70237),d=t(18509),p=t(27023),f=t(95487),h=t(83070),m=t(40259),g=t(41358),v=t(28908),y=t(87064),w=t(63456),b=t(47820),S=(0,d.x)({field:[p.wp.display.grid,{gridTemplateAreas:'\n      "label label"\n      "input icon-right"\n      "description description"\n      ',gridTemplateColumns:"1fr 32px"}]}),Y=(0,s.forwardRef)(function(e,n){var t=e.dataCy,a=e.children,s=(0,o._)(e,["dataCy","children"]),u=(0,r._)({"data-cy":t,ref:n},s);return(0,l.Y)(c.L,(0,i._)((0,r._)({},u),{children:a}))});function _(e){var n=e.label,t=e.description,c=e.errorMessage,d=e.isLoading,p=(0,o._)(e,["label","description","errorMessage","isLoading"]),_=(0,a._)((0,s.useState)(!1),2),A=_[0],C=_[1],k=(0,s.useRef)(null);return(0,s.useEffect)(function(){var e=k.current;if(e){var n=function(){C(!0)};e.addEventListener("mouseenter",n);var t=function(){C(!1)};return e.addEventListener("mouseleave",t),function(){e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",t)}}},[k]),(0,l.Y)(Y,(0,i._)((0,r._)({},p),{css:S.field,children:function(e){var r=e.isEmpty;return(0,l.FD)(l.FK,{children:[(0,l.Y)(u.J,{style:{gridArea:"label"},children:n}),(0,l.Y)(m.pd,{"aria-busy":d,style:{gridArea:"input /input / icon-right / icon-right",paddingRight:32}}),(0,l.Y)(g.ui,{elevated:!0,style:{gridArea:"icon-right",alignSelf:"center",justifySelf:"center"},innerRef:k,children:r?(0,l.Y)(l.FK,{children:d?(0,l.Y)(w.A,{}):(0,l.Y)(b.A,{})}):(0,l.Y)(h.K0,{alt:"Clear field",children:A?(0,l.Y)(y.A,{}):d?(0,l.Y)(w.A,{}):(0,l.Y)(y.A,{})})}),t?(0,l.Y)(v.A3,{style:{gridArea:"description"},children:t}):null,(0,l.Y)(f.bg,{children:c})]})}}))}},21996:(e,n,t)=>{"use strict";t.d(n,{DH:()=>g,GK:()=>y,N_:()=>m,aP:()=>d,pX:()=>u,s7:()=>v,sC:()=>p});var r=t(17844),i=t(93629),o=t(21462),a=t(76957),l=t(79203),s=t(26072),c=t(27741),u=(0,s.F)(function(){return null}),d=(0,s.F)(function(){return null});function p(e){var n=d.current();(0,o.useEffect)(function(){e!==n&&d.set(function(){return e})},[e,n])}var f=(0,a.eU)(null),h=(0,a.eU)(null,function(e,n,t){var o,a,l=e(f),s=l?(0,r._)({},l,t):(0,r._)({},t),c=null==s?void 0:s.changes,d=null==s?void 0:s.filePath;if(!d||!c)throw Error('"filePath", "changes", "users" required when initializing history state');var p=(a=(o=(0,i._)((0,r._)({},s),{changes:c,filePath:d})).changes.length,(0,r._)({users:{},count:a,version:Math.max(0,a-1),playing:!1,comparing:!1},o));u.set(function(){return p});var h=p.changes.length;if(0===h)return void n(f,p);(null==l?void 0:l.changes)&&p.changes!==l.changes&&(p.count=h,p.version=Math.min(p.version,h-1),p.playing=!1,p.comparing=!1),p.version===h-1&&(p.playing=!1),n(f,p)});function m(){return(0,l.md)(f,{store:w()})}function g(){return(0,l.Xr)(h,{store:w()})}function v(){return(0,l.Xr)((0,c.A)(function(){return(0,a.eU)(null,function(e,n){n(f,null)})},[]),{store:w()})}var y=(0,o.createContext)(null);function w(){var e=(0,o.useContext)(y);if(!e)throw Error("Expected store in context");return e}},22074:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(22531),i=t(29760);function o(e,n,t){t&&i.A(e,n),n&&(void 0===n?"undefined":(0,r._)(n))==="object"?(n.skipOverflowHiddenElements=!0,i.A(e,n)):i.A(e,{skipOverflowHiddenElements:!0})}},22091:(e,n,t)=>{"use strict";t.d(n,{B:()=>nu,a:()=>np});var r=t(29935),i=t(82643),o=t(81073),a=t(21462),l=t(684),s=t(37299),c=t(67917),u=t(17089),d=t(82112),p=t(71424),f=t(59255),h=t(32900),m=t(60690),g=t(79166),v=t(55515),y=t(12694),w=t(51744),b=t(35812),S=t(31092),Y=t(51623),_=t(28046),A=t(13528),C=t(81740),k=t(27231),x=t(68641),D=t(18509),E=t(11769),R=t(30124),I=t(83070),T=t(4616),F=t(85389),P=t(67382),L=t(51055),U=(0,D.x)({emptyStateWrapper:[{lineHeight:"32px"}]});function N(e){var n,t=e.openPane,r=(0,C.g3)(),i=(0,C.oh)(),a=!!(null==r?void 0:r.workflowId),l=function(){if(null==r?void 0:r.run){r.run(k.QG.RUN_BUTTON_CLICKED),(0,u.u4)(u.AZ.WORKFLOW_RAN,{source:"console"});return}};return i?(0,o.Y)(F.S,{css:U.emptyStateWrapper,p:8,children:"The system is starting up…"}):(0,o.FD)(F.S,{p:8,gap:8,children:[(0,o.Y)(T.EY,{children:"Results of your code will appear here when you run"}),(0,o.Y)(R.a,{}),(0,o.FD)(F.S,{pt:4,pb:8,gap:6,align:"start",children:[(0,o.Y)(T.EY,{variant:"small",color:"dimmer",children:"Default"}),(0,o.Y)(E.$n,{size:"small",text:null!=(n=null==r?void 0:r.workflowId)?n:k.Ov,iconLeft:(0,o.Y)(P.A,{}),colorway:"positive",onClick:function(){(0,u.u4)(u.AZ.RUN_BUTTON_CLICKED,{source:"emptyConsole",runner:a?"workflows":"pid1"}),l()}})]}),(0,o.Y)(R.a,{}),(0,o.FD)(F.S,{gap:6,children:[(0,o.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(T.EY,{variant:"small",color:"dimmer",children:"Workflows"}),(0,o.Y)(I.K0,{alt:"Configure",onClick:function(){t({type:"workflows"})},children:(0,o.Y)(L.A,{size:12})})]}),(0,o.Y)(x.O,{})]})]})}var O=t(46434),M=t(83846),H=t(17844),B=t(93629),z=t(53054),W=t(77359),G=t(91326),V=t(46011),Z=t(37872),j=t(80954),q=t(66485),K=t(7868),$=t(39159),J=t(47848),Q=t(90342),X=t(56965),ee=t(52949),en=t(41425),et=t(90930),er=t(39022),ei=t(84322),eo=t(50301),ea=t(66147),el=t(62688),es=t(75821),ec=t(24602),eu=t(27023),ed=(0,D.x)({terminalLoadingLine:[eu.wp.borderRadius(2),ec.S.foregroundPulse(),eu.wp.height(16),eu.wp.mb(4)]});function ep(e){var n=e.targetHeight,t=Math.min(Math.floor((n-8)/20),4),r=(0,a.useMemo)(function(){return Array.from({length:t}).map(function(e,n){return(0,o.Y)(F.S,{css:ed.terminalLoadingLine,style:{width:100*Math.random()+"%"}},n)})},[t]);return(0,o.Y)(F.S,{p:8,style:{height:n+"px"},children:(0,o.Y)(F.S,{style:{position:"sticky",top:es.RB+8},children:r})})}var ef=t(7814),eh=function(e){return e.EXPANDED="EXPANDED",e.COLLAPSED="COLLAPSED",e}({}),em=t(36937),eg=t(78626),ev=t(24140),ey=t(96075),ew=t(14792),eb=t(71872),eS=(0,D.x)({outputMetadataTooltip:[eu.wp.pl(4),eu.wp.pr(4)]});function eY(e){var n=e.isDone,t=e.hasError,r=e.errorMessage,i=e.finishedMessage,a=e.stopTask;return n?(0,o.Y)(eg.m_,{css:eS.outputMetadataTooltip,tooltip:t?"Error".concat(r?": ".concat(r):""):"Finished".concat(i?": ".concat(i):""),children:t?(0,o.Y)(eb.A,{}):(0,o.Y)(ev.A,{})}):void 0!==a?(0,o.Y)(I.K0,{alt:"Stop",onClick:a,children:(0,o.Y)(ew.A,{color:em.LU.accentPositiveDefault})}):(0,o.Y)(eg.m_,{tooltip:"Running...",children:(0,o.Y)(ey.A,{color:em.LU.accentPositiveDefault})})}var e_=t(64912),eA=t(43218),eC=t(37252),ek=t(47973),ex=t(52351);function eD(e){return(0,o.FD)(ex.Ay,(0,B._)((0,H._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.27 1.27 0 0 0 20.25 15v-4a.75.75 0 0 1 1.5 0v4A2.77 2.77 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5A2.75 2.75 0 0 1 5 2.25h8a.75.75 0 0 1 0 1.5H5Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M18.438 1.8c-.147-.4-.73-.4-.875 0l-1.005 2.744a.458.458 0 0 1-.298.278l-2.436.746a.446.446 0 0 0 0 .857l2.437.752a.458.458 0 0 1 .297.279l1.005 2.745c.146.399.728.399.875 0l1.004-2.745a.458.458 0 0 1 .297-.278l2.437-.75a.446.446 0 0 0 0-.857l-2.437-.749a.458.458 0 0 1-.297-.278L18.437 1.8Z",clipRule:"evenodd"})]}))}var eE=(0,D.x)({askAIButton:[eu.wp.display.flex,eu.wp.flex.row,eu.wp.align.center,eu.wp.m(0),{"@container (max-width: 120px)":[eu.wp.display.none]}],aiButtonWithoutPorts:[{"@container (max-width: 320px)":{padding:"0 4px","& > span":[eu.wp.display.none]}}],aiButtonWithPorts:[{"@container (max-width: 420px)":{padding:"0 4px","& > span":[eu.wp.display.none]}}],verticalDivider:[eu.wp.mx(6),{width:1,height:es.RB,background:em.LU.backgroundHigher}]}),eR=[eE.askAIButton,eE.aiButtonWithoutPorts],eI=[eE.askAIButton,eE.aiButtonWithPorts];function eT(e){var n=e.onClick,t=e.showingPorts;return(0,o.FD)(F.S,{css:t?eI:eR,children:[(0,o.Y)(T.EY,{color:"dimmer",children:(0,o.Y)(E.$n,{size:"small",variant:"underlinedOnHover",iconLeft:(0,o.Y)(eD,{}),text:"Ask ".concat(e_.BP),onClick:void 0===n?function(){}:n})}),(0,o.Y)(F.S,{css:eE.verticalDivider})]})}function eF(e){var n=e.onClick,t=e.showingPorts,r=(0,y._)((0,a.useState)(!1),2),i=r[0],l=r[1],s="Ask ".concat(e_.g$,"…");return(0,o.FD)(F.S,{css:t?eI:eR,children:[(0,o.FD)(eC.Wv,{isOpen:i,onOpenChange:l,label:s,placement:"bottom end",children:[(0,o.Y)(T.EY,{color:"dimmer",children:(0,o.Y)(E.$n,{size:"small",variant:"underlinedOnHover",iconLeft:(0,o.Y)(ek.A,{}),text:s,onClick:function(){return l(!0)}})}),(0,o.Y)(eA._,{onClick:n,prefix:"Ask"})]}),(0,o.Y)(F.S,{css:eE.verticalDivider})]})}var eP=t(64347);function eL(e){var n,t,r,i,l,s,c=e.startTime,u=e.endTime,d=(t=!u,i=(r=(0,y._)((0,a.useState)(function(){return Date.now()}),2))[0],l=r[1],(0,a.useEffect)(function(){if(t){var e=setInterval(function(){l(Date.now())},100);return function(){clearInterval(e)}}},[t]),i);c&&u?s=u-c:u||(s=d-c);var p=s?(0,o.Y)(eg.m_,{tooltip:"".concat(Math.round(s).toLocaleString(),"ms"),children:(n=s)<1e3?"".concat(Math.floor(n),"ms"):n<6e4?"".concat(Math.floor(n/1e3),"s"):"".concat(Math.floor(n/6e4),"m")}):null,f=(0,o.Y)(eP.Dc,{live:!0,date:c,textVariant:"small",textColor:"dimmer",textTransform:"first-letter-capitalized"});return(0,o.Y)(o.FK,{children:p?(0,o.FD)(o.FK,{children:[p,eU,f]}):f})}var eU="\xa0•\xa0",eN=t(15311),eO=t(1684),eM=t(17545),eH=t(3677),eB=t(15493),ez=(0,D.x)({button:[eu.wp.textAlign.left]});let eW=function(e){var n=e.onClick;return(0,eH.A)()?(0,o.Y)(eB.d,{text:"Missing required secrets. Click here to add them.",onClick:n,iconRight:(0,o.Y)(L.A,{}),colorway:"warning",css:ez.button}):null};var eG=t(27789),eV=t(54613),eZ=t(87971),ej=t(38524),eq=t(64254).hp,eK=(0,eN.v)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),e$=eK.cssVars,eJ=eK.styleTokens,eQ=(0,D.x)({outputBlockMetadataWrapper:[{containerType:"size"},eu.wp.pl(4),eu.wp.pr(8),eu.wp.rowWithGap(4),eu.wp.align.center,eu.wp.justify.spaceBetween,eu.wp.height(es.RB),eu.wp.backgroundColor.backgroundDefault,eu.wp.border({direction:"bottom",width:1,style:"solid",color:em.LU.backgroundHigher}),eu.wp.position.sticky,eu.wp.top(0),eu.wp.zIndex(1)],outputBlockMetadataWrapperLeft:[eu.wp.rowWithGap(4),eu.wp.align.center],outputBlockMetadataWrapperRight:[eu.wp.rowWithGap(4),eu.wp.align.center],taskNamePill:[eu.wp.maxWidth(100),eu.wp.flex.shrink(0),eu.wp.display.flex,{"> span":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@container (max-width: 120px)":[eu.wp.display.none],"&:hover":{maxWidth:"none","> span":{overflow:"visible",textOverflow:"clip"}}}],dateText:[eu.wp.flex.row,eu.wp.align.center,eu.wp.textAlign.right,eu.wp.flex.shrink(1),{marginLeft:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],dateContainer:[eu.wp.overflow("hidden"),eu.wp.width(120),eu.wp.flex.shrink(0),{"@container (max-width: 510px)":[eu.wp.display.none]}],outputBlockClosingBorder:[eu.wp.height(1),eu.wp.zIndex(1),eu.wp.border({direction:"bottom",width:1,style:"solid",color:em.LU.backgroundHigher}),{marginTop:-1}],outputBlockTerminalWrapper:[eu.wp.minHeight(eJ.blockMinHeight)],terminal:{gridRow:1,gridColumn:1,position:"sticky",top:X.eQ.topOffset,"& .xterm":[eu.wp.py(X.Ww),eu.wp.pl(X.Ww),eu.wp.height("100%"),eu.wp.overflow("hidden")],"& .xterm-viewport":[eu.wp.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},errorMessage:[{gridRow:1,gridColumn:1,position:"sticky",top:X.eQ.topOffset},eu.wp.py(X.Ww),eu.wp.pl(X.Ww),eu.wp.height("100%"),eu.wp.overflow("hidden")],searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:X.eQ.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4},avatarWrapper:[],outputMetadataTooltip:[eu.wp.pl(4),eu.wp.pr(4)],verticalDivider:[eu.wp.mx(6),{width:1,height:es.RB,background:em.LU.backgroundHigher}],portInfoDomain:[eu.wp.display.flex,eu.wp.flex.row,eu.wp.align.center,eu.wp.m(0),{"@container (max-width: 400px)":eu.wp.display.none}],portInfoText:[eu.wp.mr(0)],portInfoPorts:[eu.wp.display.flex,eu.wp.flex.row,eu.wp.align.center,eu.wp.m(0),{"@container (max-width: 320px)":eu.wp.display.none}],portTooltipHeader:[eu.wp.color.foregroundDimmer,eu.wp.fontWeight.normal,eu.wp.px(2),eu.wp.pb(2)],portTooltipColumnLeft:[eu.wp.textAlign.right],portTooltipColumnMiddle:[eu.wp.textAlign.center,eu.wp.px(4)]});function eX(e){var n=e.isDone,t=e.hasError,r=e.errorMessage,i=e.finishedMessage,a=e.stopTask;return n?(0,o.Y)(eg.m_,{css:eQ.outputMetadataTooltip,tooltip:t?"Error".concat(r?": ".concat(r):""):"Finished".concat(i?": ".concat(i):""),children:t?(0,o.Y)(eb.A,{}):(0,o.Y)(ev.A,{})}):void 0!==a?(0,o.Y)(I.K0,{alt:"Stop",onClick:a,children:(0,o.Y)(ew.A,{color:em.LU.accentPositiveDefault})}):(0,o.Y)(eg.m_,{tooltip:"Running...",children:(0,o.Y)(ey.A,{color:em.LU.accentPositiveDefault})})}function e0(e){var n=e.isCollapsed,t=e.setIsCollapsed,r=e.taskName,i=e.isDone,l=e.hasError,s=e.errorMessage,u=e.startTime,d=e.endTime,p=e.activeUsers,f=e.openPane,h=e.openedPorts,m=e.onAskAssistantClick,g=e.onAskAgentClick,v=e.stopTask,y="packager.installForAll"===r||"packager.installForLanguage"===r,w=(0,c.jt)(),b=h.length>0,S=(0,a.useCallback)(function(){f({type:"dependencies"})},[f]);return(0,o.FD)(F.S,{css:eQ.outputBlockMetadataWrapper,onDoubleClick:function(){return t(!n)},children:[y?(0,o.FD)(F.S,{css:eQ.outputBlockMetadataWrapperLeft,children:[(0,o.Y)(I.K0,{alt:"Open Packager",onClick:S,children:(0,o.Y)(ej.A,{})}),(0,o.Y)(eO.a,{color:"grey",text:"Packager",css:eQ.taskNamePill})]}):(0,o.FD)(F.S,{css:eQ.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,o.Y)(I.K0,{alt:n?"Expand":"Collapse",onClick:function(){return t(!n)},children:n?(0,o.Y)(eV.A,{}):(0,o.Y)(eG.A,{})}),(0,o.Y)(eO.a,{color:"grey",text:r,css:eQ.taskNamePill})]}),(0,o.FD)(F.S,{css:eQ.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[w?(0,o.Y)(eF,{showingPorts:b,onClick:g}):(0,o.Y)(eT,{showingPorts:b,onClick:m}),(0,o.Y)(e8,{openPane:f,openedPorts:h}),(0,o.FD)(F.S,{css:eQ.dateContainer,row:!0,justify:"space-between",children:[(0,o.Y)(T.EY,{color:"dimmer",variant:"small",css:eQ.dateText,children:(0,o.Y)(eL,{startTime:u,endTime:d})}),(0,o.Y)(F.S,{css:eQ.verticalDivider})]}),p.length>0?(0,o.Y)(F.S,{grow:0,shrink:0,row:!0,gap:4,align:"center",children:p.map(function(e){return(0,o.Y)(eM.A,{user:e,size:16},e.id)})}):null,(0,o.Y)(eX,{isDone:i,stopTask:v,hasError:l,errorMessage:s})]})]})}function e1(){}var e2={noScroll:!0};function e4(e){var n,t,l,s,c,u=e.taskIdx,d=e.runId,p=e.currentUserId,f=e.maxHeight,h=e.scrollParent,m=e.scrollPosition,g=e.openPane,v=e.openAssistantWithMessage,w=(0,X.Ui)({maxHeight:f,openPane:g}),b=w.visibleHeight,S=w.visibleLines,Y=w.bufferHeight,_=w.bufferLines,A=w.wrapperResizeRef,C=w.hasScrollback,k=w.xterm,x=w.xtermRef,D=(0,a.useMemo)(function(){return null==k?void 0:k._term},[k]),E=(0,a.useMemo)(function(){var e,n=null==D?void 0:D._core;return null!=(e=null==n?void 0:n._renderService.dimensions.css.cell)?e:{width:0,height:0}},[D]),R=(0,y._)((0,a.useState)(null),2),I=R[0],T=R[1],P=(0,y._)((0,a.useState)(!1),2),L=P[0],U=P[1],N=(0,a.useRef)(null);(0,a.useEffect)(function(){return function(){null!==N.current&&clearTimeout(N.current)}},[N]),(0,a.useEffect)(function(){if(D){if(m<1||!C)return void D.scrollToLine(0);var e=Y-b,n=_-S;if(e<1)return void D.scrollToLine(0);var t=Math.round(m/e*n);D.scrollToLine(t)}},[Y,_,C,m,D,b,S]);var M=(0,y._)((0,a.useState)(null),2),H=M[0],B=M[1];(0,$.b)((n=(0,r._)(function(e,n){var t,r,o,a,l,s,c,f,h,m,g;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(t=n.signal,!k||!I)return[2];o=(r=e.workflows.connectToTask.stream({runId:d,taskIdx:u,userId:p,processViewId:"outputs"},{signal:t})).reqWritable,a=r.resReadable,B({onInput:function(e){if(o.isWritable()){var n=new Uint8Array(eq.from(e));o.write({$kind:"stdin",stdin:n})}},onResizeTerminal:function(e){o.isWritable()&&o.write({$kind:"resize",size:e})},onFocus:function(){o.isWritable()&&o.write({$kind:"focused"})},onBlur:function(){o.isWritable()&&o.write({$kind:"blurred"})}}),o.write({$kind:"resize",size:k.getSize()}),l=!1,s=!1,i.label=1;case 1:i.trys.push([1,6,7,12]),f=(0,O._)(a),i.label=2;case 2:return[4,f.next()];case 3:if(!(l=!(h=i.sent()).done))return[3,5];if(!(m=h.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code||"CANCEL"===m.payload.code||"NO_MATCHING_TASK_STATE"===m.payload.code)return[3,5];if("TASK_ERROR"===m.payload.code)return Z.vF.info("[".concat(m.payload.code,"] ").concat(m.payload.message," in workflow outputs")),[3,4];throw Error("[".concat(m.payload.code,"] ").concat(m.payload.message))}"output"===m.payload.$kind&&I(m.payload.chunk),i.label=4;case 4:return l=!1,[3,2];case 5:return[3,12];case 6:return g=i.sent(),s=!0,c=g,[3,12];case 7:if(i.trys.push([7,,10,11]),!(l&&null!=f.return))return[3,9];return[4,f.return()];case 8:i.sent(),i.label=9;case 9:return[3,11];case 10:if(s)throw c;return[7];case 11:return[7];case 12:return B(null),o.close(),[2]}})}),function(e,t){return n.apply(this,arguments)}),[d,u,I,k,p]);var z=(0,a.useCallback)(function(e){return T(function(){return e}),function(){}},[]),G=(0,y._)((0,a.useState)(!1),2),V=G[0],j=G[1],K=(0,y._)((0,a.useState)(""),2),J=K[0],Q=K[1],en=(0,a.useCallback)(function(e){g({type:"searchReplace",data:{initialQuery:e}},!0)},[g]),ei=(0,ee.EF)().onContextMenu,eo=(0,et.P)({xterm:k,isWorkflowsTerminal:!0,openAssistantWithMessage:v,openShellSearch:function(e){j(!0),Q(e)},openSearchAndReplace:en});(0,el.Z)({xterm:k,onAskAssistant:function(e){v((0,W.kq)(e))}});var ea=(0,a.useCallback)(function(){if(D){var e=D.getSelectionPosition();e&&h(e.start.y*E.height-f/2)}},[D,f,h,E.height]);return(0,o.FD)(X._x,{xterm:k,wrapperResizeRef:A,bufferHeight:Y,setOnMessage:z,onInput:null!=(t=null==H?void 0:H.onInput)?t:e1,onResizeTerminal:null!=(l=null==H?void 0:H.onResizeTerminal)?l:e1,onFocus:null!=(s=null==H?void 0:H.onFocus)?s:e1,onBlur:null!=(c=null==H?void 0:H.onBlur)?c:e1,style:{pointerEvents:L?"none":"all"},onWheel:function(){U(!0),N.current&&clearTimeout(N.current),N.current=setTimeout(function(){U(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,q.T$)(e)&&(j(!0),e.preventDefault())},children:[V?(0,o.Y)(F.S,{css:eQ.searchWidget,children:(0,o.Y)(er.p,{searchValue:J,setSearchValue:Q,findPrevious:function(e){(null==k?void 0:k.findPrevious(e,e2))&&ea()},findNext:function(e){(null==k?void 0:k.findNext(e,e2))&&ea()},exit:function(){return j(!1)}})}):null,(0,o.Y)(X.DJ,{xtermRef:x,visibleHeight:b,maxHeight:f,css:eQ.terminal,onContextMenu:function(e){return ei(e,{command:eo})}})]})}function e5(e){var n,t=e.runId,r=e.taskIdx,i=e.task,l=e.config,s=e.isCollapsed,c=e.setIsCollapsed,u=e.openPane,p=e.openedPorts,f=e.onAskAssistantClick,h=e.onAskAgentClick,m="ERROR"===i.state||"FAILED"===i.state,g="ERROR"===i.state||"FAILED"===i.state?null==(n=i.result)?void 0:n.message:void 0,v="RUNNING"!==i.state,y=(0,eo.Q4)(),w=(0,a.useMemo)(function(){return i.userIds.map(function(e){return y.find(function(n){return n.id===e})}).filter(Boolean)},[i,y]),b="shell.exec"===l.task&&"args"in l?(0,k.ZM)(l.args):l.task,S=(0,d.I)(function(e){return function(){e.workflows.stopTask.rpc({runId:t,taskIdx:r,graceful:!0})}},[t,r]);return(0,o.Y)(e0,{isCollapsed:s,setIsCollapsed:c,taskName:b,isDone:v,hasError:m,errorMessage:g,startTime:i.startTime,endTime:v?i.endTime:void 0,activeUsers:w,openPane:u,openedPorts:p,stopTask:null!=S?S:void 0,onAskAssistantClick:f,onAskAgentClick:h})}function e3(e){var n,t,l,s,c,u,p,f,h,m,g,v,w,b,Y,_,A,C,k,x,D,E,R,I,T,P,L,U=e.task,N=e.taskIdx,G=e.runId,Z=e.config,q=e.maxHeight,K=e.rootRef,$=e.currentUser,J=e.ports,ee=e.openAssistantWithMessage,et=e.openAgentWithMessage,er=e.openPane,ei=e.onDoExposePort,eo=e.onDontExposePort,el=(0,a.useRef)(null),ec=(0,y._)((0,a.useState)(!0),2),eu=ec[0],ed=ec[1],em=(0,y._)((0,a.useState)(!1),2),eg=em[0],ev=em[1],ey=(0,y._)((0,a.useState)(0),2),ew=ey[0],eb=ey[1],eS=(0,ea.V)(),eY=(0,V.A)(eu,eg?6e4:500),e_=null!=(P=(null==(R=U.metadata)?void 0:R.task)==="shell.exec"&&U.metadata.isInRecoveryMode)&&P,eA=(0,Q.LO)(J,(null==(I=U.metadata)?void 0:I.task)==="shell.exec"?null==(T=U.metadata)?void 0:T.cgroupPath:void 0),eC=(0,y._)((0,a.useState)(eh.EXPANDED),2),ek=(t=(n={maxHeight:q,visualState:eC[0],onSetVisualState:eC[1]}).visualState,l=n.onSetVisualState,s=n.maxHeight,u=(c=(0,y._)((0,a.useState)("EXPANDED"===t?0:void 0),2))[0],p=c[1],f=(0,a.useRef)(null),m=(h=(0,y._)((0,a.useState)("EXPANDED"===t?"expanded":"collapsed"),2))[0],g=h[1],w=(v=(0,y._)((0,a.useState)("COLLAPSED"===t?0:void 0),2))[0],b=v[1],Y=(0,a.useCallback)(function(e){e&&p(e.getBoundingClientRect().height)},[]),_=(0,S.A)(function(e){var n=e.height;"expanded"===m&&p(n)},{type:"debounce",wait:200}),(0,a.useEffect)(function(){if(f.current)switch(m){case"start-collapsing":g("is-collapsing");break;case"is-collapsing":b(0);break;case"start-expanding":g("is-expanding");break;case"is-expanding":b(u);break;case"expanded":b(void 0)}},[m,u]),A="expanded"!==m&&"is-expanding"!==m,C=(0,a.useCallback)(function(e){l(e?"COLLAPSED":"EXPANDED")},[l]),k=(0,a.useRef)(t),(0,a.useEffect)(function(){"EXPANDED"===k.current&&"COLLAPSED"===t&&f.current&&(g("start-collapsing"),b(Math.min(f.current.getBoundingClientRect().height,s)),g("start-collapsing")),"COLLAPSED"===k.current&&"EXPANDED"===t&&g("start-expanding"),k.current=t},[s,t]),x=(0,a.useCallback)(function(){"is-collapsing"===m&&g("collapsed"),"is-expanding"===m&&g("expanded")},[m]),D=(0,a.useMemo)(function(){return{style:{height:w,transition:"height 120ms ease-out",overflow:"expanded"===m||"start-collapsing"===m?"visible":"hidden"},onTransitionEnd:x}},[w,m,x]),{collapsedStep:m,isCollapsed:A,setIsCollapsed:C,blockWrapperRef:f,blockWrapperProps:D,blockResizeRef:(0,ef.S)([_,Y],{breadcrumb:"client/workspace/components/Outputs/useAnimatedBlockCollapsing.tsx:173"}),measuredBlockHeight:u}),ex=ek.collapsedStep,eD=ek.isCollapsed,eE=ek.setIsCollapsed,eR=ek.blockWrapperRef,eI=ek.blockWrapperProps,eT=ek.blockResizeRef,eF=ek.measuredBlockHeight;(0,a.useEffect)(function(){if(K.current){var e,n=K.current,t=function(){var t,r;eb(Math.max(0,n.scrollTop-(null!=(r=null==(t=el.current)?void 0:t.offsetTop)?r:0))),ev(!0),e&&clearTimeout(e),e=setTimeout(function(){ev(!1)},500)};return n.addEventListener("scroll",t),function(){clearInterval(e),n.removeEventListener("scroll",t)}}},[K,el]),(0,a.useEffect)(function(){if(el.current&&K.current)return(0,j.l)(el.current,function(){return ed(!0),function(){ed(!1)}},{root:K.current,threshold:0})},[K,el]);var eP=(0,d.I)(function(e){return(0,r._)(function(){var n,t,r,o,a,l,s,c,u,d;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=e.workflows.readTaskBuffer.subscribe({runId:G,taskIdx:N}).resReadable,t=new Uint8Array([]),r=!1,o=!1,i.label=1;case 1:i.trys.push([1,6,7,12]),l=(0,O._)(n),i.label=2;case 2:return[4,l.next()];case 3:if(!(r=!(s=i.sent()).done))return[3,5];if(!(c=s.value).ok)throw Error(c.payload.code+": "+c.payload.message);if("output"===c.payload.$kind&&(t=eq.concat([t,c.payload.chunk])),"finished"===c.payload.$kind)return u=(0,z.A)(t.toString()),[2,(0,W.kq)(u)];i.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return d=i.sent(),o=!0,a=d,[3,12];case 7:if(i.trys.push([7,,10,11]),!(r&&null!=l.return))return[3,9];return[4,l.return()];case 8:i.sent(),i.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})})}),eL=(0,a.useCallback)((0,r._)(function(){var e;return(0,i.YH)(this,function(n){switch(n.label){case 0:if(null==eP)return[2];return[4,eP()];case 1:return(e=n.sent())&&ee(e),[2]}})}),[eP,ee]),eU=(0,a.useCallback)((E=(0,r._)(function(e){var n;return(0,i.YH)(this,function(t){switch(t.label){case 0:if(null==eP)return[2];return[4,eP()];case 1:return(n=t.sent())&&et(n,e),[2]}})}),function(e){return E.apply(this,arguments)}),[eP,et]),eN=(0,y._)((0,a.useState)(0),2),eO=eN[0],eM=eN[1],eH=(0,S.A)(function(e){var n=e.height;"expanded"===ex&&eM(n)},{type:"debounce",wait:200}),eB=(0,a.useCallback)(function(){er({type:"networking"})},[er]),ez=(0,a.useCallback)(function(e,n){er({type:"webview",data:{ports:{type:"local",path:e,port:n}}})},[er]),eG=(0,a.useCallback)(function(){er({type:"envEditor"})},[er]),eV="FINISHED"===U.state||"FAILED"===U.state,eZ=q-es.RB-eO,ej=!1;return"collapsed"===ex?ej=!1:(!eV||eY)&&(ej=!0),(0,o.FD)(F.S,{innerRef:el,children:[(0,o.Y)(e5,{runId:G,taskIdx:N,task:U,config:Z,isInRecoveryMode:e_,isCollapsed:eD,setIsCollapsed:eE,openPane:er,openedPorts:eA,onAskAssistantClick:eL,onAskAgentClick:eU}),(0,o.FD)(F.S,{innerRef:eH,style:{position:"sticky",top:es.RB},children:[(0,o.Y)(eW,{onClick:eG}),(0,o.Y)(en.yN,{configurations:eA.map(function(e){return e.configuration}),openWebview:function(){ez("/",eA[0].configuration.localPort)},openNetworkingTool:eB,onDontExposePort:function(){1===eA.length&&eo(eA[0].configuration.localPort)},onDoExposePort:function(){1===eA.length&&ei(eA[0].configuration.localPort)}})]}),(0,o.Y)("div",(0,B._)((0,H._)({ref:eR},eI),{children:(0,o.Y)(F.S,{css:eQ.outputBlockTerminalWrapper,style:(L={},(0,M._)(L,e$.blockMinHeight,eF+"px"),(0,M._)(L,e$.terminalBackgroundColor,null==eS?void 0:eS.background),(0,M._)(L,X.O3.topOffset,es.RB+eO+"px"),L),children:ej?(0,o.Y)(F.S,{innerRef:eT,children:(0,o.Y)(e4,{taskIdx:N,runId:G,maxHeight:eZ,currentUserId:$.id,scrollParent:function(e){var n,t,r,i=e+(null!=(r=null==(n=el.current)?void 0:n.offsetTop)?r:0);null==(t=K.current)||t.scrollTo({top:i})},scrollPosition:ew,openPane:er,openAssistantWithMessage:ee})}):(0,o.Y)(ep,{targetHeight:null!=eF?eF:0})})})),(0,o.Y)(F.S,{css:eQ.outputBlockClosingBorder})]})}function e7(e){var n,t,r=(0,a.useCallback)(function(){e.openPane({type:"dependencies"})},[e]),i=e.task.metadata;if(((null==i?void 0:i.task)==="packager.installForAll"||(null==i?void 0:i.task)==="packager.installForLanguage")&&(null==i?void 0:i.hasUserFacingOutput)===!0)return(0,o.Y)(e3,(0,H._)({},e));var l="ERROR"===e.task.state||"FAILED"===e.task.state,s="ERROR"===e.task.state||"FAILED"===e.task.state?null==(n=e.task.result)?void 0:n.message:void 0,c="FINISHED"===e.task.state?null==(t=e.task.result)?void 0:t.message:void 0,u="RUNNING"!==e.task.state;return(0,o.FD)(F.S,{children:[(0,o.FD)(F.S,{css:eQ.outputBlockMetadataWrapper,children:[(0,o.FD)(F.S,{css:eQ.outputBlockMetadataWrapperLeft,children:[(0,o.Y)(I.K0,{alt:"Open Packager",onClick:r,children:(0,o.Y)(ej.A,{})}),(0,o.Y)(eO.a,{color:"grey",text:"Packager",css:eQ.taskNamePill})]}),(0,o.FD)(F.S,{css:eQ.outputBlockMetadataWrapperRight,children:[(0,o.Y)(T.EY,{color:"dimmer",variant:"small",css:eQ.dateText,children:(0,o.Y)(eL,{startTime:e.task.startTime,endTime:"RUNNING"!==e.task.state?e.task.endTime:void 0})}),(0,o.Y)(F.S,{css:eQ.verticalDivider}),(0,o.Y)(eY,{isDone:u,hasError:l,errorMessage:s,finishedMessage:c})]})]}),(0,o.Y)(F.S,{css:eQ.outputBlockTerminalWrapper,children:(0,o.Y)(F.S,{css:eQ.errorMessage,style:{color:em.LU.accentNegativeStronger},children:s})})]})}function e6(e){var n=(0,ei.i)();if(!n)return null;var t=e.config.task;switch(t){case"shell.exec":return(0,o.Y)(e3,(0,B._)((0,H._)({},e),{currentUser:n}));case"packager.installForLanguage":case"packager.installForAll":return(0,o.Y)(e7,(0,B._)((0,H._)({},e),{currentUser:n}));case"workflow.run":return null;default:(0,G.A)(t)}}function e8(e){var n=e.openPane,t=e.openedPorts,r=void 0!==t&&t.length>0,i=r?"{...}.replit.dev":"",l=(0,a.useMemo)(function(){return r?1===t.length?":".concat(t[0].configuration.localPort):"".concat(t.length," ").concat((0,K.A)("port",t.length)):""},[r,t]),s=(0,a.useCallback)(function(){n({type:"webview",data:{ports:r?{type:"local",port:t[0].configuration.localPort}:void 0}},!0)},[r,n,t]),c=(0,a.useCallback)(function(){n({type:"networking"},!0)},[n]);return r?(0,o.FD)(o.FK,{children:[(0,o.FD)(F.S,{css:eQ.portInfoDomain,children:[(0,o.Y)(T.EY,{color:"dimmer",css:eQ.portInfoText,children:(0,o.Y)(eg.m_,{tooltip:"Open Preview",children:(0,o.Y)(E.$n,{size:"small",variant:"underlinedOnHover",text:i,onClick:s})})}),(0,o.Y)(F.S,{css:eQ.verticalDivider})]}),(0,o.FD)(F.S,{css:eQ.portInfoPorts,children:[(0,o.Y)(T.EY,{color:"dimmer",css:eQ.portInfoText,children:(0,o.Y)(eg.m_,{tooltip:(0,o.Y)(e9,{openedPorts:t}),children:(0,o.Y)(E.$n,{size:"small",variant:"underlinedOnHover",iconLeft:(0,o.Y)(eZ.A,{color:em.LU.accentPositiveStronger}),text:l,onClick:c})})}),(0,o.Y)(F.S,{css:eQ.verticalDivider})]})]}):null}function e9(e){var n=e.openedPorts;return(0,o.Y)(F.S,{children:(0,o.FD)("table",{children:[(0,o.FD)("tr",{children:[(0,o.Y)("th",{css:eQ.portTooltipHeader,children:"Internal"}),(0,o.Y)("th",{}),(0,o.Y)("th",{css:eQ.portTooltipHeader,children:"External"})]}),(0,o.Y)("tbody",{children:n.map(function(e){var n=e.configuration,t=!0,r=null;switch(n.type){case J.gH.FORWARDED:t=!0,r=":".concat(n.externalPort);break;case J.gH.INTERNAL_ONLY:t=!1,r=null;break;case J.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE:case J.gH.MISCONFIGURED:case J.gH.CONFIG_MISSING:t=!0,r=(0,o.Y)(eb.A,{})}return(0,o.FD)("tr",{children:[(0,o.FD)("td",{css:eQ.portTooltipColumnLeft,children:[":",n.localPort]}),(0,o.Y)("td",{css:eQ.portTooltipColumnMiddle,children:t?"→":null}),(0,o.Y)("td",{children:r})]},n.localPort)})})]})})}var ne=t(85051),nn=t(81650),nt=(0,eN.v)(["blockMinHeight","terminalBackgroundColor"]).styleTokens,nr=(0,D.x)({outputsListParent:[eu.wp.overflow("hidden"),eu.wp.borderRadius(0,0,8,8)],outputsListWrapper:[eu.wp.height("100%")],outputsList:[eu.wp.height("auto"),eu.wp.overflowY("scroll"),eu.wp.flex.growAndShrink(1)],outputsListSnapToBottom:{scrollSnapType:"y mandatory"},scrollSnap:[eu.wp.height(1),{marginTop:-1,pointerEvents:"none",scrollSnapAlign:"end"}],outputBlockCollapsingWrapper:[eu.wp.minHeight(nt.blockMinHeight)],outputBlockTerminalWrapper:[eu.wp.minHeight(nt.blockMinHeight),{backgroundColor:nt.terminalBackgroundColor}],outputBlockClosingBorder:[eu.wp.height(1),eu.wp.zIndex(1),eu.wp.border({direction:"bottom",width:1,style:"solid",color:em.LU.backgroundHigher}),{marginTop:-1}],workflowsListButton:[eu.wp.viewStyle,eu.wp.reset.button,eu.wp.p(2),eu.wp.height(22),eu.wp.rowWithGap(8),eu.wp.align.center,ne.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8}],workflowsListButtonText:[{fontSize:em.LU.fontSizeSmall}]});function ni(e){var n=e.openPane,t=e.ports,r=e.openAssistantWithMessage,i=e.openAgentWithMessage,l=e.onClear,s=e.onDontExposePort,c=e.onDoExposePort,u=(0,y._)((0,a.useState)(0),2),d=u[0],p=u[1],f=(0,y._)((0,a.useState)(!0),2),h=f[0],m=f[1],g=(0,a.useRef)(null),v=(0,_.Jw)(Y.C.id,Y.j.Output),A=(0,a.useRef)(0),k=(0,y._)((0,b.A)("show-only-latest-console-runs",!0),2),x=k[0],D=k[1],E=(0,C.IE)(),R=(0,S.A)(function(e){p(e.height)},{type:"throttle",wait:200}),I=(0,a.useMemo)(function(){var e=E.sort(function(e,n){return e.task.startTime-n.task.startTime}),n=e.filter(function(e){var n=e.task;return!x||n.state===w.Dr.RUNNING});return 0===n.length&&e.length>0?[e[e.length-1]]:n},[x,E]),T=(0,a.useMemo)(function(){return I.some(function(e){return e.task.state!==w.Dr.RUNNING})},[I]),P=0===I.length;return(0,o.Y)(F.S,{css:nr.outputsListParent,grow:!0,shrink:!0,innerRef:v,children:(0,o.FD)(F.S,{css:nr.outputsListWrapper,innerRef:R,children:[(0,o.Y)(na,{onClear:l,showOnlyLatest:x,setShowOnlyLatest:D,hasFinishedRuns:T,openPane:n}),P?(0,o.Y)(N,{openPane:n}):(0,o.FD)(F.S,{css:[nr.outputsList,h&&nr.outputsListSnapToBottom],innerRef:g,onScroll:function(){g.current&&(g.current.scrollTop<A.current?m(!1):m(g.current.scrollHeight-g.current.scrollTop-20<d),A.current=g.current.scrollTop)},children:[I.map(function(e){var a=e.task,l=e.taskIdx,u=e.runId,p=e.config;return(0,o.Y)(e6,{task:a,taskIdx:l,runId:u,config:p,maxHeight:d,rootRef:g,ports:t,openPane:n,openAssistantWithMessage:r,openAgentWithMessage:i,onDoExposePort:c,onDontExposePort:s},u+"-"+l)}),h?(0,o.Y)(F.S,{css:nr.scrollSnap}):null]})]})})}var no=(0,D.x)({header:[eu.wp.height(28),eu.wp.flex.row,eu.wp.align.center,eu.wp.justify.end,{borderBottom:"1px solid ".concat(em.LU.backgroundHigher),opacity:.8,":hover":{opacity:1}}],groupRight:[eu.wp.height("100%"),eu.wp.rowWithGap(4),eu.wp.px(2)]});function na(e){return(0,o.Y)(F.S,{css:no.header,align:"end",children:(0,o.FD)(F.S,{css:no.groupRight,align:"center",children:[(0,o.Y)(A.g,{text:"Show Only Latest",isSelected:e.showOnlyLatest,onChange:e.setShowOnlyLatest}),(0,o.Y)(A.k,{altText:"Clear Past Runs",buttonText:"Clear Past Runs",icon:(0,o.Y)(nn.A,{}),onClick:e.onClear,disabled:!e.hasFinishedRuns})]})})}var nl=t(28854),ns=t(36540),nc=l.ZU.Object({type:l.ZU.Literal("runnerOutput")}),nu={id:"outputs.clear",name:"Clear console history",default:void 0};function nd(e){var n,t,l,s,g,y,w,b,S=e.options,Y=(t=(n=(0,p.A)()).fs,l=n.ports,s=(0,d.I)(function(e){return function(){return e.workflows.clearHistory.rpc({})}},[]),g=(0,a.useCallback)(function(){null==s||s()},[s]),(0,v.Qt)(function(){return{commands:[{commands:[{match:f.G2,data:{type:"action",label:"Clear History",icon:(0,o.Y)(nn.A,{}),run:function(){return g()}}}]}]}},[g]),(0,m.SJ)(function(){return[nu.id,g]},[g]),y=(0,a.useCallback)(function(e){l.updateDotReplitPortsMapping(e,void 0)},[l]),{onClear:g,onDoExposePort:(0,a.useCallback)(function(e){l.tryExposingPortAutomatically(e)},[l]),onDontExposePort:y,ports:l,fs:t}),_=Y.ports,A=Y.onDontExposePort,C=Y.onDoExposePort,k=Y.onClear,x=S.performPaneOperation,D=(0,a.useCallback)(function(e){x({operation:"open",secondary:"ghostwriterChat"===e.type,pane:e})},[x]),E=(0,nl.H)({openPane:D}),R=(0,h.c)({openPane:D}),I=(0,c.dm)().assistantMode,T=(0,c.jt)(),F=(0,a.useCallback)((w=(0,r._)(function(e){return(0,i.YH)(this,function(n){return(0,u.u4)(u.AZ.ASSISTANT_USED,{action:"message_sent",assistant_mode:I,message_content:e,message_source:"console",is_agent_repl:T}),E(e),[2]})}),function(e){return w.apply(this,arguments)}),[T,I,E]),P=(0,a.useCallback)((b=(0,r._)(function(e,n){return(0,i.YH)(this,function(t){switch(t.label){case 0:return(0,u.u4)(u.AZ.AGENT_USED,{action:"message_sent",message_content:e,message_source:"console"}),[4,R(e,n)];case 1:return t.sent(),[2]}})}),function(e,n){return b.apply(this,arguments)}),[R]);return(0,o.Y)(ni,{ports:_,openPane:D,openAssistantWithMessage:F,openAgentWithMessage:P,onClear:k,onDontExposePort:A,onDoExposePort:C})}var np={Content:function(e){var n=e.options;return(0,o.Y)(nd,{options:n})},Icon:function(e){var n=e.size;return(0,o.Y)(ex.Vx.Provider,{value:{color:em.LU.yellowStrongest,size:n},children:(0,o.Y)(ns.A,{})})},getTitle:function(){return"Console"},description:"View the terminal output after running your code",category:g.bY.WorkspaceFeatures,decode:function(e){return s.T(nc,e)}}},22237:(e,n,t)=>{"use strict";t.d(n,{Ve:()=>r,aF:()=>i,yN:()=>o});var r="Tools",i=600,o="CommandBar"},22582:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M21.75 6A3.75 3.75 0 0 0 18 2.25H6A3.75 3.75 0 0 0 2.25 6v12A3.75 3.75 0 0 0 6 21.75h12A3.75 3.75 0 0 0 21.75 18V6ZM18 3.75A2.25 2.25 0 0 1 20.25 6v2.25H9.75v-4.5H18Zm-9.75 0v4.5h-4.5V6A2.25 2.25 0 0 1 6 3.75h2.25Zm-4.5 6h4.5v4.5h-4.5v-4.5Zm0 6h4.5v4.5H6A2.25 2.25 0 0 1 3.75 18v-2.25Zm6 4.5v-4.5h10.5V18A2.25 2.25 0 0 1 18 20.25H9.75Zm10.5-6H9.75v-4.5h10.5v4.5Z",clipRule:"evenodd"})}))}},22799:(e,n,t)=>{"use strict";t.d(n,{GK:()=>d,Jo:()=>u,UK:()=>p});var r=t(17844),i=t(93629),o=t(43886),a=t(55100),l=t(78671);function s(e){return(null==e?void 0:e.getNeonDatabases.__typename)==="GetNeonDatabasesResult"&&e.getNeonDatabases.databases.filter(l.I)||[]}function c(e){var n=e.fetchPolicy,t=e.skip,l=e.type,c=e.onDatabasesLoaded,u=(0,a.A)(),d=(0,o._j)((0,i._)((0,r._)({variables:{input:{replId:u}}},"cache-first"===(void 0===n?"cache-first":n)?{fetchPolicy:"cache-first"}:{fetchPolicy:"network-only",ssr:!0}),{skip:void 0===t?void 0:t,onCompleted:function(e){s(e).length>0&&(null==c||c())}})),p=d.data,f=d.loading,h=d.error,m=d.refetch;return{database:s(p).find(function(e){return e.type===l}),loading:f,error:h,refetch:m}}function u(e){return{refetch:c({fetchPolicy:"network-only",skip:!0,type:e}).refetch}}function d(e){return c({type:"development",onDatabasesLoaded:e})}function p(e){return c({type:"production",onDatabasesLoaded:e})}},22940:(e,n,t)=>{"use strict";t.d(n,{I:()=>a,u:()=>l});var r=t(76957),i=t(336),o=t(5932),a=(0,r.eU)(o.d.Loading);function l(){return(0,i.h)(a)}},23068:(e,n,t)=>{"use strict";t.d(n,{$E:()=>S,Dj:()=>j,FE:()=>B,HQ:()=>C,MJ:()=>J,MS:()=>V,Ni:()=>M,Sv:()=>Y,VZ:()=>W,Yu:()=>A,Zb:()=>K,en:()=>Q,ln:()=>R,xp:()=>N});var r=t(46434),i=t(29935),o=t(82643),a=t(21462),l=t(684),s=t(23099),c=t.n(s),u=t(35992),d=t(76957),p=t(69737),f=t(39159),h=t(63492),m=t(12127);function g(e,n){var t=100*n;return e.slice(0,_).filter(function(e){return e>=t}).length}function v(e){return g(e,Y)>=C?"danger":g(e,S)>=C?"warning":"ok"}function y(e){return Math.round(10*e)/10}function w(e){return Math.round((e+Number.EPSILON)*100)/100}function b(e){return e/1024/1024}var S=.9,Y=1,_=10,A=20,C=5,k=l.ZU.Union([l.ZU.Literal("ok"),l.ZU.Literal("warning"),l.ZU.Literal("danger")]);l.ZU.Object({cpu:l.ZU.Object({numVCpu:l.ZU.Number(),utilPercent:l.ZU.Number(),recentUtilPercents:l.ZU.Array(l.ZU.Number()),status:k,user:l.ZU.Object({utilPercent:l.ZU.Number(),recentUtilPercents:l.ZU.Array(l.ZU.Number())}),system:l.ZU.Object({utilPercent:l.ZU.Number(),recentUtilPercents:l.ZU.Array(l.ZU.Number())})}),memory:l.ZU.Object({softLimitBytes:l.ZU.Number(),hardLimitBytes:l.ZU.Number(),usageBytes:l.ZU.Number(),recentUtilPercents:l.ZU.Array(l.ZU.Number()),status:k,rss:l.ZU.Object({usageBytes:l.ZU.Number(),recentUtilPercents:l.ZU.Array(l.ZU.Number())}),cache:l.ZU.Object({usageBytes:l.ZU.Number(),recentUtilPercents:l.ZU.Array(l.ZU.Number())})}),storage:l.ZU.Object({usedBytes:l.ZU.Number(),totalBytes:l.ZU.Number(),scratchUsedBytes:l.ZU.Number(),scratchTotalBytes:l.ZU.Number(),nixUsedBytes:l.ZU.Number(),workspaceUsedBytes:l.ZU.Number()})});var x={cpu:{numVCpu:0,utilPercent:0,recentUtilPercents:Array(20).fill(0),status:"ok",user:{utilPercent:0,recentUtilPercents:Array(20).fill(0)},system:{utilPercent:0,recentUtilPercents:Array(20).fill(0)}},memory:{softLimitBytes:0,hardLimitBytes:0,usageBytes:0,recentUtilPercents:Array(20).fill(0),status:"ok",rss:{usageBytes:0,recentUtilPercents:Array(20).fill(0)},cache:{usageBytes:0,recentUtilPercents:Array(20).fill(0)}},storage:{usedBytes:0,totalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0,nixUsedBytes:0,workspaceUsedBytes:0}},D=(0,d.eU)(x),E=(0,d.eU)(!0);function R(){return(0,h.h)(E)}var I=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.min(n?Math.round(e):e,100)};function T(e,n){e.unshift(n),e.pop()}var F=(0,d.eU)(null,function(e,n,t){n(D,function(e){return(0,u.jM)(e,function(e){var n,r,i,o,a,l,s,c,u,d,p,f,h,m;s=e.cpu,c=e.memory,u=e.storage,s.numVCpu=t.numVCpu,s.utilPercent=I(t.cpuUtilizationPercent,!0),s.recentUtilPercents.unshift(s.utilPercent),s.status=v(s.recentUtilPercents),d=s.user,p=s.system,d.utilPercent=I(t.user.cpuUtilizationPercent),T(d.recentUtilPercents,d.utilPercent),p.utilPercent=I(t.system.cpuUtilizationPercent),T(p.recentUtilPercents,p.utilPercent),c.softLimitBytes=t.memorySoftLimitBytes,c.hardLimitBytes=t.memoryHardLimitBytes,c.usageBytes=t.memoryUsageRssBytes,f=c.usageBytes/c.softLimitBytes*100,T(c.recentUtilPercents,f),c.status=v(c.recentUtilPercents),h=c.rss,m=c.cache,h.usageBytes=t.memoryUsageRssBytes,T(h.recentUtilPercents,t.memoryUsageRssBytes/t.memorySoftLimitBytes*100),m.usageBytes=t.memoryUsageCacheBytes,T(m.recentUtilPercents,t.memoryUsageCacheBytes/t.memorySoftLimitBytes*100),u.usedBytes=(null==(n=t.storage)?void 0:n.diskUsedBytes)||0,u.totalBytes=(null==(r=t.storage)?void 0:r.diskLimitBytes)||0x40000000,u.scratchUsedBytes=(null==(i=t.storage)?void 0:i.scratchDiskUsedBytes)||0,u.scratchTotalBytes=(null==(o=t.storage)?void 0:o.scratchDiskLimitBytes)||0x40000000,u.nixUsedBytes=(null==(a=t.storage)?void 0:a.diskUsedNixBytes)||0,u.workspaceUsedBytes=(null==(l=t.storage)?void 0:l.diskUsedWorkspaceBytes)||0})})}),P=(0,p.mg)(D,function(e){return"ok"!==e.cpu.status?e.cpu.status:null}),L=(0,p.mg)(D,function(e){return"ok"!==e.memory.status?e.memory.status:null}),U=(0,d.eU)(function(e){var n=e(L);if(n)return{type:"ram_alert",status:n};var t=e(P);return t?{type:"cpu_alert",status:t}:null});function N(){return(0,h.AI)(U)}(0,d.eU)(function(e){for(var n=e(D),t=n.cpu,r=n.memory,i=0,o=["danger","warning"];i<o.length;i++){var a=o[i];if(t.status===a||r.status===a)return"danger"}return"ok"});var O=(0,p.mg)(D,function(e){var n=y((0,m.$p)(e.memory.softLimitBytes));return{numVCpu:y(e.cpu.numVCpu),ramTotalGB:n}},c());function M(){return(0,h.h)(O)}var H=(0,p.mg)(D,function(e){var n=e.cpu,t=n.status,r=n.recentUtilPercents,i=n.user,o=n.system,a=w(n.utilPercent),l=w(i.utilPercent),s=w(o.utilPercent);return{status:t,currentPercent:a,recentUtilPercents:r,currentUserPercent:l,recentUserUtilPercents:i.recentUtilPercents,currentSystemPercent:s,recentSystemUtilPercents:o.recentUtilPercents}},c());function B(){return(0,h.h)(H)}var z=(0,p.mg)(D,function(e){var n=e.memory,t=n.status,r=n.recentUtilPercents,i=n.cache,o=n.rss,a=n.softLimitBytes,l=n.usageBytes,s=b(a);return{status:t,currentPercent:Math.round(100*Math.min(1,Math.round(w(b(l)))/s)),currentRssInBytes:1024*Math.round(w(b(o.usageBytes)))*1024,currentCacheInBytes:1024*Math.round(w(b(i.usageBytes)))*1024,recentUtilPercents:r,recentRssUtilPercents:o.recentUtilPercents,recentCacheUtilPercents:i.recentUtilPercents}},c());function W(){return(0,h.h)(z)}var G=(0,p.mg)(D,function(e){var n=e.storage;return{replUsedInMib:b(n.usedBytes),scratchUsedInMib:b(n.scratchUsedBytes),nixUsedInMib:b(n.nixUsedBytes),workspaceUsedInMib:b(n.workspaceUsedBytes)}},c());function V(){return(0,h.h)(G)}var Z=(0,p.mg)(D,function(e){var n=e.cpu,t=e.memory;return{numVCpu:n.numVCpu,ramQuotaMiBs:b(t.softLimitBytes),cpuRecentUtilPercents:n.recentUtilPercents,ramRecentUtilPercents:t.recentUtilPercents}},c());function j(){return(0,h.h)(Z)}(0,p.mg)(D,function(e){return e.cpu.numVCpu}),(0,p.mg)(D,function(e){return b(e.memory.softLimitBytes)});var q=(0,p.mg)(D,function(e){return b(e.storage.totalBytes)});function K(){return(0,h.h)(q)}var $=(0,p.mg)(D,function(e){return b(e.storage.usedBytes)});function J(){return(0,h.h)($)}function Q(){var e,n=(0,h.ob)(E),t=(0,h.ob)(F),l=(0,a.useRef)(!0),s=(0,a.useCallback)(function(e){t(e),l.current?l.current=!1:n(!1)},[t,n]);(0,f.b)((e=(0,i._)(function(e,n){var t,i,a,l,c,u,d,p,f;return(0,o.YH)(this,function(o){switch(o.label){case 0:t=n.signal,i=e.resources.monitor.subscribe({},{signal:t}).resReadable,a=!1,l=!1,o.label=1;case 1:o.trys.push([1,6,7,12]),u=(0,r._)(i),o.label=2;case 2:return[4,u.next()];case 3:if(!(a=!(d=o.sent()).done))return[3,5];if(!(p=d.value).ok)return[2];s(p.payload),o.label=4;case 4:return a=!1,[3,2];case 5:return[3,12];case 6:return f=o.sent(),l=!0,c=f,[3,12];case 7:if(o.trys.push([7,,10,11]),!(a&&null!=u.return))return[3,9];return[4,u.return()];case 8:o.sent(),o.label=9;case 9:return[3,11];case 10:if(l)throw c;return[7];case 11:return[7];case 12:return[2]}})}),function(n,t){return e.apply(this,arguments)}),[s])}},23959:(e,n,t)=>{"use strict";t.d(n,{Cv:()=>T,xQ:()=>I});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(81073),s=t(21462),c=t(66890),u=t(67917),d=t(37981),p=t(30331),f=t(22940),h=t(5932),m=t(90755),g=t(76319),v=t(1982),y=t(70871),w=t(9527),b=t(71424),S=t(36937),Y=t(11769),_=t(85389),A=t(17767),C=t(8486),k=t(10327),x=[c.nHS.Building,c.nHS.Promoting,c.nHS.Running,c.nHS.Pending,c.nHS.Resuming,c.nHS.Suspending,c.nHS.UpdatingTier],D=function(e){var n=d.v[e];if(n)return"".concat(n.title,"...");switch(e){case c.nHS.Building:return"Building...";case c.nHS.Promoting:return"Promoting...";case c.nHS.Running:return"Bundling...";case c.nHS.Pending:return"Provisioning...";case c.nHS.Resuming:return"Resuming...";case c.nHS.Suspending:return"Pausing...";case c.nHS.UpdatingTier:return"Updating tier...";default:return"Deploying..."}},E=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1];return(0,s.useEffect)(function(){t("undefined"!=typeof navigator&&navigator.share&&"function"==typeof navigator.share)},[]),n},R=function(){var e=(0,r._)(function(e,n,t){return(0,a.YH)(this,function(r){switch(r.label){case 0:if(!(navigator.share&&"function"==typeof navigator.share))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.share({title:n,text:t,url:e})];case 2:return r.sent(),[2,!0];case 3:return r.sent(),[3,4];case 4:return(0,y.default)(e),[2,!1]}})});return function(n,t,r){return e.apply(this,arguments)}}(),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.openDeploymentsPane,t=e.includeSharing,i=void 0!==t&&t,d=!n,y=E(),Y=(0,p.i$)(),I=(0,p.Tp)({openDeploymentsPane:n}).redeployWithNoNewOptions,T=(0,p.cF)(),F=(0,p.tq)(),P=(0,f.u)(),L=(0,p.bu)(),U=(0,v.A)().showConfirm,N=(0,u.jt)(),O=(0,b.A)().container,M=(0,w.A)(O,{fallbackToReplCo:!0}).url,H=(0,g.f)({__typename:"HostingDeployment",id:Y||"",replitAppSubdomain:L||"",domains:[]}).href,B=!T||!Y||P!==h.d.Ready&&P!==h.d.Suspended&&P!==h.d.ProcessingLifecycleCommand,z=(0,s.useCallback)((0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:if(!Y)return n&&n(),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,I({hasAgentSession:N})];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}})}),[Y,n,I,N]),W=(0,s.useCallback)(function(){if(d&&(!Y||!T))return null;if(!Y)return d?null:{data:{type:"action",icon:(0,l.Y)(C.A,{color:S.LU.greenStrongest}),label:"Deploy",run:n}};if(!T&&F)return{data:{type:"action",icon:(0,l.FD)(_.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(m.$,{status:c.nHS.Building}),(0,l.Y)(C.A,{color:S.LU.foregroundDefault})]}),label:D(F.status),run:function(){}}};if(!T)return null;var e=!!F,t=x.includes(T.status),r=e&&F?{isDeploying:!0,buttonText:D(F.status)}:t?{isDeploying:!0,buttonText:D(T.status)}:B?{isDeploying:!0,buttonText:"Starting..."}:{isDeploying:!1,buttonText:"Redeploy"},i=r.isDeploying,o=r.buttonText;return{data:{type:"action",icon:d?(0,l.FD)(_.S,{row:!0,gap:4,align:"center",children:[T.status!==c.nHS.Success||i?(0,l.Y)(m.$,{status:i?c.nHS.Building:T.status}):null,(0,l.Y)(C.A,{size:24,color:T.status!==c.nHS.Success||i?S.LU.foregroundDefault:S.LU.greenStrongest})]}):(0,l.FD)(_.S,{row:!0,gap:4,align:"center",children:[T.status!==c.nHS.Success||i?(0,l.Y)(m.$,{status:i?c.nHS.Building:T.status}):null,(0,l.Y)(C.A,{color:i?S.LU.foregroundDefault:S.LU.greenStrongest})]}),label:o,run:i?function(){}:z}}},[d,Y,T,F,n,z,B]),G=(0,s.useCallback)(function(){if(!i)return[];var e=[];return M&&(!d||Y&&L)&&e.push({data:{type:"action",icon:(0,l.Y)(A.A,{color:S.LU.foregroundDefault}),label:y?"Share development link":"Copy development link",run:(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,R(M,"Check out my Replit development app!","I'm working on this app on Replit!")];case 1:return e.sent()||U("Development URL copied to clipboard"),[2]}})})}}),Y&&L&&e.push({data:{type:"action",icon:(0,l.Y)(k.A,{color:S.LU.foregroundDefault}),label:y?"Share published link":"Copy published link",run:(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,R(H,"Check out my Replit app!")];case 1:return e.sent()||U("Published URL copied to clipboard"),[2]}})})}}),e},[Y,L,U,d,M,H,i,y]),V=(0,s.useCallback)(function(){var e=G(),n=W();if(d){var t=[];return e.length>0&&t.push({name:"Sharing",commands:e}),n&&t.push({name:"Deployment",commands:[n]}),t}if(!Y||!L){var r=(0,o._)(e);return(n&&r.push(n),r.length>0)?[{name:"Development",commands:r}]:[]}var i=[];return e.length>0&&i.push({name:"Sharing",commands:e}),n&&i.push({name:"Deployment",commands:[n]}),i},[G,W,d,Y,L]);return{deploymentId:Y,currentBuild:T,inProgressBuild:F,handleDeployCommand:z,getDeploymentCommand:W,getShareCommands:G,getCommandGroups:V,hideRedeploy:B,mode:P}},T=function(e){var n=e.openDeploymentsPane,t=I({openDeploymentsPane:n}),r=t.deploymentId,i=t.currentBuild,o=t.inProgressBuild,a=t.handleDeployCommand,s=t.hideRedeploy;if(!r)return(0,l.Y)(Y.$n,{onClick:n,iconLeft:(0,l.Y)(C.A,{color:S.LU.greenStrongest}),text:"Deploy",size:"small"});if(!i&&o)return(0,l.Y)(Y.$n,{onClick:function(){},iconLeft:(0,l.Y)(C.A,{color:S.LU.foregroundDefault}),text:D(o.status),size:"small",disabled:!0});if(!i)return null;var c=!!o,u=x.includes(i.status),d=c&&o?{isDeploying:!0,buttonText:D(o.status)}:u?{isDeploying:!0,buttonText:D(i.status)}:s?{isDeploying:!0,buttonText:"Starting..."}:{isDeploying:!1,buttonText:"Redeploy"},p=d.isDeploying,f=d.buttonText;return(0,l.Y)(Y.$n,{onClick:a,iconLeft:(0,l.Y)(C.A,{color:S.LU.greenStrongest}),text:f,size:"small",disabled:p})}},24019:e=>{e.exports={userMessageMain:"UserMessage_userMessageMain__Rw6oV",userMessageSurface:"UserMessage_userMessageSurface__WiY1S",userMessageAttachments:"UserMessage_userMessageAttachments__M41Jd",avatar:"UserMessage_avatar__KiyW_"}},24247:(e,n,t)=>{"use strict";t.d(n,{D:()=>a});var r=t(684),i=t(37299),o=r.ZU.Object({type:r.ZU.Literal("config"),flow:r.ZU.Union([r.ZU.Literal("githubImport"),r.ZU.Literal("incompleteConfig")])}),a=function(e){return i.T(o,e)}},24413:e=>{e.exports={buttonGroup:"SendAgentMessageButtonGroup_buttonGroup__iSTWl",buttonGroupLeft:"SendAgentMessageButtonGroup_buttonGroupLeft__9k7Ea",buttonGroupDivider:"SendAgentMessageButtonGroup_buttonGroupDivider__s807N",buttonGroupRight:"SendAgentMessageButtonGroup_buttonGroupRight__MdvIK"}},24478:(e,n,t)=>{"use strict";t.d(n,{a:()=>w});var r=t(17844),i=t(12584),o=t(81073),a=t(21462),l=t(10500),s=t(67917),c=t(97841),u=t(66898),d=t(71424),p=t(19807),f=t(85389),h=t(63456),m=t(57693),g=t(45815),v=t.n(g);function y(){var e=(0,i._)(["\n    <style>\n      body {\n        pointer-events: none;\n        zoom: ",";\n      }\n    </style>\n  "]);return y=function(){return e},e}function w(e){var n=e.filePath,t=e.banner,i=e.zoomLevel,g=void 0===i?1:i,w=(0,a.useRef)(null),b=(0,s.AK)(n),S=(0,s.ZY)(n),Y=(0,d.A)(),_=Y.container,A=Y.ports,C=(0,u.Ik)({container:_,ports:A,addDevToolsSuffix:!1});return((0,a.useEffect)(function(){w.current&&b&&(w.current.srcdoc=function(e,n){if(!e.match(/<\/head>/i))return e;var t=(0,l.A)(y(),n.zoomLevel);return e.replace(/<\/head>/i,"".concat(t,"</head>"))}(b,{zoomLevel:g}))},[b,n,g]),S)?(0,o.Y)(p.A,{pane:{type:"webview"},headerText:"Preview unavailable",bodyText:"The plan generation was interrupted.",icon:(0,o.Y)(m.A,{size:48})}):b?(0,o.FD)(f.S,{grow:!0,children:[t,(0,o.Y)("iframe",(0,r._)({clsx:v().iframe,ref:w,title:"visual-preview",src:null==C?void 0:C.iframeSrc},c.q))]}):(0,o.Y)(p.A,{pane:{type:"webview"},headerText:"Loading preview…",bodyText:null,icon:(0,o.Y)(h.A,{size:48})})}},24689:(e,n,t)=>{"use strict";t.d(n,{A:()=>r,T:()=>i});var r=function(e){return e.INFO="info",e.LOW="low",e.MODERATE="moderate",e.HIGH="high",e.CRITICAL="critical",e}({});function i(e){var n=e.toLowerCase();switch(n){case"info":case"low":case"moderate":case"high":case"critical":return n;case"medium":return"moderate";default:throw Error("Unknown severity: ".concat(e))}}},24927:(e,n,t)=>{"use strict";t.d(n,{r:()=>l});var r=t(74302),i=t(17341),o=t(67917),a=t(73176);function l(){var e=(0,o.NC)(),n=(0,a.J2)(e.sessions.agent.current);return(0,a.Rj)(function(){var e;return null==n?void 0:n.reduce((e=n.created,{direction:"forward",state:{inRapidBuild:!1},map:function(e){return e.inRapidBuild},reducer:function(n,t){if((0,r.A)(e,i.qL))return t.inRapidBuild=!1,!1;if(t.inRapidBuild){if((0,i.TW)(n,"rapidBuildConcluded"))return t.inRapidBuild=!1,!1}else e>i.kt?(0,i.TW)(n,"rapidBuildStarted")&&(t.inRapidBuild=!0):(0,i.TW)(n,"agentPlanEventContents")&&!n.contents.contents.agentPlanEventContents.requiresApproval&&(t.inRapidBuild=!0)}}),"global")},[n])}},25012:e=>{e.exports={root:"PlanVisualPreview_root__26i9E",divider:"PlanVisualPreview_divider__nwHAQ",statusBanner:"PlanVisualPreview_statusBanner__eVJVk",modalContent:"PlanVisualPreview_modalContent__ix4MP",webviewContainer:"PlanVisualPreview_webviewContainer__mv5cW",emptyState:"PlanVisualPreview_emptyState__riT2r"}},25646:(e,n,t)=>{"use strict";t.d(n,{D:()=>o});var r=t(33090),i=function(e){if(1===e.length)return e[0].type===r.pt.File?"file":"folder";if(e.length>1){var n=e.filter(function(e){return e.type===r.pt.File}).length,t=e.filter(function(e){return e.type===r.pt.Directory}).length,i=n>1?"files":"file",o=t>1?"folders":"folder",a="file";return n>0&&t>0?a="".concat(i," and ").concat(o):n>0?a="".concat(i):t>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var n=i(e),t=1===e.length?n:"".concat(e.length," ").concat(n),r=e.slice(0,5).map(function(e){return e.path}).join(", ");return{name:t,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:t}}},25763:(e,n,t)=>{"use strict";t.d(n,{BI:()=>g,Vl:()=>p,Yc:()=>y,ou:()=>h});var r=t(17844),i=t(12584),o=t(41114),a=t(50175);function l(){var e=(0,i._)(["\n  fragment WorkspaceNeonDatabase on NeonDatabase {\n    id\n    type\n    databaseId\n    databaseName\n    projectId\n    connectionString\n    isFrozen\n    isEphemeral\n    scheduledFreezeTime\n    scheduledDeletionTime\n    quotaLogicalSizeBytes\n    minComputeUnits\n    maxComputeUnits\n    historyRetentionSeconds\n    timeCreated\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        database {\n          id\n          ...WorkspaceNeonDatabase\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(l()),f=(0,o.J1)(s(),p);function h(e){var n=(0,r._)({},d,e);return a.n(f,n)}var m=(0,o.J1)(c());function g(e){var n=(0,r._)({},d,e);return a.n(m,n)}var v=(0,o.J1)(u());function y(e){var n=(0,r._)({},d,e);return a.n(v,n)}},25827:(e,n,t)=>{"use strict";t.d(n,{K:()=>h,r:()=>m});var r=t(81073),i=t(36937),o=t(18509),a=t(24602),l=t(27023),s=t(40259),c=t(4616),u=t(78626),d=t(85389),p=t(48604),f=(0,o.x)({self:[l.wp.colWithGap(8)],selfGrow:[l.wp.colWithGap(8),l.wp.flex.grow(1)],label:[l.wp.maxWidth("100%")],labelText:[l.wp.flex.growAndShrink(1),{textOverflow:"ellipsis"}],labelTextWarning:[l.wp.flex.growAndShrink(1),l.wp.color.orangeStrongest,{textOverflow:"ellipsis"}],header:[l.wp.display.flex,l.wp.flex.row,l.wp.justify.spaceBetween,l.wp.align.center],labelLoading:[a.S.foregroundPulse(),l.wp.width(200),l.wp.borderRadius(8)],inputLoading:[a.S.foregroundPulse(),l.wp.borderRadius(8)]}),h=function(e){var n=e.id,t=e.title,o=e.information,a=e.optional,l=e.detail,s=e.warning,h=e.actions,m=e.children,g=e.grow;return(0,r.FD)(d.S,{css:void 0!==g&&g?f.selfGrow:f.self,children:[(0,r.FD)(d.S,{css:f.header,children:[(0,r.FD)(d.S,{tag:"label",htmlFor:n,css:f.label,row:!0,gap:8,align:"center",children:[(0,r.Y)(c.EY,{color:"dimmer",multiline:!1,children:t}),(0,r.Y)(u.m_,{tooltip:o,children:(0,r.Y)(p.A,{color:i.LU.foregroundDimmest})}),void 0!==a&&a?(0,r.Y)(c.EY,{css:f.labelText,variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null,l?(0,r.Y)(c.EY,{css:f.labelText,variant:"small",color:"dimmest",multiline:!1,children:l}):null,s?(0,r.Y)(c.EY,{css:f.labelTextWarning,variant:"small",multiline:!1,children:s}):null]}),h?(0,r.Y)(d.S,{row:!0,gap:4,children:h}):null]}),m]})},m=function(){return(0,r.FD)(d.S,{gap:8,children:[(0,r.Y)(d.S,{css:f.header,children:(0,r.Y)(d.S,{css:f.labelLoading,row:!0,gap:8,align:"center",children:(0,r.Y)(c.EY,{color:"dimmer",multiline:!1,children:"\xa0"})})}),(0,r.Y)(d.S,{css:f.inputLoading,children:(0,r.Y)(s.pd,{disabled:!0})})]})}},25963:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M6.25 5a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm8 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm-8 7a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm8 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm-8 7a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm8 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Z",clipRule:"evenodd"})}))}},26176:(e,n,t)=>{"use strict";t.d(n,{C:()=>w});var r=t(83846),i=t(12694),o=t(81073),a=t(21462),l=t(43218),s=t(36937),c=t(11769),u=t(30010),d=t(37252),p=t(85389),f=t(47973),h=t(27789),m=t(63456),g=t(24413),v=t.n(g),y=(0,s.CK)("SendAgentMessageButtonGroup.module.css",["--divider-color"]);function w(e){var n=e.className,t=e.onSendAgentMessage,g=e.loading,w=void 0!==g&&g,b=e.disabled,S=void 0!==b&&b,Y=e.buttonText,_=e.menuPrefix,A=e.colorway,C=void 0===A?"primary":A,k=(0,i._)((0,a.useState)(!1),2),x=k[0],D=k[1];return(0,o.FD)(p.S,{row:!0,clsx:[v().buttonGroup,v().cta,n],style:(0,r._)({},y.dividerColor,s.ky[C].dimmest),children:[(0,o.Y)(c.$n,{clsx:v().buttonGroupLeft,colorway:C,text:Y,iconLeft:w?(0,o.Y)(m.A,{}):(0,o.Y)(f.A,{}),loading:w,disabled:S,onClick:function(){return t({createNewSession:!0})}}),(0,o.Y)(u.a,{clsx:v().buttonGroupDivider}),(0,o.FD)(d.Wv,{isOpen:x,onOpenChange:D,label:"Message options",placement:"bottom end",children:[(0,o.Y)(c.$n,{clsx:v().buttonGroupRight,colorway:C,disabled:S,text:"",iconLeft:w?(0,o.Y)(m.A,{}):(0,o.Y)(h.A,{})}),(0,o.Y)(l._,{onClick:t,prefix:_})]})]})}},26805:(e,n,t)=>{"use strict";t.d(n,{d:()=>A,O:()=>C});var r,i=t(81073),o=t(21462),a=t(3136),l=t(11390),s=t(21762),c=t(29935),u=t(37743),d=t(82643),p=t(51367),f=t(37872),h=new(function(){function e(){(0,u._)(this,e)}var n=e.prototype;return n.export=function(e,n){var t=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s,c=a.value,u=c.spanContext(),d={name:c.name,service:"repl.it-web",trace_id:u.traceId,span_id:u.spanId,start:c.startTime,end:c.endTime,parent_id:c.parentSpanId,attributes:c.attributes};t.has(u.traceId)||t.set(u.traceId,[]),null==(s=t.get(u.traceId))||s.push(d)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var h=Array.from(t.values());if(0===h.length)return void n({code:p.V.SUCCESS});var m=(0,f.JM)();fetch("/datadog/traces",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"fetch"},body:JSON.stringify({repl:{id:null==m?void 0:m.id,rootOriginReplUrl:null==m?void 0:m.rootOriginReplUrl},traces:h})}).then(function(){n({code:p.V.SUCCESS})}).catch(function(e){f.vF.error("Failed to send traces to Datadog: ".concat(e.message)),n({code:p.V.FAILED,error:e.message})})},n.shutdown=function(){return(0,c._)(function(){return(0,d.YH)(this,function(e){return[2]})})()},n.forceFlush=function(){return(0,c._)(function(){return(0,d.YH)(this,function(e){return[2]})})()},e}()),m=t(62019),g=t(51175),v=t(86466),y=t(1833),w=t(43628),b=t(4071),S=t(48514),Y=function(e){function n(){var e;return(0,u._)(this,n),e=(0,m._)(this,n,arguments),e.spanSet=new Map,e}(0,y._)(n,e);var t=n.prototype;return t.startSpan=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w._.active(),i=(0,g._)((0,v._)(n.prototype),"startSpan",this).call(this,e,t,r);return this.spanSet.set(i.spanContext().spanId,i),i},t.pruneSpans=function(){this.spanSet.forEach(function(e){e.isRecording()&&e.setAttribute("pruned",!0)}),this.spanSet=new Map},n}(b.s),_=function(e){function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u._)(this,n),(e=(0,m._)(this,n,[t]))._wsTracers=new Map,e._wsConfig=t,e}(0,y._)(n,e);var t=n.prototype;return t.getTracer=function(e,n,t){var r="".concat(e,"@").concat(n||"",":").concat((null==t?void 0:t.schemaUrl)||"");return this._wsTracers.has(r)||this._wsTracers.set(r,new Y({name:e,version:n,schemaUrl:null==t?void 0:t.schemaUrl},this._wsConfig,this)),this._wsTracers.get(r)},t.pruneSpansForTracer=function(e,n,t){var r,i="".concat(e,"@").concat(n||"",":").concat((null==t?void 0:t.schemaUrl)||"");this._wsTracers.has(i)&&(null==(r=this._wsTracers.get(i))||r.pruneSpans())},n}(S.Z);function A(){var e=(0,s._P)({controlName:"flag-open-telemetry-tracing"});return(0,o.useEffect)(function(){e&&((r=new _).addSpanProcessor(new l.J(h)),r.register({propagator:new a.lm}))},[e]),(0,i.Y)(i.FK,{})}function C(e){r.pruneSpansForTracer(e)}},27077:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>m,By:()=>d,GM:()=>p});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(59369);function s(e){switch(e){case"A":return l.Os.ADDED;case"C":return l.Os.COPIED;case"D":return l.Os.DELETED;case"M":return l.Os.MODIFIED;case"R":return l.Os.RENAMED;case"T":return l.Os.TYPE_CHANGED;case"X":default:return l.Os.UNKNOWN;case"B":return l.Os.BROKEN}}var c=function(){var e=(0,r._)(function(e,n){var t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e("git log -1 --pretty=%P ".concat(n))];case 1:if((t=r.sent()).error)return[2,!1];return[2,t.output.trim().length>0]}})});return function(n,t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r._)(function(e,n){var t,r,i,o,s,c,u,d,p;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,e("git ls-tree --name-only -r ".concat(n),{serviceMethod:"git-get-files-for-commit"})];case 1:if((t=a.sent()).error)return[2,t];r=[],i=t.output.split("\n").filter(Boolean),o=!0,s=!1,c=void 0;try{for(u=i[Symbol.iterator]();!(o=(d=u.next()).done);o=!0)p=d.value,r.push({path:p,type:l.Os.ADDED})}catch(e){s=!0,c=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}return[2,{files:r,error:null}]}})});return function(n,t){return e.apply(this,arguments)}}();function d(e){return Array.from(e.matchAll(h)).map(function(e){var n=(0,i._)(e,4),t=n[1],r=n[2];return{path:n[3],originalPath:r,type:s(t)}})}function p(e){return Array.from(e.matchAll(f)).map(function(e){var n=(0,i._)(e,3),t=n[1];return{path:n[2],type:s(t)}})}var f=/([ADMUXBT])\0([^\0]+)/g,h=/([RC])\d*\0([^\0]+)\0([^\0]+)/g;function m(e,n){return g.apply(this,arguments)}function g(){return(g=(0,r._)(function(e,n){var t,r,i;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,c(e,n)];case 1:if(!a.sent())return[2,u(e,n)];return[4,e("git diff-tree --no-commit-id --name-status -z -r -C --find-copies-harder -M ".concat(n),{serviceMethod:"git-get-files-for-commit"})];case 2:if((t=a.sent()).error)return[2,t];return r=d(t.output),i=p(t.output),[2,{files:(0,o._)(r).concat((0,o._)(i)),error:null}]}})})).apply(this,arguments)}},27231:(e,n,t)=>{"use strict";t.d(n,{Ov:()=>a,QG:()=>f,QS:()=>u,Sb:()=>c,ZM:()=>s,ll:()=>p,pC:()=>d,y$:()=>l});var r=t(17844),i=t(86105),o=t(22531),a="Run App",l=function(e){return e.startsWith("Run ")?e.slice(4):e};function s(e){return e.replace(/\/nix\/store\/[^/]+\/bin\/([^\s]+)/,"$1")}function c(e){return["PARSE_ERROR","NOT_FOUND","READ_FILE"].includes(e)}function u(e){return(void 0===e?"undefined":(0,o._)(e))==="object"&&null!==e&&"code"in e&&"string"==typeof e.code&&c(e.code)&&(void 0===e.message||"string"==typeof e.message)&&(void 0===e.extras||"string"==typeof e.extras)}function d(e,n){for(var t=[],o=0;o<e.length;o++){var a=e[o];if("shell.exec"===a.task){if(n.length){var l=n.shift();l&&t.push((0,r._)({},a,l))}}else t.push(a)}return t.push.apply(t,(0,i._)(n)),t}var p=function(e){return e.OFFLINE="OFFLINE",e.IDLE="IDLE",e.BEFORE_RUN="BEFORE_RUN",e.RUNNING="RUNNING",e.STOPPING="STOPPING",e}({}),f=function(e){return e.AUTO_RUN="AUTO_RUN",e.AGENT_RUN="AGENT_RUN",e.RUN_BUTTON_CLICKED="RUN_BUTTON_CLICKED",e.KEYBOARD_SHORTCUT="KEYBOARD_SHORTCUT",e.GITHUB_IMPORT="GITHUB_IMPORT",e}({})},27301:(e,n,t)=>{"use strict";t.d(n,{B:()=>i,q:()=>r});var r={findOrCreateFile:3,searchFileContents:2,fork:.5,createNewRepl:.5,askAssistant:.5,codeSearch:.5,myRepls:.5,settings:.5},i={files:.98,settings:.9,toolDescription:.8,askAssistant:.5,codeSearch:.7,fileContentsSearch:.4}},28046:(e,n,t)=>{"use strict";t.d(n,{Jw:()=>u,Os:()=>s,mR:()=>f,qv:()=>p,rA:()=>d});var r=t(21462),i=t(76957),o=t(79203),a=t(98679),l=t(37069);function s(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(0,r.useContext)(l.O5),c=(0,r.useMemo)(function(){return(0,i.eU)(function(e){return!(e(l.cS)||e(l._))&&n===e(l.Nc)})},[n]),d=(0,o.Xr)(l.Hl,{store:s}),p=(0,o.Xr)(l.vs,{store:s}),f=u(e,n),h=(0,o.md)(c,{store:s}),m=(0,r.useRef)(h),g=(0,a.A)(t.onEnter),v=(0,a.A)(t.onExit);return(0,r.useEffect)(function(){if(h){var e;null==(e=g.current)||e.call(g)}},[h,g]),(0,r.useEffect)(function(){if(m.current&&!h){var e;null==(e=v.current)||e.call(v)}m.current=h},[h,v]),{isActive:h,tourRef:f,next:d,goto:p}}var c=function(){};function u(e,n){var t=(0,r.useContext)(l.O5),i=(0,o.Xr)(l.VQ,{store:t}),a=(0,r.useCallback)(function(t){i(e,n,t)},[e,i,n]);return t?a:c}function d(){var e=(0,r.useContext)(l.O5);if(!e)throw Error("useTourModal must be used within a TourRoot");var n=(0,o.md)(l.np,{store:e}),t=(0,o.Xr)(l.vs,{store:e}),i=(0,o.md)(l.$h,{store:e}),a=(0,o.md)(l.b5,{store:e}),s=(0,o.Xr)(l._,{store:e});return{activeStep:n,totalSteps:a,goto:t,currentStepIndex:i,done:(0,r.useCallback)(function(){return s(!0)},[s])}}function p(){var e=(0,r.useContext)(l.O5),n=(0,o.md)(l.uw,{store:e});return e&&n}function f(){var e=(0,r.useContext)(l.O5),n=(0,o.md)(l.MN,{store:e});return e?n:null}},28177:(e,n,t)=>{"use strict";t.d(n,{J4:()=>w,X5:()=>_,ZO:()=>S,cn:()=>Y,gv:()=>b});var r=t(8950),i=t(67917),o=t(24927),a=t(73176),l=t(51744),s=t(49022),c=t(54682),u=t(71424),d=t(87584),p=t(37157),f=t(29369),h=t(81740),m=t(48695),g=t(18069);function v(e){return e[e.length-1]}var y=function(e){return e.NONE="NONE",e.HTML_PREVIEW_EMPTY_STATE="HTML_PREVIEW_EMPTY_STATE",e.HTML_PREVIEW_FROM_DISK="HTML_PREVIEW_FROM_DISK",e.HTML_PREVIEW_STREAM="HTML_PREVIEW_STREAM",e}(y||{}),w=function(e){return e.WORKSPACE_CONNECTING="WORKSPACE_CONNECTING",e.WORKSPACE_RECONNECTING="WORKSPACE_RECONNECTING",e.SERVICES_LOADING="SERVICES_LOADING",e.HTML_PREVIEW_EMPTY_STATE="HTML_PREVIEW_EMPTY_STATE",e.HTML_PREVIEW_FROM_DISK="HTML_PREVIEW_FROM_DISK",e.HTML_PREVIEW_STREAM="HTML_PREVIEW_STREAM",e.APP_CRASHED_AGENT_WORKING="APP_CRASHED_AGENT_WORKING",e.APP_CRASHED_AGENT_IDLE="APP_CRASHED_AGENT_IDLE",e.APP_NOT_RUNNING_AGENT_WORKING="APP_NOT_RUNNING_AGENT_WORKING",e.APP_NOT_RUNNING_AGENT_IDLE="APP_NOT_RUNNING_AGENT_IDLE",e.APP_STARTING_AGENT_WORKING="APP_STARTING_AGENT_WORKING",e.APP_STARTING_AGENT_IDLE="APP_STARTING_AGENT_IDLE",e.READY="READY",e.LAST_RESORT_RUNNING_NO_PORT="LAST_RESORT_RUNNING_NO_PORT",e.LAST_RESORT_READY="LAST_RESORT_READY",e}({});function b(){var e,n=(0,i.NC)(),t=(0,a.J2)(n.sessions.agent.current),r=(0,g.sz)(),l=(0,f.T)(null!=(e=null==t?void 0:t.id)?e:null),s=(0,o.r)(),u=(0,i.Ik)(),p=(0,i.Ky)(),h=(0,i.X1)(),m=null==p?void 0:p.approvedDesignReferenceFilePath,v=(0,i.RB)();return{approvedDesignReferenceFilePath:m,hasHtmlPreviewPortAvailable:(0,d.M)(),isAgentWorking:r,isInRapidBuild:s,isInitialAgentSession:l,isMobile:(0,c.m5)(),planApprovalState:u,proposedPlanEventState:null==h?void 0:h.eventState,proposedPlanSupportsVisualPreview:v}}function S(){var e=b(),n=e.approvedDesignReferenceFilePath,t=e.hasHtmlPreviewPortAvailable,i=e.isAgentWorking,o=e.isInRapidBuild,a=e.isInitialAgentSession,l=e.isMobile,s=e.planApprovalState,c=e.proposedPlanEventState,u=e.proposedPlanSupportsVisualPreview;if(l&&a&&u&&t)return{type:"HTML_PREVIEW_STREAM"};if(a&&u&&"approved"!==s)return{type:"HTML_PREVIEW_EMPTY_STATE"};if(i&&a){if(u&&o)if(n&&c===r.qOk.COMPLETE)return{type:"HTML_PREVIEW_FROM_DISK",designReferenceFilePath:n};else return{type:"HTML_PREVIEW_STREAM"};else if(t)return{type:"HTML_PREVIEW_STREAM"}}return{type:"NONE"}}function Y(){var e,n=(0,p.A)(),t=n.didConnectOnce,r=n.didDisconnect,i=(0,h.lO)(),c=(0,h.If)(),d=(0,u.A)().ports,f=(0,s.A)(d.portsState),y=(0,g.sz)(),w=(0,o.r)(),b=null!==f&&!1===i.isWorkflowsLoading,S=Object.values(null!=c?c:{}).filter(function(e){return"agent"===e.workflow.author&&e.tasks.some(function(e){return"shell.exec"===e.config.task})}).sort(function(e,n){return e.startTime-n.startTime}),Y=S.filter(function(e){return e.step===l.zY.RUNNING}),_=Y.length>0?v(Y):v(S),A=null==_||null==(e=_.tasks)?void 0:e.filter(function(e){return"shell.exec"===e.config.task}),C=null==A?void 0:A.some(function(e){var n,t;return null==(t=e.metadata)||null==(n=t.openPorts)?void 0:n.some(function(e){return e.forwarded})}),k=v(Object.values(null!=c?c:{}).filter(function(e){return"agent"!==e.workflow.author&&e.step===l.zY.RUNNING&&e.tasks.some(function(e){var n;return(null==(n=e.metadata)?void 0:n.task)==="shell.exec"})}).sort(function(e,n){return e.startTime-n.startTime})),x=(0,m.w)();return{areNecessaryServicesReady:b,didConnectOnce:t,didDisconnect:r,hasLatestAgentWorkflowRunOpenedAPort:C,isAgentWorking:y,isInRapidBuild:w,lastResortWorkflowThatRuns:k,latestWorkflowRunStateForAgentTask:_,presentWebsiteResultEvent:(0,a.Rj)(function(){return null==x?void 0:x.scan(function(e,n){var t,r;return(null==(t=n.toPresent)?void 0:t.toolData.$kind)==="presentResultsToolData"&&"website"===n.toPresent.toolData.data.resultType?null==(r=n.toPresent)?void 0:r.toolData.data:e},void 0)},[x])}}function _(){var e=S(),n=Y(),t=n.areNecessaryServicesReady,r=n.didConnectOnce,i=n.didDisconnect,o=n.hasLatestAgentWorkflowRunOpenedAPort,a=n.isAgentWorking,s=n.isInRapidBuild,c=n.lastResortWorkflowThatRuns,u=n.latestWorkflowRunStateForAgentTask,d=n.presentWebsiteResultEvent;if(!r)return{state:"WORKSPACE_CONNECTING"};if(i)return{state:"WORKSPACE_RECONNECTING"};if(!t)return{state:"SERVICES_LOADING"};if("HTML_PREVIEW_EMPTY_STATE"===e.type)return{state:"HTML_PREVIEW_EMPTY_STATE"};if("HTML_PREVIEW_FROM_DISK"===e.type)return{state:"HTML_PREVIEW_FROM_DISK",designReferenceFilePath:e.designReferenceFilePath};if("HTML_PREVIEW_STREAM"===e.type)return{state:"HTML_PREVIEW_STREAM"};if(void 0!==c&&void 0===u){var p,f,h,m=null==(p=c.tasks)?void 0:p.find(function(e){var n,t,r;return!!((null==(n=e.metadata)?void 0:n.task)==="shell.exec"&&(null==(r=e.metadata)||null==(t=r.openPorts)?void 0:t.some(function(e){return e.forwarded})))}),g=null==m||null==(h=m.metadata.openPorts)||null==(f=h.find(function(e){return e.forwarded}))?void 0:f.externalPort;return g?{state:"LAST_RESORT_READY",externalPort:g}:{state:"LAST_RESORT_RUNNING_NO_PORT"}}if((null==u?void 0:u.step)===l.zY.FAILED){var v=u.runId;return a?{state:"APP_CRASHED_AGENT_WORKING",crashedRunId:v}:{state:"APP_CRASHED_AGENT_IDLE",crashedRunId:v}}if((null==u?void 0:u.step)!==l.zY.RUNNING)if(a||s)return{state:"APP_NOT_RUNNING_AGENT_WORKING"};else return{state:"APP_NOT_RUNNING_AGENT_IDLE"};if(u.step===l.zY.RUNNING&&!o)if(a)return{state:"APP_STARTING_AGENT_WORKING"};else return{state:"APP_STARTING_AGENT_IDLE"};return{state:"READY",presentPort:null==d?void 0:d.websitePort,presentRoute:null==d?void 0:d.websiteRoute}}},28210:(e,n,t)=>{"use strict";t.d(n,{c:()=>h});var r=t(29935),i=t(82643),o=t(21462),a=t(90629),l=t(8950),s=t(17341),c=t(71355),u=t(67917),d=t(73176),p=t(37872),f=t(71424);function h(){var e=(0,f.A)().fs,n=(0,u.NC)(),t=(0,d.Rj)(function(){return n.sessions.agent.all.list.map(function(e){return e[e.length-1]})},[n.sessions],{default:void 0}),l=(0,d.Rj)(function(){return null==t?void 0:t.reduce(g,200).result},[t],{default:!1}),s=(0,o.useMemo)(function(){return null==t?void 0:t.transform(m,1e3).flat.map(function(e){return e.flatMap(function(e){return e.designReferenceFilePaths})})},[t]),c=(0,u.iz)(),h=(0,u._r)(),v=(0,u.CG)(),y=(0,u.EZ)();(0,o.useEffect)(function(){if(s&&!l){var n,o=s.subscribe((n=(0,r._)(function(n){var r,o,a,s,u,d,f,m;return(0,i.YH)(this,function(i){switch(i.label){case 0:r=!0,o=!1,a=void 0,i.label=1;case 1:i.trys.push([1,6,7,8]),s=n[Symbol.iterator](),i.label=2;case 2:if(r=(u=s.next()).done)return[3,5];if(c(d=u.value))return[3,4];return[4,e.readFile(d)];case 3:if((f=i.sent()).error)return p.vF.info("Failed to read design reference file from disk",{errorMessage:f.error.toString(),filePath:d,sessionId:null==t?void 0:t.id,didRapidBuildComplete:l}),y(d),[3,4];h(d,f.content.toString()),i.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return m=i.sent(),o=!0,a=m,[3,8];case 7:try{r||null==s.return||s.return()}finally{if(o)throw a}return[7];case 8:return[2]}})}),function(e){return n.apply(this,arguments)}),function(e){a.Cp(e)});return function(){o.unsubscribe()}}},[s,l,e,c,h,y,null==t?void 0:t.id]),(0,o.useEffect)(function(){l&&v()},[l,v])}var m={direction:"reverse",state:{},transformer:function(e){if(e.state===l.qOk.COMPLETE&&(0,s.TW)(e,"agentPlanEventContents")){var n=(0,c.QN)(e.contents.contents),t=n.planId,r=n.designReferenceFilePaths;if(r.length>0)return{planId:t,designReferenceFilePaths:r}}}},g={direction:"forward",state:{didComplete:!1},map:function(e){return e.didComplete},reducer:function(e,n){if((0,s.TW)(e,"rapidBuildConcluded"))return n.didComplete=!0,!1}}},28367:(e,n,t)=>{"use strict";t.d(n,{Kd:()=>l,Nk:()=>s,a6:()=>a,h3:()=>i,s7:()=>o});var r=t(21462),i=50,o=2/3*100,a=85,l=100;function s(e){var n=e.usage,t=e.limit,i=e.percentThreshold,o=e.onHitThreshold,a=(0,r.useRef)(void 0);(0,r.useEffect)(function(){if(void 0!==n&&void 0!==t){var e=n/t*100;void 0!==a.current&&a.current/t*100<i&&e>=i&&o(),a.current=n}},[n,t,i,o])}},28746:(e,n,t)=>{"use strict";t.d(n,{Ry:()=>o,vF:()=>r,z$:()=>i});var r=100,i=3,o=250},28854:(e,n,t)=>{"use strict";t.d(n,{H:()=>s});var r=t(29935),i=t(82643),o=t(21462),a=t(8950),l=t(67917);function s(e){var n,t,s,c,u=e.openPane,d=(n=(0,l.NC)(),t=(0,l.dm)().getAssistantMessageIntent,(0,o.useCallback)((s=(0,r._)(function(e){var r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,n.sessions.create({sessionType:a.dF3.CHAT})];case 1:if(!(r=i.sent()).ok)return[2,r];return(o=r.payload).appendEvent({kind:"message",message:e,intent:t()}),[2,{ok:!0,payload:{newSessionId:o.id}}]}})}),function(e){return s.apply(this,arguments)}),[n.sessions,t]));return(0,o.useCallback)((c=(0,r._)(function(e){var n;return(0,i.YH)(this,function(t){switch(t.label){case 0:return u({type:"ghostwriterChat"}),[4,d(e)];case 1:if(!(n=t.sent()).ok)return[2];return u({type:"ghostwriterChat",data:{sessionId:n.payload.newSessionId}}),[2]}})}),function(e){return c.apply(this,arguments)}),[u,d])}},28984:(e,n,t)=>{"use strict";t.d(n,{o:()=>a});var r=t(37743),i=t(82643),o=t(38),a=function(){function e(n,t,i,o){(0,r._)(this,e),this.a=n,this.b=t,this.chunks=i,this.map=o}var n=e.prototype;return n.line=function(e,n){return n===o.mn.A?this.a.line(e):this.b.line(e)},n.bounds=function(e){if(0===this.chunks.length)return null;var n=(0,o.Dk)(this.chunks[0],e),t=(0,o.Dk)(this.chunks[this.chunks.length-1],e),r=e===o.mn.A?this.a.length:this.b.length,i=Math.min(t.to,r);return{from:n.from,to:i}},n.hasChanges=function(){return this.chunks.length>0},n.updateA=function(n,t,r){var i=this.b,a=(0,o.Pt)(n,i,{chunks:this.chunks,changesA:t},r),l=(0,o.k1)(n,i,a);return new e(n,i,a,l)},n.updateB=function(n,t,r){var i=this.a,a=(0,o.Pt)(i,n,{chunks:this.chunks,changesB:t},r),l=(0,o.k1)(i,n,a);return new e(i,n,a,l)},n.getContainingChunk=function(e,n){for(var t=0,r=this.chunks.length-1;t<=r;){var i=t+r>>>1,a=this.chunks[i],l=(0,o.Dk)(a,n);if(e>=l.from&&e<=l.to)return a;e<l.from?r=i-1:e>l.to&&(t=i+1)}return null},n.getCorrespondingLine=function(e,n){var t=this.map.get(n===o.mn.A?-e:e);return t?this.line(t,(0,o.Nl)(n)):null},n.getLineChangeType=function(e,n){if(this.map.get(n===o.mn.A?-e:e))return o.DE.UNCHANGED;var t=this.line(e,n),r=this.getContainingChunk(t.from,n);return r?(0,o.$F)(this.a,this.b,t,n,r.changes,r):o.DE.UNCHANGED},n.getLineStats=function(){for(var e={added:0,removed:0},n=1;n<=this.a.lines;n++)this.getLineChangeType(n,o.mn.A)!==o.DE.UNCHANGED&&e.removed++;for(var t=1;t<=this.b.lines;t++)this.getLineChangeType(t,o.mn.B)!==o.DE.UNCHANGED&&e.added++;return e},n.iterLines=function(e){var n,t,r,a;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=e===o.mn.A?this.a:this.b,t=1,i.label=1;case 1:if(!(t<=n.lines))return[3,4];return r=n.line(t),a=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:a}];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})},n.iterRanges=function(){var e,n,t,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:e=0,i.label=1;case 1:if(!(e<this.chunks.length))return[3,6];n=this.chunks[e].fromA,t=this.chunks[e].fromB,r=0,i.label=2;case 2:if(!(r<this.chunks[e].changes.length))return[3,5];return o=this.chunks[e].changes[r],[4,{fromA:n+o.fromA,toA:n+o.toA,fromB:t+o.fromB,toB:t+o.toB}];case 3:i.sent(),i.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}})},e.create=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.r6,i=(0,o.Pt)(n,t,void 0,r),a=(0,o.k1)(n,t,i);return new e(n,t,i,a)},e}()},29240:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(12694),i=t(21462);function o(e,n){var t=(0,r._)((0,i.useState)(null),2),o=t[0],a=t[1];return(0,i.useEffect)(function(){var t=!1;return e.readFile(n).then(function(e){t||a(e)}),function(){t=!0}},[e,n]),o}},29369:(e,n,t)=>{"use strict";t.d(n,{T:()=>o,Y:()=>a});var r=t(67917),i=t(73176);function o(e){var n=(0,r.NC)(),t=(0,i.Rj)(function(){return n.sessions.agent.all.list.map(function(e){return e[e.length-1]})},[n.sessions],{default:void 0});return null!=e&&null!=t&&t.id===e}function a(){var e,n=(0,r.NC)(),t=(0,i.J2)(n.sessions.agent.current);return o(null!=(e=null==t?void 0:t.id)?e:null)}},29426:(e,n,t)=>{"use strict";t.d(n,{V:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(50175);function l(){var e=(0,i._)(["\n  mutation UpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isInPlanningPhase\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.n(c,n)}},29757:(e,n,t)=>{"use strict";t.d(n,{D:()=>s,H:()=>a});var r=t(76957),i=t(79203),o=(0,r.eU)(!1);function a(){return(0,i.md)(o)}var l=(0,r.eU)(null,function(e,n){return n(o,function(e){return!e})});function s(){return(0,i.Xr)(l)}},29839:(e,n,t)=>{"use strict";t.d(n,{A:()=>F});var r=t(12694),i=t(81073),o=t(21462),a=t(27469),l=t(4308),s=t(17844),c=t(93629),u=t(12584),d=t(41114),p=t(50175);function f(){var e=(0,u._)(["\n  mutation SendSmsVerification($input: SendSmsVerificationInput!) {\n    sendSmsVerification(input: $input) {\n      ... on SendSmsVerificationResult {\n        __typename\n        success\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n      ... on TooManyRequestsError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,u._)(["\n  mutation ConfirmSmsVerification($input: ConfirmSmsVerificationInput!) {\n    confirmSmsVerification(input: $input) {\n      ... on ConfirmSmsVerificationResult {\n        __typename\n        success\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n      ... on TooManyRequestsError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}var m={},g=(0,d.J1)(f()),v=(0,d.J1)(h()),y=function(e,n){switch(n.type){case"setPhoneNumber":return(0,c._)((0,s._)({},e),{phoneNumber:n.phoneNumber});case"setCode":return(0,c._)((0,s._)({},e),{code:n.code});case"setError":return(0,c._)((0,s._)({},e),{error:n.message});case"setMode":return(0,c._)((0,s._)({},e),{mode:n.mode});default:return e}},w=function(){var e,n,t,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=a.onSuccess,u=a.context,d=(0,r._)((0,o.useReducer)(y,{mode:"phone-input"}),2),f=d[0],h=d[1],w=(0,r._)((e={onError:function(){return h({type:"setError",message:"Something went wrong"})},onCompleted:function(e){if("SendSmsVerificationResult"===e.sendSmsVerification.__typename)return void h({type:"setMode",mode:"code-input"});h({type:"setError",message:e.sendSmsVerification.message})}},n=(0,s._)({},m,e),p.n(g,n)),2),b=w[0],S=w[1].loading,Y=(0,r._)((t={onError:function(){return h({type:"setError",message:"Something went wrong"})},onCompleted:function(e){if("ConfirmSmsVerificationResult"===e.confirmSmsVerification.__typename){null==l||l(),h({type:"setMode",mode:"success"});return}h({type:"setError",message:e.confirmSmsVerification.message})}},i=(0,s._)({},m,t),p.n(v,i)),2),_=Y[0],A=Y[1].loading;return[(0,c._)((0,s._)({},f),{loading:A||S}),{reset:function(){h({type:"setMode",mode:"phone-input"}),h({type:"setPhoneNumber",phoneNumber:void 0}),h({type:"setCode",code:void 0}),h({type:"setError",message:void 0})},submitCode:function(){if(!A){var e=f.phoneNumber,n=f.code;if(!e)return void h({type:"setError",message:"Phone number is required"});if(!n)return void h({type:"setError",message:"Verification code is required"});h({type:"setError",message:void 0}),_({variables:{input:{phoneNumber:e,code:n,context:u}}})}},submitPhoneNumber:function(){if(!S){var e=f.phoneNumber;if(!e)return void h({type:"setError",message:"Phone number is required"});h({type:"setError",message:void 0}),b({variables:{input:{phoneNumber:e,context:u}}})}},handleCodeChange:function(e){h({type:"setCode",code:e})},handlePhoneNumberChange:function(e){h({type:"setPhoneNumber",phoneNumber:e})}}]},b=t(36937),S=t(31450),Y=t(18509),_=t(85051),A=t(27023),C=t(11769),k=t(40259),x=t(36073),D=t(4616),E=t(85389),R=t(63456),I=(0,Y.x)({mobilePhoneInput:[{".PhoneInput":[A.wp.display.flex,A.wp.rowWithGap(4),_.b.filledAndOutlined,A.wp.px(8),A.wp.py(4),A.wp.color.foregroundDefault,{".PhoneInputCountry":[A.wp.rowWithGap(4),A.wp.display.flex,A.wp.align.center,A.wp.flex.shrink(1),A.wp.position.relative,{".PhoneInputCountryIcon":[A.wp.width(16),A.wp.height(12),{".PhoneInputCountryIconImg":[A.wp.display.block,A.wp.width("100%"),A.wp.height("100%")]}],".PhoneInputCountrySelect":[A.wp.position.absolute,A.wp.top(0),A.wp.left(0),A.wp.width("100%"),A.wp.height("100%"),{opacity:0,zIndex:1,cursor:"pointer"}],".PhoneInputCountrySelectArrow":[A.wp.display.block,A.wp.width(8),A.wp.height(8),A.wp.mx(2),A.wp.mb(4),{content:'""',borderStyle:"solid",borderColor:b.LU.foregroundDefault,borderTopWidth:0,borderBottomWidth:1,borderLeftWidth:0,borderRightWidth:1,transform:"rotate(45deg)"}]}],".PhoneInputInput":[A.wp.flex.grow(1),{appearance:"none",background:"transparent",border:0,"&:focus":{outline:0}}]}]}],resetResendOptions:[A.wp.display.inlineBlock],textButton:[A.wp.reset.button,A.wp.color.accentPrimaryStronger,A.wp.focusRing,A.wp.borderRadius(4),{":focus":{outlineOffset:"2px"},transitionProperty:"color, box-shadow",transitionDuration:S.Ds.duration,transitionTimingFunction:S.Ds.timingFunction,":not([disabled])":{textDecoration:"underline",cursor:"pointer","@media (hover: hover)":{":hover":{color:b.LU.accentPrimaryStrongest}},":not(textarea):active":{color:b.LU.accentPrimaryStrongest}}}]}),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,o.useId)();return e?"".concat(e,"-").concat(n):n};let F=function(e){var n=e.context,t=e.ctas,o=void 0===t?{sendCode:"Send code",confirmCode:"Confirm code"}:t,s=e.onSuccess,c=e.autoFocus,u=(0,r._)(w({onSuccess:s,context:n}),2),d=u[0],p=u[1],f=T("sms-verification-phone"),h=T("sms-verification-phone-error"),m=T("sms-verification-code"),g=T("sms-verification-code-error");switch(d.mode){case"phone-input":return(0,i.FD)(E.S,{css:I.mobilePhoneInput,gap:8,tag:"form",onSubmit:function(e){e.preventDefault(),p.submitPhoneNumber()},children:[(0,i.Y)(D.EY,{children:"Enter your phone number:"}),(0,i.Y)(a.s,{children:(0,i.Y)("label",{htmlFor:f,children:"Phone Number"})}),(0,i.Y)(l.Ay,{id:f,addInternationalOption:!1,countryCallingCodeEditable:!1,defaultCountry:"US",international:!0,value:d.phoneNumber,onChange:p.handlePhoneNumberChange,numberInputProps:{"aria-describedby":h,onKeyDown:function(e){"Enter"===e.key&&p.submitPhoneNumber()},autoFocus:void 0===c||c}}),d.error?(0,i.Y)(x.N,{id:h,colorway:"warning",text:d.error}):null,(0,i.Y)(D.EY,{variant:"small",color:"dimmer",children:"Your phone number is only used for account verification."}),(0,i.Y)(C.$n,{colorway:"primary",text:o.sendCode,loading:d.loading,type:"submit"})]});case"code-input":return(0,i.FD)(E.S,{gap:8,tag:"form",onSubmit:function(e){e.preventDefault(),p.submitCode()},children:[(0,i.FD)(D.EY,{children:["We just sent a verification code to ",d.phoneNumber,". Enter the code below."]}),(0,i.Y)(a.s,{children:(0,i.Y)("label",{htmlFor:m,children:"code"})}),(0,i.Y)(k.pd,{id:m,type:"text",inputMode:"numeric",pattern:"[0-9]*",autoComplete:"one-time-code",value:d.code,onChange:function(e){var n=e.currentTarget.value;return p.handleCodeChange(n)},onKeyDown:function(e){"Enter"===e.key&&p.submitCode()},"aria-describedby":g}),d.error?(0,i.Y)(x.N,{id:g,colorway:"warning",text:d.error}):null,(0,i.FD)(E.S,{gap:0,children:[(0,i.Y)(D.EY,{variant:"small",color:"dimmer",multiline:!0,children:"Didn't get the code?"}),(0,i.FD)(D.EY,{variant:"small",color:"dimmer",css:I.resetResendOptions,children:[(0,i.Y)("button",{disabled:d.loading,css:I.textButton,onClick:p.submitPhoneNumber,type:"button",children:"Resend the code"})," or ",(0,i.Y)("button",{disabled:d.loading,css:I.textButton,onClick:p.reset,type:"button",children:"use a different number"})]})]}),(0,i.Y)(C.$n,{text:o.confirmCode,colorway:"primary",loading:d.loading,type:"submit"})]});case"success":return(0,i.Y)(E.S,{align:"center",children:(0,i.Y)(R.A,{size:24})})}}},30095:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(12694),i=t(81073),o=t(21462),a=t(18509),l=t(27023),s=t(11769),c=t(40259),u=t(4616),d=t(85389),p=(0,a.x)({styles1:[l.wp.color.accentNegativeStronger]});function f(e){var n=e.prompt,t=e.desc,a=e.type,l=e.placeholder,f=e.confirmText,h=e.loading,m=e.errorMessage,g=e.onCancel,v=e.onConfirm,y=e.isDanger,w=e.buttonIcon,b=(0,r._)((0,o.useState)(),2),S=b[0],Y=b[1];return(0,i.FD)(d.S,{gap:24,children:[(0,i.Y)(u.Y9,{variant:"headerDefault",level:2,children:n}),(0,i.Y)(u.EY,{children:t}),(0,i.Y)(c.pd,{type:a,value:S,placeholder:l,autoFocus:!0,onChange:function(e){return Y(e.target.value)}}),m?(0,i.Y)(u.EY,{css:p.styles1,multiline:!1,children:m}):null,(0,i.FD)(d.S,{row:!0,gap:12,justify:"end",children:[(0,i.Y)(s.$n,{disabled:h,onClick:g,text:"Cancel"}),(0,i.Y)(s.$n,{colorway:y?"negative":"primary",disabled:h,onClick:function(){return S&&v(S)},text:f||"Ok",iconLeft:w,dataCy:"prompt-confirm-button"})]})]})}},30331:(e,n,t)=>{"use strict";t.d(n,{JH:()=>ex,xs:()=>H,Vc:()=>W,fg:()=>B,kK:()=>G,$s:()=>z,GQ:()=>e_,UM:()=>eN,Tp:()=>eF,_k:()=>el,cF:()=>ep,mj:()=>eo,Jz:()=>eg,i$:()=>Q,tq:()=>eh,kM:()=>eu,bu:()=>en,Ol:()=>j,om:()=>V,O6:()=>er,ik:()=>ec,kW:()=>eA,Rh:()=>q,Ki:()=>eD,g$:()=>Z,e_:()=>eL});var r=t(29935),i=t(17844),o=t(93629),a=t(12694),l=t(82643),s=t(21462),c=t(68682),u=t(35992),d=t(76957),p=t(71672),f=t(89998),h=t(66767),m=t(66890),g=t(91326),v=t(82706),y=t(78251),w=t(22799),b=t(54564),S=t(81869);function Y(){return(Y=(0,r._)(function(e){var n,t,r,i,o,a,s,c,u,d,p;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.command,t=e.replId,r=e.buildId,i=e.machineConfigurationId,o=e.maxMachineInstances,!S.V)throw Error("expected apolloClient to be initialized");return[4,S.V.mutate({mutation:f.LQ,variables:{input:{command:n,replId:t,buildId:r,machineConfigurationId:i,maxMachineInstances:o}}})];case 1:if(null==(a=(u=l.sent()).errors)?void 0:a.length)throw Error(u.errors.map(function(e){return e.message}).join(", "));if((null==(c=u.data)||null==(s=c.sendDeploymentLifecycleCommand)?void 0:s.__typename)!=="SendDeploymentLifecycleCommandResult")throw Error((null==(p=u.data)||null==(d=p.sendDeploymentLifecycleCommand)?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}})})).apply(this,arguments)}function _(){return(_=(0,r._)(function(e){var n,t,r,i,o,a,s,c;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.buildId,t=e.targetDeploymentId,!S.V)throw Error("expected apolloClient to be initialized");return[4,S.V.mutate({mutation:f.NG,variables:{input:{buildId:n,targetDeploymentId:t}}})];case 1:if(null==(r=(a=l.sent()).errors)?void 0:r.length)throw Error(a.errors.map(function(e){return e.message}).join(", "));if((null==(o=a.data)||null==(i=o.failHostingBuild)?void 0:i.__typename)!=="FailHostingBuildResult")throw Error((null==(c=a.data)||null==(s=c.failHostingBuild)?void 0:s.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}})})).apply(this,arguments)}function A(){return(A=(0,r._)(function(e){var n,t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:return n=e.apolloClient,t=e.replId,[4,n.query({query:f.zg,variables:{replId:t}})];case 1:return[2,"Repl"===(i=o.sent().data).getRepl.__typename&&(null==(r=i.getRepl.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?i.getRepl.hostingDeployment.ignoredSecrets:[]]}})})).apply(this,arguments)}function C(){return(C=(0,r._)(function(e){var n,t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:return n=e.apolloClient,t=e.replId,[4,n.query({query:f.Hh,variables:{replId:t}})];case 1:return[2,"Repl"===(i=o.sent().data).getRepl.__typename&&(null==(r=i.getRepl.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?i.getRepl.hostingDeployment.currentBuild.envVars.map(function(e){return{name:e.name}}):[]]}})})).apply(this,arguments)}var k=t(22940),x=t(48958),D=t(336),E=t(5932),R=t(82112),I=t(88624),T=t(67662),F=t(90205),P=t(13385),L=t(98679),U=t(42546),N=t(86891),O=t(55100);function M(){return(M=(0,r._)(function(e){var n,t,r,i,o;return(0,l.YH)(this,function(a){return(n=e.deploymentTimeCreated,t=e.buildTimeCreated,r=e.ignoreSecretsUntil,i=e.replId,o=e.apolloClient,n&&t&&r>new Date(n)&&r>new Date(t))?[2,(function(e){return C.apply(this,arguments)})({replId:i,apolloClient:o}).then(function(e){return e.map(function(e){return e.name})})]:[2,function(e){return A.apply(this,arguments)}({replId:i,apolloClient:o})]})})).apply(this,arguments)}var H=(0,d.eU)({}),B=(0,d.eU)({}),z=(0,d.eU)({}),W=(0,d.eU)({}),G=(0,d.eU)({});function V(){return(0,D.h)(B)}function Z(){return(0,D.h)(z)}function j(){return(0,D.h)(W)}function q(){return(0,D.h)(G)}var K=(0,d.eU)(void 0),$=(0,d.eU)(void 0),J=(0,d.eU)(void 0);function Q(){return(0,D.h)(J)}var X=(0,d.eU)(void 0),ee=(0,d.eU)(void 0);function en(){return(0,D.h)(ee)}var et=(0,d.eU)(void 0);function er(){return(0,D.h)(et)}var ei=(0,d.eU)(void 0);function eo(){var e,n,t=(0,D.h)(K),r=(0,D.h)(ei),i=(0,D.h)(ed),o=(0,D.ob)(ey),l=(0,D.ob)(eE),s=(0,a._)((0,f.rf)({fetchPolicy:"no-cache",onCompleted:o,onError:function(e){l(e.message)}}),1)[0],c=function(e,n){if(!e||!r)return{deploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:m.S4P.InsufficientPermissions,message:"Loading"},redeploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:m.S4P.InsufficientPermissions,message:"Loading"},isIncludedInSubscription:!1};var i=r.createAutoscaleDeployment,o=r.createAutoscaleDeploymentPrivate,a=r.createRvmDeployment,l=r.createRvmDeploymentPrivate,s=r.createScheduledDeployment,c=r.createStaticDeployment,u=r.createStaticDeploymentPrivate,d=r.redeployAutoscaleDeployment,p=r.redeployAutoscaleDeploymentPrivate,f=r.redeployRvmDeployment,h=r.redeployRvmDeploymentPrivate,v=r.redeployScheduledDeployment,y=r.redeployStaticDeployment,w=r.redeployStaticDeploymentPrivate;switch(e){case m.Q0q.Static:return{deploy:n?u:c,redeploy:n?w:y,isIncludedInSubscription:!1};case m.Q0q.Cron:return{deploy:s,redeploy:v,isIncludedInSubscription:!1};case m.Q0q.CloudRun:return{deploy:n?o:i,redeploy:n?p:d,isIncludedInSubscription:!1};case m.Q0q.Gce:var b,S=a.isAuthorized,Y=(null==t?void 0:t.__typename)==="Repl"&&(null==(b=t.owner)?void 0:b.__typename)==="Team";return{deploy:n?l:a,redeploy:n?h:f,isIncludedInSubscription:S&&Y};case m.Q0q.Extension:throw Error("Found unexpected provider");default:(0,g.A)(e)}};return{deployability:c(null==i?void 0:i.provider),getDeployabilityByProvider:c,refetch:function(){if(t)return s({variables:{replId:t.id}})},hasDebugSummariesAuthorization:null!=(n=null==r||null==(e=r.useDeploymentDebugSummaries)?void 0:e.isAuthorized)&&n}}var ea=(0,d.eU)(P.Sv);function el(){var e=(0,D.h)(ea),n=(0,s.useCallback)(function(n){return(0,P._3)(n,e)},[e]);return(0,o._)((0,i._)({},e),{getRvmDeploymentCostDetailsByConfigurationSlug:n})}function es(e){var n,t,r,i,o=(0,f.Nt)({variables:{replId:e}}),a=o.data,l=o.refetch,s=(null==a?void 0:a.getRepl.__typename)==="Repl"?a.getRepl:null;return{isTeamRepl:(null==s||null==(t=s.owner)?void 0:t.__typename)==="Team",isReplitOwnedTeamRepl:!!((null==s||null==(r=s.owner)?void 0:r.id)&&(777914===(n=null==(i=s.owner)?void 0:i.id)||0xe69de0===n||3944703===n||0x1c62260===n)),refetch:l}}function ec(e){return!!es(e).isTeamRepl}function eu(e){var n=e.replId,t=e.onError,i=e.dotReplitService,o=(0,a._)((0,s.useState)(void 0),2),c=o[0],u=o[1],d=(0,a._)((0,s.useState)(void 0),2),p=d[0],f=d[1],h=es(n),g=h.isTeamRepl,v=h.isReplitOwnedTeamRepl;return(0,s.useEffect)(function(){if(g&&!v){u(m.Q0q.Gce),f(m.Q0q.Gce);return}function e(){return(e=(0,r._)(function(){var e,n;return(0,l.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,F.XE)(i)];case 1:if(null===(e=r.sent()).appType)return u(m.Q0q.CloudRun),f(m.Q0q.CloudRun),[2];if((n=(0,I.b3)(e.appType))===m.Q0q.Extension)return t("Did not recognize template deployment provider"),[2];return u(n),f(n),[3,3];case 2:return r.sent(),t("Something went wrong"),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,i,g,v]),{activeProvider:c,setActiveProvider:u,recommendedProvider:p}}var ed=(0,d.eU)(void 0);function ep(){return(0,D.h)(ed)}var ef=(0,d.eU)(void 0);function eh(){return(0,D.h)(ef)}var em=(0,d.eU)(void 0);function eg(){return(0,D.h)(em)}var ev=(0,d.eU)(null,function(e,n){n(J,void 0),n(X,void 0),n(ee,void 0),n(ed,void 0),n(ef,void 0),n(k.I,E.d.Ready)}),ey=(0,d.eU)(null,function(e,n,t){var r,i="Repl"===t.getRepl.__typename?t.getRepl:null,o=(null==(r=t.currentUser)?void 0:r.__typename)==="CurrentUser"?t.currentUser:null;i&&o&&n(ei,i.authorizations)}),ew=(0,d.eU)(null,function(e,n,t){var r,i,o,a="Repl"===t.getRepl.__typename?t.getRepl:null,l=(null==(r=t.currentUser)?void 0:r.__typename)==="CurrentUser"?t.currentUser:null;if(a&&l){n(K,a),n($,l),n(ey,t),n(ea,(0,P.xC)()),n(et,!!a.config.isVnc);var s=a.hostingDeployment;if(s){if("HostingDeployment"!==s.__typename)return n(em,"Unexpected hosting deployment typename: ".concat(s.__typename));if(n(J,s.id),n(X,s.timeCreated),n(ed,s.currentBuild),n(ee,s.replitAppSubdomain||(0,y.ER)({replSlug:a.slug,username:null==(o=a.owner)?void 0:o.username})),s.inProgressBuild){n(ef,s.inProgressBuild),n(k.I,E.d.Deploying);return}return void n(k.I,(0,I.$0)(s.currentBuild.status))}n(ee,(0,y.ER)({replSlug:a.slug,username:null==(i=a.owner)?void 0:i.username})),n(k.I,E.d.Ready)}});function eb(){var e=(0,D.ob)(ew),n=(0,D.ob)(eE);return(0,a._)((0,f.rf)({fetchPolicy:"no-cache",onCompleted:e,onError:function(e){n(e.message)}}),1)[0]}var eS=(0,d.eU)(null,function(e,n,t){if("HostingBuildDeployStatusAction"===t.__typename){var r=e(k.I),i=e(ef),o=e(ed),a=t.status;if(r===E.d.Deploying){if(!i)return void n(eE,"No deployment in progress found");n(ef,(0,u.jM)(i,function(e){e.status=a})),(a===m.nHS.Success||a===m.nHS.Failed)&&(n(ef,void 0),a!==m.nHS.Success&&o||n(ed,(0,u.jM)(i,function(e){e.status=a,e.hasImageTag=i.provider!==m.Q0q.Static&&a===m.nHS.Success})))}else if(r===E.d.ProcessingLifecycleCommand){if(!o)return void n(eE,"No current build found");n(ed,(0,u.jM)(o,function(e){e.status=a}))}n(k.I,(0,I.$0)(a)),t.message&&a===m.nHS.Failed&&n(eE,t.message)}}),eY=(0,d.eU)(null);function e_(){return(0,D.h)(eY)}function eA(e){var n=(0,D.AI)(eY),t=(0,L.A)(e);(0,s.useEffect)(function(){return n.subscribe(function(e){e&&t.current(e)})},[n,t])}var eC=(0,d.eU)(function(e){var n,t;switch(e(k.I)){case E.d.Deploying:return null==(n=e(ef))?void 0:n.id;case E.d.ProcessingLifecycleCommand:return null==(t=e(ed))?void 0:t.id;default:return}}),ek=(0,d.eU)(null,function(){var e=(0,r._)(function(e,n,t){var r;return(0,l.YH)(this,function(e){return(r=t.data.data)&&(n(eS,r.hostingBuildDeployActionUpdates),n(eY,r.hostingBuildDeployActionUpdates)),[2]})});return function(n,t,r){return e.apply(this,arguments)}}());function ex(e){var n,t,r,i,o;return n=e.replId,t=eb(),r=(0,D.ob)(ek),i=(0,D.ob)(eE),(0,s.useEffect)(function(){t({variables:{replId:n}})},[t,n]),o=(0,D.h)(eC),(0,f.Xt)({variables:{input:{buildId:null!=o?o:""}},skip:!o,onData:r,onError:function(e){i(e.message)}}),null}function eD(){var e=(0,O.A)(),n=eb(),t=(0,D.ob)(k.I);return(0,s.useCallback)(function(){return t(E.d.Loading),n({variables:{replId:e}})},[n,t,e])}var eE=(0,d.eU)(null,function(e,n,t){n(em,t)}),eR=(0,d.eU)(null,function(e,n,t){var r,i=t.deployHostingBuild2;if(i){if("DeployHostingBuild2Result"!==i.__typename)return void n(eE,i.message);n(ef,i.build),n(J,i.targetDeployment.id),n(X,i.targetDeployment.timeCreated),n(ee,null!=(r=i.targetDeployment.replitAppSubdomain)?r:void 0),n(k.I,E.d.Deploying)}}),eI=(0,d.eU)(null,function(e,n,t){var r,i=t.rollbackHostingBuild;if(i){if("RollbackHostingBuildResult"!==i.__typename)return void n(eE,i.message);n(ef,i.build),n(J,i.targetDeployment.id),n(X,i.targetDeployment.timeCreated),n(ee,null!=(r=i.targetDeployment.replitAppSubdomain)?r:void 0),n(k.I,E.d.Deploying)}});function eT(e){var n=e.provider,t=e.ignorePorts;switch(n){case m.Q0q.Static:return m.JX5.Static;case m.Q0q.CloudRun:return m.JX5.CloudRun;case m.Q0q.Cron:return m.JX5.Cron;default:return t?m.JX5.Worker:m.JX5.Server}}function eF(){var e,n,t,u,d,S,Y=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).openDeploymentsPane,_=(0,O.A)(),A=(0,N.R)(_).orgId,C=(0,p.m)(),P=Q(),L=(0,D.h)(X),B=j(),z=(0,D.h)(H),W=V(),G=Z(),q=(0,a._)((0,f.B2)(),1)[0],K=(0,D.ob)(eR),$=(0,D.ob)(eE),J=(0,D.ob)(eI),ee=(0,D.ob)(k.I),en=(0,D.Ou)(ef),et=ep(),er=(0,a._)((0,h.Bg)(),1)[0],ei=(0,w.GK)().database,eo=(0,w.UK)().database,ea=(0,x.TO)(),el=ea.state,es=ea.dispatch,ec=(e=(0,x.TO)().dispatch,n=(0,D.ob)(k.I),{requiresDatabasePreparation:(0,R.I)(function(t){var i;return i=(0,r._)(function(r){var i,o,a,s,c,u;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(i=r.neonDevelopmentDatabase,o=r.neonProductionDatabase,a=r.deployConfig,s=r.deployInputOptions,c=r.context,!i)throw Error("Neon development database not found.");return[4,t.prepareDatabaseMigrations.hasDiff.rpc({sourceConnectionString:i.connectionString,targetConnectionString:null==o?void 0:o.connectionString})];case 1:if(!(u=l.sent()).ok)throw Error("Failed to check for database diff: ".concat(u.payload.message));if(u.payload.hasDiff)return n(E.d.PreparingDatabase),e({type:"INIT",deployOptions:{deployConfig:a,deployInputOptions:s,context:c}}),[2,!0];return[2]}})}),function(e){return i.apply(this,arguments)}},[n,e])}).requiresDatabasePreparation,eu=(0,T.n)(),ed=(0,w.Jo)("production").refetch,eh=(0,U.A)(A),em=eh.requirePrivateDeployments,eg=eh.adminOnlyPublicDeployments,ev=eh.isAdmin,ey=em||!ev&&eg,ew=(0,s.useCallback)(function(e,n){K(e),n&&!eo&&ed()},[K,ed,eo]),eb=(0,s.useCallback)((t=(0,r._)(function(e){var n,t,r,i,o,a,s,u,d,p,f,h,w,S,A,C,k,x,D,R;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.envVars,t=e.subdomain,r=e.machineConfigurationId,i=e.maxMachineInstances,o=e.config,a=e.machineJob,s=e.isPrivate,u=e.hasAgentSession,d=e.ignoredSecrets,p=e.createNeonProductionDatabase,en())return $("Deployment already in progress"),[2];l.label=1;case 1:if(l.trys.push([1,7,,8]),f=o.buildCommand,h=o.runCommand,w=o.publicDir,S=o.ignorePorts,!(A=et?eT({provider:null==et?void 0:et.provider,ignorePorts:!!S}):o.appType))throw new b.Kb;if(!t)throw new b.kZ;switch(A){case m.JX5.Static:if(!(0,y.mU)(w))throw new b.uF;break;case m.JX5.Worker:case m.JX5.Server:case m.JX5.CloudRun:case m.JX5.Cron:if(!(0,y.mU)(h))throw new b.kS;if(A===m.JX5.Cron){if(!(null==a?void 0:a.crontab)||""===a.crontab)throw new b.f_("Schedule cannot be empty.");if(!(0,c.isValidCron)(a.crontab))throw new b.f_("Invalid schedule. Must be a valid cron expression.");if(!(null==a?void 0:a.timezone)||""===a.timezone)throw new b.xF("Timezone cannot be empty.");if(!(0,v._j)(a.timezone))throw new b.xF("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,g.A)(A)}if(ee(E.d.Preparing),C=eu&&p,k=(0,I.b3)(A),x={replId:_,targetDeploymentId:P,targetMachineConfigurationId:r,maxMachineInstances:i,commands:{build:f,run:h||""},envVars:n,subdomain:t,provider:k,appType:A,context:"workspace",machineJob:a,isPrivate:s||ey,hasAgentSession:u,ignoredSecretKeys:d,createNeonProductionDatabase:C},!(C&&ec))return[3,3];return[4,ec({neonDevelopmentDatabase:ei,neonProductionDatabase:eo,deployInputOptions:x,deployConfig:o,context:"deployBuild"})];case 2:if(l.sent())return Y&&Y(),[2];l.label=3;case 3:return[4,(0,F.XE)(B)];case 4:return D=l.sent(),[4,(0,F.FR)({buildCommand:f,runCommand:h,appType:A,publicDir:w,ignorePorts:S},D,{dotReplit:B,fs:W,container:z})];case 5:return l.sent(),[4,q({variables:{input:x},onCompleted:function(e){return ew(e,C)}})];case 6:return l.sent(),[3,8];case 7:throw R=l.sent(),ee(E.d.Ready),R;case 8:return[2]}})}),function(e){return t.apply(this,arguments)}),[q,$,ee,en,ec,ew,Y,P,_,eo,ei,z,W,B,et,ey,eu]),eS=(0,F.Gx)({secrets:G,replId:_});return{deployBuild:eb,redeployWithNoNewOptions:(0,s.useCallback)((u=(0,r._)(function(e){var n,t,r,i,o,s,c,u,d,p,f,h,w;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.hasAgentSession,en())return $("Deployment already in progress"),[2];l.label=1;case 1:return l.trys.push([1,8,,9]),ee(E.d.Preparing),[4,eS()];case 2:return t=l.sent(),[4,function(e){return M.apply(this,arguments)}({deploymentTimeCreated:L,buildTimeCreated:null==et?void 0:et.timeCreated,ignoreSecretsUntil:v.dz,replId:_,apolloClient:C})];case 3:var S,A,k,x,D;return r=l.sent(),A=(S={currentBuildVars:null==et?void 0:et.envVars,workspaceSecrets:t,ignoredSecretKeys:r}).currentBuildVars,k=S.workspaceSecrets,x=S.ignoredSecretKeys,D=new Map((null==A?void 0:A.map(function(e){return[e.name,e.value]}))||[]),k&&k.forEach(function(e){var n=e.name,t=e.value;x.includes(n)||D.set(n,t)}),i=Array.from(D.entries()).map(function(e){var n=(0,a._)(e,2);return{name:n[0],value:n[1]}}),[4,(0,F.XE)(B)];case 4:if(s=(o=l.sent()).buildCommand,c=o.runCommand,u=o.publicDir,d=o.ignorePorts,!P)throw new b.z7;if(!et)throw new b.bf;if(!(p=eT({provider:et.provider,ignorePorts:!!d})))throw new b.Kb;switch(p){case m.JX5.Static:if(!(0,y.mU)(u))throw new b.uF;break;case m.JX5.Worker:case m.JX5.Server:case m.JX5.CloudRun:case m.JX5.Cron:if(!(0,y.mU)(c))throw new b.kS;break;default:(0,g.A)(p)}if(f=eu&&!!eo,h={replId:_,targetDeploymentId:P,commands:{build:s,run:c||""},provider:(0,I.b3)(p),appType:p,envVars:i,context:"workspace",isPrivate:et.isPrivate,hasAgentSession:n,ignoredSecretKeys:r,createNeonProductionDatabase:f},!(f&&ec))return[3,6];return[4,ec({neonDevelopmentDatabase:ei,neonProductionDatabase:eo,deployConfig:o,deployInputOptions:h,context:"redeployWithNoNewOptions"})];case 5:if(l.sent())return Y&&Y(),[2];l.label=6;case 6:return[4,q({variables:{input:h},onCompleted:function(e){return ew(e,f)}})];case 7:return l.sent(),[3,9];case 8:throw w=l.sent(),ee(E.d.Ready),w;case 9:return[2]}})}),function(e){return u.apply(this,arguments)}),[q,$,ee,en,eS,ec,ew,Y,P,_,eo,ei,B,et,L,C,eu]),approveAndDeployDatabaseChanges:(0,s.useCallback)((d=(0,r._)(function(e){var n,t,r,a,s,c,u;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.prepareDatabaseStateId,t=e.sqlStatementsToExecute,!eu)return[2];if(es({type:"APPROVE_DIFF_STATEMENTS"}),el.id!==n)return $("Preparing database state ID does not match current preparing database state ID"),[2];if(!(r=el.deployOptions))return $("No deploy option found in preparing database state"),[2];if(en())return $("Deployment already in progress"),[2];if(a=r.deployConfig,s=r.deployInputOptions,"deployBuild"!==r.context)return[3,3];return[4,(0,F.XE)(B)];case 1:return c=l.sent(),[4,(0,F.FR)(a,c,{dotReplit:B,fs:W,container:z})];case 2:l.sent(),l.label=3;case 3:return l.trys.push([3,5,,6]),[4,q({variables:{input:(0,o._)((0,i._)({},s),{sqlStatementsToExecute:t})},onCompleted:function(e){return ew(e,!0)}})];case 4:return l.sent(),[3,6];case 5:throw u=l.sent(),ee(E.d.Ready),u;case 6:return[2]}})}),function(e){return d.apply(this,arguments)}),[q,ee,en,es,$,ew,z,B,W,el,eu]),rollbackToPreviousBuild:(0,s.useCallback)((S=(0,r._)(function(e){var n,t,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:if(n=e.rollbackCandidateBuildId,t=e.envVars,en())return $("Deployment already in progress"),[2];i.label=1;case 1:if(i.trys.push([1,3,,4]),!n)throw new b.hX;if(!P)throw new b.z7;return ee(E.d.Preparing),[4,er({variables:{input:{targetDeploymentId:P,rollbackCandidateBuildId:n,replId:_,envVars:t}},onCompleted:J})];case 2:return i.sent(),[3,4];case 3:throw r=i.sent(),ee(E.d.Ready),r;case 4:return[2]}})}),function(e){return S.apply(this,arguments)}),[er,J,$,ee,P,_,en])}}var eP=(0,d.eU)(null,function(){var e=(0,r._)(function(e,n,t){var r,a,s,c,d,p,f,h;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(r=t.args,a=t.replId,s=void 0,(c=r.command)===m.jPZ.UpdateMachineConfiguration){if(!(d=e(ed)))return n(eE,"No current build found"),[2];if(!r.machineConfigurationId)return n(eE,"No machine configuration found"),[2];(p=(0,I.oG)(c))&&(n(ed,(0,u.jM)(d,function(e){e.status=p})),n(k.I,(0,I.$0)(p)))}if(c===m.jPZ.Resume||c===m.jPZ.Suspend){if(!(f=e(ed)))return n(eE,"No current build found"),[2];s=f.id,(h=(0,I.oG)(c))&&(n(ed,(0,u.jM)(f,function(e){e.status=h})),n(k.I,(0,I.$0)(h)))}l.label=1;case 1:return l.trys.push([1,3,,4]),[4,function(e){return Y.apply(this,arguments)}((0,o._)((0,i._)({},r),{buildId:s,replId:a}))];case 2:return l.sent(),c===m.jPZ.Destroy&&n(ev),[3,4];case 3:return n(eE,l.sent().message),[3,4];case 4:return[2]}})});return function(n,t,r){return e.apply(this,arguments)}}());function eL(){var e,n=(0,O.A)(),t=(0,D.ob)(eP);return(0,s.useCallback)((e=(0,r._)(function(e){return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,t({replId:n,args:e})];case 1:return r.sent(),[2]}})}),function(n){return e.apply(this,arguments)}),[t,n])}var eU=(0,d.eU)(null,function(){var e=(0,r._)(function(e,n){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if(!(t=e(J)))return n(eE,"No deployment found"),[2];if(!(r=e(ef)))return n(eE,"No deployment in progress found"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(e){return _.apply(this,arguments)}({buildId:r.id,targetDeploymentId:t})];case 2:return o.sent(),[3,4];case 3:return n(eE,o.sent().message),[2];case 4:if(n(ef,void 0),n(k.I,E.d.Ready),(i=e(ed))&&(i.status===m.nHS.Success||i.status===m.nHS.Failed))return[2];return n(ed,(0,u.jM)(r,function(e){e.status=m.nHS.Failed})),[2]}})});return function(n,t){return e.apply(this,arguments)}}());function eN(){return(0,D.ob)(eU)}},30445:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M12.949 2.93a5.75 5.75 0 0 1 8.13 8.131l-.009.01-3 3a5.749 5.749 0 0 1-8.67-.622.75.75 0 1 1 1.2-.898 4.251 4.251 0 0 0 6.41.459l2.995-2.995a4.25 4.25 0 0 0-6.01-6.01l-1.716 1.707a.75.75 0 1 1-1.058-1.064l1.728-1.717ZM7.986 8.609a5.75 5.75 0 0 1 6.615 1.943.75.75 0 1 1-1.202.898 4.251 4.251 0 0 0-6.409-.459l-2.995 2.996a4.25 4.25 0 0 0 6.01 6.009l1.705-1.705a.75.75 0 0 1 1.06 1.06l-1.719 1.72a5.75 5.75 0 0 1-8.13-8.131l.009-.01 3-3a5.75 5.75 0 0 1 2.056-1.321Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M3.776 5.908a.75.75 0 0 1 .918-.53l2.173.582A.75.75 0 0 1 6.48 7.41l-2.173-.582a.75.75 0 0 1-.53-.919ZM9.194 5.417a.75.75 0 0 1-.918-.53l-.583-2.173a.75.75 0 0 1 1.45-.388l.581 2.173a.75.75 0 0 1-.53.918ZM20.225 18.194a.75.75 0 0 1-.92.53l-2.172-.582a.75.75 0 1 1 .388-1.449l2.173.582a.75.75 0 0 1 .53.92ZM14.806 18.684a.75.75 0 0 1 .919.53l.582 2.174a.75.75 0 1 1-1.45.388l-.581-2.173a.75.75 0 0 1 .53-.919Z",clipRule:"evenodd"})]}))}},30819:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(12694),i=t(21462),o=t(80478),a=t(71424);function l(){var e=(0,a.A)().toolchain,n=(0,r._)((0,i.useState)(null),2),t=n[0],l=n[1];return(0,i.useEffect)(function(){var n=!1;return e.getRegistry().then(function(e){n||l(e)}).catch(function(e){o.vF.error("Toolchain: failed to get module registry: ".concat(e.message))}),function(){n=!0}},[e]),t}},30938:(e,n,t)=>{"use strict";t.d(n,{GK:()=>D,VP:()=>E,qX:()=>x});var r=t(29935),i=t(37743),o=t(41292),a=t(88967),l=t(58075),s=t(73238),c=t(6132),u=t(48122),d=t(17844),p=t(93629),f=t(12694),h=t(82643),m=t(21462),g=t(48686),v=t(93188),y=t(13353),w=t(54682),b=t(30267),S=new WeakMap,Y=new WeakMap,_=new WeakMap,A=new WeakSet,C=function(){function e(n){var t,s=n.navigateIframeRef,u=n.onReceiveWebviewLog,d=n.onReceiveWebviewScreenshot;(0,i._)(this,e);var p=this;(0,c._)(this,A),(0,a._)(this,S,{writable:!0,value:void 0}),(0,a._)(this,Y,{writable:!0,value:void 0}),(0,a._)(this,_,{writable:!0,value:void 0}),(0,l._)(this,Y,[]),(0,l._)(this,S,new v.V_(function(e){var n=function(n){return(0,b.Cw)(n,function(n){return e.next(n.paneResponse)})};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}})),(0,o._)(this,Y).push((0,o._)(this,S).subscribe((t=(0,r._)(function(e){var n,t,r;return(0,h.YH)(this,function(i){switch(i.label){case 0:if("webview"!==e.paneType||"navigation"!==e.response.type)return[3,4];if("base"in e.response&&"path"in e.response&&"port"in e.response||(null==(n=(0,o._)(p,_))?void 0:n.path)===e.response.path)return[3,2];return(0,l._)(p,_,{base:"",path:e.response.path,port:80}),[4,null==(t=s.current)?void 0:t.call(s,(0,o._)(p,_).path,(0,o._)(p,_).port)];case 1:return i.sent(),[2];case 2:var a,c;if(a=(0,o._)(p,_),c=e.response,a&&c&&a.base===c.base&&a.path===c.path&&a.port===c.port)return[3,4];return(0,l._)(p,_,e.response),[4,null==(r=s.current)?void 0:r.call(s,(0,o._)(p,_).path,(0,o._)(p,_).port)];case 3:i.sent(),i.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}))),(0,o._)(this,Y).push((0,o._)(this,S).subscribe(function(e){"webview"===e.paneType&&"logs"===e.response.type&&u(e.response.method,e.response.message.map(function(e){try{return JSON.stringify(e,null,0)}catch(e){return"Devtools error: console message could not be stringified"}}).join(" "))})),(0,o._)(this,Y).push((0,o._)(this,S).subscribe(function(e){"webview"===e.paneType&&"screenshot"===e.response.type&&d(e.response.dataUri)}))}var n=e.prototype;return n.dispose=function(){(0,o._)(this,Y).forEach(function(e){return e()})},n.refresh=function(){(0,s._)(this,A,k).call(this,{type:"refresh"})},n.setInsets=function(e){(0,s._)(this,A,k).call(this,{type:"setInsets",insets:e})},n.handleNavigateTo=function(e){var n,t,r,i,a,l,c,u,f;if(e.base===(null==(n=(0,o._)(this,_))?void 0:n.base)&&e.port===(null==(t=(0,o._)(this,_))?void 0:t.port)&&e.path===(null==(r=(0,o._)(this,_))?void 0:r.path))return void this.refresh();(0,s._)(this,A,k).call(this,(0,p._)((0,d._)({type:"navigate"},e),{url:(l=e.base,c=null!=(i=e.path)?i:"/",u=null!=(a=e.port)?a:80,(f=new URL(l)).pathname=c.startsWith("/")?c:"/".concat(c),80!==u&&(f.port=u.toString()),f.toString())}))},(0,u._)(e,[{key:"path",get:function(){return(0,o._)(this,S).filter(function(e){return"webview"===e.paneType&&"navigation"===e.response.type}).select(function(e){return e.response.path})}}]),e}();function k(e){var n={messageType:y.tF.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:e}};(0,b._z)(n,(0,g.Ak)())}function x(){var e=(0,w.Dr)("webviewBridge"),n=(0,w.Dr)("workspace2");return(0,m.useMemo)(function(){return e&&n},[e,n])}function D(e){var n=e.initialPort,t=e.initialPath,r=e.baseUrl,i=e.isSupported,o=e.navigateIframeRef,a=e.onReceiveWebviewLog,l=e.onReceiveWebviewScreenshot,s=(0,f._)((0,m.useState)(null),2),c=s[0],u=s[1];(0,m.useEffect)(function(){if(i){var e=new C({navigateIframeRef:o,onReceiveWebviewLog:a,onReceiveWebviewScreenshot:l});return u(e),function(){e.dispose()}}},[i,o,a,l]);var d=(0,m.useRef)(void 0);return(0,m.useEffect)(function(){i&&c&&r&&d.current!==n&&(d.current=n,c.handleNavigateTo({base:r,port:n,path:t}))},[r,c,t,n,i]),c}function E(e){var n=e.isVisible,t=x();(0,m.useEffect)(function(){t&&((0,b._z)({messageType:y.tF.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:{type:"setVisibility",isVisible:n}}},(0,g.Ak)()),n||(0,b._z)({messageType:y.tF.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:{type:"navigate",base:"",url:"INVALID_URL_TO_HIDE_NATIVE_WEBVIEW"}}},(0,g.Ak)()))},[t,n])}},31083:(e,n,t)=>{"use strict";t.d(n,{DO:()=>v,D_:()=>p,Md:()=>u,Wt:()=>f,h0:()=>d,hK:()=>l,i_:()=>s,o2:()=>h,sC:()=>w,sh:()=>m,tH:()=>g,uu:()=>y});var r=t(76957),i=t(9604),o=t(42793),a=t(36937),l=[1,2,3,4,5,6,7,8,9,10],s=l.length-1,c=1/(2*s),u=(0,r.eU)(2),d=(0,r.eU)(function(e){return l[e(u)]}),p=(0,r.eU)(function(e){return(e(i.Je)*e(d)).toFixed(6)}),f=(0,r.eU)(function(e){return e(i.GS)*e(d)}),h=(0,r.eU)(0),m=(0,r.eU)(function(e){var n=0/s,t=l.length-1/s,r=0,i=0;return e(h)<n&&(r=(n-e(h))/c,i=n-c),e(h)>t&&(r=(e(h)-t)/c,i=t+c),{overage:r,point:i}}),g=function(e){return e.None="0ms",e.Normal="120ms",e}({}),v=["ArrowLeft","ArrowRight","Home","End"],y=(0,o.AH)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),w=(0,o.AH)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:a.LU.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(a.LU.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}})},31571:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.026 3.243c-.245.269-.388.756-.388 1.767v3.083c0 .922-.208 1.894-.948 2.72-.429.48-1.006.876-1.751 1.187.745.312 1.323.708 1.752 1.189.74.828.947 1.803.947 2.729V19c0 1.005.142 1.49.388 1.756.232.254.732.493 1.974.493a.75.75 0 0 1 0 1.5c-1.346 0-2.403-.241-3.08-.978-.663-.723-.782-1.738-.782-2.77v-3.084c0-.7-.153-1.268-.566-1.73-.426-.478-1.22-.946-2.717-1.24a.75.75 0 0 1-.605-.737v-.422a.75.75 0 0 1 .605-.736c1.497-.295 2.291-.764 2.717-1.24.413-.462.566-1.026.566-1.72V5.01c0-1.038.119-2.056.782-2.78.677-.739 1.734-.98 3.08-.98a.75.75 0 0 1 0 1.5c-1.242 0-1.741.24-1.974.493ZM14.25 2a.75.75 0 0 1 .75-.75c1.346 0 2.403.241 3.08.98.663.724.782 1.742.782 2.78v3.083c0 .694.153 1.258.566 1.72.426.476 1.22.945 2.717 1.24a.75.75 0 0 1 .605.736v.422a.75.75 0 0 1-.605.736c-1.497.295-2.291.763-2.717 1.24-.413.463-.566 1.03-.566 1.73v3.084c0 1.033-.12 2.048-.783 2.771-.677.737-1.733.978-3.079.978a.75.75 0 0 1 0-1.5c1.242 0 1.742-.24 1.974-.492.246-.268.388-.752.388-1.757v-3.083c0-.926.208-1.901.947-2.73.43-.48 1.007-.876 1.752-1.188-.745-.311-1.322-.707-1.751-1.187-.74-.826-.948-1.798-.948-2.72V5.01c0-1.011-.142-1.498-.388-1.767-.233-.254-.732-.493-1.974-.493a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},31855:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M1 6.359C1 3.399 3.4 1 6.359 1h11.282C20.601 1 23 3.4 23 6.359v11.282C23 20.601 20.6 23 17.641 23H6.359C3.399 23 1 20.6 1 17.641V6.359Zm5.359-3.667A3.667 3.667 0 0 0 2.692 6.36v11.282a3.667 3.667 0 0 0 3.667 3.667h11.282a3.667 3.667 0 0 0 3.667-3.667V6.359a3.667 3.667 0 0 0-3.667-3.667H6.359Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M10.65 10.73H6.536V9.708h1.59v-3.96h-.075L6.85 7.32l-.812-.635L7.45 4.825h1.946v4.882h1.252v1.024ZM15.723 10.832c-1.582 0-2.31-1.125-2.31-3.054 0-1.93.728-3.055 2.31-3.055s2.31 1.125 2.31 3.055c0 1.929-.728 3.054-2.31 3.054Zm0-.998c.753 0 1.015-.567 1.015-1.506v-1.1c0-.94-.262-1.506-1.015-1.506-.753 0-1.015.566-1.015 1.506v1.1c0 .939.262 1.506 1.015 1.506Zm0-1.557c-.39 0-.525-.178-.525-.406v-.186c0-.229.136-.407.525-.407.39 0 .525.178.525.407v.186c0 .228-.136.406-.525.406ZM8.28 19.294c-1.582 0-2.31-1.125-2.31-3.055 0-1.929.728-3.054 2.31-3.054 1.583 0 2.31 1.125 2.31 3.054 0 1.93-.727 3.055-2.31 3.055Zm0-.999c.753 0 1.016-.567 1.016-1.506v-1.1c0-.939-.263-1.506-1.016-1.506s-1.015.567-1.015 1.506v1.1c0 .94.262 1.506 1.015 1.506Zm0-1.557c-.389 0-.524-.177-.524-.406v-.186c0-.228.135-.406.524-.406.39 0 .525.178.525.406v.186c0 .229-.136.406-.525.406ZM18.092 19.192H13.98V18.17h1.59v-3.96h-.075l-1.202 1.573-.812-.634 1.413-1.862h1.946v4.883h1.252v1.023Z"})]}))}},32055:(e,n,t)=>{"use strict";t.d(n,{H:()=>l});var r=t(12694),i=t(87079),o=t(71355),a=t(67917);function l(){var e=(0,r._)((0,i.Ko)({fetchPolicy:"network-only",ssr:!1}),1)[0];(0,a.zv)("received-completed-event",function(n){var t,r=n.event.contents.contents;(0,o.VF)(r,"agentTimelineEventContents")&&(null==(t=r.agentTimelineEventContents.toolData)?void 0:t.$kind)==="commitData"&&e()})}},32130:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(29935),i=t(17459),o=t(82643),a=t(35651),l=t(6164),s=function(e){return e.CHANNEL_OPENED="CHANNEL_OPENED",e.OUTPUT_RECEIVED="OUTPUT_RECEIVED",e.STDERR_RECEIVED="STDERR_RECEIVED",e.STATE_CHANGED="STATE_CHANGED",e}({});function c(e){var n,t=e.container,c=(0,l.Ay)(),u=null,d=!1;function p(){return(p=(0,r._)(function(){return(0,o.YH)(this,function(e){if(d)throw Error("closed");return u?[2,u]:[2,new Promise(function(e){c.once(s.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}var f="",h="",m=t.openChannel({service:"exec"},function(e){var n=e.channel,t=!1;return n.onCommand(function(e){if(null!=e.output)f+=e.output,c.emit(s.OUTPUT_RECEIVED,e.output);else if(null!=e.stderr)h+=e.stderr,c.emit(s.STDERR_RECEIVED,e.stderr);else if(null!=e.state){if(!t){t=!0;return}c.emit(s.STATE_CHANGED,{state:e.state,outputBuffer:f,stderrBuffer:h}),e.state===a.api.State.Stopped&&(f="",h="")}}),u=n,c.emit(s.CHANNEL_OPENED,n),function(){u=null}});return{request:(n=(0,r._)(function(e){var n,t,r,l,s,c,u,d,f,h;return(0,o.YH)(this,function(o){switch(o.label){case 0:return n=e.env,t=e.args,l=void 0===(r=e.lifecycle)?a.api.Exec.Lifecycle.NON_BLOCKING:r,c=void 0!==(s=e.splitStderr)&&s,u=e.noUserEnv,d=(0,i._)(e,["env","args","lifecycle","splitStderr","noUserEnv"]),[4,function(){return p.apply(this,arguments)}()];case 1:return h=(f=o.sent()).request({exec:{env:n,args:t,lifecycle:l,splitStderr:c,noUserEnv:null!=u&&u}}),l===a.api.Exec.Lifecycle.STDIN&&"stdin"in d&&(f.send({input:d.stdin}),f.send({inputClose:{}})),[2,h]}})}),function(e){return n.apply(this,arguments)}),onOutput:function(e){return c.on(s.OUTPUT_RECEIVED,e),function(){c.off(s.OUTPUT_RECEIVED,e)}},onStderr:function(e){return c.on(s.STDERR_RECEIVED,e),function(){c.off(s.STDERR_RECEIVED,e)}},onStateChanged:function(e){return c.on(s.STATE_CHANGED,e),function(){c.off(s.STATE_CHANGED,e)}},getStatus:function(){return u?u.status:"closed"},dispose:function(){d=!0,m(),u=null}}}},32332:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(81073),i=t(7368),o=t(18509),a=t(27023),l=t(49591),s=t(36075),c=t(4616),u=t(85389),d=(0,o.x)({overlay:[a.wp.position.fixed,a.wp.flex.row,a.wp.align.center,a.wp.justify.center,a.wp.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:a.r1+1,cursor:"not-allowed"}],animationWrapper:[a.wp.center,a.wp.minWidth(225),a.wp.height(225),a.wp.p(16),a.wp.color.foregroundDefault,a.wp.borderRadius(8),a.wp.backgroundColor.backgroundOverlay,a.wp.zIndex(a.r1+1),{cursor:"not-allowed"}],lockText:a.wp.mt(32)});function p(e){var n=e.reason;return(0,r.Y)(s.Z,{children:(0,r.Y)(u.S,{css:d.overlay,children:(0,r.Y)(i.Ay,{children:(0,r.FD)(u.S,{css:d.animationWrapper,tabIndex:-1,children:[(0,r.Y)(l.A,{height:80}),(0,r.Y)(c.EY,{multiline:!1,variant:"subheadBig",css:d.lockText,dataCy:"lock-screen",children:n})]})})})})}},32398:(e,n,t)=>{"use strict";t.d(n,{k:()=>a});var r=t(90629),i=t(8950),o=t(67917);function a(){(0,o.zv)("agent-state-changed",function(e){var n,t,o,a;r.ZQ({category:"chatter",message:"Agent state changed to ".concat((o=function(e){switch(e){case i.g32.AGENT_STATE_NOT_STARTED:return"Not started";case i.g32.AGENT_STATE_PAUSED:return"Paused";case i.g32.AGENT_STATE_PAUSING:return"Pausing";case i.g32.AGENT_STATE_RUNNING:return"Running";case i.g32.AGENT_STATE_UNKNOWN:default:return"Unknown"}}((n=e.state).state),a=null==(t=n.reason)?void 0:t.$kind,"".concat(o," (reason: ").concat(a,")"))),level:"info"})}),(0,o.zv)("client-created-session",function(e){r.ZQ({category:"chatter",message:"Client created ".concat(function(e){switch(e){case i.dF3.CHAT:return"Assistant";case i.dF3.INLINE_CHAT:return"Assistant (inline)";case i.dF3.AGENT_SESSION:return"Agent";default:return"Unknown"}}(e.request.sessionType)," session ").concat(e.session.id),data:e.request,level:"info"})}),(0,o.zv)("client-updated-session",function(e){r.ZQ({category:"chatter",message:"Client updated session ".concat(e.session.id),data:e.request,level:"info"})}),(0,o.zv)("session-graph-fetched",function(e){r.ZQ({category:"chatter",message:"Session graph fetched for session ".concat(e.session.id," (size: ").concat(e.size,")"),level:"info"})}),(0,o.zv)("unexpected-disconnect",function(e){r.ZQ({category:"chatter",message:"Unexpected disconnect: ".concat(e.error.message),level:"error"})}),(0,o.zv)("unhandled-exception",function(e){r.ZQ({category:"chatter",message:"Unhandled exception: ".concat(e.error.message),data:e.error,level:"error"})})}},32728:(e,n,t)=>{"use strict";t.d(n,{z:()=>o});var r=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function o(e,n){var t,o=n||{},a=o.signed,l=o.digitsNumber,s=o.isKib,c=o.isKibNotation;if(t=void 0!==a&&a?e<0?"-":"+":"",0===e)return"".concat(t,"0B");var u=void 0===s||s?1024:1e3,d=Math.floor(Math.log(Math.abs(e))/Math.log(u));return"".concat(t).concat(parseFloat(Math.abs(e/Math.pow(u,d)).toFixed(void 0===l?2:l))).concat((void 0!==c&&c?r:i)[d])}},32852:(e,n,t)=>{"use strict";t.d(n,{Ai:()=>p,Ot:()=>h,PY:()=>s,UK:()=>f,ob:()=>d,uB:()=>c});var r=t(12694),i=t(21462),o=t(76957),a=t(79203),l=t(26325);function s(){return(0,r._)((0,i.useState)(function(){return(0,o.y$)()}),1)[0]}var c=(0,i.createContext)(null);function u(){var e=(0,i.useContext)(c);if(!e)throw Error("Expected store in context");return e}var d=function(e){return(0,a.Xr)(e,{store:u()})},p=(0,o.eU)(null);function f(){return(0,a.md)(p,{store:u()})}function h(){return(0,l.yF)((0,i.useCallback)(function(e){return e(p)},[p]),{store:u()})}},32920:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>v,fq:()=>w,pi:()=>m});var r=t(12694),i=t(81073),o=t(21462),a=t(46217),l=t(71514),s=t(52870),c=t(4083),u=t(18509),d=t(27023),p=t(30124),f=t(40259),h=t(4616),m=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],g=(0,u.x)({sizeInput:[d.wp.py(6),d.wp.flex.growAndShrink(0),{border:"none"}]});function v(){var e=(0,l.g)("indentDetection","indentFormatPastes","indentIsSpaces","indentSize"),n=e.preferences,t=e.update;return(0,i.FD)(i.FK,{children:[(0,i.Y)(s.n,{setting:a.KY.indentationDetection,currentValue:n.indentDetection,update:t}),(0,i.Y)(p.a,{}),(0,i.Y)(s.n,{setting:a.KY.indentFormatPastes,currentValue:n.indentFormatPastes,update:t}),(0,i.Y)(p.a,{}),(0,i.Y)(s.n,{setting:a.KY.indentIsSpaces,currentValue:n.indentIsSpaces,update:t}),(0,i.Y)(p.a,{}),(0,i.Y)(c.w,{id:"indentSize",title:(0,i.FD)(i.FK,{children:[(0,i.Y)(h.EY,{multiline:!1,children:"Indentation Size"}),(0,i.Y)(h.EY,{variant:"small",color:"dimmest",children:"The number of columns taken up by an indentation level."})]}),children:(0,i.Y)(w,{css:g.sizeInput,size:n.indentSize,onChange:function(e){t({indentSize:e})}})})]})}function y(e){return null==e||("string"==typeof e&&(e=parseInt(e,10)),isNaN(e))?2:(Number.isInteger(e)||(e=Math.round(e)),e<1)?1:e>16?16:e}function w(e){var n=e.size,t=e.onChange,a=e.className,l=(0,r._)((0,o.useState)(null),2),s=l[0],c=l[1],u=null!==s?s:n.toString(),d=""===u?"6ch":u.length+5.5+"ch";return(0,i.Y)(f.pd,{type:"number",style:{width:d},className:a,min:1,max:16,value:u,onBlur:function(){return c(null)},onChange:function(e){var n=e.target.value.trim(),r=e.target.valueAsNumber;if(""===n||isNaN(r))return void c(n);e.target.validity.valid?(c(null),t(y(r))):(c(n),""===n||isNaN(parseInt(n,10))||t(y(n)))}})}},33231:(e,n,t)=>{"use strict";t.d(n,{v:()=>_,A:()=>Y});var r=t(17844),i=t(12694),o=t(96907),a=t.n(o),l=t(67201),s=t(32130),c=t(37872),u=t(17459),d=t(90629),p=t(69406),f=t(4180),h="exit status 1",m=t(29935),g=t(86105),v=t(82643),y=t(11602);function w(){return(w=(0,m._)(function(e){var n,t,r,i,o,a,l;return(0,v.YH)(this,function(s){switch(s.label){case 0:if(t=e.container,0===(r=(0,u._)(e,["container"])).query.trim().length)return[2,b(f.F.EMPTY_QUERY)];if(t.getConnectionState()===y.KN.DISCONNECTED)return[2,b(f.F.CONTAINER_DISCONNECTED)];if(t.getConnectionState()===y.KN.CONNECTING)return[2,b(f.F.CONTAINER_CONNECTING)];return[4,(n=t).exec.apply(n,(0,g._)((0,p.Qq)(r)))];case 1:if(o=(i=s.sent()).output,a=i.error)switch(a){case h:return[2,b(f.F.EMPTY_RESULTS)];case"signal: broken pipe":return[2,b(f.F.PARTIAL_RESULTS)];case"Channel closed":return[2,b(f.F.CHANNEL_CLOSED)];default:return d.Cp(Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}if(!(null==o?void 0:o.trim())||!(l=(0,p.xo)()(o))||0===l.filesMap.size)return[2,b(f.F.EMPTY_RESULTS)];return[2,b(l.error,l.filesMap)]}})})).apply(this,arguments)}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:n}}var S="File Search Used";function Y(e){var n=e.container,t=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,m=e.isStreaming,g=e.trackLatency,v=void 0!==g&&g,y=(0,s.A)({container:n}),w=[],b=(0,l.A)(),Y=Date.now(),_=function(e){i(w=e)};return a()(function(e){var n=(0,l.A)();b=n,Y=Date.now(),t(null),o(!0);var i=!0;if(""===e.query){_([]),o(!1);return}!function(e){var n=e.execer,t=e.onComplete,r=e.onError,i=e.onParse,o=(0,u._)(e,["execer","onComplete","onError","onParse"]);if(0===o.query.length)return t("abort");var a=new TextEncoder,l=(0,p.xo)(),s=0,c=0,m=function(){},g=function(e){r(e),t("error")},v=function(e){if(0===s&&"finished"===e)return void g(f.F.EMPTY_RESULTS);"finished"===e?t(e,{bytes:c}):t(e),m()},y=n.onOutput(function(e){var n=a.encode(e).length;c+=n;var t=l(e);if(t){var r=t.error,o=t.filesMap,u=t.filesMapChanges;r&&g(r),s=o.size,u.forEach(function(e){var n=o.get(e);n&&o.set(e,(0,p.l8)(n))}),i(o,u)}}),w=n.onStderr(function(e){if(e.trim()===h)return g(f.F.EMPTY_RESULTS);g(f.F.INVALID_COMMAND)});m=function(){y(),w()};var b=(0,p.Qq)(o);n.request({args:b,noUserEnv:!0}).then(function(e){if(e.error)return e.error.trim()===h?g(f.F.EMPTY_RESULTS):g(f.F.INVALID_COMMAND);v("finished")}).catch(function(e){return d.Cp(Error("Ripgrep search command failed with error: ".concat(e))),g(f.F.INVALID_COMMAND)})}((0,r._)({execer:y,onComplete:function(r,i){if(b===n){o(!1);var a,l,s,u,d="finished"===r&&i&&i.bytes===p.mj;d&&t(f.F.PARTIAL_RESULTS),v&&c.vF.time("".concat(S," - complete"),Date.now()-Y,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!=(s=null==e||null==(a=e.includeGlobs)?void 0:a.length)?s:0)>0,hasExcludes:(null!=(u=null==e||null==(l=e.excludeGlobs)?void 0:l.length)?u:0)>0,latency:Date.now()-Y,isPartialResults:d})}},onError:function(e){b===n&&t(e)},onParse:function(t,r){if(b===n){if(i){if(v){var a,l,s,u;c.vF.time("".concat(S," - first_chunk"),Date.now()-Y,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!=(s=null==e||null==(a=e.includeGlobs)?void 0:a.length)?s:0)>0,hasExcludes:(null!=(u=null==e||null==(l=e.excludeGlobs)?void 0:l.length)?u:0)>0})}_((0,p.Nn)([],t,r)),i=!1}else _((0,p.Nn)(w,t,r));m&&o(!1)}},mode:"json",context:0},e))},200)}function _(e){var n=e.container,t=a()(function(e,t,o){(function(e){return w.apply(this,arguments)})((0,r._)({container:n,mode:"json",context:1,isCaseSensitive:!1},e)).then(function(e){var n=e.data?function(e){var n={},t=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=(0,i._)(a.value,2),c=s[0],u=s[1];n[c]=u.lines.map(function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map(function(e){return{column:e.start,length:e.length}})}}).filter(function(e){return e.matches.length>0})}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return n}(e.data):{},r=e.error===f.F.PARTIAL_RESULTS;if(r);else if(e.error)return t({error:e.error,results:null,isPartialResult:r});return t({error:null,results:n,isPartialResult:r})}).catch(o)},200);return function(e){return new Promise(function(n,r){return t(e,n,r)})}}},33612:(e,n,t)=>{"use strict";t.d(n,{P:()=>c,g:()=>s});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(94827);function s(e){var n=e.secrets,t=e.replId,l=(0,i._)((0,a.useState)(null),2),s=l[0],u=l[1],d=c({secrets:n,replId:t});return(0,a.useEffect)(function(){function e(){return(e=(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,d()];case 1:return u.apply(void 0,[e.sent()]),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[d]),{devSecrets:s}}function c(e){var n=e.secrets,t=e.replId,s=(0,i._)((0,l.fY)({variables:{replId:t}}),1)[0];return(0,a.useCallback)((0,r._)(function(){var e,t,r,a,l,c,u,d,p,f,h,m,g,v,y,w,b,S,Y;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,n.read()];case 1:return t=o.sent(),r=new Map,[4,s()];case 2:if((null==(a=o.sent().data)?void 0:a.getRepl.__typename)==="Repl"&&a.getRepl.sharedSecretLinks&&(null==(e=a.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"){l=a.currentUser.secrets.items,c=!0,u=!1,d=void 0;try{for(p=function(){var e=h.value,n=l.find(function(n){return n.id===e.secret.id});n&&r.set(e.alias,n.value)},f=a.getRepl.sharedSecretLinks[Symbol.iterator]();!(c=(h=f.next()).done);c=!0)p()}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}m=!0,g=!1,v=void 0;try{for(y=t.entries()[Symbol.iterator]();!(m=(w=y.next()).done);m=!0)S=(b=(0,i._)(w.value,2))[0],Y=b[1],r.set(S,Y)}catch(e){g=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw v}}return[2,r]}})}),[s,n])}},33682:(e,n,t)=>{"use strict";t.d(n,{A:()=>r,b:()=>i});var r=function(e){return e.NOT_READY="NOT_READY",e.READY="READY",e.STALLED="STALLED",e.BROKEN="BROKEN",e}({}),i=function(e){return e.OFFLINE="OFFLINE",e.INITIALIZING="INITIALIZING",e.INITIALIZED="INITIALIZED",e.EXITING="EXITING",e.EXITED="EXITED",e}({})},33778:(e,n,t)=>{"use strict";t.d(n,{T:()=>E});var r=t(17844),i=t(93629),o=t(81073),a=t(8950),l=t(67917),s=t(64912),c=t(73176),u=t(17089),d=t(83846),p=t(11071),f=t(21462);t(75409);var h=t(36937),m=t(18509),g=t(27023),v=t(11769),y=t(85389),w=g.kL.min(400),b=(0,m.x)({root:[g.wp.width("100%")],narrowContainer:[g.wp.flex.column,g.wp.gap(8),g.wp.width("100%"),g.wp.overflowX("auto"),g.wp.scrollbar.hidden,(0,d._)({margin:"0 auto"},w,{display:"none"})],narrowRow:[g.wp.flex.row,g.wp.gap(8),g.wp.width("100%"),{display:"flex",flexWrap:"nowrap",paddingLeft:16,"&::after":{content:'""',width:8,flexShrink:0}}],wideContainer:[g.wp.gap(8),g.wp.width("100%"),(0,d._)({display:"none"},w,{display:"flex",maxWidth:500,flexWrap:"wrap",alignSelf:"center",justifyContent:"center",width:"fit-content"})],button:[g.wp.maxWidth(350),(0,d._)({justifyContent:"flex-start",fontSize:h.LU.fontSizeDefault,color:h.LU.foregroundDimmer,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},w,{width:"auto",justifyContent:"center"})]});function S(e){var n=e.prompts,t=e.onClick,a=(0,f.useMemo)(function(){var e=Math.ceil(n.length/2);return{halfLength:e,firstRow:n.slice(0,e),secondRow:n.slice(e)}},[n]),l=a.halfLength,s=a.firstRow,c=a.secondRow,u=(0,f.useMemo)(function(){return n.slice(0,6)},[n]);return(0,o.FD)(y.S,{css:b.root,children:[(0,o.FD)(y.S,{css:b.narrowContainer,children:[(0,o.Y)(y.S,{css:b.narrowRow,children:s.map(function(e,n){return(0,p.n)(Y,(0,i._)((0,r._)({},e),{index:n,key:e.description,onClick:function(){return t(e)}}))})}),(0,o.Y)(y.S,{css:b.narrowRow,children:c.map(function(e,n){return(0,p.n)(Y,(0,i._)((0,r._)({},e),{index:n+l,key:e.description,onClick:function(){return t(e)}}))})})]}),(0,o.Y)(y.S,{css:b.wideContainer,row:!0,children:u.map(function(e,n){return(0,p.n)(Y,(0,i._)((0,r._)({},e),{index:n,key:e.description,onClick:function(){return t(e)}}))})})]})}function Y(e){(0,l.qK)();var n=void 0,t=null!=n?n:e.description;return(0,o.Y)(v.$n,{css:b.button,text:t,onClick:function(n){e.onClick()},"aria-label":t})}var _=t(55549),A=t(90209),C=t(4616),k=t(13383),x=t(71872),D=(0,m.x)({root:[g.wp.overflowY("auto"),g.wp.flex.growAndShrink(1),g.wp.flex.column,g.wp.align.center,g.wp.width("100%"),{margin:"0 auto",containerType:"inline-size"}],content:[g.wp.flex.column,g.wp.gap(24),g.wp.py(32),g.wp.align.center,g.wp.justify.center,g.wp.width("100%"),g.wp.minHeight("100%"),g.wp.overflowX("auto")],headerSection:[g.wp.maxWidth(320),g.wp.px(8),{textAlign:"center"}],promptSuggestionsContainer:[g.wp.width("100%"),g.wp.overflowX("auto"),g.wp.scrollbar.hidden,g.wp.pb(8)],promptSuggestionsContent:[g.wp.flex.column,g.wp.align.center,g.wp.width("100%"),{maxWidth:"100%"}],headerIcon:[{color:h.LU.outlineStronger}],footerContainer:[g.wp.maxWidth("100%"),g.wp.px(8),{textAlign:"center"}],warning:[g.wp.m(8),g.wp.maxWidth(400),{textAlign:"center"}],warningBox:[g.wp.border({color:h.LU.orangeDimmer}),g.wp.borderRadius(),{backgroundColor:h.LU.orangeDimmest}],warningIconText:[{color:h.LU.orangeStrongest}]});function E(e){var n,t,s,u,d,p=(d=({sessionType:e.sessionType}).sessionType,(0,f.useMemo)(function(){return d===a.dF3.CHAT?[{icon:(0,o.Y)(_.A,{}),description:"Inspect for errors"},{icon:(0,o.Y)(_.A,{}),description:"Improve the visual design"},{icon:(0,o.Y)(_.A,{}),description:"Brainstorm new features"},{icon:(0,o.Y)(_.A,{}),description:"Add dark mode toggle"},{icon:(0,o.Y)(_.A,{}),description:"Optimize for mobile"},{icon:(0,o.Y)(_.A,{}),description:"Explain this code"}]:[{icon:(0,o.Y)(_.A,{}),description:"Check my app for bugs"},{icon:(0,o.Y)(_.A,{}),description:"Add payment processing"},{icon:(0,o.Y)(_.A,{}),description:"Connect with an AI Assistant"},{icon:(0,o.Y)(_.A,{}),description:"Add SMS message sending"},{icon:(0,o.Y)(_.A,{}),description:"Add a database"},{icon:(0,o.Y)(_.A,{}),description:"Add authenticated user login"}]},[d])),h=(n=e.sessionType,t=(0,l.jt)(),s=(0,l.NC)(),u=(0,c.Rj)(function(){return s.sessions.query({types:[a.dF3.CHAT]}).map.select(function(e){return e.size>0})},[s],{default:!0}),n===a.dF3.CHAT&&!!t&&!u);return(0,o.Y)(I,(0,i._)((0,r._)({},e),{showAssistantWarning:h,promptSuggestions:p}))}function R(e){return(0,o.FD)(y.S,{align:"center",gap:8,css:D.warning,children:[(0,o.FD)(y.S,{css:D.warningBox,p:8,children:[(0,o.FD)(y.S,{css:D.warningIconText,row:!0,gap:6,justify:"center",align:"center",children:[(0,o.Y)(x.A,{}),(0,o.Y)(C.EY,{children:"Warning"})]}),(0,o.Y)(C.EY,{children:"Assistant works best for users comfortable with file management and basic troubleshooting."})]}),(0,o.Y)(C.EY,{color:"dimmer",children:"Use Agent for the safest app building experience."}),(0,o.Y)(v.$n,{onClick:e.onSwitchToAgent,iconLeft:(0,o.Y)(A.l,{size:16}),text:"Switch to Agent"})]})}function I(e){var n=e.titleContent,t=e.showPromptSuggestions,r=e.sessionType,i=e.onPromptSuggestionClick,l=e.promptSuggestions,c=e.footerContent,d=e.onSwitchToAgent,p=e.showAssistantWarning,f=r===a.dF3.CHAT,h=f?s.BP:s.g$;return(0,o.Y)(y.S,{css:D.root,children:(0,o.FD)(y.S,{css:D.content,children:[(0,o.FD)(y.S,{css:D.headerSection,gap:16,children:[(0,o.Y)(y.S,{gap:8,align:"center",children:(0,o.FD)(o.FK,{children:[(0,o.Y)(k.A,{size:48,css:D.headerIcon,style:{transform:"scale(1.33)"}}),null!=n?n:(0,o.Y)(y.S,{row:!0,gap:4,align:"center",children:(0,o.Y)(C.Y9,{level:1,variant:"subheadBig",children:"New chat with ".concat(h)})})]})}),p?null:(0,o.Y)(C.EY,{color:"dimmest",children:f?s.C3:s.RB})]}),p&&d?(0,o.Y)(R,{onSwitchToAgent:d}):null,(void 0===t||t)&&!p?(0,o.Y)(y.S,{css:D.promptSuggestionsContainer,pb:8,children:(0,o.Y)(y.S,{css:D.promptSuggestionsContent,children:(0,o.Y)(S,{onClick:function(e){var n,t=null!=(n=e.promptToFill)?n:e.description;(0,u.u4)(u.AZ.ASSISTANT_USED,{action:"prompt_suggestion_clicked",title:e.title}),null==i||i({intent:e.intent,text:t})},prompts:l})})}):null,c?(0,o.Y)(y.S,{css:D.footerContainer,children:c}):null]})})}},33791:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M18.5 6a1 1 0 0 1 1 1v13h-2V7a1 1 0 0 1 1-1ZM15.243 6.03a1 1 0 0 1 .727 1.213l-3.242 12.97-1.94-.485 3.242-12.97a1 1 0 0 1 1.213-.728ZM11.385 6.077a1 1 0 0 1 .538 1.308L6.538 20.308l-1.846-.77 5.385-12.923a1 1 0 0 1 1.308-.538ZM5.47 3.47a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.75.75 0 0 1-1.06-1.06l.72-.72H3a.75.75 0 0 1 0-1.5h3.19l-.72-.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},34415:(e,n,t)=>{"use strict";t.d(n,{aJ:()=>s,ci:()=>u,kB:()=>c});var r=t(83846),i=t(22531),o=t(90629),a=t(17089),l=t(24689),s=function(e){return e.DEPLOYMENT_PANE_COVER_PAGE="deployment_pane_cover_page",e.DEPLOYMENT_PANE_FINAL_PAGE="deployment_pane_final_page",e.REDEPLOY_PANE="redeploy_pane",e.SECURITY_SCANNER_PANE="security_scanner_pane",e}({});function c(e){(0,a.u4)(a.AZ.RUN_SCAN_CLICKED,{context:e})}function u(e){try{var n=[],t=[];e.forEach(function(e){"dependencyAudit"===e.kind?n.push(e):t.push(e)});try{var s,c=(s={},(0,r._)(s,l.A.INFO,[]),(0,r._)(s,l.A.LOW,[]),(0,r._)(s,l.A.MODERATE,[]),(0,r._)(s,l.A.HIGH,[]),(0,r._)(s,l.A.CRITICAL,[]),(0,r._)(s,"majorBumpLibs",[]),s);n.forEach(function(e){c[(0,l.T)(e.severity)].push(e.name),"object"===(0,i._)(e.fixAvailable)&&null!==e.fixAvailable&&e.fixAvailable.isSemVerMajor&&c.majorBumpLibs.push(e.name)}),(0,a.u4)(a.AZ.DEPENDENCY_AUDIT_COMPLETED,c)}catch(e){o.v4(function(n){n.setTag("securityScan",!0),n.setTag("scanType","dependency"),n.setExtra("originalError",e),o.Cp(Error("Error tracking dependency audit"))})}try{var u,d=(u={},(0,r._)(u,l.A.INFO,[]),(0,r._)(u,l.A.LOW,[]),(0,r._)(u,l.A.MODERATE,[]),(0,r._)(u,l.A.HIGH,[]),(0,r._)(u,l.A.CRITICAL,[]),u);t.forEach(function(e){d[(0,l.T)(e.severity)].push({checkId:e.checkId,path:e.location.path,message:e.message.slice(0,100)})}),(0,a.u4)(a.AZ.SAST_SCAN_COMPLETED,{vulnerabilities:d})}catch(e){o.v4(function(n){n.setTag("securityScan",!0),n.setTag("scanType","sast"),n.setExtra("originalError",e),o.Cp(Error("Error tracking SAST scan"))})}}catch(e){o.v4(function(n){n.setTag("securityScan",!0),n.setExtra("originalError",e),o.Cp(Error("Error tracking security scan result"))})}}},35106:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(12694);function i(e,n){return e.split(n).length-1}var o={parse:function(e){var n=new Map,t=e.split(/\n|\r|\r\n/),r=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;if(!function(e){var n=e.trim();return 0===n.length||n.startsWith("#")}(c)){var u=(c=function(e){if(!e.includes("#"))return e;var n=e.split("#"),t=!1,r=[],o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;(1===i(u,'"')||i(u,"'"))&&(t?(t=!1,r.push(u)):t=!0),(0===r.length||t)&&r.push(u)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return r.join("#")}(c)).indexOf("="),d=c.indexOf(":");if(-1!==d||-1!==u){var p=u;-1!==d&&(d<u||-1===u)&&(p=d);var f=c.slice(0,p).replace(/^\s*(?:export\s+)?(.*?)\s*$/,"$1"),h=function(e,n){var t=e.trim();if(0===t.length)return t;var r=t.length-1,i='"'===t[0]&&'"'===t[r],o="'"===t[0]&&"'"===t[r];return(o||i)&&(t=t.slice(1,-1)),i&&(t=(t=t.replace(/\\./g,function(e){return"\\n"===e?"\n":"\\r"===e?"\r":e})).replace(/\\([^$])/g,"$1")),o||(t=t.replace(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/g,function(e){var t=e.match(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/);if(null===t)return e;if("\\"===t[1]||"("===t[2])return t[0].slice(1);var r=t[4];return""!==r?n.get(r)||"":e})),t}(c.slice(p+1),n);n.set(f,h)}}}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n},serialize:function(e){return(e instanceof Map?Array.from(e):Object.entries(e)).reduce(function(e,n){var t=(0,r._)(n,2),i=t[0],o=t[1].replace(/\\([^$])/g,"\\\\$1").replace(/\$/g,"\\\\$$").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r");return e+"".concat(i,'="').concat(o,'"\n')},"")}}},35331:e=>{e.exports={eventDefaultWidth:"Feed_eventDefaultWidth__TV_Bo",expandedContent:"Feed_expandedContent__MeQNF",expandableGroup:"Feed_expandableGroup__yWd9b",expandButton:"Feed_expandButton__0Nh49",summary:"Feed_summary__QTPva",expanded:"Feed_expanded__bjwVA","highlight-bg":"Feed_highlight-bg__UCDr9"}},35422:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(21462),s=t(39159);function c(){var e,n=(0,o._)((0,l.useState)(null),2),t=n[0],c=n[1];return(0,s.b)((e=(0,i._)(function(e){var n,t,i,o,l,s,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=e.environment.nixState.subscribe({}).resReadable,t=!1,i=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),l=(0,r._)(n),a.label=2;case 2:return[4,l.next()];case 3:if(!(t=!(s=a.sent()).done))return[3,5];(u=s.value).ok&&c(u.payload),a.label=4;case 4:return t=!1,[3,2];case 5:return[3,12];case 6:return d=a.sent(),i=!0,o=d,[3,12];case 7:if(a.trys.push([7,,10,11]),!(t&&null!=l.return))return[3,9];return[4,l.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(i)throw o;return[7];case 11:return[7];case 12:return[2]}})}),function(n){return e.apply(this,arguments)}),[]),t}},35563:(e,n,t)=>{"use strict";t.d(n,{BL:()=>R,D6:()=>C,E2:()=>k,Ff:()=>U,Gg:()=>G,H_:()=>P,Ou:()=>b,PY:()=>g,Vr:()=>m,bO:()=>I,cW:()=>D,d_:()=>h,h:()=>S,hF:()=>L,hQ:()=>E,hq:()=>z,n5:()=>T,ob:()=>w,ov:()=>A,q3:()=>H,rD:()=>O,tB:()=>v,wy:()=>x,xB:()=>_});var r=t(83846),i=t(17844),o=t(93629),a=t(12694),l=t(56902),s=t(21462),c=t(35992),u=t(76957),d=t(79203),p=t(26325),f=t(87433),h=function(e){return e.Uninitialized="Uninitialized",e.Initializing="Initializing",e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle",e}({}),m=function(e){return e.Install="Install",e.Uninstall="Uninstall",e}({});function g(){return(0,a._)((0,s.useState)(function(){return(0,u.y$)()}),1)[0]}var v=(0,s.createContext)(null);function y(){var e=(0,s.useContext)(v);if(!e)throw Error("Expected store in context");return e}var w=function(e){return(0,d.Xr)(e,{store:y()})};function b(e){return(0,p.yF)((0,s.useCallback)(function(n){return n(e)},[e]),{store:y()})}function S(e){return(0,d.md)(e,{store:y()})}var Y=(0,u.eU)({});function _(e){var n,t=S(Y);return e&&null!=(n=t[e])?n:[]}function A(){var e=w(Y);return function(n,t){e(function(e){return(0,c.jM)(e,function(e){var r=e[n];if(!r||0===r.length){e[n]=t;return}var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)!function(){var e=l.value;r.find(function(n){return n.name===e.name})||r.push(e)}()}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}})})}}function C(){var e=w(Y);return function(n,t){e(function(e){return(0,c.jM)(e,function(e){var r=e[n];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)!function(){var e=l.value,n=r.findIndex(function(n){return n.name===e.name});-1!==n&&r.splice(n,1)}()}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}})})}}var k=(0,u.eU)({});function x(){var e=b(k);return function(n){var t;return null!=(t=e()[n])?t:null}}function D(){var e=w(k);return function(n,t){e(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},n,t))})}}var E=(0,u.eU)(null);function R(){return S(E)}var I=(0,u.eU)([]);function T(){return S(I)}var F=(0,u.eU)({});function P(e){var n,t=S(F);return e&&null!=(n=t[e])?n:[]}function L(){var e=b(F);return function(n){var t;return null!=(t=e()[n])?t:[]}}function U(){var e=w(F);return function(n,t){e(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},n,t.map(function(e){return"nix"===n?(0,o._)((0,i._)({},e),{name:(0,f.y)(e.name)}):e})))})}}var N=(0,u.eU)(null,function(e,n,t){var r=t.id,i=t.pkg;if(!i.name)throw Error("Package does not have a name.");n(I,function(e){return(0,c.jM)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(n){return e.id===r&&n.name===i.name})})){var n=e.find(function(e){return"Install"===e.kind});n?n.pkgs.push(i):e.push({kind:"Install",id:r,pkgs:[i]})}})})});function O(){return w(N)}var M=(0,u.eU)(null,function(e,n,t){var r=t.id,i=t.pkg;if(!i.name)throw Error("Package does not have a name.");n(I,function(e){return(0,c.jM)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(n){return e.id===r&&n.name===i.name})})){var n=e.find(function(e){return"Uninstall"===e.kind});n?n.pkgs.push(i):e.push({kind:"Uninstall",id:r,pkgs:[i]})}})})});function H(){return w(M)}var B=(0,u.eU)(null,function(e,n,t){var r=(0,l._)(e(I)),i=r[0],o=r.slice(1);t===i&&(n(I,o),n(E,t))});function z(){return w(B)}var W=(0,u.eU)(null,function(e,n,t){n(I,function(e){return(0,c.jM)(e,function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,s=l.pkgs.findIndex(function(e){return e.name===t});-1!==s&&l.pkgs.splice(s,1)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}})})});function G(){return w(W)}},35700:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M10.64 2.354A9.75 9.75 0 1 1 2.803 15.25a.75.75 0 0 1 1.414-.498 8.25 8.25 0 1 0 1.937-8.564L2.894 9.25H7a.75.75 0 0 1 0 1.5H1A.75.75 0 0 1 .25 10V4a.75.75 0 0 1 1.5 0v4.266l3.368-3.165a9.75 9.75 0 0 1 5.522-2.747ZM12 6.25a.75.75 0 0 1 .75.75v4.932l3.666 2.444a.75.75 0 1 1-.832 1.248l-4-2.667a.75.75 0 0 1-.334-.624V7a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},35812:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(12694),i=t(21462),o=t(30908);function a(e,n){var t=(0,r._)((0,i.useState)(function(){var t;return null!=(t=o.A.get(e))?t:n}),2),a=t[0],l=t[1];return(0,i.useEffect)(function(){o.A.set(e,a)},[e,a]),[a,l]}},35865:(e,n,t)=>{"use strict";t.d(n,{To:()=>D,Bt:()=>E,ex:()=>x});var r=t(81073),i=t(43126),o=t(17844),a=t(12584),l=t(41114),s=t(86997),c=t(87265);function u(){var e=(0,a._)(["\n  fragment DatabaseIsEphemeralReasonUser on CurrentUser {\n    id\n    ...UserPlanStateCurrentUser\n    isMemberOfAnyOrg\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,a._)(["\n  query GetDatabaseIsEphemeralReasonUser {\n    currentUser {\n      id\n      ...DatabaseIsEphemeralReasonUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,l.J1)(u(),c.o),h=(0,l.J1)(d(),f),m=t(96034);t(22799);var g=t(83603),v=t(78008),y=t(18509),w=t(27023),b=t(36073),S=t(4616),Y=t(85389),_=t(67611),A=t(81650),C=(0,y.x)({emphasis:[w.wp.fontWeight.medium,w.wp.flex.shrink(1)],row:[w.wp.rowWithGap(8),w.wp.align.center],rowText:[w.wp.flex.shrink(1)]});function k(e){var n=e.title,t=e.isFrozen,o=e.scheduledFreezeTime,a=e.scheduledDeletionTime,l=new Date,s=o?(0,i.A)(new Date(o),l):-1,c=a?(0,i.A)(new Date(a),l):-1;return(0,r.FD)(Y.S,{gap:4,children:[(0,r.Y)(Y.S,{pr:2,row:!0,gap:4,align:"center",justify:"space-between",children:(0,r.Y)(S.EY,{css:C.emphasis,children:void 0===n?"Upgrade for a permanent database":n})}),(0,r.Y)(S.EY,{variant:"small",children:"Databases created on your free Starter plan are temporary."}),(0,r.FD)(Y.S,{pt:2,gap:8,children:[t?(0,r.FD)(Y.S,{css:C.row,children:[(0,r.Y)(_.A,{size:16}),(0,r.Y)(S.EY,{css:C.rowText,variant:"small",children:"Your database has been paused, preventing further edits."})]}):null,!t&&s>-1?(0,r.FD)(Y.S,{css:C.row,children:[(0,r.Y)(_.A,{size:16}),(0,r.FD)(S.EY,{css:C.rowText,variant:"small",children:[(0,r.FD)("span",{css:C.emphasis,children:["In ",s," days:"]})," ","Your database will be paused, preventing further edits."]})]}):null,c>-1?(0,r.FD)(Y.S,{css:C.row,children:[(0,r.Y)(A.A,{size:16}),(0,r.FD)(S.EY,{css:C.rowText,variant:"small",children:[(0,r.FD)("span",{css:C.emphasis,children:["In ",c," days:"]})," ","Your database will be permanently deleted."]})]}):null]})]})}function x(){var e,n,t,r=(0,g.ET)().orgId,i=(e={},n=(0,o._)({},p,e),s.I(h,n)),a=i.data;if(i.loading)return!1;var l=(null==a||null==(t=a.currentUser)?void 0:t.__typename)==="CurrentUser"?a.currentUser:void 0;return!(null==l?void 0:l.isMemberOfAnyOrg)&&!(null==l?void 0:l.userSubscriptionType)&&void 0===r}function D(e){var n=e.isFrozen,t=e.scheduledFreezeTime,i=e.scheduledDeletionTime;return x()?(0,r.Y)(Y.S,{children:(0,r.Y)(b.N,{text:(0,r.FD)(Y.S,{children:[(0,r.Y)(k,{isFrozen:n,scheduledFreezeTime:t,scheduledDeletionTime:i}),(0,r.Y)(Y.S,{pt:12,pb:4,children:(0,r.Y)(v.A,{context:"workspace_ephemeral_postgres_database_banner",text:"Upgrade to Replit ".concat(m.en),colorway:"brand",variant:"outlined"})})]})})}):null}function E(e){var n=e.isFrozen,t=e.scheduledFreezeTime,i=e.scheduledDeletionTime;return(0,r.Y)(Y.S,{style:{maxWidth:240},children:(0,r.Y)(k,{title:"We created a temporary database for you, manage it here",isFrozen:n,scheduledFreezeTime:t,scheduledDeletionTime:i})})}},36818:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var r=t(17844),i=t(93629),o=t(81073),a=t(21462),l=t(75081),s=t(78835),c="rag://rag_source_";function u(e){var n=e.openWebview,t=e.ragSources;return(0,a.useMemo)(function(){return function(e){var u,d=null==(u=e.node.properties)?void 0:u.href,p=(0,a.useMemo)(function(){if(n&&"string"==typeof d)try{var e=new URL(d);if("0.0.0.0"===e.hostname||"localhost"===e.hostname)return function(t){t.preventDefault(),n(e.pathname,parseInt(e.port,10))}}catch(e){return}},[d]);if("string"==typeof d&&d.startsWith(c)){var f=d.slice(c.length),h=null==t?void 0:t.find(function(e){return e.id===f});if(!h)return(0,o.FD)(a.Fragment,{children:["[",e.children,"]"]});var m=(0,l.A)(h.url);return(0,o.Y)(s.A,(0,i._)((0,r._)({},e),{href:"#"+m,filePath:"",target:""}))}return(0,o.Y)(s.A,(0,i._)((0,r._)({},e),{type:void 0!==p?"button":e.type,href:void 0!==p?"#":e.href,onClick:p}))}},[n,t])}},36873:(e,n,t)=>{"use strict";t.d(n,{A:()=>S,p:()=>v});var r=t(29935),i=t(82643),o=t(45843),a=t(12584);function l(){var e=(0,a._)(["\n  query GitHubAuth {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s=(0,t(41114).J1)(l()),c=t(684),u=c.ZU.Object({id:c.ZU.String(),user_id:c.ZU.Number(),ssh_hostname:c.ZU.String(),token:c.ZU.String()}),d=t(27915),p=t(81869),f=t(37872),h=t(48284),m=t(17089),g=["http:","https:","vscode:"];function v(e){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e){var n,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return n=e.replId,[4,(0,d.$6)(function(){return(0,h.B2)("/data/repls/".concat(n,"/get_ssh_token"))})];case 1:if((t=r.sent()).error)return[2,{type:"error",message:t.error.toString()}];if(!o.J(u,t.value))return[2,{type:"error",message:"Invalid JSON"}];return[2,{type:"success",data:t.value}]}})})).apply(this,arguments)}function w(){return(w=(0,r._)(function(){var e;return(0,i.YH)(this,function(n){switch(n.label){case 0:if(!p.V)throw Error("Expected apollo");return[4,p.V.query({query:s})];case 1:if(!(null==(e=n.sent().data)?void 0:e.currentUser))throw Error("Expected current user");return[2,e.currentUser]}})})).apply(this,arguments)}function b(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function S(e){var n=e.container,t=e.fs,o=e.openMultipleFiles,a=e.openMultipleURLs,l=e.enableReplspaceSshTokenPassthrough,s=new Set,c=!1,u=null;return n.openChannel({service:"open",name:"open"},function(e){e.channel.onCommand(function(e){if("replspaceApiOpenMultipleFiles"===e.body){if(!e.replspaceApiOpenMultipleFiles)throw Error("Expected replspaceApiOpenMultipleFiles");var n=e.replspaceApiOpenMultipleFiles,t=n.files,r=n.urls.flatMap(function(e){var n;try{n=new URL(e)}catch(e){return[]}return g.includes(n.protocol)?[n]:[]});o&&t.length>0&&(b(),o({paths:t})),a&&r.length>0&&(b(),a({urls:r.map(function(e){return e.toString()})}))}})}),n.openChannel({service:"git",name:"git"},function(e){var n,a=e.channel;return a.onCommand((n=(0,r._)(function(e){var n,r,l,d,p,h,m,g,v,y,S,Y,_,A,C,k;return(0,i.YH)(this,function(i){switch(i.label){case 0:switch(e.body){case"replspaceApiOpenFile":return[3,1];case"replspaceApiGetGitHubToken":return[3,7]}return[3,9];case 1:if(!e.replspaceApiOpenFile)throw Error("Expected replspaceApiOpenFile");if(r=(n=e.replspaceApiOpenFile).file,l=n.waitForClose,d=n.nonce,o)return[3,3];if(!r.endsWith(".git/COMMIT_EDITMSG"))return l&&a.send({replspaceApiCloseFile:{file:r,nonce:d}}),window.alert("tried to open ".concat(r," but failed")),[2];return p=window.prompt("Enter a commit message"),[4,t.writeFile(r,null!=p?p:"")];case 2:if(i.sent(),!l)return[2];return[3,5];case 3:if(b(),o({paths:[r]}),!l||!u)return[2];return[4,u(r)];case 4:i.sent(),i.label=5;case 5:return[4,t.flush()];case 6:if(i.sent(),"open"!==a.status)return[2];return a.send({replspaceApiCloseFile:{file:r,nonce:d}}),[2];case 7:if(!e.replspaceApiGetGitHubToken)throw Error("Expected replspaceApiGetGitHubToken");return h=function(){var n;"open"===a.status&&a.send({replspaceApiGitHubToken:{token:"",nonce:null==(n=e.replspaceApiGetGitHubToken)?void 0:n.nonce}})},[4,function(){return w.apply(this,arguments)}()];case 8:if(null==(m=i.sent()).gitHubInfo)return h(),[2];if(!s.size)return h(),f.vF.error("Got a replspaceApiGetGitHubToken command but no confirm listener is set up"),[2];if(g=function(){var n,t;"open"===a.status&&a.send({replspaceApiGitHubToken:{token:null==(n=m.gitHubInfo)?void 0:n.accessToken,nonce:null==(t=e.replspaceApiGetGitHubToken)?void 0:t.nonce}})},c)return g(),[2];v=!1,y=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=s[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)(null)}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},S=!0,Y=!1,_=void 0;try{for(A=s[Symbol.iterator]();!(S=(C=A.next()).done)&&(k=C.value,!v);S=!0)k(function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!v){if(v=!0,!e){h(),y();return}n&&(c=e),g(),y()}})}catch(e){Y=!0,_=e}finally{try{S||null==A.return||A.return()}finally{if(Y)throw _}}i.label=9;case 9:return[2]}})}),function(e){return n.apply(this,arguments)})),function(){}}),n.openChannel({service:"shelltracker",name:"shelltracker"},function(e){e.channel.onCommand(function(e){if(null!=e.replspaceApiShellTracker){var t,r;(0,m.u4)(m.AZ.SHELL_COMMAND_EVALED,{context:e.replspaceApiShellTracker.cmd,replId:null==(r=n.getContext())||null==(t=r.repl)?void 0:t.id,api:"replspace",pwd:e.replspaceApiShellTracker.pwd})}})}),void 0!==l&&l&&n.openChannel({service:"sshtoken",name:"sshtoken"},function(e){var n,t=e.channel;t.onCommand((n=(0,r._)(function(e){var n,r,o,a,l,s;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(!e.replspaceApiSSHTokenGetRequest)throw Error("Expected replspaceApiSSHTokenGetRequest");return r=(n=e.replspaceApiSSHTokenGetRequest).nonce,o=n.replid,a=function(e){"open"===t.status&&t.send({replspaceApiSSHTokenGetResponse:e})},l=function(){a({token:"",nonce:r})},[4,v({replId:o})];case 1:if(s=i.sent(),"open"!==t.status)return[2];if("error"===s.type)return l(),f.vF.error(s.message),[2];return a({token:s.data.token,nonce:r,sshHostname:s.data.ssh_hostname}),[2]}})}),function(e){return n.apply(this,arguments)}))}),{onConfirmSendToken:function(e){var n=function(n){return e(n)};return s.add(n),function(){s.delete(n)}},setWaitForFileClose:function(e){u=e}}}},36976:(e,n,t)=>{"use strict";t.d(n,{sg:()=>p,uA:()=>o});var r,i,o=function(e){return e.UNKNOWN_NOT_GIT="UNKNOWN_NOT_GIT",e.UNKNOWN="UNKNOWN",e.TIMEOUT="TIMEOUT",e.CHANNEL_CLOSED="CHANNEL_CLOSED",e.UNKNOWN_REF="UNKNOWN_REF",e.NOT_INITIALIZED="NOT_INITIALIZED",e.UNAUTHENTICATED="UNAUTHENTICATED",e.INDEX_FILE_CORRUPT="INDEX_FILE_CORRUPT",e.UNKNOWN_REMOTE="UNKNOWN_REMOTE",e.INDEX_LOCKED="INDEX_LOCKED",e.NO_COMMITS="NO_COMMITS",e.PATH_MATCHED_NO_FILES="PATH_MATCHED_NO_FILES",e.USER_NOT_CONFIGURED="USER_NOT_CONFIGURED",e.INVALID_REFERENCE="INVALID_REFERENCE",e.BRANCH_ALREADY_EXISTS="BRANCH_ALREADY_EXISTS",e.MERGE_CONFLICT="MERGE_CONFLICT",e.UPSTREAM_NOT_SET="UPSTREAM_NOT_SET",e.HEAD_DETACHED="HEAD_DETACHED",e.DIRTY_WORKTREE="DIRTY_WORKTREE",e.PUSH_REJECTED="PUSH_REJECTED",e.REMOTE_ALREADY_EXISTS="REMOTE_ALREADY_EXISTS",e.ALREADY_INITIALIZED="ALREADY_INITIALIZED",e.INVALID_STATE="INVALID_STATE",e.PROTECTED_BRANCH="PROTECTED_BRANCH",e.NOTE_SUCCESSFULLY_REMOVED="NOTE_SUCCESSFULLY_REMOVED",e.OBJECT_HAS_NO_NOTE="OBJECT_HAS_NO_NOTE",e.OBJECT_ALREADY_HAS_NOTE="OBJECT_ALREADY_HAS_NOTE",e.NOTE_SUCCESSFULLY_OVERWRITTEN="NOTE_SUCCESSFULLY_OVERWRITTEN",e.PRE_COMMIT_HOOK_FAILED="PRE_COMMIT_HOOK_FAILED",e}({}),a=/^(fatal: |error: |remote: error: |CONFLICT \([^)]+\): )/im,l=/^cat: .*: No such file or directory$/im;function s(e){return RegExp("^fatal: ".concat(e.source),"im")}function c(e){return RegExp("^error: ".concat(e.source),"im")}var u=[{error:"NOT_INITIALIZED",match:[s(/not a git repository/)]},{error:"UNAUTHENTICATED",match:[s(/Authentication failed/),s(/unable to access/),s(/repository \S+ not found/),s(/could not read Username/),s(/could not read Password/),s(/Could not read from remote/)]},{error:"INDEX_FILE_CORRUPT",match:[s(/index file corrupt/),s(/index file smaller than expected/),c(/index file .*?\.idx is too small/)]},{error:"UNKNOWN_REMOTE",match:[s(/No such remote/),c(/No such remote/)]},{error:"UNKNOWN_REF",match:[s(/couldn't find remote ref/)]},{error:"INDEX_LOCKED",match:[s(/Unable to create .*?\.git\/index\.lock/),c(/Unable to create .*?\.git\/index\.lock/)]},{error:"NO_COMMITS",match:[s(/your current branch '.*?' does not have any commits yet/)]},{error:"PATH_MATCHED_NO_FILES",match:[s(/pathspec '.*?' did not match any files/),s(/pathspec '.*?' did not match any file\(s\) known to git/),s(/path '.*?' does not exist/),s(/path '.*?' exists on disk, but not in/)]},{error:"USER_NOT_CONFIGURED",match:[s(/unable to auto-detect email address/),s(/unable to auto-detect name/),s(/empty ident name \(for <.*?>\) not allowed/)]},{error:"INVALID_REFERENCE",match:[s(/invalid reference: .*?$/),s(/'.*?' - not a valid ref/)]},{error:"BRANCH_ALREADY_EXISTS",match:[s(/A branch named '.*?' already exists/)]},{error:"MERGE_CONFLICT",match:[s(/Not possible to fast-forward, aborting/),s(/refusing to merge unrelated histories/),s(/Exiting because of an unresolved conflict/),s(/Exiting because of unfinished merge/),c(/Failed to merge in the changes/),(r=/Merge conflict in/,RegExp("^CONFLICT \\([^\\)]+\\): ".concat(r.source),"im"))]},{error:"UPSTREAM_NOT_SET",match:[s(/The current branch \S+ has no upstream branch/),s(/No configured push destination/)]},{error:"HEAD_DETACHED",match:[s(/HEAD does not point to a branch/),s(/ref HEAD is not a symbolic ref/)]},{error:"DIRTY_WORKTREE",match:[c(/Your local changes to the following files would be overwritten/),c(/The following untracked working tree files would be overwritten/),c(/\S+ is not possible because you have unmerged files/),c(/cannot rebase: You have unstaged changes/)]},{error:"PROTECTED_BRANCH",match:[(i=/.*? Protected branch update failed/,RegExp("^remote: error: ".concat(i.source),"im"))]},{error:"PUSH_REJECTED",match:[c(/failed to push some refs to/)]},{error:"REMOTE_ALREADY_EXISTS",match:[s(/remote .*? already exists/),c(/remote .*? already exists/)]},{error:"INVALID_STATE",match:[s(/There is no merge in progress/),s(/There is no merge to abort/),s(/No rebase in progress/)]},{error:"OBJECT_ALREADY_HAS_NOTE",match:[c(/Cannot add notes. Found existing notes for object/)]}],d=[{error:"NOTE_SUCCESSFULLY_REMOVED",match:[/^Removing note for object/]},{error:"OBJECT_HAS_NO_NOTE",match:[/^Object \S+ has no note/]},{error:"NOTE_SUCCESSFULLY_OVERWRITTEN",match:[/^Overwriting existing notes for object \S+/]},{error:"PRE_COMMIT_HOOK_FAILED",match:[/pre-?commit/i]}];function p(e){if(a.test(e)){for(var n=0;n<u.length;n++)for(var t=0;t<u[n].match.length;t++)if(u[n].match[t].test(e))return u[n].error;return"UNKNOWN"}for(var r=0;r<d.length;r++)for(var i=0;i<d[r].match.length;i++)if(d[r].match[i].test(e))return d[r].error;return l.test(e)?"PATH_MATCHED_NO_FILES":"UNKNOWN_NOT_GIT"}},36993:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(17089);function i(e){(0,r.u4)(r.AZ.FILETREE_USED,e)}},36999:(e,n,t)=>{"use strict";t.d(n,{D:()=>eu});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(67313),s=t(21462),c=t(90629),u=t(10764),d=t(17844),p=t(12584),f=t(41114),h=t(86997),m=t(50175);function g(){var e=(0,p._)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n        slug\n        authorizations {\n          editFileContents {\n            isAuthorized\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return g=function(){return e},e}function v(){var e=(0,p._)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return v=function(){return e},e}function y(){var e=(0,p._)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return y=function(){return e},e}function w(){var e=(0,p._)(["\n  query GitHubImportGetTopLanguages($input: GitHubRepoInfoInput!) {\n    githubRepoInfo(input: $input) {\n      ... on GitHubRepoInfoOutput {\n        topLanguages\n        repositorySource\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return w=function(){return e},e}var b={},S=(0,f.J1)(g()),Y=(0,f.J1)(v()),_=(y(),(0,f.J1)(w())),A=t(8950),C=t(47877),k=t(41467),x=t(39363),D=t(38674),E=t(33090),R=t(16391),I=t(83603),T=t(1982),F=t(55100),P=t(37872),L=t(96050),U=t(17089),N=t(98679),O=t(87603);function M(e){var n=(0,O.A)({container:e,service:"exec"}).channel,t=(0,s.useRef)(!1),o=(0,s.useRef)([]),l=(0,N.A)((0,r._)(function(){var e,r,s,c,u,d,p,f,h,m;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t.current||!o.current.length||(null==n?void 0:n.status)!=="open")return[2];if(!(e=o.current.pop()))throw Error("Expected request");return c=(s=(r=(0,i._)(e,2))[0]).args,u=s.env,d=r[1],p="",f=n.onCommand(function(e){e.output&&(p+=e.output)}),t.current=!0,[4,n.request({exec:{args:c,env:u,noUserEnv:!0}})];case 1:return h=a.sent(),t.current=!1,f(),m=h.channelClosed?"Channel closed":h.error,d(m?{error:m,output:p||null}:{output:p,error:null}),l.current(),[2]}})})),c=null==n?void 0:n.status;return(0,s.useEffect)(function(){"open"===c&&l.current()},[c,l]),(0,s.useCallback)(function(e){var n=e.args,t=e.env;return new Promise(function(e){o.current.push([{args:n,env:t},e]),l.current()})},[l])}var H=t(30819),B=t(71424),z=t(21708),W=t.n(z),G=t(96820),V=t(7990),Z=t.n(V),j={14:"nodejs-14",16:"nodejs-16",18:"nodejs-18",19:"nodejs-19",20:"nodejs-20"},q={bash:"bash",basic:"qbasic",nix:"nix",clojure:"clojure-1.11","c++":"cpp-clang14",c:"c-clang14","c#":"dotnet-7.0",dart:"dart-3.3",deno:"deno-1",elixir:"elixir-1_15","f#":"dotnet-7.0",go:"go-1.21",haskell:"haskell-ghc9.4",html:"web",css:"web",shell:"bash",java:"java-graalvm22.3",lua:"lua-5.2",nodejs:"nodejs-20",php:"php-8.2",python:{"3.8":"python-3.8","3.10":"python-3.10","3.11":"python-3.11","3.12":"python-3.12"},r:"r-4.3",rust:"rust-stable",ruby:"ruby-3.2",swift:"swift-5.8",typescript:j,javascript:j,vue:{18:"vue-node-18",20:"vue-node-20"}};function K(e,n){if(void 0===e)return!1;if(void 0===n)return!0;var t=W()(e);if(null===t)return!1;var r=W()(n);return null===r||Z()(t,r)}var $=t(32900),J=t(22531),Q=t(51026);function X(){var e=(0,p._)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return X=function(){return e},e}var ee={},en=(0,f.J1)(X()),et=function(e,n){return{op:"add",path:e,value:JSON.stringify(n)}},er=new Map([["hintsList","hints"]]);function ei(){return(ei=(0,r._)(function(e){var n,t,o,l,s,c,u,p,f,h,m,g,v,y,w;function b(){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(){var e,t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:if(!(e="object"===(0,J._)(o.env)?o.env:null)||0===Object.keys(e).length)return[2];return r=(t="object"===(0,J._)(l.env)?l.env:null)?(0,d._)({},e,t):e,[4,n.updateDotReplit([et("env",r)])];case 1:return i.sent(),[2]}})})).apply(this,arguments)}function Y(){return _.apply(this,arguments)}function _(){return(_=(0,r._)(function(){var e,r,i,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(null==(e=l.nix)?void 0:e.channel)return[2];if(null==o||null==(r=o.nix)?void 0:r.channel)return[3,2];return[4,t.getLatestStableChannel()];case 1:if(!(s=a.sent()).channel)return[2];return i=s.channel,[3,3];case 2:i=o.nix.channel,a.label=3;case 3:return[4,n.updateDotReplit([et("nix/channel",i)])];case 4:return a.sent(),[2]}})})).apply(this,arguments)}function A(){return(A=(0,r._)(function(e){var t,r,i,s,c;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(r=!!(t=l[e]),Array.isArray(t)?r=t.length>0:t&&(void 0===t?"undefined":(0,J._)(t))==="object"&&(r=Object.keys(t).length>0),s=null!=(i=er.get(e))?i:e,r||!o[s])return[2];return c=et(s,o[s]),[4,n.updateDotReplit([c])];case 1:return a.sent(),[2]}})})).apply(this,arguments)}return(0,a.YH)(this,function(r){switch(r.label){case 0:n=e.dotReplit,t=e.nixService,o=e.templateConfig,l=e.config,s=[],c={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:Y,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config",rules:"rules config",suggestions:"suggestions config",objectStorage:"object storage config",autoSave:"autosave config"},u=[],p=!0,f=!1,h=void 0;try{for(m=Object.entries(c)[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)y=(v=(0,i._)(g.value,2))[0],w=v[1],null!==w&&("function"==typeof w?u.push(w()):u.push(function(e){return A.apply(this,arguments)}(y)))}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}return[4,Promise.all(u)];case 1:return r.sent(),[2,s]}})})).apply(this,arguments)}var eo=t(48686),ea=function(){var e,n=M((0,B.A)().container);return e=(0,r._)(function(e){var t;return(0,a.YH)(this,function(r){switch(r.label){case 0:if(void 0===e||e===u.u_4.Github||e===u.u_4.Replit)return[2,!1];if(e===u.u_4.ReplitAgent)return[2,!0];t=".cache/trampoline-".concat((0,eo.Ak)()),r.label=1;case 1:return r.trys.push([1,,5,7]),[4,n({args:["bash","-c",["mkdir -p ".concat(t,"/staging"),"git mv -k -f * .* ".concat(t,"/staging"),"curl -sSL https://storage.googleapis.com/replit-dev-public/fullstack_js/v2/51e71c8839647cc5a60b22f9da847d1c9c51e76e.tar.gz | tar xz","rm -rf client/src","git mv -k -f ".concat(t,"/staging/src client/"),"if [[ -d ".concat(t,"/staging/supabase ]]; then git mv ").concat(t,"/staging/supabase .; fi"),"if [[ -d ".concat(t,"/staging/public ]]; then git mv ").concat(t,"/staging/public client/; fi"),"git rm -rf ".concat(t,"/staging"),'git commit -am "Imported repository into Replit"'].join(" && ")]})];case 2:if(null===r.sent().error)return[3,4];return[4,n({args:["git","reset","--hard","HEAD"]})];case 3:return r.sent(),[2,!1];case 4:return[2,!0];case 5:return[4,n({args:["rm","-rf",t]})];case 6:return r.sent(),[7];case 7:return[2]}})}),function(n){return e.apply(this,arguments)}};function el(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return["bash","-c",n.join("&&")]}function es(e){return e.replace(/'/g,"'\"'\"'")}var ec=function(e){var n,t,s,c,u,d,p,f,h=e.checkoutBranch,m=(0,l.useRouter)(),g=(0,B.A)(),v=g.container,y=g.dotReplit,w=g.git,b=g.fs,S=M(v),Y=(n=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,w.init({initialCommit:!1,includeAllInitialFiles:!1})];case 1:return e.sent(),[2]}})}),function(){return n.apply(this,arguments)}),_=(t=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,w.addRemote({name:"origin",url:e})];case 1:return n.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),A=(s=(0,r._)(function(){var e,n;return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,S({args:el("git remote show origin | grep 'HEAD branch'")})];case 1:if(!(e=t.sent()).output)return[2,"main"];return(n=(0,i._)(e.output.split(": "),2))[0],[2,n[1].trim()]}})}),function(){return s.apply(this,arguments)}),C=(c=(0,r._)(function(e){var n,t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,S({args:["git","branch","--list",e]})];case 1:if(!((n=r.sent()).output&&n.output.trim().length>0))return[3,3];return[4,S({args:el("git checkout -f '".concat(es(e),"' && git reset --hard 'origin/").concat(es(e),"'"))})];case 2:return t=r.sent(),[3,5];case 3:return[4,S({args:el("git checkout -f -b '".concat(es(e),"' 'origin/").concat(es(e),"'"))})];case 4:t=r.sent(),r.label=5;case 5:if(t.error)throw Error("Failed to checkout branch: ".concat(t.error));return[2]}})}),function(e){return c.apply(this,arguments)}),k=(u=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:if(t=void 0!==(n=e.deepen)&&n,r=e.remote,i=e.branch,!r.startsWith("https://api.glitch.com"))return[3,2];return[4,S({args:el("git fetch '".concat(es(r),"' +refs/heads/*:refs/remotes/origin/*"))})];case 1:return o.sent(),[2];case 2:if(!(i&&t))return[3,4];return[4,S({args:el("git fetch origin '".concat(es(i),"' --progress --deepen=10"))})];case 3:case 5:case 7:return[2,o.sent()];case 4:if(!i)return[3,6];return[4,S({args:el("git fetch origin '".concat(es(i),"' --progress --depth=10"))})];case 6:return[4,S({args:el("git fetch origin +refs/heads/*:refs/remotes/origin/* --progress --depth=10")})]}})}),function(e){return u.apply(this,arguments)}),x=(d=(0,r._)(function(){var e,n,t,r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,b.readDir(D.Dl)];case 1:if((r=a.sent()).error)return[2];return[4,y.getConfig()];case 2:if(!(null==(n=(i=a.sent()).config)||null==(e=n.gitHubImport)?void 0:e.requiredFiles))return[3,4];return o=i.config.gitHubImport.requiredFiles.concat("^\\.cache$").map(function(e){return new RegExp(e)}),[4,Promise.all(r.children.filter(function(e){var n;return n=e.filename,!o.some(function(e){return null!=n.match(e)})}).map(function(e){return e.type===E.pt.Directory?b.deleteDir(e.filename):b.deleteFile(e.filename)}))];case 3:return a.sent(),[3,6];case 4:if(!(null==(t=i.config)?void 0:t.entrypoint))return[3,6];return[4,b.deleteFile(i.config.entrypoint)];case 5:a.sent(),a.label=6;case 6:return[2]}})}),function(){return d.apply(this,arguments)}),R={"requirements.txt":["pyproject.toml","poetry.lock"],"pnpm-lock.yaml":["package-lock.json"],"yarn.lock":["package-lock.json"],"bun.lockb":["package-lock.json"]},I=(p=(0,r._)(function(){var e,n,t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:for(n in e=[],R)e.push(n);t=0,i.label=1;case 1:if(!(t<e.length))return[3,5];return r=e[t],[4,b.stat(r)];case 2:if(!i.sent().exists)return[3,4];return[4,S({args:["git","clean","-fdx"].concat((0,o._)(R[r]))})];case 3:i.sent(),i.label=4;case 4:return t++,[3,1];case 5:return[2]}})}),function(){return p.apply(this,arguments)});return f=(0,r._)(function(e){var n,t,i,o;return(0,a.YH)(this,function(l){switch(l.label){case 0:return n=e.remote,[4,x()];case 1:return l.sent(),P.vF.info("GitHub Import: Removed template boilerplate"),[4,Y()];case 2:return l.sent(),[4,_(n)];case 3:return l.sent(),[4,A()];case 4:return t=l.sent(),[4,Promise.all([k({deepen:!1,remote:n,branch:t}),h?k({deepen:!1,remote:n,branch:h}):null])];case 5:var s;if(l.sent(),s=(0,r._)(function(){var e;return(0,a.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,C(t)];case 1:return r.sent(),[3,3];case 2:return e=r.sent(),P.vF.error("GitHub Import: checkout default branch failed",{originalError:String(e),query:JSON.stringify(m.query),checkoutBranch:h,githubRepo:n}),[3,3];case 3:return[2]}})}),i=function(){return s.apply(this,arguments)},!h)return[3,11];l.label=6;case 6:return l.trys.push([6,8,,10]),[4,C(h)];case 7:case 9:return l.sent(),[3,10];case 8:return o=l.sent(),P.vF.error("GitHub Import: checkout branch from query parameter failed",{originalError:String(o),query:JSON.stringify(m.query),checkoutBranch:h,githubRepo:n}),[4,i()];case 10:return[3,13];case 11:return[4,i()];case 12:l.sent(),l.label=13;case 13:return[4,I()];case 14:return l.sent(),P.vF.info("GitHub Import: Tidied up required files"),[2]}})}),function(e){return f.apply(this,arguments)}};function eu(e){var n,t,o,p,f,g,v,y,w,D,E,N,O,M,z,V,Z,j,J,X,et,er,eo,el,es,eu,ed,ep=e.insertConfigPlugin,ef=e.setConfigScreenLockIsOpen,eh=e.openFile,em=e.openPane,eg=(0,l.useRouter)(),ev=(0,F.A)(),ey=(0,i._)((n=(0,d._)({},b,void 0),m.n(Y,n)),2),ew=ey[0],eb=ey[1],eS=(0,i._)((0,s.useState)(null),2),eY=eS[0],e_=eS[1],eA=(0,B.A)(),eC=eA.fs,ek=eA.dotReplit,ex=(0,T.A)(),eD=ex.showError,eE=ex.showConfirm,eR=(o=(t=(0,B.A)()).dotReplit,p=t.nixService,f=(0,F.A)(),v=(0,i._)((g=(0,d._)({},ee,void 0),Q._(en,g)),1)[0],w=(y=(0,T.A)()).showWarning,D=y.showError,(0,s.useCallback)((E=(0,r._)(function(e){var n,t,r,i,l,s,c,u,d,h,m,g;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,o.getConfig()];case 1:if(!(t=a.sent().config)||(null==(n=t.modules)?void 0:n.length))return[2];return[4,v({variables:{replId:f}})];case 2:if(!(null==(i=(null==(r=a.sent().data)?void 0:r.repl.__typename)==="Repl"?r.repl:null)?void 0:i.rootOriginReplUrl))return[2];try{l=(0,G.qg)(e.toString())}catch(e){return D("Failed to parse template .replit file"),P.vF.error("GitHub Import: Failed to parse template .replit file"),[2]}if(!l)return[2];return[4,function(e){return ei.apply(this,arguments)}({nixService:p,dotReplit:o,config:t,templateConfig:l})];case 3:s=a.sent(),c=!0,u=!1,d=void 0;try{for(h=s[Symbol.iterator]();!(c=(m=h.next()).done);c=!0)g=m.value,w(g,1e3)}catch(e){u=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw d}}return[2]}})}),function(e){return E.apply(this,arguments)}),[f,w,D,o,p,v])),eI=(N=(0,L.pE)("importBranch","string"))?decodeURIComponent(N):null,eT=(0,H.A)(),eF=(0,I.ET)().orgId,eP=ea();(0,s.useEffect)(function(){eb.error&&eD("Failed to finish cloning Repo - "+eb.error)},[eb.error,eD]),(0,s.useEffect)(function(){eY&&eD("Failed to finish cloning Repo - "+eY)},[eY,eD]),(0,s.useEffect)(function(){eb.data&&eE("Finished cloning Repo")},[eb.data,eE]);var eL=(O={variables:{replId:ev},fetchPolicy:"no-cache"},M=(0,d._)({},b,O),h.I(S,M)).data,eU=(z=(0,H.A)(),Z=(V=(0,B.A)()).fs,j=V.dotReplit,eo=(null==(er=(X={skip:!((J=(null==eL?void 0:eL.repl.__typename)==="Repl"?eL.repl.config.gitRemoteUrl:void 0)&&z),variables:J?{input:{githubRepoUrl:J}}:void 0},et=(0,d._)({},b,X),h.I(_,et)).data)?void 0:er.githubRepoInfo.__typename)==="GitHubRepoInfoOutput"?er.githubRepoInfo.topLanguages:void 0,el=(null==er?void 0:er.githubRepoInfo.__typename)==="GitHubRepoInfoOutput"?er.githubRepoInfo.repositorySource:void 0,{addRecommendedModules:(0,s.useCallback)((0,r._)(function(){var e,n,t,r,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!(eo&&z))return[3,4];return e=eo.map(function(e){return{language:e}}),[4,Z.readFile("package.json")];case 1:return"content"in(n=a.sent())&&(t=function(e){var n,t,r=null;try{t=JSON.parse(e)}catch(e){return null}if(null==(n=t.engines)?void 0:n.node){var i=W()(t.engines.node);i&&(r="".concat(i.major))}return r}(n.content.toString()))&&(e.push({language:"javascript",version:t}),eo.includes("Vue")&&e.push({language:"vue",version:t})),[4,Z.readFile("pyproject.toml")];case 2:return"content"in(n=a.sent())&&(r=function(e){var n,t,r,i,o,a=null;try{o=(0,G.qg)(e)}catch(e){return null}var l=(null==(r=o.tool)||null==(t=r.poetry)||null==(n=t.dependencies)?void 0:n.python)||(null==(i=o.project)?void 0:i["requires-python"]);if(l){var s=W()(l);s&&(a="".concat(s.major,".").concat(s.minor))}return a}(n.content.toString()))&&e.push({language:"python",version:r}),o=function(e,n){var t=new Map,r=!0,o=!1,a=void 0;try{for(var l,s,c=e[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var u=s.value,d=q[u.language.toLowerCase()];if(d){var p=t.get(d);(!p||K(u.version,p.version))&&t.set(d,u)}}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}var f=new Map;null==(l=n.fullModules)||l.forEach(function(e){(null==e?void 0:e.id)&&f.set(e.id,e)});var h=new Set,m=!0,g=!1,v=void 0;try{for(var y,w=t.entries()[Symbol.iterator]();!(m=(y=w.next()).done);m=!0){var b=(0,i._)(y.value,2),S=b[0],Y=b[1];if("string"==typeof S){var _=f.get(S);_&&h.add(_)}else{var A=Y.version;if(!A||!S[A]){var C=Object.keys(S);C.sort(function(e,n){return K(e,n)?-1:1}),A=C[0]}var k=S[A],x=f.get(k);x&&h.add(x)}}}catch(e){g=!0,v=e}finally{try{m||null==w.return||w.return()}finally{if(g)throw v}}return Array.from(h)}(e,z),l=[{op:"add",path:"nix/channel",value:'"stable-24_05"'}],o.length>0?(P.vF.info("GitHub Import: recommended modules:",Object.fromEntries(o.map(function(e){return[e.id,e.name]}))),l.push({op:"add",path:"modules",value:JSON.stringify(o.map(function(e){return e.id}))})):P.vF.warn("GitHub Import: no recommended modules found"),[4,j.updateDotReplit(l)];case 3:a.sent(),a.label=4;case 4:return[2]}})}),[j,Z,z,eo]),topLanguages:eo,repositorySource:el}),eN=eU.addRecommendedModules,eO=eU.topLanguages,eM=eU.repositorySource,eH=(0,$.c)({openPane:em}),eB=(es=(0,r._)(function(){var e,n,t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!eL||"Repl"!==eL.repl.__typename||(n=eL.repl,t=eL.currentUser,"Repl"!==n.__typename||!t||"CurrentUser"!==t.__typename)||(i=null!=(r=null==(e=t.gitHubInfo)?void 0:e.accessToken)?r:null,!(o=n.config.gitRemoteUrl)||!n.config.doClone||!eO))return[2];if(!eL.repl.authorizations.editFileContents.isAuthorized)return e_("You do not have permission to edit this Repl"),P.vF.warn("GitHub Import: Attempt to doClone for user without authorization"),[2];a.label=1;case 1:return a.trys.push([1,3,4,5]),ef(!0),[4,eq({remote:o})];case 2:return a.sent(),(0,U.u4)(U.AZ.NIX_GH_IMPORT_USED,{action:R.s.ImportEnded,replId:n.id,orgContext:(0,I.po)(eF?{id:eF}:void 0),repositorySource:eM}),[3,5];case 3:return l=a.sent(),P.vF.error("GitHub Import: Failed to do GitHub import flow",{originalError:String(l),query:JSON.stringify(eg.query),githubRepo:o,hasAccessToken:!!i}),c.Cp(l,{extra:{query:JSON.stringify(eg.query),githubRepo:o,hasAccessToken:!!i}}),e_(String(l)),[3,5];case 4:return ef(!1),[7];case 5:return[2]}})}),function(){return es.apply(this,arguments)}),ez=(0,i._)((0,s.useState)(!1),2),eW=ez[0],eG=ez[1];(0,s.useEffect)(function(){eT&&eL&&"Repl"===eL.repl.__typename&&eO&&eG(!0)},[eL,eT,eW,eO]),(0,s.useEffect)(function(){eW&&eB()},[eW]);var eV=(eu=(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,(0,C.o)({dotReplit:ek,fs:eC})];case 1:return(e=n.sent().entrypoint)&&eh({path:e,opener:(0,k.e$)(e.toLowerCase())?{paneType:"markdown"}:void 0}),[2]}})}),function(){return eu.apply(this,arguments)});function eZ(){return eC.readFile(x.v)}var ej=ec({checkoutBranch:eI}),eq=(ed=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:if(n=e.remote,!eT||!(eL&&"Repl"===eL.repl.__typename))return[2];return P.vF.info("GitHub Import: Starting client-side GitHub import flow"),[4,eZ()];case 1:return t=o.sent(),[4,ej({remote:n})];case 2:if(o.sent(),P.vF.info("GitHub Import: Cloned repo into Repl"),"NOT_FOUND"!==t.error)return[3,5];return[4,ek.updateDotReplit([])];case 3:return o.sent(),[4,eZ()];case 4:t=o.sent(),o.label=5;case 5:if("content"in t)return[3,6];return P.vF.error("GitHub Import: Skipping patching dotReplit because templateDotReplit was an error",{readError:String(t.error)}),[3,11];case 6:return[4,eZ()];case 7:return r=o.sent(),i=""!==t.content.toString()&&"content"in r&&r.content.toString()!==t.content.toString(),[4,eR(t.content)];case 8:if(o.sent(),P.vF.info("GitHub Import: Patched dotreplit"),!i)return[3,9];return P.vF.info("GitHub Import: Repo has .replit",{githubURL:n}),[3,11];case 9:return[4,eN()];case 10:o.sent(),P.vF.info("GitHub Import: Added recommended modules"),o.label=11;case 11:return[4,ew({variables:{input:{id:ev,doClone:!1}}})];case 12:if(o.sent(),P.vF.info("GitHub Import: Disabled doClone on Repl."),!eI)return[3,14];return[4,eC.persist()];case 13:o.sent(),(0,L.HQ)({router:eg,params:[{mode:"delete",key:"importBranch"}]}),o.label=14;case 14:return[4,eP(eM)];case 15:if(!o.sent())return[3,17];return P.vF.info("GitHub Import: Repository source is agent supported source",{repositorySource:eM}),[4,eH({kind:"setupImportedProject",importSource:function(e){if(!e)return A.aJd.PROJECT_IMPORT_SOURCE_UNKNOWN;switch(e){case u.u_4.Github:return A.aJd.PROJECT_IMPORT_SOURCE_OTHER_GITHUB;case u.u_4.Lovable:return A.aJd.PROJECT_IMPORT_SOURCE_LOVABLE;case u.u_4.Bolt:return A.aJd.PROJECT_IMPORT_SOURCE_BOLT;case u.u_4.ReplitAgent:return A.aJd.PROJECT_IMPORT_SOURCE_REPLIT;default:return A.aJd.PROJECT_IMPORT_SOURCE_UNKNOWN}}(eM)},{createNewSession:!0})];case 16:return o.sent(),[2];case 17:return[4,eV()];case 18:return o.sent(),ep(),[2]}})}),function(e){return ed.apply(this,arguments)})}},37069:(e,n,t)=>{"use strict";t.d(n,{$h:()=>p,$t:()=>C,DA:()=>c,GM:()=>Y,Hl:()=>A,MN:()=>u,Nc:()=>w,O5:()=>o,Tf:()=>f,VQ:()=>v,Ws:()=>k,Yg:()=>m,_:()=>b,b5:()=>g,cS:()=>y,np:()=>d,uw:()=>S,vs:()=>_});var r=t(21462),i=t(76957),o=(0,r.createContext)(void 0),a=(0,i.eU)(null),l=function(e){var n=e.activeTourId,t=e.activeStepId;return"".concat(n,":").concat(t)},s=(0,i.eU)(new Map),c=(0,i.eU)(function(e){return!e(b)&&!e(y)}),u=(0,i.eU)(function(e){var n,t,r=e(w);return r&&null!=(t=null==(n=e(a))?void 0:n.steps.find(function(e){return e.id===r}))?t:null}),d=(0,i.eU)(function(e){var n=e(u);return(null==n?void 0:n.isModal)?n:null}),p=(0,i.eU)(function(e){var n,t=e(w);if(!t)return -1;var r=e(a);return null!=(n=null==r?void 0:r.steps.findIndex(function(e){return t===e.id}))?n:-1}),f=(0,i.eU)(function(e){var n,t=null==(n=e(a))?void 0:n.id,r=e(w);return r&&t?e(s).get(l({activeTourId:t,activeStepId:r})):null}),h=(0,i.eU)(function(e){var n=e(a),t=e(s);return null==n?void 0:n.steps.filter(function(e){return!e.autoSkipIfNoTarget||!!t.get(l({activeTourId:n.id,activeStepId:e.id}))})}),m=(0,i.eU)(function(e){var n,t=e(w);if(!t)return -1;var r=e(h);return null!=(n=null==r?void 0:r.findIndex(function(e){return t===e.id}))?n:-1}),g=(0,i.eU)(function(e){var n,t;return null!=(t=null==(n=e(h))?void 0:n.length)?t:0}),v=(0,i.eU)(null,function(e,n,t,r,i){n(s,function(e){var n=new Map(e);return i?n.set(l({activeTourId:t,activeStepId:r}),i):n.delete(l({activeTourId:t,activeStepId:r})),n})}),y=(0,i.eU)(!1),w=(0,i.eU)(null),b=(0,i.eU)(!1),S=(0,i.eU)(function(e){return e(a)&&!e(y)&&!e(b)}),Y=(0,i.eU)(null),_=(0,i.eU)(null,function(e,n,t){var r,i=e(a);if(i&&!((r="number"==typeof t?t:i.steps.findIndex(function(e){return t===e.id}))<0)&&!(r>=i.steps.length)){for(var o=e(p),c=e(s),u=i.steps[r],d=r<o;!c.get(l({activeTourId:i.id,activeStepId:u.id}))&&u.autoSkipIfNoTarget;){if((r=d?r-1:r+1)<0||r>=i.steps.length)return;u=i.steps[r]}n(w,u.id)}}),A=(0,i.eU)(null,function(e,n){var t=e(a);if(t){var r=e(p),i=e(s);n(Y,null);var o=t.steps[r+1];if(o&&o.autoSkipIfNoTarget)for(var c=r+1;o&&o.autoSkipIfNoTarget&&!i.get(l({activeTourId:t.id,activeStepId:o.id}));)c++,o=t.steps[c];if(!o)return void n(b,!0);n(w,o.id)}}),C=(0,i.eU)(null,function(e,n){n(_,0),n(b,!1)});function k(e){var n=e.tour,t=(0,i.y$)();return t.set(a,n),t.set(w,n.steps[0].id),t}},37157:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(12694),i=t(21462),o=t(74671),a=t(79361),l=t(71424);function s(){var e=(0,l.A)().container,n=(0,a.A)(e),t=(0,r._)((0,i.useState)(!1),2),s=t[0],c=t[1];return((0,i.useEffect)(function(){n===o.KN.CONNECTED&&c(!0)},[n]),s)?{didConnectOnce:s,didDisconnect:n!==o.KN.CONNECTED}:{didConnectOnce:!1,didDisconnect:!1}}},37201:(e,n,t)=>{"use strict";t.d(n,{D8:()=>v,m2:()=>_,vc:()=>A});var r=t(17844),i=t(93629),o=t(17459),a=t(81073),l=t(8950),s=t(18509),c=t(27023),u=t(4616),d=t(85389),p=t(565),f=t(76477),h=t(16645),m=t(16691),g=new Map([[l.e3q.BASIC,p.A],[l.e3q.ADVANCED,f.A]]);function v(e){var n=e.model,t=(0,o._)(e,["model"]),i=g.get(n);return i?(0,a.Y)(i,(0,r._)({},t)):null}l.e3q.BASIC,l.e3q.ADVANCED;var y=new Map([[l.qRv.GENERATE,m.A],[l.qRv.TRANSFORM,m.A],[l.qRv.EXPLAIN,h.A],[l.qRv.REPLIT_DOCS,h.A]]),w=new Map([[l.qRv.GENERATE,"Generate"],[l.qRv.TRANSFORM,"Modify"],[l.qRv.EXPLAIN,"Explain"],[l.qRv.REPLIT_DOCS,"Ask replit.com"]]),b=new Map([[l.Z1T.GENERATE_CODE,m.A],[l.Z1T.TRANSFORM_CODE,m.A],[l.Z1T.EXPLAIN_CODE,h.A],[l.Z1T.DEBUGGER,h.A]]),S=new Map([[l.Z1T.GENERATE_CODE,"Generate"],[l.Z1T.TRANSFORM_CODE,"Modify"],[l.Z1T.EXPLAIN_CODE,"Explain"],[l.Z1T.DEBUGGER,"Debug"]]),Y=(0,s.x)({iconLabel:[c.wp.rowWithGap(4),c.wp.align.center]});function _(e){var n=e.intent,t=e.icon,o=e.text,l=y.get(n),s=w.get(n);return l&&s?(0,a.FD)(d.S,{css:Y.iconLabel,children:[(0,a.Y)(l,(0,r._)({},t)),(0,a.Y)(u.EY,(0,i._)((0,r._)({},o),{children:s}))]}):null}function A(e){var n=e.type,t=e.icon,o=e.text,l=b.get(n),s=S.get(n);return l&&s?(0,a.FD)(d.S,{css:Y.iconLabel,children:[(0,a.Y)(l,(0,r._)({},t)),(0,a.Y)(u.EY,(0,i._)((0,r._)({},o),{children:s}))]}):null}},37247:e=>{e.exports={root:"Preferences_root__r7OOv",tabPanel:"Preferences_tabPanel__PG3pv"}},37311:(e,n,t)=>{"use strict";t.d(n,{F:()=>_});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(81073),s=t(21462),c=t(684),u=t(45843),d=t(27115),p=t(55100),f=t(48284),h=t(17089),m=t(39159),g=t(84322),v=t(11769),y=t(85144),w=t(4616),b=t(85389),S=t(24140),Y=c.ZU.Object({targetReplId:c.ZU.String(),sourceReplId:c.ZU.String(),bucketId:c.ZU.String()});function _(){var e,n=(0,o._)((0,s.useState)(null),2),t=n[0],c=n[1],_=(0,p.A)(),A=(0,g.i)();return(0,m.b)((e=(0,i._)(function(e,n){var t,i,o,l,s,p,m,g,v,y,w,b;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=n.session,i=n.signal,!_||!A)return[2];l=(o=e.replspaceApi.init.stream({session:t.from},{signal:i})).resReadable,s=o.reqWritable,p=!1,m=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),v=function(){var e=w.value;if(!e.ok||"requestDefaultBucketAccess"!==e.payload.$kind)return"continue";var n=e.payload.nonce;(0,h.u4)(h.AZ.MODAL_VIEWED,{modalName:"default_bucket_access_modal"}),c(function(){return function(e){if(!e){c(null),s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"error",message:"user canceled"}});return}(0,f.B2)("/object-storage/replit/allowDefaultBucketAccess/targetRepl/".concat(encodeURIComponent(_),"/sourceRepl/Dotfiles.").concat(encodeURIComponent(A.username)),{}).then(function(e){u.J(Y,e)?s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"ok",targetReplId:e.targetReplId,sourceReplId:e.sourceReplId,bucketId:e.bucketId}}):s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"error",message:JSON.stringify(d.I(Y,e))}})}).catch(function(e){s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"error",message:"".concat(e)}})}).finally(function(){c(null)})}})},y=(0,r._)(l),a.label=2;case 2:return[4,y.next()];case 3:if(!(p=!(w=a.sent()).done))return[3,5];v(),a.label=4;case 4:return p=!1,[3,2];case 5:return[3,12];case 6:return b=a.sent(),m=!0,g=b,[3,12];case 7:if(a.trys.push([7,,10,11]),!(p&&null!=y.return))return[3,9];return[4,y.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(m)throw g;return[7];case 11:return[7];case 12:return s.close(),[2]}})}),function(n,t){return e.apply(this,arguments)}),[_,A]),(0,l.Y)(y.a,{isOpen:"function"==typeof t,onRequestClose:function(){null==t||t(!1),(0,h.u4)(h.AZ.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"close"}),c(null)},children:(0,l.FD)(b.S,{gap:16,children:[(0,l.Y)(w.Y9,{variant:"headerDefault",level:3,children:"Allow Dotfiles Object Storage Bucket access"}),(0,l.Y)(w.EY,{children:"Do you want the Object Storage bucket associated with your Dotfiles Repl to be accessible in this Repl? If your Dotfiles Repl has any secrets, they will be accessible to this Repl too."}),(0,l.Y)(w.EY,{children:"If you did not install the Replit dotfiles support, you should deny this."}),(0,l.FD)(b.S,{justify:"end",row:!0,gap:16,children:[(0,l.Y)(v.$n,{onClick:function(){null==t||t(!1),(0,h.u4)(h.AZ.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"deny"}),c(null)},text:"Deny"}),(0,l.Y)(v.$n,{onClick:function(){null==t||t(!0),(0,h.u4)(h.AZ.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"confirm"}),c(null)},iconLeft:(0,l.Y)(S.A,{}),text:"Allow for this Repl",colorway:"primary"})]})]})})}},37608:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(21462);let i=function(e,n,t){(0,r.useEffect)(function(){var n=setTimeout(e,t);return function(){clearTimeout(n)}},n)}},37853:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(21462),i=t(74671),o=t(71424);function a(){var e=(0,o.A)().container;(0,r.useEffect)(function(){var n=function(){e.getConnectionState()===i.KN.CONNECTED&&e.focus()};return window.addEventListener("focus",n),function(){window.removeEventListener("focus",n)}},[e])}},38067:(e,n,t)=>{"use strict";t.d(n,{B:()=>s});var r=t(12694),i=t(21462),o=t(66890),a=t(6518),l=function(e){var n,t,r,i=e.orgId,a=e.repl,l=e.forkSource;return{originId:a.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!=(r=null==(t=a.deployment)||null==(n=t.activeRelease)?void 0:n.id)?r:void 0,orgId:i,trackingData:{forkSource:l,isOnboarding:!1,isApp:a.publishedAs===o.Q_w.App,isTemplate:a.publishedAs===o.Q_w.Template}}};function s(e){var n=e.onFork,t=e.onError,o=(0,r._)((0,a.A)({navigateAfterFork:!0,replLinkOptions:{initialPaneType:"project"},onFork:function(){n()},onError:function(){t()}}),2),s=o[0],c=o[1].loading;return[(0,i.useCallback)(function(e){var n=e.repl;return s(l({orgId:e.orgId,repl:n,forkSource:e.forkSource}))},[s]),{loading:c}]}},38340:(e,n,t)=>{"use strict";t.d(n,{G2:()=>v,R7:()=>m,hr:()=>d,jQ:()=>a,jg:()=>c,lY:()=>w,nZ:()=>b,ou:()=>f,x6:()=>S});var r=t(21462),i=t(76957),o=t(79203),a=function(e,n){var t=e.dir,r=e.channel,i=e.stringifiedCmd,o=e.cmd;return(!n.direction||t===n.direction)&&(!n.channels.length||!!n.channels.includes(o.channel))&&(!!(!n.regexp||!n.regexp.test||r.name&&n.regexp.test(r.name)||r.service&&n.regexp.test(r.service))||n.regexp.test(i))},l=(0,i.eU)([]),s=(0,i.eU)([]);function c(){return(0,r.useDeferredValue)((0,o.md)(s))}var u=(0,i.eU)(null,function(e,n,t){a(t,e(h))&&n(s,function(e){return e.concat(t)}),n(l,function(e){return e.concat(t)})});function d(){return(0,o.Xr)(u)}var p=(0,i.eU)(null,function(e,n){n(l,[]),n(s,[])});function f(){return(0,o.Xr)(p)}var h=(0,i.eU)({regexp:null,direction:"",highlightOnly:!1,channels:[]});function m(){return(0,o.md)(h)}var g=(0,i.eU)(null,function(e,n,t){var r;n(h,t),n(s,(r=e(l),(t.regexp||t.direction||t.channels.length)&&!t.highlightOnly?r.filter(function(e){return a(e,t)}):r))});function v(){return(0,o.Xr)(g)}var y=(0,i.eU)(!1);function w(){return(0,o.md)(y)}function b(){return(0,o.Xr)((0,r.useMemo)(function(){return(0,i.eU)(null,function(e,n,t){return n(y,t)})},[]))}function S(){return(0,o.Xr)((0,r.useMemo)(function(){return(0,i.eU)(null,function(e,n){return n(y,function(e){return!e})})},[]))}},38993:(e,n,t)=>{"use strict";t.d(n,{A:()=>er});var r=t(29935),i=t(17459),o=t(12694),a=t(82643),l=t(81073),s=t(21462),c=t(76554),u=t(2568),d=t(30819),p=t(56897),f=t(16391),h=t(55100),m=t(37872),g=t(96050),v=t(17089),y=t(71424),w=t(46797);function b(e,n){var t=[];return t.push((0,w.m_)("interpreter")),t.push((0,w.m_)("entrypoint")),e&&(t.push((0,w.Ez)(e)),t.push((0,w.eH)(e))),n?(t.push((0,w.Up)(n)),t.push((0,w.dA)(n))):(t.push((0,w.m_)("compile")),t.push((0,w.m_)("deployment/build"))),t}var S=t(41467),Y=function(e){return e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Flask="FLASK",e.FastAPI="FASTAPI",e.Pyramid="PYRAMID",e.Starlette="STARLETTE",e.Streamlit="STREAMLIT",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN",e}({}),_="package.json",A="requirements.txt",C=RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),k=RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function x(){return(x=(0,r._)(function(e,n){var t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=e.initRunCommand,r=e.isCompiled,!((o=new Set(i=e.allFiles)).has("Makefile")||o.has("makefile")))return[3,1];return[2,"MAKE"];case 1:if(!o.has(_))return[3,2];return[2,"NPM"];case 2:if(!o.has("Cargo.toml"))return[3,3];return[2,"CARGO"];case 3:if(!r)return[3,4];return[2,"UNKNOWN"];case 4:if(!o.has("config/application.rb"))return[3,5];return[2,"RAILS"];case 5:if(!i.some(function(e){return"csproj"===(0,S.an)(e)}))return[3,6];return[2,"DOTNET"];case 6:if(!o.has(A))return[3,8];return[4,n.readFile(A)];case 7:if(!(l=a.sent()).error){if((s=l.content.toString()).includes("django"))return[2,"DJANGO"];if(s.includes("flask"))return[2,"FLASK"];if(s.includes("fastapi"))return[2,"FASTAPI"];else if(s.includes("pyramid"))return[2,"PYRAMID"];else if(s.includes("starlette"))return[2,"STARLETTE"];else if(s.includes("streamlit"))return[2,"STREAMLIT"]}return[3,9];case 8:if(C.test(t))return[2,"REGULAR_RUN"];a.label=9;case 9:return[2,"UNKNOWN"]}})})).apply(this,arguments)}function D(){return(D=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:return[4,e.readFile(_)];case 1:n=o.sent();try{if(!n.error&&(r=null==(t=JSON.parse(n.content.toString()))?void 0:t.scripts,i=["dev","serve","watch","start:dev","start"].find(function(e){return null==r?void 0:r[e]})))return[2,"npm run ".concat(i)]}catch(e){}return[2,"node index.js"]}})})).apply(this,arguments)}function E(){return(E=(0,r._)(function(e,n,t){var r,i,o,l;return(0,a.YH)(this,function(a){switch(r=n.initRunCommand,o=(i=n.allFiles).find(function(e){return["main.py","app.py"].includes(e)}),e){case"NPM":return[2,function(e){return D.apply(this,arguments)}(t)];case"REGULAR_RUN":var s;if(null==(l=null!=(s=i.filter(function(e){return!k.test(e)}).find(function(e){return C.test(e)}))?s:null))return[2,null];return[2,r.replace(C,l)];case"DJANGO":return[2,"python3 manage.py runserver 0.0.0.0:3000"];case"FLASK":return[2,"python ".concat(o)];case"FASTAPI":case"STARLETTE":return[2,"uvicorn ".concat(null==o?void 0:o.replace(".py",""),":app --host 0.0.0.0 --port 3000")];case"PYRAMID":return[2,"pserve development.ini"];case"STREAMLIT":return[2,"streamlit run ".concat(o)];case"RAILS":return[2,"bundle exec rails server --binding=0.0.0.0"];case"DOTNET":return[2,"dotnet run"];case"CARGO":return[2,"cargo run"];default:return[2,null]}})})).apply(this,arguments)}function R(){return(R=(0,r._)(function(e,n,t,r){var i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(0===t.length)return[2,{projType:"UNKNOWN",runCommand:null,compileCommand:null}];return[4,function(e,n){return x.apply(this,arguments)}(i={initRunCommand:e,isCompiled:n,allFiles:t},r)];case 1:return l={projType:o=a.sent()},[4,function(e,n,t){return E.apply(this,arguments)}(o,i,r)];case 2:return[2,(l.runCommand=a.sent(),l.compileCommand=function(e){switch(e){case"MAKE":return"make";case"CARGO":case"DOTNET":case"NPM":return"";default:return null}}(o),l)]}})})).apply(this,arguments)}var I=t(36937),T=t(27023),F=t(41358),P=t(85389),L=t(10342),U=t(77672),N=t(17844),O=t(93629),M=t(42793),H=t(18509),B=(0,M.i7)({"0%":{opacity:.1},"50%":{opacity:1},"100%":{opacity:.1}}),z=(0,H.x)({one:{opacity:.1,animation:"".concat(B," 1.5s ease-in-out infinite"),animationDelay:"0s"},two:{opacity:.1,animation:"".concat(B," 1.5s ease-in-out infinite"),animationDelay:"0.1s"},three:{opacity:"0.1",animation:"".concat(B," 1.5s ease-in-out infinite"),animationDelay:"0.2s"}});let W=function(e){var n=(0,L._)({},(0,U._)(e));return(0,l.FD)(l.FK,{children:[(0,l.Y)("span",(0,O._)((0,N._)({},n),{css:z.one,children:"."})),(0,l.Y)("span",(0,O._)((0,N._)({},n),{css:z.two,children:"."})),(0,l.Y)("span",(0,O._)((0,N._)({},n),{css:z.three,children:"."}))]})};function G(e){var n=e.children;return(0,l.Y)(F.ui,{background:"default",css:[T.wp.borderRadius(8),{width:"100%",height:"calc(100% - ".concat(I.LU.space2,")"),backgroundColor:I.LU.backgroundDefault,overflowY:"auto",marginTop:"0px"}],children:(0,l.Y)(P.S,{css:[{flex:"1 1 auto"}],p:16,justify:"center",align:"center",children:n})})}function V(){return(0,l.Y)(G,{children:(0,l.FD)(P.S,{children:[(0,l.Y)(P.S,{children:"We couldn't read your .replit file"}),(0,l.Y)("a",{css:[T.wp.pt(8),{fontSize:I.LU.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"View docs"})]})})}function Z(){return(0,l.Y)(G,{children:(0,l.Y)(P.S,{children:(0,l.FD)("p",{children:["Importing from GitHub",(0,l.Y)(W,{style:{color:I.LU.foregroundDefault}})]})})})}var j=t(75802),q=t(3594),K=t(11769),$=t(40259),J=t(81686),Q=t(4616),X=t(63456),ee=t(71872),en=P.D.a,et=(0,H.x)({root:[T.wp.maxWidth(420),T.wp.display.flex,T.wp.gap(12),T.wp.py(4),{margin:"0 auto"}],section:[T.wp.display.flex,T.wp.p(12),T.wp.gap(12)],loading:[T.wp.center,T.wp.flex.growAndShrink(1)],multiParagraph:[T.wp.flex.column,T.wp.gap(8),{a:[T.wp.display.inline]}]});let er=function(e){var n,t,w,S,_,A,C,k,x,D,E,F,L,U,N,O,M,H,B,z,W,G,er,ei,eo,ea,el,es,ec,eu,ed,ep,ef,eh,em,eg,ev,ey=e.flow,ew=(0,i._)(e,["flow"]),eb=(n=ew.closeConfigPane,t=ew.openSidebar,w=ew.onNewPaneSelected,S=ew.openConsole,_=(0,g.pE)("gitImport","boolean"),A=(0,h.A)(),k=(C=(0,y.A)()).fs,x=C.dotReplit,E=(D=(0,o._)((0,s.useState)(null),2))[0],F=D[1],U=(L=(0,o._)((0,s.useState)(null),2))[0],N=L[1],O=(0,s.useCallback)(function(){w({type:"codeEditor",data:{path:".replit"}})},[w]),(0,s.useEffect)(function(){if(!E)return x.watch(function(e){F(e.config),"NOT_FOUND"!==e.error&&N(e.error)})},[x,E]),H=(M=(0,o._)((0,s.useState)(!1),2))[0],B=M[1],W=(z=(0,o._)((0,s.useState)(""),2))[0],G=z[1],ei=(er=(0,o._)((0,s.useState)(""),2))[0],eo=er[1],el=(ea=(0,o._)((0,s.useState)(!1),2))[0],es=ea[1],eu=(ec=(0,o._)((0,s.useState)(Y.Unknown),2))[0],ed=ec[1],ef=(ep=(0,o._)((0,s.useState)(!1),2))[0],eh=ep[1],(0,s.useEffect)(function(){if(!ef)return k.watchDir(".git",{onChange:function(e){eh(e.length>0)},onMoveOrDelete:function(){eh(!0)},onError:function(){eh(!1)}})}),(0,s.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e,n,t,r,i,o,l,s,c,u,d,f,h,g,v,y,w;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!E)return[2];return n=(0,p.a8)(null!=(e=E.run)?e:void 0),r=(0,p.a8)(null!=(t=E.compile)?t:void 0),i=!!E.compile,[4,k.listFiles()];case 1:return o=a.sent(),[4,k.readDir(".git")];case 2:if(l=a.sent(),o.error||null==o.files||_&&l.error)return[2];return s=o.files,[4,function(e,n,t,r){return R.apply(this,arguments)}(n,i,s,k)];case 3:if(u=(c=a.sent()).projType,d=c.runCommand,f=c.compileCommand,h=s.includes("Procfile"),g=function(e,n){return e||n},v=h?g(n,d):g(d,n),y=f||r,G(v||""),eo(y),es(u!==Y.Unknown&&u!==Y.RegularRun),ed(u),!_)return[3,6];return v||m.vF.warn("Failed to autosuggest run command"),u===Y.Unknown&&m.vF.warn("Failed to detect project type"),w=b(v||"",y),[4,x.updateDotReplit(w)];case 4:return a.sent(),[4,k.flush()];case 5:a.sent(),k.persist({skipDebounce:!0}),a.label=6;case 6:return[2]}})})).apply(this,arguments)}(ef||!_)&&function(){e.apply(this,arguments)}()},[x,E,k,ef,_]),eg=(0,s.useCallback)((em=(0,r._)(function(e){var n,t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.run,t=e.compile,r=e.runChanged,i=e.compileChanged,o=e.projType,(0,v.u4)(v.AZ.NIX_GH_IMPORT_USED,{action:f.s.ConfigDone,isCompiled:""!==t,runChanged:r,compileChanged:i,projType:o,replId:A}),l=b(n,t),[4,x.updateDotReplit(l)];case 1:return a.sent(),k.flush().then(function(){k.persist({skipDebounce:!0})}),[2]}})}),function(e){return em.apply(this,arguments)}),[x,k,A]),{fs:k,applyConfig:eg,closeConfigPane:n,dotReplitConfig:E,dotReplitError:U,isApplyingConfig:H,setIsApplyingConfig:B,initialBuild:ei,initialRun:W,isFrameworkRecommended:el,projType:eu,openDotReplit:O,openSidebar:t,openConsole:S}),eS=(0,u.G)(),eY=eS.modules,e_=eS.configs,eA=(0,d.A)(),eC=(0,o._)((0,s.useState)("Overview"),2),ek=eC[0],ex=eC[1],eD=(0,s.useMemo)(function(){return null==eY?void 0:eY.filter(function(e){return"replit"!==e.id})},[eY]),eE=eb.dotReplitConfig,eR=eb.dotReplitError,eI=eb.initialRun,eT=eb.initialBuild,eF=void 0===eT?"":eT,eP=eb.openConsole,eL=eb.openDotReplit,eU=eb.applyConfig,eN=eb.isApplyingConfig,eO=eb.setIsApplyingConfig,eM=eb.closeConfigPane,eH=eb.openSidebar,eB=eb.projType,ez=!!eB&&eB===Y.Rails,eW=(0,c.W)(eI,function(e){if(!e)return{message:"Add a run command"}}),eG=(0,o._)((0,s.useState)(eF),2),eV=eG[0],eZ=eG[1];if((0,s.useEffect)(function(){eW.setValue(eI)},[eI]),(0,s.useEffect)(function(){eZ(null!=eF?eF:"")},[eF]),eR)return(0,l.Y)(V,{});if(!eE&&"githubImport"===ey)return(0,l.Y)(Z,{});if(!eY||!eD||!e_||!eA)return(0,l.Y)(P.S,{css:et.loading,children:(0,l.Y)(X.A,{})});switch(ek){case"ModuleSearch":return(0,l.Y)(q.m,{onBack:function(){return ex("Overview")},disableCategorySelection:!0,initialCategory:"Modules",openConsole:eP});case"Overview":return(0,l.FD)(P.S,{css:et.root,children:[(0,l.FD)(P.S,{css:et.section,children:[(0,l.Y)(Q.Y9,{variant:"headerDefault",level:1,children:"Configure your App"}),(0,l.Y)(J.s,{color:"dimmer",css:et.multiParagraph,children:"githubImport"===ey?(0,l.FD)(l.FK,{children:[(0,l.FD)("p",{children:["Your code was successfully imported from GitHub. We've created a"," ",(0,l.Y)("a",{href:"",onClick:function(e){e.preventDefault(),eL()},children:".replit file"}),", which configures your App's behavior."," ",(0,l.Y)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl#replit-configuration-file",target:"_blank",rel:"noopener noreferrer",children:"Learn more about .replit files."})]}),(0,l.FD)("p",{children:["To get started, verify our recommended platform dependencies and commands. If you're still deciding, try"," ",(0,l.Y)(en,{onClick:function(){return null==ew?void 0:ew.onNewPaneSelected({type:"ghostwriterChat"})},children:"asking AI"}),"."]})]}):(0,l.Y)(l.FK,{children:(0,l.FD)("p",{children:["Before configuring your Run command, make sure you've installed any"," ",(0,l.Y)(en,{onClick:function(){return null==ew?void 0:ew.onNewPaneSelected({type:"dependencies"})},children:"languages and packages"})," ","necessary for your project. If you're still deciding, try"," ",(0,l.Y)(en,{onClick:function(){return null==ew?void 0:ew.onNewPaneSelected({type:"ghostwriterChat"})},children:"asking AI"}),"."]})})})]}),"githubImport"===ey?(0,l.FD)(P.S,{css:et.section,children:[(0,l.Y)(Q.Y9,{variant:"subheadDefault",level:2,children:"Modules"}),(0,l.Y)(Q.EY,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers."}),(0,l.Y)(j.A,{modules:eD}),(0,l.Y)(K.$n,{stretch:!0,colorway:"primary",variant:"outlined",type:"submit",text:"Add more modules",onClick:function(){ex("ModuleSearch")}})]}):null,(0,l.FD)(P.S,{css:et.section,children:[(0,l.Y)(P.S,{row:!0,justify:"space-between",children:(0,l.Y)(Q.Y9,{variant:"subheadDefault",level:2,children:"Commands"})}),(0,l.Y)("form",{onSubmit:(ev=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:if(e.preventDefault(),eO(!0),!eW.value)return eW.validate(),[2];return[4,eU({run:eW.value,compile:null!=eV?eV:"",runChanged:eW.value!==eI,compileChanged:eV!==eF,projType:eB})];case 1:return n.sent(),"githubImport"===ey&&(eM(),null==eH||eH()),eO(!1),[2]}})}),function(e){return ev.apply(this,arguments)}),css:[{width:"100%"}],children:(0,l.Y)(P.S,{gap:8,children:(0,l.FD)(P.S,{gap:8,children:[(0,l.FD)(P.S,{gap:8,children:[eF?(0,l.FD)(P.S,{gap:4,children:[(0,l.Y)("label",{htmlFor:"compile-sel",children:"Compile command"}),(0,l.Y)(Q.EY,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,l.Y)($.pd,{disabled:eN,id:"compile-sel",type:"text",value:eV,placeholder:"Enter a command to compile the program",onChange:function(e){eZ(e.currentTarget.value)},css:{"&:disabled":{color:I.LU.foregroundDimmer}}})]}):null,(0,l.Y)("label",{htmlFor:"run-sel",css:[T.wp.mt(4)],"data-cy":"import-config-run-command",children:"Run command"}),(0,l.Y)($.pd,{disabled:eN,id:"run-sel",dataCy:"import-config-run-command-input",type:"text",value:eW.value,placeholder:"Enter a command to run the program",onChange:function(e){eW.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:I.LU.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),eW.error||!eW.value?(0,l.FD)(P.S,{css:[T.wp.color.accentNegativeDefault,T.wp.rowWithGap(4),T.wp.align.center],children:[(0,l.Y)(ee.A,{size:12}),(0,l.Y)(P.S,{children:eW.error?eW.error.message:"Add a run command"})]}):null]}),(0,l.FD)(Q.EY,{color:"dimmer",variant:"small",children:["Use either a dev server or start command.",(0,l.Y)(en,{css:T.wp.color.accentPrimaryStronger,target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl#run-command",rel:"noopener noreferrer",children:"Not sure what to use or running multiple apps?"})]}),ez?(0,l.Y)(P.S,{children:(0,l.FD)(Q.EY,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,l.FD)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/additional-resources/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit’s features."]})}):null,(0,l.Y)(P.S,{css:[T.wp.flex.column,T.wp.pt(16)],children:(0,l.Y)(K.$n,{stretch:!0,colorway:"primary",type:"submit",text:eN?"Saving...":"githubImport"===ey?"Confirm and close":"Save",loading:eN,disabled:eN||!!eW.error||!eW.value,dataCy:"import-config-done"})})]})})})]})]})}}},39022:(e,n,t)=>{"use strict";t.d(n,{p:()=>u});var r=t(81073),i=t(21462),o=t(42793),a=t(36937),l=t(27023),s=t(11769),c=(0,o.AH)(l.wp.display.flex,l.wp.align.center,l.wp.height(30),{"input, button":[l.wp.my(0),l.wp.mx(4)],input:[l.wp.py(4),l.wp.px(8),l.wp.backgroundColor.backgroundDefault,l.wp.color.foregroundDefault,l.wp.height(24),l.wp.width(85),l.wp.borderRadius(4),l.wp.focusRing,{border:"none",boxShadow:"none","&::placeholder":[l.wp.color.foregroundDefault],"&:focus":[{outline:"none",borderColor:a.LU.accentPrimaryDefault}]}]});function u(e){var n=e.searchValue,t=e.setSearchValue,o=e.findNext,a=e.findPrevious,l=e.exit,u=(0,i.useRef)(null);(0,i.useEffect)(function(){u.current&&u.current.focus()},[]);var d=function(e){if("Escape"===e.key)return void l();"Enter"===e.key&&(e.shiftKey?a(n):o(n))};return(0,r.FD)("div",{css:c,children:[(0,r.Y)("input",{ref:u,placeholder:"Find",value:n,onChange:function(e){return t(e.target.value)},onKeyDown:function(e){return d(e)}}),(0,r.Y)(s.$n,{size:"small",onClick:function(){return o(n)},text:"Next"}),(0,r.Y)(s.$n,{size:"small",onClick:function(){return a(n)},text:"Previous"}),(0,r.Y)(s.$n,{size:"small",onClick:l,text:"Exit"})]})}},39159:(e,n,t)=>{"use strict";t.d(n,{b:()=>s});var r=t(12694),i=t(86105),o=t(21462),a=t(62721),l=t(92429);function s(e,n){var t,s,c=(0,a.yB)(),u=(0,l.X)(),d=null!=(s=null==c?void 0:c.client)?s:null,p=(0,o.useRef)(null),f=(t=(0,r._)((0,o.useState)(),2)[1],(0,o.useCallback)(function(e){try{t(function(){throw e})}catch(e){}},[]));(0,o.useEffect)(function(){if(p.current&&(p.current.abort(),p.current=null),d&&u){var n=new AbortController;p.current=n;var t=n.signal,r=[];t.addEventListener("abort",function(){var e=[],n=!0,t=!1,i=void 0;try{for(var o,a=r[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;try{l()}catch(n){e.push(n)}}}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}e.length&&(1===e.length?f(e[0]):"undefined"!=typeof AggregateError?f(AggregateError(e,"Multiple errors occurred during cleanup")):f(Error("Multiple errors occurred during cleanup")))});var i=function(e){if(t.aborted)try{e()}catch(e){f(e)}else r.push(e)};try{Promise.resolve(e(d,{session:u,signal:t,addCleanup:i})).then(function(e){e&&i(e)}).catch(function(e){n.abort(),f(e)})}catch(e){throw n.abort(),e}return function(){n.abort()}}},[d,u,f].concat((0,i._)(n)))}},39167:(e,n,t)=>{"use strict";t.d(n,{A:()=>c,E:()=>u});var r=t(81073),i=t(36937),o=t(27023),a=t(4616),l=t(85389),s=t(55576);let c=function(e){var n=e.textVariant,t=e.showImage;return(0,r.FD)(l.S,{css:[o.wp.center,o.wp.textAlign.center,o.wp.px(16),o.wp.colWithGap(8),o.wp.flex.growAndShrink(1)],children:[(0,r.Y)(u,{textVariant:n}),t?(0,r.Y)(s.A,{src:"/public/images/ghostwriter/orb.png",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(i.LU.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1}):null]})};function u(e){var n=e.textVariant;return(0,r.FD)(a.EY,{variant:n,children:["AI Chat is currently unavailable. For more information, visit"," ",(0,r.Y)("a",{href:"https://status.replit.com",target:"_blank",children:"our status page."})]})}},39218:(e,n,t)=>{"use strict";t.d(n,{J:()=>eC,g:()=>eA});var r=t(29935),i=t(82643),o=t(81073),a=t(21462),l=t(79203),s=t(17844),c=t(12584),u=t(41114),d=t(86997),p=t(68389);function f(){var e=(0,c._)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},m=(0,u.J1)(f(),p.yH),g=t(13843),v=t(30331),y=t(22940),w=t(5932),b=t(97626),S=t(62792),Y=t(83846),_=t(12694),A=t(9604);let C=(0,a.forwardRef)(function(e,n){var t=(0,_._)((0,l.fp)(A.NF),1)[0],r=(0,l.Xr)(A.b8),i=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useImperativeHandle)(n,function(){return i.current}),t&&i.current&&(i.current.setAttribute("aria-valuemin",String(A.xP[0])),i.current.setAttribute("aria-valuemax",String(A.xP[A.xP.length-1])),i.current.setAttribute("aria-valuenow",String(t))),(0,a.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),s.current=requestAnimationFrame(e))};return e(),function(){s.current&&cancelAnimationFrame(s.current)}},[r]),(0,a.useMemo)(function(){return(0,o.Y)("div",{ref:i,role:"slider",tabIndex:0,css:[A.sC,{left:"calc((100% - 16px) * var(--cpu-progress, 0))",transition:"left var(--cpu-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var k=t(44074),x=t(36937),D="min(var(--point), var(--position))",E="max(var(--point), var(--position))";let R=(0,a.forwardRef)(function(e,n){var t=(0,l.md)(A.C5),r=t.overage,i=t.point,s=(0,l.md)(A.Yb),c=(0,a.useRef)(null);return(0,a.useEffect)(function(){(0,k.U)(c,"--opacity",String(r))},[r]),(0,a.useEffect)(function(){(0,k.U)(c,"--point",String(100*i)+"%")},[i]),(0,a.useEffect)(function(){(0,k.U)(c,"--position",String(100*s)+"%")},[s]),(0,a.useMemo)(function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,o.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:x.LU.interactiveBorder,borderRadius:"2px"},children:(0,o.Y)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(D,", \n                  ").concat(x.LU.interactiveBorderHover," ").concat(D,", \n                  ").concat(x.LU.interactiveBorderHover," ").concat(E,", \n                  transparent ").concat(E," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[n])});var I=t(18509),T=t(85389),F=(0,I.x)({container:{flexDirection:"row",justifyContent:"space-between",height:6,paddingLeft:8,paddingRight:8},mark:{width:1,backgroundColor:x.LU.outlineStronger}});function P(e){var n=e.list;return(0,o.Y)(T.S,{css:F.container,children:n.map(function(e){return(0,o.Y)(T.S,{css:F.mark},e)})})}var L=t(27023),U=L.kL.min(320),N=(0,I.x)({container:L.wp.colWithGap(4),label:[L.wp.flex.column,L.wp.pb(4),(0,Y._)({},U,[L.wp.flex.row,L.wp.justify.spaceBetween,L.wp.pb(0)])],resource:L.wp.fontWeight.medium,cost:[L.wp.rowWithGap(1),L.wp.align.baseline]}),O=t(7868),M=t(4616),H=A.Rp;function B(e){var n=e.setAttrs,t=(0,_._)((0,l.fp)(A.yh),2),r=t[0],i=t[1],s=(0,_._)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useCallback)(function(e){n.setTransitionTime(e)},[n]),m=(0,a.useCallback)(function(e){n.setProgress(e)},[n]);return void 0===r||c||(m(r/H),h(A.tH.Normal)),(0,a.useEffect)(function(){if(void 0!==r&&p.current&&f.current&&!c){var e=p.current,n=f.current,t=function(t){if(0===t.button){u(!0),n.focus();var r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=r.width,l=o.width,s=t.target===e?l/2:t.clientX-o.left,c=null,d=function(e){var n=Math.max(0,Math.min(1,(e-r.left-s)/(a-l)));n!==c&&(c=n,m(n),i(Math.round(n*H)))};d(t.clientX);var p=function(e){h(A.tH.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},f=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),h(A.tH.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f),t.preventDefault(),t.stopPropagation()}};return e.addEventListener("pointerdown",t),n.addEventListener("pointerdown",t),function(){e.removeEventListener("pointerdown",t),n.removeEventListener("pointerdown",t)}}},[r,c,i,m,h]),(0,a.useEffect)(function(){if(void 0!==r&&f.current&&!c){var e=f.current,n=function(e){if(void 0!==r&&A.DO.includes(e.key)){var n=Math.max(0,r-1),t=Math.min(H,r+1),o=null;switch(e.key){case"ArrowLeft":o=n;break;case"ArrowRight":o=t;break;case"Home":o=0;break;case"End":o=H}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}},[c,r,i]),(0,a.useMemo)(function(){return(0,o.FD)(T.S,{gap:8,children:[(0,o.FD)(T.S,{innerRef:d,css:A.uu,children:[(0,o.Y)(R,{ref:p}),(0,o.Y)(C,{ref:f})]}),(0,o.Y)(P,{list:A.xP})]})},[])}function z(e){var n=e.setAttrs,t=(0,_._)((0,l.fp)(A.NF),1)[0],r=(0,_._)((0,l.fp)(A.WM),1)[0],i=(0,l.Xr)(A.kR);return(0,a.useEffect)(function(){i()},[i,t]),(0,o.FD)(T.S,{css:N.container,children:[(0,o.FD)(T.S,{css:N.label,children:[(0,o.FD)(M.EY,{css:N.resource,multiline:!1,children:[t," vCPU",t>1?"s":""]}),(0,o.FD)(T.S,{css:N.cost,children:[(0,o.FD)(M.EY,{color:"dimmer",multiline:!1,children:[r," ",(0,O.A)("compute unit",r)]}),(0,o.Y)(M.EY,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,o.Y)(B,{setAttrs:n})]})}let W=(0,a.forwardRef)(function(e,n){var t=(0,_._)((0,l.fp)(A.No),1)[0],r=(0,l.Xr)(A.TJ),i=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useImperativeHandle)(n,function(){return i.current}),t&&i.current&&(i.current.setAttribute("aria-valuemin",String(A.T1[0])),i.current.setAttribute("aria-valuemax",String(A.T1[A.T1.length-1])),i.current.setAttribute("aria-valuenow",String(t))),(0,a.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),s.current=requestAnimationFrame(e))};return e(),function(){s.current&&cancelAnimationFrame(s.current)}},[r]),(0,a.useMemo)(function(){return(0,o.Y)("div",{ref:i,role:"slider",tabIndex:0,"data-ram-thumb":!0,css:[A.sC,{left:"calc((100% - 16px) * var(--ram-progress, 0))",transition:"left var(--ram-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var G="min(var(--point), var(--position))",V="max(var(--point), var(--position))";let Z=(0,a.forwardRef)(function(e,n){var t=(0,l.md)(A.G),r=t.overage,i=t.point,s=(0,l.md)(A.Sh),c=(0,a.useRef)(null);return(0,a.useEffect)(function(){(0,k.U)(c,"--opacity",String(r))},[r]),(0,a.useEffect)(function(){(0,k.U)(c,"--point",String(100*i)+"%")},[i]),(0,a.useEffect)(function(){(0,k.U)(c,"--position",String(100*s)+"%")},[s]),(0,a.useMemo)(function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,o.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:x.LU.interactiveBorder,borderRadius:"2px"},children:(0,o.Y)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(G,", \n                  ").concat(x.LU.interactiveBorderHover," ").concat(G,", \n                  ").concat(x.LU.interactiveBorderHover," ").concat(V,", \n                  transparent ").concat(V," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[n])});var j=A.VW;function q(e){var n=e.setAttrs,t=(0,_._)((0,l.fp)(A.gb),2),r=t[0],i=t[1],s=(0,_._)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useCallback)(function(e){n.setTransitionTime(e)},[n]),m=(0,a.useCallback)(function(e){n.setProgress(e)},[n]);return void 0===r||c||(m(r/j),h(A.tH.Normal)),(0,a.useEffect)(function(){if(void 0!==r&&p.current&&f.current&&!c){var e=p.current,n=f.current,t=function(t){if(0===t.button){u(!0),n.focus();var r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=r.width,l=o.width,s=t.target===e?l/2:t.clientX-o.left,c=null,d=function(e){var n=Math.max(0,Math.min(1,(e-r.left-s)/(a-l)));n!==c&&(c=n,m(n),i(Math.round(n*j)))};d(t.clientX);var p=function(e){h(A.tH.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},f=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),h(A.tH.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f),t.preventDefault(),t.stopPropagation()}};return e.addEventListener("pointerdown",t),n.addEventListener("pointerdown",t),function(){e.removeEventListener("pointerdown",t),n.removeEventListener("pointerdown",t)}}},[r,c,i,m,h]),(0,a.useEffect)(function(){if(void 0!==r&&f.current&&!c){var e=f.current,n=function(e){if(void 0!==r&&A.DO.includes(e.key)){var n=Math.max(0,r-1),t=Math.min(j,r+1),o=null;switch(e.key){case"ArrowLeft":o=n;break;case"ArrowRight":o=t;break;case"Home":o=0;break;case"End":o=j}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}},[c,r,i]),(0,a.useMemo)(function(){return(0,o.FD)(T.S,{gap:8,children:[(0,o.FD)(T.S,{innerRef:d,css:A.uu,children:[(0,o.Y)(Z,{ref:p}),(0,o.Y)(W,{ref:f})]}),(0,o.Y)(P,{list:A.T1})]})},[])}function K(e){var n=e.setAttrs,t=(0,_._)((0,l.fp)(A.No),1)[0],r=(0,_._)((0,l.fp)(A.mN),1)[0],i=(0,l.Xr)(A.k4);return(0,a.useEffect)(function(){i()},[i,t]),(0,o.FD)(T.S,{css:N.container,children:[(0,o.FD)(T.S,{css:N.label,children:[(0,o.FD)(M.EY,{css:N.resource,multiline:!1,children:[t," GiB RAM"]}),(0,o.FD)(T.S,{css:N.cost,children:[(0,o.FD)(M.EY,{color:"dimmer",multiline:!1,children:[r," ",(0,O.A)("compute unit",r)]}),(0,o.Y)(M.EY,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,o.Y)(q,{setAttrs:n})]})}var $=t(93629),J=(0,I.x)({container:[L.wp.width("100%"),L.wp.position.absolute,L.wp.top(60),L.wp.bottom(21),L.wp.transition.snappy,L.wp.zIndex(1),(0,Y._)({},L.kL.min(320),L.wp.top(34))],svg:[L.wp.width("100%"),L.wp.height("100%"),L.wp.overflow("visible")],overage:{"--opacity":0,opacity:"var(--opacity)",transition:"opacity 80ms ease-out"}});function Q(){var e,n=(0,l.md)(A.NT),t=(0,a.useRef)(null),r=(0,a.useRef)(null),i=(0,a.useRef)((null==(e=r.current)?void 0:e.offsetWidth)||0),c=(0,l.md)(A.b8),u=(0,l.md)(A.TJ);(0,a.useEffect)(function(){r.current&&(i.current=r.current.offsetWidth)});var d={x1:c/(i.current-16)*100,x2:u/(i.current-16)*100,y1:0,y2:100,strokeWidth:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"};return(0,a.useEffect)(function(){(0,k.U)(t,"--opacity",String(Math.pow(n,1/3)))},[n]),(0,o.Y)(T.S,{css:J.container,px:8,id:"rope",innerRef:r,children:(0,o.FD)("svg",{height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",css:J.svg,children:[(0,o.Y)("line",(0,$._)((0,s._)({},d),{stroke:x.LU.outlineDimmer})),(0,o.Y)("line",(0,$._)((0,s._)({},d),{stroke:x.LU.outlineDefault,strokeDasharray:8})),(0,o.FD)("g",{ref:t,css:J.overage,children:[(0,o.Y)("line",(0,$._)((0,s._)({},d),{stroke:x.LU.accentPrimaryDefault})),(0,o.Y)("line",(0,$._)((0,s._)({},d),{stroke:x.LU.accentPrimaryStrongest,strokeDasharray:8}))]})]})})}var X=t(13385),ee=t(85051),en=t(11769),et=t(41358),er=t(78626),ei=t(565),eo=t(48604),ea=[L.wp.borderRadius(8)],el=(0,I.x)({container:[ea],disabled:[ea,{opacity:.5,pointerEvents:"none"}],bottom:[L.wp.border({direction:"top",color:x.LU.outlineDimmer})],edit:ee.b.outlined,overviewLine:[L.wp.flex.column,(0,Y._)({},L.kL.min(320),[L.wp.flex.row,L.wp.justify.spaceBetween])],overviewValue:[L.wp.fontWeight.medium],cost:[L.wp.flex.row,L.wp.align.baseline,{gap:1}],builder:[L.wp.position.relative,{"--cpu-transition-time":A.tH.Normal,"--cpu-progress":1,"--ram-transition-time":A.tH.Normal,"--ram-progress":1,"#rope":{opacity:0}," *":{transitionTimingFunction:"ease"},":hover, :focus-within":{" #rope":{opacity:1}}}]});function es(e){var n=e.machineConfiguration,t=e.disabled,r=e.toggleEditable,i=void 0===r||r,s=(0,a.useRef)(null),c=(0,_._)((0,a.useState)(!i),2),u=c[0],d=c[1],p=(0,l.md)(A.NF),f=(0,l.md)(A.No),h=(0,l.md)(A.WM),m=(0,l.md)(A.mN),g=(0,l.md)(A.Je),v=(0,l.md)(A.GS),y=(0,l.Xr)(A.ZH),w=(0,l.Xr)(A.Yb),b=(0,l.Xr)(A.Sh),S=(0,l.Xr)(A.yh),Y=(0,l.Xr)(A.gb);return(0,a.useEffect)(function(){y((0,X.xC)().autoscaleDeploymentCostDetails)},[y]),(0,a.useEffect)(function(){if(n){var e=A.xP.findIndex(function(e){return e.toString()===n.vcpu}),t=A.T1.findIndex(function(e){return e.toString()===n.memory});S(e),Y(t)}},[n,S,Y]),(0,o.FD)(et.ui,{elevated:!0,css:t?el.disabled:el.container,children:[(0,o.FD)(T.S,{p:16,gap:12,children:[(0,o.FD)(T.S,{row:!0,gap:8,children:[(0,o.FD)(T.S,{grow:!0,shrink:!0,gap:4,children:[(0,o.FD)(T.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(ei.A,{}),(0,o.Y)(M.EY,{variant:"subheadDefault",multiline:!1,children:"Machine power"})]}),(0,o.Y)(M.EY,{multiline:!0,color:"dimmer",children:"The power level for each machine that spins up upon any request"})]}),i?(0,o.Y)(en.$n,{text:u?"Done":"Edit",css:el.edit,onClick:function(){return d(!u)}}):null]}),u?(0,o.FD)(o.FK,{children:[(0,o.FD)(T.S,{css:el.builder,gap:12,innerRef:s,children:[(0,o.Y)(Q,{}),(0,o.Y)(z,{setAttrs:{setTransitionTime:function(e){(0,k.U)(s,"--cpu-transition-time",e)},setProgress:function(e){(0,k.U)(s,"--cpu-progress",e.toString()),w(e)}}}),(0,o.Y)(K,{setAttrs:{setTransitionTime:function(e){(0,k.U)(s,"--ram-transition-time",e)},setProgress:function(e){(0,k.U)(s,"--ram-progress",e.toString()),b(e)}}})]}),(0,o.Y)(M.EY,{color:"dimmer",children:"Only some configurations are valid. When you change one slider, the other one will automatically adjust to remain valid."})]}):(0,o.FD)(T.S,{gap:8,children:[(0,o.FD)(T.S,{css:el.overviewLine,children:[(0,o.FD)(M.EY,{css:el.overviewValue,multiline:!1,children:[p," vCPU",p>1?"s":""]}),(0,o.FD)(T.S,{css:el.cost,children:[(0,o.FD)(M.EY,{multiline:!1,color:"dimmer",children:[h," ",(0,O.A)("compute unit",h)]}),(0,o.Y)(M.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]}),(0,o.FD)(T.S,{css:el.overviewLine,children:[(0,o.FD)(M.EY,{css:el.overviewValue,multiline:!1,children:[f," GiB RAM"]}),(0,o.FD)(T.S,{css:el.cost,children:[(0,o.FD)(M.EY,{multiline:!1,color:"dimmer",children:[m," ",(0,O.A)("compute unit",m)]}),(0,o.Y)(M.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]})]})]}),(0,o.Y)(T.S,{css:el.bottom,p:16,children:(0,o.FD)(T.S,{css:el.overviewLine,children:[(0,o.Y)(M.EY,{css:el.overviewValue,multiline:!1,children:"Total per machine"}),(0,o.FD)(T.S,{shrink:!0,align:"center",row:!0,gap:4,children:[(0,o.FD)(T.S,{css:el.cost,children:[(0,o.FD)(M.EY,{multiline:!1,children:[v," ",(0,O.A)("compute unit",v)]}),(0,o.Y)(M.EY,{variant:"small",color:"dimmer",multiline:!1,children:"/sec"})]}),(0,o.Y)(er.m_,{tooltip:(0,o.FD)(T.S,{css:el.cost,children:[(0,o.FD)(M.EY,{multiline:!1,children:["$",g.toFixed(6)]}),(0,o.Y)(M.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]}),children:(0,o.Y)(eo.A,{color:x.LU.foregroundDimmest})})]})]})})]})}var ec=t(31083);let eu=(0,a.forwardRef)(function(e,n){var t=(0,_._)((0,l.fp)(ec.h0),1)[0],r=(0,a.useRef)(null);return(0,a.useImperativeHandle)(n,function(){return r.current}),t&&r.current&&(r.current.setAttribute("aria-valuemin",String(ec.hK[0])),r.current.setAttribute("aria-valuemax",String(ec.hK[ec.hK.length-1])),r.current.setAttribute("aria-valuenow",String(t))),(0,a.useMemo)(function(){return(0,o.Y)("div",{ref:r,role:"slider",tabIndex:0,css:[ec.sC,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})},[])});var ed="min(var(--point), var(--position))",ep="max(var(--point), var(--position))";let ef=(0,a.forwardRef)(function(e,n){var t=(0,l.md)(ec.sh),r=t.overage,i=t.point,s=(0,l.md)(ec.o2),c=(0,a.useRef)(null);return(0,a.useEffect)(function(){(0,k.U)(c,"--opacity",String(r))},[r]),(0,a.useEffect)(function(){(0,k.U)(c,"--point",String(100*i)+"%")},[i]),(0,a.useEffect)(function(){(0,k.U)(c,"--position",String(100*s)+"%")},[s]),(0,a.useMemo)(function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,o.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:x.LU.interactiveBorder,borderRadius:"2px"},children:(0,o.Y)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(ed,", \n                  ").concat(x.LU.interactiveBorderHover," ").concat(ed,", \n                  ").concat(x.LU.interactiveBorderHover," ").concat(ep,", \n                  transparent ").concat(ep," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[n])});var eh=ec.i_;function em(e){var n=e.setAttrs,t=(0,_._)((0,l.fp)(ec.Md),2),r=t[0],i=t[1],s=(0,_._)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useCallback)(function(e){n.setTransitionTime(e)},[n]),m=(0,a.useCallback)(function(e){n.setProgress(e)},[n]);return void 0===r||c||(m(r/eh),h(ec.tH.Normal)),(0,a.useEffect)(function(){if(void 0!==r&&p.current&&f.current&&!c){var e=p.current,n=f.current,t=function(t){if(0===t.button){u(!0),n.focus();var r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=r.width,l=o.width,s=t.target===e?l/2:t.clientX-o.left,c=null,d=function(e){var n=Math.max(0,Math.min(1,(e-r.left-s)/(a-l)));n!==c&&(c=n,m(n),i(Math.round(n*eh)))};d(t.clientX);var p=function(e){h(ec.tH.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},f=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),h(ec.tH.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f),t.preventDefault(),t.stopPropagation()}};return e.addEventListener("pointerdown",t),n.addEventListener("pointerdown",t),function(){e.removeEventListener("pointerdown",t),n.removeEventListener("pointerdown",t)}}},[r,c,i,m,h]),(0,a.useEffect)(function(){if(void 0!==r&&f.current&&!c){var e=f.current,n=function(e){if(void 0!==r&&ec.DO.includes(e.key)){var n=Math.max(0,r-1),t=Math.min(eh,r+1),o=null;switch(e.key){case"ArrowLeft":o=n;break;case"ArrowRight":o=t;break;case"Home":o=0;break;case"End":o=eh}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}},[c,r,i]),(0,a.useMemo)(function(){return(0,o.Y)(T.S,{gap:8,children:(0,o.FD)(T.S,{innerRef:d,css:ec.uu,children:[(0,o.Y)(ef,{ref:p}),(0,o.Y)(eu,{ref:f})]})})},[])}function eg(e){var n=e.setAttrs,t=(0,_._)((0,l.fp)(ec.h0),1)[0],r=(0,_._)((0,l.fp)(ec.D_),1)[0],i=(0,_._)((0,l.fp)(ec.Wt),1)[0];return(0,o.FD)(T.S,{css:N.container,children:[(0,o.FD)(T.S,{css:N.label,children:[(0,o.FD)(M.EY,{css:N.resource,multiline:!1,children:[t," ",(0,O.A)("machine",t)]}),(0,o.FD)(T.S,{shrink:!0,align:"center",row:!0,gap:4,children:[(0,o.FD)(T.S,{css:N.cost,children:[(0,o.FD)(M.EY,{multiline:!1,children:[i," compute units"]}),(0,o.Y)(M.EY,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,o.Y)(er.m_,{tooltip:(0,o.FD)(T.S,{css:N.cost,children:[(0,o.FD)(M.EY,{multiline:!1,children:["$",r]}),(0,o.Y)(M.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,o.Y)(eo.A,{color:x.LU.foregroundDimmest})})]})]}),(0,o.Y)(em,{setAttrs:n})]})}var ev=t(62183),ey=[L.wp.colWithGap(12),L.wp.borderRadius("container"),L.wp.p(16)],ew=(0,I.x)({container:[ey],disabled:[ey,{opacity:.5,pointerEvents:"none"}],builder:[L.wp.position.relative,{"--max-instances-transition-time":ec.tH.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function eb(e){var n=e.maxMachineInstances,t=e.disabled,r=e.onError,i=(0,a.useRef)(null),s=(0,l.Xr)(ec.o2),c=(0,l.Xr)(ec.Md);return(0,a.useEffect)(function(){if(n){var e=ec.hK.indexOf(n);if(-1===e)return void r("An error occurred while setting selected max machine instances.");c(e)}},[n,c,r]),(0,o.FD)(et.ui,{elevated:!0,css:t?ew.disabled:ew.container,children:[(0,o.FD)(T.S,{gap:4,children:[(0,o.FD)(T.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(ev.A,{}),(0,o.Y)(M.EY,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,o.Y)(M.EY,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,o.Y)(T.S,{css:ew.builder,gap:8,innerRef:i,children:(0,o.Y)(eg,{setAttrs:{setTransitionTime:function(e){(0,k.U)(i,"--max-instances-transition-time",e)},setProgress:function(e){(0,k.U)(i,"--max-instances-progress",e.toString()),s(e)}}})})]})}var eS=t(16240),eY=t(54251),e_=t(1035);function eA(e){var n,t,r=e.onError,i=(n={onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&r("Something went wrong")},onError:function(e){return r(e.message)}},t=(0,s._)({},h,n),d.I(m,t)),o=i.data,a=i.loading;return{machineConfigurations:(null==o?void 0:o.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?o.hostingMachineConfigurations.results:null,loading:a}}var eC=function(e){var n,t=(0,y.u)(),s=(0,v.i$)(),c=(0,v.cF)(),u=void 0!==(0,v.tq)(),d=!u&&"string"!=typeof s,p=(0,l.md)(A.NF),f=(0,l.md)(A.No),h=(0,l.md)(ec.h0),m=eA({onError:e.onError}),Y=m.machineConfigurations,_=m.loading;(0,a.useEffect)(function(){(0,b.Ae)({context:S.P.AutoscaleMachineConfiguration})},[]);var C=(n=(0,r._)(function(){var n,t,r,o;return(0,i.YH)(this,function(i){return(n=null==Y?void 0:Y.find(function(e){var n=e.vcpu,t=e.memory;return p.toString()===n&&f.toString()===t}))?(t=n.id,r=n.label,o=n.slug,e.onConfirm({configurationId:t,configurationLabel:r,configurationSlug:o,maxInstances:h})):e.onError("An error occurred trying to validate selected machine configuration"),[2]})}),function(){return n.apply(this,arguments)}),k=_||e.fetching||u||t!==w.d.Ready;return(0,o.FD)(o.FK,{children:[(0,o.Y)(eS.A,{maxWidth:!0,children:(0,o.Y)(eY.fw,{onBack:function(){e.onBack()}})}),(0,o.Y)(eS.A,{maxWidth:!0,children:(0,o.FD)(T.S,{gap:16,children:[(0,o.FD)(T.S,{gap:4,children:[(0,o.Y)(M.EY,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,o.Y)(M.EY,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,o.FD)(T.S,{gap:16,children:[(0,o.Y)(es,{machineConfiguration:null==c?void 0:c.machineConfiguration,disabled:k}),(0,o.Y)(eb,{maxMachineInstances:null==c?void 0:c.maxMachineInstances,disabled:k,onError:e.onError})]}),(0,o.FD)(T.S,{gap:8,pt:8,children:[(0,o.Y)(en.$n,{colorway:"primary",text:d?"Approve and configure build settings":"Approve and update",iconRight:(0,o.Y)(e_.A,{}),onClick:C,loading:_}),(0,o.FD)(M.EY,{color:"dimmest",children:["Your deployed app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,o.Y)("a",{href:g.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})}},39264:(e,n,t)=>{"use strict";t.d(n,{I:()=>s,f:()=>l});var r=t(12584),i=t(41114);function o(){var e=(0,r._)(['\n  fragment ReplEnvironmentTourCurrentUser on CurrentUser {\n    id\n    hasSeenProjectsTour2024: tourSeen(name: "workspace-repo-projects-tour")\n    hasSeenSidebarTour2022: tourSeen(name: "workspace-desktop-sidebar-tour")\n    hasSeenWorkspaceTour2021: tourSeen(name: "workspace-desktop-tour")\n    hasSeenWorkspaceTour2022: tourSeen(name: "workspace-desktop-new-user-tour")\n    hasSeenWorkspaceTour2024: tourSeen(name: "workspace-desktop-tour-2024")\n    timeCreated\n  }\n']);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment ReplEnvironmentTourRepl on Repl {\n    id\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n        }\n      }\n    }\n    lesson {\n      id\n    }\n    project {\n      id\n    }\n    config {\n      isInPlanningPhase\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,i.J1)(o()),s=(0,i.J1)(a())},39363:(e,n,t)=>{"use strict";t.d(n,{A:()=>m,v:()=>h});var r=t(29935),i=t(86105),o=t(82643),a=t(57829),l=t(6164),s=t(28079),c=t(52968),u=t(42544),d=t(14596),p=t(38674),f=t(33090),h=".replit";function m(e){var n,t,m,g,v=e.container,y=e.fs,w=e.ctx,b=(0,l.Ay)();b.setMaxListeners(50);var S=null,Y=null,_=null;function A(){return C.apply(this,arguments)}function C(){return(C=(0,r._)(function(){return(0,o.YH)(this,function(e){return S&&"open"===S.status?[2,S]:[2,new Promise(function(e){b.once(d.sV.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}(function(){x.apply(this,arguments)})(),v.openChannel({service:"dotreplit"},function(e){var n=e.channel;return S=n,b.emit(d.sV.CHANNEL_OPENED,n),function(){S=null}});var k=!1;function x(){return(x=(0,r._)(function(){return(0,o.YH)(this,function(e){return y.watchDir(p.Dl,{onChange:function(e){if(!e.some(function(e){return e.filename===h&&e.type===f.pt.File})){(null==Y?void 0:Y.error)!==d.DO.NotFound&&(Y={error:d.DO.NotFound,errorMessage:"",config:null},b.emit(d.sV.CHANGE,Y));return}k||(k=!0,y.watchFile(h,{onChange:function(){Y=null,I.getConfig({bypassCache:!0}).then(function(e){b.emit(d.sV.CHANGE,e)})},onMoveOrDelete:function(){k=!1},onError:function(e,n){Y=null,k=!1,e.code||v.unrecoverableError(e,n)}}))},onError:function(e,n){v.unrecoverableError(e,n)}}),[2]})})).apply(this,arguments)}function D(){return(D=(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return Y=null,_||(_=function(){return E.apply(this,arguments)}()),[4,_];case 1:return Y=e.sent(),_=null,[2,Y]}})})).apply(this,arguments)}function E(){return(E=(0,r._)(function(){return(0,o.YH)(this,function(e){var n;return[2,(0,s.eT)(w,"dotreplit.getConfigFromServer",(n=(0,r._)(function(e,n){var t,r,i,a;return(0,o.YH)(this,function(o){switch(o.label){case 0:var l,p;return null==n||n.setAttributes((l={},(null==(p=v.getConnectionMetadata())?void 0:p.token)&&(l.tokenCluster=(0,u.pI)(p.token).cluster),l.ssr=!!window.performance.getEntriesByName(c.pY.pageNavStart,"mark").length,l)),[4,A()];case 1:if("closed"===(r=o.sent()).status)return[2,{error:d.DO.Disconnected,errorMessage:"channel closed",config:null}];return[4,r.request({dotReplitGetRequest:{},traceInfo:e?(0,s.mY)(e):void 0})];case 2:if((i=o.sent()).channelClosed)return[2,{error:d.DO.Disconnected,errorMessage:"channel closed",config:null}];if(i.error){if(i.error.includes("unable to decode"))return[2,{error:d.DO.ParseError,errorMessage:i.error,config:null}];if(i.error.includes("no such file"))return[2,{error:d.DO.NotFound,errorMessage:i.error,config:null}];return[2,{error:d.DO.Unknown,errorMessage:i.error,config:null}]}if(!(a=null==(t=i.dotReplitGetResponse)?void 0:t.dotReplit))return v.unrecoverableError(Error("Dotreplit responded with no error and no config")),[2,{error:d.DO.Unknown,errorMessage:"Expected dotReplitGetResponse to include dotReplit",config:null}];return[2,{error:null,errorMessage:null,config:a}]}})}),function(e,t){return n.apply(this,arguments)}))]})})).apply(this,arguments)}var R=(n=(0,r._)(function(e){var n;return(0,o.YH)(this,function(t){switch(t.label){case 0:return[4,y.stat(h)];case 1:if(t.sent().exists)return[3,3];return[4,y.writeFile(h,"")];case 2:t.sent(),t.label=3;case 3:return[4,A()];case 4:return[4,t.sent().request({dotReplitUpdateRequest:{ops:e}})];case 5:if((n=t.sent()).channelClosed)return[2,{errorMessage:"Channel closed.",error:d.uZ.ChannelClosed,response:null}];if(n.error){if(n.error.includes("could not parse json")||n.error.includes("is not json")||n.error.includes("parsing value field")||n.error.includes("missing field"))return[2,{errorMessage:n.error,error:d.uZ.JSONParseError,response:null}];if(n.error.includes("could not read file"))return[2,{errorMessage:n.error,error:d.uZ.NotFound,response:null}];if(n.error.includes("could not parse toml"))return[2,{errorMessage:n.error,error:d.uZ.TOMLParseError,response:null}];if(n.error.includes("unknown variant"))return[2,{errorMessage:n.error,error:d.uZ.OpType,response:null}];if(n.error.includes("could not write to file"))return[2,{errorMessage:n.error,error:d.uZ.CouldNotWrite,response:null}];if(n.error.includes("could not read line"))return[2,{errorMessage:n.error,error:d.uZ.ReadLine,response:null}];return[2,{errorMessage:n.error,error:d.uZ.Unknown,response:null}]}if(!n.dotReplitUpdateResponse)throw Error("Expected .replit to be updated");return[2,{response:n.dotReplitUpdateResponse,error:null,errorMessage:null}]}})}),function(e){return n.apply(this,arguments)}),I={watch:function(e){var n=!1,t=!1,r=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];t=!0,e.apply(void 0,(0,i._)(r))};return b.on(d.sV.CHANGE,r),I.getConfig().then(function(e){n||t||r(e)}),function(){n=!0,b.removeListener(d.sV.CHANGE,r)}},getConfig:function(e){return(0,r._)(function(){return(0,o.YH)(this,function(n){return(null==e?void 0:e.bypassCache)||!Y?[2,function(){return D.apply(this,arguments)}()]:[2,Y]})})()},getRunConfig:function(){var e=this;return(0,r._)(function(){var n,t;return(0,o.YH)(this,function(r){switch(r.label){case 0:return[4,A()];case 1:return[4,r.sent().request({runConfigGetRequest:{}})];case 2:if((n=r.sent()).channelClosed)return[2,e.getRunConfig()];if(!n.runConfigGetResponse)throw null!=(t=n.error)?t:Error("expected run config");return[2,n.runConfigGetResponse]}})})()},updateDotReplit:(t=[],m=400,g=(0,a.A)((0,r._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:return[4,R(t)];case 1:return e=n.sent(),t=[],[2,e]}})}),{wait:m}),function(e,n){n&&(m=n);var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)!function(){var e=a.value,n=t.findIndex(function(n){return n.path===e.path});-1!==n?t[n]=e:t.push(e)}()}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return g()})};return I}},39414:(e,n,t)=>{"use strict";t.d(n,{N:()=>pE});var r,i,o,a,l,s,c,u,d,p,f,h=t(17844),m=t(93629),g=t(12694),v=t(86105),y=t(81073),w=t(21462),b=t(684),S=t(37299),Y=t(76957),_=t(44725),A=t(3443),C=t(7304),k=t(7251),x=t(90629),D=t(49069),E=t(30860),R=D.Pe.define(),I=D.Pe.define(),T=function(e){var n=e.view,t=e.insert,r=e.scrollIntoView,i=e.overwrite,o=e.insertAt;if(i)n.dispatch({changes:{from:0,to:n.state.doc.length,insert:t},effects:R.of(null),scrollIntoView:r,annotations:E.A.of(!0)});else{var a=null!=o?o:n.state.selection.main.head,l=null!=o?o:n.state.selection.main.from;n.dispatch({changes:{from:l,insert:t},selection:{anchor:a+t.length},effects:R.of(null),scrollIntoView:r,annotations:E.A.of(!0)})}},F=function(e){var n=e.state.field(P,!1);if(!n)return void x.Cp(Error("RevetGhostwriterCodeInsertState not found when trying to revert"));e.dispatch({changes:n,effects:I.of(null)})},P=D.sU.define({create:function(){return null},update:function(e,n){e&&(e=e.map(n.changes));var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.is(R)&&(e=n.changes.invert(n.startState.doc)),l.is(I)&&(e=null)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),L=t(71884),U=t(54001),N=t(41467),O=t(71514),M=t(27741),H=t(54682),B=t(8950),z=t(67917),W=t(96907),G=t.n(W),V=t(6268),Z=t(41930),j=t(97906),q=t(58770),K=t(83479),$=t(18509),J=t(27023),Q=t(85389),X=t(52351);function ee(e){return(0,y.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,y.Y)("path",{fillRule:"evenodd",d:"M9.53 3.47a.75.75 0 0 0-1.06 0l-5 5a.75.75 0 0 0 0 1.06l5 5a.75.75 0 0 0 1.06-1.06L5.81 9.75H16A3.25 3.25 0 0 1 19.25 13v7a.75.75 0 0 0 1.5 0v-7A4.75 4.75 0 0 0 16 8.25H5.81l3.72-3.72a.75.75 0 0 0 0-1.06Z",clipRule:"evenodd"})}))}function en(e){return(0,y.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,y.Y)("path",{fillRule:"evenodd",d:"M14.47 3.47a.75.75 0 0 1 1.06 0l5 5a.75.75 0 0 1 0 1.06l-5 5a.75.75 0 1 1-1.06-1.06l3.72-3.72H8A3.25 3.25 0 0 0 4.75 13v7a.75.75 0 0 1-1.5 0v-7A4.75 4.75 0 0 1 8 8.25h10.19l-3.72-3.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}var et=(0,$.x)({root:[J.wp.height(48),J.wp.backgroundColor.backgroundRoot,J.wp.display.flex,J.wp.justify.spaceBetween,J.wp.align.stretch,{fontFamily:"Monaco, Menlo, 'Ubuntu Mono', Consolas, source-code-pro, monospace",button:[J.wp.color.foregroundDefault,J.wp.fontSize(16),J.wp.flex.growAndShrink(1),{padding:"10px",fontFamily:"inherit",backgroundColor:"transparent",border:"0 none",flexBasis:"auto"}]}],fixedContainer:[J.wp.position.fixed,J.wp.width("100%"),J.wp.zIndex(100),J.wp.left(0)]}),er=function(e){var n=e.buttons,t=e.onClick,r=e.onUndo,i=e.onRedo;return(0,y.FD)("nav",{css:et.root,children:[n.map(function(e){return(0,y.Y)("button",{onClick:function(n){n.stopPropagation(),n.preventDefault(),t(e)},children:void 0!==e.label?e.label:e.value},e.value)}),(0,y.Y)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},children:(0,y.Y)(ee,{})}),(0,y.Y)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},children:(0,y.Y)(en,{})})]})},ei=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],eo=function(e){var n=e.path,t=(0,v._)(ei).concat([{value:"= ",cursorOffset:2}]);return n.endsWith(".html")&&(t.unshift({value:"<>",cursorOffset:1}),t.unshift({label:"div",value:"<div></div>",cursorOffset:5})),t},ea="visualViewport"in window;function el(e){var n=e.filePath,t=e.isLoading,r=(0,K.fZ)(),i=(0,Z.a)({tablet:!1}),o=(0,q.jl)(),a=(0,j.A)();(0,w.useEffect)(function(){a&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var n=e.cursor,t=e.scroller;if(n){var i=(n.top+n.bottom)/2,a=(t.top+t.bottom)/2;Math.abs(i-a)>5&&(r.scrollDOM.scrollTop+=i-a+50*!!o)}}})},[a,r,o]);var l=(0,g._)((0,w.useState)(0),2),s=l[0],c=l[1];if((0,w.useEffect)(function(){if(o){var e=window.visualViewport;if(ea&&e){var n=G()(function(){c(window.innerHeight-e.height-e.offsetTop)},100);return e.addEventListener("scroll",n),e.addEventListener("resize",n),function(){e.removeEventListener("scroll",n),e.removeEventListener("resize",n)}}}},[o]),!a||t||!i)return null;var u=(0,y.Y)(er,{onUndo:function(){r&&((0,V.tN)(r),r.focus())},onRedo:function(){r&&((0,V.ZS)(r),r.focus())},onClick:function(e){if(r){var n,t=null!=(n=r.state.selection.ranges[0].from)?n:0;r.dispatch({changes:{from:t,insert:e.value},selection:{anchor:t+e.cursorOffset}}),r.focus()}},buttons:eo({path:n})});return!o||ea?(0,y.Y)(Q.S,{css:et.fixedContainer,style:{bottom:s},children:u}):u}var es=t(17459),ec=t(29935),eu=t(37743),ed=t(82643),ep=t(23099),ef=t.n(ep),eh=t(45773),em=t(68866),eg=t(78811),ev=t(75901),ey=t(76484),ew=t(41594),eb=t(57829),eS=t(85099);function eY(e){var n,t;return null!=(t=null==(n=e.facet(ev.q))?void 0:n.isDocumentSymbolSupported)&&t}var e_=D.Pe.define(),eA=D.sU.define({create:function(){return null},update:function(e,n){var t=e;return(0,ey.C)(n,e_,function(e){t=e.value}),t}});function eC(){return(eC=(0,ec._)(function(e,n,t){var r,i,o,a,l,s,c,u,d;return(0,ed.YH)(this,function(p){switch(p.label){case 0:return[4,e.request.documentSymbol(n,{signal:t})];case 1:if(!(r=p.sent())||r.cancelled||!(i="result"in r&&!r.cancelled?r.result:null))return[2,null];o=[],a=!0,l=!1,s=void 0;try{for(c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)(d=u.value)&&"range"in d&&o.push(d)}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}return[2,o.length?o:null]}})})).apply(this,arguments)}function ek(e){if("Debounced function cancelled"!==e.message)throw e}var ex=D.sU.define({create:function(){return[]},update:function(e,n){if(!(0,em.$H)(n,eA,"selection"))return e;var t=n.state.field(eA);return t?function e(n,t,r){var i=r.find(function(e){var r=e.range;return(0,ew.TU)(n,r.end)>=t&&(0,ew.TU)(n,r.start)<=t});return null==i?[]:i.children?[i].concat(e(n,t,i.children)):[i]}(n.state.doc,n.state.selection.main.head,t):[]},compare:ef()}),eD=t(10527),eE=t(27047),eR=t(10480),eI=t(80817),eT=t(96870),eF=t(36937),eP=t(28711),eL=t(73308),eU=t(75716),eN=t(31571),eO=t(74726),eM=t(80864),eH=t(89905),eB=t(43864),ez=t(78375),eW=t(15864),eG=t(38524),eV=t(5414),eZ=t(92792),ej=function(e){var n=new Set(eT.A),t=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=(0,g._)(a.value,3),c=s[0],u=s[1],d=s[2];if(!n.has(c))throw Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");t.set(c,[u,null!=d?d:eF.LU.foregroundDefault])}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t}([[eI.SymbolKind.Array,eW.A],[eI.SymbolKind.Boolean,eB.A],[eI.SymbolKind.Class,eL.A,eF.LU.yellowDefault],[eI.SymbolKind.Constant,eU.A,eF.LU.blueStronger],[eI.SymbolKind.Constructor,eM.A,eF.LU.blurpleDefault],[eI.SymbolKind.Enum,function(e){return(0,y.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,y.Y)("path",{fillRule:"evenodd",d:"M7.25 5A2.75 2.75 0 0 1 10 2.25h9A2.75 2.75 0 0 1 21.75 5v5A2.75 2.75 0 0 1 19 12.75h-.5a.75.75 0 0 1 0-1.5h.5c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25h-9c-.69 0-1.25.56-1.25 1.25v4a.75.75 0 0 1-1.5 0V5Zm3 1a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm0 3a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm-8 5A2.75 2.75 0 0 1 5 11.25h9A2.75 2.75 0 0 1 16.75 14v5A2.75 2.75 0 0 1 14 21.75H5A2.75 2.75 0 0 1 2.25 19v-5ZM5 12.75c-.69 0-1.25.56-1.25 1.25v5c0 .69.56 1.25 1.25 1.25h9c.69 0 1.25-.56 1.25-1.25v-5c0-.69-.56-1.25-1.25-1.25H5ZM5.25 15a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75Zm0 3a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))},eF.LU.orangeDefault],[eI.SymbolKind.EnumMember,eZ.A,eF.LU.blueStronger],[eI.SymbolKind.Event,eP.A],[eI.SymbolKind.Field,eV.A],[eI.SymbolKind.File,eO.A],[eI.SymbolKind.Function,eM.A,eF.LU.blurpleStronger],[eI.SymbolKind.Interface,function(e){return(0,y.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,y.Y)("path",{fillRule:"evenodd",d:"M17 7.75a4.25 4.25 0 1 0 0 8.5 4.25 4.25 0 0 0 0-8.5Zm-5.701 3.5a5.751 5.751 0 1 1 0 1.5H6.646a2.751 2.751 0 1 1 0-1.5H11.3ZM4 10.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",clipRule:"evenodd"})}))},eF.LU.blueStronger],[eI.SymbolKind.Key,eH.A],[eI.SymbolKind.Method,eM.A,eF.LU.blurpleDefault],[eI.SymbolKind.Module,eG.A,eF.LU.purpleDefault],[eI.SymbolKind.Namespace,eN.A],[eI.SymbolKind.Object,eB.A,eF.LU.blueDimmer],[eI.SymbolKind.Operator,eB.A],[eI.SymbolKind.Package,eG.A,eF.LU.purpleDefault],[eI.SymbolKind.Property,eV.A],[eI.SymbolKind.String,ez.A],[eI.SymbolKind.Struct,eN.A],[eI.SymbolKind.TypeParameter,eZ.A],[eI.SymbolKind.Variable,eZ.A,eF.LU.blueStronger]]);function eq(e){var n,t=e.kind,r=e.size,i=(0,g._)(null!=(n=ej.get(t))?n:[eB.A,eF.LU.foregroundDefault],2),o=i[0],a=i[1];return(0,y.Y)(o,{color:a,size:void 0===r?16:r})}var eK=t(17089),e$=t(57028),eJ=t(45649),eQ=t(51846),eX=t(42793),e0=t(85051),e1=(0,eX.AH)([e0.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),e2={button:(0,eX.AH)([J.wp.reset.button,J.wp.p(2),J.wp.rowWithGap(4),J.wp.align.center,e1]),text:(0,eX.AH)({fontSize:eF.LU.fontSizeSmall})},e4={opacity:1};function e5(e){var n=e.icon,t=e.text,r=e.innerRef,i=e.ariaProps,o=e.active,a=(0,e$.s)(i,r).buttonProps,l=(0,eJ.M)({}),s=l.hoverProps,c=l.isHovered;return(0,y.FD)(Q.S,(0,m._)((0,h._)({tag:"button",css:e2.button,style:c||o?e4:void 0,innerRef:r},(0,eQ.v)(a,s)),{children:[n?(0,w.cloneElement)(n,{size:12}):null,(0,y.Y)(Q.S,{css:e2.text,children:t})]}))}var e3={root:(0,eX.AH)([J.wp.p(4),J.wp.rowWithGap(4),J.wp.align.center]),text:(0,eX.AH)([J.wp.truncate,J.wp.flex.growAndShrink(1),{fontSize:eF.LU.fontSizeDefault}])};function e7(e){return(0,y.FD)(Q.S,{css:[e3.root],children:[e.icon?(0,w.cloneElement)(e.icon,{size:16}):null,(0,y.Y)(Q.S,{css:e3.text,children:e.text})]})}var e6=t(62595),e8=t(34661),e9=t(27316),ne=(0,eX.AH)([J.wp.p(4)]);function nn(e){var n=e.items,t=e.children,r=e.menuProps,i=e.selectedKeys,o=e.onAction,a=(0,e6.p)({items:n,children:t,selectedKeys:i,selectionMode:"single"}),l=(0,w.useRef)(null),s=(0,e8.b)((0,h._)({items:n,onAction:o},r),a,l);return(0,y.Y)(Q.S,(0,m._)((0,h._)({},s.menuProps),{innerRef:l,css:ne,children:(0,v._)(a.collection).map(function(e){return(0,y.Y)(ni,{item:e,state:a},e.key)})}))}var nt={root:(0,eX.AH)([J.wp.flex.row,J.wp.align.center,J.wp.position.relative,e1]),selected:(0,eX.AH)([{opacity:1,backgroundColor:eF.LU.interactiveBackground}])},nr={opacity:1};function ni(e){var n=e.item,t=e.state,r=(0,w.useRef)(null),i=(0,e9.O)({key:n.key},t,r),o=i.menuItemProps,a=i.isSelected,l=(0,eJ.M)({}),s=l.hoverProps,c=l.isHovered;return(0,y.Y)(Q.S,(0,m._)((0,h._)({innerRef:r,css:[nt.root,a&&nt.selected],style:c||a?nr:void 0},(0,eQ.v)(o,s)),{children:n.rendered}))}var no=t(57994),na=t(4515),nl=t(56196),ns=t(28790),nc=t(41358),nu={underlay:(0,eX.AH)([J.wp.coverContainer,J.wp.position.fixed]),surface:(0,eX.AH)([J.wp.borderRadius(8),{boxShadow:eF.LU.shadow2,border:"1px solid",borderColor:eF.LU.backgroundHighest}])};function nd(e){var n=e.state,t=e.triggerRef,r=e.placement,i=e.children,o=(0,g._)((0,ns.A)("Popover"),2),a=o[0],l=o[1],s=(0,no.f)({placement:r,triggerRef:t,popoverRef:a,offset:8},n),c=s.popoverProps,u=s.underlayProps;return(0,y.FD)(na.hJ,{children:[(0,y.Y)(Q.S,(0,m._)((0,h._)({},u),{css:nu.underlay})),(0,y.FD)(nc.ui,(0,m._)((0,h._)({elevated:!0,css:nu.surface,innerRef:l},c),{children:[(0,y.Y)(nl.R,{onDismiss:n.close}),i,(0,y.Y)(nl.R,{onDismiss:n.close})]}))]})}var np=t(54613);function nf(e){return CSS.escape(e.name)}function nh(e){var n=e.selectedSymbol,t=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,a=(0,eE.I)({onOpenChange:function(e){e&&(0,eK.u4)(eK.AZ.CODE_NAVIGATION_USED,{action:"opened"})}}),l=(0,w.useRef)(null),s=(0,eR.V)({},a,l),c=s.menuTriggerProps,u=s.menuProps,d=n?new Set([n.name]):void 0;return(0,y.FD)(y.FK,{children:[(0,y.Y)(e5,{text:o,icon:i,innerRef:l,ariaProps:c,active:a.isOpen}),a.isOpen?(0,y.Y)(nd,{triggerRef:l,state:a,placement:"bottom left",children:(0,y.Y)(nn,{menuProps:u,items:t,selectedKeys:d,onAction:function(e){var n=t.find(function(n){return nf(n)===e});n&&(r(n.selectionRange.start),(0,eK.u4)(eK.AZ.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,y.Y)(eD.q,{children:(0,y.Y)(e7,{icon:(0,y.Y)(eq,{kind:e.kind}),text:e.name})},nf(e))}})}):null]})}var nm=(0,w.memo)(function(e){var n=e.symbols,t=e.symbolsPath,r=e.moveCursor,i=t.length?t[t.length-1]:null,o=i?i.children:n;return(0,y.FD)(y.FK,{children:[t.map(function(e,i){var o=0===i?n:t[i-1].children;return o?(0,y.FD)(w.Fragment,{children:[(0,y.Y)(np.A,{size:12}),(0,y.Y)(nh,{symbols:o,icon:(0,y.Y)(eq,{size:12,kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},nf(e)):null}),(null==o?void 0:o.length)?(0,y.FD)(y.FK,{children:[(0,y.Y)(np.A,{size:12}),(0,y.Y)(nh,{symbols:o,text:"...",moveCursor:r})]}):null]})}),ng=(0,w.memo)(function(e){var n,t=e.view,r=(0,w.useCallback)(function(e){null==t||t.dispatch({scrollIntoView:!0,selection:D.OF.cursor((0,ew.TU)(t.state.doc,e))}),null==t||t.focus()},[t]),i=(0,w.useDeferredValue)({symbols:(0,U.Vn)(t,eA),symbolsPath:(0,U.Vn)(t,ex)});return(null==(n=i.symbols)?void 0:n.length)?(0,y.Y)(nm,{symbols:i.symbols,symbolsPath:i.symbolsPath||[],moveCursor:r}):null}),nv=t(63816),ny=t(75679),nw=t(13528),nb=t(50301),nS=t(53307),nY=t(63599),n_=t(63456),nA=(0,w.memo)(function(e){var n=e.path,t=e.performPaneOperation,r=e.isReadOnly,i=(0,K.fZ)(),o=(0,w.useCallback)(function(e){t({operation:"open",pane:(0,ny.af)(e)})},[t]);return(0,y.FD)(ny.Y9,{children:[(0,y.Y)(ny.Bm,{children:(0,y.Y)(nv.D,{path:n,onFileClick:o,children:(0,y.Y)(ng,{view:i})})}),(0,y.Y)(ny.Yw,{children:(0,y.Y)(nC,{path:n,performPaneOperation:t,isReadOnly:r})})]})});function nC(e){return(0,y.FD)(y.FK,{children:[(0,y.Y)(nk,(0,h._)({},e)),(0,y.Y)(nx,(0,h._)({},e)),(0,y.Y)(nD,(0,h._)({},e)),(0,y.Y)(nE,(0,h._)({},e))]})}function nk(e){var n=e.path,t=(0,es._)(e,["path"]),r=(0,K.fZ)(),i=(0,U.Vn)(r,k.cS),o=(0,U.Vn)(r,k.hb),a=i||t.isReadOnly;return o&&r?(0,y.Y)(nw.k,{dataCy:"ws-format-btn",altText:"Format "+(0,N.WP)(n),buttonText:"Format",disabled:a,"aria-disabled":!!a||void 0,icon:i?(0,y.Y)(n_.A,{}):(0,y.Y)(nY.A,{}),onClick:function(){i||(0,k.BD)(r)}}):null}function nx(e){var n=e.path,t=e.performPaneOperation;return(0,N.e$)(n)?(0,y.Y)(nw.k,{altText:"Preview "+(0,N.WP)(n),buttonText:"Preview",icon:(0,y.Y)(nS.A,{}),onClick:function(){t({operation:"replace",pane:{type:"markdown",data:{path:n}}})}}):null}function nD(e){var n=e.path,t=e.performPaneOperation;return(0,N.Z7)(n)?(0,y.Y)(nw.k,{altText:"Preview "+(0,N.WP)(n),buttonText:"Preview",icon:(0,y.Y)(nS.A,{}),onClick:function(){t({operation:"replace",pane:{type:"media",data:{path:n}}})}}):null}function nE(e){var n=e.path,t=e.performPaneOperation,r=(0,nb.vO)();return(0,N.Zy)(n)?(0,y.Y)(nw.k,{altText:"Toggle Preview",buttonText:"Preview",icon:(0,y.Y)(nS.A,{}),onClick:function(){var e=r();t({operation:"replace",pane:{type:"csvPreview",data:{path:n,line:null==e?void 0:e.position.line}}})}}):null}var nR=t(67313),nI=t.n(nR),nT=t(44826),nF=t(37032),nP=new nF.k(function(e){return e?eh.Lz.domEventObservers({keydown:function(e,n){(0,nT.A)(n,{message:"Editing is disabled while the agent is working",offset:n.state.selection.main.from,ignoreKeydown:!0})}}):null}),nL=t(45883),nU=t(64678),nN=t.n(nU),nO="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><circle cx="10" cy="10" r="10" fill="black" /></svg>\')',", linear-gradient(transparent, transparent)"),nM="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M2.5 10H15.5M15.5 10L9.5 5M15.5 10L9.5 15M18 4V16"/></svg>\')',", linear-gradient(transparent, transparent)"),nH=eh.Lz.theme({".cm-vws-space":{backgroundColor:eF.LU.foregroundDimmest,maskImage:nO,maskSize:"0.375ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":nO,"-webkit-mask-size":"0.375ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325},"&.cm-vws-enclosed":{opacity:.5},"&.cm-vws-trailing":{opacity:.5},"&.cm-vws-selected":{opacity:.75}},".cm-vws-tab":{backgroundColor:eF.LU.foregroundDimmest,maskImage:nM,maskSize:"1.75ch 1.75ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":nM,"-webkit-mask-size":"1.75ch 1.75ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325,maskPosition:"left min(95%, 0.25ch) top 50%","-webkit-mask-position":"left min(95%, 0.25ch) top 50%"},"&.cm-vws-enclosed, &.cm-vws-trailing":{opacity:.5,maskPosition:"calc(50% - 0.25ch) 50%","-webkit-mask-position":"calc(50% - 0.25ch) 50%"},"&.cm-vws-selected":{opacity:.75}}}),nB=nN()(function(e,n,t){var r="cm-vws-".concat(" "===e?"space":"tab"," cm-vws-").concat(n).concat(t?" cm-vws-selected":"");return eh.NZ.mark({class:r})},function(e,n,t){return"".concat(e,"-").concat(n,"-").concat(t)});function nz(e,n,t){var r=e.facet(nV);if(!r.leading&&!r.enclosed&&!r.trailing&&!r.selected)return[];for(var i=[],o=e.doc.lineAt(n),a=e.doc.lineAt(t),l=o.number;l<=a.number;l++)!function(o){var a=e.doc.line(o),l=a.text.length;if(0===l)return;var s=0===a.text.trim().length,c=!!r.selected&&e.selection.ranges.some(function(e){return!e.empty&&e.from<a.to&&e.to>=a.from});if(r.leading||r.enclosed||r.trailing||c){if(s){if(r.leading||r.trailing||c)for(var u=0;u<l;u++)!function(o){var l=a.text[o],s=a.from+o;if(!(s<n)&&!(s>=t)&&(" "===l||"	"===l)){var u=c&&e.selection.ranges.some(function(e){return e.from<=s&&e.to>s});(r.leading||r.trailing||u)&&i.push(nB(l,"trailing",u).range(s,s+1))}}(u);return}for(var d=l-a.text.trimStart().length,p=a.text.trim().length,f=0;f<l;f++)!function(o){var l=a.text[o],s=a.from+o;if(!(s<n)&&!(s>=t)&&(" "===l||"	"===l)){var u=void 0;u=o>=d+p?"trailing":o>d?"enclosed":"leading";var f=c&&e.selection.ranges.some(function(e){return e.from<=s&&e.to>s});(r[u]||f)&&i.push(nB(l,u,f).range(s,s+1))}}(f)}}(l);return i}var nW=function(){function e(n){(0,eu._)(this,e),this.decorations=eh.NZ.set(nz(n.state,0,n.state.doc.length))}return e.prototype.update=function(e){if((0,em.$H)(e,nV)){this.decorations=eh.NZ.set(nz(e.state,0,e.state.doc.length));return}var n=e.state.facet(nV);if(e.docChanged||e.selectionSet&&n.selected){var t=this.decorations,r=null,i=null;if(e.selectionSet&&n.selected){var o=e.startState.selection.ranges.filter(function(e){return!e.empty}),a=(0,v._)(e.state.selection.ranges).concat((0,v._)(e.startState.selection.map(e.changes).ranges)).filter(function(e){return!e.empty});o.length&&(r=D.OF.create(o)),a.length&&(i=D.OF.create(a))}if(e.docChanged&&e.changes.iterChangedRanges(function(n,t,o,a){var l=D.OF.range(e.startState.doc.lineAt(n).from,e.startState.doc.lineAt(t).to);r=r?r.addRange(l):D.OF.create([l]);var s=D.OF.range(e.state.doc.lineAt(o).from,e.state.doc.lineAt(a).to);i=i?i.addRange(s):D.OF.create([s])}),r){var l=r.ranges;t=t.update({filter:function(e,n){return!l.some(function(t){return t.from<=e&&t.to>=n})},filterFrom:l[0].from,filterTo:l[l.length-1].to})}e.docChanged&&(t=t.map(e.changes)),i&&(t=t.update({add:i.ranges.map(function(n){return nz(e.state,n.from,n.to)}).flat()})),this.decorations=t}},e}(),nG=eh.Z9.fromClass(nW,{decorations:function(e){return e.decorations}}),nV=D.sj.define({combine:function(e){var n;return null!=(n=e[0])?n:{}},enables:[nH,D.Nb.highest(nG)]}),nZ=new nF.k(function(e,n,t,r){return e||n||t||r?nV.of({leading:e,enclosed:n,trailing:t,selected:r}):null}),nj=t(29745),nq=t(95707),nK=t(35651),n$=t(32130),nJ=t(83490),nQ=t(68626),nX=t(83425),n0=t(13095);function n1(e){var n=(0,g._)((0,w.useState)(null),2),t=n[0],r=n[1];return(0,w.useEffect)(function(){var n=function(){r((0,eS.z)(e.map(function(e){return(0,eS.A)(e)})))};return n(),(0,n0.xW)(e.map(function(e){return e.onServerCapabilitiesChange(function(){return n()})}))},[e]),t}var n2=t(71424),n4=new nF.k(function(e,n,t,r,i,o){return e?e.formatters.map(function(e){if(2===(a=e.id.split("/")).length&&a[1].includes("languageServer")){var a,l,s,c,u,d,p,f=t.find(function(n){return n.clientId===e.id});return f?(l=o,s=f,c=r,u=i,s&&s.isSupportedFile(l)&&c&&c.isFormatSupported&&(0,eS.A)(s).isFormatSupported&&u?nj.fC.of({format:(d=(0,ec._)(function(e,n,t){var r;return(0,ed.YH)(this,function(r){return[2,(n?s.request.formatRange(l,(0,ew.fj)(e,n),t):s.request.format(l,t)).then(function(n){return"error"in n||n.cancelled?{error:!0}:n.result?{result:(0,nQ.A)(n.result,e.toString())}:{result:D.VR.empty(e.length)}})]})}),function(e,n,t){return d.apply(this,arguments)}),supportsRangeFormatting:(0,eS.A)(s).isFormatRangeSupported,identifier:s.clientId,name:s.clientName}):[]):[]}return(0,nq.fu)(o,e)?nj.fC.of({format:(p=(0,ec._)(function(t,r,i){var a,l,s,c,u;return(0,ed.YH)(this,function(d){switch(d.label){case 0:if(!e.startCommand)throw Error("Expected formatter command");return a=(0,n$.A)({container:n}),(l=(0,v._)(e.startCommand.args)).push("-f",o),r&&(l.push("--range-start",String(r.main.from)),l.push("--range-end",String(r.main.to))),l.push("--tab-size",String(i.tabSize)),i.insertSpaces&&l.push("--insert-spaces"),i.trimFinalNewlines&&l.push("--trim-final-newlines"),i.trimTrailingWhitespace&&l.push("--trim-trailing-whitespace"),i.insertFinalNewline&&l.push("--insert-final-newline"),e.startCommand.lifecycle===nK.api.Exec.Lifecycle.STDIN&&l.push("--stdin"),s="",c="",u=[a.onOutput(function(e){return s+=e}),a.onStderr(function(e){return c+=e}),a.dispose],[4,a.request((0,m._)((0,h._)({},e.startCommand),{args:l,lifecycle:nK.api.Exec.Lifecycle.STDIN,stdin:t.toString()})).then(function(e){var n=e.error;return u.forEach(function(e){return e()}),n?{error:!0,message:c}:{result:s}})];case 1:return[2,d.sent()]}})}),function(e,n,t){return p.apply(this,arguments)}),supportsRangeFormatting:e.supportsRangeFormatting,identifier:e.id,name:e.name}):null}).filter(Boolean):null}),n5=t(40008),n3=t(34570),n7=t(62019),n6=t(48122),n8=t(1833),n9=t(18254),te=t(28984),tn=t(57043),tt=D.sj.define({combine:function(e){var n;return null!=(n=e.filter(Boolean)[0])?n:null}}),tr=D.sU.define({create:function(){return{diff:null,tree:n9.PH.empty}},update:function(e,n){var t,r,i=n.state.facet(tt),o=null==(t=n.state.facet(_.BH))?void 0:t.parser;if(!i)return null===e.diff&&e.tree===n9.PH.empty?e:{diff:null,tree:n9.PH.empty};var a=e.diff,l=e.tree;return(a&&a.b.eq(i)?n.docChanged&&(a=a.updateA(n.newDoc,n.changes)):(a=te.o.create(n.newDoc,i),l=n9.PH.empty),(null==(r=n.startState.facet(_.BH))?void 0:r.parser)!==o&&(l=n9.PH.empty),o&&l.length!==a.b.length)?(l=(0,tn.B)({parser:o,text:a.b,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),ti=t(83846),to="cm-transform-diff-line-deletion-base",ta="cm-transform-diff-line-deletion",tl="cm-transform-diff-text-deletion",ts="cm-transform-diff-line-insertion-base",tc="cm-transform-diff-line-insertion",tu="cm-transform-diff-text-insertion",td="cm-transform-diff-number-marker",tp="rgba(180, 0, 0, 0.1)",tf="rgba(180, 0, 0, 0.125)",th="rgba(0, 180, 0, 0.1)",tm="rgba(0, 180, 0, 0.125)";function tg(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var tv=eh.Lz.theme((i={},(0,ti._)(i,".".concat(ts,", .").concat(tc),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(eF.LU.accentPrimaryDimmest," !important")}}),(0,ti._)(i,".".concat(to),{background:tg(tp),backgroundClip:"content-box"}),(0,ti._)(i,".".concat(ta),{background:tg(tp,tf),backgroundClip:"content-box"}),(0,ti._)(i,".".concat(ts),{background:tg(th),backgroundClip:"content-box"}),(0,ti._)(i,".".concat(tc),{background:tg(th,tm),backgroundClip:"content-box"}),(0,ti._)(i,".".concat(tu),{display:"inline-block",background:tm}),(0,ti._)(i,".".concat(tl),{display:"inline-block",background:tf}),(0,ti._)(i,".".concat(td),{opacity:.5}),i)),ty=t(38),tw=t(38201),tb=function(e){function n(e,t,r){var i;return(0,eu._)(this,n),(i=(0,n7._)(this,n)).line=e,i.index=t,i.changed=r,i}(0,n8._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(ts):"cm-line ".concat(tc),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=l.text,c=l.tags,u=document.createElement("span");u.textContent=s||"\xa0",u.className=null!=c?c:"",n.appendChild(u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,p=0,f=null,h=null,m=function(n,t){if(!f)throw Error("range is null");var r=e.line[p],i=r.text,o=r.tags,a=i.slice(d-f.from,t-f.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",n.appendChild(l),d+=a.length};p<this.line.length;){if(!f){var g=this.line[p].text;f={from:d,to:d+g.length}}if(!h){var v=!0,y=!1,w=void 0;try{for(var b,S=this.changed[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value;if(!(Y.from>=f.to)&&!(Y.to<=d)){var _=document.createElement("span");_.className=tu,h={from:Y.from,to:Y.to,dom:_},d<h.from&&m(n,h.from),n.appendChild(_);break}}}catch(e){y=!0,w=e}finally{try{v||null==S.return||S.return()}finally{if(y)throw w}}}h?(d<h.to&&m(h.dom,h.to),d>=h.to&&(h=null)):m(n,f.to),d>=f.to&&(f=null,p++)}return n},t.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null==(t=this.changed)?void 0:t.length)===(null==(r=e.changed)?void 0:r.length)&&ef()(this.line,e.line)&&ef()(this.changed,e.changed)},t.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,n6._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(eh.xO),tS=eh.NZ.line({class:to}),tY=eh.NZ.line({class:ta}),t_=eh.NZ.mark({class:tl}),tA=eh.Lz.decorations.compute([tr],function(e){var n=function(e,n){if(r.getLineChangeType(e.number,ty.mn.A)===ty.DE.COVERED)o.push(tY.range(e.from));else{o.push(tS.range(e.from));var t=!0,i=!1,a=void 0;try{for(var l,s=(0,ty.QG)(e,n,ty.mn.A,!1)[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=l.value;o.push(t_.range(c.from,c.to))}}catch(e){i=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}}},t=e.field(tr,!1);if(!t||!t.diff)return eh.NZ.none;var r=t.diff,i=t.tree,o=[],a=!0,l=!1,s=void 0;try{for(var c,u=r.chunks[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if(d.fromA!==d.endA)for(var p=r.a.lineAt(d.fromA),f=r.a.lineAt(d.endA),h=p.number;h<=f.number;h++)n(r.a.line(h),d);else d.fromB===d.endB&&n(r.a.lineAt(d.fromA),d);if(d.fromB!==d.toB)for(var m=r.b.lineAt(d.fromB),g=(0,tw.A7)(i,r.b,e,d.fromB,d.endB),v=0;v<g.length;v++){var y=g[v],w=r.b.line(m.number+v),b=r.getLineChangeType(w.number,ty.mn.B)===ty.DE.COVERED?null:(0,ty.QG)(w,d,ty.mn.B,!0),S=eh.NZ.widget({widget:new tb(y,w.number,b),block:!0,side:v+1}),Y=Math.min(d.endA,r.a.length);o.push(S.range(Y))}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return eh.NZ.set(o,!0)}),tC=t(75321),tk=function(e){function n(e){var t;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).index=e,t}(0,n8._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement("span");return e.className=td,e.textContent=String(this.index),e},t.eq=function(e){return this.index===e.index},n}(eh.wJ),tx=tC.DY.of(function(e,n){if(n instanceof tb)return new tk(n.index)}),tD=D.sj.define({enables:function(e){return[tt.computeN([e],function(n){return n.facet(e)}),tr,tv,tA,tx]}}),tE=t(96400),tR=t(8616);function tI(e,n){e.dispatch({effects:tR.L.of(null),selection:{anchor:n.range.indexTo,head:n.range.indexTo}}),e.hasFocus||e.focus()}function tT(e,n,t){T({view:e,insert:n,scrollIntoView:!0,insertAt:t}),e.dispatch({effects:tR.L.of(null)}),e.hasFocus||e.focus()}function tF(e,n){e.dispatch({effects:tR.M.of(n)})}function tP(e,n,t){e.dispatch({changes:{from:t.range.indexFrom,to:t.range.indexTo,insert:n},scrollIntoView:!0,effects:tR.L.of(null),annotations:[E.A.of(!0),V._B.of("full")]}),e.hasFocus||e.focus()}function tL(e,n){return e.range.indexFrom===n.range.indexFrom&&e.range.indexTo===n.range.indexTo&&e.filePath===n.filePath&&e.fileVersion===n.fileVersion&&e.referenceType===n.referenceType}var tU=t(21309),tN=t(83070),tO=t(4616),tM=t(87064),tH=(0,$.x)({root:[J.wp.border({color:eF.LU.outlineDimmest}),J.wp.p(8),J.wp.borderRadius(4)]}),tB=new tU.E(function(e){var n=e.onClose,t=e.requestMeasure;return(0,y.Y)(tE.N2,{requestMeasure:t,type:"ghostwriterKillswitch",children:(0,y.FD)(Q.S,{css:tH.root,row:!0,gap:8,children:[(0,y.Y)(Q.S,{grow:!0,shrink:!0,children:(0,y.Y)(tO.EY,{children:"Code length exceeded. Please select a smaller code block."})}),(0,y.Y)(tN.K0,{alt:"Close",onClick:n,type:"button",children:(0,y.Y)(tM.A,{})})]})})}),tz=function(e){function n(e){var t,r=e.codeReference;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).codeReference=r,t}return(0,n8._)(n,e),n.prototype.toDOM=function(e){var n=this;return tB.create({onClose:function(){return tI(e,n.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(eh.xO),tW=t(9176),tG=function(e){return e[e.Compare=0]="Compare",e[e.Original=1]="Original",e[e.Suggestion=2]="Suggestion",e}({}),tV=D.Pe.define(),tZ=D.sU.define({create:function(){return tG.Suggestion},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(tV))e=l.value;else if(l.is(tR.L))e=null;else if(l.is(tR.M)){var s=n.state.field(tW.z);if((null==s?void 0:s.type)==="transformCode"&&l.value){var c=n.startState.field(tW.Q),u=l.value;!c&&u&&(e=tG.Suggestion)}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),tj=D.sU.define({create:function(){return null},update:function(e,n){if(!(0,em.$H)(n,"doc",tW.z,eg.Md,tZ,tW.Q))return e;var t,r=n.state.field(tW.z),i=n.state.facet(eg.Md),o=n.state.field(tZ);if(!r||!i||r.codeReference.filePath!==i||o!==tG.Suggestion)return null;var a=r.codeReference.range.indexFrom,l=r.codeReference.range.indexTo,s=n.state.doc.slice(a,l),c=null!=(t=n.state.field(tW.Q))?t:"",u=s.lines,d=c.split(n.state.lineBreak).length-u;return e&&e.after===a&&e.offset===d?e:{after:a,offset:d}}}),tq=tC.RG.of(function(e,n){var t=e.state.doc.lineAt(n.from),r=e.state.field(tj);if(r&&!(t.from<=r.after))return new tC.ib(t.number+r.offset)}),tK=tC.DY.of(function(e,n){if(n instanceof t$)return new tC.ib(n.index)}),t$=function(e){function n(e,t,r){var i;return(0,eu._)(this,n),(i=(0,n7._)(this,n)).line=e,i.block=t,i.index=r,i}(0,n8._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var n=!0,t=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.text,s=a.tags,c=document.createElement("span");c.textContent=l||"\xa0",s&&(c.className=s),e.appendChild(c)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e},t.eq=function(e){return this.index===e.index&&(0,tw.ne)(this.line,e.line)},t.ignoreEvent=function(){return!1},(0,n6._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(eh.xO),tJ=[tj,tq,tK,eh.Lz.decorations.compute([_.BH,tW.z,tW.Q,tZ,tr,eg.Md,D.$t.lineSeparator],function(e){var n=e.field(tW.z),t=e.facet(eg.Md),r=e.field(tZ);if(!n||"transformCode"!==n.type||!t||n.codeReference.filePath!==t||r!==tG.Suggestion)return eh.NZ.none;var i=n.codeReference.range.indexFrom,o=n.codeReference.range.indexTo,a=e.doc.lineAt(i),l=e.doc.lineAt(o),s=e.toText(null!=(y=e.field(tW.Q))?y:""),c=e.changes({from:i,to:o,insert:s}),u=c.apply(e.doc),d=i+s.length,p=null==(v=e.facet(_.BH))?void 0:v.parser,f=null;if(p)f=(0,tn.B)({parser:p,text:u,changes:c,base:e,upTo:d}),w=(0,tw.A7)(f,u,e,i,d);else{w=[];var h=!0,m=!1,g=void 0;try{for(var v,y,w,b,S=s.iterLines()[Symbol.iterator]();!(h=(b=S.next()).done);h=!0){var Y=b.value;w.push([{text:Y}])}}catch(e){m=!0,g=e}finally{try{h||null==S.return||S.return()}finally{if(m)throw g}}}var A=[];w.length>1&&i!==o&&0!==l.length&&o===l.to&&o<e.doc.length?A.push(eh.NZ.replace({inclusive:!1,block:!0}).range(i,o)):A.push(eh.NZ.replace({inclusiveStart:!1,block:!0}).range(i,o));for(var C=0;C<w.length;C++){var k=w[C],x=a.number+C,D=eh.NZ.widget({widget:new t$(k,C>0,x),inlineOrder:!0,side:C+1,block:C>0});A.push(D.range(i))}return eh.NZ.set(A,!0)})],tQ=t(35992),tX=t(73176),t0=t(98679),t1=t(37201),t2=t(83692),t4=t(97998),t5=t(480),t3=t(11769),t7=t(5142),t6=t(47630),t8=t(50932),t9=D.sj.define({combine:function(e){var n;return null!=(n=e[0])?n:function(){}}});new nF.k(function(e){return t9.of(e)});var re=(0,$.x)({root:[J.wp.border({color:eF.LU.outlineDimmest}),J.wp.p(8),J.wp.borderRadius(4)],header:[J.wp.minHeight(28)]}),rn={direction:"reverse",state:{message:"",completed:!1},reducer:function(e,n){var t;(null==(t=e.contents.contents)?void 0:t.$kind)==="inlineActionEventContents"&&e.contents.contents.inlineActionEventContents.content&&(n.message=e.contents.contents.inlineActionEventContents.content,n.completed=e.state===B.qOk.COMPLETE)}},rt=new tU.E(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,v=e.requestMeasure,b=e.codeReference,S=e.onClose,Y=e.openAiChatPane,_=e.source,A=(n=({getFileContext:(0,t5.H)()}).getFileContext,t=(0,z.NC)(),i=(r=(0,g._)((0,w.useState)(null),2))[0],o=r[1],l=(a=(0,g._)((0,w.useState)(!1),2))[0],s=a[1],c=(0,z.k)().assistantInlineMode,d=(0,w.useCallback)((u=(0,ec._)(function(e){var r,i,a,l,u,d;return(0,ed.YH)(this,function(p){switch(p.label){case 0:return r=e.codeReference,s(!0),[4,t.sessions.create({sessionType:B.dF3.CHAT})];case 1:if(!(i=p.sent()).ok)return s(!1),[2];return o(a=i.payload),[4,n()];case 2:return u=(l=p.sent()).fileContext,d=l.mostRecentFile,[4,a.appendEvent({kind:"inlineAction",message:"",messageType:B.Z1T.EXPLAIN_CODE,modelType:"advanced"===c?B.e3q.ADVANCED:B.e3q.BASIC,codeReference:r,fileContext:u,mostRecentFile:d,useRag:!0})];case 3:return p.sent(),[2]}})}),function(e){return u.apply(this,arguments)}),[t.sessions,n,c]),p=(0,w.useCallback)((0,ec._)(function(){return(0,ed.YH)(this,function(e){switch(e.label){case 0:if(!i)return[3,2];return[4,i.abortLastEvent()];case 1:e.sent(),s(!1),e.label=2;case 2:return[2]}})}),[i]),h=(f=(0,tX.Rj)(function(){return null==i?void 0:i.reduce(rn,1)},[i],{default:{message:"",completed:!1}})).message,m=f.completed,{sessionId:null==i?void 0:i.id,sendMessage:d,stopMessage:p,loading:l,message:h,completed:m}),C=A.sessionId,k=A.sendMessage,x=A.stopMessage,D=A.loading,E=A.completed,R=A.message,I=(0,w.useCallback)(function(){var e,n;(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"explain",source:_,message_content:b.code}),k({codeReference:{code:b.code,range:b.range,filePath:b.filePath,fileContent:null!=(e=b.fileContent)?e:"",fileVersion:b.fileVersion,language:null!=(n=b.language)?n:"",referenceType:B.fDX.INLINE}})},[k,b,_]),T=(0,t0.A)(I),F=(0,t0.A)(x);(0,w.useEffect)(function(){T.current();var e=F.current;return function(){e()}},[T,F]);var P=(0,z.Gk)();return(0,z.q4)()?(0,y.Y)(tE.Rc,{inlineActionType:"Explain",closeAction:S}):(0,y.Y)(tE.N2,{requestMeasure:v,type:"explainCode",children:(0,y.FD)(Q.S,{css:re.root,gap:8,dataCy:"ghostwriter-inline-explain-content",children:[R||D?(0,y.FD)(Q.S,{css:re.header,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,y.FD)(Q.S,{grow:!0,shrink:!0,row:!0,gap:8,align:"center",children:[(0,y.Y)(t7.A,{}),(0,y.Y)(t1.m2,{intent:B.qRv.EXPLAIN,text:{color:"dimmest",variant:"small"},icon:{color:eF.LU.foregroundDimmest}})]}),E?(0,y.Y)(tN.K0,{alt:"Close",dataCy:"ghostwriter-inline-close",children:(0,y.Y)(tM.A,{onClick:function(){S(),(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:_})}})}):(0,y.Y)(t3.$n,{iconLeft:(0,y.Y)(t8.A,{}),size:"small",text:"Stop",onClick:function(){x(),(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"explain",source:_,message_content:b.code})}})]}):null,D&&!R?(0,y.Y)(n_.A,{}):null,R?(0,y.Y)(t2.d2,{text:R,codeComponent:t2.vz,messageState:E?B.qOk.COMPLETE:void 0}):null,E?(0,y.FD)(Q.S,{row:!0,gap:8,align:"center",justify:"end",children:[(0,y.Y)(tO.EY,{variant:"small",color:"dimmer",children:"Esc to close"}),C?(0,y.Y)(t3.$n,{dataCy:"ghostwriter-inline-reply-in-chat",iconLeft:P?(0,y.Y)(t6.A,{}):(0,y.Y)(n_.A,{}),disabled:!P,size:"small",text:"Reply in Chat",colorway:P?"blurple":void 0,onClick:function(){(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"reply_in_chat",intent_type:"explain",source:_,message_content:b.code}),Y(C),S()}}):null]}):null]})})}),rr=function(e){function n(e){var t,r=e.codeReference,i=e.source;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).codeReference=r,t.source=i,t}(0,n8._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this.codeReference,t=this.source;return rt.create({requestMeasure:function(){return e.requestMeasure()},codeReference:n,onClose:function(){return tI(e,n)},openAiChatPane:function(n){return(0,t4.zw)(e.state,{pane:{type:"ghostwriterChat",data:{sessionId:n}}})},source:t})},t.updateDOM=function(e,n){var t=this.codeReference;return rt.update(e,function(e){return(0,tQ.jM)(e,function(e){e.requestMeasure=function(){return n.requestMeasure()},e.codeReference=t,e.onClose=function(){return tI(n,t)}})}),!0},t.eq=function(e){return tL(this.codeReference,e.codeReference)},n}(eh.xO),ri=t(79203),ro={direction:"reverse",state:{code:void 0,completed:!1,error:null},reducer:function(e,n){var t;if((null==(t=e.contents.contents)?void 0:t.$kind)==="inlineActionEventContents"&&e.contents.contents.inlineActionEventContents){var r=e.contents.contents.inlineActionEventContents;if(r.content&&r.content.includes("```")){var i=r.content.match(/```(?:\w+)?\n([\s\S]+?)\n```/);i&&i[1]&&(n.code=i[1])}n.completed=e.state===B.qOk.COMPLETE&&!!n.code,e.state!==B.qOk.COMPLETE&&e.state!==B.qOk.IN_PROGRESS&&(n.error="Failed to generate code")}}};function ra(e){var n,t,r=e.onCode,i=e.getFileContext,o=e.assistantMode,a=(0,z.NC)(),l=(0,g._)((0,w.useState)(null),2),s=l[0],c=l[1],u=(0,g._)((0,w.useState)(!1),2),d=u[0],p=u[1],f=(0,g._)((0,w.useState)(null),2),h=f[0],m=f[1],v=(0,w.useCallback)((n=(0,ec._)(function(e){var n,t,r,l;return(0,ed.YH)(this,function(u){switch(u.label){case 0:if(p(!0),m(null),n=s)return[3,2];return[4,a.sessions.create({sessionType:B.dF3.INLINE_CHAT})];case 1:if(!(t=u.sent()).ok)return p(!1),m("Failed to create session"),[2];c(n=t.payload),u.label=2;case 2:if(!i)return[3,6];u.label=3;case 3:return u.trys.push([3,5,,6]),[4,i()];case 4:return r=u.sent(),[3,6];case 5:return u.sent(),p(!1),m("Failed to get file context"),[2];case 6:l="advanced"===o?B.e3q.ADVANCED:B.e3q.BASIC,u.label=7;case 7:return u.trys.push([7,9,,10]),[4,n.appendEvent({kind:"inlineAction",message:e.message,messageType:e.type,modelType:l,codeReference:e.codeReference,fileContext:null==r?void 0:r.fileContext,mostRecentFile:null==r?void 0:r.mostRecentFile,useRag:!0})];case 8:return u.sent(),[3,10];case 9:return u.sent(),p(!1),m("Failed to send message"),[3,10];case 10:return[2]}})}),function(e){return n.apply(this,arguments)}),[a.sessions,s,i,o]),y=(0,w.useCallback)((0,ec._)(function(){return(0,ed.YH)(this,function(e){switch(e.label){case 0:if(!s)return[3,2];return[4,s.abortLastEvent()];case 1:e.sent(),p(!1),e.label=2;case 2:return[2]}})}),[s]),b=(0,w.useCallback)(function(){return m(null)},[]),S=(0,w.useMemo)(function(){return null==s?void 0:s.reduce(ro,1).result},[s]),Y=(0,tX.G9)(S);return(0,tX.q3)(S,{next:function(e){(null==e?void 0:e.completed)&&d&&p(!1),(null==e?void 0:e.error)&&!h&&m(e.error),(null==e?void 0:e.code)&&r(e.code)}}),{sendMessage:v,stopMessage:y,getCode:function(){return Y.current},loading:d,completed:null==(t=Y.current)?void 0:t.completed,error:h,clearError:b}}var rl=t(31092),rs=t(61700),rc=t(73745),ru=t(18069),rd=t(34883),rp=(0,Y.eU)(0),rf=(0,Y.eU)(function(e){return e(rp)<=tE.bX?"compact":"normal"}),rh=new tU.E(function(e){var n=e.id,t=e.requestMeasure,r=e.codeReference,i=e.updateCodeBlock,o=e.acceptSuggestion,a=e.onClose,l=e.autoFocus,s=e.source,c=function(){var e=A();(null==e?void 0:e.code)?(o(e.code),(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",message_content:e.code,source:s})):E()},u=function(){var e,n;I.current=P,(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",message_content:P,source:s}),S({message:P,type:B.Z1T.GENERATE_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!=(e=r.fileContent)?e:"",fileVersion:r.fileVersion,language:null!=(n=r.language)?n:"",referenceType:B.fDX.INLINE}})},d=(0,z.k)().assistantInlineMode,p=(0,z.UK)().hasAccessToAdvancedModel,f=(0,g._)((0,w.useState)(!1),2),h=f[0],m=f[1],v=(0,z.lW)(),b=ra({onCode:i,getFileContext:(0,t5.H)(),assistantMode:d}),S=b.sendMessage,_=b.stopMessage,A=b.getCode,C=b.loading,k=b.completed,x=b.error,D=b.clearError,E=(0,w.useCallback)(function(){_(),a()},[_,a]),R=(0,w.useCallback)(function(){(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:s}),E()},[E,s]),I=(0,w.useRef)(null),T=(0,w.useRef)(null),F=(0,tE.D3)({id:n,inputRef:T,loading:C,onSubmit:function(){W?c():u()},onClose:R}),P=F.value,L=F.setValue,U=F.onKeyDown,N=F.escPressed,O=function(){(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",message_content:P,source:s}),_()},M=(0,z.Gk)(),H=(0,z.q4)(),W=M&&k&&I.current===P,G=(0,g._)((0,w.useState)(function(){return(0,Y.y$)()}),1)[0],V=(0,ri.Xr)(rp,{store:G}),Z=(0,ri.md)(rf,{store:G}),j=(0,rl.A)(function(e){return V(e.width)}),q=(0,z.jt)(),K=(0,ru.hT)(),$=q&&(K===B.g32.AGENT_STATE_RUNNING||K===B.g32.AGENT_STATE_PAUSING);return H?(0,y.Y)(tE.Rc,{inlineActionType:"Generate",closeAction:E}):$?(0,y.Y)(tE.ce,{inlineActionType:"Generate",closeAction:E}):(0,y.FD)(y.FK,{children:[(0,y.FD)(tE.y1,{requestMeasure:t,type:"generateCode",error:x,clearError:D,innerRef:j,children:[(0,y.Y)(tE.pd,{value:P,inputRef:T,onChange:function(e){return L(e.currentTarget.value)},placeholder:"Enter a prompt to generate new code",onKeyDown:U,autoFocus:l}),(0,y.FD)(tE.wi,{children:[(0,y.FD)(y.FK,{children:[(0,y.Y)(tE.sb,{type:"generateCode",readableModelName:p?v.advancedModel.name.readable:v.basicModel.name.readable}),k?(0,y.Y)(tN.K0,{disabled:!M,alt:"Rerun the same prompt",onClick:function(){return u()},size:12,colorway:"grey",children:(0,y.Y)(rd.A,{})}):null]}),W?(0,y.FD)(y.FK,{children:[(0,y.Y)(t3.$n,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=A();(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",message_content:(null==e?void 0:e.code)?e.code:"",source:s}),R()}}),(0,y.Y)(t3.$n,{size:"small",text:"Accept",colorway:"blurple",onClick:c,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,y.Y)(tE.XT,{escPressed:N,connecting:!M,loading:C,disabled:!P||!P.trim(),promptPresentation:"normal"===Z,onClick:function(){C?O():u()}})]})]}),(0,y.Y)(rc.default,{isOpen:h,onClose:function(){return m(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}},reloadPageAfterPurchaseComplete:!0})]})}),rm=function(e){function n(e){var t,r=e.id,i=e.codeReference,o=e.source;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).id=r,t.codeReference=i,t.source=o,t}(0,n8._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this.id,t=this.codeReference,r=this.source,i=rh.create({id:n,requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return tI(e,t)},acceptSuggestion:function(n){return tT(e,n,t.range.indexFrom)},updateCodeBlock:function(n){return tF(e,n)},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex=String(rs.W.floatingHeaderActive),i},t.updateDOM=function(e,n){var t=this.codeReference;return rh.update(e,function(e){return(0,tQ.jM)(e,function(e){e.requestMeasure=function(){return n.requestMeasure()},e.codeReference=t,e.onClose=function(){return tI(n,t)},e.acceptSuggestion=function(e){return tT(n,e,t.range.indexFrom)},e.updateCodeBlock=function(e){return tF(n,e)},e.autoFocus=!1})}),!0},t.eq=function(e){return tL(this.codeReference,e.codeReference)},n}(eh.xO),rg=t(16055),rv=t(38056),ry=t(71983),rw=t(94917),rb=t(58864),rS=t(60690),rY=(0,$.x)({container:[{marginRight:16},J.wp.height("100%")],hintButton:[J.wp.height("100%")]}),r_=new tU.E(function(e){var n=e.onGenerateCode,t=e.height,r=(0,H.m5)(),i=(0,rS.Jn)(rw.G.id),o=Math.round(.6*t);return(0,y.Y)(Q.S,{css:rY.container,children:(0,y.Y)(rb.u,{keyCombo:r?void 0:i,text:"Generate",fontSize:o,css:rY.hintButton,onClick:function(){(0,eK.u4)(ry.AZ.GHOSTWRITER_CHAT_INLINE_HINT_CLICKED,{action:"generate"}),n()}})})}),rA=eh.Lz.theme({".cm-ghostwriter-hint-layer":{width:"100%"}}),rC=function(e){var n=e.selection.main.head;return e.doc.lineAt(n)},rk=new nF.k(function(e){return D.sU.define({create:function(e){return rC(e)},compare:ef(),update:function(e,n){return rC(n.state)},provide:function(n){return[rA,D.Nb.high((0,eh.qd)({above:!0,class:"cm-ghostwriter-hint-layer",update:function(e){return(0,em.$H)(e,n,tW.z,rg.RJ)},markers:function(t){var r=t.state.field(n,!1);if(!r||!t.state.selection.main.empty)return[];var i=t.state.field(tW.z,!1),o=0===t.state.doc.length,a=(0,rv.R)(t.state);if(r.length>0||i||a||o)return[];var l=t.dom.querySelector(".cm-minimap-gutter"),s=(null==l?void 0:l.clientWidth)||0,c=r.to,u=t.lineBlockAt(c),d=u.top,p=u.height;return[new rx({top:d+t.documentPadding.top,height:p,right:s,pocketOpen:null!==i,activeEditor:t.hasFocus,onGenerateCode:e})]}}))]}})}),rx=function(){function e(n){(0,eu._)(this,e),this.options=n}var n=e.prototype;return n.position=function(e){e.style.top=this.options.top+"px",e.style.height=this.options.height+"px",e.style.right=this.options.right+"px",e.style.paddingRight=Math.round(.2*this.options.height)+"px"},n.draw=function(){var e=r_.create({onGenerateCode:this.options.onGenerateCode,height:this.options.height});return e.className="cm-ghostwriter-hint-marker",this.options.activeEditor||(e.style.visibility="hidden"),this.position(e),e},n.eq=function(e){return this.options.top===e.options.top&&this.options.pocketOpen===e.options.pocketOpen&&this.options.activeEditor===e.options.activeEditor},e}(),rD=t(39167),rE=(0,$.x)({root:[J.wp.border({color:eF.LU.outlineDimmest}),J.wp.p(8),J.wp.borderRadius(4)]}),rR=new tU.E(function(e){var n=e.onClose,t=e.requestMeasure;return(0,y.Y)(tE.N2,{requestMeasure:t,type:"ghostwriterKillswitch",children:(0,y.FD)(Q.S,{css:rE.root,row:!0,gap:8,children:[(0,y.Y)(Q.S,{grow:!0,shrink:!0,children:(0,y.Y)(rD.E,{textVariant:"text"})}),(0,y.Y)(tN.K0,{alt:"Close",onClick:n,type:"button",children:(0,y.Y)(tM.A,{})})]})})}),rI=function(e){function n(e){var t,r=e.codeReference;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).codeReference=r,t}return(0,n8._)(n,e),n.prototype.toDOM=function(e){var n=this;return rR.create({onClose:function(){return tI(e,n.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(eh.xO),rT=t(64912),rF=t(12331),rP=(0,Y.eU)(0),rL=(0,Y.eU)(function(e){return e(rP)<=tE.bX?"compact":"normal"}),rU=new tU.E(function(e){var n=e.id,t=e.requestMeasure,r=e.codeReference,i=e.updateCodeBlock,o=e.acceptSuggestion,a=e.onClose,l=e.autoFocus,s=e.updateDiffSelection,c=e.source,u=function(){var e=k();(null==e?void 0:e.completed)===void 0&&(null==L?void 0:L.completed)&&(e=L),(null==e?void 0:e.code)?((0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"modify",message_content:e.code,source:c}),o(e.code)):O()},d=function(){var e,n;H.current=Z,(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"modify",message_content:Z,source:c}),A({message:Z,type:B.Z1T.TRANSFORM_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!=(e=r.fileContent)?e:"",fileVersion:r.fileVersion,language:null!=(n=r.language)?n:"",referenceType:B.fDX.INLINE}})},p=(0,z.k)().assistantInlineMode,f=(0,z.UK)().hasAccessToAdvancedModel,h=(0,g._)((0,w.useState)(!1),2),m=h[0],v=h[1],b=(0,z.lW)(),S=(0,z.q4)(),_=ra({onCode:i,getFileContext:(0,t5.H)(),assistantMode:p}),A=_.sendMessage,C=_.stopMessage,k=_.getCode,x=_.loading,D=_.completed,E=_.error,R=_.clearError,I=(0,g._)((0,w.useState)(!1),2),T=I[0],F=I[1],P=(0,g._)((0,w.useState)(null),2),L=P[0],U=P[1],N=(0,t0.A)(s);(0,w.useEffect)(function(){if(x)return void N.current(tG.Suggestion);(D||T)&&N.current(E?tG.Original:tG.Compare)},[N,D,T,E,x]);var O=(0,w.useCallback)(function(){C(),a()},[C,a]),M=(0,w.useCallback)(function(){(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:c}),O()},[O,c]),H=(0,w.useRef)(null),W=function(){(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"modify",message_content:Z,source:c}),C()},G=(0,w.useRef)(null),V=(0,tE.D3)({id:n,inputRef:G,loading:x,onSubmit:function(){J?u():d()},onClose:M}),Z=V.value,j=V.setValue,q=V.onKeyDown,K=V.escPressed,$=(0,z.Gk)(),J=$&&!E&&(D||T)&&H.current===Z,Q=(0,g._)((0,w.useState)(function(){return(0,Y.y$)()}),1)[0],X=(0,ri.Xr)(rP,{store:Q}),ee=(0,ri.md)(rL,{store:Q}),en=(0,rl.A)(function(e){return X(e.width)});(0,w.useEffect)(function(){var e="inline-ai/last-sent-value/".concat(n),t="inline-ai/last-completed/".concat(n),r="inline-ai/last-code-res/".concat(n),i=rF.A.get(e,"string"),o=rF.A.get(t,"boolean"),a=rF.A.get(r,"object");return i&&(H.current=i),F(!!o&&o),a&&U({code:a.code,completed:a.completed,error:a.error}),function(){rF.A.set(t,D||o);var n=k();if((null==n?void 0:n.completed)!==void 0&&rF.A.set(r,n),H.current){var i=H.current;if(0===i.length)return void rF.A.remove(e);rF.A.set(e,i)}}},[D,k,n]);var et="basic"===p?rT.a:rT.K6,er=r.code.length>et,ei=(0,z.jt)(),eo=(0,ru.hT)(),ea=ei&&(eo===B.g32.AGENT_STATE_RUNNING||eo===B.g32.AGENT_STATE_PAUSING);return S?(0,y.Y)(tE.Rc,{inlineActionType:"Modify",closeAction:O}):ea?(0,y.Y)(tE.ce,{inlineActionType:"Modify",closeAction:O}):(0,y.FD)(y.FK,{children:[(0,y.FD)(tE.y1,{requestMeasure:t,type:"generateCode",error:E,clearError:R,innerRef:en,children:[(0,y.Y)(tE.pd,{value:Z,inputRef:G,onChange:function(e){return j(e.currentTarget.value)},placeholder:"Enter a prompt to modify selected lines",onKeyDown:q,autoFocus:l}),(0,y.FD)(tE.wi,{children:[(0,y.FD)(y.FK,{children:[(0,y.Y)(tE.sb,{type:"transformCode",readableModelName:f?b.advancedModel.name.readable:b.basicModel.name.readable}),D||T?(0,y.Y)(tN.K0,{alt:"Rerun the same prompt",onClick:function(){return d()},size:12,colorway:"grey",disabled:!$,children:(0,y.Y)(rd.A,{})}):null]}),J?(0,y.FD)(y.FK,{children:[(0,y.Y)(t3.$n,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=k();(null==e?void 0:e.completed)===void 0&&(null==L?void 0:L.completed)&&(e=L),(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"modify",message_content:(null==e?void 0:e.code)?e.code:"",source:c}),M()}}),(0,y.Y)(t3.$n,{size:"small",text:"Accept",colorway:"blurple",onClick:u,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,y.Y)(tE.XT,{escPressed:K,connecting:!$,loading:x,disabled:!Z||!Z.trim()||er,promptPresentation:"normal"===ee,onClick:function(){x?W():d()},codeLengthExceeded:er})]})]}),(0,y.Y)(rc.default,{isOpen:m,onClose:function(){return v(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}},reloadPageAfterPurchaseComplete:!0})]})}),rN=function(e){function n(e){var t,r=e.id,i=e.codeReference,o=e.source;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).id=r,t.codeReference=i,t.source=o,t}(0,n8._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this.id,t=this.codeReference,r=this.source,i=rU.create({id:n,requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return tI(e,t)},acceptSuggestion:function(n){return tP(e,n,t)},updateCodeBlock:function(n){tF(e,n)},updateDiffSelection:function(n){e.dispatch({effects:tV.of(n)})},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex="10",i},t.updateDOM=function(e,n){var t=this.codeReference;return rU.update(e,function(e){return(0,tQ.jM)(e,function(e){e.requestMeasure=function(){return n.requestMeasure()},e.codeReference=t,e.onClose=function(){return tI(n,t)},e.acceptSuggestion=function(e){return tP(n,e,t)},e.updateCodeBlock=function(e){return tF(n,e)},e.updateDiffSelection=function(e){n.dispatch({effects:tV.of(e)})},e.autoFocus=!1})}),!0},t.eq=function(e){return tL(this.codeReference,e.codeReference)},n}(eh.xO),rO=t(50681),rM=eF.LU.blurpleDimmest,rH=eF.LU.accentPrimaryDimmest,rB=eh.Lz.theme({".cm-pocket-highlight":{backgroundColor:eF.LU.blurpleDimmest,opacity:.2},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(eF.LU.blurpleDimmest,", ").concat(rH,", ").concat(rM,", ").concat(rH,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),rz=eh.Lz.decorations.compute([tW.z,tZ,eg.Md],function(e){var n=e.field(tW.z),t=e.facet(eg.Md);if(!n||!t||n.codeReference.filePath!==t)return eh.NZ.none;var r=e.doc.lineAt(n.codeReference.range.indexFrom).from,i={generateCode:rm,transformCode:rN,explainCode:rr,ghostwriterKillswitch:rI,codeLengthExceeded:tz}[n.type],o=eh.NZ.widget({widget:new i({id:n.id,codeReference:n.codeReference,source:n.source}),block:!0,side:0}).range(r);return eh.NZ.set(o)}),rW=(0,eh.qd)({above:!1,update:function(e){return(0,em.$H)(e,tW.z)},markers:function(e){var n=e.state.field(tW.z),t=e.state.facet(eg.Md);if(!n||!t||n.codeReference.filePath!==t)return[];var r=n.codeReference.range.indexFrom,i=n.codeReference.range.indexTo,o=e.state.doc.lineAt(i);o.from>=r&&o.to===i&&i<e.state.doc.length&&(i+=1);var a=D.OF.range(r,i),l=n.loading&&n.codeReference.range.indexFrom<n.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return eh.Ip.forRange(e,l,a)}}),rG=tD.compute([tW.z,tW.Q,eg.Md,tZ],function(e){var n=e.field(tW.z),t=e.field(tW.Q),r=e.facet(eg.Md),i=e.field(tZ);return n&&t&&r&&n.codeReference.filePath===r&&"transformCode"===n.type&&i===tG.Compare?D.VR.of({from:n.codeReference.range.indexFrom,to:n.codeReference.range.indexTo,insert:t},e.doc.length).apply(e.doc):null}),rV=n3.x.compute([tW.z,tW.Q,eg.Md],function(e){var n=e.field(tW.z),t=e.field(tW.Q),r=e.facet(eg.Md);return n&&t&&r&&n.codeReference.filePath===r&&"generateCode"===n.type?D.VR.of({from:n.codeReference.range.indexTo,to:n.codeReference.range.indexTo,insert:t},e.doc.length):null}),rZ=function(e){function n(e){var t;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).type=e,t}return(0,n8._)(n,e),n.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},n.range=function(e,n,t){return this.from(e).range(n,t)},n}(D.FB);function rj(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=t;o<=r;){var a=e.lineAt(o),l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<n)return null;var t=e.text[0],r=function(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}(t);if(!r)return null;var i=t.repeat(n);return e.text.slice(0,n)!==i||e.text.length>n&&" "!==e.text[n]?null:r}(a,n);l&&i.push(rZ.range(l,a.from,a.to)),o=a.to+1}return i}rZ.yours=new rZ("yours"),rZ.base=new rZ("base"),rZ.middle=new rZ("middle"),rZ.theirs=new rZ("theirs");var rq=["yours","base","middle","theirs"];function rK(e){Array.isArray(e)&&(e=D.om.of(e));var n=[],t=[];if(0===e.size)return{hunks:n,hanging:t};for(var r=e.iter();null!==r.value;){var i,o,a,l={},s={},c=[],u=!0,d=!1,p=void 0;try{for(var f,h=rq[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,g=r.value,y=r.from,w=r.to;if("base"!==m||g.type===m){if(g.type===m)l[m]={from:y,to:w},c.push({from:y,to:w,type:g.type});else if("yours"!==g.type)c.push({from:y,to:w,type:g.type});else break;if(r.next(),null===r.value)break}}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}if(!l.yours||!l.middle||!l.theirs){t.push.apply(t,(0,v._)(c));continue}null!=l.base||(l.base=null),null!=s.base||(s.base=null);var b=null!=(a=l.base)?a:l.middle,S=l.yours.to+1,Y=b.from-1;if(s.yours=S<Y?{from:S,to:Y}:null,l.base){var _=l.base.to+1,A=l.middle.from-1;s.base=_<A?{from:_,to:A}:null}var C=l.middle.to+1,k=l.theirs.from-1;s.theirs=C<k?{from:C,to:k}:null;var x={from:l.yours.from,to:l.theirs.to,markers:l,content:s};n.push(x)}return{hunks:n,hanging:t}}var r$=D.sj.define({combine:function(e){return e.length?e[0]:7}}),rJ=D.sU.define({create:function(e){var n=e.doc,t=e.facet(r$),r=D.om.of(rj(n,t)),i=rK(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,n){var t=n.newDoc,r=n.startState.facet(r$),i=n.state.facet(r$);if(r!==i){var o=D.om.of(rj(t,i)),a=rK(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!n.docChanged)return e;var l=null,s=null,c=null,u=null;n.changes.iterChangedRanges(function(e,n,t,r){l=null===l?e:Math.min(l,e),s=null===s?n:Math.max(s,n),c=null===c?t:Math.min(c,t),u=null===u?r:Math.max(u,r)});var d=e.markers;if(null!==l&&null!==s){var p=n.startState.doc.lineAt(l).from,f=n.startState.doc.lineAt(s).to;d=d.update({filter:function(){return!1},filterFrom:p,filterTo:f})}d=d.map(n.changes),null!==c&&null!==u&&(d=d.update({add:rj(t,i,c,u)}));var h=rK(d);return{markers:d,hunks:h.hunks,hanging:h.hanging}}}),rQ=eh.Lz.atomicRanges.from(rJ,function(e){return function(){return e.markers}}),rX=D.$t.changeFilter.of(function(e){var n=e.startState.field(rJ);if(!e.docChanged||0===n.markers.size)return!0;var t=e.startState.doc,r=[];return e.changes.iterChanges(function(e,i,o,a,l){var s=l.length,c=Math.max(t.lineAt(e).from-1,0),u=Math.min(t.lineAt(i).to+1,t.length);n.markers.between(c,u,function(n,c){if((!(e<=n)||!(i>=c))&&(0===s||(e!==c||"\n"!==l.sliceString(0,1))&&(i!==n||"\n"!==l.sliceString(s-1,s)))){if(o!==a||(i!==c+1||0!==t.lineAt(i).length)&&(e!==n-1||0!==t.lineAt(e).length))r.push(n-1,c+1)}})}),!(r.length>0)||r}),r0=D.$t.transactionFilter.of(function(e){var n=e.docChanged?e.state.field(rJ):e.startState.field(rJ);if(0===n.markers.size)return e;var t=e.newSelection,r=!1,i=!1;do{i=!1;for(var o=0;o<t.ranges.length&&"break"!==function(e){var o=t.ranges[e],a=o.from,l=o.to,s=a,c=l;if(n.markers.between(a,l,function(e,n){var t=(e+n)/2;a>e&&a<n&&(s=a<t?e:n),l>e&&l<n&&(c=l<t?e:n)}),s!==a||c!==l){var u,d=o.anchor<o.head?s:c,p=o.anchor<o.head?c:s,f=o.goalColumn,h=null!=(u=o.bidiLevel)?u:void 0,m=D.OF.range(d,p,f,h);return t=t.replaceRange(m,e),i=!0,r=!0,"break"}}(o);o++);}while(i);return r?[e,{selection:t,sequential:!0}]:e}),r1="cm-git-conflict-marker-yours",r2="cm-git-conflict-marker-base",r4="cm-git-conflict-marker-middle",r5="cm-git-conflict-marker-theirs",r3="cm-git-conflict-marker-hanging",r7="cm-git-conflict-content-yours",r6="cm-git-conflict-content-base",r8="cm-git-conflict-content-theirs";function r9(e){var n=e.background,t=e.color,r=e.noBorder,i={color:t,backgroundColor:n,backgroundClip:"padding-box",paddingTop:eF.LU.space4,paddingBottom:eF.LU.space4,fontWeight:eF.LU.fontWeightBold};return void 0!==r&&r||(i.borderLeft="4px solid rgba(0, 150, 255, 0.1)",i.paddingLeft="2px"),i}function ie(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var it=eh.Lz.theme((o={},(0,ti._)(o,".".concat(r1),r9({background:"rgba(0, 150, 255, 0.1)",color:eF.LU.blueStrongest,noBorder:!0})),(0,ti._)(o,".".concat(r4),r9({background:"rgba(255, 0, 0, 0.1)",color:eF.LU.redStrongest})),(0,ti._)(o,".".concat(r2),r9({background:"rgba(255, 165, 0, 0.1)",color:eF.LU.orangeStrongest})),(0,ti._)(o,".".concat(r5),r9({background:"rgba(0, 150, 255, 0.1)",color:eF.LU.blueStrongest,noBorder:!0})),(0,ti._)(o,".".concat(r3),r9({background:"rgba(100, 150, 255, 0.1)",color:eF.LU.blueStrongest,noBorder:!0})),(0,ti._)(o,".".concat(r7),ie({background:"rgba(0, 255, 0, 0.1)"})),(0,ti._)(o,".".concat(r8),ie({background:"rgba(255, 0, 0, 0.1)"})),(0,ti._)(o,".".concat(r6),ie({background:"rgba(255, 165, 0, 0.1)"})),o)),ir={yours:{marker:eh.NZ.line({class:r1}),content:eh.NZ.line({class:r7})},base:{marker:eh.NZ.line({class:r2}),content:eh.NZ.line({class:r6})},middle:{marker:eh.NZ.line({class:r4})},theirs:{marker:eh.NZ.line({class:r5}),content:eh.NZ.line({class:r8})},hanging:{marker:eh.NZ.line({class:r3})}},ii=function(){function e(n){(0,eu._)(this,e),this.builder=new D.vB,this.doc=n}var n=e.prototype;return n.add=function(e,n){var t=this.doc.lineAt(e.from);if(t.to>=e.to)return void this.builder.add(t.from,t.from,n);for(var r=t.from;r<=e.to;)this.builder.add(r,r,n),r=this.doc.lineAt(r).to+1},n.finish=function(){return this.builder.finish()},e}(),io=eh.Lz.decorations.from(rJ,function(e){return function(n){var t=new ii(n.state.doc),r=!0,i=!1,o=void 0;try{for(var a,l=e.hunks[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;n.viewport.from>s.to||n.viewport.to<s.from||(t.add(s.markers.yours,ir.yours.marker),s.content.yours&&t.add(s.content.yours,ir.yours.content),s.markers.base&&t.add(s.markers.base,ir.base.marker),s.content.base&&t.add(s.content.base,ir.base.content),t.add(s.markers.middle,ir.middle.marker),s.content.theirs&&t.add(s.content.theirs,ir.theirs.content),t.add(s.markers.theirs,ir.theirs.marker))}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}}),ia=eh.Lz.decorations.from(rJ,function(e){return function(){var n=new D.vB,t=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.add(l.from,l.from,ir.hanging.marker)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.finish()}}),il=[rJ,[rQ,rX,r0],[D.Nb.lowest(it),io,ia]],is=function(){function e(n,t,r,i,o,a){(0,eu._)(this,e),this.original=n,this.current=t,this.chunks=r,this.desc=i,this.pending=o,this.ranges=a}var n=e.prototype;return n.hasChanges=function(){return this.ranges.length>0},n.update=function(n,t){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=this.original,l=this.chunks,s=this.desc,c=this.pending,u=this.ranges;if(Math.abs((this.pending?this.pending.length:this.current.length)-n.length)>=250||i){var d=(0,ty._c)(s,c,t).pending;l=(0,ty.Pt)(a,n,{chunks:l,changesB:d},o),s=(0,ty.fc)(l,a.length),c=null,u=(0,ty.Zl)(s)}else c=(r=(0,ty._c)(s,c,t)).pending,s=r.desc,u=(0,ty.Zl)(s);return c&&n.eq(a)&&(l=[],s=D.VR.empty(a.length),c=null,u=[]),new e(a,n,l,s,c,u)},n.isAccurate=function(){return null===this.pending},n.getLineChangeType=function(e){var n=this.current.line(e);return 0===this.original.length&&this.current.length>0?ty.DE.COVERED:(0,ty.$F)(this.original,this.current,n,ty.mn.B,this.ranges)},n.iterRanges=function(){return(0,ed.YH)(this,function(e){switch(e.label){case 0:return[5,(0,ed.Ju)(this.ranges)];case 1:return e.sent(),[2]}})},e.create=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ty.r6,i=(0,ty.Pt)(n,t,void 0,r),o=(0,ty.fc)(i,n.length),a=(0,ty.Zl)(o);return new e(n,t,i,o,null,a)},e}(),ic=t(37872),iu=D.sj.define({combine:function(e){var n;return null!=(n=e.filter(Boolean)[0])?n:null}}),id=D.sU.define({create:function(){return null},update:function(e,n){var t=n.state.facet(iu);if(!t||Math.max(t.lines,n.newDoc.lines)>5e3||Math.max(t.length,n.newDoc.length)>4e5)return null;var r=performance.now(),i=ty.r6,o="unknown";e&&e.original.eq(t)?n.docChanged&&(e=e.update(n.newDoc,n.changes,!(n.isUserEvent("input.type")||n.isUserEvent("delete.forward")||n.isUserEvent("delete.backward")),i),o="update"):(e=is.create(t,n.newDoc,i),o="create");var a=performance.now()-r;return a>1e3&&ic.vF.time("slow SloppyDiff.create recorded",a,{start:t.toString(),end:n.newDoc.toString(),scanLimit:i.scanLimit,type:o}),e}}),ip=t(92425),ih=(0,eh.cU)({class:ip.n1,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(id,!1);if(!t||!t.hasChanges())return ip.jn;if(0===t.original.length)return ip.Ww;var r=e.state.doc.lineAt(n.from);switch(t.getLineChangeType(r.number)){case ty.DE.COVERED:return ip.CI;case ty.DE.MODIFIED:return ip.tH;default:return ip.jn}},initialSpacer:function(e){return e.state.field(id,!1)?ip.Ww:ip.jn},updateSpacer:function(e,n){var t=n.state.field(id,!1)?ip.Ww:ip.jn;return e===t?e:t}}),im=D.sj.define({enables:function(e){return[iu.computeN([e],function(n){return n.facet(e)}),ip.s,id,D.Nb.highest(ih)]}}),ig=t(54843),iv=function(e){return e.GUTTER_DIFF="GUTTER_DIFF",e.INLINE_DIFF="INLINE_DIFF",e}({}),iy=D.Pe.define(),iw=D.Pe.define(),ib=D.sU.define({create:function(){return{head:null,mode:"GUTTER_DIFF"}},update:function(e,n){var t=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,s=n.effects[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;c.is(iy)?t=c.value:c.is(iw)&&(r=c.value)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t!==e.head||r!==e.mode?{head:t,mode:r}:e},provide:function(e){return[im.from(e,function(e){return"GUTTER_DIFF"===e.mode?e.head:null}),ig.X.from(e,function(e){return"INLINE_DIFF"===e.mode?e.head:null})]}}),iS=function(){function e(n,t,r){var i=this;(0,eu._)(this,e),this.view=n,this.git=t,this.path=r,this.disposed=!1,this.dispose=t.onRefresh(function(){return i.fetchThenUpdateState()}),this.fetchThenUpdateState()}var n=e.prototype;return n.fetchThenUpdateState=function(){var e=this;return(0,ec._)(function(){var n,t,r,i,o;return(0,ed.YH)(this,function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD",convertToBase64:(0,N.FN)(e.path)})];case 1:if(n=a.sent(),e.disposed||!(t=e.view.state.field(ib,!1)))return[2];return(!(o=null===(i=n.error?null:null!=(r=n.content)?r:"")?null:e.view.state.toText(i))!=!t.head||o&&t.head&&!o.eq(t.head))&&e.view.dispatch({effects:iy.of(o)}),[2]}})})()},n.destroy=function(){this.dispose(),this.disposed=!0},e}(),iY=t(21762),i_=new nF.k(function(e,n,t){var r=[n?[ib,eh.Z9.define(function(t){return new iS(t,e,n)})]:[]];return t||r.push(il),r}),iA=t(50375),iC=t(25499),ik=t(52422),ix=t(31044),iD=t(84344),iE=t(75880),iR=D.sj.define({combine:function(e){return e.some(Boolean)}}),iI=t(71666),iT=t(51175),iF=t(86466),iP=function(){function e(){(0,eu._)(this,e),this.value="",this.pos=0}var n=e.prototype;return n.text=function(e){this.value=e,this.pos=0},n.tokenText=function(e){return this.value.substr(e.pos,e.len)},n.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var n,t=this.pos,r=0,i=this.value.charCodeAt(t);if("number"==typeof(n=e._table[i]))return this.pos+=1,{type:n,pos:t,len:1};if(e.isDigitCharacter(i)){n=8;do r+=1,i=this.value.charCodeAt(t+r);while(e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}if(e.isVariableCharacter(i)){n=9;do i=this.value.charCodeAt(t+ ++r);while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}n=10;do r+=1,i=this.value.charCodeAt(t+r);while(!isNaN(i)&&void 0===e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();a={},(0,ti._)(a,36,0),(0,ti._)(a,58,1),(0,ti._)(a,44,2),(0,ti._)(a,123,3),(0,ti._)(a,125,4),(0,ti._)(a,92,5),(0,ti._)(a,47,6),(0,ti._)(a,124,7),(0,ti._)(a,43,11),(0,ti._)(a,45,12),(0,ti._)(a,63,13),iP._table=a;var iL=function(){function e(){var n;(0,eu._)(this,e),this._children=[],n=this,["parent"].forEach(function(e){Object.defineProperty(n,e,{enumerable:!1,writable:!0})})}var n=e.prototype;return n.appendChild=function(e){return e instanceof iU&&this._children[this._children.length-1]instanceof iU?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},n.replace=function(e,n){var t=e.parent,r=t.children.indexOf(e),i=t.children.slice(0);i.splice.apply(i,[r,1].concat((0,v._)(n))),t._children=i,function e(n,t){var r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;s.parent=t,e(s.children,s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(n,t)},n.toString=function(){return this.children.reduce(function(e,n){return e+n.toString()},"")},n.len=function(){return 0},n.match=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=Object.entries(iZ)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,g._)(i.value,2),l=a[0],s=a[1];if(this instanceof s&&l in e)return e[l](this)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}},(0,n6._)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof iG)return e;e=e.parent}}}]),e}(),iU=function(e){function n(e){var t;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).value=e,t}(0,n8._)(n,e);var t=n.prototype;return t.toString=function(){return this.value},t.toTextmateString=function(){return n.escape(this.value)},t.len=function(){return this.value.length},t.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(iL),iN=function(e){function n(){return(0,eu._)(this,n),(0,n7._)(this,n,arguments)}return(0,n8._)(n,e),n}(iL),iO=function(e){function n(e){var t;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).index=e,t}(0,n8._)(n,e);var t=n.prototype;return t.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform)?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}"):"$".concat(this.index)},t.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n.compareByIndex=function(e,n){if(e.index===n.index)return 0;if(e.isFinalTabstop)return 1;if(n.isFinalTabstop)return -1;if(e.index<n.index)return -1;if(e.index>n.index)return 1;else return 0},(0,n6._)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof iM?this._children[0]:void 0}}]),n}(iN),iM=function(e){function n(){var e;return(0,eu._)(this,n),e=(0,n7._)(this,n,arguments),e.options=[],e}(0,n8._)(n,e);var t=n.prototype;return t.appendChild=function(e){return e instanceof iU&&(e.parent=this,this.options.push(e)),this},t.toString=function(){return this.options[0].value},t.toTextmateString=function(){return this.options.map(function(e){return e.value.replace(/\||,|\\/g,"\\$&")}).join(",")},t.len=function(){return this.options[0].len()},t.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(iL),iH=function(e){function n(){var e;return(0,eu._)(this,n),e=(0,n7._)(this,n,arguments),e.regexp=RegExp(""),e}(0,n8._)(n,e);var t=n.prototype;return t.resolve=function(e){var n=this,t=!1,r=e.replace(this.regexp,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=!0,n._replace(r.slice(0,-2))});return!t&&this._children.some(function(e){return e instanceof iB&&!!e.elseValue})&&(r=this._replace([])),r},t._replace=function(e){var n="",t=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l instanceof iB){var s=e[l.index]||"";s=l.resolve(s),n+=s}else n+=l.toString()}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n},t.toString=function(){return""},t.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map(function(e){return e.toTextmateString()}),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},t.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(function(e){return e.clone()}),e},n}(iL),iB=function(e){function n(e,t,r,i){var o;return(0,eu._)(this,n),(o=(0,n7._)(this,n)).index=e,o.shorthandName=t,o.ifValue=r,o.elseValue=i,o}(0,n8._)(n,e);var t=n.prototype;return t.resolve=function(e){if("upcase"===this.shorthandName)return e?e.toLocaleUpperCase():"";if("downcase"===this.shorthandName)return e?e.toLocaleLowerCase():"";if("capitalize"===this.shorthandName)return e?e[0].toLocaleUpperCase()+e.substr(1):"";if("pascalcase"===this.shorthandName)return e?this._toPascalCase(e):"";if("camelcase"===this.shorthandName)return e?this._toCamelCase(e):"";else if(e&&"string"==typeof this.ifValue)return this.ifValue;else if(!e&&"string"==typeof this.elseValue)return this.elseValue;else return e||""},t._toPascalCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},t._toCamelCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map(function(e,n){return 0===n?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},t.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},t.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(iL),iz=function(e){function n(e){var t;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).name=e,t}(0,n8._)(n,e);var t=n.prototype;return t.resolve=function(e){var n=e.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),void 0!==n&&(this._children=[new iU(n)],!0)},t.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0===this.children.length)?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}")},t.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n}(iN);function iW(e,n){for(var t=(0,v._)(e);t.length>0;){var r=t.shift();if(!n(r))break;t.unshift.apply(t,(0,v._)(r.children))}}var iG=function(e){function n(){return(0,eu._)(this,n),(0,n7._)(this,n,arguments)}(0,n8._)(n,e);var t=n.prototype;return t.offset=function(e){var n=0,t=!1;return(this.walk(function(r){return r===e?(t=!0,!1):(n+=r.len(),!0)}),t)?n:-1},t.fullLen=function(e){var n=0;return iW([e],function(e){return n+=e.len(),!0}),n},t.enclosingPlaceholders=function(e){for(var n=[],t=e.parent;t;)t instanceof iO&&n.push(t),t=t.parent;return n},t.resolveVariables=function(e){var n=this;return this.walk(function(t){return t instanceof iz&&t.resolve(e)&&delete n._placeholders,!0}),this},t.appendChild=function(e){return delete this._placeholders,(0,iT._)((0,iF._)(n.prototype),"appendChild",this).call(this,e)},t.replace=function(e,t){return delete this._placeholders,(0,iT._)((0,iF._)(n.prototype),"replace",this).call(this,e,t)},t.toTextmateString=function(){return this.children.reduce(function(e,n){return e+n.toTextmateString()},"")},t.clone=function(){var e=new n;return this._children=this.children.map(function(e){return e.clone()}),e},t.walk=function(e){iW(this.children,e)},(0,n6._)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,n=[];this.walk(function(t){return t instanceof iO&&(n.push(t),e=!e||e.index<t.index?t:e),!0}),this._placeholders={all:n,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(iL),iV=function(){function e(){(0,eu._)(this,e),this._scanner=new iP,this._token={type:14,pos:0,len:0}}var n=e.prototype;return n.text=function(e){return this.parse(e).toString()},n.parse=function(e,n,t){var r=new iG;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!=t&&t,null!=n&&n),r},n.parseFragment=function(e,n){var t=n.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(n););var r=new Map,i=[];n.walk(function(e){return e instanceof iO&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0});var o=function(e,t){var i=r.get(e.index);if(i){var a=new iO(e.index);a.transform=e.transform;var l=!0,s=!1,c=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value.clone();a.appendChild(p),p instanceof iO&&r.has(p.index)&&!t.has(p.index)&&(t.add(p.index),o(p,t),t.delete(p.index))}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}n.replace(e,[a])}},a=new Set,l=!0,s=!1,c=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;o(p,a)}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return n.children.slice(t)},n.ensureFinalTabstop=function(e,n,t){(n||t&&e.placeholders.length>0)&&(e.placeholders.find(function(e){return 0===e.index})||e.appendChild(new iO(0)))},n._accept=function(e,n){if(void 0===e||this._token.type===e){var t=!n||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),t}return!1},n._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},n._until=function(e){for(var n=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var t=this._scanner.next();if(0!==t.type&&4!==t.type&&5!==t.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(n.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},n._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},n._parseEscaped=function(e){var n;return!!(n=this._accept(5,!0))&&(n=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||n,e.appendChild(new iU(n)),!0)},n._parseTabstopOrVariableName=function(e){var n,t=this._token;return this._accept(0)&&(n=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(n)?new iO(Number(n)):new iz(n)),!0):this._backTo(t)},n._parseComplexPlaceholder=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(8,!0))))return this._backTo(t);var r=new iO(Number(n));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new iU("${"+n+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7))for(var i=new iM;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(t),!1}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(t)},n._parseChoiceElement=function(e){for(var n=this._token,t=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(n),!1;t.push(r)}return 0===t.length?(this._backTo(n),!1):(e.appendChild(new iU(t.join(""))),!0)},n._parseComplexVariable=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(9,!0))))return this._backTo(t);var r=new iz(n);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new iU("${"+n+":")),r.children.forEach(e.appendChild,e),!0}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(t)},n._parseTransform=function(e){for(var n=new iH,t="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0)){t+=i=this._accept(6,!0)||i;continue}if(14!==this._token.type){t+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,n.appendChild(new iU(o));continue}if(!(this._parseFormatString(n)||this._parseAnything(n)))return!1}for(;!this._accept(4);){if(14!==this._token.type){r+=this._accept(void 0,!0);continue}return!1}try{n.regexp=new RegExp(t,r)}catch(e){return!1}return e.transform=n,!0},n._parseFormatString=function(e){var n=this._token;if(!this._accept(0))return!1;var t=!1;this._accept(3)&&(t=!0);var r=this._accept(8,!0);if(!r)return this._backTo(n),!1;if(!t)return e.appendChild(new iB(Number(r))),!0;if(this._accept(4))return e.appendChild(new iB(Number(r))),!0;if(!this._accept(1))return this._backTo(n),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new iB(Number(r),i)),!0):(this._backTo(n),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new iB(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new iB(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var s=this._until(4);if(s)return e.appendChild(new iB(Number(r),void 0,l,s)),!0}}else{var c=this._until(4);if(c)return e.appendChild(new iB(Number(r),void 0,void 0,c)),!0}return this._backTo(n),!1},n._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new iU(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(n){return new e().parse(n).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),iZ={Text:iU,Placeholder:iO,Variable:iz,FormatString:iB,Choice:iM},ij=function(){function e(n){(0,eu._)(this,e),this.lines=n.split(/\r\n?|\n/).map(function(e){return new iV().parse(e).children})}return e.prototype.apply=function(n){var t=n.view,r=n.from,i=n.to,o=e.instantiate(this.lines,n),a=o.text,l=o.ranges,s={from:r,to:i,insert:D.EY.of(a)},c={changes:s,scrollIntoView:!0,annotations:iD.rK.of(n.completion)};if(l.length&&(c.selection=i0(l,0)),l.length>1){var u=new i$(l,0),d=c.effects=[iJ.of(u)];void 0===t.state.field(iX,!1)&&d.push(D.Pe.appendConfig.of([iX,i2,i4]))}if(r===i&&!l.length){var p=D.VR.of(s,t.state.doc.length),f=t.state.selection.ranges.map(function(e){return e.map(p,0)});c.selection=D.OF.create(f,t.state.selection.mainIndex)}return c},e.resolveVariable=function(e,n){var t=n.view,r=n.from,i=n.path;switch(e){case"TM_FILENAME":return(0,iI.basename)(i);case"TM_FILENAME_BASE":return(0,iI.basename)(i,(0,iI.extname)(i));case"TM_DIRECTORY":return(0,iI.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(t.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return t.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(n,t){var r=t.view,i=t.from,o=r.state,a=[],l=[],s=o.doc.lineAt(i),c=/^\s*/.exec(s.text)[0],u=o.facet(_.Xt),d=!0,p=!1,f=void 0;try{for(var g,y,w=n[Symbol.iterator]();!(d=(y=w.next()).done);d=!0)!function(){var n=y.value,r=0,o="",s=function(e){var n=0,t=r;if(0===r&&(n=/^\t*/.exec(e)[0].length)){var i=c+u.repeat(n);e=i+e.slice(n),t+=i.length}return o+=e,r+=e.length,{line:a.length,from:t,to:r}},d=function(n){var o=!0,c=!1,u=void 0;try{for(var p,f=n[Symbol.iterator]();!(o=(p=f.next()).done);o=!0)p.value.match({Text:function(e){s(e.value)},Variable:function(n){var r=n.name,i=n.transform,o=e.resolveVariable(r,t);i&&(o=o.replace(i.regexp,function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return i.children.map(function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(n[e.index])}})}).filter(Boolean).join("")})),s(o)},Choice:function(e){s(e.options[0].value)},Placeholder:function(e){var n,t=a.length?i+a.map(function(e){return e.length}).reduce(function(e,n){return e+n}):i;if(null==(n=e.children)?void 0:n.length){var o={field:e.index,from:t+r,to:null};l.push(o),d(e.children),o.to=t+r}else{s("");var c=t+r;l.push({field:e.index,from:c,to:c})}}})}catch(e){c=!0,u=e}finally{try{o||null==f.return||f.return()}finally{if(c)throw u}}};d(n),a.push(o)}()}catch(e){p=!0,f=e}finally{try{d||null==w.return||w.return()}finally{if(p)throw f}}var b=(g=Math).max.apply(g,(0,v._)(l.map(function(e){return e.field})));return{text:a,ranges:l.map(function(e){var n=e.field,t=(0,es._)(e,["field"]);return(0,m._)((0,h._)({},t),{field:0===n?b:n-1})})}},e}(),iq=eh.NZ.widget({widget:new(function(e){function n(){return(0,eu._)(this,n),(0,n7._)(this,n,arguments)}(0,n8._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},t.ignoreEvent=function(){return!1},n}(eh.xO))}),iK=eh.NZ.mark({class:"cm-snippetField"}),i$=function(){function e(n,t){(0,eu._)(this,e),this.ranges=n,this.active=t,this.deco=eh.NZ.set(n.map(function(e){return(e.from===e.to?iq:iK).range(e.from,e.to)}))}var n=e.prototype;return n.map=function(n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value,c=function(e,n){var t=n.mapPos(e.from,-1,D.iR.TrackDel),r=n.mapPos(e.to,1,D.iR.TrackDel);return null==t||null==r?null:{field:e.field,from:t,to:r}}(s,n);if(!c)return null;t.push(c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(t,this.active)},n.isSelectionInsideField=function(e){var n=this;return e.ranges.every(function(e){return n.ranges.some(function(t){return t.field===n.active&&t.from<=e.from&&t.to>=e.to})})},e}(),iJ=D.Pe.define({map:function(e,n){return null==e?void 0:e.map(n)}}),iQ=D.Pe.define(),iX=D.sU.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(iJ))return l.value;if(l.is(iQ)&&e)return new i$(e.ranges,l.value)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e&&n.docChanged&&(e=e.map(n.changes)),e&&n.selection&&!e.isSelectionInsideField(n.selection)&&(e=null),e},provide:function(e){return eh.Lz.decorations.from(e,function(e){return e?e.deco:eh.NZ.none})}});function i0(e,n){var t=e.filter(function(e){return e.field===n}).map(function(e){return D.OF.range(e.from,e.to)});if(0!==t.length)return D.OF.create(t)}function i1(e){return function(n){var t,r=n.state,i=n.dispatch,o=r.field(iX,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,l=(t=Math).max.apply(t,(0,v._)(o.ranges.map(function(e){return e.field}))),s=e>0&&o.active>=l;return i(r.update({selection:i0(o.ranges,a),effects:iJ.of(s?null:new i$(o.ranges,a))})),!0}}var i2=D.Nb.highest(eh.w4.of([{key:"Tab",run:i1(1),shift:i1(-1)},{key:"Escape",run:function(e){var n=e.state,t=e.dispatch;return!!n.field(iX,!1)&&(t(n.update({effects:iJ.of(null)})),!0)}}])),i4=eh.Lz.domEventHandlers({mousedown:function(e,n){var t,r=n.state.field(iX,!1);if(!r||null==(t=n.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find(function(e){return e.from<=t&&e.to>=t});return!!i&&i.field!==r.active&&(n.dispatch({selection:i0(r.ranges,i.field),effects:iJ.of(r.ranges.some(function(e){return e.field>i.field})?new i$(r.ranges,i.field):null)}),!0)}}),i5=t(37658),i3=t(25578),i7=(0,$.x)({styles0:[{p:{whiteSpace:"pre-wrap"}}]}),i6={p:{padding:"".concat(eF.LU.space2," ").concat(eF.LU.space8),lineHeight:1.4,marginBottom:"".concat(eF.LU.space8," !important")},"p:first-of-type":{marginTop:"".concat(eF.LU.space4," !important")},"p:last-of-type":{marginBottom:"".concat(eF.LU.space4," !important")},pre:{margin:"".concat(eF.LU.space2," ").concat(eF.LU.space8)},"pre + p":{borderTop:"1px solid ".concat(eF.LU.outlineDimmest),paddingTop:eF.LU.space4},"h1, h2, h3":{margin:"".concat(eF.LU.space8," !important"),marginTop:"".concat(eF.LU.space12," !important"),padding:"0 !important",paddingBottom:"".concat(eF.LU.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(eF.LU.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(eF.LU.space4," !important")},hr:{margin:"".concat(eF.LU.space8," !important"),borderTop:"2px solid ".concat(eF.LU.backgroundHighest," !important")},li:{margin:"".concat(eF.LU.space2," ").concat(eF.LU.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(eF.LU.backgroundHighest),marginBottom:eF.LU.space4},".cm-line":{paddingLeft:eF.LU.space4,paddingRight:eF.LU.space4},".cm-content":{paddingLeft:eF.LU.space4,paddingRight:eF.LU.space4}},i8=(0,w.memo)(function(e){var n=e.content,t=e.className;return(0,y.Y)(Q.S,{css:i6,children:(0,y.Y)(i3.Ay,{className:t,components:{code:function(e){return(0,y.Y)(i5.A,(0,h._)({minimal:!0,disableCopy:!0},e))}},children:n})})});function i9(e){var n=e.content,t=e.className;return"string"==typeof n?(0,y.Y)(i8,{css:i7.styles0,className:t,content:n}):n.kind===eI.MarkupKind.PlainText?(0,y.Y)(Q.S,{children:(0,y.Y)(tO.EY,{className:t,children:n.value})}):(0,y.Y)(i8,{className:t,content:n.value})}var oe=new WeakMap,on=t(31590),ot=t(31614),or=t(4056),oi="cm-ghostwriter-hint-tooltip",oo=eh.Lz.theme((0,ti._)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:eF.LU.backgroundHigher,borderTop:"solid 1px ".concat(eF.LU.outlineDefault)}},".cm-tooltip-autocomplete.".concat(oi," .cm-ghostwriter-hint"),{display:"block"})),oa=(0,$.x)({hint:[J.wp.font.default,{opacity:.6}]});function ol(){return(0,y.FD)(Q.S,{css:oa.hint,p:4,row:!0,gap:8,align:"center",children:[(0,y.Y)(or.A,{width:8,height:8}),(0,y.FD)(Q.S,{row:!0,gap:4,align:"center",children:[(0,y.Y)(ot.A,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,y.Y)(tO.EY,{variant:"small",multiline:!1,children:"to use AI suggestion."})]})]})}var os=eh.Z9.define(function(e){var n=function(){var n,t,r;return(0,v._)(e.dom.children).concat((0,v._)(null!=(r=null==(t=on.vR.get(e))||null==(n=t.children[0])?void 0:n.children)?r:[])).filter(function(e){return e.classList.contains("cm-tooltip-autocomplete")})},t=function(e){return Array.from(e.children).filter(function(e){return e.classList.contains("cm-ghostwriter-hint")})},r=!1;return{update:function(){null!==(0,iD.DH)(e.state)&&Promise.resolve().then(function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var a,l=n()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value,c=t(s);if(0===c.length){var u=(0,tU.J)((0,y.Y)(ol,{}));u.className="cm-ghostwriter-hint",s.appendChild(u)}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=n()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value,c=!0,u=!1,d=void 0;try{for(var p,f=t(s)[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value;s.removeChild(h)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}});function oc(e){var n=Object.keys(e).join(""),t=/\w/.test(n);return t&&(n=n.replace(/\w/g,"")),"[".concat(t?"\\w":"").concat(n.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}var ou="lsp-completion-keyboard-shortcuts",od=eh.Lz.theme((l={"& .cm-tooltip-autocomplete":{"& > *":{marginRight:4},"& > *:last-child":{marginRight:0},"& .cm-completionLabel":{flexGrow:1,flexShrink:1,overflowX:"auto",textOverflow:"ellipsis"},"& .cm-completionDetail":{color:eF.LU.foregroundDimmer,fontSize:"85%",marginLeft:"unset"}}},(0,ti._)(l,"& .".concat(ou),{display:"none"}),(0,ti._)(l,'& [aria-selected="true"] .'.concat(ou),{float:"right",display:"inline-block"}),l)),op=t(34601),of=t(40769),oh=t(65173),om=t(7868),og=new(function(e){function n(){var e;return(0,eu._)(this,n),(e=(0,n7._)(this,n)).elementClass="cm-gutterElement-hidden",e}return(0,n8._)(n,e),n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var n=document.createElement("span");return n.classList.add("cm-dot"),e.appendChild(n),e},n}(eh.wJ)),ov=function(e){function n(e){var t;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).numLines=e,t}(0,n8._)(n,e);var t=n.prototype;return t.eq=function(e){return e.numLines===this.numLines},t.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,om.A)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(eh.xO),oy=eh.NZ.mark({class:"cm-searchResultMatch"}),ow=eh.Lz.baseTheme({".cm-hidden-lines":{color:eF.LU.foregroundDimmer,backgroundColor:eF.LU.backgroundHighest,display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:eF.LU.backgroundHighest},".cm-hidden-lines-gutter":{backgroundColor:eF.LU.backgroundHighest,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:eF.LU.foregroundDimmest,borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid ".concat(eF.LU.backgroundHighest),borderRadius:eF.LU.borderRadius4},".cm-tooltip .cm-scroller:hover":{border:"2px solid ".concat(eF.LU.accentPrimaryDimmest),boxShadow:eF.LU.shadow1,cursor:"pointer"},".cm-searchResultMatch":{color:eF.LU.foregroundDefault,backgroundColor:eF.LU.accentPrimaryDimmest,outline:eF.LU.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:eF.LU.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}}),ob=t(491),oS=t(32331),oY=t(43813),o_=t(27789),oA=(0,$.x)({snippetGroupText:[J.wp.pl(8),J.wp.py(8)],loadingContainer:[J.wp.width(128),J.wp.height(128),J.wp.display.flex,J.wp.align.center,J.wp.justify.center],container:[J.wp.minWidth("375px"),J.wp.maxWidth("500px"),J.wp.pt(4),J.wp.overflowY("scroll")],firstReferenceDivider:[J.wp.border({direction:"bottom",color:eF.LU.backgroundHighest})],header:[J.wp.p(4),J.wp.pl(8)],referencesHeader:[J.wp.p(4),J.wp.pl(8)]}),oC=function(e){return e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES",e}(oC||{});function ok(e){var n=e.matchesMap,t=e.fileToContents,r=e.type,i=e.onClose,o=e.jumpToPosition,a=Object.keys(n);return 0===a.length?(0,y.Y)(tO.EY,{color:"dimmer",css:oA.snippetGroupText,multiline:!1,children:"REFERENCES"===r?"No references found":"No definitions found"}):(0,y.Y)(Q.S,{children:a.map(function(e){var r,l,s,c,u,d,p,f,h,m,v,w=n[e],b=t[e],S=(v=(m=w.sort(function(e,n){return e.from-n.from})).map(function(e){var n=e.from,t=e.to;return oy.range(n,t)}),[eh.Z9.define(function(){return{}},{decorations:function(){return eh.NZ.set(v)}}),(r=m,l=b,s=[],c=1,r.forEach(function(e,n){var t=l.lineAt(e.from),i=l.lineAt(e.to);c<t.number-2&&s.push({startLine:c,endLine:t.number-2}),c=i.number+2,n===r.length-1&&c<l.lines&&s.push({startLine:c,endLine:l.lines})}),u=s.map(function(e){var n=l.line(e.startLine),t=l.line(e.endLine);return eh.NZ.replace({widget:new ov(e.endLine-e.startLine+1)}).range(n.from,t.to)}),d=s.map(function(e){var n=l.line(e.startLine);return eh.NZ.line({class:"cm-line-hidden"}).range(n.from)}),p=D.sU.define({create:function(){return eh.NZ.set(u)},update:function(e){return e},provide:function(e){return eh.Lz.decorations.from(e)}}),f=D.sU.define({create:function(){return eh.NZ.set(d)},update:function(e){return e},provide:function(e){return eh.Lz.decorations.from(e)}}),h=s.map(function(e){var n=l.line(e.startLine);return og.range(n.from)}),[p,f,ow,eh.pK.of(D.om.of(h))])]);return(0,y.Y)(Q.S,{p:4,children:(0,y.Y)(oE,{path:e,extensions:[S],doc:b,numMatches:w.length,initiallyExpanded:1===a.length,onNavigateToCode:function(n){if(null!==n)o({path:e,line:n.line+1,col:n.character});else{var t=(0,g._)(w,1)[0],r=b.lineAt(t.from),a=t.from-r.from;o({path:e,line:r.number,col:a})}i()}})},e)})})}function ox(e){var n=e.onClose,t=e.references,r=e.definitions,i=e.jumpToPosition,o=(0,n2.A)().fs,a=(0,oS.A)(n,[]),l=(0,g._)((0,w.useState)({}),2),s=l[0],c=l[1],u=(0,g._)((0,w.useState)(!0),2),d=u[0],p=u[1];if((0,w.useEffect)(function(){var e=new Set((0,v._)(t).concat((0,v._)(r)).map(function(e){return e.path}));if(!e.size)return void p(!1);var n=!1;function i(){return(i=(0,ec._)(function(){var t;return(0,ed.YH)(this,function(r){switch(r.label){case 0:var i;return p(!0),t={},[4,Promise.all(Array.from(e).map((i=(0,ec._)(function(e){var n;return(0,ed.YH)(this,function(r){switch(r.label){case 0:return[4,o.readFile(e)];case 1:if((n=r.sent()).error)throw Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(n.error));return t[e]=D.EY.of(n.content.toString().split("\n")),[2]}})}),function(e){return i.apply(this,arguments)})))];case 1:if(r.sent(),p(!1),n)return[2];return c(function(e){return(0,h._)({},e,t)}),[2]}})})).apply(this,arguments)}return!function(){i.apply(this,arguments)}(),function(){n=!0}},[o,t,r]),d)return(0,y.Y)(Q.S,{css:oA.loadingContainer,children:(0,y.Y)(n_.A,{size:32})});var f={},m={};function b(e,n){var t=e.range,r=t.start,i=t.end;e.path in n||(n[e.path]=[]);var o=s[e.path],a=o.line(r.line+1),l=o.line(i.line+1);n[e.path].push({from:a.from+r.character,to:l.from+i.character})}return t.forEach(function(e){b(e,f)}),r.forEach(function(e){b(e,m)}),(0,y.FD)(Q.S,{innerRef:a,css:oA.container,children:[(0,y.Y)(Q.S,{css:oA.firstReferenceDivider,children:(0,y.FD)(Q.S,{p:4,children:[(0,y.FD)(Q.S,{pr:4,row:!0,justify:"space-between",align:"center",children:[(0,y.Y)(tO.Y9,{level:2,variant:"subheadDefault",css:oA.header,children:"Definitions"}),(0,y.Y)(tN.K0,{alt:"Close",onClick:n,children:(0,y.Y)(tM.A,{})})]}),(0,y.Y)(ok,{matchesMap:m,fileToContents:s,type:"DEFINITION",onClose:n,jumpToPosition:i})]})}),(0,y.Y)(Q.S,{children:(0,y.FD)(Q.S,{p:4,children:[(0,y.Y)(tO.Y9,{level:2,variant:"subheadDefault",css:oA.referencesHeader,children:"References"}),(0,y.Y)(ok,{matchesMap:f,fileToContents:s,type:"REFERENCES",onClose:n,jumpToPosition:i})]})})]})}var oD=(0,$.x)({container:[J.wp.width("100%"),J.wp.p(4),J.wp.rowWithGap(4),J.wp.justify.spaceBetween,J.wp.align.center],text:[J.wp.flex.shrink(1),{textOverflow:"ellipsis"}]});function oE(e){var n=e.path,t=e.doc,r=e.extensions,i=e.numMatches,o=e.onNavigateToCode,a=e.initiallyExpanded,l=(0,g._)((0,w.useState)(a),2),s=l[0],c=l[1];return(0,y.FD)(Q.S,{children:[(0,y.FD)(Q.S,{css:oD.container,children:[(0,y.FD)(Q.S,{grow:!0,row:!0,gap:8,align:"center",children:[(0,y.Y)(oY.A,{path:n}),(0,y.Y)(tO.EY,{multiline:!1,title:n,css:oD.text,children:n}),(0,y.Y)(tO.EY,{color:"dimmest",multiline:!1,children:(0,om.A)("match",i,!0)})]}),(0,y.Y)(tN.K0,{alt:s?"Collapse snippet":"Expand snippet",tooltipBehavior:"hidden",onClick:function(){return c(function(e){return!e})},children:(0,y.Y)(o_.A,{rotate:180*!!s,style:{transition:"200ms ease"}})})]}),(0,y.Y)(Q.S,{p:4,style:{display:s?"block":"none"},children:(0,y.Y)(ob.f,{path:n,initialDoc:t,extensions:void 0===r?[]:r,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:o})})]})}var oR=t(57792);function oI(e){var n=e.content,t=e.className,r=(0,O.g)("fontSize").preferences;if("string"!=typeof n&&"kind"in n)return(0,y.Y)(i9,{content:n});var i=(Array.isArray(n)?n:[n]).map(function(e){return"string"==typeof e?e:"```"+e.language+"\n"+e.value+"\n```"}).join("\n");return(0,y.Y)(i3.Ay,{css:[{p:{fontSize:r.fontSize},hr:{display:"none"}}],className:t,components:{code:function(e){return(0,y.Y)(i5.A,(0,h._)({minimal:!0,disableCopy:!0},e))}},children:i})}function oT(e){var n=e.className,t=e.content;return(0,y.Y)(Q.S,{css:[i6,J.wp.maxHeight(190),J.wp.minHeight(30),J.wp.overflowY("auto"),J.wp.borderRadius(4),J.wp.backgroundColor.backgroundHigher],children:(0,y.Y)(oI,{content:t,className:n})})}var oF=t(24223),oP=t(908),oL=t(23271),oU=(0,t(66437).D)(),oN=D.Pe.define(),oO=D.sU.define({create:function(){return null},update:function(e,n){if(n.isUserEvent("select")||n.isUserEvent("undo")||n.isUserEvent("redo"))return null;if(!n.isUserEvent("input.type")||n.changes.empty)return e;var t="";return n.changes.iterChanges(function(e,n,r,i,o){t=o.sliceString(0,1)}),t||null}}),oM=new tU.E(function(e){var n,t,r=e.help,i=e.index,o="1px solid ".concat(eF.LU.outlineDimmer),a="min(425px, 80vw)",l=r.signatures[i],s=r.signatures.length>1;if(!l)return null;var c=l.documentation,u=null!=r.activeParameter&&(null==(t=l.parameters)||null==(n=t[r.activeParameter])?void 0:n.documentation);return(0,y.FD)(Q.S,{css:[J.wp.backgroundColor.backgroundHigher,{width:"max-content"}],row:!0,children:[s?(0,y.Y)(Q.S,{css:[{borderRight:o,paddingBottom:5}],pl:4,row:!0,children:(0,y.FD)("span",{css:[{alignSelf:"flex-end"},J.wp.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,y.FD)(Q.S,{children:[(0,y.Y)(Q.S,{css:[J.wp.pl(s?4:8),J.wp.pr(8),J.wp.maxHeight(100),J.wp.overflowY("scroll"),J.wp.font.code,{lineHeight:eF.LU.lineHeightSmall,maxWidth:a}],py:4,children:(0,y.Y)(oH,{signature:l,activeParameter:r.activeParameter})}),!!(c||u)&&(0,y.FD)(Q.S,{css:[J.wp.px(s?4:8),J.wp.py(2),J.wp.maxHeight(200),J.wp.overflow("scroll"),{borderTop:o,maxWidth:a}],children:[u?(0,y.Y)(i9,{content:u}):null,c?(0,y.Y)(i9,{content:c}):null]})]})]})});function oH(e){var n,t=e.signature,r=t.label,i=t.parameters,o=e.activeParameter;if(null==o||!i)return(0,y.Y)("span",{children:r});var a=null==(n=i[o])?void 0:n.label;if(!a)return(0,y.Y)("span",{children:r});var l=(0,g._)("string"==typeof a?[r.indexOf(a),r.indexOf(a)+a.length]:a,2),s=l[0],c=l[1];return(0,y.FD)("div",{children:[(0,y.Y)("span",{children:r.slice(0,s)}),(0,y.Y)("strong",{children:a}),(0,y.Y)("span",{children:r.slice(c)})]})}function oB(){return(oB=(0,ec._)(function(e,n,t,r,i){return(0,ed.YH)(this,function(o){switch(o.label){case 0:var a;return[4,Promise.all(t.map((a=(0,ec._)(function(t){var o,a;return(0,ed.YH)(this,function(l){return(o=i.current.get(t.clientId))&&t.notify.cancelRequest(o),a=t.generateId(),i.current.set(t.clientId,a),[2,t.request.signatureHelp(r,(0,ew.Z3)(e.doc,n),{id:a}).then(function(e){return(i.current.get(t.clientId)===a&&i.current.set(t.clientId,null),"error"in e)?null:e.result})]})}),function(e){return a.apply(this,arguments)})))];case 1:return[2,o.sent().find(function(e){return null!==e&&e.signatures.length})]}})})).apply(this,arguments)}var oz=t(67201),oW=t(33682),oG=new Map,oV=t(24472),oZ=t(95866),oj=t(69549),oq={namespace:oZ._A.namespace,type:oZ._A.typeName,class:oZ._A.className,enum:oZ._A.typeName,interface:oZ._A.typeName,struct:oZ._A.typeName,typeParameter:oZ._A.typeName,parameter:oZ._A.variableName,variable:oZ._A.variableName,property:oZ._A.propertyName,enumMember:oZ._A.propertyName,event:oZ._A.typeName,function:oZ._A.function(oZ._A.variableName),method:oZ._A.function(oZ._A.propertyName),macro:oZ._A.macroName,keyword:oZ._A.keyword,modifier:oZ._A.modifier,comment:oZ._A.comment,string:oZ._A.string,number:oZ._A.number,regexp:oZ._A.regexp,operator:oZ._A.operator,decorator:oZ._A.function(oZ._A.annotation),angle:null,arithmetic:oZ._A.arithmeticOperator,attribute:oZ._A.attributeName,attributeBracket:oZ._A.bracket,bitwise:oZ._A.bitwiseOperator,boolean:oZ._A.bool,brace:oZ._A.brace,bracket:oZ._A.bracket,builtinAttribute:oZ._A.standard(oZ._A.attributeName),builtinType:oZ._A.standard(oZ._A.typeName),character:oZ._A.character,colon:oZ._A.punctuation,comma:oZ._A.separator,comparison:oZ._A.compareOperator,constParameter:oZ._A.constant(oZ._A.variableName),derive:oZ._A.function(oZ._A.annotation),deriveHelper:oZ._A.function(oZ._A.annotation),dot:oZ._A.derefOperator,escapeSequence:oZ._A.escape,invalidEscapeSequence:oZ._A.invalid,formatSpecifier:oZ._A.processingInstruction,generic:oZ._A.typeName,label:oZ._A.labelName,lifetime:oZ._A.special(oZ._A.variableName),logical:oZ._A.logicOperator,macroBang:oZ._A.macroName,parenthesis:oZ._A.paren,punctuation:oZ._A.punctuation,selfKeyword:oZ._A.self,selfTypeKeyword:oZ._A.self,semicolon:oZ._A.separator,typeAlias:oZ._A.typeName,toolModule:oZ._A.namespace,union:null,unresolvedReference:null,tomlArrayKey:oZ._A.propertyName,tomlTableKey:oZ._A.className},oK={declaration:oZ._A.definition,definition:oZ._A.definition,readonly:oZ._A.constant,static:oZ._A.constant,deprecated:null,abstract:null,async:oZ._A.special,modification:function(e){return e===oZ._A.keyword?oZ._A.modifier:null},documentation:function(e){return e===oZ._A.comment?oZ._A.docComment:e===oZ._A.string?oZ._A.docString:null},defaultLibrary:oZ._A.standard,attribute:null,callable:oZ._A.function,constant:oZ._A.constant,consuming:null,controlFlow:function(e){return e===oZ._A.keyword?oZ._A.controlKeyword:e===oZ._A.operator?oZ._A.controlOperator:null},crateRoot:null,injected:null,intraDocLink:function(){return oZ._A.url},library:null,macro:null,mutable:null,public:null,reference:null,trait:null,unsafe:null},o$=new Set([oZ._A.comment,oZ._A.string,oZ._A.number,oZ._A.keyword,oZ._A.operator]),oJ=new Map;function oQ(){return(oQ=(0,ec._)(function(e){var n,t,r,i,o,a,l,s,c,u,d;return(0,ed.YH)(this,function(p){switch(p.label){case 0:if(n=e.client,t=e.path,r=e.previous,i=e.doc,o=e.signal,a=(0,eS.A)(n),r&&a.isSemanticTokensDeltaSupported)l=n.semanticTokensDelta(t,r,{signal:o});else if(a.isSemanticTokensFullSupported)l=n.semanticTokensFull(t,{signal:o});else{if(!i||!a.isSemanticTokensRangeSupported)return[2,null];s=(0,ew.Z3)(i,0),c=(0,ew.Z3)(i,i.length),l=n.semanticTokensRange(t,{start:s,end:c},{signal:o})}return[4,l];case 1:if((u=p.sent())&&"error"in u&&-32802===u.error.code)return[2,!1];if(!u||u.cancelled||!(d="result"in u&&!u.cancelled?u.result:null))return[2,null];return[2,d]}})})).apply(this,arguments)}var oX=function(){function e(n,t){(0,eu._)(this,e),this.data=n,this.id=t}var n=e.prototype;return n.reset=function(){this.data=[],this.id=null},n.update=function(e){if(!e)return void this.reset();if("edits"in e&&this.id){var n,t,r=e.edits.slice().sort(function(e,n){return n.start-e.start}),i=!0,o=!1,a=void 0;try{for(var l,s=r[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c,u,d=l.value;(null==(c=d.data)?void 0:c.length)?(u=this.data).splice.apply(u,[d.start,d.deleteCount].concat((0,v._)(d.data))):this.data.splice(d.start,d.deleteCount)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}this.id=null!=(t=e.resultId)?t:null}else if("data"in e)this.data=e.data,this.id=null!=(n=e.resultId)?n:null;else throw Error("Invalid semantic tokens response")},n.decorations=function(e,n){for(var t=n.doc,r=new D.vB,i=0,o=0,a=0;a<this.data.length;a+=5){var l=this.data[a],s=this.data[a+1],c=this.data[a+2],u=this.data[a+3],d=this.data[a+4];i+=l,o=l>0?s:o+s;var p=function(e,n,t){var r=(0,oj.mW)(e,n);if(null===r)return null;var i=oq[r];if(!i)return null;var o=(0,oj.sc)(e,t),a="".concat(r,":").concat(o.join(",")),l=oJ.get(a);if(void 0!==l)return l;var s=o.map(function(e){if(void 0===oK[e])return null;var n=oK[e];return null===n?null:n}).filter(Boolean),c=!0,u=!1,d=void 0;try{for(var p,f=s[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=(0,p.value)(i);h&&(i=h)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}return i&&o$.has(i)&&(i=null),oJ.set(a,i),i}(e,u,d);if(p){var f=(0,_.GY)(n,[p]);if(f){var h=(0,ew.TU)(t,{line:i,character:o}),m=(0,ew.TU)(t,{line:i,character:o+c}),g=eh.NZ.mark({class:f});r.add(h,m,g)}}}return r.finish()},e}(),o0=["typescript"],o1=function(){function e(n,t){var r=this;(0,eu._)(this,e),this.view=n,this.client=t,this.data=new oX([],null),this.controller=null,this.disposables=[],this.pending=!1,this.running=!1,this.changes=null,this.decorations=eh.NZ.none,this.proneToDesync=o0.some(function(e){return t.clientId.includes(e)}),this.disposables.push(t.onSemanticTokensRefresh(function(){return r.refresh()}),t.onServerCapabilitiesChange(function(){return r.refresh()}));var i=n.state.facet(eg.Md);if(i)if(t.isOpen(i))this.run();else{var o=setTimeout(function(){t.isOpen(i)&&r.run()},500);this.disposables.push(function(){return clearTimeout(o)})}}var n=e.prototype;return n.abort=function(){var e;this.pending=!1,null==(e=this.controller)||e.abort()},n.refresh=function(){this.abort(),this.data.reset(),this.run()},n.run=function(){if(this.pending=!0,!this.running){this.running=!0;var e=this;(0,ec._)(function(){var n;return(0,ed.YH)(this,function(t){switch(t.label){case 0:n=function(){var n,t,r,i,o,a,l,s,c,u,d;return(0,ed.YH)(this,function(p){switch(p.label){case 0:n=Date.now(),p.label=1;case 1:if(p.trys.push([1,3,,4]),e.pending=!1,e.changes=null,o=(i=e.view.state).facet(eg.Md),a=null==(r=e.client.getServerCapabilities())||null==(t=r.semanticTokensProvider)?void 0:t.legend,s=(l=(0,eS.A)(e.client)).isSemanticTokensFullSupported||l.isSemanticTokensRangeSupported,!o||!a||!s||!e.client.isOpen(o))return e.data.reset(),e.decorations.size>0&&(e.decorations=eh.NZ.none,e.view.dispatch()),[2,"continue"];return e.controller=new AbortController,[4,function(e){return oQ.apply(this,arguments)}({client:e.client,path:o,previous:e.data.id,doc:i.doc,signal:e.controller.signal})];case 2:return!1===(c=p.sent())?e.pending=!0:e.controller.signal.aborted||(e.data.update(c),e.decorations=e.changes?e.data.decorations(a,i).map(e.changes):e.data.decorations(a,i),e.view.dispatch()),[3,4];case 3:return u=p.sent(),(0,eh.c_)(e.view.state,u),e.data.reset(),e.decorations=eh.NZ.none,e.changes=null,[3,4];case 4:if(e.controller=null,d=Date.now()-n,!(e.pending&&d<150))return[3,6];return[4,new Promise(function(e){return setTimeout(e,150-d)})];case 5:p.sent(),p.label=6;case 6:return[2]}})},t.label=1;case 1:if(!e.pending)return[3,3];return[5,(0,ed.Ju)(n())];case 2:return t.sent(),[3,1];case 3:return e.running=!1,e.changes=null,[2]}})})()}},n.update=function(e){e.docChanged&&this.decorations.size&&(this.decorations=this.decorations.map(e.changes))},n.postUpdate=function(e){(0,em.$H)(e,eg.Md)?this.refresh():e.docChanged&&(this.running&&(this.changes=this.changes?this.changes.composeDesc(e.changes):e.changes),this.proneToDesync&&this.abort(),this.run())},n.destroy=function(){this.abort(),this.data.reset();var e=!0,n=!1,t=void 0;try{for(var r,i=this.disposables[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.disposables=[]},e}(),o2=new nF.k(function(e){if(!e||!e.length)return null;var n=e.map(function(e){return eh.Z9.define(function(n){return new o1(n,e)},{decorations:function(e){return e.decorations},provide:function(e){return eh.Lz.updateListener.of(function(n){var t;return null==(t=n.view.plugin(e))?void 0:t.postUpdate(n)})}})});return D.Nb.highest(n)}),o4=new nF.k(function(e){return iR.of(e)}),o5=new nF.k(function(e){return op.aM.of(e)}),o3=new nF.k(function(e){return oV.G.of(e)}),o7=t(92677),o6=eh.Lz.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:eF.LU.backgroundDefault,borderLeft:"1px solid ".concat(eF.LU.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),o8=D.sU.define({create:function(e){return 0===e.doc.length||e.doc.lines>1e3},update:function(e,n){return n.docChanged?0===n.state.doc.length||n.state.doc.lines>1e3:e}}),o9=new nF.k(function(e,n,t){var r=function(){return{dom:document.createElement("div")}};return e?null:[o6,o8,o7.F.compute([id,o8],function(e){if(e.field(o8,!1)||"blocks"!==n&&"characters"!==n)return null;var i=e.field(id,!1),o={};if(i)for(var a=1;a<=e.doc.lines;a++)switch(i.getLineChangeType(a)){case ty.DE.COVERED:o[a]=t.values.global.greenDefault;break;case ty.DE.MODIFIED:o[a]=t.values.global.blueDefault}return{create:r,displayText:n,gutters:[o]}})]}),ae=t(14966),an=D.sj.define({combine:function(e){var n;return null!=(n=e.find(function(e){return null!==e}))?n:null}}),at=D.sj.define({combine:function(e){return ai(e)}}),ar=D.sj.define({combine:function(e){return ai(e)}});function ai(e){var n=[];return e.forEach(function(e){return e?n.push(e):void 0}),n}var ao=function(e){function n(e){var t;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).diagnostic=e,t}return(0,n8._)(n,e),n.prototype.eq=function(e){return e instanceof n&&this.severityValue===e.severityValue},(0,n6._)(n,[{key:"severityValue",get:function(){switch(this.diagnostic.severity){case"error":return 3;case"warning":return 2;case"info":return 1;default:return 0}}},{key:"severityColor",get:function(){switch(this.diagnostic.severity){case"error":return"#d11";case"warning":return"orange";case"info":return"#999";default:return"#66d"}}}]),n}(D.FB);function aa(e){var n=new D.vB;return(0,A.i5)(e,function(e,t,r){n.add(t,r,new ao(e))}),n.finish()}var al=D.sU.define({create:function(e){return aa(e)},update:function(e,n){return(0,em.$H)(n,A._k)?aa(n.state):e.map(n.changes)},provide:function(e){return at.compute([e],function(n){for(var t=new Map,r=n.field(e).iter();r.value;){for(var i=n.doc.lineAt(r.from),o=n.doc.lineAt(r.to),a=i.number;a<=o.number;){var l,s=null==(l=t.get(a))?void 0:l.severityValue;(!s||s<r.value.severityValue)&&t.set(a,r.value),a++}r.next()}return Array.from(t.entries()).map(function(e){var n=(0,g._)(e,2),t=n[0],r=n[1];return{color:r.severityColor,number:t,zIndex:r.severityValue}})})}}),as="cm-with-scrollbar",ac="cm-scrollbar-gutter",au="cm-scrollbar-inner",ad="cm-scrollbar-overlay-container",ap="cm-scrollbar-overlay",af="cm-scrollbar-overlay-invisible",ah="cm-scrollbar-overlay-active",am="--cm-scrollbar-overlay-height",ag=eh.Lz.theme((u={"&":{height:"100%",overflowY:"auto"}},(0,ti._)(u,"& .".concat(ac),{borderRight:0,boxSizing:"border-box",display:"flex",flexShrink:0,height:"100%",insetInlineStart:0,left:"unset",position:"sticky",right:0,top:0,width:"".concat(15,"px"),zIndex:200}),(0,ti._)(u,"& .".concat(au),{height:"100%",position:"absolute",right:0,top:0,overflowY:"hidden",borderLeft:"1px solid",borderLeftColor:"inherit"}),(0,ti._)(u,"& .".concat(au," > canvas"),{display:"block",height:"100%",width:"".concat(14,"px"),opacity:.6}),(0,ti._)(u,".".concat(ad),(c={position:"absolute",top:0,height:"100%",width:"100%"},(0,ti._)(c,"& .".concat(ap),(s={background:"rgb(121, 121, 121)",opacity:"0.2",position:"absolute",right:0,top:0,height:"max(".concat(20,"px, var(").concat(am,"))"),width:"100%",transition:"top 0s ease-in 0ms"},(0,ti._)(s,"&:hover",{opacity:"0.3"}),(0,ti._)(s,"&.".concat(af),{pointerEvents:"none",opacity:0}),s)),(0,ti._)(c,"& .".concat(ah),(0,ti._)({opacity:1,visibility:"visible",transition:"visibility 0s linear 0ms, opacity 300ms"},"& .".concat(ap),{opacity:"0.4"})),c)),(0,ti._)(u,"&.".concat(as," .cm-scroller::-webkit-scrollbar"),{width:0}),(0,ti._)(u,"&.".concat(as," .cm-scroller"),{scrollbarWidth:"none"}),u)),av=function(){function e(n){(0,eu._)(this,e),this.dragInfo=null,this.view=n,this.container=document.createElement("div"),this.container.classList.add(ad),this.container.role="presentation",this.container.ariaHidden="true",this.handle=document.createElement("div"),this.handle.classList.add(ap),this.container.appendChild(this.handle);var t=n.dom.querySelector(".".concat(au));t&&t.appendChild(this.container),this.observer=new ResizeObserver(this.resizeHandle.bind(this)),this.observer.observe(n.dom),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this))}var n=e.prototype;return n.resizeHandle=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".resizeHandle"),read:function(){return{ratio:Math.min(1,e.view.scrollDOM.clientHeight/e.view.contentHeight)}},write:function(n){var t=n.ratio;e.handle.style.setProperty(am,"".concat(100*t,"%")),1===t?e.handle.classList.add(af):e.handle.classList.remove(af)}})},n.updateHandlePosition=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".onScroll"),read:function(){var n=e.view.contentHeight,t=e.view.scrollDOM.clientHeight,r=e.handle.getBoundingClientRect().height;return{scrollTop:Math.round(e.view.scrollDOM.scrollTop*((t-r)/(n-t)))}},write:function(n){var t=n.scrollTop;e.handle.style.top="".concat(t,"px")}})},n.onMouseDown=function(e){var n=this;if(2!==e.button){if(e.preventDefault(),e.target===this.handle){this.dragInfo={dragStartY:e.clientY},this.container.classList.add(ah);return}this.view.requestMeasure({key:"".concat(this,".onMouseDown"),read:function(){var t=n.view.scrollDOM.clientHeight,r=n.view.contentHeight;return{scrollTop:Math.max(0,e.clientY-e.target.getBoundingClientRect().top-t/r*t/2)/t*r}},write:function(e){var t=e.scrollTop;n.view.scrollDOM.scrollTop=t}})}},n.onMouseUp=function(){this.dragInfo&&(this.dragInfo=null,this.container.classList.remove(ah))},n.onMouseMove=function(e){if(this.dragInfo){e.preventDefault();var n=e.clientY-this.dragInfo.dragStartY;this.view.scrollDOM.scrollTop=this.view.scrollDOM.scrollTop+n/this.view.dom.clientHeight*this.view.contentHeight,this.view.scrollDOM.scrollTop>0&&Math.round(this.view.scrollDOM.scrollTop)<Math.round(this.view.contentHeight-this.view.dom.clientHeight)&&(this.dragInfo={dragStartY:e.clientY}),this.updateHandlePosition()}},n.update=function(e){(e.docChanged||e.geometryChanged)&&(this.resizeHandle(),this.updateHandlePosition())},n.destroy=function(){this.container.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),this.container.remove(),this.observer.disconnect()},e}(),ay=function(){function e(n){(0,eu._)(this,e),this.view=n;var t=n.state.facet(an);if(!t)throw Error("expected config");this.dom=t.create(n).dom,this.dom.classList.add(ac);var r=document.createElement("div");r.classList.add(au);var i=document.createElement("canvas");i.ariaHidden="true",this.context=i.getContext("2d"),r.appendChild(i),this.dom.appendChild(r),n.scrollDOM.insertBefore(this.dom,n.contentDOM.nextSibling),this.update()}var n=e.prototype;return n.shouldRedraw=function(e,n){return!!(!e||!n||(0,em.$H)(e,"doc","selection","focus",ar,at,_.R3,_.c1))||this.view.contentHeight!==this.previousContentHeight||2*n.scrollClientHeight!==this.previousCanvasHeight},n.update=function(e){var n=this;this.view.requestMeasure({key:this,read:function(){return{scrollClientHeight:n.view.scrollDOM.clientHeight}},write:function(t){var r=t.scrollClientHeight;if(n.context&&n.shouldRedraw(e,{scrollClientHeight:r})){n.previousContentHeight=n.view.contentHeight,n.context.canvas.width=28,n.context.canvas.height=2*r,n.previousCanvasHeight=n.context.canvas.height,n.context&&n.context.clearRect(0,0,n.context.canvas.width,n.context.canvas.height);var i=n.view.state.facet(ar),o=n.view.state.facet(at),a=new Map,l=!0,s=!1,c=void 0;try{for(var u,d=o.entries()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p,f=(0,g._)(u.value,2),h=f[0],m=f[1],v=h%3,y=void 0,w=void 0,b=!0,S=!1,Y=void 0;try{for(var A,C=m[Symbol.iterator]();!(b=(A=C.next()).done);b=!0){var k,x=A.value;if(void 0===y||void 0===w){y=x,w=x;continue}if(w.number+1===x.number&&w.color===x.color&&w.zIndex===x.zIndex){w=x;continue}a.set(v,(null!=(k=a.get(v))?k:[]).concat([[y,w]])),y=x,w=x}}catch(e){S=!0,Y=e}finally{try{b||null==C.return||C.return()}finally{if(S)throw Y}}y&&w&&a.set(v,(null!=(p=a.get(v))?p:[]).concat([[y,w]]))}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}var D=!0,E=!1,R=void 0;try{for(var I,T=a.entries()[Symbol.iterator]();!(D=(I=T.next()).done);D=!0){var F=(0,g._)(I.value,2),P=F[0],L=F[1].sort(function(e,n){var t,r,i=(0,g._)(e,1)[0],o=(0,g._)(n,1)[0];return(null!=(t=i.zIndex)?t:0)-(null!=(r=o.zIndex)?r:0)}),U=!0,N=!1,O=void 0;try{for(var M,H=L[Symbol.iterator]();!(U=(M=H.next()).done);U=!0)!function(){var e=(0,g._)(M.value,2),t=e[0],i=t.color,o=t.number,a=e[1].number,l=n.view.state.doc.line(o),s=n.view.state.doc.line(a),c=1/0,u=-1/0;if((0,_.hw)(n.view.state).between(l.from,s.to,function(e,n){c>e&&(c=e),u<n&&(u=n)}),c<u){var d=n.view.state.doc.lineAt(c);d.number<=l.number&&(l=d),n.view.state.doc.lineAt(u).number>=s.number&&(s=d)}var p=l.number,f=s.number,h=!0,m=!1,v=void 0;try{for(var y,w=n.view.state.field(aS)[Symbol.iterator]();!(h=(y=w.next()).done);h=!0){var b=(0,g._)(y.value,2),S=b[0],Y=b[1];S[0].number<l.number&&(p-=Y),S[1].number<s.number&&(f-=Y)}}catch(e){m=!0,v=e}finally{try{h||null==w.return||w.return()}finally{if(m)throw v}}n.drawRange({scrollClientHeight:r,color:i,from:p,to:f,lane:P})}()}catch(e){N=!0,O=e}finally{try{U||null==H.return||H.return()}finally{if(N)throw O}}}}catch(e){E=!0,R=e}finally{try{D||null==T.return||T.return()}finally{if(E)throw R}}var B=!0,z=!1,W=void 0;try{for(var G,V=i[Symbol.iterator]();!(B=(G=V.next()).done);B=!0){var Z=G.value,j=!0,q=!1,K=void 0;try{for(var $,J=Z[Symbol.iterator]();!(j=($=J.next()).done);j=!0){var Q=$.value,X=Q.color,ee=Q.number,en=ee,et=!0,er=!1,ei=void 0;try{for(var eo,ea=n.view.state.field(aS)[Symbol.iterator]();!(et=(eo=ea.next()).done);et=!0){var el=(0,g._)(eo.value,2),es=(0,g._)(el[0],1)[0],ec=el[1];es.number<ee&&(en-=ec)}}catch(e){er=!0,ei=e}finally{try{et||null==ea.return||ea.return()}finally{if(er)throw ei}}n.drawRange({scrollClientHeight:r,color:X,from:en})}}catch(e){q=!0,K=e}finally{try{j||null==J.return||J.return()}finally{if(q)throw K}}}}catch(e){z=!0,W=e}finally{try{B||null==V.return||V.return()}finally{if(z)throw W}}}}})},n.destroy=function(){this.dom.remove()},n.drawRange=function(e){if(this.context){var n,t=(this.view.documentPadding.top+this.view.defaultLineHeight*(e.from-1))/this.view.contentHeight*e.scrollClientHeight,r=2;e.to&&(r=(this.view.documentPadding.top+this.view.defaultLineHeight*e.to)/this.view.contentHeight*e.scrollClientHeight-t)<4&&(t-=(4-r)/2,r=4),this.context.fillStyle=e.color,this.context.beginPath(),this.context.fillRect(9.333333333333334*(null!=(n=e.lane)?n:0),2*t,28/(void 0===e.lane?1:3),2*r)}},e}();function aw(e){for(var n=[],t=(0,_.hw)(e).iter();t.value;){var r=n[n.length-1];if(!r||r[0][1].to<t.to){var i=e.doc.lineAt(t.from),o=e.doc.lineAt(t.to);n.push([[i,o],o.number-i.number])}t.next()}return n}function ab(e){return null!==e.facet(an)}var aS=D.sU.define({create:function(e){return ab(e)?aw(e):[]},update:function(e,n){return ab(n.state)&&(0,em.$H)(n,"doc",_.rI,ab)?aw(n.state):e}}),aY=D.sj.define({combine:function(e){var n;return null!=(n=e.find(function(e){return null!==e}))?n:null},enables:function(e){return[an.compute([e],function(n){return n.facet(e)}),ag,[aS,(0,em.P$)(function(e){return new ay(e)},{isEnabled:function(e){return null!==e.facet(an)},provide:function(){return eh.Lz.editorAttributes.of(function(e){return null!==e.state.facet(an)?{class:as}:null})}})],(0,em.P$)(function(e){return new av(e)},{isEnabled:function(e){return null!==e.facet(an)},eventObservers:{scroll:function(){var e;null==(e=this.plugin())||e.updateHandlePosition()}}})]}}),a_=t(58173),aA="cm-multiplayer-selection-green",aC="cm-multiplayer-selection-red",ak="cm-multiplayer-selection-blue",ax="cm-multiplayer-selection-gold",aD="cm-multiplayer-selection-purple",aE="cm-multiplayer-selection-teal",aR="cm-multiplayer-selection-pink",aI=eh.Lz.theme((d={},(0,ti._)(d,".".concat(aA),{background:"rgba(27, 196, 125, 0.2)"}),(0,ti._)(d,".".concat(aC),{background:"rgba(239, 85, 51, 0.2)"}),(0,ti._)(d,".".concat(ak),{background:"rgba(24, 160, 251, 0.2)"}),(0,ti._)(d,".".concat(ax),{background:"rgba(255, 199, 0, 1)"}),(0,ti._)(d,".".concat(aD),{background:"rgba(144, 124, 255, 0.2)"}),(0,ti._)(d,".".concat(aE),{background:"rgba(0, 181, 206, 0.2)"}),(0,ti._)(d,".".concat(aR),{background:"rgba(238, 70, 211, 0.2)"}),d)),aT={"#1BC47D":aA,"#EF5533":aC,"#18A0FB":ak,"#FFC700":ax,"#907CFF":aD,"#00B5CE":aE,"#EE46D3":aR},aF=D.Pe.define(),aP=D.Pe.define(),aL=D.Pe.define(),aU=D.sU.define({create:function(){return{}},update:function(e,n){if(!n.changes.empty){var t=function(e){return n.changes.mapPos(Math.min(n.changes.length,e))},r={},i=!0,o=!1,a=void 0;try{for(var l,s=Object.values(e)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r[c.id]=(0,m._)((0,h._)({},c),{position:t(c.position),selectionStart:t(c.selectionStart),selectionEnd:t(c.selectionEnd)})}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}e=r}var u=!0,d=!1,p=void 0;try{for(var f,v=n.effects[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var y=f.value;if(y.is(a_.k)&&(e=(0,h._)({},e)),y.is(aF)&&y.value.position<=n.newDoc.length&&((e=(0,h._)({},e))[y.value.id]=(0,h._)({},y.value)),y.is(aP)&&(e=(0,h._)({},e),y.is(aP)&&delete e[y.value]),y.is(aL)){e=(0,h._)({},e);var w=!0,b=!1,S=void 0;try{for(var Y,_=Object.entries(e)[Symbol.iterator]();!(w=(Y=_.next()).done);w=!0){var A=(0,g._)(Y.value,2),C=A[0];A[1].username===y.value&&delete e[C]}}catch(e){b=!0,S=e}finally{try{w||null==_.return||_.return()}finally{if(b)throw S}}}}}catch(e){d=!0,p=e}finally{try{u||null==v.return||v.return()}finally{if(d)throw p}}return e},provide:function(e){return[aI,D.Nb.high((0,eh.qd)({above:!1,class:"cm-multiplayer-cursor-layer",update:function(n){return(0,em.$H)(n,e)},markers:function(n){var t=n.state.field(e,!1);if(!t)return[];var r=[],i=!0,o=!1,a=void 0;try{for(var l,s=Object.values(t)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,u=c.selectionStart,d=c.selectionEnd,p=c.color.selection;if(u!==d){var f=D.OF.range(u,d);r.push.apply(r,(0,v._)(eh.Ip.forRange(n,p,f)))}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r}})),ar.compute([e],function(n){var t=n.field(e,!1);return t?Object.entries(t).map(function(e){var t=(0,g._)(e,2),r=(t[0],t[1]);return{color:r.color.cursor,number:n.doc.lineAt(r.selectionStart).number}}):[]})]}}),aN=function(){function e(n,t){var r=this;(0,eu._)(this,e),this.view=n,this.presence=t,this.destroyed=!1,this.followed=null,this.dispose=t.onFollowedUserChanged(function(e){return r.onFollowedUserChanged(e)}),Promise.resolve().then(function(){r.onFollowedUserChanged(t.getFollowedUser())})}var n=e.prototype;return n.onFollowedUserChanged=function(e){var n=this;if(!this.destroyed&&(this.followed=e,this.followed)){var t=this.view.state.field(aU,!1);if(t){var r=Object.values(t).find(function(e){var t;return e.username===(null==(t=n.followed)?void 0:t.username)});r&&this.jumpToPosition(r.position)}}},n.jumpToPosition=function(e){this.view.dispatch({effects:[eh.Lz.scrollIntoView(D.OF.cursor(e),{x:"center",y:"center"})]})},n.unfollow=function(){this.presence.getFollowedUser()&&this.presence.unfollowUser()},n.postUpdate=function(e){if(this.followed){var n=void 0,t=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=!0,c=!1,u=void 0;try{for(var d,p=l.effects[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;f.is(aF)&&f.value.username===this.followed.username&&(n=f)}}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}n&&this.jumpToPosition(n.value.position)}},n.destroy=function(){this.destroyed=!0,this.dispose()},e}(),aO=new nF.k(function(e){return eh.Z9.define(function(n){return new aN(n,e)},{provide:function(e){return eh.Lz.updateListener.of(function(n){var t;return null==(t=n.view.plugin(e))?void 0:t.postUpdate(n)})},eventHandlers:{click:function(){this.unfollow()},wheel:function(){this.unfollow()},keydown:function(e){"Control"!==e.key&&"Meta"!==e.key&&this.unfollow()}}})}),aM=t(33090),aH=t(1982),aB=t(30908),az=eh.Z9.define(function(e){var n=e.state.facet(aW),t=[];return{update:function(e){n=e.state.facet(aW);var t=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.changes.empty||this.pushTransaction(l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}},flush:function(){t=[]},logs:function(){return t},pushEvent:function(n){var t={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:n.type};n instanceof KeyboardEvent&&(t.key=n.key,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.altKey=n.altKey,t.ctrlKey=n.ctrlKey),n instanceof InputEvent&&(t.data=n.data,t.inputType=n.inputType,t.isComposing=n.isComposing),n instanceof CompositionEvent&&(t.data=n.data),this.pushLog(t)},pushTransaction:function(e){this.pushLog({userEvent:e.annotation(D.ZX.userEvent),changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){n&&(t.push(e),t=t.slice(Math.max(0,t.length-100)))}}},{provide:function(e){var n=function(n,t){var r;return null==(r=t.plugin(e))?void 0:r.pushEvent(n)};return D.Nb.highest(eh.Lz.domEventHandlers({keypress:n,keydown:n,keyup:n,beforeinput:n,input:n,compositionstart:n,compositionupdate:n,compositionend:n}))}}),aW=D.sj.define({combine:function(e){return!!e.length&&e[0]}}),aG=new nF.k(function(e){return aW.of(e)}),aV=t(10752),aZ=t(94175),aj=D.YH.define(),aq=D.Pe.define(),aK=D.sU.define({create:function(){return!0},update:function(e,n){return!(0,em.$H)(n,aq)&&e},provide:function(e){return ae.u.from(e)}}),a$=(0,$.x)({buttonLink:[J.wp.reset.button,J.wp.linkStyle]}),aJ="hide-editor-file-size-warning",aQ=aB.A.get(aJ,"boolean"),aX=function(){function e(n,t,r,i){var o=this;(0,eu._)(this,e),this.view=n,this.path=t,this.fs=r,this.writeChange=null,this.destroyed=!1,this.debug=(0,m._)((0,h._)({},i),{latestReceivedVersion:0,openVersion:0,initiatedChanges:0,previousInitiatedChanges:null}),this.dispose=r.watchTextFile(t,{onReady:function(e){var t=e.initialContent,r=e.writeChange,a=e.version;!o.destroyed&&(o.debug.latestReceivedVersion=a,o.debug.openVersion=a,o.debug.setBsodFilePathVersion({filePath:o.path,version:a}),o.debug.trackTimeToLoadFileEnd(o.path),o.writeChange=r,n.dispatch({changes:{from:0,to:n.state.doc.length,insert:t},effects:aq.of(null),annotations:[D.ZX.addToHistory.of(!1),D.ZX.remote.of(!0),aj.of(!0)]}),t.length>=0xa00000&&!0!==aQ&&(aQ=!0,aB.A.set(aJ,!0),i.showWarning((0,y.FD)(y.FK,{children:["Large files may be slow to edit. Consider using",(0,y.Y)("br",{}),"Cloud Services like"," ",(0,y.Y)("button",{onClick:function(){i.performPaneOperation({operation:"open",secondary:!0,pane:{type:"objectStorage"}})},css:a$.buttonLink,children:"Object Storage"})," ","and"," ",(0,y.Y)("button",{onClick:function(){i.performPaneOperation({operation:"open",secondary:!0,pane:{type:"neon"}})},css:a$.buttonLink,children:"PostgreSQL"}),"."]}),5e3)))},onChange:function(e){var t=e.changes,r=e.changeSource,i=e.version,a=e.userId;if(!o.destroyed){o.debug.latestReceivedVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i});try{n.dispatch({changes:t,annotations:[D.ZX.remote.of(r===aM.iC.Container),D.ZX.addToHistory.of(r===aM.iC.Local||0===a),aj.of(!0)]})}catch(e){o.debugThrowSyncRemoteOpError(t,r,e)}}},onError:function(){o.destroyed||(o.dispose=null,o.writeChange=null)},onMoveOrDelete:function(){o.destroyed||(o.dispose=null,o.writeChange=null)}})}var n=e.prototype;return n.postUpdate=function(e){if(e.docChanged&&this.writeChange){var n=!0,t=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!(a.annotation(D.ZX.remote)||a.annotation(aj))){this.debug.initiatedChanges++;var l=a.annotation(E.A)?{author:"ghostwriter"}:{};try{this.writeChange(a.changes,l),this.debug.previousInitiatedChanges=a.changes}catch(n){this.debugThrowWriteChangeError(e,a,n);break}}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},n.destroy=function(){var e;this.destroyed=!0,null==(e=this.dispose)||e.call(this),this.dispose=null,this.writeChange=null,this.debug.deleteBsodFilePathVersion({filePath:this.path})},n.debugThrowSyncRemoteOpError=function(e,n,t){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=r.view.contentDOM.innerText;r.debug.throwBsod({origin:"Codemirror: ot/syncRemoteOp",error:t,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),changes:JSON.stringify(e),changeSource:n,otClientDoc:o,domText:a,cmDoc:r.view.state.doc.sliceString(0),openVersion:r.debug.openVersion,version:r.debug.latestReceivedVersion,initiatedChanges:r.debug.initiatedChanges}}),(0,eh.c_)(r.view.state,t)})},n.debugThrowWriteChangeError=function(e,n,t){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=e.view.contentDOM.innerText,l=e.view.plugin(az),s=null==l?void 0:l.logs();null==l||l.flush(),r.debug.throwBsod({origin:"Codemirror: ot/writeChange",error:t,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),transactionChanges:JSON.stringify(n.changes),otherTransactionChanges:JSON.stringify(e.transactions.filter(function(e){return e!==n}).map(function(e){return e.changes})),transactionDoc:n.newDoc.sliceString(0),updateDoc:e.state.doc.sliceString(0),otClientDoc:o,domText:a,openVersion:r.debug.openVersion,latestReceivedVersion:r.debug.latestReceivedVersion,keystrokes:JSON.stringify(s)}})}),(0,eh.c_)(e.state,t)},e}(),a0=new nF.k(function(e,n,t){return eh.Z9.define(function(r){return new aX(r,e,n,t)},{provide:function(e){return[aK,eh.Lz.updateListener.of(function(n){var t;return null==(t=n.view.plugin(e))?void 0:t.postUpdate(n)})]}})}),a1=eh.Lz.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:eF.LU.shadow1,borderRadius:eF.LU.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function a2(e){e.style.transform="translate(-10000px, -10000px)"}var a4=/iPhone|iPad|iPod/i;function a5(){return!!window.navigator.userAgent.match(a4)||"ontouchstart"in window&&window.navigator.userAgent.includes("Macintosh")}function a3(e){var n=document.createElement("div");n.textContent=e.username,n.style.backgroundColor=e.color.cursor,n.classList.add("multiplayer-label");var t=document.createElement("div");return t.classList.add("multiplayer-cursor"),t.style.backgroundColor=e.color.cursor,t.style.position=a5()?"absolute":"fixed",t.appendChild(n),{dom:t,label:n}}var a7=new Map,a6=[a1,eh.Z9.define(function(e){var n=e.state.field(aU,!1),t=new Map((n?Object.values(n):[]).map(function(e){return[e.id,{view:a3(e),cursor:e}]})),r=!0,i=0,o="function"==typeof IntersectionObserver?new IntersectionObserver(function(e){Date.now()>i-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&c()},{threshold:[1]}):null;function a(){o&&(o.disconnect(),t.forEach(function(e){o.observe(e.view.dom)}))}function l(){!(!n||0===Object.values(n).length)&&(e.inView&&e.requestMeasure(u),r!==e.inView)&&((r=e.inView)||t.forEach(function(e){a2(e.view.dom)}))}a();var s=null;function c(){null===s&&(s=setTimeout(function(){s=null,l()},50))}window.addEventListener("resize",c);var u={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((n?Object.values(n):[]).map(function(n){var r=t.get(n.id),i=r?function(e,n){var t=a7.get(e);if(t)return t;var r=n.getBoundingClientRect().width;return a7.set(e,r),r}(n.username,r.view.label):null;return[n.id,{position:e.coordsAtPos(n.position),labelWidth:i}]}))}},write:function(e){t.forEach(function(n,t){var r=e.dimensions.get(t);!function(e){var n=e.cursorView,t=e.position,r=e.labelWidth,i=e.editorRect,o=n.dom,a=n.label;if(!t||!r)return a2(o);var l=t.bottom-t.top;if(t.bottom<=i.top+l||t.top+l>=i.bottom||t.right<i.left-.1||t.left>i.right+.1)return a2(o);var s=t.left+r-i.right,c="0px";s>0?(c="-".concat(s,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(c,", -100%)");var u=a5()?{x:t.left-i.left+"px",y:t.top-i.top+"px"}:{x:"calc(".concat(t.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(t.top,"px + var(--fixed-position-offset-y))")},d=u.x,p=u.y;o.style.transform="translate(".concat(d,", ").concat(p,")"),o.style.height=l+"px"}({cursorView:n.view,position:(null==r?void 0:r.position)||null,labelWidth:(null==r?void 0:r.labelWidth)||null,editorRect:e.editorRect})})},key:"multiplayer-cursors-plugin-".concat((0,oz.A)())};return{update:function(r){r.transactions.length&&(i=Date.now());var o=r.state.field(aU,!1);if(o===r.startState.field(aU,!1)){r.geometryChanged&&l();return}var s=new Map,c=new Set;if(o){var u=new Map((0,v._)(t.values()).map(function(e){return[e.cursor.id,e.view]}));Object.values(o).forEach(function(n){var t=u.get(n.id);if(t)c.add(t),s.set(n.id,{view:t,cursor:n});else{var r=a3(n);s.set(n.id,{view:r,cursor:n}),e.dom.appendChild(r.dom)}})}t.forEach(function(e){c.has(e.view)||e.view.dom.remove()}),t=s,n=o,a(),l()},destroy:function(){window.removeEventListener("resize",c),t.forEach(function(e){e.view.dom.remove()}),n=void 0,t=new Map,null==o||o.disconnect(),s&&clearTimeout(s)},maybeMeasure:l}},{eventHandlers:{scroll:function(){this.maybeMeasure()}}})],a8=function(){function e(n,t,r,i){var o=this;(0,eu._)(this,e),this.view=n,this.destroyed=!1,this.colors=this.getColorMapFromUsers(i.getActiveUsers()),this.disposes=[],this.updateSelections=null,this.disposes.push(i.onUserLeave(function(e){o.destroyed||o.view.dispatch({effects:aL.of(e.username)})}),i.onActiveUsersChange(function(e){o.destroyed||(o.colors=o.getColorMapFromUsers(e))}),r.watchTextFile(t,{onReady:function(e){var n=e.updateSelections;o.destroyed||(o.updateSelections=n)},onCursor:function(e){if(!o.destroyed){var n=function(e){var n,t=e.cursor,r=e.usernameColorsMap,i=null==(n=t.user)?void 0:n.name;if(i){var o=t.id,a=t.position,l=t.selectionStart,s=t.selectionEnd,c=r[i];if(c&&o&&"number"==typeof a&&"number"==typeof l&&"number"==typeof s)return aF.of({id:o,username:i,position:a,color:{cursor:c,selection:aT[c]||""},selectionStart:l,selectionEnd:s})}}({cursor:e,usernameColorsMap:o.colors});n&&o.view.dispatch({effects:n})}},onRemoveCursor:function(e){o.destroyed||o.view.dispatch({effects:aP.of(e)})},onError:function(){o.updateSelections=null},onMoveOrDelete:function(){o.updateSelections=null}}))}var n=e.prototype;return n.getColorMapFromUsers=function(e){return e.reduce(function(e,n){return n.username&&n.color?(0,m._)((0,h._)({},e),(0,ti._)({},n.username,n.color)):e},{})},n.postUpdate=function(e){if(!(!e.selectionSet||e.transactions.every(function(e){return e.annotation(D.ZX.remote)}))&&this.updateSelections){var n=e.state.selection.ranges.map(function(e){return{position:e.head,selectionStart:e.from,selectionEnd:e.to}});this.updateSelections(n)}},n.destroy=function(){this.destroyed=!0,this.disposes.forEach(function(e){return e()})},e}(),a9=new nF.k(function(e,n,t){return[a6,aU,eh.Z9.define(function(r){return new a8(r,e,n,t)},{provide:function(e){return eh.Lz.updateListener.of(function(n){var t;return null==(t=n.view.plugin(e))?void 0:t.postUpdate(n)})}})]}),le=t(27213),ln=t.n(le),lt=t(53522),lr=t(2634),li=t(38674),lo=RegExp("_(?<num>\\d+)$");function la(){return(la=(0,ec._)(function(e,n){var t,r,i,o;return(0,ed.YH)(this,function(a){switch(a.label){case 0:return t=(0,N._6)(n),[4,e.readDir(t||li.Dl)];case 1:if((r=a.sent()).error)return[2,n];return o=(i=function(e){if(r.children.find(function(n){return"FILE"===n.type&&n.filename===e})){var n,t=(0,N.J)(e),o=(0,N.an)(e),a=t.match(lo);if(null==a||null==(n=a.groups)?void 0:n.num){var l=Number(a.groups.num);return i("".concat(t.replace(lo,""),"_").concat(l+1,".").concat(o))}return i("".concat(t,"_2.").concat(o))}return e})((0,N.WP)(n)),[2,t?t+"/"+o:o]}})})).apply(this,arguments)}var ll=function(){var e=(0,ec._)(function(e,n,t){var r,i,o,a,l,s;return(0,ed.YH)(this,function(c){switch(c.label){case 0:return r=encodeURI(e.name),[4,function(e,n){return la.apply(this,arguments)}(n,(i=(0,N._6)(t))?i+"/"+r:r)];case 1:return o=c.sent(),[4,(0,lr.g6)(e)];case 2:return a=c.sent(),[4,n.writeFile(o,lt.A.from(a))];case 3:return c.sent(),l=(0,N.J)(e.name),s=(0,N.WP)(o),[2,"![".concat(l,"](").concat(s,")")]}})});return function(n,t,r){return e.apply(this,arguments)}}();function ls(e){var n=e.view,t=e.event,r=e.clipboardText,i=e.filePath,o=n.state.selection;if(!i||!(0,N.e$)(i)||o.ranges.length>1||o.main.from===o.main.to||!r||!ln()(r))return void function(){if(!t){var e=r||"";if(o.main.empty){var i=o.main.from+e.length;n.dispatch({changes:[{from:o.main.from,insert:e}],selection:D.OF.range(i,i)})}else n.dispatch(n.state.replaceSelection(e))}}();t&&t.preventDefault();var a=n.state.sliceDoc(o.main.from,o.main.to),l="[".concat(a,"](").concat(r,")"),s=o.main.from+l.length;n.dispatch({changes:{from:o.main.from,to:o.main.to,insert:l},selection:D.OF.range(s,s)})}var lc=eh.Lz.domEventHandlers({paste:function(e,n){var t;ls({filePath:n.state.facet(eg.Md),view:n,event:e,clipboardText:null==(t=e.clipboardData)?void 0:t.getData("Text")})}}),lu=new nF.k(function(e){return eh.Lz.domEventHandlers({paste:function(n,t){var r=t.state.facet(eg.Md),i=null==n||null==(c=n.clipboardData)?void 0:c.files,o=function(e){var n=t.state.selection.main.head;t.dispatch({changes:{from:n,insert:e},selection:{anchor:n,head:n+e.length}})};if(i){var a=!0,l=!1,s=void 0;try{for(var c,u,d=i[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=u.value;r&&(0,N.e$)(r)&&ll(p,e,r).then(o)}}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}}}})}),ld=t(42413),lp=t(75268),lf=function(e){function n(e,t){var r;return(0,eu._)(this,n),(r=(0,n7._)(this,n)).id=e,r.result=t,r}return(0,n8._)(n,e),n.range=function(e,n,t){return new this(e,t).range(n.from,n.to)},n.generateId=function(){return this.secretId++},n}(D.FB);lf.secretId=0;var lh=function(e){function n(e){var t;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).key=e,t}return(0,n8._)(n,e),n.from=function(e){return new this(e)},n}(D.FB),lm=D.Pe.define({map:function(e,n){var t=D.om.of(e).map(n).iter(),r=t.from,i=t.to;return lf.range(e.value.id,D.OF.cursor(r,i),e.value.result)}}),lg=D.Pe.define(),lv=D.Pe.define(),ly=D.Pe.define(),lw=D.Pe.define(),lb=D.Pe.define(),lS=function(e){var n=e.state.field(lD);if(!n.size)return!1;for(var t=n.iter(),r=[];t.value;){var i=t.from,o=t.to,a=t.value;r.push({from:i,to:o,value:a}),t.next()}var l=e.state.doc.length,s=D.VR.empty(l),c=[],u=[],d=!0,p=!1,f=void 0;try{for(var h,m=r[Symbol.iterator]();!(d=(h=m.next()).done);d=!0)!function(){var e=h.value,n=e.from,t=e.to,r=e.value,i=r.result.secret,o=D.VR.of({from:n,to:t,insert:i},l).map(s,!0);c=c.map(function(e){return e.map(o)});var a=(s=s.compose(o)).mapPos(n)+i.length;c.push(D.OF.cursor(a)),u.push(lg.of(r.id)),(0,eK.u4)(eK.AZ.PASTE_SCANNER_USED,{action:"original_accepted",provider:r.result.provider})}()}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}return e.dispatch({changes:s,effects:u,selection:D.OF.create(c)}),!0},lY=function(e){return!!e.state.field(lD).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return lv.of(e)})}),!0)},l_=function(){return!1},lA=function(e){return!!e.state.field(lD).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return lg.of(e)})}),!0)};function lC(e,n){var t,r=null==(t=e.clipboardData)?void 0:t.getData("text/plain");if(!r)return!1;var i=(0,lp.S)(r);if(!i)return!1;e.preventDefault(),e.stopPropagation();var o=r.slice(0,i.start)+r.slice(i.end),a=lf.generateId();return n.dispatch((0,m._)((0,h._)({},n.state.changeByRange(function(e){var n=e.from,t=e.to,r=D.OF.cursor(n+i.start);return{range:r,changes:{from:n,to:t,insert:o},effects:lm.of(lf.range(a,r,i))}})),{scrollIntoView:!0})),(0,eK.u4)(eK.AZ.PASTE_SCANNER_USED,{action:"secret_detected",provider:i.provider}),!0}var lk=D.sU.define({create:function(){return D.om.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(lw)){var s=l.value,c=s.from,u=s.to,d=s.secret;e=e.update({add:[lh.from(d).range(c,u)],filter:function(){return!1}})}l.is(lb)&&(e=D.om.empty)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),lx=D.sU.define({create:function(){return null},update:function(e,n){var t=n.state.field(lD,!1),r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;t&&s.is(lv)&&(s.value instanceof D.yn?t.between(s.value.from,s.value.to,function(n,t,r){e=r}):e=s.value),s.is(ly)&&(e=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return e}}),lD=D.sU.define({create:function(){return D.om.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)!function(){var n=o.value;n.is(lm)&&(e=e.update({add:[n.value],sort:!0})),n.is(lg)&&(e=n.value instanceof D.yn?e.update({filter:function(){return!1},filterFrom:n.value.from,filterTo:n.value.to}):e.update({filter:function(e,t,r){return r.id!==n.value}}))}()}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(){return[eh.Lz.domEventHandlers({paste:lC}),D.Nb.highest(eh.w4.of([{key:"Mod-z",run:lA},{key:"Enter",run:lS},{key:"Tab",run:lY,stopPropagation:!0},{key:"Escape",run:l_}]))]}}),lE=ld.Ly.of(function(e){var n=e.state.field(lD,!1);if(!n||!n.size)return!1;var t=!1;return n.between(e.newSelection.main.from,e.newSelection.main.to,function(){return t=!0,!1}),t}),lR=t(22531),lI=t(41062),lT=t(5204),lF=t(40259),lP=t(85144),lL=t(69554),lU=(0,$.x)({buttons:[J.wp.display.flex,J.wp.rowWithGap(4),J.wp.justify.end],input:[J.wp.colWithGap(4),J.wp.flex.grow(1)],label:[J.wp.color.foregroundDimmer,J.wp.fontSize(12),J.wp.height(24),J.wp.justify.center],flexRow:[J.wp.display.flex,J.wp.rowWithGap(8),J.wp.align.center]}),lN={fontFamily:"text-security-disc"},lO=Q.D.label;function lM(e){var n=(0,n2.A)().secrets,t=(0,w.useId)(),r=(0,w.useId)(),i=(0,g._)((0,w.useState)(""),2),o=i[0],a=i[1],l=(0,g._)((0,w.useState)(e.initialValue),2),s=l[0],c=l[1],u=(0,g._)((0,w.useState)(!1),2),d=u[0],p=u[1],f=(0,w.useRef)(null);return(0,w.useEffect)(function(){if(e.isOpen){var n;null==(n=f.current)||n.focus(),(0,eK.u4)(eK.AZ.PASTE_SCANNER_USED,{action:"modal_opened",provider:null==e?void 0:e.provider})}},[e.isOpen,null==e?void 0:e.provider]),(0,y.Y)(lT.n1,{contain:!0,children:(0,y.Y)(lP.a,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,y.FD)(Q.S,{gap:16,children:[(0,y.Y)(tO.EY,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,y.FD)(Q.S,{css:lU.flexRow,children:[(0,y.FD)(Q.S,{css:lU.input,children:[(0,y.Y)(lO,{css:lU.label,htmlFor:t,children:"Key"}),(0,y.Y)(lF.pd,{id:t,ref:f,value:o,onChange:function(e){return a(e.target.value)}})]}),(0,y.FD)(Q.S,{css:lU.input,children:[(0,y.FD)(Q.S,{css:lU.flexRow,children:[(0,y.Y)(lO,{css:lU.label,htmlFor:r,children:"Value"}),(0,y.Y)(tN.K0,{alt:"Toggle Secret",onClick:function(){return p(function(e){return!e})},tooltipPlacement:"top",children:d?(0,y.Y)(lL.A,{}):(0,y.Y)(nS.A,{})})]}),(0,y.Y)(lF.pd,{id:r,value:s,onChange:function(e){return c(e.target.value)},style:d?void 0:lN})]})]}),(0,y.FD)(Q.S,{css:lU.buttons,children:[(0,y.Y)(t3.$n,{text:"Cancel",onClick:e.onCancel}),(0,y.Y)(t3.$n,{colorway:"primary",text:"Save Secret",disabled:0===o.length||0===s.length,onClick:(0,ec._)(function(){return(0,ed.YH)(this,function(t){switch(t.label){case 0:return[4,n.addEntries([{key:o,value:s}])];case 1:return t.sent(),e.onSaveSecret(o,s),(0,eK.u4)(eK.AZ.PASTE_SCANNER_USED,{action:"secret_created",provider:null==e?void 0:e.provider}),[2]}})})})]})]})})})}var lH=t(67611),lB=t(71872),lz=(0,$.x)({hint:[J.wp.align.center,J.wp.border({color:eF.LU.outlineDimmer,direction:"top"}),J.wp.color.foregroundDimmest,J.wp.display.flex,J.wp.flex.row,J.wp.px(8),J.wp.py(4),J.wp.rowWithGap(8)],key:[J.wp.px(4)],wrapper:[J.wp.backgroundColor.backgroundHigher,J.wp.borderRadius(4),J.wp.cursor.default,J.wp.font.default],mobileButtons:[J.wp.flex.grow(1)],mobileHint:[J.wp.justify.center]}),lW={borderTop:"1px solid ".concat(eF.LU.outlineDimmer),borderBottom:"1px solid ".concat(eF.LU.outlineDimmer),borderRadius:0};function lG(e){return(0,y.FD)(Q.S,{css:lz.wrapper,style:e.onMobile?lW:void 0,children:[(0,y.FD)(Q.S,{p:8,style:{textAlign:e.onMobile?"center":"inherit"},children:[(0,y.Y)(Q.S,{children:"The value you pasted looks like a secret."}),(0,y.Y)(Q.S,{children:"Store it securely using our Secrets feature."})]}),e.onMobile?(0,y.Y)(lZ,(0,h._)({},e)):(0,y.Y)(lV,(0,h._)({},e))]})}function lV(e){return(0,y.FD)(y.FK,{children:[(0,y.FD)(Q.S,{css:lz.hint,onClick:e.onClickUseSecrets,children:[(0,y.Y)(lH.A,{}),"Press",(0,y.Y)(Q.S,{css:lz.key,children:(0,y.Y)(rS._y,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}),(0,y.FD)(Q.S,{css:lz.hint,onClick:e.onClickPasteAnyway,children:[(0,y.Y)(lB.A,{}),"Press",(0,y.Y)(Q.S,{css:lz.key,children:(0,y.Y)(rS._y,{keyCombo:"Enter",small:!0})}),"to paste anyway"]})]})}function lZ(e){return(0,y.FD)(Q.S,{css:[lz.hint,lz.mobileHint],children:[(0,y.Y)(t3.$n,{css:lz.mobileButtons,iconLeft:(0,y.Y)(lH.A,{}),text:"Use Secrets",onClick:e.onClickUseSecrets,colorway:"primary"}),(0,y.Y)(t3.$n,{css:lz.mobileButtons,iconLeft:(0,y.Y)(lB.A,{}),text:"Paste Anyway",onClick:e.onClickPasteAnyway})]})}var lj=t(82532),lq=(0,$.x)({border:[J.wp.border({color:eF.LU.accentPrimaryDefault,direction:"y",width:1})],title:[J.wp.display.flex,J.wp.rowWithGap(8),J.wp.align.center,J.wp.justify.spaceBetween,J.wp.px(8),J.wp.pt(4),J.wp.font.default],wrapper:[J.wp.backgroundColor.backgroundRoot,J.wp.py(0),J.wp.position.relative,J.wp.zIndex(200)]});function lK(e){var n;return n=e.onClose,(0,w.useEffect)(function(){var e=function(e){"Escape"===e.key&&n(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[n]),(0,y.Y)(lT.n1,{autoFocus:!0,children:(0,y.Y)(Q.S,{css:lq.wrapper,children:(0,y.FD)(Q.S,{css:lq.border,children:[(0,y.FD)(Q.S,{css:lq.title,children:[(0,y.FD)(tO.EY,{multiline:!1,children:["Access the secret ",(0,y.Y)("strong",{children:e.keyName}),":"]}),(0,y.Y)(tN.K0,{alt:"Close",onClick:e.onClose,children:(0,y.Y)(tM.A,{})})]}),(0,y.Y)(nc.ui,{background:"root",children:(0,y.Y)(lj.A,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})})}var l$=t(43888),lJ=n3.x.compute([lD],function(e){var n=e.field(lD).iter();if(null===n.value)return null;for(var t=[];null!==n.value;){var r=n.from,i=n.to,o=n.value;t.push({from:r,to:i,insert:o.result.secret}),n.next()}return t}),lQ=function(e){function n(e,t){var r;return(0,eu._)(this,n),(r=(0,n7._)(this,n)).secret=e,r.as=t,r}(0,n8._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this,t=(0,tU.J)((0,y.Y)(lG,{onMobile:"pocket"===this.as,onClickUseSecrets:function(){e.dispatch({effects:lv.of(n.secret)})},onClickPasteAnyway:function(){lS(e),e.focus()},onClickUndo:function(){e.dispatch({effects:lg.of(n.secret.id)}),e.focus()}}));return"pocket"===this.as&&(t.style.zIndex="200",t.style.position="relative",this.adjustForGutter(t,e)),t},t.updateDOM=function(e,n){return this.adjustForGutter(e,n),!0},t.adjustForGutter=function(e,n){var t=n.dom.querySelector(".cm-gutters");e.style.marginLeft=t?"-".concat(t.clientWidth,"px"):"inherit"},n}(eh.xO),lX=l$.X.compute([lx],function(e){var n=e.facet(eg.Md),t=e.field(lx);return t&&n?{key:"pasteScannerModal",node:function(e){var n;return(0,y.Y)(lM,{isOpen:!0,initialValue:t.result.secret,provider:t.result.provider,onSaveSecret:(n=(0,ec._)(function(n){var r,i,o,a,l;return(0,ed.YH)(this,function(s){for(r=e.state.field(lD).iter(),i=[];r.value;)o=r.from,a=r.to,(l=r.value).id===t.id&&(i.push(lg.of(l.id)),i.push(lw.of({secret:n,from:o,to:a}))),r.next();return e.dispatch({effects:(0,v._)(i).concat([ly.of(null)])}),[2]})}),function(e){return n.apply(this,arguments)}),onCancel:function(){return e.dispatch({effects:ly.of(null)})}})}}:null}),l0=eh.Lz.decorations.compute([lk],function(e){var n=e.field(lk).iter(),t=n.from,r=n.to,i=n.value,o=e.facet(eg.Md);return i&&o?eh.NZ.set(eh.NZ.widget({widget:new l1(i.key,o),side:1,block:!0}).range(t,r)):eh.NZ.none}),l1=function(e){function n(e,t){var r;return(0,eu._)(this,n),(r=(0,n7._)(this,n)).key=e,r.filePath=t,r}(0,n8._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=(0,tU.J)((0,y.Y)(lK,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:lb.of(null)})},onInsert:function(n){e.dispatch(e.state.changeByRange(function(e){return{range:D.OF.cursor(e.from+n.length),changes:{from:e.from,to:e.to,insert:n}}})),e.focus(),(0,eK.u4)(eK.AZ.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(n,e),n},t.updateDOM=function(e,n){return this.adjustForGutter(e,n),!0},t.adjustForGutter=function(e,n){var t=n.dom.querySelector(".cm-gutters");e.style.marginLeft=t?"-".concat(t.clientWidth,"px"):"inherit"},n}(eh.xO),l2=[lJ,function(){var e=[lx,lD],n=function(e){if(null!=e.field(lx,!1))return null;var n=e.field(lD,!1);return n||null};return[eh.DK.compute(e,function(e){var t=n(e);if(!t||e.facet(lI.n))return null;for(var r=t.iter();r.value;){var i=function(){var e=new lQ(r.value,"tooltip");return{v:{arrow:!0,pos:r.to,create:function(n){return{dom:e.toDOM(n)}}}}}();if("object"===(0,lR._)(i))return i.v}return null}),eh.Lz.decorations.compute(e,function(e){var t=n(e);if(!t||!e.facet(lI.n))return eh.NZ.none;var r=t.iter();if(!r.value)return eh.NZ.none;for(;r.value;){var i=new lQ(r.value,"pocket");return eh.NZ.set(eh.NZ.widget({widget:i,side:1,block:!0}).range(r.to,r.to))}return eh.NZ.none})]}(),lX,l0],l4=[lk,lD,lx,l2,lE];function l5(e,n){var t=performance.now();ic.vF.time(e,t-n)}var l3=new nF.k(function(e){var n=e?.01:.001;return D.Nb.highest(eh.Lz.domEventHandlers({keydown:function(e){if(Math.random()<n){var t=e.timeStamp;requestAnimationFrame(function(){l5("editor input latency",t),"undefined"!=typeof requestIdleCallback?requestIdleCallback(function(){l5("editor input latency after layout",t)}):setTimeout(function(){l5("editor input latency after layout",t)})})}}}))}),l7=t(47701),l6=t(48200),l8=[{regexp:/https?:\/\/[^\s)"']+/g,cursor:"pointer",onClick:function(e){ln()(e)&&window.open(e,"_blank")}}],l9=new nF.k(function(e){return e?null:(0,l6.Ay)({key:"mod",rules:l8})}),se=t(69945),sn=t.n(se),st=new Set,sr=sn()(function(){var e=!0,n=!1,t=void 0;try{for(var r,i=st[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,eK.u4)(eK.AZ.WS_TYPED,{fileExt:o})}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}st.clear()},18e4),si=eh.Lz.updateListener.of(function(e){if(e.docChanged){var n=e.state.facet(eg.Md);if(n){var t=(0,N.an)(n)||(0,N.WP)(n);!e.transactions.some(function(e){return e.annotation(D.ZX.remote)})&&(st.has(t)||(st.add(t),sr()))}}}),so=t(66905),sa=eh.Lz.theme({".cm-ruler-element":{backgroundColor:eF.LU.backgroundHigher}}),sl=D.sU.define({create:function(e){return 0===e.doc.length},update:function(e,n){return n.docChanged?0===n.state.doc.length:e}}),ss=(0,eh.qd)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,em.$H)(e,sc,sl,a_.k)},markers:function(e){if(e.state.field(sl,!1))return[];var n=e.state.facet(sc);if(0===n.length)return[];var t=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left+6,o=r.width-2,a=Math.max(r.height,e.contentHeight),l=!0,s=!1,c=void 0;try{for(var u,d=n[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value,f=i+e.defaultCharacterWidth*p;f<o&&t.push(new eh.Ip("cm-ruler-element",f,0,2,a))}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return t}}),sc=D.sj.define({enables:[sl,ss,sa]}),su=new nF.k(function(e){return e.map(function(e){return sc.of(e)})}),sd=eh.Lz.theme({"& .cm-scrollbar-gutter":{backgroundColor:eF.LU.backgroundDefault},"& .cm-scrollbar-inner":{borderColor:eF.LU.backgroundHigher}}),sp=new nF.k(function(e,n){var t;return e?null:[sd,aY.of({create:function(){return{dom:document.createElement("div")}}}),at.compute(["doc",id],function(e){var t=e.field(id,!1);if(!t)return null;for(var r=[],i=1;i<=e.doc.lines;i++)switch(t.getLineChangeType(i)){case ty.DE.COVERED:r.push({number:i,color:n.values.global.greenDefault,zIndex:1});break;case ty.DE.MODIFIED:r.push({number:i,color:n.values.global.blueDefault,zIndex:0})}return r}),al,(t=({color:n.values.global.foregroundDefault}).color,ar.compute(["doc","selection"],function(e){return e.selection.ranges.map(function(n){var r=n.head;return{color:t,number:e.doc.lineAt(r).number,zIndex:1/0}})}))]}),sf=t(83265);function sh(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(n),o=i.next();!o.done&&r.length<t;)r.push(o.value),o=i.next();return r}var sm=t(66485),sg=t(89925),sv=t(5479),sy=t(85363),sw=t(96213),sb=t(17168);function sS(e){return e>420?"large":"small"}var sY=Q.D.div,s_=(0,$.x)({root:[{borderBottom:"1px solid",borderColor:eF.LU.outlineDimmest}],panelButtonWrapper:[J.wp.center,J.wp.height(32)],content:[J.wp.display.grid,J.wp.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:eF.LU.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[J.wp.position.absolute,J.wp.top(0),J.wp.right(0),J.wp.height("100%"),J.wp.center,J.wp.pr(4)],searchInputWrapper:[J.wp.position.relative,{gridArea:"search"}],searchControls:[J.wp.display.flex,J.wp.align.center,J.wp.rowWithGap(8),J.wp.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[J.wp.display.flex,J.wp.align.center,J.wp.rowWithGap(8),J.wp.flex.wrap,{gridArea:"replace-controls"}],searchSettings:J.wp.flex.row});function sA(e){var n=(0,w.useRef)(null);return(0,w.useEffect)(function(){if(n.current){var t;e!==(null==(t=n.current)?void 0:t.value)&&(n.current.value=e)}},[e]),n}var sC=new tU.E((0,w.forwardRef)(function(e,n){var t=e.view,r=e.query,i=e.updateQuery,o=(0,g._)((0,w.useState)(!1),2),a=o[0],l=o[1],s=(0,g._)((0,w.useState)([]),2),c=s[0],u=s[1],d=(0,g._)((0,w.useState)(null),2),p=d[0],f=d[1],h=c.length,m=(0,t0.A)(r),v=(0,t0.A)(c),b=sA(r.search),S=sA(r.replace);function Y(){(0,sf.Hg)(t);var e=t.state.selection.main;t.dispatch({effects:eh.Lz.scrollIntoView(e.from,{y:"center",x:"center"})}),h<=1||f(function(n){if(null===n){var t=c.findIndex(function(n){return n.from===e.from&&n.to===e.to});return -1===t?1:t+1}return n>=h?1:n+1})}function _(){(0,sf.ve)(t);var e=t.state.selection.main;t.dispatch({effects:eh.Lz.scrollIntoView(e.from,{y:"center",x:"center"})}),h<=1||f(function(n){if(null===n){var t=c.findIndex(function(n){return n.from===e.from&&n.to===e.to});return -1===t?1:t+1}return n<=1?h||1:n-1})}(0,w.useImperativeHandle)(n,function(){return{onSelectionSet:function(){var e=t.state.selection.main,n=v.current.findIndex(function(n){return n.from<=e.anchor&&n.to>=e.anchor});f(-1!==n?n+1:null)},onDocChanged:function(){u(sh(m.current,t.state.doc)),f(null)},onExpandRequested:function(){l(!0)}}},[t,m,v]),(0,w.useEffect)(function(){var e=sh(r,t.state.doc);u(e);var n=t.state.selection.main,i=e.findIndex(function(e){return e.from<=n.anchor&&e.to>=n.anchor});f(-1!==i?i+1:null)},[t,r]);var A=(0,g._)((0,w.useState)(function(){return sS(t.dom.clientWidth)}),2),C=A[0],k=A[1],x=(0,rl.A)(function(e){e.width&&k(sS(e.width))});function D(e){return(0,eh.TS)(t,e,"search-panel")}var E=h>0,R=r.search.length>0?"0 / 0":null,I=E?"".concat(p||1," / ").concat(h):R,T=I?8*I.length:null,F=(0,y.FD)(Q.S,{css:s_.searchSettings,children:[(0,y.Y)(sv.A,{alt:"case sensitive",icon:(0,y.Y)(sy.A,{}),checked:r.caseSensitive,onClick:function(){i({caseSensitive:!r.caseSensitive})}}),(0,y.Y)(sv.A,{alt:"regular expressions",icon:(0,y.Y)(sw.A,{}),checked:r.regexp,onClick:function(){i({regexp:!r.regexp})}}),(0,y.Y)(sv.A,{alt:"whole words",icon:(0,y.Y)(sb.A,{}),checked:r.wholeWord,onClick:function(){i({wholeWord:!r.wholeWord})}})]}),P=[s_.content];return"small"!==C&&a?P.push(s_.contentExpanded):"small"===C&&a?P.push(s_.contentExpandedSmall):"small"!==C||a||P.push(s_.contentSmall),(0,y.Y)(sY,{ref:x,onKeyDown:function(e){D(e)&&e.preventDefault()},children:(0,y.FD)(nc.ui,{elevated:!0,css:s_.root,px:4,py:6,row:!0,gap:4,children:[(0,y.Y)(Q.S,{css:s_.panelButtonWrapper,children:(0,y.Y)(tN.K0,{alt:a?"Close replace panel":"Show replace panel",size:32,onClick:function(){l(function(e){return!e})},children:(0,y.Y)(np.A,{rotate:90*!!a,style:{transition:"200ms ease"}})})}),(0,y.FD)(Q.S,{css:P,children:[(0,y.FD)(Q.S,{css:s_.searchInputWrapper,children:[(0,y.Y)(sg.T,{ref:b,style:{padding:4,paddingRight:null!=T?T:void 0},placeholder:"Search",defaultValue:r.search,name:"search","main-field":"true",onKeyDown:function(e){if((0,sm.T$)(e)&&"f"===e.key)return void e.currentTarget.select();if("enter"===e.key.toLowerCase()&&!D(e)){if(e.preventDefault(),e.shiftKey)return void _();Y()}},onChange:function(e){i({search:e})}}),I?(0,y.Y)(Q.S,{css:s_.matchLabel,children:(0,y.Y)(tO.EY,{variant:"small",color:"dimmest",multiline:!1,children:I})}):null]}),(0,y.FD)(Q.S,{css:s_.searchControls,children:[(0,y.FD)(Q.S,{row:!0,children:[(0,y.Y)(tN.K0,{size:32,alt:"Previous",onClick:function(){_()},children:(0,y.Y)(np.A,{rotate:-90})}),(0,y.Y)(tN.K0,{size:32,alt:"Next",onClick:function(){Y()},children:(0,y.Y)(np.A,{rotate:90})})]}),(0,y.Y)(t3.$n,{text:"Select all",onClick:function(){(0,sf.Cj)(t),t.focus()}}),F]}),a?(0,y.FD)(y.FK,{children:[(0,y.Y)(Q.S,{css:s_.replaceInputWrapper,children:(0,y.Y)(lF.pd,{ref:S,style:{padding:4},placeholder:"Replacement",name:"replace",defaultValue:r.replace,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(D(e)||(e.preventDefault(),(0,sf.Aw)(t)))},onChange:function(e){i({replace:e.target.value})}})}),(0,y.FD)(Q.S,{css:s_.replaceControls,children:[(0,y.Y)(t3.$n,{text:"Replace",onClick:function(){(0,sf.Aw)(t)}}),(0,y.Y)(t3.$n,{text:"Replace all",onClick:function(){(0,sf.yh)(t)}})]})]}):null]}),(0,y.Y)(Q.S,{css:s_.panelButtonWrapper,children:(0,y.Y)(tN.K0,{alt:"Close Search Panel",tooltipBehavior:"hidden",onClick:function(){(0,sf.jO)(t)},children:(0,y.Y)(tM.A,{})})})]})})})),sk=D.Pe.define(),sx=[(0,sf.$P)({createPanel:function(e){var n=!1,t=!1,r=!1,i=!1,o=!1,a=G()(function(n){var t,r,i,o,a,l,s=(0,sf.V8)(e.state),c=new sf.L0({search:null!=(t=n.search)?t:s.search,caseSensitive:null!=(r=n.caseSensitive)?r:s.caseSensitive,literal:null!=(i=n.literal)?i:s.literal,regexp:null!=(o=n.regexp)?o:s.regexp,replace:null!=(a=n.replace)?a:s.replace,wholeWord:null!=(l=n.wholeWord)?l:s.wholeWord});c.eq(s)||e.dispatch({effects:sf.Ri.of(c)})},300),l=sC.create({view:e,query:(0,sf.V8)(e.state),updateQuery:a});return{dom:l,top:!0,update:function(n){(0,em.$H)(n,sf.Ri)&&sC.set(l,{view:e,query:(0,sf.V8)(n.state),updateQuery:a}),n.selectionSet&&!i&&(i=!0,requestAnimationFrame(function(){if(!t){var e;i=!1,null==(e=sC.ref(l))||e.onSelectionSet()}})),n.docChanged&&!r&&(r=!0,requestAnimationFrame(function(){if(!t){var e;r=!1,null==(e=sC.ref(l))||e.onDocChanged()}})),(0,em.$H)(n,sk)&&!o&&(o=!0,requestAnimationFrame(function(){if(!t){var e;o=!1,null==(e=sC.ref(l))||e.onExpandRequested()}}))},mount:function(){n||(n=!0,requestAnimationFrame(function(){if(!t){n=!1;var e=l.querySelector("[main-field]");e&&(e.focus(),e.select())}}))},destroy:function(){return t=!0}}}}),eh.w4.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(e){return!!((0,sf.NK)(e.state)||(0,sf.pi)(e))&&(e.dispatch({effects:sk.of(null)}),!0)}}])],sD=t(71029),sE=t(55100),sR=null!=(p=globalThis.requestIdleCallback)?p:globalThis.requestAnimationFrame;function sI(e,n,t){var r=e.field(n,!1);if(void 0===r){if(void 0===t)throw Error("Field is not mounted on state");return t}return n.spec.toJSON(r,e)}function sT(e){for(var n=e.sliceString(0,200)+e.length,t=0,r=0;r<n.length;r++)t=(t<<5)-t+n.charCodeAt(r)|0;return(t>>>0).toString(36)}var sF=function(){function e(n,t,r,i){var o=this;(0,eu._)(this,e),this.view=n,this.replId=t,this.cache=r,this.compartment=i,this.historyIsMounted=!1,this.destroyed=!1,this.pending=!1,this.scheduleCacheUpdate=this.scheduleCacheUpdate.bind(this),this.view.scrollDOM.addEventListener("scroll",this.scheduleCacheUpdate),this.view.state.field(aK,!1)||Promise.resolve().then(function(){o.destroyed||o.apply()})}var n=e.prototype;return n.apply=function(){if(!this.historyIsMounted&&this.view.state.field(V.jN,!1))return void(0,eh.c_)(this.view.state,Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view"));if(!this.key||this.view.state.field(aK,!1)){if(this.historyIsMounted){var e,n,t=this.key?ae.u.of(!0):[];this.view.dispatch({effects:this.compartment.reconfigure(t)}),this.historyIsMounted=!1}return}var r=this.cache.get(this.key);if(!r||r.hash!==sT(this.view.state.doc)){this.view.dispatch({effects:this.compartment.reconfigure((0,V.b6)())}),this.historyIsMounted=!0;return}var i=D.OF.fromJSON(r.selection),o=[(e=r.scroll,(n=eh.Lz.scrollIntoView(e.pos,{y:"start",x:"start",yMargin:e.yDiff,xMargin:e.scrollLeft})).value.isSnapshot=!0,n),this.compartment.reconfigure([V.jN.init(function(e){var n,t;return n=V.jN,t=r.history,n.spec.fromJSON(t,e)}),(0,V.b6)()])];if(this.view.state.field(_.rI,!1))for(var a=0;a<r.folds.length;a+=2){var l=r.folds[a],s=r.folds[a+1];o.push(_.R3.of({from:l,to:s}))}this.view.dispatch({selection:i,effects:o}),this.historyIsMounted=!0},n.scheduleCacheUpdate=function(){var e=this;this.pending||(this.pending=!0,sR(function(){e.pending&&!e.destroyed&&(e.pending=!1,e.historyIsMounted&&e.key&&e.cache.set(e.key,{hash:sT(e.view.state.doc),scroll:function(e){var n=e.scrollDOM.scrollTop,t=e.scrollDOM.scrollLeft;if(0===n&&0===t)return{pos:0,yDiff:0,scrollLeft:0};var r=e.lineBlockAtHeight(n+8),i=r.from>=e.viewport.from||e.viewportLineBlocks[0].top-n>200?r:e.viewportLineBlocks[0];return{pos:i.from,yDiff:i.top-n,scrollLeft:t}}(e.view),selection:e.view.state.selection.toJSON(),history:sI(e.view.state,V.jN),folds:sI(e.view.state,_.rI,[])}))}))},n.postUpdate=function(e){if((0,em.$H)(e,eg.Md,aK))return void this.apply();!this.pending&&this.historyIsMounted&&(0,em.$H)(e,"doc","selection",V.jN,_.rI)&&this.scheduleCacheUpdate()},n.destroy=function(){this.destroyed=!0,this.view.scrollDOM.removeEventListener("scroll",this.scheduleCacheUpdate)},(0,n6._)(e,[{key:"key",get:function(){var e=this.view.state.facet(eg.Md);return e?"".concat(this.replId,":").concat(e):null}}]),e}(),sP=new nF.k(function(e,n){var t=new D.xx,r=eh.Z9.define(function(r){return new sF(r,e,n,t)},{provide:function(e){return eh.Lz.updateListener.of(function(n){var t;null==(t=n.view.plugin(e))||t.postUpdate(n)})}});return[t.of(ae.u.of(!0)),r]}),sL=eh.Lz.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),sU=t(45287),sN=t(83365),sO=t(91326),sM=t(13353),sH=t(30267),sB=t(92337);function sz(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function sW(e,n){var t;return null==n?sz(e):{filePath:e,text:null!=(t=n.state.doc.toString())?t:"",selections:n.state.selection.ranges.map(function(e){var n=e.from;return{location:n,length:e.to-n}}),hasFocus:n.hasFocus}}function sG(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,oz.A)(),t={messageType:sM.tF.TEXT_EDITOR_STATE,filePath:e.textEditorState.filePath,text:e.textEditorState.text,selections:e.textEditorState.selections,hasFocus:e.textEditorState.hasFocus,hasGhostwriterSuggestion:e.hasGhostwriterSuggestion,revisionId:e.revisionId};(0,sH._z)(t,n)}function sV(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,oz.A)(),t={messageType:sM.tF.TEXT_EDITOR_CLOSED,filePath:e};(0,sH._z)(t,n)}function sZ(e,n,t,r,i){return r===e&&r===t.textEditorState.filePath&&n===t.textEditorState.filePath&&i===t.revisionId}function sj(e){var n=e.map(function(e){return D.OF.range(e.location,e.location+e.length)});return D.OF.create(n)}function sq(e,n,t,r,i){var o,a,l,s,c,u,d,p,f,h,m=i.payload;if((0,sM.$H)(m)){if(!sZ(e,n,r,m.filePath,m.revisionId))return!1;var g=sj(m.selections);return t.dispatch({selection:g,scrollIntoView:!0}),!0}if((0,sM.m3)(m)){if(!sZ(e,n,r,m.filePath,m.revisionId))return!1;var v=sj(m.selections);return t.dispatch({changes:{from:0,to:t.state.doc.length,insert:m.text},selection:v,scrollIntoView:!0}),!0}if((0,sM.XN)(m)){if(!sZ(e,n,r,m.filePath,m.revisionId))return!1;var y=m.insertionRange,w=sj(m.selections);return t.dispatch({changes:{from:y.location,to:y.location+y.length,insert:m.text},selection:w,scrollIntoView:!0}),!0}if((0,sM.bb)(m))return!!sZ(e,n,r,m.filePath,m.revisionId)&&(t.dispatch(t.state.replaceSelection(m.text)),!0);if((0,sM.bj)(m))sZ(e,n,r,m.filePath,m.revisionId)&&ls({filePath:e,view:t,clipboardText:m.text});else if((0,sM.Ho)(m))switch(m.action){case sM.wZ.REQUEST_BLUR:if(!sZ(e,n,r,m.filePath,m.revisionId))return!1;t.contentDOM.blur();return;case sM.wZ.REQUEST_UNDO:return o=e,a=n,l=t,s=r,c=m.filePath,!!sZ(o,a,s,c,m.revisionId)&&((0,V.tN)(l),!0);case sM.wZ.REQUEST_REDO:return u=e,d=n,p=t,f=r,h=m.filePath,!!sZ(u,d,f,h,m.revisionId)&&((0,V.ZS)(p),!0);case sM.wZ.REQUEST_INDENT_SELECTION:return!!sZ(e,n,r,m.filePath,m.revisionId)&&(V.UY(t),!0);case sM.wZ.REQUEST_DEDENT_SELECTION:return!!sZ(e,n,r,m.filePath,m.revisionId)&&(V.Mg(t),!0);case sM.wZ.REQUEST_TOGGLE_COMMENT:return!!sZ(e,n,r,m.filePath,m.revisionId)&&(V.qh(t),!0);case sM.wZ.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return!!sZ(e,n,r,m.filePath,m.revisionId)&&(0,sB.R)(t);case sM.wZ.REQUEST_FOCUS:return t.focus(),!0;default:throw Error("Unknown BridgeTextEditorAction.")}else throw Error("Invalid payload.")}var sK=t(28648),s$=t(81209),sJ=t(4620);function sQ(e){var n=e.selection,t=e.doc,r=n.ranges.map(function(e){return e.extend(t.lineAt(e.from).from,t.lineAt(e.to).to)});return D.OF.create(r)}var sX=t(70871),s0=t(84915);function s1(e,n,t){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),o=(0,N.an)(n);return{code:i,filePath:n,fileVersion:t,fileContent:e.doc.toString(),range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:o,referenceType:B.fDX.INLINE}}var s2=t(59255),s4=t(53974),s5=t(44354),s3=t(49326),s7=t(61191),s6=t(12576),s8=t(87978);function s9(e){return(0,y.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,y.Y)("path",{fillRule:"evenodd",d:"M7 3.75A1.25 1.25 0 0 0 5.75 5v14.543l5.814-4.153a.75.75 0 0 1 .872 0l5.814 4.153V5A1.25 1.25 0 0 0 17 3.75H7Zm-1.945-.695A2.75 2.75 0 0 1 7 2.25h10A2.75 2.75 0 0 1 19.75 5v16a.75.75 0 0 1-1.186.61L12 16.922 5.436 21.61A.75.75 0 0 1 4.25 21V5c0-.73.29-1.429.805-1.945Z",clipRule:"evenodd"})}))}var ce=t(4163),cn=t(41526);function ct(e){return(0,y.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,y.Y)("path",{fillRule:"evenodd",d:"M2.25 5A2.75 2.75 0 0 1 5 2.25h8A2.75 2.75 0 0 1 15.75 5v.293A.749.749 0 0 1 16 5.25c.822 0 1.56.361 2.062.93.428.485.688 1.123.688 1.82v.293A.749.749 0 0 1 19 8.25c.822 0 1.56.361 2.062.93.428.485.688 1.123.688 1.82v8A2.75 2.75 0 0 1 19 21.75h-8A2.75 2.75 0 0 1 8.25 19c0-.088.015-.172.043-.25H8A2.75 2.75 0 0 1 5.25 16c0-.088.015-.172.043-.25H5A2.75 2.75 0 0 1 2.25 13V5Zm4.457 10.75a.749.749 0 0 1 .043.25c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25V8A1.245 1.245 0 0 0 16 6.75a.749.749 0 0 1-.25-.043V13A2.75 2.75 0 0 1 13 15.75H6.707Zm3 3a.749.749 0 0 1 .043.25c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25v-8A1.245 1.245 0 0 0 19 9.75a.749.749 0 0 1-.25-.043V16A2.75 2.75 0 0 1 16 18.75H9.707ZM5 3.75c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25H5Z",clipRule:"evenodd"})}))}var cr=t(77495);function ci(e){return(0,y.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,y.Y)("path",{fillRule:"evenodd",d:"M5.614 1.357a.75.75 0 0 1 1.03.257l8.872 14.788a3.25 3.25 0 1 1-1.286.772L5.357 2.386a.75.75 0 0 1 .257-1.03Zm12.772 0a.75.75 0 0 1 .257 1.029l-4.2 7a.75.75 0 1 1-1.286-.772l4.2-7a.75.75 0 0 1 1.029-.257Zm-7.5 12.5a.75.75 0 0 1 .257 1.029L9.77 17.174a3.25 3.25 0 1 1-1.286-.772l1.373-2.288a.75.75 0 0 1 1.029-.257ZM7.5 17.75a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Zm9 0a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Z",clipRule:"evenodd"})}))}var co=t(83728),ca=t(15149);function cl(e){return(0,y.FD)(X.Ay,(0,m._)((0,h._)({},e),{children:[(0,y.Y)("path",{d:"M7 4.25c-.69 0-1.25.56-1.25 1.25v13.333c0 .69.56 1.25 1.25 1.25h10c.69 0 1.25-.56 1.25-1.25v-7.292a.625.625 0 1 1 1.25 0v7.292a2.5 2.5 0 0 1-2.5 2.5H7a2.5 2.5 0 0 1-2.5-2.5V5.5A2.5 2.5 0 0 1 7 3h4.375a.625.625 0 1 1 0 1.25H7Z"}),(0,y.Y)("path",{fillRule:"evenodd",d:"M15.333 16.541c0 .345-.263.625-.588.625h-5.49c-.325 0-.588-.28-.588-.625s.263-.625.588-.625h5.49c.325 0 .588.28.588.625ZM15.333 10.083c0 .345-.263.625-.588.625h-5.49c-.325 0-.588-.28-.588-.625s.263-.625.588-.625h5.49c.325 0 .588.28.588.625Z",clipRule:"evenodd"}),(0,y.Y)("path",{fillRule:"evenodd",d:"M12 13.416c-.345 0-.625-.263-.625-.588v-5.49c0-.325.28-.588.625-.588s.625.263.625.588v5.49c0 .325-.28.588-.625.588ZM17.889 1.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})]}))}var cs=t(16645),cc=t(17289),cu=t(55549),cd=t(49748),cp=t(81472),cf=t(47820),ch=t(82462);function cm(e){var n=e.label,t=e.icon,r=e.run,i=e.keyboardShortcut,o=e.dataCy;return{match:s2.G2,data:{type:"action",label:n,icon:t,run:r,keyboardShortcut:i,dataCy:o}}}function cg(e){var n=e.view,t=e.mainSelection,r=e.codeReference;n.dispatch({selection:{anchor:t.to},effects:[tR.L.of({id:(0,oz.A)(),codeReference:r,type:"ghostwriterKillswitch"}),eh.Lz.scrollIntoView(t.to,{y:"center"})]})}function cv(e){var n=e.path,t=(0,n2.A)().fs,r=(0,iY._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,w.useCallback)(function(e,i){var o=e.state,a=o.doc,l=o.selection,s=o.lineBreak,c=a.lineAt(l.main.head);c.length&&e.dispatch({changes:{from:c.to,insert:s},selection:D.OF.cursor(c.to+1)});var u=t.getOTVersion(n),d=s1(e.state,n,u);if((0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:i}),r)return void cg({view:e,mainSelection:e.state.selection.main,codeReference:d});var p=e.state.selection.main.to;e.dispatch({selection:{anchor:p},effects:[tR.L.of({id:(0,oz.A)(),codeReference:d,type:"generateCode",source:i}),eh.Lz.scrollIntoView(p,{y:"center"})]})},[n,t,r])}function cy(e){var n=e.path,t=(0,n2.A)().fs,r=(0,iY._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,w.useCallback)(function(e,i){e.dispatch({selection:sQ(e.state)});var o=t.getOTVersion(n),a=s1(e.state,n,o);if(r)return void cg({view:e,mainSelection:e.state.selection.main,codeReference:a});(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"modify",source:i});var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[tR.L.of({id:(0,oz.A)(),type:"transformCode",codeReference:a,source:i}),eh.Lz.scrollIntoView(l,{y:"center"})]})},[n,t,r])}function cw(e){var n=e.path,t=(0,n2.A)().fs,r=(0,iY._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,w.useCallback)(function(e,i){e.dispatch({selection:sQ(e.state)});var o,a,l,s,c=t.getOTVersion(n),u=s1(e.state,n,c);(0,eK.u4)(eK.AZ.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"explain",source:i});var d=e.state.selection.main.to-e.state.selection.main.from>rT.a;if(d)return void(a=(o={view:e,mainSelection:e.state.selection.main,codeReference:u}).view,l=o.mainSelection,s=o.codeReference,a.dispatch({selection:{anchor:l.to},effects:[tR.L.of({id:(0,oz.A)(),codeReference:s,type:"codeLengthExceeded"}),eh.Lz.scrollIntoView(l.to,{y:"center"})]}));if(r||d)return void cg({view:e,mainSelection:e.state.selection.main,codeReference:u});var p=e.state.selection.main.to;e.dispatch({selection:{anchor:p},effects:[tR.L.of({id:(0,oz.A)(),codeReference:u,type:"explainCode",source:i}),eh.Lz.scrollIntoView(p,{y:"center"})]})},[t,n,r])}var cb=new nF.k(function(e,n,t){return e?null:[(0,oF.M)(n),eh.Lz.domEventHandlers({contextmenu:function(e,n){var r=e.clientX,i=e.clientY,o=n.state.selection.main,a=n.posAtCoords({x:r,y:i}),l=n.state.doc.length,s=null===a?l:a;if(s<o.from||s>o.to){var c=D.OF.cursor(s);n.dispatch({selection:c})}return t(e),!0}})]}),cS=t(10594),cY=t(12584),c_=t(41114),cA=t(86997);function cC(){var e=(0,cY._)(["\n  query ReplCodeExamples($language: String!) {\n    languageExamples(language: $language) {\n      ... on LanguageExamples {\n        examples {\n          ... on LanguageExample {\n            mainFile\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return cC=function(){return e},e}var ck={},cx=(0,c_.J1)(cC());function cD(e){var n=(0,h._)({},ck,e);return cA.I(cx,n)}var cE=t(51623),cR=t(28046),cI=t(66169),cT=t(31450),cF=Q.D.button;function cP(e){var n=e.name,t=e.children,r=e.onClick;return(0,y.FD)(cF,{onClick:function(){return r()},css:[e0.b.nofill,J.wp.p(8),J.wp.focusRing,J.wp.textAlign.left],children:[(0,y.Y)(tO.EY,{variant:"subheadDefault",css:J.wp.pb(16),multiline:!1,children:n}),(0,y.Y)(Q.S,{css:[J.wp.backgroundColor.backgroundDefault,J.wp.p(8),J.wp.borderRadius(8)],children:t})]})}var cL="@media (min-width: ".concat(cT.LO.tabletMax,"px)"),cU=(0,eX.AH)([J.wp.colWithGap(16),(0,ti._)({},cL,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function cN(e){var n=e.children;return(0,y.Y)(Q.S,{css:[(0,ti._)({},cL,[J.wp.rowWithGap(16)])],children:n})}function cO(e){var n=e.mainFile,t=e.examples,r=e.onSelect;return(0,y.FD)(Q.S,{gap:24,children:[(0,y.Y)(tO.Y9,{level:1,variant:"headerDefault",children:"Code examples"}),(0,y.Y)(tO.EY,{children:"Get started with some program examples."}),(0,y.FD)(cN,{css:[J.wp.colWithGap(16)],children:[(0,y.Y)(Q.S,{css:cU,children:t.slice(0,(t.length+1)/2).map(function(e){return(0,y.Y)(cP,{name:e.name,onClick:function(){return r(e)},children:(0,y.Y)(cI.A,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)})}),(0,y.Y)(Q.S,{css:cU,children:t.slice((t.length+1)/2).map(function(e){return(0,y.Y)(cP,{name:e.name,onClick:function(){return r(e)},children:(0,y.Y)(cI.A,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)})})]})]})}function cM(e){var n=e.filePath,t=e.language,r=e.onSelect,i=cD({variables:{language:t}}),o=i.data,a=i.loading,l=i.error;if(a)return(0,y.Y)(Q.S,{pt:32,pb:32,gap:0,justify:"center",align:"center",children:(0,y.Y)(n_.A,{})});if(l)return(0,y.Y)(Q.S,{pt:32,pb:32,gap:0,justify:"center",align:"center",children:l.message});var s=(null==o?void 0:o.languageExamples.__typename)==="LanguageExamples"?o.languageExamples.examples:null;return(null==s?void 0:s.length)?(null==s?void 0:s.length)?(0,y.Y)(cO,{mainFile:n,examples:s,onSelect:r}):(0,y.Y)(Q.S,{pt:32,pb:32,gap:0,justify:"center",align:"center",children:(0,y.FD)(tO.EY,{children:["Sorry, this language doesn’t have any examples. Want to add some? Contact us at ",(0,y.Y)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})}):null}var cH=t(15095),cB=(0,$.x)({root:[{marginTop:"10%",pointerEvents:"none","*":{pointerEvents:"all"}}],button:[J.wp.reset.button,J.wp.rowWithGap(6),J.wp.align.center,J.wp.color.foregroundDimmest,J.wp.cursor.pointer,{fontFamily:eF.LU.fontFamilyDefault,"*":{borderColor:eF.LU.foregroundDimmest,color:eF.LU.foregroundDimmest},":hover *":{borderColor:eF.LU.foregroundDefault,color:eF.LU.foregroundDefault}}]}),cz={layer:"cm-empty-state-layer",dom:"cm-empty-state-dom"},cW=eh.Lz.theme((f={},(0,ti._)(f,".".concat(cz.layer),{width:"100%",height:"100%",pointerEvents:"none",zIndex:"201 !important"}),(0,ti._)(f,".".concat(cz.dom),{position:"absolute",width:"100%",pointerEvents:"none",display:"flex",justifyContent:"center"}),f)),cG=function(){function e(n){(0,eu._)(this,e),this.options=n}var n=e.prototype;return n.draw=function(){var e=this.options,n=e.ctas,t=e.view,r=e.width,i=(0,tU.J)((0,y.Y)(Q.S,{css:cB.root,p:16,align:"center",gap:8,children:n.map(function(e){return(0,y.FD)(Q.S,{css:cB.button,onClick:function(){return e.onClick(t)},children:[(0,y.FD)(Q.S,{row:!0,gap:4,children:[e.icon,(0,y.Y)(tO.EY,{variant:"small",children:e.text})]}),e.shortcut?(0,y.Y)(rS._y,{keyCombo:e.shortcut,fontSize:12}):null]},e.text)})}));return i.className=cz.dom,i.style.width=r+"px",i.style.visibility=r>240?"visibile":"hidden",i.style.left="0px",i},n.eq=function(e){return ef()(e.options,this.options)},e}(),cV=new nF.k(function(e){var n=function(e){var n;return!(e.doc.length>0||e.field(tW.z)||(null==(n=e.field(lD,!1))?void 0:n.size)||e.field(cH.dg,!1))},t=D.sU.define({create:n,update:function(e,t){return n(t.state)}}),r=(0,eh.qd)({above:!0,class:cz.layer,update:function(e){return(0,em.$H)(e,t)},markers:function(n){if(!n.state.field(t,!1))return[];var r=n.dom.getBoundingClientRect();return[new cG({ctas:e,width:Math.round(n.contentDOM.getBoundingClientRect().right-r.left),view:n})]}});return[cW,t,r]}),cZ=t(69961),cj=t(61518);function cq(e){var n=e.cta,t=e.version;(0,eK.u4)(eK.AZ.EDITOR_EMPTY_STATE_CLICKED,{cta:n,version:t})}var cK=D.Pe.define(),c$=D.sU.define({create:function(){return null},update:function(e,n){var t=e;return(0,ey.C)(n,cK,function(e){t=e.value}),t}}),cJ=l$.X.from(c$,function(e){if(!e)return null;var n=e.language,t=e.filePath;return{key:"examplesModal",node:function(e){var r=function(){e.dispatch({effects:cK.of(null)})};return(0,y.Y)(lP.a,{maxWidth:872,isOpen:!0,onRequestClose:r,children:(0,y.Y)(cX,{onRequestClose:r,language:n,filePath:t})})}}}),cQ=[c$,cJ];function cX(e){var n=e.onRequestClose,t=e.language,r=e.filePath,i=(0,cR.Os)(cE.C.id,cE.j.Examples),o=(0,cR.Os)(cE.C.id,cE.j.Editor),a=(0,g._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=(0,cZ.A)(r),u=(0,w.useRef)(null==i?void 0:i.isActive),d=(0,w.useRef)();d.current=null==i?void 0:i.isActive;var p=(0,w.useRef)(null==i?void 0:i.goto);return(p.current=null==i?void 0:i.goto,(0,w.useEffect)(function(){return function(){var e;d.current&&(null==(e=p.current)||e.call(p,cE.j.Editor))}},[]),(0,w.useEffect)(function(){if((null==o?void 0:o.isActive)&&!u.current){if(!l)return void s(!0);o.goto(cE.j.Examples)}},[o,n,l]),(0,w.useEffect)(function(){if(null==i?void 0:i.isActive){u.current=!0;return}u.current&&n(null)},[n,null==i?void 0:i.isActive]),c)?(0,y.Y)("div",{ref:null==i?void 0:i.tourRef,children:(0,y.Y)(cM,{filePath:r,language:t,onSelect:function(e){c({code:e.code,insertAt:0}),n({exampleName:e.name})}})}):(0,y.Y)("div",{children:"Please make sure you have a file open"})}var c0=t(64287),c1=t(98444),c2=t(98913),c4=t(57762),c5=t(52949),c3=t(53075),c7=function(e){var n=parseInt(e.substring(1),16);return[n>>16&255,n>>8&255,255&n]};function c6(e,n,t){var r=n.clientWidth,i=t.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var c8=t(44781);function c9(e,n,t,r){var i=(0,aH.A)().showError,o=(0,sE.A)(),a=(0,c8.Rf)({variables:{replId:o,path:e},onError:function(e){i(e.message)},skip:!r||n});return(0,w.useMemo)(function(){var r;return n||a.loading||a.error||!a.data||(null==(r=a.data.threadsByFile)?void 0:r.__typename)!=="ThreadsByFileResult"?{}:a.data.threadsByFile.threads.filter(function(n){return n.path===e&&(!t||!n.isResolved)}).reduce(function(e,n){return(0,m._)((0,h._)({},e),(0,ti._)({},n.id,n))},{})},[a.loading,a.data,a.error,e,n,t])}var ue=function(e){function n(){return(0,eu._)(this,n),(0,n7._)(this,n,arguments)}(0,n8._)(n,e);var t=n.prototype;return t.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},t.eq=function(e){return!1},t.destroy=function(e){},n}(D.FB);ue.prototype.elementClass="",ue.prototype.toDOM=void 0,ue.prototype.mapMode=D.iR.TrackBefore,ue.prototype.startSide=ue.prototype.endSide=-1,ue.prototype.point=!0;var un=D.sj.define(),ut=D.sj.define(),ur=D.sj.define({combine:function(e){return e.some(function(e){return e})}}),ui=eh.Z9.fromClass(function(){function e(n){(0,eu._)(this,e),this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(ut).map(function(e){return new us(n,e)});var t=!0,r=!1,i=void 0;try{for(var o,a=this.gutters[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;this.dom.appendChild(l.dom)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}this.fixed=!n.state.facet(ur),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM.nextSibling)}var n=e.prototype;return n.update=function(e){if(e.viewportChanged){var n=this.view.contentDOM.nextElementSibling;n&&n!==this.dom&&n.classList.contains("cm-minimap-gutter")&&e.view.scrollDOM.insertBefore(this.dom,e.view.contentDOM.nextSibling)}if(this.updateGutters(e)){var t=this.prevViewport,r=e.view.viewport,i=Math.min(t.to,r.to)-Math.max(t.from,r.from);this.syncGutters(i<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(ur)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},n.syncGutters=function(e){var n=this,t=this.dom.nextSibling;e&&this.dom.remove();var r=D.om.iter(this.view.state.facet(un),this.view.viewport.from),i=[],o=this.gutters.map(function(e){return new ul(e,n.view.viewport,-n.view.documentPadding.top)}),a=!0,l=!1,s=void 0;try{for(var c,u=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=void 0;if(Array.isArray(d.type)){var f=!0,h=!1,m=void 0;try{for(var g,v=d.type[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var y=g.value;if(y.type==eh._B.Text){p=y;break}}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}else p=d.type==eh._B.Text?d:void 0;if(p){i.length&&(i=[]),ua(r,i,d.from);var w=!0,b=!1,S=void 0;try{for(var Y,_=o[Symbol.iterator]();!(w=(Y=_.next()).done);w=!0)Y.value.line(this.view,p,i)}catch(e){b=!0,S=e}finally{try{w||null==_.return||_.return()}finally{if(b)throw S}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}var A=!0,C=!1,k=void 0;try{for(var x,E=o[Symbol.iterator]();!(A=(x=E.next()).done);A=!0)x.value.finish()}catch(e){C=!0,k=e}finally{try{A||null==E.return||E.return()}finally{if(C)throw k}}e&&this.view.scrollDOM.insertBefore(this.dom,t)},n.updateGutters=function(e){var n=e.startState.facet(ut),t=e.state.facet(ut),r=e.docChanged||e.heightChanged||e.viewportChanged||!D.om.eq(e.startState.facet(un),e.state.facet(un),e.view.viewport.from,e.view.viewport.to);if(n==t){var i=!0,o=!1,a=void 0;try{for(var l,s=this.gutters[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)l.value.update(e)&&(r=!0)}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}else{r=!0;var c=[],u=!0,d=!1,p=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,g=n.indexOf(m);g<0?c.push(new us(this.view,m)):(this.gutters[g].update(e),c.push(this.gutters[g]))}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}var v=!0,y=!1,w=void 0;try{for(var b,S=this.gutters[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value;Y.dom.remove(),0>c.indexOf(Y)&&Y.destroy()}}catch(e){y=!0,w=e}finally{try{v||null==S.return||S.return()}finally{if(y)throw w}}var _=!0,A=!1,C=void 0;try{for(var k,x=c[Symbol.iterator]();!(_=(k=x.next()).done);_=!0){var E=k.value;this.dom.appendChild(E.dom)}}catch(e){A=!0,C=e}finally{try{_||null==x.return||x.return()}finally{if(A)throw C}}this.gutters=c}return r},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.dom.remove()},e}(),{provide:function(e){return eh.Lz.scrollMargins.of(function(n){var t=n.plugin(e);return t&&0!=t.gutters.length&&t.fixed?n.textDirection==eh.OP.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null})}});function uo(e){return Array.isArray(e)?e:[e]}function ua(e,n,t){for(;e.value&&e.from<=t;)e.from==t&&n.push(e.value),e.next()}var ul=function(){function e(n,t,r){(0,eu._)(this,e),this.gutter=n,this.height=r,this.localMarkers=[],this.i=0,this.cursor=D.om.iter(n.markers,t.from)}var n=e.prototype;return n.line=function(e,n,t){this.localMarkers.length&&(this.localMarkers=[]),ua(this.cursor,this.localMarkers,n.from);var r=t.length?this.localMarkers.concat(t):this.localMarkers,i=this.gutter.config.lineMarker(e,n,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=n.top-this.height;if(this.i==o.elements.length){var l=new uc(e,n.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,n.height,a,r);this.height=n.bottom,this.i++}},n.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}},e}(),us=function(){function e(n,t){var r,i=function(e){r.dom.addEventListener(e,function(r){var i=n.lineBlockAtHeight(r.clientY-n.documentTop);t.domEventHandlers[e](n,i,r)&&r.preventDefault()})};for(var o in(0,eu._)(this,e),this.view=n,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)r=this,i(o);this.markers=uo(t.markers(n)),t.initialSpacer&&(this.spacer=new uc(n,0,0,[t.initialSpacer(n)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var n=e.prototype;return n.update=function(e){var n=this.markers;if(this.markers=uo(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}var r=e.view.viewport;return!D.om.eq(this.markers,n,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},e}(),uc=function(){function e(n,t,r,i){(0,eu._)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(n,t,r,i)}var n=e.prototype;return n.update=function(e,n,t,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=t&&(this.dom.style.marginTop=(this.above=t)?t+"px":""),!function(e,n){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(!e[t].compare(n[t]))return!1;return!0}(this.markers,r)&&this.setMarkers(e,r)},n.setMarkers=function(e,n){for(var t="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<n.length?n[i++]:null,s=!1;if(l){var c=l.elementClass;c&&(t+=" "+c);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,s=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var p=r.nextSibling;r.remove(),r=p}}if(!l)break;l.toDOM&&(s?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),s&&o++}this.dom.className=t,this.markers=n},n.destroy=function(){this.setMarkers(null,[])},e}(),uu=D.sj.define(),ud=D.sj.define({combine:function(e){return(0,D.QR)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,n){var t=Object.assign({},e);for(var r in n)!function(e){var r=t[e],i=n[e];t[e]=r?function(e,n,t){return r(e,n,t)||i(e,n,t)}:i}(r);return t}})}}),up=function(e){function n(e){var t;return(0,eu._)(this,n),(t=(0,n7._)(this,n)).number=e,t}(0,n8._)(n,e);var t=n.prototype;return t.eq=function(e){return this.number==e.number},t.toDOM=function(){return document.createTextNode(this.number)},n}(ue);function uf(e,n){return e.state.facet(ud).formatNumber(n,e.state)}function uh(e){for(var n=9;n<e;)n=10*n+9;return n}ut.compute([ud],function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(uu)},lineMarker:function(e,n,t){return t.some(function(e){return e.toDOM})?null:new up(uf(e,e.state.doc.lineAt(n.from).number))},lineMarkerChange:function(e){return e.startState.facet(ud)!=e.state.facet(ud)},initialSpacer:function(e){return new up(uf(e,uh(e.state.doc.lines)))},updateSpacer:function(e,n){var t=uf(n.view,uh(n.view.state.doc.lines));return t==e.number?e:new up(t)},domEventHandlers:e.facet(ud).domEventHandlers}});var um=new(function(e){function n(){var e;return(0,eu._)(this,n),e=(0,n7._)(this,n,arguments),e.elementClass="cm-activeLineGutter",e}return(0,n8._)(n,e),n}(ue)),ug=(un.compute(["selection"],function(e){var n=[],t=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;if(s.empty){var c=e.doc.lineAt(s.head).from;c>t&&(t=c,n.push(um.range(c)))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return D.om.of(n)}),t(84515)),uv=t(50022);let uy=function(e){var n=e.isOpen,t=e.threadId,r=(0,g._)((0,w.useState)(!1),2),i=r[0],o=r[1],a=(0,ug.Mk)({variables:{id:t},skip:"initial-spacer"===t});(0,w.useEffect)(function(){if(a&&!a.error){var e,n=null==(e=a.data)?void 0:e.thread;n&&o((null==n?void 0:n.__typename)==="AnnotationAnchor"&&(null==n?void 0:n.messages.some(function(e){return!e.seen})))}},[a]);var l={button:{alt:{default:"View threads",close:"Dismiss thread"}}};return(0,y.Y)(tN.K0,{alt:n?l.button.alt.close:l.button.alt.default,size:24,className:"thread-indicator",css:[J.wp.width(20),J.wp.height(20),J.wp.transition.snappy,J.wp.cursor.pointer,J.wp.display.flex,J.wp.borderRadius(8),J.wp.position.relative,J.wp.overflow("visible"),n?J.wp.color.accentPrimaryStrongest:J.wp.color.foregroundDimmest,{borderWidth:eF.LU.borderWidthDefault,borderStyle:"solid",borderColor:n?eF.LU.accentPrimaryDefault:"transparent",backgroundColor:n?eF.LU.accentPrimaryDimmer:eF.LU.backgroundHigher,outline:0},{":hover":{borderColor:n?eF.LU.accentPrimaryStronger:eF.LU.outlineDimmer,color:n?eF.LU.accentPrimaryStrongest:eF.LU.foregroundDimmer,background:n?eF.LU.accentPrimaryDefault+" !important":eF.LU.backgroundHighest},svg:{width:12,height:12}}],children:(0,y.FD)(y.FK,{children:[i?(0,y.Y)("div",{css:[J.wp.width(8),J.wp.height(8),J.wp.backgroundColor.redStronger,J.wp.position.absolute,J.wp.top(-1),J.wp.left(-1),J.wp.borderRadius("full")]}):null,(0,y.Y)(uv.A,{})]})})};var uw=t(11071),ub=t(39695),uS=t(49316),uY=t(86550),u_=t(67856),uA=t(78502),uC=t(60093),uk=t(7814);let ux=function(e){var n=e.caretSize,t=void 0===n?[8,12]:n,r=(0,es._)(e,["caretSize"]);return(0,y.FD)("svg",(0,m._)((0,h._)({width:t[0],height:t[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),{children:[(0,y.Y)("mask",{id:"outline",fill:"white",children:(0,y.Y)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,y.Y)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,y.Y)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,y.Y)("defs",{children:(0,y.FD)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,y.Y)("stop",{stopColor:"#57ABFF"}),(0,y.Y)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))};var uD=t(80712),uE=t(77252),uR=t(18456),uI=t(1684),uT=t(10729),uF=t(89589),uP=t(52447),uL=t(67843),uU=t(25588),uN=t(24140),uO=t(77915),uM=t(57356),uH=t(25650),uB=(0,$.x)({inlineThreadHeader:[J.wp.position.relative,J.wp.px(12),J.wp.py(8),{borderBottomWidth:eF.LU.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:eF.LU.outlineDimmest}],inlineThreadHeaderCaret:[J.wp.position.absolute,J.wp.height("fit-content"),J.wp.display.flex,J.wp.flex.row,J.wp.align.center],inlineThreadInputContainer:[J.wp.border({color:eF.LU.outlineDimmest,direction:"top"}),{".popover-control-container":[J.wp.flex.grow(1)]}],inlineThreadInput:[J.wp.flex.row,J.wp.align.start,J.wp.rowWithGap(8),J.wp.width("full")],commentContainer:[J.wp.px(12),J.wp.py(12),J.wp.maxHeight(300),J.wp.overflowY("auto"),J.wp.colWithGap(16)]}),uz=function(e){var n,t,r=e.isCreating,i=e.threadId,o=e.filePath,a=e.isResolved,l=e.isLoading,s=e.isPlaceholder,c=e.caretPosition,u=e.onRequestClose,d=e.onResolveThread,p=e.openThreadsInbox,f={viewAll:"Inbox",next:"Next thread",previous:"Previous thread",dismiss:"Collapse"},h=c9(null===o?"":o,l,!0,!0),m=(0,O.g)("fontSize").preferences.fontSize,g=[12,8];switch(m){case 10:g=[8,6];break;case 14:g=[10,6];break;case 18:g=[12,8];break;case 24:g=[14,10]}var v=(0,w.useMemo)(function(){return Object.values(h).sort(function(e,n){return e.indexStart-n.indexStart})},[h]),b=(0,w.useMemo)(function(){return v.findIndex(function(e){return e.id===i})},[v,i]),S=(0,uR.li)(),Y=(n=(0,ec._)(function(){var e;return(0,ed.YH)(this,function(e){return S(b===v.length-1?v[0].id:v[b+1].id),[2]})}),function(){return n.apply(this,arguments)}),_=(t=(0,ec._)(function(){var e;return(0,ed.YH)(this,function(e){return S(0===b?v[v.length-1].id:v[b-1].id),[2]})}),function(){return t.apply(this,arguments)});return(0,y.FD)(nc.ui,{background:"root",css:uB.inlineThreadHeader,row:!0,align:"center",justify:"space-between",children:[null!==c&&(0,y.Y)("span",{css:uB.inlineThreadHeaderCaret,style:{top:-g[1],left:c},children:(0,y.Y)(ux,{caretSize:g})}),(0,y.Y)(t3.$n,{iconLeft:(0,y.Y)(uM.A,{}),onClick:function(){p()},text:f.viewAll,size:"small"}),v.length>1?(0,y.FD)(Q.S,{row:!0,align:"center",gap:4,children:[(0,y.Y)(tN.K0,{alt:f.previous,onClick:_,children:(0,y.Y)(uU.A,{})}),(0,y.FD)(tO.EY,{color:"dimmest",variant:"small",multiline:!1,children:[b+1,"/",v.length]}),(0,y.Y)(tN.K0,{alt:f.next,onClick:Y,children:(0,y.Y)(uL.A,{})})]}):null,(0,y.FD)(Q.S,{row:!0,align:"center",gap:4,children:[r||a||s?null:(0,y.Y)(t3.$n,{onClick:void 0===d?function(){}:d,text:"Resolve",size:"small",iconLeft:(0,y.Y)(uN.A,{})}),!r&&a?(0,y.Y)(uI.a,{text:"Resolved",colorway:"positive"}):null,(0,y.Y)(t3.$n,{onClick:void 0===u?function(){}:u,text:f.dismiss,size:"small",iconLeft:(0,y.Y)(uO.A,{})})]})]})},uW=function(e){var n,t,r=e.threadId,i=e.isResolved,o=e.onMessageChange,a=e.onMessageSubmit,l=e.isPlaceholder,s=e.onRequestClose,c=void 0===s?function(){}:s,u=(0,g._)((0,w.useState)(""),2),d=u[0],p=u[1],f=(0,g._)((0,w.useState)((0,oz.A)()),2),v=f[0],b=f[1],S=(0,u_.A)().ref,Y=(0,w.useRef)(null),_={input:{placeholder:function(){return l?"Start a new thread… (Markdown is supported)":i?"Reply to re-open thread…":"Reply… (Markdown is supported)"}},submit:"Post reply",cancel:"Cancel"},A=function(){var e=d.trim();0!==e.length&&(a({message:e,messageId:v}),p(""),b((0,oz.A)()))},C=(0,uA.T)(),k=(0,uY.A)(),x=(0,g._)((0,uC.A)({"@":(n=(0,ec._)(function(e){var n,t;return(0,ed.YH)(this,function(r){return n=k.filter(function(e){return e.id!==C}),e&&(t=e.toLowerCase(),n=n.filter(function(e){return e.username.toLowerCase().startsWith(t)})),[2,n.slice(0,5).map(function(e){return{icon:(0,y.Y)(uP.A,{username:e.username,fullName:e.fullName,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return n.apply(this,arguments)})}),2),D=x[0].suggestions,E=x[1],R=(0,ub.Bp)({items:(null==D?void 0:D.results)||[],defaultHighlightedIndex:0,isOpen:(null!=(t=null==D?void 0:D.results.length)?t:0)>0,onSelectedItemChange:function(e){var n=e.selectedItem;if(D&&n){var t=D.applySuggestion({targetValue:d,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;p(r),setTimeout(function(){Y.current&&(Y.current.setSelectionRange(i,i),Y.current.focus())})}}}),I=R.isOpen,T=R.getInputProps,F=R.getMenuProps,P=R.getItemProps,L=R.highlightedIndex,U=R.getComboboxProps;return(0,w.useEffect)(function(){var e="threads/drafts/".concat(r),n=aB.A.get(e,"string");n&&p(n);var t=Y.current;return function(){if(t){var n=t.value;if(0===n.length)return void aB.A.remove(e);aB.A.set(e,n)}}},[r]),(0,y.Y)(nc.ui,{background:"root",css:uB.inlineThreadInputContainer,px:12,pb:8,pt:8,children:(0,y.FD)("div",(0,m._)((0,h._)({css:uB.inlineThreadInput},U()),{children:[l?(0,y.Y)(t3.$n,{text:_.cancel,onClick:c}):null,(0,y.FD)("div",{css:[{width:"100%"}],children:[(0,y.Y)(lF.ov,(0,h._)({},T({ref:function(e){Y.current=e,S(e),E(e)},value:d,onChange:function(e){var n=e.target.value;p(n),o({message:n,messageId:v})},onKeyDown:function(e){!I&&(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),A()))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),c())},placeholder:_.input.placeholder(),css:[J.wp.height(32),J.wp.align.start,{resize:"vertical",width:"100%",flexGrow:1,caretColor:"auto"}],autoFocus:!0}))),(0,y.Y)("div",{css:{position:"relative"},children:(0,y.Y)("div",(0,m._)((0,h._)({},F({css:[{position:"absolute",top:eF.LU.space2,overflow:"hidden"},J.wp.borderRadius(16),J.wp.shadow(1),J.wp.backgroundColor.backgroundDefault]})),{children:null==D?void 0:D.results.map(function(e,n){return(0,uw.n)("div",(0,m._)((0,h._)({},P({item:e,index:n})),{key:e.value}),(0,y.FD)(uF.z,{spacing:2,css:[L===n?J.wp.backgroundColor.backgroundHighest:null,J.wp.p(8)],children:[e.icon,(0,y.Y)("div",{children:e.value})]}))})}))})]}),(0,y.Y)(Q.S,{pt:4,children:(0,y.Y)(tN.K0,{alt:_.submit,tooltipDelay:"long",onClick:A,children:(0,y.Y)(uH.A,{})})})]}))})},uG=function(e){var n,t,r=e.threadId,i=e.isCreating,o=e.isResolved,a=void 0!==o&&o,l=e.view,s=e.filePath,c=e.openThreadsInbox,u=(0,uE.A)(r,l,s),d=u.thread,p=u.loading,f=u.isPlaceholder,h=u.getLatestAnchor,m=u.updateThread,g=u.changeThreadMessage,b=u.finalizeThreadMessage,S=function(){null==l||l.dispatch({effects:[cH.Ky.of(null)]})},Y=(0,O.g)("fontSize").preferences.fontSize,_=(0,w.useRef)(null);(0,uS.A)(d);var A=h(),C=l&&!p&&"number"==typeof(null==A?void 0:A.indexEnd)&&A.indexEnd<=l.state.doc.length?null==(t=l.coordsAtPos(A.indexEnd))?void 0:t.left:null,k=(null==l?void 0:l.dom.getBoundingClientRect().left)||null,x=Y;switch(Y){case 10:x=13;break;case 14:x=19;break;case 18:x=25;break;case 24:x=34}var D=(0,aH.A)().showConfirm,E=(0,sE.A)(),R=(0,w.useRef)(null),I=function(){R.current&&(R.current.scrollTop=R.current.scrollHeight)};(0,w.useEffect)(function(){setTimeout(function(){I()},0)},[null==d?void 0:d.messages]);var T=(0,w.useMemo)(function(){return(null==d?void 0:d.messages)?(0,v._)(d.messages).sort(function(e,n){return Date.parse(e.timeCreated)-Date.parse(n.timeCreated)}):[]},[null==d?void 0:d.messages]),F=(n=(0,w.useRef)(0),(0,rl.A)(function(e){var t=e.height;t!==n.current&&(null==l||l.requestMeasure()),n.current=t})),P=(0,uk.S)([_,F],{breadcrumb:"client/workspace/components/Threads/Inline.tsx:655"});return(0,y.Y)("div",{css:[J.wp.width("100%"),J.wp.backgroundColor.backgroundRoot],children:(0,y.FD)(Q.S,{innerRef:P,css:[J.wp.font.default,{borderTopWidth:eF.LU.borderWidthDefault,borderBottomWidth:eF.LU.borderWidthDefault,borderStyle:"solid",borderColor:eF.LU.accentPrimaryDefault}],children:[f||p?null:(0,y.Y)(uz,{isCreating:i,isResolved:a,isLoading:p,threadId:r,filePath:s,caretPosition:C&&k?C-k-6:null,isPlaceholder:f,onRequestClose:S,onResolveThread:function(){m({changes:{isResolved:!0}}),D("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:c}),p&&!f?(0,y.Y)(Q.S,{style:{height:x},children:(0,y.Y)(uT.A,{viewBox:"0 0 400 21",backgroundColor:eF.LU.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:eF.LU.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,y.Y)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})}):(0,y.FD)(y.FK,{children:[!i&&T.length>0?(0,y.Y)("div",{css:uB.commentContainer,style:{fontSize:Y},ref:R,children:T.map(function(e){return(0,y.Y)(uD.A,{thread:d,message:e},e.id)})}):null,(0,y.Y)(uW,{threadId:r,isPlaceholder:f,isResolved:a,onRequestClose:S,onMessageChange:g,onMessageSubmit:function(e){b(e),(0,eK.u4)(ry.AZ.MESSAGE_SENT,{replId:E,source:"threads",newThread:f})}})]})]})})},uV=function(e){function n(e,t){var r;return(0,eu._)(this,n),(r=(0,n7._)(this,n)).id=e,r.filePath=t,r}(0,n8._)(n,e);var t=n.prototype;return t.eq=function(e){return e.id===this.id},t.toDOM=function(e){var n=(0,tU.J)((0,y.Y)(uG,{threadId:this.id,view:e,filePath:this.filePath,openThreadsInbox:function(){return(0,t4.zw)(e.state,{pane:{type:"threadInbox"}})}}));n.className="cm-thread-portal-widget";var t=e.dom.querySelector(".cm-scroller"),r=e.dom.querySelector(".cm-gutters");return t&&r&&c6(n,t,r),n},t.ignoreEvent=function(){return!0},n}(eh.xO),uZ=function(e){function n(e,t){var r;return(0,eu._)(this,n),(r=(0,n7._)(this,n)).id=e,r.active=t,r}(0,n8._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this,t=(0,tU.J)((0,y.Y)(uy,{isOpen:this.active,threadId:this.id}));return t.className="cm-thread-indicator",t.style.display="inline",t.style.cursor="pointer",t.setAttribute("aria-hidden","true"),t.onclick=function(t){t.stopPropagation(),t.preventDefault(),e.dispatch({effects:[cH.Ky.of(e.state.field(cH.dg)===n.id?null:n.id)]})},t},t.eq=function(e){return e.id===this.id&&e.active===this.active},n}(ue),uj=(r={class:"cm-thread-indicator-gutter",markers:function(e){var n=e.state.field(cH.K1),t=e.state.field(cH.dg);return D.om.of(Object.values(n).filter(function(e){return e.indexEnd!==e.indexStart}).map(function(n){var r=e.state.doc.lineAt(Math.min(n.indexStart,n.indexEnd)).from;return new uZ(n.id,n.id===t).range(r)}),!0)},initialSpacer:function(){return new uZ("initial-spacer",!1)}},[function(e){var n=[ui];return n}(),ut.of((0,h._)({},{class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return D.om.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},r))]),uq=t(43303),uK=function(e,n,t,r,i){if(n===t)return null;var o=(0,g._)(r,2),a=o[0],l=o[1];return eh.NZ.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(n,t)},u$=new nF.k(function(e,n){return e?[D.Nb.highest(uj),cH.Am,cH.K1,cH.TW,cH.dg,eh.Lz.decorations.compute([cH.K1,cH.TW,cH.dg],function(e){var t=e.field(cH.K1),r=e.field(cH.TW),i=e.field(cH.dg),o=r||Object.values(t).find(function(e){return e.id===i});return eh.NZ.set((0,v._)(Object.values(t)).map(function(e){var t=o&&e.id===o.id;return uK(e.id,e.indexStart,e.indexEnd,n,t)}).filter(function(n){return null!==n&&n.from!==n.to&&n.from<=e.doc.length&&n.to<=e.doc.length}),!0)}),eh.Lz.decorations.compute([cH.K1,cH.TW,cH.dg,eg.Md],function(e){var n=e.field(cH.K1),t=e.field(cH.TW),r=e.field(cH.dg),i=e.facet(eg.Md);if(void 0===i)return eh.NZ.none;var o=(0,v._)(Object.values(n)).concat((0,v._)(t?[t]:[])).filter(Boolean).find(function(e){return e.id===r});return o?eh.NZ.set([eh.NZ.widget({widget:new uV(o.id,i),block:!0,side:1}).range(o.indexEnd)],!0):eh.NZ.none}),eh.Lz.updateListener.of(function(e){(0,ey.C)(e,a_.k,function(){var n=(0,v._)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),t=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(n.length&&t&&r){var i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;c6(c,t,r)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}})}),eh.Lz.updateListener.of(function(e){(0,ey.C)(e,cH.Mt,function(n){var t=n.value,r=e.state.field(cH.K1)[t];r&&e.view.dispatch({selection:{anchor:r.indexStart,head:r.indexStart},effects:[eh.Lz.scrollIntoView(r.indexStart,{x:"center",y:"center"})]})})})]:null}),uJ=t(64237);function uQ(e){var n=e.selection.main.head,t=e.doc.lineAt(n);return{offset:n,line:t.number,column:n-t.from+1}}var uX=new nF.k(function(e){return eh.Lz.focusChangeEffect.of(function(n,t){var r=n.facet(eg.Md);return r&&e(r,t?{type:"focus",position:uQ(n)}:{type:"blur"}),null})}),u0=new nF.k(function(e){return eh.Lz.updateListener.of(function(n){if(n.selectionSet){var t=n.state.facet(eg.Md);t&&e(t,{type:"update",hasFocus:n.view.hasFocus,position:uQ(n.state)})}})}),u1=t(63492),u2=new nF.k(function(){return(0,eh.BE)()}),u4=function(e){var n,t=(0,sN.A)((n=(0,ec._)(function(n){var t;return(0,ed.YH)(this,function(r){switch(r.label){case 0:return[4,n.status()];case 1:if((t=r.sent()).error)return[2,{error:t.error,isUnmerged:null}];if(t.changes.find(function(n){return n.path===e&&(n.type.index===sU.PX.UNMERGED||n.type.worktree===sU.PX.UNMERGED)}))return[2,{error:null,isUnmerged:!0}];return[2,{error:null,isUnmerged:!1}]}})}),function(e){return n.apply(this,arguments)}),[e]);return t||{error:null,isUnmerged:null}};function u5(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,b,S,Y,_,A,C,x,E,R,I,T,F,M,B,z,W,V,Z,j,$,J,Q,X,ee,en,et,er,ei,eo,ea,el,es,ep,ef,eD,eE,eR,eT,eP,eL,eU,eN,eM,eH,eB,ez,eW,eG,eV,eZ,ej,eq,e$,eJ,eQ,eX,e0,e1,e2,e4,e5,e3,e7,e6,e8,e9,ne,nn,nt,nr,ni,no,na,nl,ns,nc,nu,nd,np,nf,nh,nm,ng,nv=e.filePath,ny=e.isHidden,nw=e.isReadOnly,nS=e.isReadOnlyWhileAgentWorking,n_=e.deeplink,nA=e.onDeeplinkUpdated,nC=e.performPaneOperation,nk=(0,n2.A)(),nx=nk.fs,nD=nk.presence,nE=(0,O.g)("formatOnSave","rulers","minimapDisplay","showLeadingWhitespace","showEnclosedWhitespace","showTrailingWhitespace","showSelectedWhitespace").preferences,nF=(0,so.A)(),nU=nF.ref,nN=nF.view,nO=(0,w.useCallback)(function(e){return nC({operation:"open",pane:e,secondary:!0})},[nC]);(0,K.Hn)(nN);var nM=(0,q.eG)(),nH=aG.use(!!(null==nM?void 0:nM.match(/Chrome/i))&&!!(null==nM?void 0:nM.match(/Android/i))),nB="/replEnvironmentDesktop"===nI().pathname,nz=(0,w.useContext)(u1.IC),nW=(0,aV.gR)(),nG=(t=(n={path:nv,isHidden:ny}).path,r=n.isHidden,i=(0,uJ.EZ)(),o=uX.use(i),a=u0.use(i),(0,w.useEffect)(function(){i(t,{type:r?"hidden":"unhidden"})},[r,i,t]),(0,w.useEffect)(function(){return function(){i(t,{type:"unmount"})}},[i,t]),(0,w.useMemo)(function(){return[o,a]},[o,a])),nV=(c=(l={view:nN,presence:nD,fs:nx,filePath:nv,performPaneOperation:nC}).view,u=l.presence,d=l.fs,p=l.filePath,f=l.performPaneOperation,b=a9.use(p,d,u),S=aO.use(u),_=(Y={filePath:p,fs:d,performPaneOperation:f}).filePath,A=Y.fs,C=Y.performPaneOperation,x=(0,aZ.A)().trackTimeToLoadFileEnd,E=(0,aV.iO)(),R=(0,aV.jk)(),I=(0,aV.Qq)(),T=(0,aH.A)().showWarning,F=(0,w.useMemo)(function(){return{trackTimeToLoadFileEnd:x,throwBsod:E,setBsodFilePathVersion:R,deleteBsodFilePathVersion:I,showWarning:T,performPaneOperation:C}},[I,R,E,x,T,C]),M=a0.use(_,A,F),B=null==(s=(0,U.Vn)(c,ae.u))||s,z=(0,w.useMemo)(function(){return[M,b,S]},[M,b,S]),(0,w.useMemo)(function(){return{isLoading:B,extensions:z}},[B,z])),nj=nV.isLoading,nK=nV.extensions,n$=function(){var e=(0,sE.A)(),n=(0,w.useContext)(sD.H);if(!n)throw Error("Expected codemirror state to be in codemirror state context");return sP.use(e,n)}(),nQ=(V=(W={filePath:nv,isLoading:nj}).filePath,Z=W.isLoading,j=(0,n2.A)().fs,$=(0,nX.A)(V),J=(0,O.g)("acceptSuggestionOnCommitCharacter","codeIntelligence","codeActionsOnSave","semanticTokens").preferences,Q=(0,iY._P)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),X=Z||!J.codeIntelligence||!$.find(function(e){return e.isSupportedFile(V)}),ee=(0,w.useMemo)(function(){return new em.L(X?[]:function(e,n,t){if(!n.length)return[];var r,i,o,a,l,s,c,u=[(i=(r={lspClients:n,path:t}).lspClients,o=r.path,eh.Z9.define(function(e){var n,t,r,a,l,s;return t=(n={lspClients:i,path:o,view:e}).lspClients,r=n.path,a=n.view,l=(0,oz.A)(),s=function(e){var n,t=oG.get(e.clientId);return(null!=(n=null==t?void 0:t.get(r))?n:[])[0]===l},!function(){var e=!0,n=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var c,u=o.value,d=oG.get(u.clientId),p=null!=(c=null==d?void 0:d.get(r))?c:[];d?d.set(r,(0,v._)(p).concat([l])):oG.set(u.clientId,new Map([[r,[l]]])),u.notify.didOpen(r,a.state.doc.toString())}}catch(e){n=!0,i=e}finally{try{e||null==s.return||s.return()}finally{if(n)throw i}}}(),{id:l,destroy:function(){var e=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s,c=o.value,u=oG.get(c.clientId),d=(null!=(s=null==u?void 0:u.get(r))?s:[]).filter(function(e){return e!==l});c.getServerState()===oW.b.INITIALIZED&&c.isOpen(r)&&c.notify.didClose(r),0===d.length?null==u||u.delete(r):null==u||u.set(r,d)}}catch(e){n=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}},update:function(e){if(e.docChanged){var n=!0,i=!1,o=void 0;try{for(var a,l,c=t[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u,d=l.value;if(s(d)){var p=null==(u=d.getServerCapabilities())?void 0:u.textDocumentSync;if(p!==ix.TextDocumentSyncKind.None&&d.isOpen(r)){if(p===ix.TextDocumentSyncKind.Full){d.notify.didChange(r,[{text:e.view.state.doc.toString()}]);continue}a||(a=function(e,n){var t=[],r=n;return e.iterChanges(function(e,n,i,o,a){var l=a.sliceString(0),s=n-e,c=s+i;t.push({range:{start:(0,ew.Z3)(r,i),end:(0,ew.Z3)(r,c)},rangeLength:s,text:l}),r=r.replace(i,c,a)}),t}(e.changes,e.startState.doc)),d.notify.didChange(r,a)}}}}catch(e){i=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}}}}})),(0,L.E9)({lspClients:n,path:t}),function(e,n){function t(e){return(0,eS.A)(e).isTextDocumentSyncSupported}return eh.Z9.fromClass(function(){function r(e){(0,eu._)(this,r),this.dispose=this.listen(e.state.facet(eg.Md))}var i=r.prototype;return i.update=function(e){(0,em.$H)(e,eg.Md)&&(this.dispose=this.listen(e.state.facet(eg.Md)))},i.destroy=function(){this.dispose&&this.dispose()},i.listen=function(r){if((this.dispose&&this.dispose(),r)&&n.find(function(e){return t(e)}))return e.watchTextFile(r,{onFlush:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value;if(t(s))(0,eS.A)(s).isTextDocumentSyncSaveSupported&&s.isOpen(r)&&s.notify.didSave(r)}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},r}())}(e,n),[eA,ex,eh.Z9.fromClass(function(){function e(t){(0,eu._)(this,e);var r=this;this.abortControllers=[],this.getSymbolMap=(0,eb.A)((0,ec._)(function(){var e,i,o;return(0,ed.YH)(this,function(a){switch(a.label){case 0:if(!(e=t.state.facet(eg.Md)))return[2];return r.abortControllers=[],[4,Promise.all(n.map(function(n){if(!(0,eS.A)(n).isDocumentSymbolSupported)return null;var t=new AbortController;return r.abortControllers.push(t),function(e,n,t){return eC.apply(this,arguments)}(n,e,t.signal)}))];case 1:return i=a.sent(),t.dispatch({effects:e_.of(null!=(o=i.find(Boolean))?o:null)}),[2]}})}),{wait:200}),eY(t.state)&&this.getSymbolMap().catch(ek)}var t=e.prototype;return t.update=function(e){(0,em.$H)(e,"doc",ev.q)&&eY(e.state)&&(this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap().catch(ek))},t.destroy=function(){this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap.isScheduled()&&this.getSymbolMap.cancel()},e}())]];return(0,ik.isMobile)()?u:(u.push([od,oo,os,(0,iD.yU)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,rv.R)(e)?oi:""},addToOptions:[{render:function(e,n){if(!(0,rv.R)(n))return null;var t=(0,tU.J)((0,y.Y)("div",{className:ou,children:(0,y.Y)(ot.A,{size:"inherit",shortcut:{key:"⏎"}})}));return t.style.display="inline-flex",t},position:200}],override:n.map(function(e){return(0,iD.Ar)(["LineComment","BlockComment"],function(e){var n=.01>Math.random(),t=0,r=function(t,r,i){if(n&&r){var o=e.getLanguageId(r);return ic.vF.info("lsp:autocomplete:".concat(t),(0,h._)({languageId:o},i)),(0,eK.u4)(eK.AZ.LSP_COMPLETION_USED,(0,h._)({type:t,sampleRate:.01},i))}};function i(){return(i=(0,ec._)(function(n){var i,o,a,l,s,c,u,d,p,f;return(0,ed.YH)(this,function(w){switch(w.label){case 0:if(!(o=e.getServerCapabilities())||!(null==o?void 0:o.completionProvider)||!(a=function(e,n){var t=e.state,r=e.pos;if(e.explicit)return{triggerKind:ix.CompletionTriggerKind.Invoked};var i=t.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);return(null==n?void 0:n.includes(o))?{triggerKind:ix.CompletionTriggerKind.TriggerCharacter,triggerCharacter:o}:a.match(/\w$/)?{triggerKind:ix.CompletionTriggerKind.Invoked}:null}(n,(null==o||null==(i=o.completionProvider)?void 0:i.triggerCharacters)||[])))return[2,null];if(t&&e.notify.cancelRequest(t),!(l=n.state.facet(eg.Md)))throw Error("path not found");return t=e.generateId(),s=n.state.doc,[4,e.request.completion(l,(0,ew.Z3)(s,n.pos),a,{id:t})];case 1:if("error"in(c=w.sent())||(u=c.result,n.aborted||!u))return[2,null];return d=Array.isArray(u)?u:u.items,f=Array.isArray(u)?{}:null!=(p=u.itemDefaults)?p:{},[2,function(e){for(var n,t=e.context,r=e.items,i=e.itemDefaults,o=e.client,a=e.trackCompletion,l=e.startingDoc,s=null,c=function(){return s},u=(I=r.filter(function(e){return!!e.label}),T=["label","kind"],F=new Set,I.filter(function(e){var n=T.map(function(n){return e[n]}).join("␞");return!F.has(n)&&(F.add(n),!0)})).map(function(e){return{item:e,label:e.label,filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()}}),d=((u=u.sort(function(e,n){return e.sortText<n.sortText?-1:+(e.sortText>n.sortText)})).length%2?u.length-1:u.length)/2,p=0;p<=d;p++){if(0===p&&u[d]){u[d].boost=0;continue}var f=u[d-p];if(f){var w=u[d-p+1],b=w.sortText,S=w.boost,Y=void 0===S?0:S;f.boost=f.sortText===b?Y:Y+1}var _=u[d+p];if(_){var A=u[d+p-1],C=A.sortText,k=A.boost,x=void 0===k?0:k;_.boost=_.sortText===C?x:x-1}}var E=null!=(U=null==(P=u[0])?void 0:P.boost)?U:0,R=null!=(N=null==(L=u[u.length-1])?void 0:L.boost)?N:0;if(E>99||R<-99)for(var I,T,F,P,L,U,N,O,M=99/Math.max(Math.abs(E),Math.abs(R)),H=0;H<u.length;H++)u[H].boost=(null!=(O=u[H].boost)?O:0)*M;var B=(0,g._)(function(e){var n=Object.create(null),t=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value.filterText;n[s[0]]=!0;for(var c=1;c<s.length;c++)t[s[c]]=!0}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=oc(n)+oc(t)+"*$";return[RegExp("^"+u),new RegExp(u)]}(u),2),z=B[0],W=B[1],G=t.matchBefore(W),V=t.pos;function Z(e,n){var t,r,s,u,d,p,f,w,b,S,Y,_,A,C;return b=n.state.facet(eg.Md),S=null!=(d=(0,iE.A)(n.state))?d:"unknown",Y=(0,eS.A)(o),_=e.item,A=e.boost,C={label:_.label,detail:Y.isCompletionLabelDetailsSupported?null==(t=_.labelDetails)?void 0:t.description:_.detail,type:null==(r=Object.entries(eI.CompletionItemKind).find(function(e){var n=(0,g._)(e,2),t=(n[0],n[1]);return _.kind===t}))?void 0:r[0].toLowerCase(),commitCharacters:n.state.facet(iR)?null!=(w=null!=(f=null!=(p=_.commitCharacters)?p:i.commitCharacters)?f:null==(u=o.getServerCapabilities())||null==(s=u.completionProvider)?void 0:s.allCommitCharacters)?w:[]:void 0,boost:A},oe.set(C,e),C.apply=function(n,t,r,i){var s=function(e){var t=u?l:n.state.doc,r={from:(0,ew.TU)(t,e.start),to:(0,ew.TU)(t,e.end)};return u&&(r.from=u.mapPos(r.from),r.to=u.mapPos(r.to)),r};if(b){var u=c(),d=null!=(f=null==(p=e.resolved)?void 0:p.additionalTextEdits)?f:_.additionalTextEdits;if(_.insertTextFormat===eI.InsertTextFormat.Snippet){var p,f,y,w,Y,A=null;d&&(A={changes:d.map(function(e){return(0,m._)((0,h._)({},s(e.range)),{insert:e.newText})})});var C=new ij(null!=(Y=null!=(w=null==(y=_.textEdit)?void 0:y.newText)?w:_.insertText)?Y:_.label);if(_.textEdit&&"range"in _.textEdit){var k=i,x=s(_.textEdit.range);r=x.from,i=Math.max(i=x.to,k)}var E=A?[A,C.apply({view:n,from:r,to:i,path:b,completion:t})]:[C.apply({view:n,from:r,to:i,path:b,completion:t})];n.dispatch.apply(n,(0,v._)(E)),a("completion-accepted",b,{language:S,completionKind:_.kind,insertTextFormat:_.insertTextFormat});return}var R=[];if(_.textEdit){if(!("range"in _.textEdit))return;var I=s(_.textEdit.range);R.push((0,m._)((0,h._)({},I),{to:Math.max(I.to,n.state.selection.main.to),insert:_.textEdit.newText}))}else{var T=_.insertText||_.label,F=n.state.wordAt(i);F&&F.to>i&&T.includes(n.state.doc.sliceString(i,F.to))&&(i=F.to),R.push({from:r,to:i,insert:T})}var P=(0,g._)(R,1)[0],L="";null==d||d.forEach(function(e){var n=s(e.range);"from"in P&&n.from===P.from&&(L=e.newText),R.push((0,m._)((0,h._)({},n),{insert:e.newText}))});var U=i-r;n.state.selection.ranges.forEach(function(e){if(e!==n.state.selection.main){if(!("insert"in P)||!P.insert)throw Error("Expected insert in mainChange");var t=e.from-U,r=L+P.insert;R.push({from:t,to:e.to,insert:r})}});var N=D.VR.of(R.map(function(e){return"from"in e&&void 0!==e.to?(0,m._)((0,h._)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e}),n.state.doc.length);a("completion-accepted",b,{language:S,completionKind:_.kind,insertTextFormat:_.insertTextFormat}),n.dispatch({annotations:iD.rK.of(t),changes:N,selection:D.OF.create(n.state.selection.ranges.map(function(e){return e.map(N,0)}),n.state.selection.mainIndex)}),_.command&&o.request.executeCommand(_.command.command,_.command.arguments)}},Y.isCompletionItemResolveSupported&&(C.info=(0,ec._)(function(){var n,t,r,i,l,s,c;return(0,ed.YH)(this,function(u){switch(u.label){case 0:if(t=null!=(n=e.resolved)?n:null)return[3,2];return[4,o.request.resolveCompletionItem(_)];case 1:if(t="result"in(r=u.sent())?r.result:null,r.cancelled||null===t)return[2,null];e.resolved=t,u.label=2;case 2:if(i=Math.floor(0x7fffffff*Math.random()),l=[],b&&t.detail&&t.detail!==_.detail&&t.detail!==_.label&&(c=["```"+((s=b.lastIndexOf("."))>=0?b.slice(s+1):"md"),t.detail,"```"].join("\n"),l.push((0,y.Y)(i9,{className:t.documentation?"lsp-completion-detail":void 0,content:{value:c,kind:"markdown"}},"".concat(i,"-detail")))),t.documentation&&l.push((0,y.Y)(i9,{content:t.documentation},"".concat(i,"-documentation"))),0===l.length)return[2,null];return a("resolution-presented",b,{language:S,resolutionSource:"request",completionKind:_.kind}),[2,{dom:(0,tU.J)((0,y.Y)("div",{children:l}))}]}})})),C}return G&&(V=G.from),u.length&&a("completion-options-presented",t.state.facet(eg.Md),{language:null!=(n=(0,iE.A)(t.state))?n:"unknown"}),{from:V,options:u.map(function(e){return Z(e,t)}),validFor:z,update:function(e,n,t,r){return(0,m._)((0,h._)({},e),{options:e.options.map(function(e){var n,t=null!=(n=oe.get(e))?n:null;return t?Z(t,r):e})})},map:function(e,n){return s=s?s.composeDesc(n):n,e}}}({context:n,startingDoc:s,items:d,itemDefaults:f,client:e,trackCompletion:r})]}})})).apply(this,arguments)}return function(e){return i.apply(this,arguments)}}(e))})})],function(e){var n={current:new Map};function t(){return(t=(0,ec._)(function(t,i){var o,a,l,s,c,u;return(0,ed.YH)(this,function(d){switch(d.label){case 0:if(!(a=t.facet(eg.Md))||(l=t.field(r,!1),s=t.field(oO,!1),!(c=e.filter(function(e){var n,t,r,i=null!=(r=null==(t=e.getServerCapabilities())||null==(n=t.signatureHelpProvider)?void 0:n.triggerCharacters)?r:[];return!!i.length&&(!!l||!!s&&!!i.includes(s))&&!0})).length))return[2,null];return[4,function(e,n,t,r,i){return oB.apply(this,arguments)}(t,i,c,a,n)];case 1:if(!(null==(u=d.sent())||null==(o=u.signatures)?void 0:o.length))return[2,null];return[2,u]}})})).apply(this,arguments)}var r=D.sU.define({create:function(){return null},update:function(e,n){return n.isUserEvent("select.pointer")?null:(e&&n.newSelection.main.from!==e.pos&&(e=(0,m._)((0,h._)({},e),{pos:n.newSelection.main.from})),(0,ey.C)(n,oU.effect,function(t){var r=t.value;e=r?{pos:n.newSelection.main.from,help:r,index:0}:null}),(0,ey.C)(n,oN,function(n){var t=n.value;if(e){var r=e.help.signatures.length,i=(r+e.index+t)%r;e=i>=e.help.signatures.length||i<0?null:(0,m._)((0,h._)({},e),{index:i})}}),e)},provide:function(e){var n=function(n){var t=n.state.field(e);if(!t)throw Error("expected nonnull field");var r=oM.create({help:t.help,index:t.index});return{dom:r,update:function(n){oM.update(r,function(r){var i=n.state.field(e);return i&&i!==t?{help:i.help,index:i.index}:r})}}};return eh.DK.compute([e],function(t){var r=t.field(e);return r?{pos:r.pos,create:n,above:!0}:null})}}),i=eh.Z9.define(function(){var n,r=G()((n=(0,ec._)(function(e){var n,r,i;return(0,ed.YH)(this,function(o){switch(o.label){case 0:if(!(n=e.state.selection.main).empty)return[3,2];return r=e.state.field(oU.state,!1),[4,function(e,n){return t.apply(this,arguments)}(e.state,n.from)];case 1:(i=o.sent())&&!r&&(0,iD.N)(e),e.dispatch({effects:oU.effect.of(i)}),o.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)}),0);return{update:function(n){e.some(function(e){return(0,eS.A)(e).isSignatureHelpSupported})&&n.selectionSet&&n.state.selection.main.empty&&r(n.view)}}});function o(e,n){var t=e.state.field(oU.state,!1);return"active"!==(0,iD.DH)(e.state)&&null!=t&&("navigate"!==n||t.signatures.length>1)}var a=function(e){return function(n){return!!o(n,"navigate")&&(n.dispatch({effects:oN.of(e)}),!0)}},l=[{key:"ArrowDown",run:a(1)},{key:"ArrowUp",run:a(-1)},{key:"Escape",run:function(e){return!!o(e,"dismiss")&&(e.dispatch({effects:oU.effect.of(null)}),!0)}}];return[r,oU.state,oO,i,D.Nb.high(eh.w4.of(l))]}(n),(a=function(e){var n,t=null;return(0,eh.Ux)((n=(0,ec._)(function(n,r){var i,o,a,l,s,c;return(0,ed.YH)(this,function(u){switch(u.label){case 0:if(n.state.facet(oF.f)||!(0,eS.A)(e).isHoverSupported||!(i=n.state.facet(eg.Md)))return[2,null];o=(0,ew.Z3)(n.state.doc,r);try{a=n.state.wordAt(r)}catch(e){return[2,null]}if(t){if(t.from===(null==a?void 0:a.from)&&t.to===(null==a?void 0:a.to))return[2,null];e.notify.cancelRequest(t.id)}return t={id:l=e.generateId(),from:null==a?void 0:a.from,to:null==a?void 0:a.to},[4,e.request.hover(i,o,{id:l})];case 1:if(s=u.sent(),t=null,"error"in s||null===(c=s.result))return[2,null];return[2,function(e){var n,t,r=e.hover,i=e.state,o=e.offset;if((Array.isArray(r.contents)||"string"==typeof r.contents)&&0===r.contents.length)return null;var a="",l=i.doc;if(r.range)n=(0,ew.TU)(l,r.range.start),t=(0,ew.TU)(l,r.range.end),a=l.sliceString(n,t);else if(t=void 0,(n=o)<=i.doc.length){var s=i.wordAt(n);s?(a=l.sliceString(s.from,s.to),n=Math.min(n,s.from),t=s.to):a=l.sliceString(n,n+1)}return{pos:n,end:t,create:function(e){var n=(0,tU.J)((0,y.Y)(oT,{content:r.contents,textHovered:a}));return n.classList.add("hover-tooltip"),n.style.padding="0",{dom:n,mount:function(){var n;n=function(){(0,eh.Pq)(e)},[0,50,200,1e3].forEach(function(e){return setTimeout(n,e)})}}},above:!0}}({hover:c,offset:r,state:n.state})]}})}),function(e,t){return n.apply(this,arguments)}),{hideOn:function(e){return!e.annotation(D.ZX.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select")||e.state.facet(oF.f))},hoverTime:0})},[D.Nb.highest(n.map(function(e){return a(e)})),eh.Lz.domEventObservers({mousedown:function(e,n){!(e.target instanceof HTMLElement&&e.target.matches(".cm-tooltip *"))&&(0,eh.n6)(n.state)&&n.dispatch({effects:eh.vo})},keydown:function(e,n){"Escape"===e.key&&(0,eh.n6)(n.state)&&n.dispatch({effects:eh.vo})},scroll:function(e,n){(0,eh.n6)(n.state)&&n.dispatch({effects:eh.vo})}})]),(0,op.Qb)(n,e),(0,oP.Of)({lspClients:n}),(l=D.Pe.define(),s=D.Pe.define(),[eh.Lz.updateListener.of((c=(0,ec._)(function(e){var t,r,i,o,a,c,u,d,p,f,g,y,w,b,S,Y,_,A,C,k,x,D,E,R,I,T,F,P,L,U,N,O,M;return(0,ed.YH)(this,function(H){switch(H.label){case 0:if(!n.some(function(e){var n=(0,eS.A)(e);return n.isFindReferencesSupported||n.isFindDefinitionSupported}))return[2];t=null,r=!0,i=!1,o=void 0;try{for(a=e.transactions[Symbol.iterator]();!(r=(c=a.next()).done);r=!0){u=c.value,d=!0,p=!1,f=void 0;try{for(g=u.effects[Symbol.iterator]();!(d=(y=g.next()).done);d=!0)(w=y.value).is(oh.x)&&(t=w.value)}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(!t||!(b=e.view.state.facet(eg.Md)))return[2];S=e.state.doc,Y=(0,ew.Z3)(S,t),_=[],A=!0,C=!1,k=void 0;try{for(x=function(){var e=E.value,n=(0,eS.A)(e);n.isFindDefinitionSupported&&_.push(e.request.findDefinitions(b,Y).then(function(n){return{client:e,response:n,type:"definition"}})),n.isFindReferencesSupported&&_.push(e.request.findReferences(b,Y,{includeDeclaration:!1}).then(function(n){return{client:e,response:n,type:"references"}}))},D=n[Symbol.iterator]();!(A=(E=D.next()).done);A=!0)x()}catch(e){C=!0,k=e}finally{try{A||null==D.return||D.return()}finally{if(C)throw k}}return R=Promise.all(_),(0,of.o8)(e.view,R),[4,R];case 1:I=H.sent(),T=[],F=[],P=!0,L=!1,U=void 0;try{for(N=function(){var e=M.value,n=e.client,t=e.response,r=e.type;if("error"in t)throw Error("Something went wrong fetching references: ".concat(t.error.message));var i=(0,oR.U)(t.result);if(!i)return"continue";"definition"===r&&T.push.apply(T,(0,v._)(i.map(function(e){return(0,m._)((0,h._)({},e),{path:n.documentUriToPath(e.uri)})}))),"references"===r&&F.push.apply(F,(0,v._)(i.map(function(e){return(0,m._)((0,h._)({},e),{path:n.documentUriToPath(e.uri)})})))},O=I[Symbol.iterator]();!(P=(M=O.next()).done);P=!0)N()}catch(e){L=!0,U=e}finally{try{P||null==O.return||O.return()}finally{if(L)throw U}}if(!T.length&&!F.length)return(0,nT.A)(e.view,{message:"No references found",offset:t}),e.view.dispatch({effects:s.of(null)}),[2];return e.view.dispatch({effects:l.of({references:F,definitions:T})}),[2]}})}),function(e){return c.apply(this,arguments)})),D.sU.define({create:function(){return null},update:function(e,n){var t=e,r=!0,i=!1,o=void 0;try{for(var a,c=n.effects[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var u=a.value;u.is(l)&&(t=u.value),u.is(s)&&(t=null)}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t},provide:function(e){return[eh.w4.of([{key:"Escape",run:function(n){return!!n.state.field(e)&&(n.dispatch({effects:s.of(null)}),!0)}}]),eh.DK.compute([e],function(n){var t=n.field(e),r=n.facet(eg.Md);if(!t)return null;var i=n.selection.asSingle().main;return{pos:i.from,end:i.to,create:function(e){var n=(0,tU.J)((0,y.Y)("div",{children:(0,y.Y)(ox,(0,m._)((0,h._)({},t),{onClose:function(){e.dispatch({effects:s.of(null)})},jumpToPosition:function(n){if(n.path!==r)return void(0,t4.Tq)(e.state,{path:n,secondary:!1});var t=n.line,i=n.col;(0,iA.$)({view:e,line:t,col:i}),e.focus()}}))}));return n.classList.add("replit-tooltip"),n.style.padding="0",n.style.overflow="scroll",{dom:n}}}})]}})]),(0,oL.q)(e,n)),u)}(j,$,V))},[$,V,j,X]),en=(0,w.useMemo)(function(){return new em.L(function(){return ev.X.of($.map(function(e){return(0,eS.A)(e)}))})},[$]),(0,w.useEffect)(function(){return!$.length||X?ee.set(null):(0,n0.xW)($.map(function(e){return e.onServerCapabilitiesChange(function(){en.set(ev.X.of($.map(function(e){return(0,eS.A)(e)})))})}))},[en,$,ee,X]),[en.extension,ee.extension,o4.use(J.acceptSuggestionOnCommitCharacter),o5.use(J.codeActionsOnSave),o3.use(J.codeIntelligence),o2.use(J.semanticTokens&&Q?$:null)]);(0,iA.A)({filePath:nv,view:nN,isLoading:nj,deeplink:n_,onDeeplinkUpdated:nA});var n3=(er=(et={view:nN,filePath:nv}).view,ei=et.filePath,eo=(0,n2.A)().fs,(0,g._)((0,c0.H)({accept:[c2.N.Code,c1.FILE],drop:function(e,n){if(er){var t=n.getClientOffset(),r=t?er.posAtCoords(t):null;if(null!==r){var i=function(e){er.focus(),er.dispatch({changes:{from:r,insert:e},selection:{anchor:r,head:r+e.length}})};if(e.type===c2.N.Code)i(e.code);else{var o=!0,a=!1,l=void 0;try{for(var s,c=e.files[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;ei&&(0,N.e$)(ei)&&ll(u,eo,ei).then(i)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}}}}),2)[1]),n7=(0,n5.A)({filePath:nv}),n6=(el=(ea={view:nN,filePath:nv,isLoading:nj,enable:nB}).view,es=ea.filePath,ep=ea.isLoading,ef=ea.enable,eD=(0,uR.Ln)(),(0,w.useEffect)(function(){el&&eD&&el.dispatch({effects:[cH.Ky.of(eD),cH.Mt.of(eD)]})},[el,eD]),eE=(0,uq.D)().theme,eT=(eR=(0,g._)((0,w.useState)([eF.LU.accentPrimaryDimmest,eF.LU.accentPrimaryDimmer]),2))[0],eP=eR[1],(0,w.useEffect)(function(){var e=c7(eE.values.global.accentPrimaryDimmest);eP(["rgba(".concat(e.join(","),", 0.5)"),eF.LU.accentPrimaryDimmer])},[eE]),eL=c9(es,ep,!0,ef),eU=(0,n2.A)().fs,eM=(eN=(0,c3.ah)(es)).contentRef,eH=eN.loadedFile,eB=eN.transformSelectionRef,(0,w.useEffect)(function(){var e=!1,n=eB.current,t=eM.current;if(eH&&n&&t&&!ep&&el){var r=Object.values(eL);if(0===r.length)return void el.dispatch({effects:cH.IF.of({})});Promise.all(r.map(function(e){return(0,c3.gu)({anchor:e,version:eU.getOTVersion(es),transformSelection:n,content:t})})).then(function(n){if(!e){var t=n.filter(function(e){return!!e}).map(function(e){if(!e)throw Error("expected resolved anchor");return(0,h._)({},e.anchor,null==e?void 0:e.newSelection)});return el.dispatch({effects:cH.IF.of(t.reduce(function(e,n){return e[n.id]=n,e},{}))}),function(){e=!0,el&&el.dispatch({effects:cH.IF.of({})})}}})}},[eL,el,eH,eU,eB,eM,es,ep]),u$.use(ef,eT));eG=(ez={view:nN,filePath:nv}).view,eV=ez.filePath,eZ=(0,nR.useRouter)(),ej=(0,H.Po)(eZ),eq=(0,w.useRef)({revisionId:(0,oz.A)(),textEditorState:sz(eV),hasGhostwriterSuggestion:!1}),e$=(0,w.useRef)(eV),eJ=null!=(eW=null==eG?void 0:eG.plugin(U.Pb))?eW:null,(0,w.useEffect)(function(){if(ej&&eG&&eJ&&!eJ.destroyed){var e=function(e){sG(eq.current,e.messageId)},n=function(n){sq(eV,e$.current,eG,eq.current,n)?e(n):(0,sH.Cf)(n.messageId)},t=function(n){sq(eV,e$.current,eG,eq.current,n)?e(n):(0,sH.Cf)(n.messageId)},r=function(r){try{var i=r.data;if(!(0,sM.F5)(i)||i.protocolVersion!==sM.V2)return;var o=i.payload;i.messageDirection===sM.SU.TO_NATIVE&&(0,sM.Yf)(o)&&(e$.current=o.activePaneFilePath),(0,sH.Vd)(r,function(r){var o=r.type;switch(o){case sM.tF.TEXT_EDITOR_STATE_REQUEST:e(i);break;case sM.tF.REQUEST_SET_SELECTION:case sM.tF.REQUEST_REPLACE_SELECTION:case sM.tF.REQUEST_SET_TEXT:case sM.tF.REQUEST_INSERT_TEXT:case sM.tF.REQUEST_PASTE_TEXT:n(i);break;case sM.tF.TEXT_EDITOR_REQUEST_ACTION:t(i);break;default:(0,sO.A)(o)}})}catch(e){throw Error("Invalid message: ".concat(e))}};window.addEventListener("message",r),eq.current={revisionId:(0,oz.A)(),textEditorState:sW(eV,eG),hasGhostwriterSuggestion:(0,rv.R)(eG.state)},sG(eq.current);var i=!1,o=!1,a=eJ.bind({changed:function(e){var n;return e.docChanged?(i=!0,!0):!!e.selectionSet||!!e.focusChanged||(null==(n=eq.current)?void 0:n.hasGhostwriterSuggestion)!==(0,rv.R)(e.state)},callback:function(){var e=i?(0,oz.A)():eq.current.revisionId;i=!1,eq.current={revisionId:e,textEditorState:sW(eV,eG),hasGhostwriterSuggestion:(0,rv.R)(eG.state)},sG(eq.current)},destroy:function(){window.removeEventListener("message",r),o||(sV(eV),o=!0)}});return function(){window.removeEventListener("message",r),a(),o||(sV(eV),o=!0)}}},[eG,eV,ej,eJ]);var n8=u4(nv).isUnmerged,n9=(eX=(eQ={filePath:nv,enableConflicts:!0===n8}).filePath,e0=eQ.enableConflicts,e1=(0,iY._P)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),e2=(0,n2.A)().git,i_.use(e2,void 0===eX?null:eX,!(void 0!==e0&&e0)||!e1)),te=(0,H.m5)(),tn=l9.use(te),tt=lu.use(nx),tr=l3.use(te),ti=su.use(nE.rulers),to=(0,uq.D)(),ta=o9.use(te,nE.minimapDisplay,to),tl=sp.use(te,to),ts=k.EI.use(),tc=(e4={filePath:nv},e5=(0,n2.A)().container,e3=(0,nJ.I)(),e7=(0,O.g)("codeIntelligence").preferences,e8=n1(e6=(0,nX.A)(e4.filePath)),n4.use(e3,e5,e6,e8,e7.codeIntelligence,e4.filePath)),tu=nZ.use(nE.showLeadingWhitespace,nE.showEnclosedWhitespace,nE.showTrailingWhitespace,nE.showSelectedWhitespace),td=(0,nL.T)({analyticsSurface:"workspace_editor"}),tp=cv({path:nv}),tf=cw({path:nv}),th=cy({path:nv}),tm=(0,w.useCallback)(function(){nN&&tp(nN,"shortcut")},[nN,tp]),tg=(no=(e9={isMobile:te,generateCode:tp,filePath:nv}).isMobile,na=e9.filePath,nl=e9.generateCode,ns=(0,rS.Jn)(rw.G.id),nc=null!=(nr=null==(ne=nq.Jh.from(na))?void 0:ne.id)?nr:null,nu=(0,rO.f)().isTeamWithAiDisabled,np=(null!=(ni=null==(nd=cD({variables:{language:nc},skip:!nc}).data)||null==(nt=nd.languageExamples)||null==(nn=nt.examples)?void 0:nn.length)?ni:0)>=1,nf=(0,w.useMemo)(function(){var e=[];return(0,N.e$)(na)||nu||e.push({icon:(0,y.Y)(cc.A,{}),text:"Generate Code with AI",shortcut:no?void 0:ns,onClick:function(e){cq({cta:"generate",version:"new"}),nl(e,"shortcut")}}),nc&&np&&e.push({icon:(0,y.Y)(ch.A,{}),text:"Start with a code example",onClick:function(e){cq({cta:"examples",version:"new"}),e.dispatch({effects:cK.of({language:nc,filePath:na})})}}),e.push({icon:(0,y.Y)(cj.A,{}),text:"Add powerful Integrations",onClick:function(e){(0,t4.zw)(e.state,{pane:{type:"integrations"},secondary:!0}),cq({cta:"integrations",version:"new"}),(0,eK.u4)(eK.AZ.TOOL_OPENED,{source:"fileEditorEmptyState",tool:"integrations"})}}),e},[na,nu,nc,np,no,ns,nl]),[cV.use(nf),cQ]),tv=(nh=({onGenerateCode:tm,onReplyInChat:(0,w.useCallback)(function(){nO({type:"ghostwriterChat"})},[nO])}).onGenerateCode,nm=(0,rO.f)().isTeamWithAiDisabled,ng=rk.use(nh),(0,w.useMemo)(function(){var e=[rB,tW.z,tW.Q,rz,rW,tZ,rG,tJ,rV,ng];return nm||e.push(ng),e},[ng,nm])),ty=(0,c5.EF)(),tw=ty.onContextMenu,tb=ty.closeContextMenu,tS=ty.openContextMenu,tY=ty.isVisible,t_=(0,w.useCallback)(function(e){nN&&(0,eh.TS)(nN,e,"context-menu")&&(tb(),e.stopPropagation(),e.preventDefault())},[tb,nN]),tA=function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,b=e.path,S=e.view,Y=(n=cv({path:b}),t=cy({path:b}),r=cw({path:b}),i=(0,rS.Jn)(rw.G.id),(0,w.useCallback)(function(e){var o=[],a=!e.state.selection.main.empty;return n&&!a&&o.push(cm({label:"Generate with "+rT.BP,icon:(0,y.Y)(cc.A,{color:eF.LU.tealStronger}),keyboardShortcut:i,run:function(){n(e,"action_menu")},dataCy:"context-menu-GenerateCode"})),a&&(o.push(cm({label:"Explain with "+rT.BP,icon:(0,y.Y)(cs.A,{color:eF.LU.tealStronger}),dataCy:"context-menu-ExplainCode",run:function(){r(e,"action_menu")}})),o.push(cm({label:"Modify with "+rT.BP,icon:(0,y.Y)(cl,{color:eF.LU.tealStronger}),keyboardShortcut:i,dataCy:"context-menu-TransformCode",run:function(){t(e,"action_menu")}}))),o},[n,t,r,i])),_=(o=(0,rS.Jn)("editor.action.startThread"),(0,w.useCallback)(function(e){var n=[];return n.push(cm({label:"Start thread",icon:(0,y.Y)(t6.A,{}),keyboardShortcut:o,run:function(){(0,s0.B)(e)}})),n},[o])),A=(0,w.useCallback)(function(e){var n=[cm({label:"Copy link to position",icon:(0,y.Y)(cd.A,{}),run:function(){var n=(0,ew.Z3)(e.state.doc,e.state.selection.main.head),t=n.line,r=n.character,i=(0,s6.Ax)({path:b,line:t+1,col:r});(0,sX.default)(i)}}),cm({label:"Copy",icon:(0,y.Y)(cr.A,{}),keyboardShortcut:(0,s7.FM)({cmdOrCtrl:!0,key:"c"}),run:function(){var n=(0,sJ.i)(e.state).text;(0,sX.default)(n)}}),cm({label:"Cut",icon:(0,y.Y)(ci,{}),keyboardShortcut:(0,s7.FM)({cmdOrCtrl:!0,key:"x"}),run:function(){var n=(0,sJ.i)(e.state),t=n.text,r=n.ranges;(0,sX.default)(t),e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}})];return window.navigator.clipboard&&"readText"in window.navigator.clipboard&&n.push(cm({label:"Paste",icon:(0,y.Y)(cn.A,{}),keyboardShortcut:(0,s7.FM)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,ec._)(function(){var n,t;return(0,ed.YH)(this,function(r){switch(r.label){case 0:n="",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return n=r.sent(),[3,4];case 3:return t=r.sent(),ic.vF.error("CodeMirror context menu paste failed",{message:t.message}),[2];case 4:return ls({filePath:b,view:e,clipboardText:n}),[2]}})})()}})),n},[b]),C=(l=n1(a=(0,nX.A)(b)),s=(0,rS.Jn)("editor.action.goToDefinition"),c=(0,rS.Jn)("editor.action.goToTypeDefinition"),u=(0,rS.Jn)("editor.action.goToImplementation"),d=(0,rS.Jn)("editor.action.goToReferences"),p=(0,rS.Jn)("editor.selection.allOccurrences"),f=(0,rS.Jn)("editor.action.sourceActions"),h=(0,rS.Jn)("editor.action.formatDocument"),m=(0,rS.Jn)("editor.action.codeActions"),g=(0,rS.Jn)("editor.action.renameSymbol"),(0,w.useCallback)(function(e){var n=[],t=l&&a.length;return t&&l.isFindDefinitionSupported&&n.push(cm({label:"Go to definition",icon:(0,y.Y)(ca.A,{}),dataCy:"context-menu-JumpToDefinition",run:function(n){(0,oP.Fn)(e,n)},keyboardShortcut:s})),t&&l.isFindTypeDefinitionSupported&&n.push(cm({label:"Go to type definition",icon:(0,y.Y)(ce.A,{}),run:function(){(0,oP.fS)(e)},keyboardShortcut:c})),t&&l.isFindImplementationSupported&&n.push(cm({label:"Go to implementation",icon:(0,y.Y)(ch.A,{}),run:function(){(0,oP.M9)(e)},keyboardShortcut:u})),t&&(l.isFindDefinitionSupported||l.isFindReferencesSupported)&&n.push(cm({label:"Show references",icon:(0,y.Y)(s9,{}),keyboardShortcut:d,run:function(){(0,oh.y)(e)}})),n.push(cm({label:"Find in Repl",icon:(0,y.Y)(cf.A,{}),run:function(){var n=(0,sJ.i)(e.state).text;(0,t4.zw)(e.state,{pane:{type:"searchReplace",data:{initialQuery:n}}})}})),t&&l.isRenameSupported&&n.push(cm({label:"Rename all occurrences",icon:(0,y.Y)(co.A,{}),keyboardShortcut:g,run:function(){(0,oL.C)(e)}})),e.state.facet(k.hb)&&n.push(cm({label:"Format document",icon:(0,y.Y)(nY.A,{}),keyboardShortcut:h,run:function(){(0,k.BD)(e)}})),!e.state.selection.main.empty&&e.state.facet(s$.Aq)&&n.push(cm({label:"Format selection",icon:(0,y.Y)(nY.A,{}),run:function(){(0,k.vl)(e)}})),n.push(cm({label:"Select all occurrences",icon:(0,y.Y)(ct,{}),keyboardShortcut:p,run:function(){(0,s0.G)(e)}})),t&&l.isCodeActionsSupported&&(l.isSourceActionsSupported&&n.push(cm({label:"Source actions",icon:(0,y.Y)(eO.A,{}),keyboardShortcut:f,run:function(){(0,op._H)(e)}})),n.push(cm({label:"More actions",icon:(0,y.Y)(cu.A,{}),keyboardShortcut:m,run:function(){(0,op.w1)(e,{force:!0})}}))),n},[l,a,p,f,s,c,u,d,g,h,m])),x=(v=(0,s5.Zp)(s3.P.EditorContextMenu),(0,w.useCallback)(function(e){var n=[];return n.push({data:{type:"group",key:"extensions"},commands:(0,ec._)(function(){var n;return(0,ed.YH)(this,function(t){switch(t.label){case 0:var r;return n=[{data:{filePath:e.filePath,selection:e.view.state.selection.toJSON()}}],[4,Promise.all(v.map((r=(0,ec._)(function(e){var t;return(0,ed.YH)(this,function(r){switch(r.label){case 0:return[4,e.create({path:n})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,s4.l)(t,{path:n})]}})}),function(e){return r.apply(this,arguments)})))];case 1:return[2,t.sent().filter(Boolean)]}})})}),n},[v]));return(0,w.useCallback)(function(){var e=S?[{data:{type:"context",label:rT.BP,icon:(0,y.Y)(s8.A,{})},commands:function(){return Y(S)}},{data:{type:"context",label:"Code actions",icon:(0,y.Y)(cu.A,{})},commands:function(){return C(S)}},{data:{type:"context",label:"Social",icon:(0,y.Y)(t6.A,{})},commands:function(){return _(S)}},{data:{type:"context",label:"Clipboard",icon:(0,y.Y)(cn.A,{})},commands:function(){return A(S)}},{data:{type:"context",label:"Extensions",icon:(0,y.Y)(cp.A,{})},commands:function(){return x({view:S,filePath:b})}}]:[];return{data:{type:"context",label:"Search actions",icon:(0,y.Y)(cf.A,{})},commands:function(){return e}}},[S,Y,C,_,A,b,x])}({path:nv,view:nN}),tC=(0,w.useCallback)(function(e){tw(e,{command:tA(),width:275,onKeyDownHandler:t_})},[tA,tw,t_]),tk=(0,w.useCallback)(function(e,n){tS({target:e,command:[tA(),n],width:275,onKeyDownHandler:t_})},[tA,t_,tS]),tx=cb.use(te,tY,tC),tD=cS.a.use(tk),tE=(0,w.useCallback)(function(e){tS({target:{x:e.right-275,y:e.top},width:275,command:tA(),onKeyDownHandler:t_})},[tA,t_,tS]),tR=(0,rw.C)({editCode:th,explainCode:tf,generateCode:tp,onMoreClick:tE}),tI=u2.use(),tT=(0,t4.tT)(nC),tF=nP.use(nS);return(0,y.Y)("div",{css:c4.mV,"data-cy":nj?"loading-workspace-cm-editor":"workspace-cm-editor-".concat(nv),children:(0,y.Y)(l7.Ay,{ref:nU,elementRef:n3,css:c4.$1,filePath:nv,hideTooltips:ny,readOnly:nw,extensions:[tx,tD,nK,n$,nQ,tg,tI,tn,nH,tr,n9,tl,ta,lc,tt,az,tv,l4,sL,ti,tu,ts,tc,P,n7,n6,sx,si,te?[]:tR,nG,iC.f,tT,td,tF],onException:function(e){var n,t={filePath:nv,cursorPosition:JSON.stringify(null==nz||null==(n=nz.get(nb.J0))?void 0:n.position),fileVersion:nW({filePath:nv})};if(nN){var r=nN.plugin(az),i=null==r?void 0:r.logs();null==r||r.flush(),t.domText=nN.contentDOM.innerText,t.keystrokes=JSON.stringify(i),t.selection=JSON.stringify(nN.state.selection.main.toJSON()),t.updateDoc=nN.state.doc.sliceString(0)}(0,sK.Q)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:t})},noHistory:!0})})}var u3=t(158),u7=t(56962),u6=t(61135),u8=t(4729),u9=t(66403),de=t(37252),dn=t(63837),dt=(0,Y.eU)(0),dr=(0,Y.eU)(new Map([["normal",[]],["compact",[]]])),di=(0,Y.eU)(null,function(e,n,t){var r=e(dc);n(dr,function(e){return(0,tQ.jM)(e,function(e){var n=e.get(r);if(!n)throw Error("Expect width for: "+r);n[t.index]=t.width})})}),da=(0,Y.eU)(null,function(e,n,t){n(dr,function(e){return(0,tQ.jM)(e,function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)(0,g._)(o.value,2)[1].slice(0,t)}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}})})}),dl=(0,Y.eU)(function(e){var n=new Map([["normal",0],["compact",0]]),t=!0,r=!1,i=void 0;try{for(var o,a=e(dr)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,g._)(o.value,2),s=l[0],c=l[1],u=0,d=!0,p=!1,f=void 0;try{for(var h,m=c[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var v=h.value;void 0!==v&&(u+=v)}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}n.set(s,u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),ds=(0,Y.eU)(function(e){if("normal"===e(dc))return null;var n=e(dr).get("compact");if(!n)return null;var t=e(dt)-24,r=0,i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(void 0!==c){if((t-=c)>0){r++;continue}return r}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return null}),dc=(0,Y.eU)(function(e){var n,t=e(dt);return(null!=(n=e(dl).get("normal"))?n:0)>t?"compact":"normal"}),du=(0,$.x)({item:[J.wp.viewStyle,e0.b.listItem,J.wp.p(6),J.wp.rowWithGap(4),J.wp.align.center,{fontSize:eF.LU.fontSizeSmall}]});function dd(e){var n=(0,g._)((0,w.useState)(null),2),t=n[0],r=n[1],i=null!==t&&(null==(c=e.items[t])?void 0:c.popover);if(i)return(0,y.Y)(y.FK,{children:i});var o=[],a=!0,l=!1,s=void 0;try{for(var c,u,d=e.items[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=u.value;p.onClick||p.popover||o.push(p.key)}}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}return(0,y.Y)(u7.W1,{disabledKeys:o,onAction:function(n){var t=!0,i=!1,o=void 0;try{for(var a,l=e.items[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value;if(s.key===n){if(s.onClick){s.onClick();break}s.popover&&r(e.items.indexOf(s));break}}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}},children:e.items.map(function(e){return(0,y.Y)(u7.Dr,{id:e.key,css:du.item,children:(0,y.Y)(dp.Provider,{value:function(){},children:(0,w.cloneElement)(e.item,{presentation:"overflowMenu"})})},e.key)})})}var dp=(0,w.createContext)(function(e){});function df(){return(0,w.useContext)(dp)}var dh=(0,$.x)({button:[J.wp.viewStyle,J.wp.reset.button,J.wp.rowWithGap(4),J.wp.center,J.wp.color.foregroundDimmest,J.wp.hover([J.wp.color.foregroundDefault]),J.wp.height("100%"),{fontSize:12,"&:has(*)":[J.wp.px(4),e0.b.nofill,J.wp.borderRadius(0)]}],tooltip:[J.wp.backgroundColor.backgroundHighest,J.wp.borderRadius(4),J.wp.color.foregroundDimmer,J.wp.p(4),J.wp.border({color:eF.LU.outlineDefault}),{fontSize:12}]});function dm(e){var n=(0,rl.A)(function(n){return e.onWidth(n.width)}),t=(0,g._)((0,w.useState)(null),2),r=t[0],i=t[1];return(0,y.Y)(Q.S,{innerRef:n,children:(0,y.FD)(u6.k$,{isDisabled:null==r||e.hidden,children:[(0,y.Y)(u8.$,{isDisabled:e.isDisabled||e.hidden,css:dh.button,style:e.hidden?{opacity:0,pointerEvents:"none"}:void 0,onPress:function(){var n;return null==(n=e.onClick)?void 0:n.call(e)},children:(0,y.Y)(dp.Provider,{value:i,children:e.children})}),(0,y.Y)(u6.m_,{placement:"top",offset:8,css:dh.tooltip,children:r})]})})}var dg=(0,$.x)({root:[J.wp.position.relative,{"& > div:first-of-type > button":{borderBottomLeftRadius:4},"& > div:button:last-of-type > button":{borderBottomRightRadius:4}}],middle:[J.wp.flex.growAndShrink(1)],moreButton:[{width:24},J.wp.reset.button,J.wp.center,e0.b.nofill,J.wp.height("100%"),J.wp.position.absolute,J.wp.right(0),J.wp.top(0)]});function dv(e){var n=e.left.filter(Boolean),t=e.right.filter(Boolean),r=(0,g._)((0,w.useState)(function(){return(0,Y.y$)()}),1)[0],i=(0,ri.md)(dc,{store:r}),o=(0,ri.md)(ds,{store:r}),a=(0,ri.Xr)(di,{store:r}),l=(0,ri.Xr)(dt,{store:r}),s=(0,rl.A)(function(e){return l(e.width)}),c=n.length-1,u=(0,v._)(n).concat((0,v._)(t)),d=(0,ri.Xr)(da,{store:r}),p=u.length;return(0,w.useEffect)(function(){d(p)},[d,p]),(0,y.Y)(y.FK,{children:(0,y.FD)(Q.S,{className:e.className,css:dg.root,grow:!0,shrink:!0,row:!0,innerRef:s,children:[u.map(function(e,n){return e.popover?(0,y.FD)(w.Fragment,{children:[(0,y.FD)(u9.zM,{children:[(0,y.Y)(dm,{onWidth:function(e){return a({index:n,width:e})},hidden:null!==o&&n>=o,isDisabled:!e.popover&&!e.onClick,children:(0,w.cloneElement)(e.item,{presentation:i})}),(0,y.Y)(de.g_,{placement:n<=c?"top left":"top right",children:e.popover})]}),n===c?(0,y.Y)(Q.S,{css:dg.middle}):null]},e.key):(0,y.FD)(w.Fragment,{children:[(0,y.Y)(dm,{onWidth:function(e){return a({index:n,width:e})},onClick:e.onClick,hidden:null!==o&&n>=o,isDisabled:!e.popover&&!e.onClick,children:(0,w.cloneElement)(e.item,{presentation:i})}),n===c?(0,y.Y)(Q.S,{css:dg.middle}):null]},e.key+n)}),null===o?null:(0,y.FD)(u9.zM,{children:[(0,y.Y)(u8.$,{css:dg.moreButton,children:(0,y.Y)(dn.A,{size:12})}),(0,y.Y)(de.g_,{placement:"top right",children:(0,y.Y)(dd,{items:u.slice(o)})})]})]})})}var dy=t(52749);function dw(e){var n=e.presentation,t=(0,O.g)("codeSuggestion").preferences.codeSuggestion,r=df();return(0,w.useEffect)(function(){r("compact"===n?"AI":null)},[r,n]),(0,y.FD)(y.FK,{children:[(0,y.Y)(or.A,{size:12,color:t?eF.LU.blurpleDefault:void 0}),"compact"===n?null:(0,y.Y)(Q.S,{children:"AI"})]})}var db=(0,$.x)({root:[J.wp.maxWidth(260)],featureTitle:[J.wp.fontWeight.medium]});function dS(){var e=(0,w.useId)(),n=(0,O.g)("codeSuggestion"),t=n.preferences.codeSuggestion,r=n.update;return(0,y.FD)(Q.S,{css:db.root,p:8,children:[(0,y.FD)(Q.S,{row:!0,gap:8,align:"center",children:[(0,y.FD)(Q.S,{css:db.featureTitle,grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:[(0,y.Y)(cl,{color:eF.LU.blurpleDefault}),(0,y.Y)(tO.EY,{children:"AI Autocomplete"})]}),(0,y.FD)(Q.S,{row:!0,gap:4,align:"center",children:[(0,y.Y)(Q.S,{tag:"label",htmlFor:e,children:(0,y.Y)(tO.EY,{color:"dimmer",variant:"small",children:"Enable"})}),(0,y.Y)(dy.S,{id:e,checked:t,name:"Code Complete",onChange:function(){return r({codeSuggestion:!t})}})]})]}),(0,y.FD)(Q.S,{gap:8,children:[(0,y.Y)(tO.EY,{color:"dimmer",variant:"small",children:"Suggest lines of code as you type based on existing context."}),(0,y.FD)(Q.S,{row:!0,gap:4,align:"center",children:[(0,y.Y)(tO.EY,{color:"dimmer",variant:"small",children:"Press"}),(0,y.Y)(rS._y,{small:!0,keyCombo:"Tab"}),(0,y.Y)(tO.EY,{color:"dimmer",variant:"small",children:"to accept result"})]})]})]})}var dY=t(8030),d_=function(e){return e[e.Loading=0]="Loading",e[e.Ready=1]="Ready",e[e.Exited=2]="Exited",e[e.Stalled=3]="Stalled",e[e.Partial=4]="Partial",e[e.Missing=5]="Missing",e[e.Disabled=6]="Disabled",e}(d_||{}),dA=(0,Y.eU)(new Map),dC=(0,Y.eU)(null,function(e,n,t,r){n(dA,function(e){return(0,tQ.jM)(e,function(e){var n=e.get(t);n&&e.set(t,(0,m._)((0,h._)({},n),{state:r}))})})}),dk=(0,Y.eU)(null,function(e,n,t,r){n(dA,function(e){return(0,tQ.jM)(e,function(e){var n=e.get(t);n&&e.set(t,(0,m._)((0,h._)({},n),{health:r}))})})}),dx=(0,Y.eU)(null,function(e,n,t,r){n(dA,function(e){return(0,tQ.jM)(e,function(e){var i=new Set,o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)!function(){var t,o=s.value;i.add(o.clientId),null==(t=e.get(o.clientId))||t.dispose(),e.set(o.clientId,{client:o,health:o.getServerHealth(),state:o.getServerState(),restart:function(){return r.restart(o.clientId)},dispose:(0,n0.xW)([o.onServerStateChange(function(e){return n(dC,o.clientId,e)}),o.onServerHealthChange(function(e){return n(dk,o.clientId,e)})])})}()}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var u=!0,d=!1,p=void 0;try{for(var f,h=e.entries()[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=(0,g._)(f.value,2),v=m[0],y=m[1].dispose;i.has(v)||(y(),e.delete(v))}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}})})});function dD(e){switch(e){case 3:return 4;case 0:return 3;case 1:return 2;case 2:return 1;default:return 0}}function dE(e){return e.health===oW.A.STALLED?3:e.state===oW.b.INITIALIZING||e.state===oW.b.INITIALIZED&&e.health!==oW.A.READY?0:e.health===oW.A.READY?1:e.state===oW.b.EXITED?2:5}function dR(e){return(0,ri.md)(e,{store:function(){var e=(0,w.useContext)(dI);if(!e)throw Error("Expected store in context");return e}()})}var dI=(0,w.createContext)(null);function dT(e){var n,t,r,i=(n=e.filePath,t=e.lspnix,r=(0,g._)((0,w.useState)(function(){return(0,Y.y$)()}),1)[0],(0,w.useEffect)(function(){return t.onClient(n,function(e){return r.set(dx,e,t)})},[n,t,r]),r);return(0,y.Y)(dI.Provider,{value:i,children:e.children})}var dF=t(30124),dP=t(27659);function dL(e){return(0,y.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,y.Y)("path",{fill:eF.LU.foregroundDefault,d:"M8.25 4c-.764 0-1.407.125-1.932.394-.538.276-.905.68-1.143 1.15-.426.842-.425 1.904-.425 2.74v.09c0 .963-.017 1.666-.263 2.153a1.069 1.069 0 0 1-.49.492c-.248.127-.637.229-1.247.229a.75.75 0 0 0 0 1.5c.61 0 .999.101 1.248.229.235.12.383.283.49.492.245.486.262 1.19.262 2.153v.09c0 .835-.001 1.898.425 2.74.238.47.605.874 1.143 1.15.525.268 1.168.393 1.932.393a.75.75 0 0 0 0-1.5c-.61 0-.999-.1-1.248-.228a1.07 1.07 0 0 1-.489-.493c-.246-.486-.263-1.19-.263-2.152v-.09c0-.836.001-1.899-.424-2.74a2.587 2.587 0 0 0-.614-.794c.263-.228.464-.498.614-.794.425-.842.425-1.904.424-2.74v-.09c0-.963.017-1.666.263-2.153.106-.209.254-.371.49-.492C7.25 5.6 7.64 5.5 8.25 5.5a.75.75 0 0 0 0-1.5ZM15.75 4a.75.75 0 0 0 0 1.5c.61 0 1 .101 1.248.229.236.12.384.283.49.492.246.487.263 1.19.263 2.153v.09c-.001.836-.002 1.898.424 2.74.15.296.351.566.614.794a2.586 2.586 0 0 0-.614.794c-.426.841-.425 1.904-.424 2.74v.09c0 .963-.017 1.666-.263 2.152a1.07 1.07 0 0 1-.49.493c-.249.127-.637.229-1.248.229a.75.75 0 1 0 0 1.5c.765 0 1.408-.126 1.932-.394.539-.276.906-.68 1.144-1.15.426-.842.425-1.905.425-2.74v-.09c0-.964.016-1.667.263-2.153a1.07 1.07 0 0 1 .489-.492c.249-.128.637-.23 1.248-.23a.75.75 0 0 0 0-1.5c-.61 0-1-.1-1.248-.228a1.069 1.069 0 0 1-.49-.492c-.246-.487-.262-1.19-.262-2.153v-.09c0-.836.001-1.898-.425-2.74a2.567 2.567 0 0 0-1.144-1.15C17.158 4.125 16.515 4 15.751 4Z"})}))}function dU(e){return(0,y.FD)(X.Ay,(0,m._)((0,h._)({},e),{children:[(0,y.Y)("path",{fill:eF.LU.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"}),(0,y.Y)("path",{fill:eF.LU.accentPositiveStronger,d:"M16.09 9.227a.692.692 0 0 1-.047.978l-5.077 4.615a.692.692 0 0 1-.932 0l-2.307-2.098a.692.692 0 0 1 .931-1.024l1.842 1.674 4.611-4.192a.692.692 0 0 1 .978.047Z"})]}))}function dN(e){return(0,y.FD)(X.Ay,(0,m._)((0,h._)({},e),{children:[(0,y.Y)("path",{fill:"#F66",fillRule:"evenodd",d:"M8.47 8.47a.75.75 0 0 1 1.06 0L12 10.94l2.47-2.47a.75.75 0 1 1 1.06 1.06L13.06 12l2.47 2.47a.75.75 0 1 1-1.06 1.06L12 13.06l-2.47 2.47a.75.75 0 0 1-1.06-1.06L10.94 12 8.47 9.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}),(0,y.Y)("path",{fill:eF.LU.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"})]}))}function dO(e){return(0,y.FD)(X.Ay,(0,m._)((0,h._)({},e),{children:[(0,y.Y)("path",{fill:eF.LU.yellowStronger,fillRule:"evenodd",d:"M12 7.33c.368 0 .667.298.667.667v2.822l2.323-1.394a.667.667 0 1 1 .686 1.143l-2.38 1.429 2.38 1.428a.667.667 0 1 1-.686 1.143l-2.323-1.394v2.823a.667.667 0 0 1-1.334 0v-2.823L9.01 14.568a.667.667 0 0 1-.686-1.143l2.38-1.428-2.38-1.429a.667.667 0 0 1 .686-1.143l2.323 1.394V7.997c0-.369.299-.667.667-.667Z",clipRule:"evenodd"}),(0,y.Y)("path",{fill:eF.LU.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"})]}))}function dM(e){var n=e.filePath,t=e.presentation,r=(0,K.fZ)(),i=(0,U.Vn)(r,eg.ql),o=(0,w.useMemo)(function(){var e,t,r,o;return(r=null==(e=nq.Jh.from(n))?void 0:e.name)?r:(r=null==i||null==(t=i.language)?void 0:t.name)&&r.length>0?(o=r).slice(0,1).toUpperCase()+o.slice(1).toLowerCase():(r=(0,N.an)(n),i)?r:"Plain Text"},[n,i]),a=(0,U.Vn)(r,nj.lu),l=(0,g._)((0,w.useState)(a?{title:a.name,value:a.id}:void 0),2),s=l[0],c=l[1],u=(0,w.useRef)(!1);(0,w.useEffect)(function(){u.current||(null==s?void 0:s.value)!==(null==a?void 0:a.id)&&c(a?{title:a.name,value:a.id}:void 0)},[s,a]);var d=df();(0,w.useEffect)(function(){d("Language support"+("compact"===t?" (".concat(o,")"):""))},[d,t,o]);var p=dR((0,w.useMemo)(function(){return(0,Y.eU)(function(e){var n;return null!=(n=Array.from(e(dA).values()).map(function(e){return dE(e)}).sort(function(e,n){return dD(n)-dD(e)})[0])?n:5})},[]));return(0,y.FD)(y.FK,{children:[(0,y.Y)(dj,{state:p}),"compact"===t?null:(0,y.Y)(Q.S,{children:o})]})}var dH=(0,$.x)({menu:[J.wp.maxWidth(390),J.wp.minWidth(390)],file:[J.wp.pl(4),J.wp.display.inlineFlex,J.wp.rowWithGap(4),J.wp.align.center,{verticalAlign:"top"}],section:[J.wp.rowWithGap(8),J.wp.align.center,J.wp.justify.spaceBetween],header:[J.wp.colWithGap(2),J.wp.flex.shrink(1)],staticWidth:[J.wp.flex.grow(0),J.wp.flex.shrink(1)],variableWidth:[J.wp.flex.grow(1),J.wp.flex.shrink(0),{flexBasis:0}],flexEnd:[J.wp.align.end],red:[J.wp.color.redDefault],row:[J.wp.rowWithGap(8),J.wp.align.center]});function dB(e){var n=e.filePath,t=e.openSettings,r=(0,K.fZ)(),i=(0,n2.A)().dotReplit,o=(0,U.Vn)(r,nj.lu),a=(0,U.Vn)(r,nj.et),l=(0,g._)((0,w.useState)(o?{title:o.name,value:o.id}:void 0),2),s=l[0],c=l[1],u=(0,w.useRef)(!1),d=(0,w.useMemo)(function(){var e;return null!=(e=null==a?void 0:a.map(function(e){return{title:e.name,value:e.id,icon:void 0}}))?e:[]},[a]);return(0,y.FD)(Q.S,{css:dH.menu,p:8,gap:8,children:[(0,y.FD)(tO.Y9,{level:1,children:["Language support for ",(0,y.FD)("span",{css:dH.file,children:[(0,y.Y)(oY.A,{path:n,size:16})," ",(0,y.Y)("span",{children:(0,N.WP)(n)})]})]}),(0,y.Y)(dF.a,{}),(0,y.Y)(dz,{openSettings:t}),a&&s?(0,y.FD)(y.FK,{children:[(0,y.Y)(dF.a,{}),(0,y.FD)(Q.S,{css:dH.section,children:[(0,y.Y)(Q.S,{css:[dH.header,dH.staticWidth],children:(0,y.Y)(tO.EY,{multiline:!1,children:"Code Formatter"})}),1===a.length?(0,y.Y)(Q.S,{css:[dH.header,dH.variableWidth,dH.flexEnd],children:(0,y.Y)(tO.EY,{multiline:!1,children:s.title})}):(0,y.Y)(Q.S,{row:!0,gap:4,children:(0,y.Y)(dP.l,{placement:"top",items:d,selectedItem:(0,m._)((0,h._)({},s),{icon:u.current?(0,y.Y)(n_.A,{size:12}):void 0}),disabled:u.current,onChange:function(e){e.value!==s.value&&(u.current=!0,c(e),(function(e,n){return dq.apply(this,arguments)})(i,{path:n,formatterId:e.value}).finally(function(){return u.current=!1}))}})})]})]}):null]})}function dz(e){var n=e.openSettings,t=dR((0,w.useMemo)(function(){return(0,Y.eU)(function(e){return Array.from(e(dA).values()).map(function(e){return{clientId:e.client.clientId,clientName:e.client.clientName,restart:function(){return e.restart()}}})})},[]));return(0,y.FD)(y.FK,{children:[t.map(function(e){return(0,y.Y)(Q.S,{css:dH.section,children:(0,y.Y)(dG,{languageServerId:e.clientId,name:e.clientName,restart:function(){return e.restart()},openSettings:n})},e.clientId)}),0===t.length?(0,y.Y)(Q.S,{css:dH.section,children:(0,y.Y)(dV,{openSettings:n})}):null]})}function dW(e){var n=(0,y.Y)("a",{tabIndex:0,role:"button",onClick:e.restart,onKeyDown:function(n){"Enter"===n.key&&e.restart()},children:"Restart"});switch(e.state){case 0:return(0,y.Y)(tO.EY,{multiline:!1,color:"dimmer",children:"Loading"});case 1:return(0,y.Y)(tO.EY,{multiline:!1,color:"dimmer",children:"Active"});case 3:return(0,y.FD)(Q.S,{css:dH.row,children:[(0,y.Y)(tO.EY,{css:dH.red,multiline:!1,children:"Stalled"})," ",n]});case 2:return(0,y.FD)(Q.S,{css:dH.row,children:[(0,y.Y)(tO.EY,{css:dH.red,multiline:!1,children:"Stopped"})," ",n]});default:return null}}function dG(e){var n,t=dR((n=e.languageServerId,(0,w.useMemo)(function(){return(0,Y.eU)(function(e){var t=e(dA).get(n);return t?dE(t):5})},[n])));switch(t){case 0:case 1:case 2:case 3:return(0,y.FD)(y.FK,{children:[(0,y.Y)(Q.S,{css:[dH.header,dH.variableWidth],children:(0,y.Y)(tO.EY,{multiline:!1,children:e.name})}),(0,y.Y)(Q.S,{css:[dH.header,dH.staticWidth],children:(0,y.Y)(dW,{restart:e.restart,state:t})})]});default:return null}}function dV(e){return(0,O.g)("codeIntelligence").preferences.codeIntelligence?(0,y.Y)(Q.S,{css:dH.header,children:(0,y.Y)(tO.EY,{color:"dimmer",children:"Limited language support because the language server is not available."})}):(0,y.Y)(Q.S,{css:dH.header,children:(0,y.FD)(tO.EY,{multiline:!0,color:"dimmer",children:["Code intelligence is disabled. Enable it in settings.",(0,y.Y)("br",{}),(0,y.Y)("a",{tabIndex:0,role:"button",onClick:e.openSettings,onKeyDown:function(n){"Enter"===n.key&&e.openSettings()},children:"Open settings"})]})})}var dZ=function(e){return e[e.Loading=0]="Loading",e[e.Ready=1]="Ready",e[e.Exited=2]="Exited",e[e.Stalled=3]="Stalled",e[e.Partial=4]="Partial",e[e.Missing=5]="Missing",e[e.Disabled=6]="Disabled",e}(dZ||{});function dj(e){switch(e.state){case 3:case 6:case 4:return(0,y.Y)(dO,{size:16});case 0:return(0,y.Y)(n_.A,{size:16,color:eF.LU.blueStronger});case 1:return(0,y.Y)(Q.S,{dataCy:"ws-code-intelligence-active",children:(0,y.Y)(dU,{size:16})});case 2:return(0,y.Y)(dN,{size:16});case 5:return(0,y.Y)(dL,{size:16})}}function dq(){return(dq=(0,ec._)(function(e,n){var t,r;return(0,ed.YH)(this,function(i){return(t=".".concat((0,dY.QC)(n.path)),r="rules/formatter/fileExtensions/".concat(t,"/id"),n.formatterId)?[2,e.updateDotReplit([{path:"rules/formatter/fileExtensions",op:"add",value:JSON.stringify((0,ti._)({},"".concat(t),{id:n.formatterId}))}])]:[2,e.updateDotReplit([{path:r,op:"remove"}])]})})).apply(this,arguments)}var dK=t(66241),d$=t(29004);function dJ(e){var n,t=e.presentation,r=(0,sN.A)((n=(0,ec._)(function(e){var n,t,r,i;return(0,ed.YH)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=o.sent()).error)return[2,n];if(t=n.type,r=null,t===dK.UN.INITIALIZING)return[3,3];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null==r?void 0:r.branch,error:null}]}})}),function(e){return n.apply(this,arguments)})),i=!r||r.error?null:r.branchName,o=df();return(0,w.useEffect)(function(){o("compact"===t&&i?i:null)},[o,t,i]),i?(0,y.FD)(y.FK,{children:[(0,y.Y)(d$.A,{color:eF.LU.foregroundDimmer,size:12}),"compact"===t?null:(0,y.Y)(Q.S,{children:i})]}):null}function dQ(e){if(e.facet(ae.u))return"";var n=e.selection,t="",r=0;if(n.ranges.length>1){r=n.ranges.reduce(function(e,n){return e+(n.to-n.from)},0);var i=n.ranges.length;t="".concat(i," selections")}else{var o=n.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,t="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(t+=" (".concat(r," chars)")),t}function dX(e){var n=e.view,t=(0,w.useRef)(null);return(0,w.useEffect)(function(){var e,r=t.current,i=null!=(e=n.plugin(U.Pb))?e:null;if(r&&i&&!i.destroyed){var o=null,a=n.state;r.textContent=dQ(a);var l=i.bind({changed:function(e){return(0,em.$H)(e,"selection",ae.u)},callback:function(e){a=e.state,null===o&&(o=requestAnimationFrame(function(){o=null,r.textContent=a?dQ(a):""}))}});return function(){l(),null!==o&&cancelAnimationFrame(o),r.textContent=""}}},[n]),(0,y.Y)("span",{ref:t,"data-cy":"current-position"})}var d0=t(35700);function d1(e){var n=e.presentation,t=df();return(0,w.useEffect)(function(){t("compact"===n?"History":null)},[t,n]),(0,y.FD)(y.FK,{children:["compact"===n?null:(0,y.Y)(Q.S,{children:"History"}),(0,y.Y)(d0.A,{size:12})]})}var d2=t(46116),d4=t(73712);function d5(e,n,t){var r=[],i=0,o=!0,a=!1,l=void 0;try{for(var s,c=e.iterLines()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,d=i;if(i=i+u.length+1,0!==u.length){var p=(0,d4.t)(u,n),f=u.trimStart(),h=d+(u.length-f.length);if(0!==p&&d!==h){var m="";if(t===d2.c.TABS){var g=Math.floor(p/n),v=p%n;m="	".repeat(g)+" ".repeat(v)}else t===d2.c.SPACES&&(m=" ".repeat(p));m+f!==u&&r.push({from:d,to:h,insert:m})}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return D.VR.of(r,e.length)}var d3=t(3141),d7=t(32920),d6=t(36073),d8=t(51055),d9=t(4265),pe=(0,$.x)({menu:[J.wp.maxWidth(410)],file:[J.wp.pl(4),J.wp.display.inlineFlex,J.wp.rowWithGap(4),J.wp.align.center,{verticalAlign:"top"}],section:[J.wp.rowWithGap(8),J.wp.align.center,J.wp.justify.spaceBetween],header:[J.wp.colWithGap(2),J.wp.flex.shrink(1)],sizeInput:{border:"none"}});function pn(e){var n,t=e.filePath,r=e.openSettings,i=(0,O.g)("indentDetection","indentSize").preferences,o=(0,K.fZ)(),a=(0,U.Vn)(o,ae.u),l=null!==a&&!!i.indentDetection&&a,s=(0,U.Vn)(o,d3._t),c=(0,U.Vn)(o,d3.WD),u=(0,U.Vn)(o,d3.xu),d=null!=(n=(0,U.Vn)(o,D.$t.tabSize))?n:i.indentSize,p="	"===(0,U.Vn)(o,_.Xt)?d2.c.TABS:d2.c.SPACES,f=(0,g._)((0,w.useState)(!1),2),h=f[0],m=f[1],b=(0,g._)((0,w.useState)(p),2),S=b[0],Y=b[1],A=(0,g._)((0,w.useState)(d),2),C=A[0],k=A[1],x=(0,g._)((0,w.useState)(!1),2),E=x[0],R=x[1],I=(0,g._)((0,w.useState)(!1),2),T=I[0],F=I[1],P=(0,g._)((0,w.useState)(!1),2),L=P[0],M=P[1],H=(0,g._)((0,w.useState)(!1),2),B=H[0],z=H[1];(0,w.useEffect)(function(){E||(Y(p),k(d))},[p,d,E]),(0,w.useEffect)(function(){h||(Y(p),k(d),R(!1))},[h,p,d]),(0,w.useEffect)(function(){S===p&&C===d&&R(!1)},[S,C,p,d]),(0,w.useEffect)(function(){if(T||L||B){var e=setTimeout(function(){F(!1),M(!1),z(!1)},1e3);return function(){return clearTimeout(e)}}},[T,L,B]),l&&h&&m(!1);var W=(0,w.useCallback)(function(){if(o){var e=d5(o.state.doc,d,p);o.dispatch({changes:e,effects:d3.mh.of(!0)}),M(!0)}},[o,p,d]),G=(0,w.useCallback)(function(){o&&(o.dispatch({effects:d3.mh.of(!0)}),o.state.field(d3.WD)&&o.dispatch({effects:d3.SF.of({type:void 0,size:void 0})}),z(!0))},[o]),V=(0,w.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o){var n=void 0,t=[d3.SF.of({type:S,size:C})];if(e){if(S!==p&&(n=d5(o.state.doc,d,S)),S===d2.c.SPACES&&C!==d){var r=function(e,n,t,r){if(n===d2.c.TABS)return D.VR.empty(e.length);var i=" ".repeat(r),o=[],a=0,l=!0,s=!1,c=void 0;try{for(var u,d=e.iterLines()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value,f=a;if(a=a+p.length+1,0!==p.length){var h=(0,d4.t)(p,t),m=p.trimStart(),g=f+(p.length-m.length);if(0!==h&&f!==g){var v=Math.floor(h/t),y=h%t,w=i.repeat(v)+" ".repeat(y);w+m!==p&&o.push({from:f,to:g,insert:w})}}}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return D.VR.of(o,e.length)}(n?n.apply(o.state.doc):o.state.doc,S,d,C);n=n?n.compose(r):r}n&&t.push(d3.mh.of(!0))}o.dispatch({changes:n,effects:t}),R(!1),F(!0)}},[o,p,d,S,C]),Z=(0,w.useCallback)(function(){m(!1),r()},[r]),j=(0,w.useMemo)(function(){if(c){var e=c.size,n=c.type===d2.c.SPACES?"spaces":"tabs";return"This file appears to use a unit of ".concat(e," ").concat(n,".")}return u?"Indentation detection hasn't been run on this file yet.":"This file is too small for indentation detection."},[c,u]);return(0,y.FD)(Q.S,{css:pe.menu,p:8,gap:8,children:[(0,y.FD)(tO.Y9,{level:1,children:["Indentation for",(0,y.FD)("span",{css:pe.file,children:[(0,y.Y)(oY.A,{path:t,size:16})," ",(0,y.Y)("span",{children:(0,N.WP)(t)})]})]}),s?(0,y.Y)(d6.N,{colorway:"warning",icon:(0,y.Y)(lB.A,{}),text:"This file type requires that ".concat(s===d2.c.SPACES?"spaces":"tabs"," be used for indentation.")}):null,(0,y.Y)(dF.a,{}),(0,y.FD)(Q.S,{css:pe.section,children:[(0,y.FD)(Q.S,{css:pe.header,children:[(0,y.Y)(tO.EY,{multiline:!1,children:"Indentation unit"}),(0,y.Y)(tO.EY,{variant:"small",color:"dimmer",children:"The size and character to use when indenting lines."})]}),(0,y.FD)(Q.S,{row:!0,gap:4,children:[(0,y.Y)(d7.fq,{css:pe.sizeInput,size:C,onChange:function(e){e!==C&&(k(e),R(!0))}}),(0,y.Y)(dP.l,{items:(0,v._)(d7.pi),selectedItem:d7.pi.find(function(e){return e.value===(S===d2.c.SPACES?"spaces":"tabs")}),onChange:function(e){var n=(null==e?void 0:e.value)==="spaces"?d2.c.SPACES:d2.c.TABS;n!==S&&(Y(n),R(!0))}})]})]}),(0,y.Y)(dF.a,{}),i.indentDetection?(0,y.FD)(y.FK,{children:[(0,y.FD)(Q.S,{css:pe.section,children:[(0,y.FD)(Q.S,{css:pe.header,children:[(0,y.Y)(tO.EY,{multiline:!1,children:"Detected indentation unit"}),(0,y.Y)(tO.EY,{variant:"small",color:"dimmer",children:j})]}),B?(0,y.Y)(t3.$n,{colorway:"positive",text:"Detected!",iconLeft:(0,y.Y)(uN.A,{}),onClick:G}):(0,y.Y)(t3.$n,{text:c?"Re-detect":"Detect",iconLeft:(0,y.Y)(rd.A,{}),disabled:!u&&!c,onClick:G})]}),(0,y.Y)(dF.a,{})]}):null,(0,y.FD)(Q.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,y.Y)(t3.$n,{text:"Global settings",iconLeft:(0,y.Y)(d8.A,{}),onClick:Z}),(0,y.Y)(Q.S,{row:!0,gap:4,children:T||L?(0,y.Y)(y.FK,{children:T?(0,y.Y)(t3.$n,{text:"Saved!",colorway:"positive",iconLeft:(0,y.Y)(uN.A,{}),onClick:function(){return V(!1)}}):(0,y.Y)(t3.$n,{text:"Re-indented!",colorway:"positive",iconLeft:(0,y.Y)(uN.A,{}),onClick:W})}):(0,y.Y)(y.FK,{children:E?(0,y.FD)(y.FK,{children:[(0,y.Y)(t3.$n,{text:"Save and re-indent",colorway:"primary",iconLeft:(0,y.Y)(d9.A,{}),onClick:function(){return V(!0)}}),(0,y.Y)(t3.$n,{text:"Save",iconLeft:(0,y.Y)(uN.A,{}),onClick:function(){return V(!1)}})]}):(0,y.Y)(t3.$n,{text:"Re-indent file",iconLeft:(0,y.Y)(d9.A,{}),onClick:W})})})]})]})}function pt(e){var n,t=e.presentation,r=(0,O.g)("indentDetection","indentSize").preferences,i=(0,K.fZ)(),o=(0,U.Vn)(i,ae.u),a=null!==o&&!!r.indentDetection&&o,l=null!=(n=(0,U.Vn)(i,D.$t.tabSize))?n:r.indentSize,s="	"===(0,U.Vn)(i,_.Xt)?d2.c.TABS:d2.c.SPACES,c=df();return(0,w.useEffect)(function(){c("File Indentation")},[c]),(0,y.FD)(y.FK,{children:[(0,y.Y)(pi,{type:s,loading:a}),"compact"===t?null:(0,y.Y)(po,{type:s,size:l,loading:a})]})}function pr(e){var n=e.size,t=void 0===n?16:n,r=(0,es._)(e,["size"]);return(0,y.Y)(X.Ay,(0,m._)((0,h._)({size:t},r),{children:(0,y.Y)("circle",{cx:t,cy:t,r:t/2,fillRule:"evenodd"})}))}function pi(e){var n=e.type;return e.loading?(0,y.Y)(n_.A,{size:12}):n===d2.c.SPACES?(0,y.Y)(pr,{color:eF.LU.foregroundDimmer,size:12}):(0,y.Y)(d9.A,{color:eF.LU.foregroundDimmer,size:12})}function po(e){var n=e.type,t=e.size;if(e.loading)return(0,y.Y)(tO.EY,{variant:"small",color:"dimmest",children:"Detecting..."});var r=n===d2.c.SPACES?"Spaces":"Tabs";return(0,y.FD)(tO.EY,{variant:"small",color:"dimmer",children:[r,": ",t]})}var pa=t(37569),pl=t(55515),ps=t(56262),pc=(0,$.x)({group:[J.wp.align.center,J.wp.rowWithGap(4)]});function pu(e){var n,t,r,i,o,a,l,s,c,u=e.filePath,d=e.presentation,p=(n=u,r=(t=(0,g._)((0,w.useState)(null),2))[0],i=t[1],o=(0,nX.A)(n),a=(0,ps.t3)(),l=(0,pl.gB)(),(0,w.useEffect)(function(){var e=function(e){var t,r=a().find(function(e){var n=(0,g._)(e,2);return"problems"===(n[0],n[1]).type});if(r){var i=l(r[0]);i&&"problems"===i.type&&(null==(t=i.updateProblems)||t.call(i,n,e))}},t=function(t){if(t.path===n){var r=[],a=!0,l=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;d.isOpen(n)&&r.push.apply(r,(0,v._)(d.getDiagnostics(t.path)))}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}i(r),e(r)}},r=[],s=!0,c=!1,u=void 0;try{for(var d,p=o[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;f.isOpen(n)&&r.push.apply(r,(0,v._)(f.getDiagnostics(n)))}}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}i(r),e(r);var h=[],m=!0,y=!1,w=void 0;try{for(var b,S=o[Symbol.iterator]();!(m=(b=S.next()).done);m=!0){var Y=b.value;h.push(Y.onDiagnostics(function(e){return t(e)}))}}catch(e){y=!0,w=e}finally{try{m||null==S.return||S.return()}finally{if(y)throw w}}return function(){h.forEach(function(e){return e()}),a().some(function(e){var t=(0,g._)(e,2),r=(t[0],t[1]);return"codeEditor"===r.type&&r.data.path===n})||e([])}},[o,n,a,l]),r),f=(0,w.useMemo)(function(){var e,n;return p?(n=(e=p).reduce(function(e,n){return void 0===n.severity||(e[n.severity]=(e[n.severity]||0)+1),e},{}),e.length>0&&0===Object.keys(n).length&&(n[eI.DiagnosticSeverity.Error]=e.length),n):null},[p]),h=f&&null!=(s=f[eI.DiagnosticSeverity.Error])?s:0,m=f&&null!=(c=f[eI.DiagnosticSeverity.Warning])?c:0,b=null===f,S=df();return((0,w.useEffect)(function(){if(b)return void S(null);var e="";0===h&&0===m&&(e="No problems"),h>0&&(e+="".concat((0,om.A)("Error",h),": ").concat(h)),m>0&&(e.length>0&&(e+=", "),e+="".concat((0,om.A)("Warning",m),": ").concat(m)),S(e)},[S,d,b,m,h]),f)?(0,y.FD)(Q.S,{align:"center",row:!0,gap:8,children:[(0,y.FD)(Q.S,{css:pc.group,children:[(0,y.Y)(pa.A,{severity:eI.DiagnosticSeverity.Error,size:12}),"compact"===d?null:(0,y.Y)(tO.EY,{color:"dimmer",variant:"small",multiline:!1,children:String(h)})]}),(0,y.FD)(Q.S,{css:pc.group,children:[(0,y.Y)(pa.A,{severity:eI.DiagnosticSeverity.Warning,size:12}),"compact"===d?null:(0,y.Y)(tO.EY,{color:"dimmer",variant:"small",multiline:!1,children:String(m)})]})]}):null}var pd=t(91993);function pp(e){var n=e.presentation,t=e.toggled?"Diffing":"Diff",r=df();return(0,w.useEffect)(function(){r("compact"===n?t:null)},[r,n,t]),(0,y.FD)(y.FK,{children:[(0,y.Y)(pd.A,{color:eF.LU.foregroundDimmer,size:12}),"compact"===n?null:(0,y.Y)(Q.S,{children:t})]})}var pf=t(52153);function ph(e){return(0,y.Y)(pf.A,(0,m._)((0,h._)({},e),{children:(0,y.Y)("path",{fill:"#009118",fillRule:"evenodd",d:"m15.09 2-.29.29v1.066l.254.255h1.342v1.03L7.52 13.65V3.624h1.475l.303-.304V2.242l-.28-.217H1.255L1 2.28v1.102l.258.258h1.35v18.465l.255.254h1.534l6.467-6.682a.512.512 0 0 1 .006-.016l.335-.939a.49.49 0 0 1 .142-.207l.32-.275a.49.49 0 0 1 .32-.118h.383L23 3.138V2.29L22.71 2h-7.62Zm-3.273 12.693-.183.157-.01.008-.004.012-.014.041-.331.928.25.25h1.083l.274-.276.301-1.035-.215-.215h-1l-.15.13Zm-1.871 2.714-.12.48h.774l-1.66 4.745h2.288l.133-.43h-.65l1.642-4.795H9.946Zm7.498.017-.514.583h-.885l-.546-.566h-1.826l-.149.445h.617l-1.592 4.695h1.914l.129-.38h-.46l1.065-3.355h2.039l-1.164 3.735h1.847l.143-.344h-.457l1.082-3.408h1.953l-1.181 3.752h2.034l.145-.38h-.528l1.31-4.257-.373-.503h-1.473l-.497.547h-.936l-.514-.564h-1.183Z",clipRule:"evenodd"})}))}var pm=(0,$.x)({text:[{textTransform:"capitalize"}]});function pg(e){var n=e.presentation,r=(0,g._)((0,w.useState)(null),2),i=r[0],o=r[1],a=(0,w.useRef)(null),l=(0,w.useRef)(null),s=df(),c=(0,K.fZ)(),u=(0,O.g)("keyboardHandler").preferences,d=(null==u?void 0:u.keyboardHandler)==="vim",p=(0,w.useCallback)(function(e){var t=null!=e?e:"";if(c&&i&&void 0===e){var r,o,u=i.getCM(c);t=null!=(o=null==u||null==(r=u.state.vim)?void 0:r.mode)?o:"normal"}s("compact"===n?t:null),l.current=t,a.current&&a.current.innerText!==t&&(a.current.innerText=t||"")},[c,i,s,n]);return(0,w.useEffect)(function(){d&&!i&&t.e(3748).then(t.bind(t,77476)).then(function(e){o(e),p()})},[d,i,p]),(0,w.useEffect)(function(){if(c&&d&&i){var e,n=a.current,t=null!=(e=c.plugin(U.Pb))?e:null;if(n&&t&&!t.destroyed)return t.bind({changed:function(){var e,n,t=i.getCM(c),r=null!=(n=null==t||null==(e=t.state.vim)?void 0:e.mode)?n:"";return l.current!==r},callback:function(){p()}})}},[c,d,i,p]),d?(0,y.FD)(y.FK,{children:[(0,y.Y)(ph,{size:12}),"compact"===n?null:(0,y.Y)("span",{css:pm.text,ref:a})]}):null}var pv=(0,$.x)({root:[{borderTop:"1px solid ".concat(eF.LU.backgroundHigher)},{height:"29px",contain:"strict"}]}),py=(0,w.memo)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,b,S,Y,_,A,C,k,x=e.filePath,D=e.performPaneOperation,E=(0,w.useCallback)(function(e){return D({operation:"open",pane:e,secondary:!0})},[D]),R=(0,w.useCallback)(function(){return E({type:"preferences"})},[E]),I=(n=(0,u3.Ay)(),(0,u3.mS)(n)?{item:(0,y.Y)(dw,{}),popover:(0,y.Y)(dS,{}),key:"ai"}:null),T=(r=(t={filePath:x,openSettings:R}).filePath,i=t.openSettings,{item:(0,y.Y)(dM,{filePath:r,openSettings:i}),popover:(0,y.Y)(dB,{openSettings:i,filePath:r}),key:"codeIntelligence"}),F=(o=(0,iY._P)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),a=(0,K.fZ)(),o?{item:(0,y.Y)(pu,{filePath:x}),onClick:a?function(){return(0,iC.Q)(a)}:void 0,key:"lspDiagnostics"}:null),P=(l=function(){return E({type:"git"})},(0,iY._P)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1})?{item:(0,y.Y)(dJ,{}),onClick:l,key:"currentBranch"}:null),L=(s=(0,iY._P)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),h=(c=(0,K.fZ)(),u=(0,U.Vn)(c,ib),d=!c||!u||null===u.head,p=(null==u?void 0:u.mode)===iv.INLINE_DIFF,f={toggle:(0,w.useCallback)(function(){if(!c)return null;c.dispatch({effects:iw.of(p?iv.GUTTER_DIFF:iv.INLINE_DIFF)})},[c,p]),toggled:p,disabled:d}).toggle,m=f.toggled,g=f.disabled,s&&!g?{item:(0,y.Y)(pp,{toggled:m}),onClick:h,key:"toggleDiff"}:null),N={item:(0,y.Y)(pg,{}),key:"vimMode"},O=(v=(0,K.fZ)())?{item:(0,y.Y)(dX,{view:v}),onClick:function(){return(0,sf.cB)(v)},key:"currentPosition"}:null,M=(S=(b={filePath:x,performPaneOperation:D}).filePath,Y=b.performPaneOperation,_=(0,w.useCallback)(function(){Y({operation:"replace",pane:{type:"history",data:{path:S}}})},[Y,S]),{item:(0,y.Y)(d1,{}),key:"history",onClick:_}),H=(C=(A={filePath:x,openSettings:R}).filePath,k=A.openSettings,{item:(0,y.Y)(pt,{}),popover:(0,y.Y)(pn,{filePath:C,openSettings:k}),key:"indentation"});return(0,y.Y)(dv,{css:pv.root,left:[I,T,F,P,L,N],right:[O,H,M]})});function pw(e){var n=(0,n2.A)().lspnix;return(0,y.Y)(dT,{filePath:e.filePath,lspnix:n,children:(0,y.Y)(py,(0,h._)({},e))})}var pb=(0,$.x)({root:[J.wp.position.relative,J.wp.flex.column,J.wp.overflowY("hidden"),J.wp.width("100%"),J.wp.height("100%")]});function pS(e){var n=(0,w.useRef)(null),t=(0,j.A)(),r=(0,z.jt)(),i=(0,ru.hT)(),o=r&&(i===B.g32.AGENT_STATE_RUNNING||i===B.g32.AGENT_STATE_PAUSING);return(0,y.FD)(Q.S,{innerRef:n,css:pb.root,children:[(0,y.Y)(nA,{performPaneOperation:e.performPaneOperation,path:e.filePath,isReadOnly:e.isReadOnly}),(0,y.Y)("div",{css:c4.jy,children:(0,y.Y)(u5,{filePath:e.filePath,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,isReadOnly:o,isReadOnlyWhileAgentWorking:o,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated,performPaneOperation:e.performPaneOperation})}),(0,y.Y)("div",{style:{display:t?"none":"block"},children:(0,y.Y)(pw,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,y.Y)(el,{filePath:e.filePath,isLoading:!1})]})}var pY=(0,$.x)({root:[J.wp.coverContainer,J.wp.center,J.wp.p(16)]});function p_(e){var n=e.message;return(0,y.Y)(Q.S,{css:pY.root,children:(0,y.Y)(Q.S,{children:(0,y.Y)(d6.N,{icon:(0,y.Y)(lB.A,{}),colorway:"orange",text:n})})})}var pA=t(21996),pC=t(79166);function pk(e){return(0,y.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,y.Y)("path",{fillRule:"evenodd",d:"M20.75 12a.75.75 0 0 0-.75-.75H4a.75.75 0 0 0 0 1.5h16a.75.75 0 0 0 .75-.75Zm-6-6a.75.75 0 0 0-.75-.75H4a.75.75 0 0 0 0 1.5h10a.75.75 0 0 0 .75-.75Zm-4 12a.75.75 0 0 0-.75-.75H4a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 .75-.75Z",clipRule:"evenodd"})}))}var px=t(67963),pD=b.ZU.Object({type:b.ZU.Literal("codeEditor"),data:b.ZU.Object({path:b.ZU.Union([b.ZU.String({minLength:1}),b.ZU.Null()]),line:b.ZU.Optional(b.ZU.Number()),col:b.ZU.Optional(b.ZU.Number())})}),pE={Content:function(e){var n=e.pane,t=e.options;return(0,y.Y)(pI,(0,m._)((0,h._)({},n.data),{isActive:t.isActive,isHidden:t.isHidden,performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.pane,t=e.size;return(0,y.Y)(oY.A,{path:n.data.path||"",size:t})},getTitle:function(e){return e.data.path?(0,N.WP)(e.data.path):"No file open"},category:pC.bY.WorkspaceFeatures,decode:function(e){return S.T(pD,e)}};function pR(e){var n,t,r,i,o,a,l,s,c,u=e.path,d=e.performPaneOperation,p=(0,K.fZ)(),f=(0,M.A)(function(){return p?{match:s2.G2,data:{type:"action",label:"Toggle all folds",icon:(0,y.Y)(np.A,{}),run:function(){0===(0,_.hw)(p.state).size?(0,_.hY)(p):(0,_._I)(p)}}}:null},[p]),h=(0,U.Vn)(p,C.T);(0,w.useEffect)(function(){h&&d({operation:"commit"})},[h,d]);var m=(0,ny.KA)({path:u,performPaneOperation:d}),g=(n=(0,K.fZ)(),t=(0,U.Vn)(n,k.hb),(0,M.A)(function(){if(n&&t)return{match:s2.G2,data:{label:"Format "+(0,N.WP)(u),icon:(0,y.Y)(nY.A,{}),type:"action",run:function(){(0,k.BD)(n)}}}},[t,u,n])),b=(r=(0,H.m5)(),o=(i=(0,O.g)("minimapDisplay")).preferences.minimapDisplay,a=i.update,(0,M.A)(function(){return r?null:{match:s2.G2,data:{label:"Minimap",icon:(0,y.Y)(pk,{}),type:"context"},commands:function(e){var n=e.active,t=e.searchQuery;return n||t?[{value:"none",label:"Hide",icon:(0,y.Y)(lL.A,{})},{value:"characters",label:"Characters",icon:(0,y.Y)(ez.A,{})},{value:"blocks",label:"Blocks",icon:(0,y.Y)(eB.A,{})}].filter(function(e){return e.value!==o}).map(function(e){return{match:s2.G2,data:{type:"action",label:e.label,icon:e.icon,run:function(){a({minimapDisplay:e.value})}}}}):[]}}},[a,o,r])),S=(l=function(){return d({operation:"replace",pane:{type:"history",data:{path:u}}})},(0,M.A)(function(){return{match:s2.G2,data:{label:"History",icon:(0,y.Y)(d0.A,{}),type:"action",run:function(){l()}}}},[l])),Y=(s=(0,nb.vO)(),(0,M.A)(function(){var e=void 0;if((0,N.e$)(u)&&(e={type:"markdown",data:{path:u}}),(0,N.Z7)(u)&&(e={type:"media",data:{path:u}}),(0,N.Zy)(u)&&(e={type:"csvPreview",data:{path:u}}),e)return{match:s2.G2,data:{label:"Preview",icon:(0,y.Y)(nS.A,{}),type:"action",run:function(){if(e){if("csvPreview"===e.type){var n;e.data.line=null==(n=s())?void 0:n.position.line}d({operation:"replace",pane:e})}}}}},[s,u,d])),x=(c=(0,ps.JZ)(),{match:s2.G2,data:{label:"Reveal in file tree",icon:(0,y.Y)(px.A,{}),type:"action",run:function(){c(u)}}});return(0,pl.Qt)(function(){if(p){var e=[],n=[],t=[];return g&&e.push(g),Y&&n.push(Y),b&&n.push(b),f&&n.push(f),t.push(x),t.push(S),m&&e.push.apply(e,(0,v._)(m)),{type:"codeEditor",commands:[{name:"File Operations",commands:e},{name:"View",commands:n},{name:"Navigation",commands:t}].filter(function(e){return e.commands.length>0}),getEditorView:function(){return p},getCurrentSelectionText:function(){if(!p.state.selection.main.empty)return p.state.sliceDoc(p.state.selection.main.from,p.state.selection.main.to)},insertGhostwriterChatCode:function(e,n){T({view:p,insert:e,overwrite:n})},revertGhostwriterChatCode:function(){F(p)},fetchProblems:function(){return(0,A.H_)(p),(0,L.VS)(p.state)}}}},[p,g,Y,S,b,f,x,m]),(0,pl.HP)(function(){return p},[p]),null}function pI(e){var n,t,r,i,o,a,l,s,c=e.path,u=e.line,d=e.col,p=e.isActive,f=e.isHidden,h=e.performPaneOperation,m=(0,g._)((0,w.useState)(!f),2),v=m[0],b=m[1];v||f||b(!0);var S=(0,g._)((0,w.useState)(function(){return(0,Y.y$)()}),1)[0],_=(0,g._)((0,w.useState)(function(){return(0,Y.y$)()}),1)[0],A=(t=(n={path:c,replaceEditorPath:(0,w.useCallback)(function(e){h({operation:"replace",pane:{type:"codeEditor",data:{path:e}}})},[h]),getFileRenameInProgress:(0,nb.u6)()}).path,r=n.replaceEditorPath,i=n.getFileRenameInProgress,o=(0,n2.A)().fs,l=(a=(0,g._)((0,w.useState)(null),2))[0],s=a[1],(0,w.useEffect)(function(){if(t){if(t.startsWith("/"))return s('Cannot open "'.concat(t,'"')),function(){s(null)};var e=o.watchPathStat(t,{onNewStat:function(e){var n=i();return e.exists?e.type===aM.pt.Directory?void s('"'.concat(t,'" is a directory')):void s(null):(null==n?void 0:n.from)===t?void r(n.to):void s('No file found at "'.concat(t,'", it may have been deleted'))},onError:function(){s('Unknown error occured while read "'.concat(t,'", try re-opening the editor'))}});return function(){e(),s(null)}}},[i,o,t,r]),l),C=(0,M.A)(function(){return{line:u,col:d}},[u,d]),k=(0,M.A)(function(){return function(){h({operation:"replace",pane:{type:"codeEditor",data:{path:c}}})}},[h,c]);return c?A?(0,y.Y)(p_,{message:A}):f&&!v?null:(0,y.Y)(K.dz.Provider,{value:S,children:(0,y.FD)(pA.GK.Provider,{value:_,children:[(0,y.Y)(pS,{filePath:c,isHidden:null!=f&&f,deeplink:C,onDeeplinkUpdated:k,hideMobileKeyboardToolbar:!0,performPaneOperation:h},c),(0,y.Y)(pR,{path:c,isActive:p,performPaneOperation:h})]})}):null}},39602:(e,n,t)=>{"use strict";t.d(n,{sx:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment AiChatMessageUser on User {\n    id\n    username\n    fullName\n    image\n    url\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  query AiChatMessageUserData($id: Int!) {\n    user(id: $id) {\n      ...AiChatMessageUser\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u);function p(e){var n=(0,r._)({},c,e);return a.I(d,n)}},39668:(e,n,t)=>{"use strict";t.d(n,{n:()=>l});var r=t(12694),i=t(21462),o=t(67917),a=t(73176);function l(e){var n=(0,r._)((0,i.useState)(),2),t=n[0],l=n[1],s=(0,o.NC)(),c=e?s.sessions.get(e):s.sessions.agent.current;return(0,a.q3)(c,{next:function(e){l(e)}}),{session:t,setSession:l}}},40008:(e,n,t)=>{"use strict";t.d(n,{A:()=>eJ});var r=t(29935),i=t(82643),o=t(21462),a=t(90629),l=t(37743);function s(e){return JSON.stringify({text:e})+"\n"}var c=function(){function e(){(0,l._)(this,e),this.list=[]}var n=e.prototype;return n.add=function(e,n,t){this.list.push({prefix:e,suggestion:n,tokens:t}),this.list.length>25&&this.list.pop(),this.list.sort(function(e,n){return n.suggestion.length-e.suggestion.length})},n.retrieve=function(e,n){for(var t=0;t<this.list.length;t++){var r=this.list[t],i=r.prefix,o=r.suggestion,a=r.tokens;if(2*a<n)continue;if(e===i)return s(o);if(i.length>e.length||i.length+o.length<=e.length||2*Math.floor((i.length+o.length-e.length)/(o.length/a))<n)continue;var l=o.lastIndexOf("\n");if(-1===l||!(l<=e.length-i.length)){var c=i+o;if(c.startsWith(e)){var u=c.slice(e.length);if(u.trim().length)return s(u)}}}return null},e}(),u=t(96614),d=t(49069),p=t(45773),f=t(92337),h=d.sj.define({combine:function(e){var n;return null!=(n=e.filter(Boolean)[0])?n:null}}),m=t(43246),g=t(16055),v=t(42413),y=t(30860),w=d.sU.define({create:function(){return null},update:function(e,n){if(n.annotation(y.A)||!n.state.field(g.RJ).stopped)return null;if(!n.docChanged&&!n.selection)return e;var t=n.newDoc,r=n.newSelection.main.head;return n.annotation(d.ZX.remote)?null!==e&&(0,m.Ph)(t,r)&&(0,m.$s)(t,r)?e:null:n.selection&&n.isUserEvent("select")?(0,m.Ph)(t,r)&&(0,m.$s)(t,r)?Date.now():null:n.docChanged&&null!==e?(0,m.Ph)(t,r)&&(0,m.$s)(t,r)?e:null:e}}),b=function(){function e(n){(0,l._)(this,e),this.view=n,this.timeout=null}var n=e.prototype;return n.update=function(e){var n=this,t=e.startState.field(w),r=e.state.field(w);t!==r&&(null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),null!==r&&(this.timeout=setTimeout(function(){n.timeout=null,n.view.dispatch({effects:[v.hB.of(v.l9.NOW)]})},2500)))},n.destroy=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),S=p.Z9.fromClass(b,{provide:function(){return w}}),Y=t(48122),_=t(17844),A=t(93629),C=t(44725),k=t(68866),x=t(70636),D=function(e){return e[e.SUFFIX=2]="SUFFIX",e[e.HIGH=1]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-1]="LOW",e}({}),E=d.sj.define({combine:function(e){var n=e.filter(Boolean);return function(e){return n.map(function(n){return"function"==typeof n?n(e):n}).filter(Boolean).flat()}}}),R=function(){function e(n){if((0,l._)(this,e),this.priority=null!=(t=n.priority)?t:D.NORMAL,this.header=null!=(r=n.header)?r:"",this.segments=n.segments,this.accepted=0,this.curLength=0,this.segments.length){var t,r,i=this.header?this.header.length+1:0;this.maxLength=i+this.segments.reduce(function(e,n){return e+n.length},0),this.minLength=this.isSuffix?i+this.segments[0].length:i+this.segments[this.segments.length-1].length}else this.maxLength=0,this.minLength=0}var n=e.prototype;return n.acceptSegment=function(e){if(this.accepted===this.segments.length)return 0;var n=this.isSuffix?this.segments[this.accepted]:this.segments[this.segments.length-this.accepted-1],t=0===this.accepted&&this.header?this.header.length+n.length+1:n.length;return t>e?0:(this.accepted++,this.curLength+=t,t)},n.acceptAll=function(){this.accepted=this.segments.length,this.curLength=this.maxLength},n.finalize=function(){return 0===this.accepted?null:(this.header?this.header+"\n":"")+(this.isSuffix?this.segments.slice(0,this.accepted).join("").trimEnd():this.segments.slice(this.segments.length-this.accepted).join("").trimEnd())},e.acceptSegments=function(e,n){for(var t=n;n>0;){var r=!1,i=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value.acceptSegment(n);c&&(n-=c,r=!0)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(!r)break}return t-n},(0,Y._)(e,[{key:"isSuffix",get:function(){return this.priority===D.SUFFIX}}]),e}(),I=function(){function e(n){(0,l._)(this,e),this.priority=n,this.chunks=[],this.size=0}var n=e.prototype;return n.add=function(e){this.chunks.push(e),this.size+=e.maxLength},n.resize=function(e){if(e<this.accepted)throw Error("Cannot resize below already accepted");this.size=e},n.accept=function(){R.acceptSegments(this.chunks,this.size-this.accepted)},e.fromChunkViews=function(n){var t=[],r=new Map,i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,u=r.get(c.priority);u||(u=new e(c.priority),t.push(u),r.set(c.priority,u)),u.add(c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t},(0,Y._)(e,[{key:"accepted",get:function(){return this.chunks.reduce(function(e,n){return e+n.curLength},0)}},{key:"empty",get:function(){return 0===this.size}}]),e}(),T=function(){function e(n,t){(0,l._)(this,e),this.cooldown=n,this.ignored=t}var n=e.prototype;return n.delay=function(n){return new e(Date.now()+n,this.ignored)},n.ignore=function(n){return this.ignored!==n?new e(this.cooldown,n):this},n.vent=function(){return null!==this.cooldown?new e(null,this.ignored):this},n.clear=function(){return null!==this.cooldown||null!==this.ignored?new e(null,null):this},n.tick=function(){return null!==this.cooldown&&Date.now()>this.cooldown?this.vent():this},n.handle=function(e,n){switch(n.reason){case g.UW.FULLY_TYPED_INTO:case g.UW.ACCEPTED_BY_USER:return this.clear();case g.UW.DISMISSED_BY_USER:return this.delay(5e3).ignore(e.suggestion.content);case g.UW.INCOMPATIBLE_DOCUMENT_CHANGE:case g.UW.INCOMPATIBLE_CURSOR_CHANGE:return e.suggestion.ctx.onEmptyLine?this.delay(5e3):this.delay(1e3)}return this},n.isIgnored=function(e){return null!==this.ignored&&function(e,n){for(var t=Math.max(e.length,n.length),r=0,i=0;i<t;i++)e[i]!==n[i]&&r++;return 1-r/t}(this.ignored,e)>=.8},(0,Y._)(e,[{key:"cooling",get:function(){return null!==this.cooldown&&Date.now()<this.cooldown}},{key:"remaining",get:function(){return null!==this.cooldown?Math.max(0,this.cooldown-Date.now()):0}}]),e}(),F=d.sj.define({combine:function(e){return!e.length||e[0]}}),P=d.sU.define({create:function(){return new T(null,null)},update:function(e,n){if(!n.state.facet(F)||(e=e.tick()).cooling)return e;var t=n.startState.field(g.RJ,!1),r=n.state.field(g.RJ,!1);return t&&r&&t.presented&&r.stopped?e.handle(t,r):e}}),L=t(46434),U=t(35602),N=t.n(U),O=["o17pu","o1gpu","ovgpu","ovgpure","ovgpuref","ovgpurf","ovgpuva","ovgpuvat","o!gpu","pnzfyhg","pnzjuber","puvap","puvax","pbba","pbbaf","phaavr","phag","phagsnpr","phagubyr","phagyvpx","phagyvpx","phagyvpxre","phagyvpxre","phagyvpxvat","phagyvpxvat","phagent","phagf","qnexvr","qngr encr","qngrencr","snt","sntont","sntt","snttvat","snttvg","snttvgg","snttbg","snttf","sntbg","sntbgf","sntf","sntgneq","sngnff","shpxgneq","shpxgneqf","tnat onat","tnatonat","tnatonatrq","tnatonatrq","tnatonatf","tnlgneq","tnljnq","tbngpk","tbngfr","tevatb","ubne","ubner","ubre","ubbxre","wnvy onvg","wnvyonvg","wnc","wvtnobb","wvttnobb","wvttreobb","xhag","y3v+pu","y3vgpu","yrzba cnegl","ybyvgn","a1ttn","a1ttre","anzoyn","arteb","avtt3e","avtt4u","avttn","avttnu","avttnf","avttnm","avttre","avttref","avtyrg","avt abt","dhrreonvg","dhrreubyr","encr","encvat","encvfg","ergneq","ehfxv","furznyr","fubgn","fxnax","fyhg","fyhgont","fyhgf","jrgonpx","juvgr cbjre","juber"],M=O.reduce(function(e,n){return Math.max(e,n.length)},0),H=new RegExp("(?:\\w+[^\\S\\n]*)?\\w*[^]{".concat(M,"}$")),B=null,z=function(){function e(n){var t=this;(0,l._)(this,e),this.config=n,this.finished=!1,this.abortController=new AbortController,this.suggestion="",this.promise=this.start(),this.abortController.signal.addEventListener("abort",function(){if(!t.finished){var e,n;t.finished=!0,null==(e=(n=t.config).onFinished)||e.call(n,null)}})}var n=e.prototype;return n.start=function(){var e=this;return(0,r._)(function(){var n,t,r,o,a,l,s,c,u,d,p,f,h,m,g,v,y,w,b;return(0,i.YH)(this,function(i){switch(i.label){case 0:i.trys.push([0,13,,14]),r=e.config.prefix.toString(),l=e.config.request({prefix:r,suffix:null!=(o=e.config.suffix)?o:void 0,header:null!=(a=e.config.header)?a:void 0,language:e.config.language,maxTokens:e.config.maxTokens,signal:e.abortController.signal}),s=!0,c=!1,u=!1,i.label=1;case 1:i.trys.push([1,6,7,12]),p=(0,L._)(l),i.label=2;case 2:return[4,p.next()];case 3:if(!(c=!(f=i.sent()).done))return[3,5];if(function(e,n){if(n){var t,r;"string"!=typeof n&&(n=n.sliceString(Math.max(0,n.length-2*M))),e=(null!=(r=null==(t=n.match(H))?void 0:t[0])?r:n)+e}if(null===B){var i=O.map(function(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+("n">e.toLowerCase()?13:-13))})}).map(function(e){return N()(e.toLowerCase().trim())}).sort(function(e,n){return n.length-e.length}).join("|"),o="\\b|\\d|_";B=RegExp("(?:".concat(o,")(?:").concat(i,")(?:").concat(o,")"),"i")}return B.test(e)}(h=f.value,s?r:e.suggestion))return e.abort(),null==(m=(g=e.config).onError)||m.call(g,Error("Slur detected in output")),[3,5];if(e.suggestion+=h,e.config.onTextReceived&&!1===e.config.onTextReceived(e.suggestion,s))return e.abort(),[3,5];s=!1,i.label=4;case 4:return c=!1,[3,2];case 5:return[3,12];case 6:return v=i.sent(),u=!0,d=v,[3,12];case 7:if(i.trys.push([7,,10,11]),!(c&&null!=p.return))return[3,9];return[4,p.return()];case 8:i.sent(),i.label=9;case 9:return[3,11];case 10:if(u)throw d;return[7];case 11:return[7];case 12:return[3,14];case 13:return y=i.sent(),e.aborted||e.abort(),y instanceof DOMException&&"AbortError"===y.name||null==(w=(b=e.config).onError)||w.call(b,y),[3,14];case 14:if(e.aborted)return[2,null];return e.finished=!0,null==(n=(t=e.config).onFinished)||n.call(t,e.suggestion),[2,e.suggestion]}})})()},n.abort=function(){this.aborted||this.abortController.abort()},n.then=function(e,n){return this.promise.then(e,n)},(0,Y._)(e,[{key:"aborted",get:function(){return this.abortController.signal.aborted}}]),e}(),W=t(72987),G=t(57043),V=t(26968),Z=function(){function e(n,t,r,i,o){(0,l._)(this,e),this.text=n,this.pos=t,this.docA=r,this.treeA=i,this.parser=o}var n=e.prototype;return n.hasTree=function(){return null!==this.parser&&null!==this.treeA},n.update=function(n){var t=this,r=new e(n,this.pos,this.docA,this.treeA,this.parser);if(r._line=this._line,r._onEmptyLine=this._onEmptyLine,r._inEmptyBlock=this._inEmptyBlock,r._blockA=this._blockA,this.parser&&this.treeA&&(this.reuseData||this._treeB)){var i=(0,V.s)(this.text,n),o=[];i.iterChanges(function(e,n,r,i,a){o.push({from:t.pos+e,to:t.pos+n,insert:a})});var a=d.VR.of(o,this.docB.length);this.reuseData&&!this._treeB?r.reuseData={diff:this.reuseData.diff.compose(a),docB:this.reuseData.docB,treeB:this.reuseData.treeB}:this._treeB&&(r.reuseData={diff:a,docB:this.docB,treeB:this._treeB})}return r},(0,Y._)(e,[{key:"line",get:function(){return void 0===this._line&&(this._line=this.docA.lineAt(this.pos)),this._line}},{key:"onEmptyLine",get:function(){return void 0===this._onEmptyLine&&(this._onEmptyLine=(0,m.Im)(this.line)),this._onEmptyLine}},{key:"changesAtoB",get:function(){return void 0===this._changesAtoB&&(this._changesAtoB=d.VR.of({from:this.pos,to:this.docA.length,insert:this.text},this.docA.length)),this._changesAtoB}},{key:"docB",get:function(){return void 0===this._docB&&(this._docB=this.reuseData?this.reuseData.diff.apply(this.reuseData.docB):this.changesAtoB.apply(this.docA)),this._docB}},{key:"treeB",get:function(){return void 0===this._treeB&&(this.treeA&&this.parser?this.reuseData?this._treeB=(0,G.B)({parser:this.parser,changes:this.reuseData.diff,text:this.docB,base:this.reuseData.treeB}):this._treeB=(0,G.B)({parser:this.parser,changes:this.changesAtoB,text:this.docB,base:this.treeA}):this._treeB=null),this._treeB}},{key:"inEmptyBlock",get:function(){return void 0===this._inEmptyBlock&&(this._inEmptyBlock=!!this.treeA&&(0,W.G2)(this.docA,this.treeA,this.pos)),this._inEmptyBlock}},{key:"blockA",get:function(){return void 0===this._blockA&&(this._blockA=this.treeA?(0,W.gJ)(this.treeA,this.pos):null),this._blockA}},{key:"blockB",get:function(){return void 0===this._blockB&&(this._blockB=this.treeB?(0,W.gJ)(this.treeB,this.pos):null),this._blockB}}]),e}(),j=t(86105),q=t(18254);function K(e,n,t){var r,i=null!=(r=e.prop(n<0?q.uY.openedBy:q.uY.closedBy))?r:null;if(null===i||t&&!i.includes(t.name))if(!t)return null;else i=i?(0,j._)(i).concat([t.name]):[t.name];return i}function $(e,n,t){var r=K(e.type,n,t);if(null===r)return null;for(var i=e.cursor(),o=0;n<0?i.prevSibling():i.nextSibling();){if(0===o&&i.from!==i.to&&r.includes(i.name))return i.node;if(null!==K(i.type,n)){o++;continue}if(null!==K(i.type,-n)){if(0===o)return null;o--}}return null}var J=t(18018),Q=/[([{]+(?=\s*$)/,X=function(){function e(n,t,r,i,o){(0,l._)(this,e),this.source=n,this.pos=t,this.newlines=r,this.content=i,this.ctx=o,this.empty=(0,m.Im)(i),this.text=this.empty?"":r+i,this.lines=(0,m.uz)(i)}var n=e.prototype;return n.with=function(n){var t=this.source,r=this.content,i=this.newlines;if("source"in n&&void 0!==n.source){t=n.source;var o=(0,m.BA)(t);r=o.indentation+o.content,i=o.newlines}if("text"in n&&void 0!==n.text){var a=(0,m.BA)(n.text);r=a.indentation+a.content,i=a.newlines}"content"in n&&void 0!==n.content&&(r=n.content),"newlines"in n&&void 0!==n.newlines&&(i=n.newlines);var l=this;if(t!==this.source||r!==this.content||i!==this.newlines){var s=this.ctx.update((0,m.Im)(r)?"":i+r);l=new e(t,this.pos,i,r,s)}return!l.empty&&n.process&&(l="boolean"==typeof n.process?l.process():l.process(n.process)),l},n.slice=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?this.with({text:this.text.slice(e,n)}):this.with({content:this.content.slice(e,n)})},n.splice=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r?this.text:this.content,o=i.slice(0,e),a=i.slice(e+n);return r?this.with({text:o+t+a}):this.with({content:o+t+a})},n.clip=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.pos>=e)return this.slice(0,a.index+a.offset,!0)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return this},n.stopAtLine=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n?this.newlines.length:0;if(e<0||e>this.lines.length+t)throw Error("Index out of range: "+e);if(n&&e<t)return this.with({text:this.newlines.slice(0,e)});for(var r=e-t;r<this.lines.length&&(0,m.zb)(this.lines[r]);)r++;var i=this.lines.slice(0,r).join("\n");return this.with({content:i})},n.trimEnd=function(){return this.with({content:this.content.trimEnd()})},n.removeNewlinesIfOnEmptyLine=function(){return this.newlines&&this.ctx.onEmptyLine?this.with({newlines:""}):this},n.cutSuggestion=function(){if(this.empty)return this;if((0,m.zb)(this.lines[0])||!this.ctx.hasTree())return this.stopAtLine(1);var e=(0,W.gu)(this.ctx.treeB,this.pos);if(!e.length)return this.stopAtLine(1);var n=this.pos+this.lines[0].length,t=this.ctx.inEmptyBlock?e:e.filter(function(e){return e.from<=n}),r=t.length?t[t.length-1].to-this.pos:null;return(null!==r&&r<0&&(r=null),this.ctx.blockB&&this.ctx.blockB.node.from<this.pos&&(null===r||r>this.ctx.blockB.node.to-this.pos)&&(this.ctx.inEmptyBlock||!this.ctx.blockA||this.ctx.blockA.node.from<this.ctx.blockB.node.from)&&(r=this.ctx.blockB.node.to-this.pos),null===r)?this.ctx.inEmptyBlock?this.ctx.blockA?this.clip(this.ctx.blockA.node.to):this:this.ctx.blockA?this.stopAtLine(1).clip(this.ctx.blockA.node.to):this.stopAtLine(1):this.ctx.blockA&&(this.ctx.inEmptyBlock||!this.ctx.onEmptyLine)?this.slice(0,r,!0).clip(this.ctx.blockA.node.to):this.slice(0,r,!0)},n.clearIfContentIsIsolated=function(){if(!this.ctx.onEmptyLine)return this;if(this.newlines)return this.with({content:""});if(1===this.segments.length&&0===this.segments[0].offset)return this;var e=this.segments.find(function(e){return!(0,m.Im)(e.text.slice(e.offset))});return e&&this.ctx.docA.lineAt(e.pos).number!==this.ctx.line.number?this.with({content:""}):this},n.removeDuplicateLastLine=function(){if(!this.newlines&&1===this.lines.length&&!this.ctx.onEmptyLine)return this;var e=this.segments[this.segments.length-1];if(e.offset===e.text.length-1)return this;var n=this.ctx.docA.lineAt(e.pos);if(n.number===this.ctx.docA.lines)return this;var t=e.text.slice(e.offset),r=t.lastIndexOf("\n"),i=-1!==r,o=i?e.index+e.offset+r:e.index+e.offset,a=i?t.slice(r+1):t;return(0,m.Im)(a)?this:(!i&&(0,m.Im)(n)&&(a=n.text+a),a===this.ctx.docA.line(n.number+1).text)?this.slice(0,o,!0):this},n.removeTrailingOpenBrackets=function(){var e=Q.exec(this.content);return e?this.splice(e.index,e.length):this},n.process=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.skipComplexProcessing?this.trimEnd().removeNewlinesIfOnEmptyLine():this.removeNewlinesIfOnEmptyLine().cutSuggestion().trimEnd().removeDuplicateLastLine().removeTrailingOpenBrackets().trimEnd().clearIfContentIsIsolated()},e.create=function(n,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=(0,m.BA)(n),l=a.indentation+a.content,s=a.newlines,c=new Z((0,m.Im)(l)?"":s+l,t,r,i,o);return new e(n,t,s,l,c)},(0,Y._)(e,[{key:"segments",get:function(){if(void 0===this._segments){if(this.ctx.hasTree()){var e,n=function(e){var n=function(e){var n,t,r,i,o=e.insertion,a=e.pos;if("doc"in e){var l=e.parser;n=e.doc,t=e.tree;var s=d.VR.of({from:a,to:n.length,insert:o},n.length);r=s.apply(n),i=(0,G.B)({parser:l,changes:s,text:r,base:t})}else n=e.docA,t=e.treeA,r=e.docB,i=e.treeB;return{insertion:o,pos:a,docA:n,treeA:t,docB:r,treeB:i}}(e),t=n.insertion,r=n.pos,i=n.docA,o=n.treeA,a=n.docB,l=n.treeB,s=[],c=[],u=l.cursor();do{if(null===K(u.type,-1))continue;var p=u.node,f=$(p,-1);if(f&&f.to<=r){var h=function(e,n){for(var t=n.resolveInner(e.from,1).node;t&&t.from===e.from;){if(t.type===e.type)return t;t=t.parent}return null}(f,o);if(h){s.push({openA:h,closeB:p});var m=$(h,1,p.type);m&&m.from>=r&&c.push(m)}}}while(u.prev()&&u.to>r);if(0===s.length||0===c.length)return null;var g=[],v=!0,y=!1,w=void 0;try{for(var b,S=s[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value,_=Y.openA,A=Y.closeB,C=a.sliceString(A.from,A.to),k=K(_.type,1,A.type);if(null===k)throw Error("Unexpected null matching types");for(var x=0;x<c.length;x++){var D=c[x];if(k.includes(D.name)&&i.sliceString(D.from,D.to)===C){c.splice(0,x+1),g.unshift({closeA:D,closeB:A});break}}}}catch(e){y=!0,w=e}finally{try{v||null==S.return||S.return()}finally{if(y)throw w}}if(0===g.length)return null;var E=[{text:t,pos:r,index:0,offset:0}],R=0,I=!0,T=!1,F=void 0;try{for(var P,L=g[Symbol.iterator]();!(I=(P=L.next()).done);I=!0){var U=P.value,N=U.closeA,O=U.closeB,M=E.pop();if(!M)throw Error("Unexpected empty split");var H=O.from-r,B=0;if(M.pos<N.from){for(var z=1;function(e,n,t,r){var i=e.sliceString(t,t+1);return i===n.sliceString(r,r+1)&&""===i.trim()}(i,a,N.from-z,O.from-z)&&N.from-z>=M.pos&&O.from-z>=r;)z++;B=z-1}H-=B;var W={text:t.slice(R,H),pos:M.pos,index:M.index,offset:M.offset},V={text:t.slice(H),pos:N.to,index:H,offset:N.to-N.from+B};R=H,E.push(W,V)}}catch(e){T=!0,F=e}finally{try{I||null==L.return||L.return()}finally{if(T)throw F}}return""===E[E.length-1].text&&E.pop(),E}({insertion:this.text,pos:this.pos,docA:this.ctx.docA,treeA:this.ctx.treeA,docB:this.ctx.docB,treeB:this.ctx.treeB});n&&(this._segments=n)}null!=this._segments||(this._segments=[{text:this.text,index:0,pos:this.pos,offset:0}])}return this._segments}},{key:"insertions",get:function(){if(void 0===this._insertions){var e=new d.vB,n=!0,t=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=d.EY.of((0,m.uz)(a.text)),s=new J.kp(l,a.offset);e.add(a.pos,a.pos,s)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}this._insertions=e.finish()}return this._insertions}}]),e}(),ee=t(78811),en=function(){function e(n){(0,l._)(this,e),this.view=n,this.destroyed=!1,this.stream=null,this.debounceTimeout=null,this.queued=!1,this.lastPrefixLength=0}var n=e.prototype;return n.dispatchSuggestion=function(e){this.view.dispatch({effects:g.xq.of(e)})},n.dismiss=function(e){this.queued=!1,null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.stream||this.stream.finished||this.stream.aborted||this.stream.abort(),this.destroyed||this.suggestion.stopped||this.dispatchSuggestion(this.suggestion.dismiss(e)),this.listeners.onDismiss(this.view)},n.requestSuggestion=function(e){var n,t,r=this;if(null!==this.config&&null!==this.fileTypeConfig){if(null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.config.debounceAlways&&!this.regulator.cooling&&e===v.l9.NOW)return void this.requestSuggestionImmediately();var i=this.view.state.selection.main.head,o=this.view.state.wordAt(i),a=o&&o.from!==i?null!=(t=this.config.debounceTimeInsideWord)?t:0:null!=(n=this.config.debounceTimeOutsideWord)?n:0;this.regulator.cooling&&(a=Math.max(a,this.regulator.remaining)),0===a?this.requestSuggestionImmediately():this.debounceTimeout=setTimeout(function(){r.debounceTimeout=null,r.requestSuggestionImmediately()},a)}},n.requestSuggestionImmediately=function(){var e,n,t,r=this;if(this.dismiss(),!this.suggestion.stopped)throw Error("dismiss should have stopped the suggestion");if(null!==this.config&&null!==this.fileTypeConfig&&!this.destroyed&&this.view.hasFocus&&(0,m.Ph)(this.view.state.doc,this.view.state.selection.main.head)){var i=this.config,o=this.view.state,l=o.selection.main.head,s=o.doc,c=(0,C.mv)(o),d=null!=(n=null==(e=o.facet(C.BH))?void 0:e.parser)?n:null,p=this.fileTypeConfig,f={skipComplexProcessing:null!=(t=p.skipComplexProcessing)&&t},h=o.facet(E),y=function(e){var n=e.doc,t=e.pos,r=e.path,i=e.context,o=e.limit,a=void 0===o?u.HB:o,l=e.reserved,s=void 0===l?u.CB:l,c="-- ".concat(r,"\n");if(c.length>a)throw Error("Cannot fit required header parts in prompt");var d="";if(null==i?void 0:i.length){var p=function(e,n){if((n-=2*e.length)<=0)return null;var t=e.map(function(e){return new R(e)}).filter(function(e){return e.maxLength>0&&e.minLength<=n}).sort(function(e,n){return e.priority===n.priority?e.minLength-n.minLength:n.priority-e.priority});if(!t.length)return null;var r=I.fromChunkViews(t),i=r.reduce(function(e,n){return e+n.size},0);if(i>n){var o=!0,a=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;u.size>n&&(i-=u.size-n,u.resize(n))}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}for(var d=r.find(function(e){return e.priority===D.SUFFIX}),p=d?n-d.size:0;i>n;){var f=1,h=!0,m=!1,g=void 0;try{for(var v,y=r[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var w=v.value;if(p&&w.priority===D.SUFFIX){p--;continue}if(!w.empty){var b=Math.max(0,w.size-f);i-=w.size-b,w.resize(b),f++}}}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}}var S=!0,Y=!1,_=void 0;try{for(var A,C=r[Symbol.iterator]();!(S=(A=C.next()).done);S=!0){var k=A.value;k.empty||k.accept()}}catch(e){Y=!0,_=e}finally{try{S||null==C.return||C.return()}finally{if(Y)throw _}}var x=r.reduce(function(e,n){return e+n.accepted},0);x<n&&R.acceptSegments(t,n-x)}else t.forEach(function(e){return e.acceptAll()});var E=t.filter(function(e){return e.priority===D.SUFFIX}).map(function(e){return e.finalize()}).filter(Boolean).join("")||null,T=t.filter(function(e){return e.priority!==D.SUFFIX}).map(function(e){return e.finalize()}).filter(Boolean).reverse().join("\n\n")||null;return T||E?{context:T,suffix:E}:null}(i,Math.max(s-c.length-2,a-t-c.length-2));(null==p?void 0:p.context)&&(c=(null==p?void 0:p.context)+"\n\n"+c),(null==p?void 0:p.suffix)&&(d=null==p?void 0:p.suffix)}var f=function(e,n,t){for(var r=e.slice(0,n);r.length>t;)r=r.lines>1?r.slice(r.line(1).to+1):r.slice(r.length-t);return r}(n,t,a-c.length-d.length);if(c.length+f.length+d.length>a)throw Error("Prompt is over the maximum length");return{prefix:f,suffix:d,header:c}}({doc:s,pos:l,path:p.path,context:h(this.view)}),w=y.prefix,b=y.suffix,S=y.header,Y=(0,W.G2)(s,c,l)?u.nm.EMPTY_BLOCK:u.nm.DEFAULT;this.lastPrefixLength=w.length,i.backendOnly||this.dispatchSuggestion(this.suggestion.start()),this.stream=new z({request:i.request,language:p.id,maxTokens:Y,prefix:w,suffix:b,header:S,onTextReceived:function(e,n){if(n&&r.listeners.onRequestFirstEmit(r.view),i.backendOnly)return void r.listeners.onRequestIgnoredBackendOnly(r.view);if(r.suggestion.stopped||!n&&r.suggestion.slotted)return!1;var t=r.suggestion.slotted?r.suggestion.upgrade(X.create(e,l,s,c,d).process(f)):r.suggestion.with({source:e,process:f});if(t.stopped||t.suggestion.empty)return!1;r.dispatchSuggestion(t)},onFinished:function(e){var n=r.queued;if(r.queued=!1,!i.backendOnly){if(e&&r.suggestion.active){var t=r.suggestion.suggestion.source!==e?r.suggestion.with({source:e,process:f}):r.suggestion;if(!t.stopped&&!t.suggestion.empty&&!r.regulator.isIgnored(t.suggestion.content)){r.dispatchSuggestion(t.presented?t:t.present()),r.listeners.onRequestCompletelyPresented(r.view);return}}r.dismiss(g.UW.INCOMPATIBLE_SUGGESTION),n&&r.requestSuggestion(v.l9.ENQUEUE),""===e&&r.listeners.onRequestEndedWithNoSuggestion(r.view)}},onError:function(e){a.v4(function(n){n.setExtra("prefix",w.toString()),n.setExtra("suffix",null==b?void 0:b.toString()),n.setExtra("header",S),n.setExtra("maxTokens",Y),n.setExtra("filePath",p.path),n.setExtra("language",p.id),n.setExtra("selection-head",l),n.setExtra("previous-character",s.sliceString(l-1,l)),n.setTag("ghostwriter",!0),a.Cp(e)})}})}},n.postUpdate=function(e){var n=e.startState.field(g.RJ,!1),t=e.state.field(g.RJ,!1);n&&t&&n.presented&&t.stopped&&t.reason===g.UW.FULLY_TYPED_INTO&&this.listeners.onSuggestionAccepted(this.view,n),(0,k.$H)(e,h,ee.Md,ee.O7)&&this.dismiss(),(0,k.$H)(e,g.RJ)&&this.suggestion.stopped&&this.streaming&&this.dismiss();var r=(0,v.SQ)(e.transactions);switch(r){case v.l9.STOP:this.active&&this.dismiss();break;case v.l9.ENQUEUE:case v.l9.NOW:this.active?this.queued=!0:this.requestSuggestion(r)}},n.destroy=function(){this.destroyed=!0,this.dismiss()},(0,Y._)(e,[{key:"config",get:function(){return this.view.state.facet(h)}},{key:"listeners",get:function(){return this.view.state.facet(x.q)}},{key:"suggestion",get:function(){return this.view.state.field(g.RJ)}},{key:"regulator",get:function(){return this.view.state.field(P)}},{key:"fileTypeConfig",get:function(){var e,n=this.view.state.facet(ee.Md),t=this.view.state.facet(ee.O7),r=null==t||null==(e=t.getFeature("ai"))?void 0:e.complete;return n&&t&&(null==r?void 0:r.enabled)?(0,A._)((0,_._)({},r),{id:t.id,path:n}):null}},{key:"streaming",get:function(){return null!==this.debounceTimeout||null!==this.stream&&!this.stream.finished}},{key:"active",get:function(){return this.streaming||!this.suggestion.stopped}}]),e}(),et=p.Z9.fromClass(en,{provide:function(e){return p.Lz.updateListener.of(function(n){var t;null==(t=n.view.plugin(e))||t.postUpdate(n)})}}),er=function(){function e(n){(0,l._)(this,e),this.view=n,this.gesture=null,this.touchstart=this.touchstart.bind(this),this.touchmove=this.touchmove.bind(this),this.touchend=this.touchend.bind(this),this.touchcancel=this.touchcancel.bind(this),n.dom.addEventListener("touchstart",this.touchstart)}var n=e.prototype;return n.shouldAllowSwiping=function(){if(!this.view.hasFocus)return!1;var e=this.view.state.selection.main.head,n=this.view.viewport;if(n.from>e||n.to<e)return!1;var t=this.view.state.field(g.RJ,!1);return!!(null==t?void 0:t.presented)},n.stop=function(){this.gesture&&(this.gesture=null,document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel))},n.touchFor=function(e){if(!this.gesture)return null;var n=!0,t=!1,r=void 0;try{for(var i,o=e.changedTouches[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.identifier===this.gesture.id)return a}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null},n.touchstart=function(e){if(this.gesture&&!this.gesture.time)return this.stop();if(!this.gesture&&this.shouldAllowSwiping()&&1===e.changedTouches.length){var n=e.changedTouches[0];this.gesture={id:n.identifier,start:{x:n.clientX,y:n.clientY},end:{x:n.clientX,y:n.clientY},time:null},document.addEventListener("touchmove",this.touchmove,{passive:!1}),document.addEventListener("touchend",this.touchend,{passive:!1}),document.addEventListener("touchcancel",this.touchcancel)}},n.touchmove=function(e){var n=this.touchFor(e);if(this.gesture&&n){if(this.gesture.end.x=n.clientX,this.gesture.end.y=n.clientY,this.gesture.time&&Date.now()-this.gesture.time>500)return this.stop();var t=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);if(t>20)return this.stop();if(r>10){if(this.gesture.start.x>this.gesture.end.x)return this.stop();this.gesture.time||(this.gesture.time=Date.now()),e.preventDefault()}}},n.touchend=function(e){var n=this.touchFor(e);if(this.gesture&&n){this.gesture.end.x=n.clientX,this.gesture.end.y=n.clientY;var t=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);t<=20&&r>75&&this.gesture.start.x<this.gesture.end.x&&(!this.gesture.time||Date.now()-this.gesture.time<500)&&((0,f.R)(this.view),e.preventDefault()),this.stop()}},n.touchcancel=function(e){this.touchFor(e)&&this.stop()},n.update=function(){this.gesture&&!this.shouldAllowSwiping()&&this.stop()},n.destroy=function(){this.view.dom.removeEventListener("touchstart",this.touchstart),document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel)},e}(),ei=p.Z9.fromClass(er),eo=t(61191),ea=d.sj.define({combine:function(e){var n;return null!=(n=e.filter(Boolean)[0])?n:null},enables:function(e){return[h.compute([e],function(n){return n.facet(e)}),g.RJ,v.Lf,et,ei,S,P,d.Nb.high(p.w4.compute([e],function(n){var t=n.facet(e),r=[];return(null==t?void 0:t.keyAcceptSuggestion)&&r.push({key:(0,eo.bK)(t.keyAcceptSuggestion),run:f.R}),(null==t?void 0:t.keyDismissSuggestion)&&r.push({key:(0,eo.bK)(t.keyDismissSuggestion),run:f.b}),r}))]}}),el=t(56902),es=t(4620),ec=[];function eu(e){if(!(e.length>800)){var n=ec.indexOf(e);-1!==n&&ec.splice(n,1),ec.unshift(e),ec.length>10&&ec.pop()}}var ed=!1;function ep(e,n){var t=(0,es.i)(n.state),r=t.text,i=t.linewise;if(r&&r.trim())if(i){var o=r.split(n.state.lineBreak).filter(function(e){return e.trim()}),a=!0,l=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;eu(d)}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}}else eu(r)}var ef=[p.Z9.define(function(){if(!ed){ed=!0;var e=function(e){var n,t=null==(n=document.getSelection())?void 0:n.toString();t&&t.trim()&&Promise.resolve().then(function(){e.defaultPrevented||eu(t)})};document.addEventListener("copy",e),document.addEventListener("cut",e)}return{}}),d.Nb.highest(p.Lz.domEventObservers({copy:function(e,n){return ep(e,n)},cut:function(e,n){return ep(e,n)}})),E.of(function(e){if(!ec.length||!e.state.facet(ee.O7))return null;var n=(0,el._)(ec),t=n[0],r=n.slice(1),i=[];if(t&&t.trim()){var o=t.trimEnd();i.push({header:"-- Current Clipboard",segments:[o],priority:D.HIGH})}var a=r.filter(function(e){return e&&e.trim()});if(a.length){var l=a.map(function(e){return e.trimEnd().split("\n").map(function(e,n){return 0===n?"- ".concat(e):"  ".concat(e)}).join("\n")}).reverse();i.push({header:"-- Clipboard History",segments:l})}return i.length?i:null})],eh=t(12694),em=t(77359),eg=t(37032),ev=t(95707),ey=t(41467),ew=/\n\n(?![^\S\n])/g,eb=new(function(){function e(){(0,l._)(this,e),this.map=new Map}var n=e.prototype;return n.removeExpired=function(){if(this.map.size){var e=Date.now(),n=!0,t=!1,r=void 0;try{for(var i,o=this.map.entries()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,eh._)(i.value,2),l=a[0],s=a[1];e-s.timestamp>6e4&&this.map.delete(l)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},n.get=function(e){return this.removeExpired(),this.map.get(e)},n.add=function(e,n,t){if(this.removeExpired(),!this.map.has(e)&&10===this.map.size){var r=null,i=!0,o=!1,a=void 0;try{for(var l,s=this.map.values()[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;(!r||c.timestamp<r.timestamp)&&(r=c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(!r)throw Error("Expected to find entry to remove from file cache");this.map.delete(r.path)}this.map.set(e,{path:e,type:n,content:t,timestamp:Date.now()})},n.clear=function(){this.map.clear()},e}()),eS=function(){function e(n,t,r){var i=this;(0,l._)(this,e),this.view=n,this.readFile=t,this.recentFiles=r,this.destroyed=!1,this.chunks=[],this.dispose=r.subscribe(function(){return i.updateChunks()}),r.current.length&&this.updateChunks()}var n=e.prototype;return n.updateChunks=function(){var e=this;return(0,r._)(function(){var n,t,r,o,a,l,s,c,u,d,p,f,h,g,v,y,w,b,S,Y,_,A,C,k,x,E,R,I;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(e.chunks=r=[],o=e.view.state.facet(ee.Md),a=e.view.state.facet(ee.O7),!o||!a)return[2];"all"===(s=null!=(l=null==(t=a.features.ai)||null==(n=t.complete)?void 0:n.groups)?l:[])&&(s=[]),c=e.recentFiles.current.filter(function(e){return e!==o&&(0,ey.m6)(e)}),u=!0,d=!1,p=void 0,i.label=1;case 1:i.trys.push([1,7,8,9]),f=c[Symbol.iterator](),i.label=2;case 2:if(u=(h=f.next()).done)return[3,6];if(g=h.value,Y=null==(S=null!=(b=null==(w=eb.get(g))?void 0:w.type)?b:ev.Jh.from(g))||null==(v=S.features.ai)?void 0:v.complete,!S||!(null==Y?void 0:Y.enabled)||!(S.id===a.id||"all"===Y.groups||(null==(y=Y.groups)?void 0:y.some(function(e){return s.includes(e)}))))return[3,5];if(void 0!==(_=null==w?void 0:w.content))return[3,4];return[4,e.readFile(g)];case 3:if(A=i.sent(),e.destroyed||e.chunks!==r)return[2];if(null===A)return[3,5];_=A,eb.add(g,S,_),i.label=4;case 4:var T;if(!(C=!(T=(T=_).trim())?[]:T.split(ew).map(function(e){return e.trim()}).filter(Boolean)).length)return[3,5];if(k="-- ".concat((0,em.Aj)(g,o)),x=C.map(function(e){return(0,m.uz)(e).join("\n")+"\n\n"}),E=r.length,R=D.NORMAL,E<2?R=D.HIGH:E>=5&&(R=D.LOW),r.push({header:k,segments:x,priority:R}),r.length>=10)return[3,6];i.label=5;case 5:return u=!0,[3,2];case 6:return[3,9];case 7:return I=i.sent(),d=!0,p=I,[3,9];case 8:try{u||null==f.return||f.return()}finally{if(d)throw p}return[7];case 9:return[2]}})})()},n.update=function(e){(0,k.$H)(e,ee.Md,ee.O7)&&this.updateChunks()},n.destroy=function(){this.destroyed=!0,this.dispose()},e}(),eY=new eg.k(function(e,n){return e&&n?p.Z9.define(function(t){return new eS(t,e,n)},{provide:function(e){return E.of(function(n){var t,r;return null!=(r=null==(t=n.plugin(e))?void 0:t.chunks)?r:null})}}):null}),e_=E.of(function(e){var n=e.state.selection.main.head,t=e.state.doc.slice(n);if(0===t.length)return null;if(1===t.lines){var r=t.toString();return""===r.trim()?null:{segments:[r],priority:D.SUFFIX}}for(var i=[],o=1;o<=t.lines;o++)i.push(t.line(o).text+"\n");for(;i.length&&""===i[i.length-1].trim();)i.pop();return 0===i.length?null:{segments:i,priority:D.SUFFIX}}),eA=t(26608),eC=t(41989),ek=t(67917),ex={production:"https://production-ai-modelservice.replit.com",staging:"https://staging-ai-modelservice.replit.com"};function eD(){return(eD=(0,eC._)(function(e){var n,t,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=e.getReader(),i.label=1;case 1:return[4,(0,eA._)(n.read())];case 2:if(r=(t=i.sent()).done,o=t.value,r)return[3,4];return[4,o];case 3:return i.sent(),[3,1];case 4:return n.releaseLock(),[2]}})})).apply(this,arguments)}function eE(){return(eE=(0,eC._)(function(e){var n,t,r,o,a,l,s,c,u,d,p,f,h,m;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=new TextDecoder("utf-8"),t="",r=!1,o=!1,i.label=1;case 1:i.trys.push([1,11,12,17]),l=(0,L._)(function(e){return eD.apply(this,arguments)}(e)),i.label=2;case 2:return[4,(0,eA._)(l.next())];case 3:if(!(r=!(s=i.sent()).done))return[3,10];c=s.value,u=n.decode(c,{stream:!0}),t+=u,d=void 0,i.label=4;case 4:if(-1===(d=t.indexOf("\n\n")))return[3,9];if(!t.startsWith("data: ")||!("text"in(p=JSON.parse(t.slice(6,d)))))return[3,8];f=p.text.split("\n"),h=0,i.label=5;case 5:if(!(h<f.length))return[3,8];return[4,JSON.stringify({text:f[h]+"\n"})+"\n"];case 6:i.sent(),i.label=7;case 7:return h++,[3,5];case 8:return t=t.substring(d+1),[3,4];case 9:return r=!1,[3,2];case 10:return[3,17];case 11:return m=i.sent(),o=!0,a=m,[3,17];case 12:if(i.trys.push([12,,15,16]),!(r&&null!=l.return))return[3,14];return[4,(0,eA._)(l.return())];case 13:i.sent(),i.label=14;case 14:return[3,16];case 15:if(o)throw a;return[7];case 16:return[7];case 17:return[2]}})})).apply(this,arguments)}var eR=t(158),eI=t(37872),eT=t(87720),eF=new Map,eP={beforeCompletion:function(e){a.ZQ({category:"ghostwriter",message:"Called completeCode",level:"debug"});var n=eT.gv.add(e),t=eI.vF.timeStart({replid:e.replId,codeLength:e.header?e.header.length+e.prefix.length:e.prefix.length});return eF.set(n,t),n},afterCompletion:function(e,n,t,r){switch(e){case"aborted":eT.gv.abort(r),eF.delete(r);break;case"success":a.ZQ({category:"ghostwriter",message:"Suggestion emitted: "+t.partialSuggestion,level:"debug"});var i,o=eF.get(r);if(!o)throw Error("No latency logger found for handle: "+JSON.stringify(r));o("code suggestion",{type:"success",fromCache:t.fromCache,length:null==(i=t.partialSuggestion)?void 0:i.length}),eF.delete(r);break;case"finished":eT.gv.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:t.completeSuggestion});break;default:throw Error("Unknown completion kind: "+e)}},erroredCompletion:function(e,n){n&&(eT.gv.abort(n),eF.delete(n)),eI.vF.error("CompleteCode: error in completion provider",{err:String(e)})}},eL=t(76957),eU=t(79203),eN=t(21762),eO=t(30908),eM="ai.codecomplete.lastTooltipHintTimestamp",eH=(0,eL.eU)({tooltipOpen:!1,consecutiveRejections:0}),eB=t(17089),ez=t(78579),eW=t(71514),eG=t(55100),eV=t(27741),eZ=t(71424),ej=t(88873),eq=t(56262),eK=new eg.k(function(e,n,t,r,i,o,a,l){var s,c;return e?(n===eR.DB.Pro?(s=u.M,c=u.M):(s=o,c=o),[ea.of({request:i,backendOnly:n===eR.DB.BackendOnly,debounceTimeOutsideWord:s,debounceTimeInsideWord:c,debounceAlways:n!==eR.DB.Pro,keyAcceptSuggestion:t,keyDismissSuggestion:r}),a?ef:[],l?[]:F.of(!1),e_]):null}),e$=new eg.k(function(e,n,t){if(!e)return null;var r,i,o,l=(r="suggestionPresented",i=null,o=function(){},{queue:function(e){if(!(Math.random()>.1)){i&&clearTimeout(i);var n=function(){(0,eB.u4)(eB.AZ.CODE_SUGGESTION_USED,(0,_._)({type:r},e))};i=setTimeout(n,500),o=n}},flush:function(){i&&clearTimeout(i),o()},cancel:function(){i&&clearTimeout(i)}});return x.q.of({onDismiss:function(){l.cancel()},onRequestIgnoredBackendOnly:function(){a.ZQ({category:"ghostwriter",message:"called completeCode for free user but did not show the ghost text.",level:"info"}),(0,eB.u4)(eB.AZ.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",filePath:n,reason:"ghostTextNotEnabledForFreeUser"})},onRequestFirstEmit:function(e){var t=e.plugin(et);t&&(a.ZQ({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),l.queue({filePath:n,prefixLength:t.lastPrefixLength}))},onRequestEndedWithNoSuggestion:function(){a.ZQ({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,eB.u4)(eB.AZ.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",filePath:n,reason:"noSuggestion"})},onSuggestionAccepted:function(e,r){var i=e.plugin(et);i&&(l.flush(),(0,eB.u4)(eB.AZ.CODE_SUGGESTION_USED,{type:"suggestionAccepted",filePath:n,prefixLength:i.lastPrefixLength,suggestionLength:r.suggestion.content.length}),a.ZQ({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),null==t||t.recordAccept())},onSuggestionExplicitlyDismissed:function(e){var r=e.plugin(et);r&&(l.flush(),(0,eB.u4)(eB.AZ.CODE_SUGGESTION_USED,{type:"suggestionDismissed",filePath:n,prefixLength:r.lastPrefixLength}),a.ZQ({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),null==t||t.recordReject())}})});function eJ(e){var n,t,a,l,s,d,p,f,h,m,g,v=e.filePath,y=(0,eZ.A)().fs,w=(0,eG.A)(),b=(0,eW.g)("codeSuggestion").preferences,S=(0,eR.Ay)(),Y=b.codeSuggestion&&S!==eR.DB.None;(0,o.useEffect)(function(){eT.gv.toggle(Y)},[Y]);var C=(0,ej.Jn)(ez.Pi.acceptPrimaryCompletion.id),k=(0,ej.Jn)(ez.Pi.cancelCompletion.id),x=(0,eV.A)(function(){return new c},[v,w]),D=(t=(n={replId:w,provider:(0,eV.A)(function(){var e;return e=(0,r._)(function(e,n){var t,r,o,a,l,s,c,u,d;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=(0,ek.lJ)()?ex.production:ex.staging,[4,(0,ek.j2)(e.replId,"completions-1")];case 1:return r=i.sent(),o={model:"codestral-2501",context:e.header?e.header+e.prefix:e.prefix,suffix:e.suffix,max_tokens:e.maxTokens,stop_words:e.stop},[4,fetch("".concat(t,"/completions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},signal:n,body:JSON.stringify(o)})];case 2:if(l=(a=i.sent()).body,200===(s=a.status))return[3,4];return c=Error.bind,d=(u="Error (".concat(s,") response from /ai/complete: ")).concat,[4,a.text()];case 3:throw new(c.apply(Error,[void 0,d.apply(u,[i.sent()])]));case 4:if(!l)throw Error("No body in response");return[2,function(){return function(e){return eE.apply(this,arguments)}(l)}]}})}),function(n,t){return e.apply(this,arguments)}},[]),cache:x,hooks:eP}).replId,a=n.provider,l=n.cache,s=n.hooks,(0,o.useCallback)((d=(0,eC._)(function(e){var n,r,o,c,u,d,p,f,h,m,g,v,y,w,b,S,Y,_,A,C,k,x,D,E;return(0,i.YH)(this,function(R){switch(R.label){case 0:if(n=e.prefix,r=e.suffix,o=e.header,c=e.language,u=e.maxTokens,d=e.signal,!n)return[2];if(p={prefix:n,suffix:r,header:o,maxTokens:u,replId:t,stop:["\n\n","```"]},"markdown"===c&&(p.maxTokens=75,p.stop=[]),f=null==s?void 0:s.beforeCompletion(p),null===(m=l.retrieve(n,u)))return[3,1];return h=(0,eC._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,m];case 1:return e.sent(),[2]}})}),[3,4];case 1:return R.trys.push([1,3,,4]),[4,(0,eA._)(a(p,d))];case 2:return h=R.sent(),[3,4];case 3:if((null==(g=R.sent())?void 0:g.name)==="AbortError")return[2];return null==s||s.erroredCompletion(g instanceof Error?g:Error("Unknown error"),f),[2];case 4:v="",y="",w=!0,b=!1,d.addEventListener("abort",function(){f&&(null==s||s.afterCompletion("aborted",p,{},f)),b=!0}),S=!1,Y=!1,R.label=5;case 5:R.trys.push([5,13,14,19]),A=(0,L._)(h()),R.label=6;case 6:return[4,(0,eA._)(A.next())];case 7:if(!(S=!(C=R.sent()).done))return[3,12];k=C.value,y+=k,x=void 0,R.label=8;case 8:if(-1===(x=y.indexOf("\n")))return[3,11];if(D=JSON.parse(y.substring(0,x)).text,y=y.substring(x+1),v+=D,b)return[3,10];return[4,D];case 9:R.sent(),R.label=10;case 10:return!b&&w&&f&&(null==s||s.afterCompletion("success",p,{fromCache:!!m,partialSuggestion:D},f)),w=!1,[3,8];case 11:return S=!1,[3,6];case 12:return[3,19];case 13:return E=R.sent(),Y=!0,_=E,[3,19];case 14:if(R.trys.push([14,,17,18]),!(S&&null!=A.return))return[3,16];return[4,(0,eA._)(A.return())];case 15:R.sent(),R.label=16;case 16:return[3,18];case 17:if(Y)throw _;return[7];case 18:return[7];case 19:if(null===m&&v.trim().length&&l.add(n,v,u),!(!b&&y))return[3,21];return[4,y];case 20:R.sent(),R.label=21;case 21:return f&&(null==s||s.afterCompletion("finished",p,{completeSuggestion:v,fromCache:!!m},f)),[2]}})}),function(e){return d.apply(this,arguments)}),[t,l,s,a])),E=(f=(p=(0,eh._)((0,eU.fp)(eH),2))[0],h=p[1],m=(0,eN._P)({controlName:"flag-killswitch-pichu",logFlagToAnalytics:!1}),(0,o.useEffect)(function(){if(m&&f.tooltipOpen){var e=setTimeout(function(){return h(function(e){return(0,A._)((0,_._)({},e),{tooltipOpen:!1})})},2500);return function(){return clearTimeout(e)}}},[m,f.tooltipOpen,h]),(0,o.useMemo)(function(){return m?{recordAccept:function(){h(function(e){return(0,A._)((0,_._)({},e),{consecutiveRejections:0})})},recordReject:function(){h(function(e){var n=e.consecutiveRejections+1;if(n>=5){var t=eO.A.get(eM,"number");if(!t||Date.now()-t>=432e6)return eO.A.set(eM,Date.now()),(0,A._)((0,_._)({},e),{consecutiveRejections:n,tooltipOpen:!0})}return(0,A._)((0,_._)({},e),{consecutiveRejections:n})})}}:null},[m,h])),R=(0,o.useCallback)((g=(0,r._)(function(e){var n;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,y.readFile(e)];case 1:if(null!==(n=t.sent()).error)return[2,null];return[2,n.content.toString()]}})}),function(e){return g.apply(this,arguments)}),[y]),I=(0,eq.rE)(),T=(0,eN._P)({controlName:"flag-gw-magikarp-bounce-time",logFlagToAnalytics:!1,default:u.Hl,type:"number"}),F=(0,eN._P)({controlName:"flag-completely-different-clipboard",logFlagToAnalytics:!0}),P=(0,eN._P)({controlName:"flag-completely-different-regulator"}),U=[eK.use(Y,S,C,k,D,T,F,P),e$.use(Y,v,E),eY.use(R,I)];return(0,o.useMemo)(function(){return U},U)}},40036:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(86105),i=t(81073),o=t(90882),a=t.n(o),l=t(56262);function s(e){var n,t=e.repl,o=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,r._)(n.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.mU)(),null==t||null==(n=t.project)?void 0:n.title,t.title);return(0,i.Y)(a(),{children:(0,i.Y)("title",{children:o},"title")})}},40144:(e,n,t)=>{"use strict";t.d(n,{A:()=>ey,x:()=>ev});var r=t(29935),i=t(12694),o=t(82643),a=t(81073),l=t(21462),s=t(17844),c=t(12584),u=t(41114),d=t(86997);function p(){var e=(0,c._)(["\n  query ReplAuth($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        config {\n          isServer\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(13843),g=t(41467),v=t(39363),y=t(46797),w=t(14596),b=t(55100),S=t(17089),Y=t(71424),_=t(79315),A=t(19807),C="Import HTML package",k=[{title:"Get user info",content:[{type:"code",value:'<script type="module">const user = await getUserInfo() <\/script>'}]}],x=[{title:C,content:[{type:"code",value:'<script src="https://replit.com/public/js/repl-auth-v2.js"><\/script>'}]}],D=[{title:"Insert custom button",content:[{type:"code",value:'<button onclick="LoginWithReplit()"> Login </button>'}]}],E=t(86105),R=t(91326),I=t(53522),T=t(70871),F="Import Node package",P=[{title:"Get user info",content:[{type:"code",value:"const user = getUserInfo("},{type:"input",placeholder:"req"},{type:"code",value:")"}]}],L=[{title:F,content:[{type:"code",value:'const { getUserInfo } = require("@replit/repl-auth")'}]}],U=t(69961),N=t(50301),O=t(18509),M=t(27023),H=t(11769),B=t(83070),z=t(40259),W=t(41358),G=t(4616),V=t(85389),Z=t(1035),j=t(77495),q=t(48604),K=(0,O.x)({templateContainer:[M.wp.backgroundColor.backgroundRoot,M.wp.borderRadius(4),M.wp.p(4),M.wp.align.center],input:[M.wp.minWidth(64),M.wp.flex.growAndShrink(1)],codeExampleContainer:[M.wp.borderRadius(4),M.wp.flex.shrink(1)],codeExampleText:[M.wp.font.code,M.wp.color.foregroundDimmer,M.wp.py(4),M.wp.flex.growAndShrink(1)]}),$=function(e){var n=e.title,t=e.content,r=(0,i._)((0,l.useState)(t),2),o=r[0],s=r[1];return(0,a.FD)(V.S,{gap:4,children:[(0,a.FD)(V.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(G.EY,{variant:"subheadDefault",children:n}),"Get user info"===n?(0,a.Y)(B.K0,{disabled:!0,tooltipPlacement:"top",alt:"User object contains 'id', 'name', 'roles', and 'teams'",children:(0,a.Y)(q.A,{})}):null]}),(0,a.FD)(V.S,{gap:4,children:[(0,a.Y)(V.S,{css:K.templateContainer,row:!0,gap:4,justify:"center",children:t.map(function(e,t){var r=e.type;switch(r){case"input":return(0,a.Y)(z.pd,{onChange:function(e){var n=(0,E._)(o);n[t].value=e.target.value,s(n)},placeholder:e.placeholder,value:e.value||"",css:K.input},"".concat(n,"-").concat(t));case"code":return(0,a.Y)(V.S,{css:K.codeExampleContainer,children:(0,a.Y)(G.EY,{multiline:!1,css:K.codeExampleText,children:e.value})},"".concat(n,"-").concat(t));default:(0,R.A)(r)}})}),(0,a.Y)(J,{code:o.reduce(function(e,n){return"input"===n.type?e+(n.value||n.placeholder):e+n.value},""),packageImport:n===F||n===C})]})]})},J=function(e){var n=e.code,t=e.packageImport,r=(0,N.rM)(),i=(0,U.A)(r),o=(0,Y.A)().fs,l=(0,N.vO)();return i?(0,a.Y)(W.ui,{children:(0,a.Y)(H.$n,{size:"small",variant:"outlined",onClick:function(){var e,a;if(t&&r&&o)return"html"!==(0,g.an)(r)?void i({code:n,insertAt:0}):void o.readFile(r).then(function(e){if(e.error)throw e.error;var t=I.A.from(e.content).toString(),r=t.indexOf("</head>")-1;-1===r&&(r=t.indexOf("<script")),-1===r&&(r=t.indexOf("</body>")),-1===r&&(r=t.length),i({code:n,insertAt:r})});i({code:n,insertAt:null!=(a=null==(e=l())?void 0:e.position.offset)?a:0})},text:t?"Auto add":"Insert",iconRight:(0,a.Y)(Z.A,{}),css:{width:"fit-content"}})}):(0,a.Y)(W.ui,{children:(0,a.Y)(H.$n,{size:"small",variant:"outlined",onClick:function(){return(0,T.default)(n)},text:"Copy",iconLeft:(0,a.Y)(j.A,{}),css:{width:"fit-content"}})})},Q=function(e){var n=e.examples;return(0,a.Y)(V.S,{gap:16,children:n.map(function(e,n){return(0,a.Y)($,{title:e.title,content:e.content},n)})})};let X=function(e){var n=e.langKey;return(0,a.FD)(V.S,{gap:8,children:[" ","html"!==n&&(0,a.Y)(Q,{examples:x}),(0,a.Y)(Q,{examples:D})]})};var ee=[{title:"Fetch from client",content:[{type:"code",value:"CURL /__replauthuser"}]},{title:"Or access server request headers",content:[{type:"code",value:"X-Replit-User-Id"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Name"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Teams"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Roles"}]}],en=t(42793),et=(0,en.AH)([M.wp.colWithGap(16)]);let er=function(){return(0,a.Y)(V.S,{css:et,children:ee.map(function(e,n){return(0,a.Y)($,{title:e.title,content:e.content},n)})})};var ei=(0,en.AH)([M.wp.colWithGap(8)]);let eo=function(e){var n=e.langKey,t=(0,a.Y)(er,{});switch(n){case"html":t=(0,a.Y)(Q,{examples:k});break;case"nodejs":t=(0,a.Y)(Q,{examples:P})}return(0,a.Y)(V.S,{css:ei,children:t})},ea=function(e){var n=e.langKey,t=null;switch(n){case"html":t=x;break;case"nodejs":t=L}return t?(0,a.Y)(V.S,{gap:8,children:(0,a.Y)(Q,{examples:t})}):null};var el=t(79166),es=t(36937),ec=t(86733),eu=t(30124),ed=t(36073),ep=t(52027),ef=t(11798),eh=t(33616),em=t(71872),eg=(0,O.x)({link:[M.wp.color.accentPrimaryStronger,M.wp.cursor.pointer],errorContainer:[M.wp.textAlign.center,M.wp.colWithGap(4)],usageSectionTitleText:[{color:es.LU.foregroundDimmest,textTransform:"uppercase",fontWeight:es.LU.fontWeightMedium}],divider:[M.wp.backgroundColor.outlineDimmer]}),ev=function(){var e=(0,Y.A)(),n=e.dotReplit,t=e.fs,a=(0,i._)((0,l.useState)(),2),s=a[0],c=a[1],u=(0,i._)((0,l.useState)(!1),2),d=u[0],p=u[1],f=(0,i._)((0,l.useState)(!1),2),h=f[0],m=f[1],g=(0,i._)((0,l.useState)(!0),2),y=g[0],b=g[1],S=(0,i._)((0,l.useState)(!0),2),_=S[0],A=S[1],C=(0,l.useCallback)((0,r._)(function(){var e,t,r,i,a;return(0,o.YH)(this,function(o){switch(o.label){case 0:c(void 0),b(!0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,n.getConfig({bypassCache:!0})];case 2:switch((a=o.sent()).error){case w.DO.ParseError:throw Error("An error occurred parsing the .replit file, please ensure the syntax is valid");case w.DO.Disconnected:throw Error("Disconnected, cannot read .replit file.");case w.DO.NotFound:return A(!1),[2]}return p(!!(null==a||null==(t=a.config)||null==(e=t.auth)?void 0:e.buttonEnabled)),m(!!(null==a||null==(i=a.config)||null==(r=i.auth)?void 0:r.pageEnabled)),[3,5];case 3:return c(o.sent().message),[3,5];case 4:return b(!1),[7];case 5:return[2]}})}),[n,c,b,A,p,m]);return(0,l.useEffect)(function(){var e;(e=(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:if(!t)return[2];return[4,C()];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})()},[t,C]),(0,l.useEffect)(function(){if(t){var e=t.watchTextFile(v.v,{onChange:(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,C()];case 1:return e.sent(),[2]}})})});return function(){e(),m(!1),p(!1),b(!1)}}},[t,m,C]),{error:s,isDotReplitAuthButtonEnabled:d,isDotReplitAuthPageEnabled:h,isDotReplitAuthLoading:y,hasDotReplit:_,setError:c,setIsDotReplitAuthLoading:b,isDotReplitAuthEnabled:d||h}};function ey(){var e,n,t,c,u,p,v=(0,b.A)(),w=(0,Y.A)().dotReplit,C=(0,N.rM)(),k=C?(0,g.an)(C):null,x=(0,_.J)().configs,D=(0,i._)((0,l.useState)(""),2),E=D[0],R=D[1],I=(e={variables:{replID:v}},n=(0,s._)({},f,e),d.I(h,n)),T=I.data,F=I.error,P=I.loading,L=(null==T?void 0:T.repl.__typename)==="Repl"&&(null==T||null==(c=T.repl)||null==(t=c.config)?void 0:t.isServer),U=null!=(p=null==T||null==(u=T.currentUser)?void 0:u.isLoggedIn)&&p,O=ev(),B=O.error,z=O.isDotReplitAuthButtonEnabled,W=O.isDotReplitAuthPageEnabled,Z=O.isDotReplitAuthLoading,j=O.hasDotReplit,q=O.setError,K=O.setIsDotReplitAuthLoading,$=O.isDotReplitAuthEnabled;(0,l.useEffect)(function(){if(x.find(function(e){return"react"===e.language})||"jsx"===k||"tsx"===k)return void R("react");x.length>0&&R(x[0].language)},[k,E,R,x]);var J=(0,l.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return K(!0),(0,S.u4)(S.AZ.AUTH_SIDEBAR_USED,{action:"Login Page Enabled"}),[4,w.updateDotReplit([(0,y.qG)(!0),(0,y.D8)(!1)])];case 1:return e.sent().error&&(q("Couldn't enable login page, please try again"),K(!1)),[2]}})}),[K,w,q]),Q=(0,l.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return K(!0),(0,S.u4)(S.AZ.AUTH_SIDEBAR_USED,{action:"Login Button Enabled"}),[4,w.updateDotReplit([(0,y.qG)(!1),(0,y.D8)(!0)])];case 1:return e.sent().error&&(q("Couldn't enable login button, please try again"),K(!1)),[2]}})}),[K,w,q]),ee=(0,l.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return K(!0),(0,S.u4)(S.AZ.AUTH_SIDEBAR_USED,{action:"Repl auth disabled"}),[4,w.updateDotReplit([(0,y.qG)(!1),(0,y.D8)(!1)])];case 1:return e.sent().error&&(q("Couldn't disable Log in with Replit, please try again"),K(!1)),[2]}})}),[K,w,q]),en=(0,l.useMemo)(function(){return U?j?F?(0,a.Y)(V.S,{css:eg.errorContainer,children:(0,a.Y)(ed.N,{colorway:"warning",text:"An error ocurred retrieving auth for this App. Please try again later."})}):"html"===E||L?void 0:(0,a.Y)(V.S,{css:eg.errorContainer,children:(0,a.Y)(ed.N,{colorway:"warning",text:"Run your web app to use Log in with Replit"})}):(0,a.FD)(V.S,{css:eg.errorContainer,children:[(0,a.Y)(ed.N,{colorway:"warning",text:"Please create a .replit file to use Log in with Replit"}),(0,a.Y)(G.EY,{children:(0,a.Y)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl",target:"_blank",rel:"noopener",children:"Learn more about the .replit file"})})]}):(0,a.Y)(V.S,{css:eg.errorContainer,children:(0,a.Y)(ew,{})})},[F,j,U,L,E]),et="html"===E||"nodejs"===E,er=(0,a.Y)(G.EY,{color:"dimmer",children:"You can use Log in with Replit with all web Apps. We have language clients for Nodejs and HTML - switch to an App that uses that language to see how to use it."}),ei=(0,a.FD)(V.S,{gap:24,children:[(0,a.FD)(V.S,{gap:8,children:[W?(0,a.FD)(G.EY,{color:"dimmer",children:["Your App will automatically direct users to a prebuilt login page. Start by importing the package below"," ",(0,a.FD)("span",{onClick:Q,css:eg.link,onKeyDown:Q,role:"button",tabIndex:0,children:[" ","or use your own custom button."]}),(0,a.Y)("br",{}),"Repl Auth is not intended for API authentication."]}):(0,a.FD)(G.EY,{color:"dimmer",children:["Your users can log in to your App using a custom button. Start by importing the package below"," ",(0,a.FD)("span",{onClick:J,css:eg.link,onKeyDown:J,role:"button",tabIndex:0,children:[" ","or use a prebuilt login page."]})]}),et?void 0:er]}),(0,a.FD)(V.S,{children:["nodejs"===E&&z?null:(0,a.Y)(ea,{langKey:E}),z?(0,a.Y)(X,{langKey:E}):null]}),(0,a.FD)(V.S,{gap:8,children:[(0,a.FD)(V.S,{gap:2,children:[(0,a.Y)(G.EY,{multiline:!1,variant:"small",css:eg.usageSectionTitleText,children:"Usage"}),(0,a.Y)(eu.a,{css:eg.divider})]}),(0,a.Y)(V.S,{children:(0,a.FD)(V.S,{gap:12,children:[" ","nodejs"===E&&z?(0,a.Y)(ea,{langKey:E}):null,(0,a.Y)(eo,{langKey:E})]})})]}),(0,a.Y)(H.$n,{onClick:ee,text:"Disable Auth",colorway:"negative",variant:"outlined",loading:Z||P})]}),es=(0,el.Vv)().getDescription({type:"replAuth"}),ef=(0,a.FD)(V.S,{gap:8,children:[(0,a.Y)(G.EY,{css:M.wp.textAlign.center,children:es}),(0,a.Y)(H.$n,{colorway:"primary",onClick:J,text:"Enable Login Page",loading:Z||P,disabled:!!B,iconLeft:(0,a.Y)(eh.A,{})}),(0,a.FD)(G.EY,{color:"dimmer",css:M.wp.textAlign.center,children:["Alternatively,"," ",(0,a.Y)("span",{onClick:Q,css:eg.link,onKeyDown:Q,role:"button",tabIndex:0,children:"use a custom login button"}),".",(0,a.Y)("br",{}),"Repl Auth is not intended for API authentication."]})]}),ey=(0,a.Y)(ec.v,{href:m.ik.REPL_AUTH,variant:"nofill",target:"_blank",rel:"noopener",iconLeft:(0,a.Y)(ep.A,{}),text:"Learn more"});return(0,a.Y)(A.A,{pane:{type:"replAuth"},maxWidth:$?600:450,headerText:"Login with Replit",body:(0,a.FD)(a.FK,{children:[B?(0,a.Y)(ed.N,{text:B,colorway:$?void 0:"warning",icon:(0,a.Y)(em.A,{})}):null,null!=en?en:$?ei:ef]}),action:en?void 0:ey})}var ew=function(){return(0,a.FD)(V.S,{gap:16,children:[(0,a.FD)(G.EY,{children:[(0,a.Y)("a",{href:m.ik.REPL_AUTH,target:"_blank",rel:"noopener",css:eg.link,children:"Replit Authentication"})," ","is the fastest and easiest way to set up authentication in your App. Try it out by logging in or signing up."]}),(0,a.Y)(ec.v,{href:"/auth",as:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,a.Y)(ef.A,{})})]})}},40831:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M6.495 4.729a8.287 8.287 0 0 1 4.387-.32c1.465.29 2.819.97 3.907 1.967A7.725 7.725 0 0 1 16.863 9.5h.593c1.395 0 2.738.533 3.733 1.491a5.044 5.044 0 0 1 1.561 3.634 5.044 5.044 0 0 1-1.56 3.634 5.385 5.385 0 0 1-3.734 1.491h-8.18a8.23 8.23 0 0 1-4.233-1.164 7.852 7.852 0 0 1-2.967-3.16 7.524 7.524 0 0 1-.785-4.211 7.607 7.607 0 0 1 1.646-3.97A8.01 8.01 0 0 1 6.495 4.73Zm4.096 1.15a6.787 6.787 0 0 0-3.593.263 6.51 6.51 0 0 0-2.892 2.043 6.106 6.106 0 0 0-1.323 3.187 6.024 6.024 0 0 0 .63 3.373 6.352 6.352 0 0 0 2.4 2.554 6.73 6.73 0 0 0 3.463.951h8.18a3.885 3.885 0 0 0 2.693-1.072 3.544 3.544 0 0 0 1.101-2.553c0-.952-.393-1.871-1.101-2.553A3.885 3.885 0 0 0 17.456 11H16.31a.75.75 0 0 1-.725-.556 6.2 6.2 0 0 0-1.81-2.962 6.62 6.62 0 0 0-3.185-1.603Z",clipRule:"evenodd"})}))}},41007:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(21462),i=t(23125),o=t(7733);function a(e){var n=e.repl,t=e.currentUser,a=e.container,l=(0,o.L)(),s=(0,i.$)(n&&t?{repl:n,currentUser:t}:null);(0,r.useEffect)(function(){if(a&&s)return a.connect({context:s,getMinimumRetryDelayMs:l}),function(){a.close()}},[s,a,l])}},41153:(e,n,t)=>{"use strict";t.d(n,{F:()=>l});var r=t(21462),i=t(39379),o=t(24927),a=t(81740);function l(){var e=(0,i.jt)(),n=(0,o.r)(),t=(0,a.hc)(),l=(0,a.X6)();return(0,r.useMemo)(function(){return!!e&&(!!n||!t&&!l)},[e,n,t,l])}},41425:(e,n,t)=>{"use strict";t.d(n,{yN:()=>F});var r=t(12694),i=t(81073),o=t(21462),a=t(91326),l=t(7868),s=t(66898),c=t(47848),u=t(82839),d=t(18509),p=t(27023),f=t(11769),h=t(83070),m=t(4616),g=t(85389),v=t(87064),y=t(10327),w=t(17844),b=t(93629),S=t(52351);function Y(e){return(0,i.Y)(S.Ay,(0,b._)((0,w._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M12 1.25a10.7 10.7 0 0 1 5.843 1.725l-1.089 1.089a9.19 9.19 0 0 0-3.05-1.157 16.05 16.05 0 0 1 1.556 2.651l-1.137 1.137A14.546 14.546 0 0 0 12 3.15a14.55 14.55 0 0 0-3.214 8.101h.782l-2.221 2.221c-.027-.24-.049-.48-.065-.721H2.78a9.194 9.194 0 0 0 1.284 4.004l-1.089 1.089A10.7 10.7 0 0 1 1.25 12C1.25 6.063 6.063 1.25 12 1.25Zm7.936 5.996 1.089-1.089A10.7 10.7 0 0 1 22.75 12c0 5.937-4.813 10.75-10.75 10.75a10.7 10.7 0 0 1-5.843-1.725l1.089-1.089a9.191 9.191 0 0 0 3.05 1.157 16.05 16.05 0 0 1-1.556-2.651l1.137-1.137A14.548 14.548 0 0 0 12 20.85a14.55 14.55 0 0 0 3.214-8.101h-.782l2.221-2.221c.027.24.049.48.065.721h4.502a9.193 9.193 0 0 0-1.284-4.004ZM2.78 11.25h4.502a16.05 16.05 0 0 1 3.014-8.343A9.255 9.255 0 0 0 2.78 11.25Zm10.924 9.843a16.051 16.051 0 0 0 3.014-8.343h4.502a9.255 9.255 0 0 1-7.516 8.343ZM22.53 2.53a.75.75 0 0 0-1.06-1.06l-20 20a.75.75 0 1 0 1.06 1.06l20-20Z",clipRule:"evenodd"})}))}var _=t(51055),A=(0,d.x)({wrapper:[p.wp.py(6),p.wp.flex.row,p.wp.align.center,p.wp.backgroundColor.backgroundHigher],wrapperWarning:[p.wp.py(6),p.wp.flex.row,p.wp.align.center,p.wp.backgroundColor.orangeDimmest],firstLine:[p.wp.flex.wrap,p.wp.maxWidth("100%"),p.wp.overflow("hidden")],secondLine:[p.wp.px(6),p.wp.rowWithGap(2),p.wp.align.center,p.wp.flex.wrap,p.wp.maxWidth("100%"),p.wp.overflow("hidden"),p.wp.color.foregroundDimmest],secondLineWarning:[p.wp.px(6),p.wp.rowWithGap(2),p.wp.align.center,p.wp.flex.wrap,p.wp.maxWidth("100%"),p.wp.overflow("hidden"),p.wp.color.orangeStrongest],verticalDivider:[p.wp.ml(6),p.wp.mr(6),p.wp.height("1em"),p.wp.width(1),p.wp.backgroundColor.foregroundDefault]});function C(e){var n=e.openNetworkingTool,t=e.onClose,r=e.onDontExposePort,o=e.onDoExposePort,a=e.firstLine,l=e.secondLine,s=e.renderSecondLine,c=e.renderDontExposeButton,u=e.renderDoExposeButton,d=e.isWarning,p=void 0!==d&&d;return(0,i.FD)(g.S,{css:p?A.wrapperWarning:A.wrapper,children:[(0,i.FD)(g.S,{grow:!0,shrink:!0,children:[(0,i.Y)(g.S,{css:A.firstLine,px:6,row:!0,gap:2,align:"center",children:a}),s?(0,i.Y)(g.S,{css:p?A.secondLineWarning:A.secondLine,children:l}):null]}),(0,i.FD)(g.S,{pr:6,row:!0,children:[(0,i.Y)(h.K0,{alt:"Networking tool",onClick:n,children:(0,i.Y)(_.A,{})}),void 0!==c&&c?(0,i.Y)(h.K0,{alt:"Don't expose this port to the web",onClick:r,children:(0,i.Y)(Y,{})}):null,void 0!==u&&u?(0,i.Y)(h.K0,{alt:"Expose this port to the web",onClick:o,children:(0,i.Y)(y.A,{})}):null,(0,i.Y)(h.K0,{alt:"Close",onClick:t,children:(0,i.Y)(v.A,{})})]})]})}function k(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.onDontExposePort,l=e.renderSecondLine,c=(0,s.r$)(n.externalPort)?"{...}.replit.dev":"{...}.replit.dev:".concat(n.externalPort);return(0,i.Y)(C,{openNetworkingTool:r,onClose:o,firstLine:(0,i.FD)(i.FK,{children:[(0,i.FD)(m.EY,{children:["Port :",n.localPort," opened on"]}),(0,i.Y)(f.$n,{variant:"underlined",text:c,onClick:t})]}),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can manage this config in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:l,renderDontExposeButton:!0,onDontExposePort:a})}function x(e){var n=e.configuration,t=e.openNetworkingTool,r=e.onClose,o=e.renderSecondLine,a=e.onDoExposePort;return(0,i.Y)(C,{openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but not exposed to the web."),secondLine:(0,i.Y)(f.$n,{variant:"underlined",text:"Expose this port?",onClick:t}),renderSecondLine:o,renderDoExposeButton:!0,onDoExposePort:a})}function D(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.Y)(C,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but all available external ports are reserved."),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"Remove an external port in"}),(0,i.Y)(f.$n,{variant:"underlined",text:"port configuration",onClick:n}),(0,i.Y)(m.EY,{children:"to open a new port."})]}),renderSecondLine:o})}function E(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.Y)(C,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but is not configured properly."),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can fix this in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:o})}function R(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.Y)(C,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but has missing configuration."),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can fix this in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:o})}function I(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,l=e.onDontExposePort,s=e.onDoExposePort,u=e.renderSecondLine,d=n.type;switch(d){case c.gH.FORWARDED:return(0,i.Y)(k,{configuration:n,openWebview:t,openNetworkingTool:r,onClose:o,renderSecondLine:u,onDontExposePort:l});case c.gH.INTERNAL_ONLY:return(0,i.Y)(x,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u,onDoExposePort:s});case c.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE:return(0,i.Y)(D,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u});case c.gH.MISCONFIGURED:return(0,i.Y)(E,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u});case c.gH.CONFIG_MISSING:return(0,i.Y)(R,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u});default:(0,a.A)(d)}}function T(e){var n=e.configurations,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.renderSecondLine,s=n.filter(function(e){return e.type===c.gH.FORWARDED}),u=n.filter(function(e){return e.type!==c.gH.FORWARDED});return(0,i.Y)(C,{isWarning:!1,openNetworkingTool:r,onClose:o,firstLine:(0,i.FD)(i.FK,{children:[s.length>0?(0,i.FD)(i.FK,{children:[(0,i.FD)(m.EY,{children:[s.length," ",(0,l.A)("port",s.length)," ","opened on"]}),(0,i.Y)(f.$n,{variant:"underlined",text:"{...}.replit.dev",onClick:t})]}):null,s.length>0&&u.length>0?(0,i.Y)(g.S,{css:A.verticalDivider}):null,u.length>0?(0,i.FD)(m.EY,{children:[u.length," ",(0,l.A)("port",u.length)," ","did not open"]}):null]}),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can manage this config in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:a})}function F(e){var n=e.configurations,t=e.openWebview,a=e.openNetworkingTool,l=e.onClose,s=e.onDontExposePort,c=e.onDoExposePort,d=(0,u.Z)("port-nudges"),p=(0,r._)((0,o.useState)(!1),2),f=p[0],h=p[1],m=!d.isDone,g=(0,r._)((0,o.useState)(!0),2),v=g[0],y=g[1];function w(){y(!1),null==l||l()}return((0,o.useEffect)(function(){0===n.length&&y(!0)},[n]),(0,o.useEffect)(function(){if(!d.isDone){if(n.length>0&&!f)return void h(!0);0===n.length&&f&&d.setAsDone()}},[n,d,f]),v&&0!==n.length)?1===n.length?(0,i.Y)(I,{configuration:n[0],openNetworkingTool:a,openWebview:t,renderSecondLine:m,onClose:w,onDontExposePort:s,onDoExposePort:c}):(0,i.Y)(T,{configurations:n,openNetworkingTool:a,openWebview:t,renderSecondLine:m,onClose:w}):null}},41750:(e,n,t)=>{"use strict";t.d(n,{k:()=>o});var r=t(21462),i=t(41930);function o(){var e=(0,i.a)();return(0,r.useMemo)(function(){return!e&&function(){if("undefined"==typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()},[e])}},41943:e=>{e.exports={accordionItem:"PlanCardAccordionItem_accordionItem__eYMvo",accordionHeader:"PlanCardAccordionItem_accordionHeader__De2WT",subheadingText:"PlanCardAccordionItem_subheadingText__FH3SH"}},41994:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M3.75 5.646a2.751 2.751 0 1 0-1.5 0V6.5A2.75 2.75 0 0 0 5 9.25h6.25v2H7.2a1.95 1.95 0 0 0-1.95 1.95v6a1.95 1.95 0 0 0 1.95 1.95h4.05v.9H9.6a.75.75 0 0 0 0 1.5h4.8a.75.75 0 0 0 0-1.5h-1.65v-.9h4.05a1.95 1.95 0 0 0 1.95-1.95v-6a1.95 1.95 0 0 0-1.95-1.95h-4.05v-2H19a2.75 2.75 0 0 0 2.75-2.75v-.854a2.751 2.751 0 1 0-1.5 0V6.5c0 .69-.56 1.25-1.25 1.25h-6.25V5.646a2.751 2.751 0 1 0-1.5 0V7.75H5c-.69 0-1.25-.56-1.25-1.25v-.854ZM1.75 3a1.25 1.25 0 1 1 2.5 0 1.25 1.25 0 0 1-2.5 0ZM21 4.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5ZM13.25 3a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM7.2 12.75a.45.45 0 0 0-.45.45v6c0 .248.201.45.45.45h9.6a.45.45 0 0 0 .45-.45v-6a.45.45 0 0 0-.45-.45H7.2Z",clipRule:"evenodd"})}))}},42124:(e,n,t)=>{"use strict";t.d(n,{b:()=>m});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),s=t(86997);function c(){var e=(0,a._)(["\n  query GetReplIcon($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        iconUrl\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=t(52492),f=t(98151),h=t(71424);function m(e){var n,t,a=e.replId,l=e.replIconUrl,c=(0,r._)((0,i.useState)(null),2),m=c[0],g=c[1],v=(0,r._)((0,i.useState)(!1),2),y=v[0],w=v[1],b=(0,h.A)().container,S=l===p.QY&&null===m&&!y;(0,f.Z)(function(){S&&w(!0)},S?3e4:null);var Y=(n={variables:{replId:a},pollInterval:2e3*!!S,onCompleted:function(e){var n,t=(null==e||null==(n=e.getRepl)?void 0:n.__typename)==="Repl"?e.getRepl.iconUrl:null;l===p.QY&&t&&t!==p.QY&&(b.exec("sh","-c","curl -o generated-icon.png ".concat(t)),g(t))}},t=(0,o._)({},u,n),s.I(d,t)).error;return{loading:S,error:Y,generatedIconUrl:m}}},42546:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(10764),i=t(17844),o=t(12584),a=t(41114),l=t(86997);function s(){var e=(0,o._)(["\n  query OrgAppPrivacySettings($orgId: String!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          settings {\n            ... on OrgSettings {\n              requirePrivateDeployments\n              banPublicApps\n              banSourceCodeExport\n              adminOnlyPublicDeployments\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}var c={},u=(0,a.J1)(s()),d=t(83603);let p=function(e){var n,t,o,a,s=(0,d.ET)().orgRole,p=(n={skip:!e,variables:{orgId:e}},t=(0,i._)({},c,n),l.I(u,t)),f=p.data,h=p.loading,m=p.error;if(h||m)return{loading:h,error:m,requirePrivateDeployments:void 0,adminOnlyPublicDeployments:void 0};var g=(null==f||null==(a=f.currentUser)||null==(o=a.org)?void 0:o.__typename)==="Org"?f.currentUser.org.settings:void 0;return{loading:h,error:m,requirePrivateDeployments:(null==g?void 0:g.__typename)==="OrgSettings"&&g.requirePrivateDeployments,banPublicApps:(null==g?void 0:g.__typename)==="OrgSettings"&&g.banPublicApps,banSourceCodeExport:(null==g?void 0:g.__typename)==="OrgSettings"&&g.banSourceCodeExport,adminOnlyPublicDeployments:(null==g?void 0:g.__typename)==="OrgSettings"&&g.adminOnlyPublicDeployments,isAdmin:s&&s===r.v7i.SystemAdmins}}},42683:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(17844),i=t(93629),o=t(67313),a=t.n(o),l=t(83715),s=t(95570);function c(e){var n=e.throwBsod,t=e.tags,o=e.extras,c=e.origin,u=e.onNonBsodUnrecoverableError;return function(e){var d=(0,l.Ay)(e);if(d===l.ub.NotFound)return void a().push("/home","~/");if(d===l.ub.LanguageTokenDenied)return void window.location.reload();if(d===l.ub.CrosisChannel)t=(0,i._)((0,r._)({},t),{crosis:!0});else if(d){null==u||u(d);return}s.error(e),n({error:e,tags:t,extras:o,origin:c})}}},43218:(e,n,t)=>{"use strict";t.d(n,{_:()=>l});var r=t(81073),i=t(69762),o=t(47630),a=t(6064);function l(e){var n=e.prefix,t=void 0===n?"Send message":n,l=e.onClick;return(0,r.FD)(i.W1,{children:[(0,r.Y)(i.Dr,{icon:(0,r.Y)(o.A,{}),label:"".concat(t," in current chat"),onAction:function(){return l({createNewSession:!1})}}),(0,r.Y)(i.Dr,{icon:(0,r.Y)(a.A,{}),label:"".concat(t," in new chat"),onAction:function(){return l({createNewSession:!0})}})]})}},43258:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M4.75 4c0-.69.56-1.25 1.25-1.25h7a.75.75 0 0 0 0-1.5H6A2.75 2.75 0 0 0 3.25 4v16A2.75 2.75 0 0 0 6 22.75h12A2.75 2.75 0 0 0 20.75 20v-9a.75.75 0 0 0-1.5 0v9c0 .69-.56 1.25-1.25 1.25H6c-.69 0-1.25-.56-1.25-1.25V4Z"}),(0,o.Y)("path",{d:"m11.974 8.931 5.883-5.883a1.482 1.482 0 0 1 2.095 2.095l-5.883 5.884a1 1 0 0 1-.444.257l-2.118.578a.3.3 0 0 1-.369-.369l.578-2.118a1 1 0 0 1 .258-.444Z"}),(0,o.Y)("path",{d:"M4.75 4c0-.69.56-1.25 1.25-1.25h7a.75.75 0 0 0 0-1.5H6A2.75 2.75 0 0 0 3.25 4v16A2.75 2.75 0 0 0 6 22.75h12A2.75 2.75 0 0 0 20.75 20v-9a.75.75 0 0 0-1.5 0v9c0 .69-.56 1.25-1.25 1.25H6c-.69 0-1.25-.56-1.25-1.25V4Z"}),(0,o.Y)("path",{d:"m11.974 8.931 5.883-5.883a1.482 1.482 0 0 1 2.095 2.095l-5.883 5.884a1 1 0 0 1-.444.257l-2.118.578a.3.3 0 0 1-.369-.369l.578-2.118a1 1 0 0 1 .258-.444Z"})]}))}},43515:(e,n,t)=>{"use strict";t.d(n,{Q:()=>o});var r=t(67917),i=t(73176);function o(){var e=(0,r.NC)();return(0,i.Rj)(function(){return e.sessions.agent.current.select(function(e){return null==e?void 0:e.id})},[e])}},43563:e=>{e.exports={iconContainer:"ReplMetadata_iconContainer__kq37O"}},43601:(e,n,t)=>{"use strict";t.d(n,{Y:()=>w,O:()=>y});var r=t(29935),i=t(12694),o=t(22531),a=t(82643),l=t(17844),s=t(12584),c=t(41114),u=t(50175);function d(){var e=(0,s._)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(27741),m=t(91165),g=t(61191),v=t(54339);function y(){var e,n=(0,m.v)(),t=(0,i._)((e=(0,l._)({},p,void 0),u.n(f,e)),1)[0],o=(0,v.V)();return(0,h.A)(function(){var e;return e=(0,r._)(function(e){var r,l,s,c,u,d,p,f,h;return(0,a.YH)(this,function(a){switch(a.label){case 0:r=[],l=!0,s=!1,c=void 0;try{for(u=e[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)f=(p=(0,i._)(d.value,2))[0],h=p[1],r.push({commandId:f,keyCombo:h})}catch(e){s=!0,c=e}finally{try{l||null==u.return||u.return()}finally{if(s)throw c}}return[4,t({variables:{input:{environment:n,platform:o,keybindings:r}}})];case 1:return a.sent(),[2]}})}),function(n){return e.apply(this,arguments)}},[n,t,o])}function w(e){var n=new Map;if(!Array.isArray(e))return n;var t=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value,c=function(e){if(e&&(void 0===e?"undefined":(0,o._)(e))==="object"&&"commandId"in e&&"string"==typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var n=(0,g.by)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}if("string"==typeof e.keyCombo){var t=(0,g.A2)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}return{commandId:e.commandId,keyCombo:null}}}(s);c&&n.set(c.commandId,c.keyCombo)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return n}},43796:(e,n,t)=>{"use strict";t.d(n,{K:()=>c});var r=t(17844),i=t(93629),o=t(17459),a=t(81073),l=t(1684),s=t(85389).D.button;function c(e){var n=e.iconLeft,t=e.iconRight,c=e.text,u=e.innerRef,d=e.colorway,p=e.disabled,f=(0,o._)(e,["iconLeft","iconRight","text","innerRef","colorway","disabled"]);return(0,a.FD)(s,(0,i._)((0,r._)({ref:u},f),{css:[(0,l.w)({colorway:d,clickable:!0,variant:"filled",iconLeft:!!n,iconRight:!!t,hasText:!!c}),{color:"inherit"}],disabled:p,children:[n,c?(0,a.Y)("span",{children:c}):null,t]}))}},43886:(e,n,t)=>{"use strict";t.d(n,{Or:()=>u,_j:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(25763);function s(){var e=(0,i._)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          id\n          ...WorkspaceNeonDatabase\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(s(),l.Vl);function d(e){var n=(0,r._)({},c,e);return a.I(u,n)}},44191:(e,n,t)=>{"use strict";t.d(n,{N:()=>l});var r=t(87433),i=t(29935),o=t(82643);let a={name:"upm",getInstalledPackages:function(e){var n=e.id,t=e.services.packager;return(0,i._)(function(){var e;return(0,o.YH)(this,function(r){switch(r.label){case 0:return[4,t.listSpecfile(n)];case 1:if((e=r.sent()).error||null===e.packages)return[2,[]];return[2,e.packages]}})})()},getPackageInfo:function(e){var n=e.id,t=e.name,r=e.services.packager;return(0,i._)(function(){return(0,o.YH)(this,function(e){return[2,r.fetchPackageInfo(t,n)]})})()},search:function(e){var n=e.id,t=e.query,r=e.services.packager;return(0,i._)(function(){return(0,o.YH)(this,function(e){return[2,r.searchPackages(t,n)]})})()},install:function(e){var n=e.id,t=e.pkgs,r=e.services.packager;return(0,i._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,r.addPackages(t,n)];case 1:if(!e.sent())throw Error("Package install failed");return[2]}})})()},uninstall:function(e){var n=e.id,t=e.pkgs,r=e.services.packager;return(0,i._)(function(){var e;return(0,o.YH)(this,function(i){switch(i.label){case 0:return e=t.filter(function(e){return e.name}).map(function(e){return e.name}),[4,r.removePackages(e,n)];case 1:if(!i.sent())throw Error("Package uninstall failed");return[2]}})})()}};function l(e){return"nix"===e?r.A:a}},44781:(e,n,t)=>{"use strict";t.d(n,{FZ:()=>c,Rf:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.I(c,n)}},45004:e=>{e.exports={dialog:"AgentPlanningDialogs_dialog__EgeW2",option:"AgentPlanningDialogs_option__zRpv_",bodyText:"AgentPlanningDialogs_bodyText___rZQh",statusText:"AgentPlanningDialogs_statusText__mbRU_",statusTextThinking:"AgentPlanningDialogs_statusTextThinking__Bdq_g",statusRow:"AgentPlanningDialogs_statusRow__96phM",elapsedTime:"AgentPlanningDialogs_elapsedTime__5lfv0"}},45693:e=>{e.exports={root:"SecurityScan_root__FoWMF",lastScanSummaryContainer:"SecurityScan_lastScanSummaryContainer__JF03e",lastScanSummaryText:"SecurityScan_lastScanSummaryText__LxVMS",ignoredIssuesContainer:"SecurityScan_ignoredIssuesContainer__hdcVi",ignoredIssuesText:"SecurityScan_ignoredIssuesText__0_pe9"}},45744:(e,n,t)=>{"use strict";t.d(n,{Gu:()=>u,Vq:()=>s,_0:()=>p,pp:()=>d});var r=t(81073),i=t(18509),o=t(27023),a=t(85389),l=t(63456),s=600,c=(0,i.x)({overviewPane:[o.wp.flex.column,o.wp.gap(24),o.wp.width("100%"),o.wp.maxWidth(s),{margin:"0 auto"}],loading:[o.wp.center,o.wp.flex.growAndShrink(1)],emptyState:[o.wp.center,o.wp.flex.growAndShrink(1)]}),u=function(){return(0,r.Y)(a.S,{css:c.loading,children:(0,r.Y)(l.A,{})})},d=function(e){var n=e.children;return(0,r.Y)(a.S,{css:c.emptyState,children:n})},p=function(e){var n=e.children;return(0,r.Y)(a.S,{css:c.overviewPane,p:12,children:n})}},45815:e=>{e.exports={iframe:"AgentHtmlPreviewFromDisk_iframe___vd38"}},45883:(e,n,t)=>{"use strict";t.d(n,{L:()=>c,T:()=>u});var r=t(45773),i=t(37032),o=t(17089),a=t(76957),l=t(63492),s=(0,a.eU)(!1),c=new i.k(function(e){var n=e.analyticsSurface,t=e.shouldTrack,i=e.onPaste;return r.Lz.domEventHandlers({paste:function(){t&&(0,o.u4)(o.AZ.TEXT_PASTED,{surface:n}),null==i||i()}})});function u(e){var n=e.analyticsSurface,t=(0,l.h)(s),r=(0,l.ob)(s);return c.use({analyticsSurface:n,shouldTrack:!t,onPaste:function(){return r(!0)}})}},45894:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M17.5 18.75c.69 0 1.25-.56 1.25-1.25v-11c0-.69-.56-1.25-1.25-1.25h-11c-.69 0-1.25.56-1.25 1.25v6.25a.75.75 0 0 1-1.5 0V6.5A2.75 2.75 0 0 1 6.5 3.75h11a2.75 2.75 0 0 1 2.75 2.75v11a2.75 2.75 0 0 1-2.75 2.75h-6.25a.75.75 0 0 1 0-1.5h6.25Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-4.19l-9.97 9.97a.75.75 0 0 1-1.06-1.06l9.97-9.97H9A.75.75 0 0 1 8.25 9Z",clipRule:"evenodd"})]}))}},46103:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M19.25 6a.251.251 0 0 0-.25-.25c-2.24 0-4.895-1.3-6.727-2.9a.42.42 0 0 0-.546 0C10.02 4.34 7.57 5.585 5.426 5.735L5 5.75a.25.25 0 0 0-.25.25v7c0 2.301.797 3.99 2.058 5.28 1.12 1.15 2.636 2.01 4.357 2.677l.75.274.017.006.084.016a.253.253 0 0 0 .08-.013c2.025-.706 3.818-1.644 5.097-2.957 1.26-1.293 2.057-2.982 2.057-5.284V6Zm1.5 7c0 2.698-.954 4.76-2.483 6.33-1.51 1.548-3.547 2.584-5.68 3.328l-.006.003a1.75 1.75 0 0 1-1.156-.013c-2.14-.739-4.18-1.772-5.69-3.32C4.202 17.76 3.25 15.699 3.25 13V6A1.75 1.75 0 0 1 5 4.25l.336-.012c1.71-.125 3.856-1.165 5.41-2.523l.007-.006.135-.104a1.92 1.92 0 0 1 2.224 0l.135.105.007.005.32.269C15.207 3.304 17.351 4.25 19 4.25A1.75 1.75 0 0 1 20.75 6v7Z"}),(0,o.Y)("path",{d:"M14.526 9.418a.75.75 0 0 1 1.056 1.056l-.052.056-4 4a.75.75 0 0 1-1.06 0l-2-2-.052-.056a.75.75 0 0 1 1.056-1.056l.056.052L11 12.94l3.47-3.47.056-.052Z"})]}))}},46217:(e,n,t)=>{"use strict";t.d(n,{KY:()=>a});var r=t(86105),i=t(15714),o=[{id:"true",editorPreferencesValue:!0,title:"true"},{id:"false",editorPreferencesValue:!1,title:"false"}],a={fontSize:{id:"fontSize",name:"Font Size",description:"Change the font size of the editor.",type:"select",editorPreferencesKey:"fontSize",options:[{id:"10",editorPreferencesValue:10,title:"tiny"},{id:"12",editorPreferencesValue:12,title:"small"},{id:"14",editorPreferencesValue:14,title:"normal"},{id:"18",editorPreferencesValue:18,title:"large"},{id:"24",editorPreferencesValue:24,title:"huge"}]},wrapping:{id:"wrapping",name:"Wrapping",description:"Change whether the editor wraps lines or not.",type:"select",editorPreferencesKey:"wrapping",options:[{id:"none",editorPreferencesValue:!1,title:"none"},{id:"soft",editorPreferencesValue:!0,title:"soft wrap"}]},minimap:{id:"minimap",name:"Minimap",description:"Change the minimap display.",type:"select",editorPreferencesKey:"minimapDisplay",options:[{id:"none",editorPreferencesValue:"none",title:"none"},{id:"blocks",editorPreferencesValue:"blocks",title:"blocks"},{id:"characters",editorPreferencesValue:"characters",title:"characters"}]},indentationDetection:{id:"indentDetection",name:"Indentation Detection",description:"Automatically detect indentation settings when opening a file.",type:"boolean",editorPreferencesKey:"indentDetection",options:o},indentFormatPastes:{id:"indentFormatPastes",name:"Format Pasted Text Indentation",description:"Automatically format the indentation of pasted text.",type:"boolean",editorPreferencesKey:"indentFormatPastes",options:o},indentIsSpaces:{id:"indentationCharacter",name:"Indentation Character",description:"The character used for indenting lines.",type:"select",editorPreferencesKey:"indentIsSpaces",options:[{id:"spaces",editorPreferencesValue:!0,title:"spaces"},{id:"tabs",editorPreferencesValue:!1,title:"tabs"}]},keyboardHandler:{id:"keyboardHandler",name:"Keybinds",description:"Use another keyboard mapping",type:"select",editorPreferencesKey:"keyboardHandler",options:[{id:"default",editorPreferencesValue:null,title:"default"},{id:"emacs",editorPreferencesValue:"emacs",title:"emacs"},{id:"vim",editorPreferencesValue:"vim",title:"vim"}]},showFileTreeGitStatus:{id:"showFileTreeGitStatus",name:"Filetree Git Status",description:"Show the Git status of files in the file tree.",type:"boolean",editorPreferencesKey:"showFileTreeGitStatus",options:o},codeIntelligence:{id:"codeIntelligence",name:"Code Intelligence",description:"Code intelligence gives you autocomplete, as well as hints as you type.",type:"boolean",editorPreferencesKey:"codeIntelligence",options:o},semanticTokens:{id:"semanticTokens",name:"Semantic Tokens",description:"Enables enhanced syntax highlighting from language servers.",type:"boolean",editorPreferencesKey:"semanticTokens",options:o},shellBellAudio:{id:"shellBellAudio",name:"Shell Bell Audible Indicator",description:"Play sound in the Shell on issues like a failed tab completion.",type:"boolean",editorPreferencesKey:"shellBellAudio",options:o},accessibleTerminal:{id:"accessibleTerminal",name:"Accessible Terminal Output",description:"Enable this setting to use a screen reader. Warning: this can negatively affect performance.",type:"boolean",editorPreferencesKey:"accessibleTerminal",options:o},webviewAutoOpenOnPortOpened:{id:"webviewAutoOpenOnPortOpened",name:"Automatic Webview",description:"Open a webview automatically when a port is open.",type:"boolean",editorPreferencesKey:"webviewAutoOpenOnPortOpened",options:o},forwardPortsAutomatically:{id:"forwardPortsAutomatically",name:"Forward Opened Ports Automatically",description:"Automatically configure detected newly opened ports.",type:"select",editorPreferencesKey:"forwardPortsAutomatically",options:[{id:"none",editorPreferencesValue:"none",title:"never"},{id:"only-global",editorPreferencesValue:"only-global",title:"all ports except localhost"},{id:"all",editorPreferencesValue:"all",title:"all ports"}]},chatAudioNotification:{id:"chatAudioNotification",name:"Chat Audio Notification",description:"Play a sound when you receive a new chat message.",type:"boolean",editorPreferencesKey:"chatAudioNotification",options:o},agentAudioNotification:{id:"agentAudioNotification",name:"Agent Audio Notification",description:"Play a sound when the Agent needs your response.",type:"boolean",editorPreferencesKey:"agentAudioNotification",options:o},agentPushNotification:{id:"agentPushNotification",name:"Agent Push Notification",description:"Send a push notification when the Agent needs your response.",type:"boolean",editorPreferencesKey:"agentPushNotification",options:o},assistantPushNotification:{id:"assistantPushNotification",name:"Assistant Push Notification",description:"Send a push notification when the Assistant needs your response.",type:"boolean",editorPreferencesKey:"assistantPushNotification",options:o},multiselectModifierKey:{id:"multiselectModifierKey",name:"Multiselect Modifier Key",description:"Modifier key for selecting multiple items in the filetree.",type:"select",editorPreferencesKey:"multiselectModifierKey",options:[{id:"cmdOrCtrlKey",editorPreferencesValue:"cmdOrCtrlKey",title:"cmdOrCtrlKey"},{id:"altKey",editorPreferencesValue:"altKey",title:"altKey"}]},codeSuggestion:{id:"codeSuggestion",name:"AI Code Completion",description:'Code completion provides inline "ghost text" suggestions while you code.',type:"boolean",editorPreferencesKey:"codeSuggestion",options:o},assistantAutoApplyChanges:{id:"assistantAutoApplyChanges",name:"Auto Apply Changes",description:"Automatically apply changes made by the AI assistant to your code.",type:"boolean",editorPreferencesKey:"assistantAutoApplyChanges",options:o},assistantAutoRestartRepl:{id:"assistantAutoRestartRepl",name:"Auto Restart Workflows",description:"Automatically restart workflows after applying code changes.",type:"boolean",editorPreferencesKey:"assistantAutoRestartRepl",options:o},assistantAdvancedModelOverride:{id:"assistantAdvancedModelOverride",name:"Advanced Model Override",description:"Override the default advanced model.",type:"select",editorPreferencesKey:"assistantAdvancedModelOverride",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(i._W).map(function(e){return{id:e.qualified,editorPreferencesValue:e.qualified,title:e.readable}})))}}},46668:(e,n,t)=>{"use strict";t.d(n,{S2:()=>W,YZ:()=>B});var r=t(17844),i=t(12694),o=t(81073),a=t(21462),l=t(13539),s=t(64287),c=t(684),u=t(37299),d=t(51744),p=t(27231),f=t(79315),h=t(81740),m=t(18509),g=t(27023),v=t(40259),y=t(24928),w=t(52637),b=t(4616),S=t(85389),Y=(0,m.x)({root:[g.wp.rowWithGap(4),g.wp.align.center],input:[g.wp.flex.growAndShrink(1),g.wp.color.foregroundDefault],disabledInput:[g.wp.flex.growAndShrink(1),g.wp.borderRadius(4),g.wp.px(8),g.wp.py(4),g.wp.color.foregroundDefault,g.wp.backgroundColor.backgroundDefault,{opacity:.7}]});function _(e){switch(e.description){case"shell.exec":return(0,o.Y)(C,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});case"workflow.run":return(0,o.Y)(A,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});case"packager.installForLanguage":return(0,o.Y)(k,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});case"packager.installForAll":return(0,o.Y)(k,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:"all",icon:e.icon,showIcon:e.showIcon});default:return(0,o.Y)(o.FK,{})}}function A(e){var n=(0,h.mP)().filter(function(e){var n;return!(null==(n=e.metadata)?void 0:n.generated)}).map(function(e){return{name:e.name,id:e.name}});return(0,o.FD)(S.S,{css:Y.root,children:[e.showIcon?e.icon:null,(0,o.Y)(w.l,{css:Y.input,isDisabled:e.disabled,onBlur:e.onArgsBlur,"aria-label":"Select a Workflow",selectedKey:e.value,onSelectionChange:function(n){"number"!=typeof n&&e.handleChange({type:"args",args:n})},items:n,children:function(e){return(0,o.Y)(y.nh,{label:e.name},e.id)}})]})}function C(e){return(0,o.FD)(S.S,{css:Y.root,children:[e.showIcon?e.icon:null,e.disabled?(0,o.Y)(b.EY,{css:Y.disabledInput,children:e.value}):(0,o.Y)(v.pd,{css:Y.input,disabled:e.disabled,onBlur:e.onArgsBlur,placeholder:"shell command to execute",onChange:function(n){var t=n.currentTarget.value;e.handleChange({type:"args",args:t})},required:e.required,value:e.value,type:e.type})]})}function k(e){var n=(0,f.J)().configs.map(function(e){return{id:e.language}});return n.push({id:"all"}),(0,o.FD)(S.S,{css:Y.root,children:[e.showIcon?e.icon:null,(0,o.Y)(w.l,{css:Y.input,isDisabled:e.disabled,onBlur:e.onArgsBlur,"aria-label":"Select a Language to install",selectedKey:e.value,onSelectionChange:function(n){"number"!=typeof n&&("all"===n?e.handleChange({type:"task",task:"packager.installForAll"}):e.handleChange({type:"task",task:"packager.installForLanguage",args:n}))},items:n,children:function(e){return(0,o.Y)(y.nh,{label:e.id},e.id)}})]})}var x=(0,m.x)({taskSelect:[g.wp.flex.growAndShrink(1)]});function D(e){var n;return(0,o.Y)(w.l,{isDisabled:e.disabled,"aria-label":"Select a task",selectedKey:"packager.installForAll"===(n=e.selectedKey)?"packager.installForLanguage":n,onSelectionChange:function(n){var t=e.supportedTasks;if(!t.includes(n))throw Error("Invalid task name: ".concat(n," (expected one of ").concat(t,")"));e.handleChange({type:"task",task:n})},items:e.items,css:x.taskSelect,children:function(e){return(0,o.Y)(y.nh,{label:e.description,icon:e.icon},e.id)}})}var E=t(30124),R=t(83070),I=t(41358),T=t(25963),F=t(38524),P=t(18974),L=t(66398),U=t(81650),N=new Map(d.Jc.anyOf.map(function(e){return[e.properties.task.const,e]})),O=["packager.installForAll","packager.installForLanguage","shell.exec","workflow.run"],M={"shell.exec":{description:"Execute Shell Command",icon:(0,o.Y)(L.A,{})},"packager.installForLanguage":{description:"Install Packages",icon:(0,o.Y)(F.A,{})},"workflow.run":{description:"Run Workflow",icon:(0,o.Y)(P.A,{})}},H={TASK:"task"};function B(e){var n=(0,h.b7)(e),t=(0,h.AK)(),r=(0,h.vJ)(),i=(0,h.wS)();return n?(0,o.Y)(W,{disabled:e.disabled,format:e.format,lastTask:e.lastTask,taskIndex:e.taskIndex,initialConfig:n,onArgsBlur:i,onChange:function(n,t){null!==n&&r(e,n,{persist:"task"===t})},onReorder:e.onReorder,onRemove:function(){return t(e)},simplified:e.simplified}):(0,o.Y)(b.EY,{children:"Task not found"})}c.ZU.Object({type:c.ZU.Literal("task"),taskIndex:c.ZU.Number()});var z=(0,m.x)({root:[g.wp.borderRadius(4),g.wp.p(6),g.wp.rowWithGap(6)],dragIcon:[{cursor:"grab"}],dropIndicator:[g.wp.height(4),g.wp.backgroundColor.blueDefault,g.wp.m(8),g.wp.borderRadius()]});function W(e){var n,t,c,d,f,h,m,g=(0,a.useRef)(null),v=(0,i._)((0,a.useState)((null==(n=e.initialConfig)?void 0:n.task)||null),2),y=v[0],w=v[1],b=(0,i._)((0,a.useState)(e.initialConfig&&"args"in e.initialConfig?e.initialConfig.args:null),2),Y=b[0],A=b[1];(0,a.useEffect)(function(){e.initialConfig&&(w(e.initialConfig.task),"args"in e.initialConfig&&A(e.initialConfig.args))},[e.initialConfig]);var C=e.disabled?Object.entries(M).map(function(e){var n=(0,i._)(e,2),t=n[0],o=n[1];return(0,r._)({id:t},o)}):Object.entries(M).filter(function(e){var n=(0,i._)(e,2),t=n[0];return n[1],O.includes(t)}).map(function(e){var n=(0,i._)(e,2),t=n[0],o=n[1];return(0,r._)({id:t},o)}),k=y?function(e){var n,t=N.get(e);if(!t||!("args"in t.properties))return null;var r=null==(n=t.required)?void 0:n.includes("args");return{type:t.properties.args.type,required:r}}(y):null,x=(0,i._)((0,l.i)(function(){return{type:H.TASK,item:function(){return{type:"task",taskIndex:e.taskIndex}},collect:function(e){return{isDragging:!!e.isDragging()}},canDrag:function(){var e=document.activeElement;return!(e&&("INPUT"===e.tagName||"SELECT"===e.tagName))}}},[e]),2),F=x[0].isDragging,P=x[1],L=(0,i._)((0,s.H)(function(){return{accept:"task",drop:function(n){var t,r=n.taskIndex;null==(t=e.onReorder)||t.call(e,r,e.taskIndex)},collect:function(n){var t=n.getItem(),r=null==t?void 0:t.taskIndex,i=!!n.isOver()&&r!==e.taskIndex;return{isAbove:i&&r>e.taskIndex,isBelow:i&&r<e.taskIndex}}}},[e]),2),B=L[0],W=B.isAbove,G=B.isBelow,V=L[1];function Z(n){var t,r,i,o,a="task"===n.type?{task:"task"===n.type?n.task:y,args:null!=(t=n.args)?t:void 0}:{task:y,args:n.args};w(a.task),A(null!=(r=a.args)?r:null);var l=a.task?N.get(a.task):null;if(!l)return null;try{null==(i=e.onChange)||i.call(e,u.T(l,a),n.type)}catch(t){null==(o=e.onChange)||o.call(e,null,n.type)}}return e.disabled||P(V(g)),(0,o.FD)(o.FK,{children:[W?(0,o.Y)(E.a,{css:z.dropIndicator}):null,(0,o.Y)(I.ui,{elevated:!0,disabled:e.disabled,innerRef:g,style:{opacity:F?.5:1},css:z.root,children:(0,o.Y)(S.S,{grow:!0,shrink:!0,gap:4,children:(0,o.FD)(S.S,{row:!0,gap:4,align:"start",justify:"space-between",children:[e.disabled?null:(0,o.Y)(S.S,{css:z.dragIcon,pt:6,children:(0,o.Y)(T.A,{})}),(0,o.FD)(S.S,{grow:!0,shrink:!0,gap:4,children:[e.simplified?null:(0,o.Y)(D,{disabled:e.disabled,handleChange:Z,selectedKey:y,items:C,supportedTasks:O}),(0,o.Y)(_,{description:y,disabled:e.disabled,type:null==k?void 0:k.type,value:e.format?(0,p.ZM)(null!=(c=null==Y?void 0:Y.toString())?c:""):null!=(d=null==Y?void 0:Y.toString())?d:"",required:null!=(f=null==k?void 0:k.required)&&f,handleChange:Z,onArgsBlur:e.onArgsBlur,showIcon:e.simplified,icon:y?null==(t=M[y])?void 0:t.icon:void 0})]}),e.disabled?null:(0,o.Y)(S.S,{row:!0,gap:8,children:(0,o.Y)(R.K0,{disabled:null!=(h=e.lastTask)&&h,alt:null!=(m=e.lastTask)&&m?"Workflow must have at least one task":"Remove task",onClick:e.onRemove,children:(0,o.Y)(U.A,{})})})]})})}),G?(0,o.Y)(E.a,{css:z.dropIndicator}):null]})}},46797:(e,n,t)=>{"use strict";t.d(n,{D8:()=>l,Df:()=>p,Ez:()=>r,GS:()=>d,KY:()=>u,Up:()=>i,Xl:()=>f,dA:()=>c,eH:()=>s,m_:()=>o,qG:()=>a});var r=function(e){return{op:"add",path:"run",value:JSON.stringify(e)}},i=function(e){return{op:"add",path:"compile",value:JSON.stringify(e)}},o=function(e){return{op:"remove",path:"string"==typeof e?e:e.join("/"),value:""}},a=function(e){return{op:"add",path:"auth/pageEnabled",value:JSON.stringify(e)}},l=function(e){return{op:"add",path:"auth/buttonEnabled",value:JSON.stringify(e)}},s=function(e){return{path:"deployment/run",op:"add",value:JSON.stringify(["sh","-c",e])}},c=function(e){return{path:"deployment/build",op:"add",value:JSON.stringify(["sh","-c",e])}},u=function(e){return{path:"deployment/ignorePorts",op:"add",value:e.toString()}},d=function(e){return{path:"deployment/deploymentTarget",op:"add",value:JSON.stringify(e)}},p=function(e){return{path:"deployment/publicDir",op:"add",value:JSON.stringify(e)}},f=function(e){return{path:"objectStorage/defaultBucketID",op:"add",value:JSON.stringify(e)}}},46953:(e,n,t)=>{"use strict";t.d(n,{C2:()=>f,CC:()=>v,Uy:()=>u,eB:()=>d,em:()=>p,fn:()=>m,qK:()=>h,z5:()=>g});var r=t(12694),i=t(82637),o=t(52531),a=t(64330),l=/[~^:?*[\\\0-\x20\x7F]/,s=/^(([A-Za-z0-9]+@|http(|s):\/\/)|(http(|s):\/\/[A-Za-z0-9]+@))([A-Za-z0-9.]+(:\d+)?)(?::|\/)([\d/\w.-]+?)$/,c=new RegExp([l,/^$/,/^\//,/\/$/,/\.lock$/,/\/{2,}/,/^\./,/\.$/,/\/\./,/\.\./,/@\{/,/^@$/,/^-/].map(function(e){return"(?:".concat(e.source,")")}).join("|"));function u(e){return 0===e.length||!l.test(e)}function d(e){return!c.test(e)}function p(e){return!c.test(e)}function f(e){return s.test(e)}function h(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"==typeof e?(0,a.w9)(e):"commit"in e?e.type===i.xx.LOCAL||n&&e.type===i.xx.TRACKED?e.name:"".concat(e.remote,"/").concat(e.name):e.name}function m(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return e;if("commit"in e)return e.type===i.xx.LOCAL||n&&e.type===i.xx.TRACKED?"refs/heads/".concat(e.name):"refs/remotes/".concat(e.remote,"/").concat(e.name);if(e.type===o.QN.BRANCH)return"refs/heads/".concat(e.name);if(e.type===o.QN.REMOTE_BRANCH)return"refs/remotes/".concat(e.remote,"/").concat(e.branch);throw Error("Unknown branch object")}function g(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return n&&!e.startsWith("refs/remotes/")?null:(0,r._)((0,a.xM)(e),1)[0];if("commit"in e)return n&&e.type!==i.xx.REMOTE?null:e.remote;if(e.type===o.QN.BRANCH)return null;if(e.type===o.QN.REMOTE_BRANCH)return e.remote;throw Error("Unknown branch object")}function v(e,n){return e===n||null!==e&&null!==n&&m(e)===m(n)}},46998:(e,n,t)=>{"use strict";function r(e){return e.map(function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label}).join(":")}t.d(n,{p:()=>r})},47456:(e,n,t)=>{"use strict";t.d(n,{A:()=>U});var r=t(29935),i=t(12694),o=t(56902),a=t(86105),l=t(82643),s=t(81073),c=t(21462),u=t(17844),d=t(12584),p=t(41114),f=t(86997);function h(){var e=(0,d._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return h=function(){return e},e}var m={},g=(0,p.J1)(h()),v=t(91226),y=t(10752),w=t(42793),b=t(18509),S=t(27023),Y=t(22422),_=t(11769),A=t(85144),C=t(36073),k=t(4616),x=t(85389),D=t(24140),E=t(71872),R=(0,w.AH)({".sentry-error-embed-wrapper":{zIndex:"".concat(S.r1," !important")}}),I=(0,b.x)({errorStack:[S.wp.p(16),S.wp.width("100%"),S.wp.backgroundColor.backgroundHigher,S.wp.borderRadius(8),S.wp.overflowY("hidden"),S.wp.font.code,S.wp.fontSize(12),{whiteSpace:"pre"}],userAndErrorIdContainer:[S.wp.width("100%"),S.wp.backgroundColor.backgroundHigher,S.wp.borderRadius(8)],error:[S.wp.font.code]}),T=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,F=/at (https:\/\/.+\.js):(\d+):(\d+)/;function P(){return(P=(0,r._)(function(e){var n,s,c,u,d,p,f,h;function m(){return(m=(0,r._)(function(e){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if(t=n.get(e))return[2,t];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e).then(function(e){return e.json()})];case 2:return r=o.sent(),i=new s.SourceMapConsumer(r),n.set(e,i),[2,i];case 3:return o.sent(),[2,null];case 4:return[2]}})})).apply(this,arguments)}return(0,l.YH)(this,function(g){switch(g.label){case 0:n=new Map,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,t.e(3248).then(t.t.bind(t,33248,19))];case 2:return s=g.sent(),[3,4];case 3:throw g.sent(),Error("source-map not available");case 4:var v;if(!(c=e.stack))throw Error("expected error.stack to be defined");return u=c.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),p=(d=(0,o._)(u))[0],[4,Promise.all(d.slice(1).map((v=(0,r._)(function(e){var n,t,r,o,a,s,c,u,d,p;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(T.test(e)){if(!(a=T.exec(e)))throw Error("expected result");t=(s=(0,i._)(a.slice(2),3))[0],r=s[1],o=s[2]}else{if(!F.test(e))return[2,e];if(!(c=F.exec(e)))throw Error("expected result");t=(u=(0,i._)(c.slice(1),3))[0],r=u[1],o=u[2]}return[4,function(e){return m.apply(this,arguments)}("".concat(t,".map"))];case 1:if(!(d=l.sent()))return[2,"    ".concat(e)];if(p=d.originalPositionFor({line:Number(r),column:Number(o)}),n)return[2,"    at ".concat(p.name," (").concat(p.source,":").concat(p.line,":").concat(p.column,")")];return[2,"    at ".concat(p.source,":").concat(p.line,":").concat(p.column)]}})}),function(e){return v.apply(this,arguments)})))];case 5:return f=g.sent(),Object.assign(h=Error(),{name:e.name,stack:[p].concat((0,a._)(f)).join("\n"),message:e.message},e),[2,h]}})})).apply(this,arguments)}var L=function(e){var n=e.bsod,t=(0,i._)((0,c.useState)(null),2),o=t[0],a=t[1];(0,c.useEffect)(function(){(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(e){return P.apply(this,arguments)}(n.error)];case 1:return a(e.sent()),[3,3];case 2:return e.sent(),[2];case 3:return[2]}})})()},[n.error]);var u=(0,c.useMemo)(function(){var e,t,r,i;return o?null!=(r=null==(t=o.stack)?void 0:t.split("\n"))?r:[]:null!=(i=null==(e=n.error.stack)?void 0:e.split("\n"))?i:[]},[o,n.error.stack]);return(0,s.FD)("div",{css:I.errorStack,children:[(0,s.FD)("div",{children:["Origin: ",n.origin]}),null==u?void 0:u.map(function(e,n){var t=e.replace("webpack-internal:///./",""),r=t.includes("node_modules");return(0,s.Y)("div",{css:r&&S.wp.color.foregroundDimmest,children:t},n)})]})};let U=function(){var e,n,t,r,o=(0,i._)((0,y.eY)(),1)[0],a=(e={skip:!o},n=(0,u._)({},m,e),f.I(g,n)),l=a.data,c=a.loading,d=(0,v.i)().isOperational;if((0,y.ZM)(),!o)return null;var p=(null==l||null==(t=l.currentUser)?void 0:t.isStaff)||(null==l||null==(r=l.currentUser)?void 0:r.isAdmin);return(0,s.FD)(A.a,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,s.FD)(x.S,{gap:16,align:"center",children:[(0,s.Y)(k.EY,{variant:"headerDefault",children:"Your app is having a bit of trouble"}),(0,s.Y)(x.S,{row:!0,gap:8,align:"center",children:(0,s.Y)(C.N,{colorway:d?"positive":"negative",icon:d?(0,s.Y)(D.A,{}):(0,s.Y)(E.A,{}),text:(0,s.FD)(k.EY,{children:["Replit status:"," ",(0,s.Y)("a",{href:"https://status.replit.com",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline",color:"inherit"},children:d?"operational":"experiencing issues"})]})})}),(0,s.Y)(k.EY,{variant:"text",multiline:!0,children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to building."}),(0,s.FD)(x.S,{gap:16,css:I.userAndErrorIdContainer,p:16,children:[!c&&(null==l?void 0:l.currentUser)?(0,s.FD)(x.S,{row:!0,gap:16,align:"center",children:[(0,s.Y)(Y.e,{src:l.currentUser.image,username:l.currentUser.username,size:48}),(0,s.Y)(k.EY,{variant:"text",multiline:!1,children:l.currentUser.username})]}):null,(0,s.FD)("div",{css:I.error,children:["Error: ",o.eventId]})]}),p?(0,s.Y)(L,{bsod:o}):null,(0,s.Y)(_.$n,{onClick:function(){return window.location.reload()},colorway:"primary",stretch:!0,text:"Reload"}),!1]}),(0,s.Y)(w.mL,{styles:[R]})]})}},47459:(e,n,t)=>{"use strict";t.d(n,{W:()=>a,z:()=>o});var r=t(21462),i=new(t(93188)).N(new Map);function o(e){var n=e.type,t=e.position,o=void 0===t?"bottom":t,a=(0,r.useRef)(null);return(0,r.useEffect)(function(){var e=a.current;if(e instanceof HTMLElement)return i.update(function(t){var r=new Map(t);return r.set(n,{element:e,position:o}),r}),function(){i.update(function(t){var r,i=new Map(t);return(null==(r=i.get(n))?void 0:r.element)===e&&i.delete(n),i})}},[n,o]),a}function a(e){var n=i.current.get(e);return null!=n?n:null}},47803:(e,n,t)=>{"use strict";t.d(n,{G:()=>c});var r=t(81073),i=t(18509),o=t(27023),a=t(85389),l=t(63456),s=(0,i.x)({loadingState:[o.wp.center]});function c(){return(0,r.Y)(a.S,{css:s.loadingState,grow:!0,shrink:!0,children:(0,r.Y)(l.A,{})})}},47848:(e,n,t)=>{"use strict";t.d(n,{ZA:()=>v,Zd:()=>b,gH:()=>w,kg:()=>x,s$:()=>S,th:()=>_});var r=t(29935),i=t(17844),o=t(93629),a=t(86105),l=t(82643),s=t(90629),c=t(23099),u=t.n(c),d=t(35992),p=t(96907),f=t.n(p),h=t(91326),m=t(26072),g=t(11602),v=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,80,8e3,8008,8080,8081,8099,9e3]);function y(e,n){return new Set(Array.from(e).filter(function(e){return!n.has(e)}))}var w=function(e){return e.FORWARDED="FORWARDED",e.INTERNAL_ONLY="INTERNAL_ONLY",e.NO_MORE_EXTERNAL_PORTS_AVAILABLE="NO_MORE_EXTERNAL_PORTS_AVAILABLE",e.MISCONFIGURED="MISCONFIGURED",e.CONFIG_MISSING="CONFIG_MISSING",e}({});function b(e){var n=e.type;switch(n){case"FORWARDED":case"MISCONFIGURED":return e.externalPort;case"INTERNAL_ONLY":case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return;default:(0,h.A)(n)}}function S(e){var n;return null!=(n=e.isLocalhost)&&n}function Y(e){return e===g.wF}function _(e){return e===g.no}function A(e){return Y(e.localPort)}function C(e){return e?y(v,new Set(e.map(function(e){return b(e.configuration)}))):v}function k(e){var n,t=e.localPort,r=C(e.portsState.current);if(0!==r.size){var i=r.has(80),o=r.has(t);return i?80:o?t:Array.from(r).sort()[0]}}function x(e){var n=e.container,t=e.dotReplit,c=(0,m.F)(null),p=(0,m.F)(!1),v=(0,m.F)("only-global"),w=f()((0,r._)(function(){var e;return(0,l.YH)(this,function(n){switch(n.label){case 0:if(!c.current)return[2];return e=c.current.filter(function(e){return!e.isTemporary}).map(function(e){var n=e.configuration.type;switch(n){case"FORWARDED":case"MISCONFIGURED":return(0,i._)({localPort:e.configuration.localPort,externalPort:e.configuration.externalPort},S(e.configuration)?{exposeLocalhost:!0}:void 0);case"INTERNAL_ONLY":return{localPort:e.configuration.localPort};case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return!1;default:(0,h.A)(n)}}).filter(Boolean).sort(function(e,n){return e.localPort-n.localPort}),[4,t.updateDotReplit([{op:"add",path:"ports",value:JSON.stringify(e)}])];case 1:return n.sent(),[2]}})}),1e3,{leading:!1,trailing:!0});function x(){p.set(!0),w()}return!function(e){var n=e.container,t=e.dotReplit,r=e.portsState,l=e.writeDotReplitPortsConfig,c=e.isThisServiceUpdatingDotReplit,p=e.forwardPortsAutomatically;function f(e){return e.sort(function(e,n){var t,r;return(null!=(t=e.configuration.localPort)?t:0)-(null!=(r=n.configuration.localPort)?r:0)})}var h=[];function m(e){try{var n=function(e){var n=e.portsState,t=e.portInfo,r=e.forwardPortsAutomatically;if(null===n.current)throw Error("processOpenedPort can only assign ports if dotReplit config was read");var a={pid:t.pid,cgroup:t.cgroup,address:t.address,cmdline:t.cmdline},l="127.0.0.1"===a.address,s=Y(t.port),c=_(t.port),u=n.current.find(function(e){return e.configuration.localPort===t.port});if(void 0!==u)return{isOpen:!0,isTemporary:!!s||u.isTemporary,processInfo:a,configuration:(0,o._)((0,i._)({},u.configuration),{isLocalhost:l})};if(c)return{isOpen:!0,isTemporary:!0,processInfo:a,configuration:{type:"FORWARDED",localPort:t.port,externalPort:t.port,isLocalhost:l,isVnc:s}};if("none"===r.current||"only-global"===r.current&&l||s)return{isOpen:!0,isTemporary:!0,processInfo:a,configuration:{type:"INTERNAL_ONLY",localPort:t.port,isLocalhost:l,isVnc:s}};var d=k({localPort:t.port,portsState:n});return void 0===d?{isOpen:!0,isTemporary:!1,processInfo:a,configuration:{type:"NO_MORE_EXTERNAL_PORTS_AVAILABLE",localPort:t.port,isLocalhost:l,isVnc:s}}:{isOpen:!0,isTemporary:!1,processInfo:a,configuration:{type:"FORWARDED",localPort:t.port,externalPort:d,isLocalhost:l,isVnc:s}}}({portsState:r,portInfo:e,forwardPortsAutomatically:p}),t=!1;r.update(function(r){if(!r)throw Error("processOpenedPort can only execute if we red .replit first");return(0,d.jM)(r,function(i){var o=i.findIndex(function(n){return n.configuration.localPort===e.port});return -1===o?(o=r.length,t=!0):u()(r[o].configuration,n.configuration)||(t=!0),i[o]=n,f(i)})}),t&&l()}catch(e){throw s.v4(function(n){n.setTag("service","ports"),s.Cp(e)}),e}}function v(e){try{var n=!1;r.update(function(t){if(!t)throw Error("onPortClosed can only execute if we red .replit first");return(0,d.jM)(t,function(t){var r=t.findIndex(function(n){return n.configuration.localPort===e.port});if(-1!==r){var i,o=t[r];o.isTemporary||(i=o.configuration.localPort,32768<=i&&i<=60999)?(t.splice(r,1),n=!0):o.isOpen=!1}})}),n&&l()}catch(e){throw s.v4(function(n){n.setTag("service","ports"),s.Cp(e)}),e}}n.onPortOpened(function(e){null===r.current?h.push({type:"portOpen",portInfo:e}):m(e)}),n.onPortClosed(function(e){null===r.current?h.push({type:"portClose",portInfo:e}):v(e)}),n.onConnectionStateChanged(function(e){e!==g.KN.CONNECTED&&null!==r.current&&r.set(r.current.filter(function(e){return!e.isTemporary}).map(function(e){return{isOpen:!1,isTemporary:e.isTemporary,configuration:e.configuration}}))}),t.watch(function(e){var n,t=e.config,l=null!=(n=null==t?void 0:t.ports)?n:[];if(!0===c.current){var s=r.current;if(!s||l.length!==s.length)return;l.every(function(e,n){var t,r=s[n];return e.localPort===r.configuration.localPort&&e.externalPort===(null!=(t=b(r.configuration))?t:0)})&&c.set(!1);return}r.update(function(e){e||(e=[]);var n=new Set(l.map(function(e){return e.localPort}).filter(function(e){return null!=e})),t=new Set(e.map(function(e){return e.configuration.localPort})),r=new Set(e.filter(function(e){return e.isOpen}).map(function(e){return e.configuration.localPort})),s=y(n,t),c=(m=new Set((0,a._)(Array.from(n)).concat((0,a._)(Array.from(r)))),new Set(Array.from(t).filter(function(e){return m.has(e)}))),u=[],d=!0,p=!1,h=void 0;try{for(var m,g,v=c[Symbol.iterator]();!(d=(g=v.next()).done);d=!0)!function(){var n=g.value,t=e.find(function(e){return e.configuration.localPort===n}),r=l.find(function(e){return e.localPort===n});if(!t)throw Error("couldn't find match for local port: ".concat(n));if(!r)return u.push((0,o._)((0,i._)({},t),{configuration:{type:"CONFIG_MISSING",localPort:t.configuration.localPort,isLocalhost:S(t.configuration),isVnc:A(t.configuration)}}));var a=t.configuration;a=null!=r.externalPort&&0!==r.externalPort?{type:C(u).has(r.externalPort)?"FORWARDED":"MISCONFIGURED",localPort:t.configuration.localPort,externalPort:r.externalPort,isLocalhost:S(t.configuration),isVnc:A(t.configuration)}:{type:"INTERNAL_ONLY",localPort:t.configuration.localPort,isLocalhost:S(t.configuration),isVnc:A(t.configuration)},u.push((0,o._)((0,i._)({},t),{configuration:a}))}()}catch(e){p=!0,h=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw h}}var w=!0,b=!1,_=void 0;try{for(var k,x=s[Symbol.iterator]();!(w=(k=x.next()).done);w=!0)!function(){var e,n=k.value,t=l.find(function(e){return e.localPort===n});if(!t)throw Error("couldn't find match for local port: ".concat(n));var r=null!=t.externalPort&&0!==t.externalPort?t.externalPort:void 0;if(void 0!==r){var i,o=C(u).has(r);u.push({isOpen:!1,isTemporary:!1,configuration:{type:o?"FORWARDED":"MISCONFIGURED",localPort:n,externalPort:r,isLocalhost:null!=(i=t.exposeLocalhost)&&i,isVnc:Y(n)}})}else u.push({isOpen:!1,isTemporary:!1,configuration:{type:"INTERNAL_ONLY",localPort:n,isLocalhost:null!=(e=t.exposeLocalhost)&&e,isVnc:Y(n)}})}()}catch(e){b=!0,_=e}finally{try{w||null==x.return||x.return()}finally{if(b)throw _}}return f(u)}),h.length>0&&(h.forEach(function(e){var n=e.type,t=e.portInfo;"portOpen"===n?m(t):"portClose"===n&&v(t)}),h=[])})}({container:n,dotReplit:t,portsState:c,writeDotReplitPortsConfig:x,isThisServiceUpdatingDotReplit:p,forwardPortsAutomatically:v}),{tryExposingPortAutomatically:function(e){var n=k({localPort:e,portsState:c});void 0!==n&&(c.update((0,d.jM)(function(t){if(t){var r=t.find(function(n){return n.configuration.localPort===e});r&&(r.isTemporary=!1,r.configuration={type:"FORWARDED",localPort:e,externalPort:n,isLocalhost:r.configuration.isLocalhost,isVnc:Y(e)})}})),x())},updateDotReplitPortsMapping:function(e,n,t){c.update((0,d.jM)(function(r){var i,o=null==r?void 0:r.find(function(n){return n.configuration.localPort===e}),a=t;void 0===a&&(a=null!=(i=null==o?void 0:o.configuration.isLocalhost)&&i);var l=void 0!==n?{type:"FORWARDED",localPort:e,externalPort:n,isLocalhost:a,isVnc:Y(e)}:{type:"INTERNAL_ONLY",localPort:e,isLocalhost:a,isVnc:Y(e)};o?(o.isTemporary=!1,o.configuration=l):(r||(r=[]),r.push({isOpen:!1,isTemporary:!1,configuration:l}))})),x()},removeDotReplitPortsMapping:function(e,n){c.update((0,d.jM)(function(t){var r;void 0!==(r=void 0!==n?null==t?void 0:t.findIndex(function(t){return t.configuration.localPort===e&&("FORWARDED"===t.configuration.type||"MISCONFIGURED"===t.configuration.type)&&t.configuration.externalPort===n}):null==t?void 0:t.findIndex(function(n){return n.configuration.localPort===e}))&&(null==t||t.splice(r,1))})),x()},portsState:c,setForwardPortsAutomatically:function(e){v.set(e)}}}},48614:e=>{e.exports={files:"SearchFilesystem_files__L_HhB"}},48693:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var r=t(12694),i=t(21462),o=t(8950),a=t(67917),l=t(93188),s=t(73176),c=t(22799);function u(){var e=(0,c.Jo)("development").refetch,n=(0,a.NC)(),t=(0,s.J2)(n.sessions.agent.current),u=(0,i.useMemo)(function(){return null==t?void 0:t.reduce(d,1)},[t]),p=null==t?void 0:t.agent.state,f=(0,i.useMemo)(function(){return p&&u?l.cP.combine(p,u):null},[p,u]),h=(0,i.useCallback)(function(n){var t=(0,r._)(n,2),i=t[0];t[1].createdDatabase&&(null==i?void 0:i.state)===o.g32.AGENT_STATE_RUNNING&&e()},[e]);(0,s.q3)(f,{next:h})}var d={direction:"reverse",state:{createdDatabase:!1},reducer:function(e,n){if(e.sender.type!==o.utd.AI)return!1;var t=e.contents.contents;if((null==t?void 0:t.$kind)!=="agentTimelineEventContents")return!1;var r=t.agentTimelineEventContents.toolData;return(null==r?void 0:r.$kind)==="createPostgresqlDatabaseData"&&(n.lastCreationEventId!==e.id&&(n.createdDatabase=!0,n.lastCreationEventId=e.id),!1)}}},48695:(e,n,t)=>{"use strict";t.d(n,{E:()=>s,w:()=>l});var r=t(21462),i=t(8950),o=t(67917),a=t(73176);function l(){var e=(0,o.NC)(),n=(0,a.J2)(e.sessions.agent.current);return(0,r.useMemo)(function(){return null==n?void 0:n.reduce(c,1).result},[n])}function s(e){var n=l();(0,a.q3)(n,{next:function(n){n.toPresent&&e(n.toPresent.toolData,n.toPresent.eventId)}})}var c={direction:"reverse",state:{toPresent:void 0},reducer:function(e,n){if(e.sender.type!==i.utd.AI)return!1;var t=e.contents.contents;if((null==t?void 0:t.$kind)==="agentTimelineEventContents"){var r=t.agentTimelineEventContents.toolData;switch(null==r?void 0:r.$kind){case"presentResultsToolData":return n.toPresent={toolData:{$kind:"presentResultsToolData",data:r.presentResultsToolData},eventId:e.id},!1;case"deployData":return n.toPresent={toolData:{$kind:"deployData",data:r.deployData},eventId:e.id},!1}}}}},48726:(e,n,t)=>{"use strict";t.d(n,{Tr:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query AiDeveloperSection {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.I(c,n)}},48958:(e,n,t)=>{"use strict";t.d(n,{TO:()=>y,XB:()=>m,cc:()=>w,jp:()=>b});var r=t(46434),i=t(29935),o=t(17844),a=t(93629),l=t(82643),s=t(35992),c=t(76957),u=t(67201),d=t(91326),p=t(22799),f=t(336),h=t(39159),m=function(e){return e.FoundDiff="FoundDiff",e.GeneratingDiffStatements="GeneratingDiffStatements",e}({}),g=(0,c.eU)({id:"",deployOptions:void 0,stages:new Map}),v=(0,c.eU)(null,function(e,n,t){var r,i=(r=e(g),(0,s.jM)(r,function(e){switch(t.type){case"INIT":e.id=(0,u.A)(),e.deployOptions=t.deployOptions,e.stages=new Map,e.stages.set("FoundDiff",{type:"FoundDiff",completed:!0,running:!1});break;case"UPDATE_STAGE":e.stages.set(t.state.type,t.state);break;case"COMPLETED":var n=e.stages.get(t.stage);n&&(n.completed=!0,n.running=!1,"GeneratingDiffStatements"===n.type&&n.completed&&"statementsToExecute"in t&&(n.statementsToExecute=t.statementsToExecute,n.shouldAskForApprove=t.shouldAskForApprove,n.infoToPrint=t.infoToPrint));break;case"APPROVE_DIFF_STATEMENTS":var r=e.stages.get("GeneratingDiffStatements");(null==r?void 0:r.type)==="GeneratingDiffStatements"&&r.completed&&(r.approved=!0)}}));n(g,i)});function y(){return{state:(0,f.h)(g),dispatch:(0,f.ob)(v)}}function w(){var e,n=y(),t=n.state,s=n.dispatch,c=(0,p.GK)().database,u=(0,p.UK)().database;return(0,h.b)((e=(0,i._)(function(e,n){var t,i,p,f,h,m,g,v,y,w,b;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(t=n.signal,!c)return[2];s({type:"UPDATE_STAGE",state:{type:"GeneratingDiffStatements",completed:!1,running:!0}}),p=(i=e.prepareDatabaseMigrations.generateDiffStatements.stream({sourceConnectionString:c.connectionString,targetConnectionString:null==u?void 0:u.connectionString},{signal:t})).resReadable,f=i.reqWritable,h=!1,m=!1,l.label=1;case 1:l.trys.push([1,6,7,12]),v=(0,r._)(p),l.label=2;case 2:return[4,v.next()];case 3:if(!(h=!(y=l.sent()).done))return[3,5];if(!(w=y.value).ok){if("UNEXPECTED_DISCONNECT"===w.payload.code||"CANCEL"===w.payload.code)return[2];throw Error("[".concat(w.payload.code,"] ").concat(w.payload.message))}"none"===w.payload.$kind?s({type:"COMPLETED",stage:"GeneratingDiffStatements"}):"diff"===w.payload.$kind?s((0,a._)((0,o._)({},w.payload.result),{type:"COMPLETED",stage:"GeneratingDiffStatements"})):(0,d.A)(w.payload),l.label=4;case 4:return h=!1,[3,2];case 5:return[3,12];case 6:return b=l.sent(),m=!0,g=b,[3,12];case 7:if(l.trys.push([7,,10,11]),!(h&&null!=v.return))return[3,9];return[4,v.return()];case 8:l.sent(),l.label=9;case 9:return[3,11];case 10:if(m)throw g;return[7];case 11:return[7];case 12:return f.close(),[2]}})}),function(n,t){return e.apply(this,arguments)}),[s,c,u]),{state:t}}function b(){var e=y().state.stages.get("GeneratingDiffStatements");return e&&"GeneratingDiffStatements"===e.type&&e.completed&&!e.approved}},49092:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(81073),i=t(36937),o=t(18509),a=t(27023),l=t(85389),s=(0,o.x)({root:[a.wp.borderRadius(8),a.wp.backgroundColor.backgroundRoot,a.wp.border({color:i.LU.outlineDimmest})],video:[a.wp.borderRadius(8),a.wp.width("100%")]});function c(e){var n=e.src,t=e.autoPlay,i=e.loop,o=e.width;return(0,r.Y)(l.S,{css:s.root,p:4,style:{width:void 0===o?280:o},children:(0,r.Y)("video",{css:s.video,src:n,autoPlay:void 0===t||t,loop:void 0===i||i,playsInline:!0,muted:!0})})}},49126:(e,n,t)=>{"use strict";t.d(n,{J:()=>V});var r=t(81073),i=t(684),o=t(37299),a=t(41467),l=t(29935),s=t(12694),c=t(82643),u=t(21462),d=t(90629),p=t(33090),f=t(71424),h=t(59255),m=t(86105),g=t(4880),v=t(93707),y=t(82315),w=t(41930),b=t(42793),S=t(36937),Y=t(18509),_=t(27023),A=t(83070),C=t(53384),k=t(85389),x=t(83728),D=(0,b.i7)({"0%":{backgroundColor:S.LU.accentPrimaryDimmer},"100%":{backgroundColor:"transparent"}}),E=(0,Y.x)({filter:[_.wp.border({color:S.LU.outlineDimmest,direction:"bottom"})],tableRoot:[_.wp.flex.growAndShrink(1),_.wp.width("100%"),_.wp.overflow("auto"),{'&[data-resizing="true"]':{overflow:"hidden",pointerEvents:"none"}}],virtualTable:[_.wp.width("fit-content"),_.wp.position.relative],tableHeader:[_.wp.display.flex,_.wp.flex.row,_.wp.backgroundColor.backgroundDefault,_.wp.position.sticky,_.wp.zIndex(1),_.wp.top(0),_.wp.noSelect],headerCell:[_.wp.color.foregroundDefault,_.wp.fontWeight.medium,_.wp.fontSize(12),_.wp.px(6),_.wp.display.flex,_.wp.align.center,_.wp.border({color:S.LU.outlineDimmest,direction:"bottom"}),_.wp.border({color:S.LU.outlineDimmest,direction:"right"}),{height:25,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:first-child":{background:S.LU.backgroundDefault,position:"sticky",left:0,zIndex:1}}],tableRow:[_.wp.flex.row,{'&[data-highlighted="true"]':{animation:"".concat(D," ").concat(2e3,"ms ease-out forwards")}}],tableCell:[_.wp.display.flex,_.wp.align.center,_.wp.color.foregroundDimmer,_.wp.fontSize(12),_.wp.px(6),_.wp.border({color:S.LU.outlineDimmest,direction:"bottom"}),_.wp.border({color:S.LU.outlineDimmest,direction:"right"}),{height:25,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:first-child":{justifyContent:"center",position:"sticky",left:0,background:S.LU.backgroundDefault}}],resizeHandle:[_.wp.position.absolute,_.wp.top(0),_.wp.right(0),_.wp.height("100%"),_.wp.width(4),{cursor:"col-resize","&:hover":{backgroundColor:S.LU.accentPrimaryDefault}}]}),R=function(e,n){var t=(0,s._)((0,u.useState)(e),2),r=t[0],i=t[1],o=(0,u.useMemo)(function(){return new y.$S(e,{selector:function(e){return Object.values(e).join(" ")},casing:"case-insensitive"})},[e]);return(0,u.useEffect)(function(){if(!n)return void i(e);o.find(n).then(function(e){i(e.map(function(e){return e.item}))}).catch(function(){})},[e,o,n]),r},I=function(e){var n=(0,s._)((0,u.useState)(e),2),t=n[0],r=n[1],i=(0,s._)((0,u.useState)(null),2),o=i[0],a=i[1],l=(0,s._)((0,u.useState)(0),2),c=l[0],d=l[1],p=(0,s._)((0,u.useState)(0),2),f=p[0],h=p[1],g=(0,u.useCallback)(function(e,n){a(e),d(n.clientX),h(t[e])},[t]),v=(0,u.useCallback)(function(e){if(null!==o){var n=Math.max(50,Math.min(300,f+(e.clientX-c)));r(function(e){var t=(0,m._)(e);return t[o]=n,t})}},[o,f,c]),y=(0,u.useCallback)(function(){a(null)},[]);return(0,u.useEffect)(function(){if(null!==o){var e=function(e){return v(e)},n=function(){return y()};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),function(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)}}},[y,v,o]),{columnWidths:t,setColumnWidths:r,resizingColumn:o,handleResizeStart:g}};function T(e){var n=e.data,t=e.initialLine,i=e.openInEditor,o=(0,w.a)(),a=(0,s._)((0,u.useState)(""),2),l=a[0],c=a[1],d=(0,u.useMemo)(function(){if(0===n.length)return{headers:[],data:[],calculatedColumnWidths:[]};var e=[""].concat((0,m._)(n[0])),t=e.map(function(e,n){return{key:n.toString(),label:e,isRowHeader:0===n}}),r=[],i=Array(e.length).fill(0);n.slice(1).forEach(function(e,n){var o={0:(n+1).toString(),key:n.toString()};t.slice(1).forEach(function(n,t){var r=e[t]||"";o[(t+1).toString()]=r,i[t+1]=Math.max(i[t+1],r.length)}),r.push(o)});var o=i.map(function(e,n){return 0===n?25:Math.min(Math.max(8*Math.max(e,t[n].label.length),50),300)});return{headers:t,data:r,calculatedColumnWidths:o}},[n]),p=d.headers,f=d.data,h=d.calculatedColumnWidths,y=R(f,l),b=I(h),S=b.columnWidths,Y=b.setColumnWidths,_=b.resizingColumn,D=b.handleResizeStart,T=(0,s._)((0,u.useState)(null),2),F=T[0],P=T[1];(0,u.useEffect)(function(){Y(h)},[h,Y]);var L=(0,u.useRef)(null),U=(0,g.Te)({count:y.length,getScrollElement:function(){return L.current},estimateSize:function(){return 25},overscan:10,rangeExtractor:function(e){var n=new Set([0].concat((0,m._)((0,v.vp)(e))));return(0,m._)(n)}});return(0,u.useEffect)(function(){if(t&&y.length>t){var e=t-2;U.scrollToIndex(e,{align:"center"}),P(e);var n=setTimeout(function(){return P(null)},2e3);return function(){return clearTimeout(n)}}},[y.length,t,U]),(0,r.FD)(r.FK,{children:[(0,r.Y)(k.S,{css:E.filter,p:4,children:(0,r.Y)(C.I,{value:l,onChange:function(e){return c(e.target.value)},onClear:function(){return c("")}})}),(0,r.Y)("div",{css:E.tableRoot,ref:L,"data-resizing":null!==_,children:(0,r.FD)("div",{css:E.virtualTable,style:{height:"".concat(U.getTotalSize(),"px"),width:"".concat(S.reduce(function(e,n){return e+n},0),"px")},children:[(0,r.Y)("div",{css:E.tableHeader,children:p.map(function(e,n){return(0,r.FD)("div",{css:E.headerCell,style:{width:"".concat(S[n],"px")},children:[e.label,o||0===n?null:(0,r.Y)("div",{css:E.resizeHandle,onMouseDown:function(e){return D(n,e)},role:"separator"})]},e.key)})}),U.getVirtualItems().map(function(e){var n=y[e.index];return n?(0,r.Y)("div",{css:E.tableRow,"data-index":e.index,"data-highlighted":e.index===F,style:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(25+e.start,"px)")},children:p.map(function(e,t){var o=n[e.key];return(0,r.Y)("div",{css:E.tableCell,style:{width:"".concat(S[t],"px")},children:0===t?(0,r.Y)(A.K0,{colorway:"primary",alt:"Edit at this line",onClick:function(){return i(parseInt(o,10)+1)},size:18,children:(0,r.Y)(x.A,{})}):o},e.key)})},e.key.toString()):null})]})})]})}var F=t(75679),P=t(13528),L=t(55515),U=t(36073),N=t(17767),O=t(63456),M=t(71872),H=(0,Y.x)({root:[_.wp.flex.column,_.wp.height("100%"),_.wp.width("100%"),_.wp.overflow("hidden")],loadingContainer:[_.wp.center]});function B(e){var n=e.filePath,i=e.initialLine,o=e.performPaneOperation,a=(0,f.A)().fs,m=(0,s._)((0,u.useState)([]),2),g=m[0],v=m[1],y=(0,u.useCallback)(function(e){o({operation:"replace",pane:{type:"codeEditor",data:{path:n,line:e}}}),o({operation:"commit"})},[o,n]);(0,L.Qt)(function(){return{commands:[{commands:[{match:h.G2,data:{label:"Open in Editor",icon:(0,r.Y)(N.A,{}),type:"action",run:function(){return y()}}}]}]}},[y]);var w=(0,s._)((0,u.useState)(!1),2),b=w[0],S=w[1],Y=(0,s._)((0,u.useState)(!0),2),_=Y[0],A=Y[1];return(0,u.useEffect)(function(){var e,r=(e=(0,l._)(function(e){var n;return(0,c.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.e(5800).then(t.t.bind(t,75800,23))];case 1:return r.sent().default.parse(e,{complete:function(e){v(e.data),A(!1),S(!1)}}),[3,3];case 2:return n=r.sent(),d.Cp(n),S(!0),[3,3];case 3:return[2]}})}),function(n){return e.apply(this,arguments)});return a.watchTextFile(n,{onReady:function(e){return r(e.initialContent)},onChange:function(e){return r(e.latestContent)},onMoveOrDelete:function(e){e.eventType===p.dV.Delete&&o({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[n,a,o]),(0,r.FD)(k.S,{css:H.root,children:[(0,r.Y)(F.ou,{path:n,performPaneOperation:o,children:(0,r.Y)(P.k,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:function(){return y()},icon:(0,r.Y)(N.A,{})})}),b?(0,r.Y)(k.S,{p:8,children:(0,r.Y)(U.N,{icon:(0,r.Y)(M.A,{}),colorway:"red",text:"This CSV could not be displayed."})}):(0,r.Y)(r.FK,{children:_?(0,r.Y)(k.S,{css:H.loadingContainer,grow:!0,shrink:!0,children:(0,r.Y)(O.A,{})}):(0,r.Y)(T,{data:g,openInEditor:y,initialLine:i})})]})}var z=t(79166),W=t(78468),G=i.ZU.Object({type:i.ZU.Literal("csvPreview"),data:i.ZU.Object({path:i.ZU.String(),line:i.ZU.Optional(i.ZU.Integer())})}),V={Content:function(e){var n=e.options.performPaneOperation,t=e.pane.data,i=t.path,o=t.line;return(0,r.Y)(B,{filePath:i,performPaneOperation:n,initialLine:o})},Icon:function(e){var n=e.size;return(0,r.Y)(W.A,{size:n})},getTitle:function(e){return e.data.path?(0,a.WP)(e.data.path):"CSV Preview"},description:"Preview CSV files in a tabular format",category:z.bY.Other,decode:function(e){return o.T(G,e)}}},49156:(e,n,t)=>{"use strict";t.d(n,{aI:()=>T,P6:()=>k,SY:()=>D,KZ:()=>R});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175);function s(){var e=(0,i._)(["\n  fragment ForkContextRepl on Repl {\n    id\n    title\n    description\n    org {\n      id\n    }\n  }\n"]);return s=function(){return e},e}var c=(0,o.J1)(s()),u=t(13850),d=t(12546),p=t(7613),f=t(82765),h=t(91295),m=t(95245),g=t(1601),v=t(4842);function y(){var e=(0,i._)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    imageUrl\n    workspaceCta\n    publishedAs\n    publicForkCount\n    timeUpdated\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    templateInfo {\n      iconUrl\n      imageUrl\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n        message\n      }\n      editResources {\n        isAuthorized\n      }\n      editTemplateMetadata {\n        isAuthorized\n      }\n      editVisibility {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n      }\n      deleteRepl {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...ForkContextRepl\n    ...WorkspaceHeaderReplMetadataRepl\n    ...PublishReleaseFormRepl\n    ...BulkDeleteConfirmationModalRepl\n    ...CreateProjectBeforeForkReplContext\n    ...TransferReplReplInfo\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}function w(){var e=(0,i._)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n    currentUser {\n      id\n      ...WorkspaceHeaderComputeAlertCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return w=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function S(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return S=function(){return e},e}function Y(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return Y=function(){return e},e}var _={},A=(0,o.J1)(y(),h.N,c,v.a,p._O,f.l,m.lb,u.oD),C=(0,o.J1)(w(),A,g.C);function k(e){var n=(0,r._)({},_,e);return a.I(C,n)}var x=(0,o.J1)(b(),d.xS);function D(e){var n=(0,r._)({},_,e);return l.n(x,n)}var E=(0,o.J1)(S(),A);function R(e){var n=(0,r._)({},_,e);return l.n(E,n)}var I=(0,o.J1)(Y());function T(e){var n=(0,r._)({},_,e);return l.n(I,n)}},49271:(e,n,t)=>{"use strict";t.d(n,{v:()=>s});var r=t(17844),i=t(21462),o=t(55100),a=t(94175),l=t(36993);function s(){var e=(0,o.A)(),n=(0,a.A)("fileTree").trackTimeToLoadFileStart;return(0,i.useCallback)(function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(t);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,l.A)((0,r._)({replId:e},o))},[e,n])}},49316:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(12694),i=t(21462),o=t(52771),a=t(55100);function l(e){var n=(0,a.A)(),t=(0,r._)((0,o.F)(),1)[0];(0,i.useEffect)(function(){if(e){var r=e.messages.filter(function(e){return!e.seen}).map(function(e){return e.id});0!==r.length&&t({variables:{replId:n,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map(function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}}),__typename:"AnnotationMessageList"}}})}},[n,e,t])}},49326:(e,n,t)=>{"use strict";t.d(n,{P:()=>r});var r=function(e){return e.CommandBar="commandbar",e.FiletreeContextMenu="filetree-context-menu",e.SidebarSearch="sidebar-search",e.EditorContextMenu="editor-context-menu",e}({})},49382:(e,n,t)=>{"use strict";t.d(n,{Q:()=>u,x:()=>c});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(66241),s=t(71424),c=function(e){return e.escapeHatchGitExecWrite("git config --local core.sshCommand replit-git-ssh")};function u(){var e=(0,s.A)(),n=e.container,t=e.fs,u=e.git,d=(0,i._)((0,a.useState)({state:"loading"}),2),p=d[0],f=d[1];return(0,a.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:return f({state:"loading"}),[4,u.getRepositoryState()];case 1:if((e=n.sent()).error&&f({state:"error",error:"Could not get repository status"}),e.error||e.state===l.Gi.NOT_INITIALIZED)return f({state:"error",error:"Could not get repository status"}),[2];return[4,c(u)];case 2:if(n.sent().error)return f({state:"error",error:"Could not configure SSH"}),[2];return f({state:"finished",hasInstalled:!0}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n,t,u]),p}},49591:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(17844),i=t(93629),o=t(81073),a=t(82672),l=t.n(a);let s=function(e){var n=e.height,t=void 0===n?24:n,a={width:84,height:64,fill:"#F26207",rx:12};return(0,o.FD)("svg",{width:t/1.2,height:t,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"loading-animation-title",children:[(0,o.Y)("title",{id:"loading-animation-title",children:"loading animation"}),(0,o.Y)("rect",(0,i._)((0,r._)({clsx:[l().rect,l().rect1]},a),{x:8,y:8})),(0,o.Y)("rect",(0,i._)((0,r._)({clsx:[l().rect,l().rect2]},a),{x:108,y:88})),(0,o.Y)("rect",(0,i._)((0,r._)({clsx:[l().rect,l().rect3]},a),{x:8,y:168}))]})}},49625:(e,n,t)=>{"use strict";t.d(n,{_9:()=>p,t:()=>g});var r=t(17844),i=t(12584),o=t(41114),a=t(50175);function l(){var e=(0,i._)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment MultiplayerRepl on Repl {\n    id\n    collaborators {\n      user {\n        ...MultiplayerUser\n      }\n    }\n    multiplayerInvites {\n      email\n      type\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment MultiplayerReplInvite on MultiplayerInvite {\n    email\n    repl {\n      ...MultiplayerRepl\n    }\n    invitePermissionType: type\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation AddOrInviteReplMultiplayer(\n    $input: AddOrInviteReplMultiplayerInput!\n  ) {\n    addOrInviteReplMultiplayer(input: $input) {\n      __typename\n      ... on AddOrInviteReplMultiplayerOuput {\n        result {\n          ... on MultiplayerInvite {\n            ...MultiplayerReplInvite\n          }\n          ... on ReplPermission {\n            id\n            repl {\n              ...MultiplayerRepl\n            }\n            user {\n              ...MultiplayerUser\n            }\n            replPermissionType: type\n          }\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(l()),f=(0,o.J1)(s(),p),h=(0,o.J1)(c(),f),m=(0,o.J1)(u(),h,f,p);function g(e){var n=(0,r._)({},d,e);return a.n(m,n)}},49795:e=>{e.exports={root:"AgentQueryResponseForm_root__y4kIA",optionsRow:"AgentQueryResponseForm_optionsRow__oG6iK",optionGrow:"AgentQueryResponseForm_optionGrow__dtbBB"}},50022:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var r=t(81073),i=t(42793),o=t(36937),a=t(18509),l=t(27023),s=(0,i.AH)([l.wp.display.flex,l.wp.align.center,l.wp.justify.center,l.wp.backgroundColor.accentNegativeDefault,l.wp.minWidth(16),l.wp.height(16),l.wp.color.white,l.wp.position.absolute,l.wp.fontSize(o.LU.fontSizeSmall),{borderRadius:"10px",transform:"translate(50%, -50%)",padding:"2px 3px"}]),c=(0,a.x)({root:l.wp.display.flex,unreadIndicator:[l.wp.width(5),l.wp.height(5),l.wp.backgroundColor.redDefault,l.wp.position.absolute,{borderRadius:"10px",transform:"translate(8px, -1px)"}],count:s,countOverflow:[s,{transform:"translate(25%, -50%)"}]});function u(e){var n=e.unreadDot,t=e.size,i=void 0===t?12:t,o=e.count,a=void 0===o?null:o,l=a&&a>99,s=l?"99+":null==a?void 0:a.toString();return(0,r.FD)("span",{css:c.root,children:[(0,r.Y)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",children:(0,r.Y)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})}),n?(0,r.Y)("div",{css:c.unreadIndicator}):null,!!a&&(0,r.Y)("div",{css:l?c.countOverflow:c.count,children:s})]})}},50219:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(81073),s=t(21462),c=t(39159),u=t(56965),d=t(66147),p=t(18509),f=t(27023),h=t(85389);function m(){}var g=(0,p.x)({terminalWrapper:[{"> div":[f.wp.borderRadius(4)],"& .xterm":[f.wp.borderRadius(4)]}]});function v(e){var n,t=e.processId,p=e.openPane,f=e.maxHeight,v=(0,d.V)(),y=(0,u.Ui)({maxHeight:f,openPane:p}),w=y.visibleHeight,b=y.bufferHeight,S=y.wrapperResizeRef,Y=y.xterm,_=y.xtermRef,A=(0,o._)((0,s.useState)(null),2),C=A[0],k=A[1],x=(0,s.useCallback)(function(e){return k(function(){return e}),function(){}},[]);return(0,c.b)((n=(0,i._)(function(e,n){var i,o,l,s,c,u,d,p,f;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(i=n.signal,!C)return[2];o=e.agentToolPackager.connectToInstallPackages.subscribe({processId:t},{signal:i}).resReadable,l=!1,s=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),u=(0,r._)(o),a.label=2;case 2:return[4,u.next()];case 3:if(!(l=!(d=a.sent()).done))return[3,5];if(!(p=d.value).ok){if("UNEXPECTED_DISCONNECT"===p.payload.code||"CANCEL"===p.payload.code||"NO_PROCESS_MATCHING_ID"===p.payload.code)return[3,5];throw Error("[".concat(p.payload.code,"]: ").concat(p.payload.message))}"output"===p.payload.$kind&&C(p.payload.output),a.label=4;case 4:return l=!1,[3,2];case 5:return[3,12];case 6:return f=a.sent(),s=!0,c=f,[3,12];case 7:if(a.trys.push([7,,10,11]),!(l&&null!=u.return))return[3,9];return[4,u.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(s)throw c;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[C,t]),(0,l.Y)(h.S,{css:g.terminalWrapper,style:{height:w,background:null==v?void 0:v.background},children:(0,l.Y)(u._x,{onInput:m,xterm:Y,wrapperResizeRef:S,bufferHeight:b,setOnMessage:x,onResizeTerminal:m,children:(0,l.Y)(u.DJ,{xtermRef:_,visibleHeight:w,maxHeight:f})})})}},50382:e=>{e.exports={checkpointOk:"CheckpointCard_checkpointOk__TyU2M",button:"CheckpointCard_button__ZC97_",root:"CheckpointCard_root__uJ1Ha",checkpointCard:"CheckpointCard_checkpointCard__sxrnC","pulse-gradient":"CheckpointCard_pulse-gradient__i_sDc",checkpointFailed:"CheckpointCard_checkpointFailed__JG4mD",statusIcon:"CheckpointCard_statusIcon__V_9pZ",statusIconReverted:"CheckpointCard_statusIconReverted__8zzvr",statusIconFailed:"CheckpointCard_statusIconFailed__U_uip",costText:"CheckpointCard_costText__MLRxf",buttonRow:"CheckpointCard_buttonRow__wwaMy",noDescription:"CheckpointCard_noDescription__sMNI8",editableTitle:"CheckpointCard_editableTitle___gTV2",editableTitleInput:"CheckpointCard_editableTitleInput__xCjrs",screenshotContainer:"CheckpointCard_screenshotContainer__wPfBR",previewOverlay:"CheckpointCard_previewOverlay__UadHr",previewLoading:"CheckpointCard_previewLoading__k12JB",previewIcon:"CheckpointCard_previewIcon__bifBK",previewText:"CheckpointCard_previewText__PCZfz",checkpointStatusText:"CheckpointCard_checkpointStatusText__SSjCV"}},50640:e=>{e.exports={highlightBackground:"AgentMessage_highlightBackground__6FeIF",content:"AgentMessage_content__hfjDC",inner:"AgentMessage_inner__22LFJ",root:"AgentMessage_root__CTNdV","border-rotate":"AgentMessage_border-rotate__vCCb1","fallback-animation":"AgentMessage_fallback-animation__N3ZTS",fullWidthStatusBar:"AgentMessage_fullWidthStatusBar__2EanS"}},50681:(e,n,t)=>{"use strict";t.d(n,{f:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query ReplTeamOrgSettings($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n            organization {\n              id\n              isAiEnabled\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(55100);function d(){var e,n,t,i,o=(t={variables:{replId:(0,u.A)()}},i=(0,r._)({},s,t),a.I(c,i)).data;return{isTeamWithAiDisabled:(null==o?void 0:o.repl.__typename)==="Repl"&&(null==(e=o.repl.owner)?void 0:e.__typename)==="Team"&&(null==(n=o.repl.owner.organization)?void 0:n.isAiEnabled)===!1}}},50919:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M10.47 9.97a.75.75 0 0 1 1.06 0l3.5 3.5a.75.75 0 1 1-1.06 1.06l-2.22-2.22v5.19a.75.75 0 0 1-1.5 0v-5.19l-2.22 2.22a.75.75 0 0 1-1.06-1.06l3.5-3.5Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M1.055 3.055A2.75 2.75 0 0 1 3 2.25h5a.75.75 0 0 1 .624.334l1.777 2.666H19A2.75 2.75 0 0 1 21.75 8v11A2.75 2.75 0 0 1 19 21.75H3A2.75 2.75 0 0 1 .25 19V5c0-.73.29-1.429.805-1.945ZM3 3.75A1.25 1.25 0 0 0 1.75 5v14A1.25 1.25 0 0 0 3 20.25h16A1.25 1.25 0 0 0 20.25 19V8A1.25 1.25 0 0 0 19 6.75h-9a.75.75 0 0 1-.624-.334L7.599 3.75H3Z",clipRule:"evenodd"})]}))}},51207:(e,n,t)=>{"use strict";t.d(n,{y:()=>C});var r=t(83846),i=t(17844),o=t(93629),a=t(12694),l=t(81073),s=t(49384),c=t.n(s),u=t(21462),d=t(15333),p=t(1982),f=t(55100),h=t(46449),m=t(38067),g=t(18509),v=t(27023),y=t(11769),w=t(86733),b=t(85144),S=t(4616),Y=t(85389),_=(0,g.x)({self:[v.wp.container("root")],actions:[(0,r._)({},v.kL.max(475,"root"),[v.wp.colWithGap(8),v.wp.align.end])],buttons:[(0,r._)({},v.kL.max(350,"root"),[v.wp.colWithGap(8),v.wp.align.end])]}),A=function(){var e=(0,f.A)(),n=(0,d.DY)({variables:{id:e},ssr:!1,context:{noBatch:!0},pollInterval:6e4}),t=n.data,r=n.previousData,s=(0,p.A)(),g=s.showConfirm,v=s.showError,A=(0,a._)((0,m.B)({onFork:function(){g("Repl forked, redirecting...")},onError:function(){v("Error creating fork - please try again")}}),2),C=A[0],k=A[1].loading,x=(null==t?void 0:t.getRepl.__typename)==="Repl"?t.getRepl:null,D=(null==r?void 0:r.getRepl.__typename)==="Repl"?r.getRepl:null,E=(null==x?void 0:x.org)?x.org:null,R=(null==x?void 0:x.project)?x.project:null,I=(0,a._)((0,u.useState)(!1),2),T=I[0],F=I[1];return((0,u.useEffect)(function(){var n,t,r,i;if((null==x||null==(n=x.project)?void 0:n.mainRepl)&&D&&x.project.mainRepl.id===e)return(null==(r=D.project)||null==(t=r.mainRepl)?void 0:t.id)&&D.project.mainRepl.id===e||(i=setTimeout(function(){F(!0)},6e3)),function(){i&&clearTimeout(i)}},[e,x,D]),x&&E&&R)?(0,l.Y)(b.a,{isOpen:T,onRequestClose:function(){return F(!1)},centered:!0,children:(0,l.FD)(Y.S,{css:_.self,gap:16,children:[(0,l.Y)(S.Y9,{level:2,variant:"subheadBig",children:"This Repl is now part of a Project"}),(0,l.FD)(S.EY,{children:["This Repl is now the source of truth for a Project called"," ",R.title,". Continued development in this Repl may lead to unexpected changes."]}),(0,l.FD)(Y.S,{css:_.actions,row:!0,gap:8,justify:"space-between",align:"center",children:[(0,l.Y)(c(),{href:"https://docs.replit.com/teams/projects/overview",target:"_blank",children:(0,l.Y)(S.EY,{children:"Learn more"})}),(0,l.FD)(Y.S,{css:_.buttons,row:!0,gap:8,children:[(0,l.Y)(y.$n,{text:"Work in a new fork",onClick:function(){k||C({orgId:E.id,repl:x,forkSource:"convertedToProjectModal"})},disabled:k,loading:k}),(0,l.Y)(w.v,(0,o._)((0,i._)({colorway:"primary"},(0,h.gm)({org:E,projectId:R.id})),{text:"Visit Project dashboard"}))]})]})]})}):null},C=function(e){return e.repl.org?(0,l.Y)(A,{}):null}},51240:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l,k:()=>a});var r=t(12694),i=t(86105),o=t(46998);function a(e){var n=new Map;e.forEach(function(e){var t=e.path.slice(0,-1),r="section:"+(0,o.p)(t),i=n.get(r);if(i)i.items.push(e);else{var a=t[t.length-1],l=(null==a?void 0:a.data.type)==="group"||1===t.length;n.set(r,{type:"section",path:t,score:e.match.score,items:[e],unlabeled:l,key:r,tooltip:"context"===a.data.type?null==a?void 0:a.data.tooltip:void 0})}});var t=(0,i._)(n.entries()).sort(function(e,n){var t=(0,r._)(e,2),i=(t[0],t[1]),o=(0,r._)(n,2);return(o[0],o[1]).score-i.score}),a={items:[],rows:[]},l=0;t.forEach(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];a.rows.push({type:i.type,key:t,path:i.path,unlabeled:i.unlabeled,tooltip:i.tooltip}),i.items.forEach(function(e){a.items.push(e),a.rows.push({type:"item",item:e,index:l++})})});var s=a.rows[0];return(null==s?void 0:s.type)==="section"&&s.unlabeled&&a.rows.shift(),a}function l(e,n){var t=[],r=!0,o=!1,a=void 0;try{for(var l,s=e.slice(n)[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;"group"!==c.data.type&&t.push(c.data.label)}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return(0,i._)(new Set(t))}},51312:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(21462),i=t(62721);function o(){var e=(0,i.yB)();(0,r.useEffect)(function(){},[e])}},51349:(e,n,t)=>{"use strict";t.d(n,{Js:()=>_,LH:()=>w,_y:()=>b});var r=t(83846),i=t(17844),o=t(93629),a=t(17459),l=t(81073),s=t(58770),c=t(61191),u=t(36937),d=t(18509),p=t(15311),f=t(27023),h=t(85389),m=(0,p.v)(["fontSize","gap","xPadding"]),g=m.cssVars,v=m.styleTokens,y=(0,d.x)({chord:[f.wp.display.inlineFlex,f.wp.rowWithGap(12)],shortcut:[f.wp.display.inlineFlex,{flexDirection:"row",fontSize:v.fontSize,"& > div":{marginRight:v.gap},"& > div:last-child":{marginRight:0}}]});function w(e,n){return((0,c.s4)(e)?e:[e]).map(function(e){return(0,c.Ft)(e).map(function(e){var t;return null!=(t=Y(n)[e])?t:e.toUpperCase()}).join("")}).join(" ")}function b(e){if((0,c.s4)(e.keyCombo))return(0,l.Y)(h.S,{"data-testid":"Keybinding:".concat(e.keyCombo.join(" ")),css:y.chord,children:e.keyCombo.map(function(n,t){return(0,l.Y)(b,(0,o._)((0,i._)({},e),{keyCombo:n}),t)})});var n,t=(0,c.Ft)(e.keyCombo),a=null!=(n=e.fontSize)?n:e.small?12:14,s=e.hideBorder?0:Math.round(.2*a);return(0,l.Y)(h.S,{"data-testid":"Keybinding:".concat(e.keyCombo),css:y.shortcut,style:(0,r._)({},g.gap,s+"px"),title:e.keyCombo,children:t.map(function(n){var t;return(0,l.Y)(_,{text:n,hideBorder:e.hideBorder,fontSize:e.fontSize,isActive:null==e||null==(t=e.match)?void 0:t.includes(n.toLowerCase())},n)})})}var S=(0,d.x)({root:[f.wp.color.foregroundDimmest,f.wp.position.relative,f.wp.justify.center,{fontSize:"inherit",textAlign:"center",textTransform:"capitalize",paddingLeft:v.xPadding,paddingRight:v.xPadding},f.wp.font.default],border:[f.wp.coverContainer,f.wp.borderRadius(4),{opacity:.5,border:"1px solid",borderColor:u.LU.outlineStrongest}],text:[{fontSize:v.fontSize}]}),Y=function(e){return{Ctrl:e?"⌃":"Ctrl",Cmd:e?"⌘":"Cmd",Alt:e?"⌥":"Alt",Shift:e?"⇧":"Shift",Enter:"↵",ArrowLeft:"←",ArrowRight:"→",ArrowUp:"↑",ArrowDown:"↓"," ":"Space"}};function _(e){var n,t,i,o=e.text,c=e.small,d=e.isActive,p=void 0!==d&&d,f=e.hideBorder,m=void 0!==f&&f,v=(0,a._)(e,["text","small","isActive","hideBorder"]),y=(0,s.vm)(),w=null!=(n=v.fontSize)?n:void 0!==c&&c?12:14,b=Math.round(1.4*w),_=Math.round(w*(m?.1:.2)),A=(t={},(0,r._)(t,g.fontSize,w+"px"),(0,r._)(t,g.xPadding,_+"px"),(0,r._)(t,"height",b),(0,r._)(t,"minWidth",m?void 0:b),t);p&&(A.fontWeight=u.LU.fontWeightMedium,A.color=u.LU.foregroundDefault);var C={borderColor:u.LU.foregroundDefault,opacity:1};return(0,l.FD)(h.S,{css:S.root,style:A,children:["string"==typeof o?(0,l.Y)(h.S,{css:S.text,children:null!=(i=Y(y)[o])?i:o}):o,m?null:(0,l.Y)(h.S,{css:S.border,style:p?C:void 0})]})}},51385:e=>{e.exports={stageIcon:"StageIcon_stageIcon__LN8nP"}},51523:(e,n,t)=>{"use strict";t.d(n,{F:()=>r,X:()=>i});var r=function(e){return e.Welcome="Welcome",e.Forks="Forks",e.ProjectPane="ProjectPane",e}({}),i={id:"workspace-repo-projects-tour",steps:[{title:"Welcome to your Project",id:"Welcome",content:"Click here to see all forks inside this Project and navigate between them.",hideOverlay:!0},{title:"Project Forks",id:"Forks",content:"Move to a different Repl within this Project, or create a new one",hideTooltip:!0,hideOverlay:!0},{title:"Project Pane",id:"ProjectPane",content:"View your changes, and merge them back into the main Repl when you're ready.",hideOverlay:!0}]}},51623:(e,n,t)=>{"use strict";t.d(n,{C:()=>p,j:()=>c});var r=t(81073),i=t(49092),o=t(18509),a=t(27023),l=t(4616),s=t(85389),c=function(e){return e.Welcome="Welcome",e.Editor="Editor",e.Examples="Examples",e.Run="Run",e.Output="Output",e.Sidepane="Sidepane",e.Share="Share",e}({}),u=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},d=(0,o.x)({welcome:[a.wp.maxWidth(400)],tooltipContainer:[a.wp.width("100%"),a.wp.center,a.wp.position.relative],textContainer:[a.wp.colWithGap(8),a.wp.width("100%"),a.wp.py(8)]}),p={id:"workspace-desktop-new-user-tour",steps:[{id:"Welcome",isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,r.Y)(s.S,{"data-cy":"workspace-tour-welcome",css:d.welcome,children:(0,r.FD)(l.EY,{children:["The Workspace is where you create projects on Replit. These are called"," ",(0,r.Y)("strong",{children:"Apps."}),(0,r.Y)("br",{}),"Let's explore around!"]})})}},{id:"Editor",title:"Code Editor",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("editor"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:"Examples",title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:"Run",title:"Run Button",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("run-button"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"Tap the Run button to “run” your code and see its output."})})]})},advanceOnTargetClick:!0},{id:"Output",title:"Output",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("output"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"This is where your run output appears. This can be text, websites, games, and more depending on the template you’re using."})})]})}},{id:"Sidepane",title:"Sidebar",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("sidebar"),autoPlay:!0,loop:!0}),(0,r.FD)(s.S,{css:d.textContainer,children:[(0,r.FD)(l.EY,{children:[(0,r.Y)("strong",{children:"Files"})," is where all of your App’s code is."]}),(0,r.FD)(l.EY,{children:[(0,r.Y)("strong",{children:"Tools"})," is where Packages, Debugger, Chat, Git, and more can be found."]}),(0,r.Y)(l.EY,{children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:"Share",title:"Invite & Collaborate",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"Invite others to your App to collaborate and work together at the same time."})})]})}}]}},51744:(e,n,t)=>{"use strict";t.d(n,{Jc:()=>y,Dr:()=>c,zY:()=>s});var r=t(17844),i=t(93629),o=t(684),a=o.ZU.Integer({minimum:0,maximum:65535}),l=o.ZU.Object({forwarded:o.ZU.Boolean(),port:a,address:o.ZU.String(),externalPort:a,comm:o.ZU.String({description:"Comm is the name chosen by the thread / process. Sometimes it has nice information to disambiguate between multiple instances of that process."}),cmdline:o.ZU.Array(o.ZU.String(),{description:"Cmdline is the commandline arguments provided when the process started."}),cgroup:o.ZU.String({description:"Cgroup is the cgroup of the process, as reported by `/proc/${pid}/cgroup`"}),pid:o.ZU.Integer(),pidChain:o.ZU.Array(o.ZU.Integer(),{description:"PidChain is the list of process ids in the hierarchy of the process, starting with the current process id and ending with 1 (pid1)."})});o.ZU.Array(l);var s=function(e){return e.NOT_STARTED="NOT_STARTED",e.RUNNING="RUNNING",e.FINISHED="FINISHED",e.FAILED="FAILED",e}({}),c=function(e){return e.NOT_STARTED="NOT_STARTED",e.RUNNING="RUNNING",e.FINISHED="FINISHED",e.FAILED="FAILED",e.ERROR="ERROR",e}({}),u=o.ZU.Object({task:o.ZU.Literal("shell.exec"),args:o.ZU.String(),env:o.ZU.Optional(o.ZU.Record(o.ZU.String(),o.ZU.String())),waitForPort:o.ZU.Optional(o.ZU.Number())}),d=o.ZU.Object({task:o.ZU.Literal("shell.exec"),cgroupPath:o.ZU.Optional(o.ZU.String()),pid:o.ZU.Optional(o.ZU.Integer()),isInRecoveryMode:o.ZU.Optional(o.ZU.Boolean()),openPorts:o.ZU.Optional(o.ZU.Array(l))}),p=o.ZU.Object({task:o.ZU.Literal("packager.installForLanguage"),args:o.ZU.String(),enablePackageGuessing:o.ZU.Optional(o.ZU.Boolean()),continueOnFail:o.ZU.Optional(o.ZU.Boolean())}),f=o.ZU.Object({task:o.ZU.Literal("packager.installForLanguage"),hasUserFacingOutput:o.ZU.Boolean()}),h=o.ZU.Object({task:o.ZU.Literal("packager.installForAll"),enablePackageGuessing:o.ZU.Optional(o.ZU.Boolean()),continueOnFail:o.ZU.Optional(o.ZU.Boolean())}),m=o.ZU.Object({task:o.ZU.Literal("packager.installForAll"),hasUserFacingOutput:o.ZU.Boolean()}),g=o.ZU.Object({task:o.ZU.Literal("workflow.run"),args:o.ZU.String()}),v=o.ZU.Object({task:o.ZU.Literal("workflow.run"),runId:o.ZU.String()}),y=o.ZU.Union([h,p,u,g]),w=o.ZU.Union([m,f,d,v]),b=o.ZU.Union([o.ZU.Literal("parallel"),o.ZU.Literal("sequential")]),S=o.ZU.Object({agentRequireRestartOnSave:o.ZU.Optional(o.ZU.Boolean({description:"Meant for agent use only. Some frameworks have Hot Module Replacement or other mechanisms to automatically serve updated contents when files change. This metadata option is intended to be set to true when the frameworks do not have support for HMR, and the caller is expected to manually restart the workflow after saving files."})),agentRestartPatterns:o.ZU.Optional(o.ZU.Array(o.ZU.String(),{description:"Meant for agent use only. Specify a list of glob patterns used for matching file change events that would require a restart."})),generated:o.ZU.Optional(o.ZU.Boolean({description:"Used for auto-generated workflows, generated workflows should be kept read-only, and do not persist in .replit, examples being run button workflow, or package.json generated workflows."})),dotReplitRun:o.ZU.Optional(o.ZU.Boolean({description:"Only used by the workflow generated from .replit run configuration, only to be set internally in workflow service state and should not be persisted in dotreplit (unless potentially duplicated by the user)"}))}),Y=o.ZU.Union([o.ZU.Literal("agent"),o.ZU.Literal("system"),o.ZU.Number()]),_=o.ZU.Object({name:o.ZU.String(),mode:o.ZU.Optional(b),metadata:o.ZU.Optional(S),tasks:o.ZU.Array(y),author:o.ZU.Optional(Y)});o.ZU.Object({workflows:o.ZU.Object({runButton:o.ZU.Optional(o.ZU.String()),workflow:o.ZU.Optional(o.ZU.Array(_))})}),o.ZU.Object({runButton:o.ZU.Optional(o.ZU.String()),workflow:o.ZU.Optional(o.ZU.Array(_))});var A={userIds:o.ZU.Array(o.ZU.Number()),metadata:o.ZU.Optional(w),config:y},C=o.ZU.Union([o.ZU.Object((0,i._)((0,r._)({},A),{state:o.ZU.Literal("NOT_STARTED")})),o.ZU.Object((0,i._)((0,r._)({},A),{state:o.ZU.Literal("RUNNING"),isReady:o.ZU.Optional(o.ZU.Boolean()),startTime:o.ZU.Number()})),o.ZU.Object((0,i._)((0,r._)({},A),{state:o.ZU.Literal("FAILED"),startTime:o.ZU.Number(),endTime:o.ZU.Number(),result:o.ZU.Optional(o.ZU.Object({message:o.ZU.Optional(o.ZU.String()),exitCode:o.ZU.Optional(o.ZU.Number())}))})),o.ZU.Object((0,i._)((0,r._)({},A),{state:o.ZU.Literal("FINISHED"),startTime:o.ZU.Number(),endTime:o.ZU.Number(),result:o.ZU.Optional(o.ZU.Object({message:o.ZU.Optional(o.ZU.String()),exitCode:o.ZU.Optional(o.ZU.Number())}))})),o.ZU.Object((0,i._)((0,r._)({},A),{state:o.ZU.Literal("ERROR"),startTime:o.ZU.Number(),endTime:o.ZU.Number(),result:o.ZU.Optional(o.ZU.Object({message:o.ZU.Optional(o.ZU.String())}))}))]);o.ZU.Record(o.ZU.String(),o.ZU.Object({runId:o.ZU.String(),startTime:o.ZU.Number(),endTime:o.ZU.Optional(o.ZU.Number()),step:o.ZU.Enum(s),tasks:o.ZU.Array(C),workflow:_,userId:o.ZU.Optional(o.ZU.Union([o.ZU.Literal("agent"),o.ZU.Number()]))}))},52220:e=>{e.exports={codeText:"Summary_codeText__buxIl"}},52355:e=>{e.exports={confirmationModalScreenshotContainer:"ConfirmRollbackModal_confirmationModalScreenshotContainer__7Tc1N",confirmationModalPreviewTextContainer:"ConfirmRollbackModal_confirmationModalPreviewTextContainer__YBoYt",confirmationModalScreenshot:"ConfirmRollbackModal_confirmationModalScreenshot__aWxsi",noScreenshotText:"ConfirmRollbackModal_noScreenshotText__soMJ7",flexGrowAndShrink:"ConfirmRollbackModal_flexGrowAndShrink__1dzId",lineHeightOffset:"ConfirmRollbackModal_lineHeightOffset__Xlkaz",statusIconLoading:"ConfirmRollbackModal_statusIconLoading__iRz8s",rollbackOptionsList:"ConfirmRollbackModal_rollbackOptionsList__wPEUO",rollbackOptionHeading:"ConfirmRollbackModal_rollbackOptionHeading__wS4EW"}},52367:(e,n,t)=>{"use strict";t.d(n,{b:()=>c});var r=t(81073),i=t(42793),o=t(36937),a=t(27023),l=t(85389),s=(0,i.AH)([a.wp.borderRadius("full"),a.wp.position.absolute,a.wp.top(-3),a.wp.right(-3)]);function c(e){var n=e.color,t=void 0===n?o.LU.redStronger:n,i=e.small,a=e.className,c=i?6:8;return(0,r.Y)(l.S,{className:a,style:{backgroundColor:t,width:c,height:c,zIndex:2,boxShadow:"0 0 0 2px ".concat(o.LU.backgroundDefault)},css:s})}},52454:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(12694),i=t(90629),o=t(49625),a=t(66890),l=t(71983),s=t(92930),c=t(1982),u=t(17089);let d=function(e){var n=e.isMobileApp,t=e.isTeam,d=e.handleUpgradeTriggered,p=e.replId,f=(0,c.A)(),h=f.showConfirm,m=f.showError,g=(0,s.X)(),v=function(e,n){i.ZQ({message:n}),i.Cp(Error(e.message)),m("Something unexpected happened, please try again.")},y=(0,r._)((0,o.t)({onError:function(e){return v(e,"useAddOrInviteReplMultiplayerMutation")},onCompleted:function(e){var r,i,o,s=e.addOrInviteReplMultiplayer;switch(s.__typename){case"NotFoundError":case"UnauthorizedError":m(s.message);return;case"UserError":if(s.message.includes("reached the limit")){if(n&&!t)return void m("You have reached the invite limit for a free account. Please upgrade to add more collaborators.");else if(!n&&d)return void d(!0)}m(s.message);return;case"AddOrInviteReplMultiplayerOuput":"MultiplayerInvite"===s.result.__typename?(r=a.LIG.Email,i=s.result.email):(r=a.LIG.Username,i=(null==(o=s.result.user)?void 0:o.username)?"@".concat(s.result.user.username):"user")}"data"===g.type&&g.refetch(),(0,u.u4)(l.AZ.MULTIPLAYER_INVITED,{replId:p,inviteMethod:r}),h("Added ".concat(i))}}),2);return{addOrInviteReplMultiplayer:y[0],loadingAddMutation:y[1].loading}}},52531:(e,n,t)=>{"use strict";t.d(n,{$0:()=>u,$5:()=>s,QN:()=>i,VH:()=>o});var r=t(684),i=function(e){return e.HEAD="HEAD",e.REMOTE_HEAD="REMOTE_HEAD",e.BRANCH="BRANCH",e.REMOTE_BRANCH="REMOTE_BRANCH",e.TAG="TAG",e}({});r.ZU.Enum(i);var o=r.ZU.Object({type:r.ZU.Literal("BRANCH"),name:r.ZU.String()}),a=r.ZU.Object({type:r.ZU.Literal("HEAD"),name:r.ZU.Literal("HEAD"),detached:r.ZU.Boolean(),ref:r.ZU.Union([o,r.ZU.Null()])}),l=r.ZU.Object({type:r.ZU.Literal("REMOTE_HEAD"),name:r.ZU.Literal("HEAD"),remote:r.ZU.String()}),s=r.ZU.Object({type:r.ZU.Literal("REMOTE_BRANCH"),name:r.ZU.String(),remote:r.ZU.String(),branch:r.ZU.String()}),c=r.ZU.Object({type:r.ZU.Literal("TAG"),name:r.ZU.String()}),u=r.ZU.Union([a,l,o,s,c])},52609:(e,n,t)=>{"use strict";t.d(n,{q:()=>ev});var r=t(17844),i=t(93629),o=t(12694),a=t(21462),l=t(43628),s=t(28079),c=t(39363),u=t(29935),d=t(82643),p=t(6164);function f(e){return h.apply(this,arguments)}function h(){return(h=(0,u._)(function(e){var n,t;return(0,d.YH)(this,function(r){return n=e.container,t=e.service,[2,new Promise(function(e){var r=n.openChannel({service:t},function(n){return e([n.channel,r]),r})})]})})).apply(this,arguments)}var m=function(e){return e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED",e}({}),g=t(90629),v=t(35651),y=t(71983),w=t(27915),b=function(e){return e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED",e}({}),S=t(80366),Y=t(32130),_=t(2285),A=t(17089),C=t(74671),k=t(37523),x=t(99143),D=t(86105),E=t(23099),R=t.n(E),I=t(95707),T=t(37872),F=t(48912),P=t(17459),L=t(22531),U=t(55301),N=t.n(U),O=t(41594),M=t(89709),H=t(31044),B=t(69549),z=t(96870),W=function(e){var n=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["markdown","plaintext"]}},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[1,2]}},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:z.A}},semanticTokens:{dynamicRegistration:!0,requests:{range:!0,full:{delta:!0}},tokenTypes:B.aK,tokenModifiers:B.md,formats:[H.TokenFormat.Relative],overlappingTokenSupport:!0,multilineTokenSupport:!0,serverCancelSupport:!0,augmentsSyntaxTokens:!0},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,contextSupport:!0,completionItem:{commitCharactersSupport:!0,documentationFormat:["markdown","plaintext"],labelDetailsSupport:!0,resolveSupport:{properties:["detail","documentation"]},snippetSupport:!0},completionList:{itemDefaults:["commitCharacters"]}},codeAction:{resolveSupport:{properties:["edit"]},dataSupport:!0,dynamicRegistration:!0,isPreferredSupport:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(H.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["markdown","plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:n.clientToServer||n.serverToClient?{dynamicRegistration:!0}:void 0,configuration:n.serverToClient,semanticTokens:{refreshSupport:!0},executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[H.ResourceOperationKind.Create,H.ResourceOperationKind.Delete,H.ResourceOperationKind.Rename]}}}},G=t(37743),V=t(64254).hp,Z=new TextEncoder,j=new TextDecoder,q=function(){var e=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source;return RegExp("(".concat(e,"\\r\\n)*(").concat(e,")$"),"i")}(),K=function(){function e(n){(0,G._)(this,e),this.onMessage=n,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var n=e.prototype;return n.consumeHeaders=function(){var e=function(e){var n=e.findIndex(function(n,t){return 13===n&&10===e[t+1]&&13===e[t+2]&&10===e[t+3]});if(-1!==n){var t=j.decode(e.slice(0,n)),r=t.match(q);if(!r)throw T.vF.error("Failed to parse LSP header, no matches",{fragment:t}),Error("Unable to match header, text: ".concat(t));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,l=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=d.indexOf(":");if(-1===p)throw T.vF.error("Failed to parse LSP header, missing colon",{fragment:t}),Error('Message header must separate key and value using ":"');var f=d.substr(0,p),h=d.substr(p+1).trim();if("Content-Length"===f){var m=parseInt(h,10);if(isNaN(m))throw T.vF.error("Failed to parse LSP header, NaN content length",{fragment:t}),Error("Content-Length value must be a number.");i[f]=parseInt(h,10)}else i[f]=h}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}if(null==i["Content-Length"])throw T.vF.error("Failed to parse LSP header, no Content-Length",{fragment:t}),Error("Header must provide a Content-Length property.");return{headerLength:n,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},n.read=function(e){for(this.buffer=(n=this.buffer,t=Z.encode(e),(r=new Uint8Array(n.length+t.length)).set(n),r.set(t,n.length),r);null!=(i=this.headers)?i:this.headers=this.consumeHeaders();){var n,t,r,i,o=this.headers.value["Content-Length"];if(this.buffer.length<o)return;var a=function(e,n,t){var r=j.decode(e.slice(0,n));try{return{json:JSON.parse(r),buffer:e.slice(n)}}catch(s){var i=V.from(e).toString();if(s instanceof SyntaxError&&"Unexpected end of JSON input"===s.message){T.vF.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:n,rpcContent:r,attempt:"original-length",headers:JSON.stringify(t)});var o=function(e,n){for(var t=0,r=0,i=!1,o=0;o<e.length+1;o++){if(0!==o&&!t&&!r&&!i)return o;var a=e[o];switch(a){case 92:o++;continue;case 34:i=!i;continue}if(!i)switch(a){case 123:t++;break;case 125:t--;break;case 91:r++;break;case 93:r--}}return -1}(e,0);if(-1!==o){var a=e.slice(0,o),l=j.decode(a);try{return{json:JSON.parse(l),buffer:e.slice(o)}}catch(e){T.vF.error("Failed to parse LSP message",{givenError:e,buffer:i,length:n,rpcContent:r,attempt:"recomputed-length"})}}}else T.vF.error("Failed to parse LSP message",{givenError:s,buffer:i,length:n,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(n)}}}(this.buffer,o,this.headers),l=a.json,s=a.buffer;if(this.headers=void 0,this.buffer=s,void 0!==l)try{this.onMessage(l)}catch(e){g.Cp(e)}}},e}(),$=function(){function e(){(0,G._)(this,e)}var n=e.prototype;return n.supports=function(e){return e.includes("css-language-server")},n.onResponse=function(e,n){return"textDocument/hover"===e?this.onHover(n):n},n.onHover=function(e){if("error"in e)return e;var n=e.result;return"cancelled"in e&&!1!==e.cancelled||!n?e:(Array.isArray(n.contents)&&(n.contents={kind:"markdown",value:["```html",n.contents[0],"```",n.contents[1],""].join("\n")}),(0,i._)((0,r._)({},e),{result:n}))},e}(),J=function(){function e(){(0,G._)(this,e)}var n=e.prototype;return n.supports=function(e){return"module:dotnet-7.0/languageServer:omni-sharp"===e},n.onResponse=function(e,n){switch(e){case"textDocument/codeAction":return this.onCodeAction(n);case"textDocument/completion":return this.onCompletion(n)}return n},n.onCodeAction=function(e){return"error"in e&&-32801===e.error.code?{cancelled:!0,result:null}:e},n.onCompletion=function(e){return"error"in e&&-32801===e.error.code?{cancelled:!0,result:null}:e},e}(),Q=[new(function(){function e(){(0,G._)(this,e)}var n=e.prototype;return n.supports=function(e){return e.includes("typescript-language-server")},n.onResponse=function(e,n){return"textDocument/completion"===e?this.onCompletion(n):n},n.onCompletion=function(e){if("error"in e||"cancelled"in e&&!1!==e.cancelled)return e;var n=e.result;if(!n)return e;Array.isArray(n)&&(n={isIncomplete:!1,items:n});for(var t=0;t<n.items.length;t++){var o=n.items[t];o.sortText&&o.sortText.startsWith("￿")&&(o.sortText=o.sortText.replace("￿",""))}return(0,i._)((0,r._)({},e),{result:n})},e}()),new $,new J],X=function(){function e(){(0,G._)(this,e)}var n=e.prototype;return n.supports=function(){return!0},n.onResponse=function(e,n){return n},e}(),ee=t(33682),en=t(64254).hp;function et(e,n){var t,r;return null!=(r=null==(t=I.Jh.from(e))?void 0:t.id)?r:n}var er=function(e){return e.INITIALIZED="INITIALIZED",e.READY="READY",e.DIAGNOSTICS="DIAGNOSTICS",e.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",e.SERVER_HEALTH_CHANGE="SERVER_HEALTH_CHANGE",e.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",e.REQUEST="REQUEST",e.RESPONSE="RESPONSE",e.CANCEL_REQUEST="CANCEL_REQUEST",e.SEND_NOTIFICATION="SEND_NOTIFICATION",e.RECEIVE_NOTIFICATION="RECEIVE_NOTIFICATION",e.SEMANTIC_TOKENS_REFRESH="SEMANTIC_TOKENS_REFRESH",e}(er||{});function ei(){return Math.floor(0x7fffffff*Math.random())}function eo(e){var n=JSON.stringify((0,i._)((0,r._)({},e),{jsonrpc:"2.0"})),t=en.byteLength(n,"utf8");return"Content-Length: ".concat(t,"\r\n\r\n").concat(n)}function ea(e,n){var t,r,i,o,a,l;return n&&n?!!R()(null==e?void 0:e.fileTypeAttrs,n.fileTypeAttrs)&&!!R()(null==e||null==(t=e.config)?void 0:t.startCommand,null==(r=n.config)?void 0:r.startCommand)&&!!R()(null==e||null==(i=e.config)?void 0:i.initializationOptionsJson,null==(o=n.config)?void 0:o.initializationOptionsJson)&&!!R()(null==e||null==(a=e.config)?void 0:a.configurationJson,null==(l=n.config)?void 0:l.configurationJson):!!n==!!n}function el(e,n){return es.apply(this,arguments)}function es(){return(es=(0,u._)(function(e,n){var t;return(0,d.YH)(this,function(r){switch(r.label){case 0:return[4,e.exec("pwd")];case 1:if(null!==(t=r.sent()).error){if(!n())return[2,{error:Error("LSPNix: Could not get working directory "+t.error),workingDirectory:null}];return[2,el(e,n)]}return[2,{error:null,workingDirectory:t.output.replace("\n","")}]}})})).apply(this,arguments)}var ec=t(47848),eu=t(41467),ed=function(e){return e.USER_JOIN="USER_JOIN",e.USER_LEAVE="USER_LEAVE",e.USERS_UPDATE="USERS_UPDATE",e.USER_OPENED_FILE="USER_OPENED_FILE",e.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED",e}({}),ep=t(77562),ef=t(36873),eh=t(93188),em=t(83846),eg=t(35106);function ev(e){var n=(0,o._)((0,a.useState)(null),2),t=n[0],h=n[1];return(0,a.useEffect)(function(){var n,t,a,E,U,H,B,z,G,V,Z,j,q,$,J,en,er,es,ev,ey,ew,eb,eS,eY,e_,eA=function(e){var n=l._.active();if(e.openTelemetryTracing)return(0,s.Ux)(n,"workspace.useCreateServices")}(e),eC=(t=(n=(0,i._)((0,r._)({},e),{ctx:null==eA?void 0:eA.childCtx})).onUnrecoverableError,a=n.openMultipleFiles,E=n.openMultipleURLs,U=n.enableMultipleLSPClientsPerFile,H=n.enableReplspaceSshTokenPassthrough,B=n.onPresenceCommand,z=n.getColorForUser,G=n.openTelemetryTracing,V=n.ctx,Z=(0,C.Ay)({onUnrecoverableError:t,ctx:V}),j=(0,k.A)({container:Z}),q=function(e){var n=e.container,t=e.onCommand,r=e.getColorForUser,i=(0,p.Ay)();i.setMaxListeners(1/0);var o=[],a=null,l=[],s={},c=null;function f(){return h.apply(this,arguments)}function h(){return(h=(0,u._)(function(){return(0,d.YH)(this,function(e){return c?[2,c]:[2,new Promise(function(e){i.once(ed.USERS_UPDATE,function(){if(!c)throw Error("Expected presenceChannel to be set");e(c)})})]})})).apply(this,arguments)}function m(e){R()(a,e)||(a=e,i.emit(ed.FOLLOWED_USER_CHANGED,e))}function g(){return(g=(0,u._)(function(e){var n,t;return(0,d.YH)(this,function(r){switch(r.label){case 0:if((null==a?void 0:a.username)===e)throw Error("Already following user with username ".concat(e));if(!a)return[3,2];return[4,y()];case 1:r.sent(),r.label=2;case 2:return[4,f()];case 3:if(n=r.sent(),!(t=o.find(function(n){return n.username===e})))return[2];return m(t),t.sessions.forEach(function(e){n.send({followUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}function y(){return w.apply(this,arguments)}function w(){return(w=(0,u._)(function(){var e,n;return(0,d.YH)(this,function(t){switch(t.label){case 0:if(!a)throw Error("No user to unfollow");return e=a,m(null),[4,f()];case 1:return n=t.sent(),e.sessions.forEach(function(e){n.send({unfollowUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}return n.openChannel({service:"presence",name:"presencer"},function(e){var n=e.channel;return n.onCommand(function(e){null==t||t(e);var n={cmd:e,emitter:i,activeUsers:o,userIdToFile:s,followedUser:a,setFollowedUser:m,followingUsers:l,getColorForUser:r};switch(e.body){case"roster":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser,s=e.getColorForUser,c=n.roster;if(c){var u=c.user,d=c.files;if(u&&d){var p=new Set;if(r.splice(0,r.length),u.forEach(function(e){if(e.id&&e.name&&e.roles&&!p.has(e.id)){var n=d.filter(function(n){return n.userId===e.id}).map(function(e){if(!e.session||!e.timestamp)throw Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:(0,ep.iY)(e.timestamp)}}),t=null==s?void 0:s({userId:e.id});r.push({id:e.id,username:e.name,roles:e.roles,color:null!=t?t:(0,ep.a4)(r),sessions:n}),p.add(e.id)}}),r.forEach(function(e){i[e.id]=(0,ep.Ni)(e)}),t.emit(ed.USERS_UPDATE,(0,D._)(r)),a.filter(function(e){return!r.some(function(n){return n.id===e.id})}).forEach(function(e){var n=a.indexOf(e);-1!==n&&(a.splice(n,1),t.emit(ed.FOLLOWING_USERS_CHANGED,{followingUsers:(0,D._)(a),user:e,type:"unfollow"}))}),o){if(!r.some(function(e){return e.id===o.id}))return l(null);var f=i[o.id];t.emit(ed.USER_OPENED_FILE,{user:o,file:f})}}}}(n);break;case"join":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.getColorForUser,a=n.join;if(a.id&&a.name&&a.roles&&a.session){var l=r.find(function(e){return e.id===a.id}),s=Math.floor(Date.now()/1e3),c=v.google.protobuf.Timestamp.create({seconds:s}),u=(0,ep.iY)(c);if(l)l.sessions.push({id:a.session,activeFile:null,timestamp:u});else{var d=null==o?void 0:o({userId:a.id}),p={id:a.id,username:a.name,roles:a.roles,color:null!=d?d:(0,ep.a4)(r),sessions:[{id:a.session,activeFile:null,timestamp:u}]};i[a.id]=null,r.push(p),t.emit(ed.USER_JOIN,p),t.emit(ed.USERS_UPDATE,(0,D._)(r))}}}(n);break;case"part":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser;if(n.part&&n.part.id&&n.part.session){var s=n.part,c=s.id,u=s.session,d=r.findIndex(function(e){return e.id===c}),p=r[d];if(1===p.sessions.length){r.splice(d,1),delete i[p.id],t.emit(ed.USER_LEAVE,p),t.emit(ed.USERS_UPDATE,(0,D._)(r)),o&&l(null);var f=a.findIndex(function(e){return e.id===p.id});-1!==f&&(a.splice(f,1),t.emit(ed.FOLLOWING_USERS_CHANGED,{followingUsers:(0,D._)(a),user:p,type:"unfollow"}))}else{p.sessions=p.sessions.filter(function(e){return e.id!==u});var h=(0,ep.Ni)(p);i[p.id]!==h&&(i[p.id]=h,t.emit(ed.USER_OPENED_FILE,{user:p,file:h}))}}}(n);break;case"fileOpened":!function(e){var n=e.emitter,t=e.cmd,r=e.activeUsers,i=e.userIdToFile;if(t.fileOpened){var o=t.fileOpened,a=o.userId,l=o.file,s=o.timestamp,c=o.session,u=l||null;if(!a||!s)throw Error("Expected userId and timestamp associated with file opened command");var d=r.find(function(e){return e.id===a});if(!d)throw Error("Expected user with ID ".concat(a));var p=d.sessions.find(function(e){return e.id===c});if(!p)throw Error("Expected session with ID ".concat(p));p.activeFile=u,p.timestamp=(0,ep.iY)(s),i[a]=u,n.emit(ed.USER_OPENED_FILE,{user:d,file:u})}}(n);break;case"followUser":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.followingUsers,o=n.followUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,ep.fp)(a,r);i.some(function(e){return e.id===l.id})||(i.push(l),t.emit(ed.FOLLOWING_USERS_CHANGED,{followingUsers:(0,D._)(i),user:l,type:"follow"}))}(n);break;case"unfollowUser":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.followingUsers,o=n.unfollowUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,ep.fp)(a,r),s=i.findIndex(function(e){return e.id===l.id});-1!==s&&(i.splice(s,1),t.emit(ed.FOLLOWING_USERS_CHANGED,{followingUsers:(0,D._)(i),user:l,type:"unfollow"}))}(n);break;case"sessionTimestampUpdated":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=n.sessionTimestampUpdated;if(!o.session||!o.timestamp)throw Error("Expected session and tiemstamp associated with update");var a=o.session,l=(0,ep.fp)(a,r),s=i[l.id],c=l.sessions.find(function(e){return e.id===a});if(!c)throw Error("Expected user ".concat(l.id," to have a session with ID ").concat(a));c.timestamp=(0,ep.iY)(o.timestamp);var u=c.activeFile;u!==s&&(i[l.id]=u,t.emit(ed.USER_OPENED_FILE,{user:l,file:u}))}(n)}}),c=n,function(){c=null}}),{onUserLeave:function(e){return i.on(ed.USER_LEAVE,e),function(){i.removeListener(ed.USER_LEAVE,e)}},onUserJoin:function(e){return i.on(ed.USER_JOIN,e),function(){i.removeListener(ed.USER_LEAVE,e)}},onActiveUsersChange:function(e){return i.on(ed.USERS_UPDATE,e),function(){i.removeListener(ed.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return i.on(ed.USER_OPENED_FILE,e),function(){i.removeListener(ed.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return i.on(ed.FOLLOWED_USER_CHANGED,e),function(){i.removeListener(ed.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return i.on(ed.FOLLOWING_USERS_CHANGED,e),function(){i.removeListener(ed.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var n=s[e];if(void 0===n)throw Error("Expected file for user with ID ".concat(e," to be defined"));return n},updateOpenFile:function(e){return(0,u._)(function(){return(0,d.YH)(this,function(n){switch(n.label){case 0:return[4,f()];case 1:return n.sent().send({openFile:{file:e}}),[2]}})})()},updateSessionTimestamp:function(){return(0,u._)(function(){return(0,d.YH)(this,function(e){switch(e.label){case 0:return[4,f()];case 1:return e.sent().send({updateSessionTimestamp:{}}),[2]}})})()},followUser:function(e){return g.apply(this,arguments)},unfollowUser:y,getActiveUsers:function(){return o},getFollowedUser:function(){return a},getFollowingUsers:function(){return l},getUserIdToFile:function(){return s},getPathToUserIds:function(){var e=new Map;return o.forEach(function(n){var t=n.id,r=s[t];r&&function n(t,r){if(""!==t){e.has(t)||e.set(t,[]);var i,o=e.get(t);if(!o)throw Error("Expected user Ids");o.some(function(e){return e===r})||(null==(i=e.get(t))||i.push(r),n((0,eu._6)(t),r))}}(r,t)}),e}}}({container:Z,onCommand:B,getColorForUser:z}),$=(0,c.A)({container:Z,fs:j,ctx:V}),J=function(e){var n,t,i,a=e.container,l=(0,p.Ay)(),s=null;function c(){return h.apply(this,arguments)}function h(){return(h=(0,u._)(function(){return(0,d.YH)(this,function(e){return s&&"open"===s.status?[2,s]:[2,new Promise(function(e){l.once(m.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}function g(){return v.apply(this,arguments)}function v(){return(v=(0,u._)(function(){return(0,d.YH)(this,function(e){return[2,f({container:a,service:"nix"})]})})).apply(this,arguments)}return a.openChannel({service:"nix"},function(e){var n=e.channel;return s=n,l.emit(m.CHANNEL_OPENED,n),function(){s=null}}),{searchPackages:(n=(0,u._)(function(e){var n,t,i,a,l,s=arguments;return(0,d.YH)(this,function(c){switch(c.label){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},[4,g()];case 1:return i=(t=o._.apply(void 0,[c.sent(),2]))[0],a=t[1],[4,i.request({nixPackageSearchRequest:(0,r._)({query:e},n)})];case 2:if((l=c.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(a(),l.error)return[2,{error:l.error,packages:null}];if(!l.nixPackageSearchResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:l.nixPackageSearchResponse.packages,error:null}]}})}),function(e){return n.apply(this,arguments)}),listPackages:(0,u._)(function(){var e,n,t,r;return(0,d.YH)(this,function(i){switch(i.label){case 0:return[4,g()];case 1:return n=(e=o._.apply(void 0,[i.sent(),2]))[0],t=e[1],[4,n.request({nixPackageListRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(t(),r.error)return[2,{error:r.error,packages:null}];if(!r.nixPackageListResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:r.nixPackageListResponse.packages,error:null}]}})}),getChannels:(0,u._)(function(){var e,n,t,r;return(0,d.YH)(this,function(i){switch(i.label){case 0:return[4,g()];case 1:return n=(e=o._.apply(void 0,[i.sent(),2]))[0],t=e[1],[4,n.request({nixChannelsRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channels:null}];if(t(),r.error)return[2,{error:r.error,channels:null}];if(!r.nixChannelsResponse)return[2,{error:"Response expected but none received",channels:null}];return[2,{channels:r.nixChannelsResponse.channels,error:null}]}})}),getLatestStableChannel:(0,u._)(function(){var e,n,t,r;return(0,d.YH)(this,function(i){switch(i.label){case 0:return[4,g()];case 1:return n=(e=o._.apply(void 0,[i.sent(),2]))[0],t=e[1],[4,n.request({nixChannelLatestStableRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channel:null}];if(t(),r.error)return[2,{error:r.error,channel:null}];if(!r.nixChannelLatestStableResponse)return[2,{error:"Response expected but none received",channel:null}];return[2,{channel:r.nixChannelLatestStableResponse.channel,error:null}]}})}),addPackages:(t=(0,u._)(function(e){var n;return(0,d.YH)(this,function(t){switch(t.label){case 0:return[4,c()];case 1:return[4,t.sent().request({nixPackageAddRequest:{packages:e}})];case 2:if((n=t.sent()).channelClosed)return[2,"channel closed"];if(n.error)return[2,n.error];if(!n.nixPackageAddResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return t.apply(this,arguments)}),removePackages:(i=(0,u._)(function(e){var n;return(0,d.YH)(this,function(t){switch(t.label){case 0:return[4,c()];case 1:return[4,t.sent().request({nixPackageRemoveRequest:{packages:e}})];case 2:if((n=t.sent()).channelClosed)return[2,"channel closed"];if(n.error)return[2,n.error];if(!n.nixPackageRemoveResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return i.apply(this,arguments)}),packageInfo:function(e){return(0,u._)(function(){var n;return(0,d.YH)(this,function(t){switch(t.label){case 0:return[4,c()];case 1:return[4,t.sent().request({nixPackageInfoRequest:{name:e}})];case 2:if((n=t.sent()).channelClosed)return[2,{package:null,error:"channel closed"}];if(n.error)return[2,{package:null,error:n.error}];if(!n.nixPackageInfoResponse)return[2,{package:null,error:"response expected but non received"}];if(!n.nixPackageInfoResponse.package)return[2,{package:null,error:"package not found"}];return[2,{package:n.nixPackageInfoResponse.package,error:null}]}})})()}}}({container:Z}),en=(0,_.A)({container:Z,dotReplit:$}),er=function(e){var n=e.container,t=e.forceTrace,r=e.track,i=(0,p.Ay)(),a=new Map;function l(e){var n=a.get(e);return n||(n={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},a.set(e,n)),n}function c(e){return h.apply(this,arguments)}function h(){return(h=(0,u._)(function(e){var t,r,i,a,l=arguments;return(0,d.YH)(this,function(s){switch(s.label){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:0,[4,f({container:n,service:"packager3"})];case 1:if(i=(r=o._.apply(void 0,[s.sent(),2]))[0],a=r[1],!e)return[3,3];return[4,i.request({packageSetPackagerRequest:{packagerId:e}})];case 2:s.sent(),s.label=3;case 3:if("open"!==i.status){if(t>5)throw Error("Failed to getAnonymousPackagerChannel");return[2,c(e,t+1)]}return[2,[i,a]]}})})).apply(this,arguments)}function m(e){return S.apply(this,arguments)}function S(){return(S=(0,u._)(function(e){var t;return(0,d.YH)(this,function(r){return((t=l(e)).didCallOpenChannel||function(e){var t=l(e);if(t.didCallOpenChannel)throw Error("Already called open channel");t.didCallOpenChannel=!0,t.closeChannel=n.openChannel({service:"packager3",name:e||"packager",action:v.api.OpenChannel.Action.ATTACH_OR_CREATE},function(n){var r=n.channel;return r.onCommand(function(n){if(null!=n.state){var t=n.state===v.api.State.Running;i.emit(b.STATE_CHANGED,t,e)}else null!=n.output?i.emit(b.OUTPUT,n.output,e):null!=n.error&&i.emit(b.ERROR,n.error,e)}),e?r.request({packageSetPackagerRequest:{packagerId:e}}).then(function(){t.packagerChannel=r,i.emit(b.CHANNEL_OPENED,r,e)}):(t.packagerChannel=r,i.emit(b.CHANNEL_OPENED,r,e)),function(){t.packagerChannel=null}})}(e),t.packagerChannel&&"open"===t.packagerChannel.status)?[2,t.packagerChannel]:[2,new Promise(function(n){i.once(b.CHANNEL_OPENED,function(t,r){r===e&&n(t)})})]})})).apply(this,arguments)}return{addPackages:function(e,n){return(0,u._)(function(){var t,i,o,a;return(0,d.YH)(this,function(l){switch(l.label){case 0:return[4,m(n)];case 1:if("open"!==(i=l.sent()).status)return[2,!1];return o=e.map(function(e){return{name:e.name,spec:e.version}}),[4,i.request({packageAdd:{pkgs:o,useNewResponse:!0}})];case 2:if((a=l.sent()).channelClosed||a.error)return[2,!1];return(null==(t=a.packageAddResponse)?void 0:t.installedSystemDependencies)&&r&&r(y.AZ.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:n}),[2,!0]}})})()},removePackages:function(e,n){return(0,u._)(function(){var t,r,i;return(0,d.YH)(this,function(o){switch(o.label){case 0:return[4,m(n)];case 1:if("open"!==(t=o.sent()).status)return[2,!1];return r=e.map(function(e){return{name:e}}),[4,t.request({packageRemove:{pkgs:r}})];case 2:if((i=o.sent()).channelClosed)return[2,!1];return[2,!!i.ok]}})})()},searchPackages:function(e,n){return(0,u._)(function(){var t,r,i,a;return(0,d.YH)(this,function(l){switch(l.label){case 0:return[4,c(n)];case 1:return r=(t=o._.apply(void 0,[l.sent(),2]))[0],i=t[1],[4,r.request({packageSearch:{query:e}})];case 2:if((a=l.sent()).channelClosed)return[2,[]];if(i(),"packageSearchResp"===a.body&&a.packageSearchResp)return[2,a.packageSearchResp.results||[]];return g.Cp(Error("Unknown packager3 command ".concat(a.body,". ")+"Expected packageSearchResp. Received error: ".concat(a.error))),[2,[]]}})})()},fetchPackageInfo:function(e,n){return(0,u._)(function(){var t,r,i,a;return(0,d.YH)(this,function(l){switch(l.label){case 0:return[4,c(n)];case 1:return r=(t=o._.apply(void 0,[l.sent(),2]))[0],i=t[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:if((a=l.sent()).channelClosed)return[2,void 0];if(i(),"packageInfoResp"===a.body&&a.packageInfoResp)return[2,a.packageInfoResp.pkg||void 0];return g.Cp(Error("Unknown packager3 command ".concat(a.body,". ")+"Expected packageInfoResp. Received error: ".concat(a.error))),[2,void 0]}})})()},installPackages:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,u._)(function(){return(0,d.YH)(this,function(o){var a;return[2,(0,s.ce)(e,"packager.installPackages",(a=(0,u._)(function(e){var o,a,l;return(0,d.YH)(this,function(c){switch(c.label){case 0:return[4,m(n)];case 1:if("open"!==(o=c.sent()).status)return[2,(0,w._)("ChannelClosed")];return[4,o.request({packageInstall:{useNewResponse:!0,disableGuess:i},traceInfo:(0,s.mY)(e),forceTrace:t})];case 2:if((a=c.sent()).error)return[2,(0,w._)(a.error)];if(a.channelClosed)return[2,(0,w._)("ChannelClosed")];if(!(l=a.packageInstallResponse))return[2,(0,w._)("No package install response found")];return l.installedSystemDependencies&&r&&r(y.AZ.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:n}),[2,(0,w.Ok)(l)]}})}),function(e){return a.apply(this,arguments)}))]})})()},listSpecfile:function(e){return(0,u._)(function(){var n,t,r,i,a,l,s;return(0,d.YH)(this,function(u){switch(u.label){case 0:return[4,c(e)];case 1:return t=(n=o._.apply(void 0,[u.sent(),2]))[0],r=n[1],[4,t.request({packageListSpecfile:{}})];case 2:if((i=u.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":if(!(l=null==(a=i.packageListSpecfileResp)?void 0:a.pkgs))return[2,{packages:null,error:"list specfile returned an empty response"}];return[2,{packages:l,error:null}];default:return s="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",g.Cp(Error(s)),[2,{packages:null,error:s}]}}})})()},getPackagerIds:function(){return Array.from(a.keys())},clearPackager:function(e){var n=a.get(e);(null==n?void 0:n.closeChannel)&&n.closeChannel(),a.delete(e)},onOutput:function(e){return i.on(b.OUTPUT,e),function(){i.removeListener(b.OUTPUT,e)}},onError:function(e){return i.on(b.ERROR,e),function(){i.removeListener(b.ERROR,e)}},onStateChanged:function(e){return i.on(b.STATE_CHANGED,e),function(){i.removeListener(b.STATE_CHANGED,e)}}}}({container:Z,forceTrace:G,track:A.u4}),es=(0,ef.A)({container:Z,fs:j,openMultipleFiles:a,openMultipleURLs:E,enableReplspaceSshTokenPassthrough:H}),ev=(0,ec.kg)({container:Z,dotReplit:$}),ey=function(e){var n=e.container,t=e.toolchain,a=e.fs,l=e.enableMultipleLSPClientsPerFile,s=void 0!==l&&l,c=new Map,f=new Map,h={},m=!0;function y(e){var n=h[e];if(!n)throw Error("LSPNix: removeLanguage called with lspId never configured");var t=n.client;if(t){n.client=null,t.destroy();var r=!0,i=!1,a=void 0;try{for(var l,s=c[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=(0,o._)(l.value,2),d=u[0],p=u[1],m=f.get(d);if(m){m.delete(t),f.set(d,m);var g=!0,v=!1,y=void 0;try{for(var w,b=p[Symbol.iterator]();!(g=(w=b.next()).done);g=!0)(0,w.value)(Array.from(m))}catch(e){v=!0,y=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw y}}}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}n.closeChannel(),delete h[e]}function w(e,n){if(h[e])throw Error("LSPNix: addLanguage called with lspId already configured");h[e]={client:null,option:n,closeChannel:function(){}},m&&_(e)}var b=new Map;function S(e){if(!m)return!1;var n=h[e];return!!n&&!n.client}function Y(e,n,t){new Date().getTime()-t.getTime()<5e3?n<3?setTimeout(function(){S(e)&&_(e,n+1)},1e3*Math.pow(2,n)):T.vF.error("LSP server is crash-looping. Giving up.",{lspId:e,appService:"lspnix"}):setTimeout(function(){S(e)&&_(e)})}function _(e){return A.apply(this,arguments)}function A(){return(A=(0,u._)(function(e){var t,l,y,w,S,_,A,C,k=arguments;return(0,d.YH)(this,function(x){switch(x.label){case 0:if(t=k.length>1&&void 0!==k[1]?k[1]:0,!m)throw Error("LSPNix: Called startClient while not enabled");if(!h[e])throw Error("LSPNix: No config found for lspId: ".concat(e));if(!b.get(e))return[3,2];return[4,b.get(e)];case 1:if(x.sent())return[2];x.label=2;case 2:if(y=(l=h[e]).client,l.closeChannel,w=l.option,y)throw Error("LSPNix: A previous client is already set for language: ".concat(e));return S=function(){},_=new Promise(function(e){S=e}),b.set(e,_),A=[],C=n.openChannel({service:"lsp2",skip:function(e){var n=e.repl.language,t=n.startsWith("nix")||n.startsWith("html");return t||(T.vF.error("Skipped opening lsp channel for non-nix repl",{language:n,appService:"lspnix"}),S(null)),!t}},function(l){var y=l.channel,_=null,k=!1,x=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!k){k=!0,n||(S(null),b.delete(e)),A.forEach(function(e){return e()}),null==_||_.destroy(),(null==(a=h[e])?void 0:a.client)===_&&(h[e].client=null),n&&m||C();var t=!0,r=!1,i=void 0;try{for(var a,l,s=c[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var u=(0,o._)(l.value,2),d=u[0],p=u[1],g=f.get(d);if(g&&_&&g.has(_)){g.delete(_),g.size?f.set(d,g):f.delete(d);var v=!0,y=!1,w=void 0;try{for(var Y,x=p[Symbol.iterator]();!(v=(Y=x.next()).done);v=!0)(0,Y.value)(Array.from(g))}catch(e){y=!0,w=e}finally{try{v||null==x.return||x.return()}finally{if(y)throw w}}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}}};if("open"!==y.status)return void T.vF.error("LSPNix got a channel that wasn't open. This is expected to be impossible.",{lspId:e,appService:"lspnix"});var D=new Date;return y.request({startLSP:{languageServerId:e}}).then(function(l){if(!l.ok)return void T.vF.error("LSP server failed to start",{lspId:e,appService:"lspnix",serverError:l.error});if(m&&h[e]){A.push(y.onCommand(function(n){n.state===v.api.State.Stopped&&(T.vF.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),x(),m&&Y(e,t,D))}));var C=0;el(n,function(){return C++<5&&m&&ea(h[e].option,w)&&"open"===y.status}).then(function(n){if(!h[e])return void T.vF.info("LSPNix: lsp map changed while getting working directory",{lspId:e,appService:"lspnix"});if(!ea(h[e].option,w))return void T.vF.info("LSPNix: configuration changed while getting working directory",{lspId:e,appService:"lspnix"});if("open"!==y.status)return void T.vF.error("LSPNix: channel wasn't open after getting working directory",{lspId:e,appService:"lspnix"});if(n.error)return void T.vF.error("LSPNix: failed to get working directory",{lspId:e,appService:"lspnix",originalError:null==(k=n.error)?void 0:k.message});if(_=function(e){var n,t=e.connection,o=e.isSupportedFile,a=e.clientId,l=e.clientName,s=e.getWorkspaceConfiguration,c=e.onWorkspaceConfigurationChange,f=e.applyWorkspaceEdit,h=(0,p.Ay)();h.setMaxListeners(1/0);var m=null,v=ee.b.OFFLINE,y=ee.A.NOT_READY,w=null,b=!1,S=new Map,Y=new Map,_=null;function A(e){if(!m)throw Error("Expected rootUri");var n=e.slice(m.length+1);try{return decodeURIComponent(n)}catch(e){throw g.v4(function(t){t.setExtra("fragment_to_decode",n),g.Cp(e)}),e}}function C(e){if(!m)throw Error("Expected rootUri");if(e.startsWith("/"))throw Error("Path must be relative. Got: ".concat(e));return m+"/"+e}function k(e){v!==e&&(v!==ee.b.INITIALIZED&&x(ee.A.NOT_READY),v=e,h.emit("SERVER_STATE_CHANGE",v))}function x(e){y!==e&&(y=e,h.emit("SERVER_HEALTH_CHANGE",y))}function D(e){h.emit("SEND_NOTIFICATION",e),t.write(eo(e))}function E(e){return I.apply(this,arguments)}function I(){return(I=(0,u._)(function(e){var n,o,l,s,c,u,p,f;return(0,d.YH)(this,function(d){if(s=void 0===(l=(o=void 0===(n=e.options)?{}:n).id)?ei():l,c=o.signal,u=o.tap,p=(0,P._)(e,["options"]),!Number.isInteger(s))throw Error("Request ID must be an integer");return t.didClose()?[2,Promise.resolve({result:null,cancelled:!0})]:(h.emit("REQUEST",{id:s,data:p}),null==c||c.addEventListener("abort",function(){U(s)},{once:!0}),t.write(eo((0,i._)((0,r._)({},p),{id:s}))),null===_&&(_=setTimeout(function(){x(ee.A.STALLED)},3e4)),f=new Promise(function(e){Y.set(s,{requestData:p,resolve:e})}),u&&u(f),[2,f.then(function(e){null!==_&&(clearTimeout(_),_=null),v!==ee.b.INITIALIZED||e.cancelled||x(ee.A.READY);var n=(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=Q[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.supports(e))return a}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return new X})(a).onResponse(p.method,e);if("error"in n){var t=n.error,r=t.code,i=t.message,o=t.data;T.vF.error("LSP request failed",{code:r,lspId:a,errorMessage:i,data:JSON.stringify(o),requestData:p})}return n})])})})).apply(this,arguments)}function F(e,n){t.write(eo((0,i._)((0,r._)({},n),{id:e})))}function U(e){var n=Y.get(e);n&&(h.emit("CANCEL_REQUEST",e),n.resolve({result:null,cancelled:!0}),Y.delete(e),D({method:"$/cancelRequest",params:{id:e}}))}var H=0,B=new K(function(e){var n=Y.get(e.id);if(e.id&&n){var t=n.resolve;Y.delete(e.id);var o=e.result,l=e.error;if((void 0!==o||l)&&h.emit("RESPONSE",e),void 0!==o){H=0,t({result:o,cancelled:!1});return}if(l){H++,t({error:l}),H>20&&(T.vF.error("LSP experienced 20 consecutive errors. Setting server health to 'BROKEN",{lspId:a}),x(ee.A.BROKEN),H=0);return}throw T.vF.error("LSP response message contained neither error nor result"),new M.A("Expected either message or error in LSP response").setExtra("message",JSON.stringify(e))}var c=e.method;if("client/registerCapability"===c){var u=e.params.registrations;if(!u||!Array.isArray(u))throw Error("Expected registrations array");u.forEach(function(e){var n=e.method;if(!n)throw Error("Expected registration method");if(!w)throw Error("Expected server capabilities");var t=e.registerOptions||!0;switch(n){case"textDocument/definition":w.definitionProvider=!0;break;case"textDocument/typeDefinition":w.typeDefinitionProvider=!0;break;case"textDocument/implementation":w.implementationProvider=!0;break;case"textDocument/references":w.referencesProvider=!0;break;case"textDocument/hover":w.hoverProvider=!0;break;case"textDocument/semanticTokens":w.semanticTokensProvider=t;break;case"textDocument/completion":w.completionProvider=t;break;case"textDocument/formatting":w.documentFormattingProvider=t;break;case"textDocument/rename":w.renameProvider=t;break;case"textDocument/codeAction":w.codeActionProvider=t;break;case"textDocument/signatureHelp":w.signatureHelpProvider=t;break;case"textDocument/didSave":if("number"==typeof w.textDocumentSync)break;w.textDocumentSync=(0,i._)((0,r._)({},w.textDocumentSync||{}),{save:t});break;case"textDocument/willSaveWaitUntil":if("number"==typeof w.textDocumentSync)break;w.textDocumentSync=(0,i._)((0,r._)({},w.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"==typeof w.textDocumentSync)break;w.textDocumentSync=(0,i._)((0,r._)({},w.textDocumentSync||{}),{change:t});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"==typeof w.textDocumentSync)break;w.textDocumentSync=(0,i._)((0,r._)({},w.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":w.executeCommandProvider=t;break;default:T.vF.info("Unexpected dynamically registered capability in LSP client",{method:n})}h.emit("SERVER_CAPABILITIES_CHANGE",w)}),F(e.id,{result:null,cancelled:!1});return}if("workspace/applyEdit"===c)return void f(e.params).then(function(n){F(e.id,{result:n,cancelled:!1})});if("textDocument/publishDiagnostics"===c){var d=A(e.params.uri),p=S.get(d);if(!p)return;var m=e.params.diagnostics;if(R()(p.diagnostics,m))return;p.diagnostics=m,h.emit("DIAGNOSTICS",{path:d,diagnostics:m});return}if("workspace/configuration"===c){var g,v=e.params,y=Array(v.items.length).fill(null),b=null!=(g=null==s?void 0:s())?g:null;b&&(y=v.items.map(function(e){return e.section?N()(b,e.section):b})),F(e.id,{result:y,cancelled:!1})}("window/logMessage"===c||"telemetry/event"===c)&&h.emit("RECEIVE_NOTIFICATION",e),"workspace/semanticTokens/refresh"===c&&h.emit("SEMANTIC_TOKENS_REFRESH")});function z(e){if(!w)throw Error("Expected client to be initialized");if(!w[e])throw Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return w[e]}function G(e){return m&&e?e.filter(function(e){return"uri"in e?e.uri.startsWith(m):e.targetUri.startsWith(m)}):e}t.read(B.read);var V=function(){};return{initialize:function(e){var t=e.pwd,r=e.initializationOptions;return(0,u._)(function(){var e,i;return(0,d.YH)(this,function(o){switch(o.label){case 0:return k(ee.b.INITIALIZING),m="file://".concat(t),[4,E({method:"initialize",params:{initializationOptions:r,capabilities:W({configurationSupport:{serverToClient:!!s,clientToServer:!!c}}),processId:null,rootUri:m,workspaceFolders:[{name:m,uri:m}]}})];case 1:if("error"in(e=o.sent()))throw Error("Something went wrong initializing the LSP client: ".concat(e.error.message));if(e.cancelled)throw Error("Initialize request cancelled");if(!e.result)throw Error("Expected result in initialize request");return D({method:"initialized",params:{}}),w=e.result.capabilities,n=e.result.serverInfo,h.emit("SERVER_CAPABILITIES_CHANGE",w),k(ee.b.INITIALIZED),c&&(V=c(function(e){D({method:"workspace/didChangeConfiguration",params:{settings:e}})})),s&&(i=s())&&D({method:"workspace/didChangeConfiguration",params:{settings:i}}),[2]}})})()},generateId:ei,notify:{didOpen:function(e,n){if(!o(e))throw Error("Path not supported");var t,r=S.get(e);if(r&&0!==r.buffers){r.buffers++,S.set(e,r);return}var i=null!=(t=null==r?void 0:r.version)?t:0;S.set(e,{version:i,buffers:1,diagnostics:[]}),D({method:"textDocument/didOpen",params:{textDocument:{uri:C(e),languageId:et(e,a),text:n,version:i}}})},didChange:function(e,n){var t=S.get(e);if(!t)throw Error('Document for "'.concat(e,'" is not open'));t.version++,D({method:"textDocument/didChange",params:{textDocument:{uri:C(e),version:t.version},contentChanges:n}})},didSave:function(e){if(!S.get(e))throw Error('Document for "'.concat(e,'" is not open'));z("textDocumentSync"),D({method:"textDocument/didSave",params:{textDocument:{uri:C(e)}}})},didClose:function(e){var n=S.get(e);if(!n)throw Error('Document for "'.concat(e,'" is not open'));n.buffers--,n.buffers>0||(D({method:"textDocument/didClose",params:{textDocument:{uri:C(e)}}}),S.delete(e))},cancelRequest:function(e){U(e)}},request:{completion:function(e,n,t,r){return z("completionProvider"),E({options:r,method:"textDocument/completion",params:{textDocument:{uri:C(e)},position:n,context:t}})},resolveCompletionItem:function(e){if(!z("completionProvider").resolveProvider)throw Error("LSP Server does not support resolving completion items");return E({method:"completionItem/resolve",params:e})},signatureHelp:function(e,n,t){return E({options:t,method:"textDocument/signatureHelp",params:{textDocument:{uri:C(e)},position:n}})},hover:function(e,n,t){return E({options:t,method:"textDocument/hover",params:{textDocument:{uri:C(e)},position:n}})},codeActions:function(e,n,t,o){var a=S.get(e);if(!a)throw Error("Document for path ".concat(e," is not open."));var l=a.diagnostics.filter(function(e){return(0,O.Kk)(e.range,n)});return E({method:"textDocument/codeAction",params:{textDocument:{uri:C(e)},range:n,context:(0,i._)((0,r._)({},o),{diagnostics:l})},options:t})},resolveCodeAction:function(e){return E({method:"codeAction/resolve",params:e})},executeCommand:function(e,n){return E({method:"workspace/executeCommand",params:{command:e,arguments:n}})},format:function(e,n){return z("documentFormattingProvider"),E({method:"textDocument/formatting",params:{textDocument:{uri:C(e)},options:n}})},formatRange:function(e,n,t){return z("documentRangeFormattingProvider"),E({method:"textDocument/rangeFormatting",params:{textDocument:{uri:C(e)},range:n,options:t}})},findDefinitions:function(e,n,t){var o=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,u._)(function(){var a,l;return(0,d.YH)(this,function(s){switch(s.label){case 0:return z("definitionProvider"),[4,E({options:t,method:"textDocument/definition",params:{textDocument:{uri:C(e)},position:n}})];case 1:if(!1!==(a=s.sent()).cancelled)return[2,a];return(l=a.result)&&o&&(l=G(Array.isArray(l)?l:[l])),[2,(0,i._)((0,r._)({},a),{result:l})]}})})()},findTypeDefinitions:function(e,n,t){var o=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,u._)(function(){var a,l;return(0,d.YH)(this,function(s){switch(s.label){case 0:return z("typeDefinitionProvider"),[4,E({options:t,method:"textDocument/typeDefinition",params:{textDocument:{uri:C(e)},position:n}})];case 1:if(!1!==(a=s.sent()).cancelled)return[2,a];return(l=a.result)&&o&&(l=G(Array.isArray(l)?l:[l])),[2,(0,i._)((0,r._)({},a),{result:l})]}})})()},findImplementations:function(e,n,t){var o=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,u._)(function(){var a,l;return(0,d.YH)(this,function(s){switch(s.label){case 0:return z("implementationProvider"),[4,E({options:t,method:"textDocument/implementation",params:{textDocument:{uri:C(e)},position:n}})];case 1:if(!1!==(a=s.sent()).cancelled)return[2,a];return(l=a.result)&&o&&(l=G(Array.isArray(l)?l:[l])),[2,(0,i._)((0,r._)({},a),{result:l})]}})})()},findReferences:function(e,n,t){return z("referencesProvider"),E({method:"textDocument/references",params:{textDocument:{uri:C(e)},position:n,context:t}})},rename:function(e,n,t,r){return z("renameProvider"),E({options:r,method:"textDocument/rename",params:{textDocument:{uri:C(e)},position:n,newName:t}})},prepareRename:function(e,n){var t=z("renameProvider");if("boolean"==typeof t||!t.prepareProvider)throw Error("LSP server does not support prepare rename");return E({method:"textDocument/prepareRename",params:{textDocument:{uri:C(e)},position:n}})},documentHighlights:function(e,n,t){return(0,u._)(function(){return(0,d.YH)(this,function(r){switch(r.label){case 0:return[4,E({options:t,method:"textDocument/documentHighlight",params:{position:n,textDocument:{uri:C(e)}}})];case 1:return[2,r.sent()]}})})()},documentSymbol:function(e,n){return(0,u._)(function(){var t;return(0,d.YH)(this,function(r){switch(r.label){case 0:return[4,E({options:n,method:"textDocument/documentSymbol",params:{textDocument:{uri:C(e)}}})];case 1:if(!("result"in(t=r.sent())))return[2,t];if(t.result)return[2,{result:t.result,cancelled:!1}];return[2]}})})()}},semanticTokensFull:function(e,n){if(!z("semanticTokensProvider").full)throw Error("LSP server does not support full semantic tokens");return E({options:n,method:"textDocument/semanticTokens/full",params:{textDocument:{uri:C(e)}}})},semanticTokensDelta:function(e,n,t){var r=z("semanticTokensProvider");if(!(null==r?void 0:r.full)||"object"!==(0,L._)(r.full)||!r.full.delta)throw Error("LSP server does not support delta semantic tokens");return E({options:t,method:"textDocument/semanticTokens/full/delta",params:{textDocument:{uri:C(e)},previousResultId:n}})},semanticTokensRange:function(e,n,t){if(!z("semanticTokensProvider").range)throw Error("LSP server does not support range semantic tokens");return E({options:t,method:"textDocument/semanticTokens/range",params:{textDocument:{uri:C(e)},range:n}})},onDiagnostics:(0,p.gT)(h,"DIAGNOSTICS"),onServerStateChange:(0,p.gT)(h,"SERVER_STATE_CHANGE"),onServerHealthChange:(0,p.gT)(h,"SERVER_HEALTH_CHANGE"),onServerCapabilitiesChange:(0,p.gT)(h,"SERVER_CAPABILITIES_CHANGE"),onRequest:(0,p.gT)(h,"REQUEST"),onResponse:(0,p.gT)(h,"RESPONSE"),onCancelRequest:(0,p.gT)(h,"CANCEL_REQUEST"),onSendNotification:(0,p.gT)(h,"SEND_NOTIFICATION"),onReceiveNotification:(0,p.gT)(h,"RECEIVE_NOTIFICATION"),onSemanticTokensRefresh:(0,p.gT)(h,"SEMANTIC_TOKENS_REFRESH"),shutdown:function(){for(var e in k(ee.b.EXITING),S.clear(),Y)U(Number(e));V(),E({method:"shutdown"}).then(function(){D({method:"exit"}),k(ee.b.EXITED),h.removeAllListeners()})},isDestroyed:function(){return b},destroy:function(){for(var e in b=!0,S.clear(),Y)U(Number(e));V(),k(ee.b.EXITED),h.removeAllListeners()},getServerState:function(){return v},getServerHealth:function(){return y},getServerCapabilities:function(){return w},getServerInfo:function(){return n},getDiagnostics:function(e){var n=S.get(e);if(!n)throw Error("File with path ".concat(e," is not open."));return n.diagnostics},isOpen:function(e){return S.has(e)},documentUriToPath:A,pathToDocumentURI:C,isSupportedFile:o,getLanguageId:function(e){return et(e,a)},clientId:a,clientName:l}}({connection:{read:function(e){"open"===y.status&&y.onCommand(function(n){n.output&&e(n.output)})},write:function(e){if("open"!==y.status){(null==_?void 0:_.isDestroyed())&&T.vF.error("LSPNix: tried to write to channel but the lsp client is already destroyed");return}y.send({input:e})},didClose:function(){return"open"!==y.status}},clientId:e,clientName:h[e].option.name,isSupportedFile:function(e){return(0,I.fu)(e,w)},applyWorkspaceEdit:(v=(0,u._)(function(e){var n;return(0,d.YH)(this,function(t){return(n=e.edit,_)?[2,(0,F.i)({edit:n,fs:a,client:_})]:[2,{applied:!1}]})}),function(e){return v.apply(this,arguments)}),getWorkspaceConfiguration:function(){if(!(null==(e=w.config)?void 0:e.configurationJson))return null;var e,n=null;try{n=JSON.parse(w.config.configurationJson)}catch(e){T.vF.error("Failed to parse LSP workspace configuration",{configurationJson:w.config.configurationJson})}return n}}),null==(C=w.config)?void 0:C.initializationOptionsJson)try{E=JSON.parse(w.config.initializationOptionsJson)}catch(e){T.vF.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:w.config.initializationOptionsJson})}var l,v,C,k,E,U=_.initialize({pwd:n.workingDirectory,initializationOptions:E}).catch(function(n){if((null==n?void 0:n.message)!=="Initialize request cancelled")throw T.vF.error("LSPNix: failed to initialize client",{lspId:e,appService:"lspnix",originalError:null==n?void 0:n.message}),n});A.push(_.onServerHealthChange(function(n){if(n===ee.A.BROKEN&&(T.vF.info("LSP: Server health broken",{lspId:e}),x(),m)){T.vF.info("LSP: retrying after server health broken",{lspId:e}),Y(e,t,D);return}}),_.onServerStateChange((l=(0,u._)(function(n){var t,r,i,a,l,u,p,m,g,v,Y,A,C,k,D;return(0,d.YH)(this,function(d){switch(d.label){case 0:if("open"!==y.status)return T.vF.info("LSPNix: channel wasn't open on state change",{lspId:e,appService:"lspnix",state:n}),x(),[2];if(!_)return T.vF.info("LSPNix: client was null on state change. This should never happen",{lspId:e,appService:"lspnix",state:n}),x(),[2];if(!ea(h[e].option,w))return T.vF.info("LSPNix: configuration changed and received state change",{lspId:e,appService:"lspnix",state:n}),x(),[2];if(n===ee.b.EXITED)return T.vF.info("LSP server exited via 'exit' notification",{lspId:e,appService:"lspnix"}),x(),[2];if(n!==ee.b.INITIALIZED)return[2];return[4,U];case 1:if(d.sent(),"open"!==y.status)return T.vF.info("LSPNix: channel wasn't open after initialization",{lspId:e,appService:"lspnix"}),x(),[2];S(_),b.delete(e),h[e].client=_,t=!0,r=!1,i=void 0;try{for(a=c[Symbol.iterator]();!(t=(l=a.next()).done);t=!0)if((p=(u=(0,o._)(l.value,2))[0],m=u[1],(0,I.fu)(p,w))&&(g=f.get(p),s||!g||!g.size)){v=g?g.add(_):new Set([_]),f.set(p,v),Y=!0,A=!1,C=void 0;try{for(k=m[Symbol.iterator]();!(Y=(D=k.next()).done);Y=!0)(0,D.value)(Array.from(v))}catch(e){A=!0,C=e}finally{try{Y||null==k.return||k.return()}finally{if(A)throw C}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return[2]}})}),function(e){return l.apply(this,arguments)})))})}}),function(e){x(e.willReconnect)}}),h[e].closeChannel=C,[2]}})})).apply(this,arguments)}function C(e){var n=null==e?void 0:e.languageServers;if(!n||0===n.length){var t=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(h)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;y(l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return}var s={},c=!0,u=!1,d=void 0;try{for(var p,f=n[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var m=p.value;s[m.id]=m}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}var g=!0,v=!1,b=void 0;try{for(var S,Y=Object.keys(h)[Symbol.iterator]();!(g=(S=Y.next()).done);g=!0){var _=S.value;s[_]||y(_)}}catch(e){v=!0,b=e}finally{try{g||null==Y.return||Y.return()}finally{if(v)throw b}}var A=!0,C=!1,k=void 0;try{for(var x,D=Object.keys(s)[Symbol.iterator]();!(A=(x=D.next()).done);A=!0){var E=x.value,R=h[E],I=s[E];if(!R){w(E,I);continue}ea(R.option,I)||(y(E),w(E,I))}}catch(e){C=!0,k=e}finally{try{A||null==D.return||D.return()}finally{if(C)throw k}}}function k(){return(k=(0,u._)(function(){var e;return(0,d.YH)(this,function(n){try{e=t.configs.current,C(e),t.configs.subscribe(C)}catch(e){T.vF.error("LSP initialization failed: "+e.message)}return[2]})})).apply(this,arguments)}return!function(){k.apply(this,arguments)}(),{restart:function(e){if(m){var n=h[e];if(n){if(n.client){var t=!0,r=!1,i=void 0;try{for(var a,l,s=c[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var u=(0,o._)(l.value,2),d=u[0],p=u[1],g=f.get(d);if(g){g.delete(n.client),f.set(d,g);var v=!0,y=!1,w=void 0;try{for(var b,S=p[Symbol.iterator]();!(v=(b=S.next()).done);v=!0)(0,b.value)(Array.from(g))}catch(e){y=!0,w=e}finally{try{v||null==S.return||S.return()}finally{if(y)throw w}}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}}n.closeChannel(),null==(a=n.client)||a.destroy(),n.client=null,_(e)}}},disable:function(){if(m){m=!1;var e=!0,n=!1,t=void 0;try{for(var r,i=Object.values(h)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;a.closeChannel(),null==(d=a.client)||d.destroy(),a.client=null;var l=!0,s=!1,u=void 0;try{for(var d,p,g=c[Symbol.iterator]();!(l=(p=g.next()).done);l=!0){var v=(0,o._)(p.value,2),y=v[0],w=v[1];if(f.has(y)){f.delete(y);var b=!0,S=!1,Y=void 0;try{for(var _,A=w[Symbol.iterator]();!(b=(_=A.next()).done);b=!0)(0,_.value)([])}catch(e){S=!0,Y=e}finally{try{b||null==A.return||A.return()}finally{if(S)throw Y}}}}}catch(e){s=!0,u=e}finally{try{l||null==g.return||g.return()}finally{if(s)throw u}}}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},enable:function(){if(!m){m=!0;var e=!0,n=!1,t=void 0;try{for(var r,i=Object.keys(h)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;_(o)}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},onClient:function(e,n){c.has(e)||c.set(e,[]),null==(u=c.get(e))||u.push(n);var t=!1,r=[],i=f.get(e);if(i&&i.size)r.push.apply(r,(0,D._)(Array.from(i)));else{var o=!0,a=!1,l=void 0;try{for(var u,d,p=Object.values(h)[Symbol.iterator]();!(o=(d=p.next()).done);o=!0){var m=d.value;if((0,I.fu)(e,m.option)&&m.client&&(r.push(m.client),!s))break}}catch(e){a=!0,l=e}finally{try{o||null==p.return||p.return()}finally{if(a)throw l}}}return Promise.resolve().then(function(){!t&&r.length&&n(r)}),function(){t=!0;var r,i=null!=(r=c.get(e))?r:[];c.set(e,i.filter(function(e){return e!==n}))}}}}({container:Z,toolchain:en,fs:j,enableMultipleLSPClientsPerFile:void 0!==U&&U}),ew=(0,x.A)({container:Z,fs:j}),eb=function(e){var n,t,r=e.container,i=e.toolchain;function o(e){return a.apply(this,arguments)}function a(){return(a=(0,u._)(function(e){return(0,d.YH)(this,function(n){var r;return e&&(t=void 0),t||(t=new Promise((r=(0,u._)(function(e){var n,t;return(0,d.YH)(this,function(r){switch(r.label){case 0:if(null==(t=i.modules)||null==(n=t.current)?void 0:n.some(function(e){return e.id.startsWith("postgresql")}))return[3,2];return[4,i.addModule("postgresql-16")];case 1:return r.sent(),e(),[3,3];case 2:e(),r.label=3;case 3:return[2]}})}),function(e){return r.apply(this,arguments)}))),[2]})})).apply(this,arguments)}return{ensureNixPsqlModuleInstalled:o,run:(n=(0,u._)(function(e){var n,t,i,a,l,s,c,u,p,f,h,m,y;return(0,d.YH)(this,function(d){switch(d.label){case 0:return n=e.query,t=e.connectionString,[4,o()];case 1:d.sent(),i=(0,Y.A)({container:r}),a=[],l=null,s=new S.e(function(e){return a.push(e)}),c=null,u=!1,p=new Promise(function(e){var n=i.onStateChanged(function(t){var r=t.state,i=t.stderrBuffer;if(r===v.api.State.Running){u=!0;return}u&&(c=i,n(),e())})}),i.onOutput(function(e){try{s.process(e)}catch(n){l||(l=n,g.Cp(n,function(n){return n.setExtra("chunk",e)}))}}),d.label=2;case 2:return d.trys.push([2,,5,6]),[4,i.request({args:["psql",t,"--csv","--command",n],splitStderr:!0})];case 3:return f=d.sent(),[4,p];case 4:return d.sent(),f.error&&!c&&(c=f.error),s.flush(),[3,6];case 5:return i.dispose(),[7];case 6:if(c)return[2,{columns:s.headers(),rows:a,error:c}];if(l)return h=l.message,[2,{columns:null!=(m=s.headers())?m:[],rows:a,error:h}];return[2,{columns:null!=(y=s.headers())?y:[],rows:a,error:null}]}})}),function(e){return n.apply(this,arguments)})}}({container:Z,toolchain:en}),eY=(eS={container:Z}).container,e_=eS.sendTrackingEvents,{presence:q,packager:er,container:Z,fs:j,dotReplit:$,nixService:J,lspnix:ey,git:ew,psql:eb,replspaceApi:es,toolchain:en,ports:ev,secrets:function(e){var n,t=e.container,a=e.observable,l=e.track,s=new Promise(function(e){return n=e});function c(){return(c=(0,u._)(function(){var e,n,t=arguments;return(0,d.YH)(this,function(r){switch(r.label){case 0:return e=t.length>0&&void 0!==t[0]?t[0]:{skipCache:!1},[4,s];case 1:if(n=r.sent(),!e.skipCache)return[2,new Map(a.current)];return[4,n.request({secretsGetRequest:{}})];case 2:return r.sent(),[2,new Map(a.current)]}})})).apply(this,arguments)}function p(){return(p=(0,u._)(function(e){var n,t,r,i,c,u,p,h,m,g,v,w,b,S,Y,_,A;return(0,d.YH)(this,function(d){switch(d.label){case 0:return[4,s];case 1:if(d.sent(),n=new Map(a.current),Array.isArray(e)){t=!0,r=!1,i=void 0;try{for(c=e[Symbol.iterator]();!(t=(u=c.next()).done);t=!0)h=(p=u.value).key,m=p.value,n.set(h,m)}catch(e){r=!0,i=e}finally{try{t||null==c.return||c.return()}finally{if(r)throw i}}}else{g=!0,v=!1,w=void 0;try{for(b=e[Symbol.iterator]();!(g=(S=b.next()).done);g=!0)_=(Y=(0,o._)(S.value,2))[0],A=Y[1],n.set(_,A)}catch(e){v=!0,w=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw w}}}return[4,f(n)];case 2:return d.sent(),null==l||l(y.AZ.SECRETS_USED,{action:"addEntries"}),[2]}})})).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=(0,u._)(function(e){var n,t;return(0,d.YH)(this,function(r){switch(r.label){case 0:return[4,s];case 1:return n=r.sent(),a.set(Array.isArray(e)?new Map(e.map(function(e){return[e.key,e.value]})):e),[4,n.request({secretsSetRequest:{contents:eg.A.serialize(a.current)}})];case 2:if((t=r.sent()).error)throw Error(t.error);return null==l||l(y.AZ.SECRETS_USED,{action:"replaceAll"}),[2]}})})).apply(this,arguments)}function m(){return(m=(0,u._)(function(){var e,n,t,r,i,o,c,u,p,h,m,g=arguments;return(0,d.YH)(this,function(d){switch(d.label){case 0:for(n=Array(e=g.length),t=0;t<e;t++)n[t]=g[t];return[4,s];case 1:if(d.sent(),0===(r=n.filter(function(e){return a.current.has(e)})).length)return[2];i=new Map(a.current),o=!0,c=!1,u=void 0;try{for(p=r[Symbol.iterator]();!(o=(h=p.next()).done);o=!0)m=h.value,i.delete(m)}catch(e){c=!0,u=e}finally{try{o||null==p.return||p.return()}finally{if(c)throw u}}return[4,f(i)];case 2:return d.sent(),null==l||l(y.AZ.SECRETS_USED,{action:"removeEntries"}),[2]}})})).apply(this,arguments)}function v(){return(v=(0,u._)(function(e){var n;return(0,d.YH)(this,function(t){switch(t.label){case 0:return[4,s];case 1:return[4,t.sent().request({externalSecretsSetRequest:{externalSecrets:Array.isArray(e)?e.reduce(function(e,n){return(0,i._)((0,r._)({},e),(0,em._)({},n.key,n.url))},{}):Object.fromEntries(e)}})];case 2:if((n=t.sent()).error)throw Error(n.error);return[2]}})})).apply(this,arguments)}return t.openChannel({service:"secrets",name:"secretser",skip:function(){return!1}},function(e){var t;return(t=e.channel).onCommand(function(e){if(e.secretsGetResponse){var n=e.secretsGetResponse.contents;if(n){var t=eg.A.parse(n);!function(e,n){if(e.size!==n.size)return!1;var t=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=(0,o._)(a.value,2),c=s[0],u=s[1];if(!n.has(c)||n.get(c)!==u)return!1}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return!0}(a.current,t)&&a.set(t)}}}),t.request({secretsGetRequest:{}}).then(function(e){e.channelClosed||(e.error&&g.v4(function(n){n.setTag("service","secrets"),g.Cp(Error("failed to initialize secrets: "+e.error))}),n(t))}),function(){s=new Promise(function(e){return n=e})}}),{addEntries:function(e){return p.apply(this,arguments)},removeEntries:function(){return m.apply(this,arguments)},read:function(){return c.apply(this,arguments)},replaceAll:f,watch:function(e){var n=!1,t=null;return s.then(function(){n||(t=a.subscribe(e))}),function(){n=!0,null==t||t()}},replaceAllExternalSecrets:function(e){return v.apply(this,arguments)}}}({container:eY,observable:new eh.N(new Map),track:void 0===e_||e_?A.u4:void 0})});return null==eA||eA.span.end(),h(eC),function(){h(null),setTimeout(function(){eC.container.destroy()},500)}},[e]),t}},52751:(e,n,t)=>{"use strict";t.d(n,{R:()=>i,U:()=>o});var r=t(684),i=r.ZU.Object({title:r.ZU.String(),screen:r.ZU.Object({height:r.ZU.Number(),width:r.ZU.Number()})}),o=[{title:"iPhone SE",screen:{height:667,width:375}},{title:"iPhone XR",screen:{height:896,width:414}},{title:"iPhone 16",screen:{height:852,width:393}},{title:"iPhone 16 Plus",screen:{height:932,width:430}},{title:"iPhone 16 Pro",screen:{height:874,width:402}},{title:"iPhone 16 Pro Max",screen:{height:956,width:440}},{title:"Pixel 9",screen:{height:915,width:412}},{title:"Pixel 9 Pro",screen:{height:915,width:412}},{title:"Pixel 9 Pro XL",screen:{height:983,width:448}},{title:"Samsung Galaxy S25",screen:{height:882,width:406}},{title:"Samsung Galaxy S25+",screen:{height:954,width:439}},{title:"Samsung Galaxy S25 Ultra",screen:{height:980,width:451}}]},52771:(e,n,t)=>{"use strict";t.d(n,{F:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(50175);function l(){var e=(0,i._)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.n(c,n)}},52870:(e,n,t)=>{"use strict";t.d(n,{j:()=>y,n:()=>v});var r=t(83846),i=t(81073),o=t(4083),a=t(18509),l=t(27023),s=t(11769),c=t(24928),u=t(1684),d=t(52637),p=t(8017),f=t(4616),h=t(85389),m=(0,a.x)({select:l.wp.minWidth(200),wrapper:[l.wp.rowWithGap(8),l.wp.align.center,(0,r._)({},o.c,[l.wp.flex.rowReverse])],rightComponentWrapper:(0,r._)({},o.c,[l.wp.ml(8)]),titleHeading:[l.wp.center,l.wp.justify.start],staffOnlyPill:[l.wp.height(18)]});function g(e){var n=e.children,t=e.settingName,r=e.settingDescription,a=e.settingId,l=e.title,s=e.rightComponent,c=e.isStaffOnly,d=l;return l||(d=r?(0,i.FD)(i.FK,{children:[(0,i.FD)(h.S,{css:m.titleHeading,row:!0,gap:8,children:[(0,i.Y)(f.EY,{multiline:!1,children:t}),c?(0,i.Y)(u.a,{css:m.staffOnlyPill,text:"Staff-only",colorway:"warning"}):null]}),(0,i.Y)(f.EY,{variant:"small",color:"dimmest",children:r})]}):(0,i.Y)(f.EY,{multiline:!1,children:t})),(0,i.Y)(o.w,{id:a,title:d,children:(0,i.FD)(h.S,{css:m.wrapper,children:[s?(0,i.Y)(h.S,{css:m.rightComponentWrapper,children:s}):null,n]})})}function v(e){var n=e.setting,t=e.currentValue,o=e.update,a=e.rightComponent,l=e.filterOptions,s=e.title;if("select"===n.type){var u,f=l?n.options.filter(l):n.options;return(0,i.Y)(g,{settingName:n.name,settingDescription:n.description,settingId:n.id,title:s,rightComponent:a,children:(0,i.Y)(d.l,{"aria-label":n.name,style:{marginRight:0},items:f,defaultSelectedKey:null==(u=f.find(function(e){return t===e.editorPreferencesValue}))?void 0:u.id,onSelectionChange:function(e){var t;if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");o((0,r._)({},n.editorPreferencesKey,null==(t=f.find(function(n){return n.id===e}))?void 0:t.editorPreferencesValue))},css:m.select,dataCy:n.id,children:function(e){return(0,i.Y)(c.nh,{id:e.id,label:e.title,dataCy:e.id,fixedHeight:32},e.id)}})})}if("boolean"===n.type)return(0,i.Y)(g,{settingName:n.name,settingDescription:n.description,settingId:n.id,title:s,rightComponent:a,children:(0,i.Y)(p.d,{"aria-label":n.name,isSelected:t,onChange:function(e){if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");o((0,r._)({},n.editorPreferencesKey,e))},dataCy:n.id})});throw Error("Unsupported setting type")}function y(e){var n,t=e.setting,r=e.currentValueOption,a=e.disabledReason,l=(0,i.FD)(i.FK,{children:[(0,i.Y)(f.EY,{multiline:!1,children:t.name}),(0,i.Y)(f.EY,{variant:"small",color:"dimmest",children:a})]});return(0,i.Y)(o.w,{id:t.id,title:l,children:(0,i.Y)(h.S,{css:m.wrapper,children:r?(0,i.Y)(s.$n,{text:null!=(n=null==r?void 0:r.title)?n:"Disabled",disabled:!0}):null})})}},52874:(e,n,t)=>{"use strict";t.d(n,{A:()=>x});var r=t(17844),i=t(93629),o=t(12694),a=t(81073),l=t(21462),s=t(39695),c=t(7576),u=t.n(c),d=t(22376),p=t(46011),f=t(1982),h=t(36937),m=t(18509),g=t(27023),v=t(28290),y=t(11769),w=t(40259),b=t(41358),S=t(4616),Y=t(85389),_=t(52447),A=t(24140),C=t(63456),k=(0,m.x)({form:[g.wp.align.start,g.wp.display.flex,g.wp.rowWithGap(8),g.wp.width("100%")],searchContainer:[g.wp.position.relative,g.wp.flex.growAndShrink(1)],dropdownMenu:[g.wp.borderRadius(8),g.wp.overflow("hidden"),g.wp.mt(2),g.wp.zIndex(2),g.wp.border({color:h.LU.outlineDimmer,width:1,style:"solid"}),g.wp.maxHeight(280),g.wp.overflowY("auto"),g.wp.scrollbar.thin,{scrollbarColor:h.LU.backgroundHigher+" "+h.LU.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:h.LU.backgroundHighest}}],result:[g.wp.p(8),g.wp.rowWithGap(8),g.wp.justify.spaceBetween,g.wp.align.center,g.wp.cursor.pointer],result_active:[g.wp.backgroundColor.accentPrimaryDimmer],loadingContainer:[g.wp.m(8),g.wp.rowWithGap(8),g.wp.align.center],emptyText:[g.wp.m(8)]});function x(e){var n=e.onSubmit,t=e.existingUsernames,c=e.isDisabled,m=e.onChange,g=e.placeholder,x=(0,o._)((0,l.useState)(""),2),D=x[0],E=x[1],R=(0,v.c)(),I=(0,p.A)(D.trim().replace(/^@/,""),250),T=(0,d.Mj)({skip:!I||u()(D),variables:{query:I,limit:6}}),F=T.data,P=T.loading,L=T.error,U=(0,f.A)().showError;(0,l.useEffect)(function(){L&&U(L.message)},[L,U]);var N=null==F?void 0:F.usernameSearch,O=function(e){E(e.currentTarget.value),null==m||m(e.currentTarget.value)},M=function(e){"Enter"===e.key&&D.match(/.+@.+/)&&(n(D),E(""),e.currentTarget.blur())};return(0,a.FD)("form",{onSubmit:function(e){e.preventDefault(),n(D),E("")},css:k.form,children:[(0,a.Y)(s.Ay,{onChange:function(e){e&&E(e.username)},itemToString:function(e){return(null==e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,o=e.getItemProps,l=e.getMenuProps,s=e.isOpen,c=e.highlightedIndex,u=e.getRootProps;return(0,a.FD)(Y.S,(0,i._)((0,r._)({css:k.searchContainer},u({refKey:"innerRef"})),{children:[(0,a.Y)(w.pd,(0,r._)({id:R("username-search")},n({ref:null,value:D,onChange:O,placeholder:null!=g?g:"Add people by username or email",autoComplete:"off",onKeyDown:M}))),s?(0,a.FD)(Y.S,{children:[N&&N.length?(0,a.Y)(b.ui,(0,i._)((0,r._)({elevated:!0,css:k.dropdownMenu,tag:"ul"},l({refKey:"innerRef"})),{children:N.map(function(e,n){return(0,a.FD)(Y.S,(0,i._)((0,r._)({tag:"li"},o({item:e,index:n})),{css:[k.result,n===c&&k.result_active],children:[(0,a.FD)(Y.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)(_.A,{size:"m",url:e.image,username:e.username,fullName:e.fullName}),(0,a.Y)(S.EY,{multiline:!1,children:e.username})]}),t.includes(e.username)?(0,a.Y)(Y.S,{children:(0,a.Y)(A.A,{color:h.LU.accentPositiveStronger})}):null]}),n)})})):null,P?(0,a.Y)(b.ui,{elevated:!0,css:k.dropdownMenu,children:(0,a.FD)(Y.S,{css:k.loadingContainer,align:"center",children:[(0,a.Y)(C.A,{}),(0,a.Y)(S.EY,{color:"dimmer",multiline:!1,children:"Loading…"})]})}):null,N&&0===N.length?(0,a.Y)(b.ui,{elevated:!0,css:k.dropdownMenu,children:(0,a.FD)(S.EY,{css:k.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',D,'"']})}):null]}):null]}))}}),(0,a.Y)(Y.S,{children:(0,a.Y)(y.$n,{colorway:"primary",type:"submit",disabled:c||!D,text:"Invite"})})]})}},52949:(e,n,t)=>{"use strict";t.d(n,{tz:()=>Q,SF:()=>S,EF:()=>V});var r=t(83846),i=t(17844),o=t(81073),a=t(21462),l=t(5204),s=t(92557),c=t(81986),u=t(35992),d=t(76957),p=t(69737),f=t(12694),h=t(79203),m=t(94680),g=(0,a.createContext)(null);function v(){var e=(0,a.useContext)(g);if(!e)throw Error("Expected store in context");return e}function y(e){return(0,h.md)(e,{store:v()})}function w(e){return(0,m.k)(e,v())}var b=function(e){return(0,h.Xr)(e,{store:v()})};function S(e){var n=(0,f._)((0,a.useState)(function(){return(0,d.y$)()}),1)[0];return(0,o.Y)(g.Provider,{value:n,children:e.children})}var Y=(0,t(15311).v)(["display","visibility","transform","maxHeight","width"]),_=Y.cssVars,A=Y.styleTokens,C=t(36937),k=t(41358),x=(0,d.eU)(null),D=(0,d.eU)("default"),E=(0,d.eU)({command:null,offset:{x:0,y:0},visible:!1}),R=(0,p.mg)(E,function(e){return e.offset}),I=(0,p.mg)(E,function(e){return e.command}),T=(0,p.mg)(E,function(e){return e.visible}),F=(0,p.mg)(E,function(e){return e.onKeyDownHandler}),P=(0,p.mg)(x,function(e){var n;return null!=(n=null==e?void 0:e.initial)?n:null}),L=(0,d.eU)(function(e){var n=e(R);if(!n)return null;var t=n.y,r=window.innerHeight-t,i=e(P),o=null!==i?i-r:0;return o>0&&(t=Math.max(16,t-Math.min(200,o))),t}),U=(0,d.eU)(function(e){var n=e(R);if(!n)return null;var t=n.x,r=window.innerWidth,i=e(O),o=t+(null!=i?i:M)-r+16;return o>0&&(t=Math.max(16,t-o)),t}),N=(0,d.eU)(function(e){var n=e(U),t=e(L);return null==n||null===t?null:(0,r._)({},_.transform,"translate(".concat(n,"px, ").concat(t,"px)"))}),O=(0,d.eU)(null),M=180,H=(0,d.eU)(function(e){var n=e(O);return(0,r._)({},_.width,(null===n?M:n)+"px")}),B=(0,d.eU)(function(e){var n=e(L);return null===n?null:(0,r._)({},_.maxHeight,"calc(100vh - ".concat(C.LU.space16," - ").concat(n,"px)"))}),z=(0,d.eU)(null,function(e,n){n(x,null),n(O,null),n(W,null),n(E,function(e){return(0,u.jM)(e,function(e){e.visible=!1,e.command=null})})}),W=(0,d.eU)(null),G=(0,d.eU)(null,function(e,n,t){if(n(D,t.background),t.width&&n(O,t.width),t.target){var r=t.target.getBoundingClientRect(),i={x:r.x,y:r.y+r.height+8};n(W,r),n(E,function(e){return(0,u.jM)(e,function(e){e.command=t.command,e.offset=i,e.visible=!0,e.onKeyDownHandler=t.onKeyDownHandler})});return}n(E,function(e){return(0,u.jM)(e,function(e){e.command=t.command,e.offset=t.offset,e.visible=!0,e.onKeyDownHandler=t.onKeyDownHandler})})});function V(){var e=b(G),n=b(z),t=w(T),r=(0,k.X$)({elevated:!0});return{openContextMenu:(0,a.useCallback)(function(n){e(n.target instanceof HTMLElement?{command:n.command,target:n.target,width:n.width,background:r,onKeyDownHandler:n.onKeyDownHandler}:{command:n.command,offset:n.target,target:null,width:n.width,background:r,onKeyDownHandler:n.onKeyDownHandler})},[e,r]),closeContextMenu:n,isVisible:t,onContextMenu:(0,a.useCallback)(function(n,t){var i=t.command,o=t.width,a=t.onKeyDownHandler;n.preventDefault(),e({command:i,offset:{x:n.clientX,y:Math.min(window.innerHeight-64,n.clientY)},target:null,width:o,background:r,onKeyDownHandler:a})},[e,r])}}var Z=t(18509),j=t(27023),q=t(36075),K=t(19340),$=(0,Z.x)({surface:[j.wp.shadow(3),j.wp.borderRadius(8),j.wp.position.absolute,{top:0,left:0,border:"1px solid",borderColor:C.LU.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(C.LU.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(C.LU.space16,"))"),maxHeight:A.maxHeight,width:A.width,transform:A.transform,visibility:A.visibility,display:A.display}]});function J(){var e=y(W);return e?(0,o.Y)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var Q=(0,a.memo)(function(){var e=b(z),n=y(I),t=y(F),u=w(T),d=(0,a.useRef)(function(){});(0,a.useEffect)(function(){var e=function(e){if(e){var n;null==(n=d.current)||n.call(d);return}};return e(u.current),u.subscribe(e)},[u]);var p=b(x),f=(0,a.useRef)(null);(0,a.useEffect)(function(){var n=function(n){var t;n.target instanceof HTMLElement&&(null==(t=f.current)?void 0:t.contains(n.target))||e()},t=function(){e()},r=function(e){e?(window.addEventListener("blur",t),document.addEventListener("pointerdown",n)):(window.removeEventListener("blur",t),document.removeEventListener("pointerdown",n))},i=u.subscribe(r);return function(){i(),r(!1)}},[u,e]);var h=w(N);(0,c.d)(f,h),(0,c.d)(f,w(B)),(0,c.d)(f,u,function(e){var n;return n={},(0,r._)(n,_.visibility,e?"visible":"hidden"),(0,r._)(n,_.display,e?"flex":"none"),n});var m=w(H);(0,c.d)(f,m);var g=(0,s.A)(),v=y(T)&&!g,S=y(D),Y=(0,i._)({},h.current,m.current);return n?(0,o.FD)(q.Z,{children:[(0,o.Y)(J,{}),(0,o.Y)(l.n1,{autoFocus:v,restoreFocus:!0,contain:!0,children:(0,o.Y)(k.ui,{onKeyDown:function(n){"Escape"===n.key&&e()},innerRef:f,css:$.surface,style:Y,background:S,children:(0,o.Y)(K.r,{iconBreadcrumbs:!0,command:n,onAction:e,onSelect:e,onTotalHeightChange:p,onKeyDown:t,focusRef:d,compact:!0})})})]}):null})},52951:e=>{e.exports={stepsList:"PlanStepsList_stepsList__d1eW9",divider:"PlanStepsList_divider__LnbQU",cancelledText:"PlanStepsList_cancelledText__FtI7T",gradientOverlay:"PlanStepsList_gradientOverlay__Qs_Eb",showMoreButton:"PlanStepsList_showMoreButton__RoX4p"}},53075:(e,n,t)=>{"use strict";t.d(n,{gu:()=>d,zn:()=>m,ah:()=>h});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(90629),s=t(49069);function c(){return(c=(0,r._)(function(e,n,t){var r;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(!e.path||"number"!=typeof e.indexStart||"number"!=typeof e.indexEnd||!e.otVersion)return[2];if(t===e.otVersion)return[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}];return[4,n({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:t})];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:t}]}})})).apply(this,arguments)}var u=t(71424);function d(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var n,t,r,i,a,u,d;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(n=e.anchor,t=e.version,r=e.transformSelection,i=e.content,!n.path)return[2,null];return[4,function(e,n,t){return c.apply(this,arguments)}(n,r,t)];case 1:if(!(a=o.sent()))return[2,null];return d=function(){if(a){var e=a.indexStart,n=a.indexEnd;try{var t=s.EY.of(i.split("\n")),r=t.lineAt(e),o=t.lineAt(n),c=t.sliceString(t.line(Math.max(r.number-2,1)).from,e),u=t.sliceString(n,t.line(Math.min(o.number+2,t.lines)).to);return{precode:c,code:t.sliceString(e,n),postcode:u}}catch(e){l.Cp(e)}}},[2,{anchor:n,newSelection:a,newPosition:u,getHighlight:d,snippet:f(i,a)}]}})})).apply(this,arguments)}var f=function(e,n){var t=s.EY.of(e.split("\n")),r=t.lineAt(n.indexStart).number,i=t.lineAt(n.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(t.lines,i+1));for(var a=r;a<=i;a++)o.push(t.line(a).text);return{startLineNumber:r,lines:o}};function h(e){var n=(0,u.A)().fs,t=(0,a.useRef)(null),r=(0,a.useRef)(null),o=(0,i._)((0,a.useState)(!1),2),l=o[0],s=o[1];return(0,a.useEffect)(function(){if(e){var i=function(){r.current=null,s(!1)},o=n.watchTextFile(e,{onReady:function(e){var n=e.transformSelection;t.current=e.initialContent.toString(),r.current=n,s(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){t.current=e.latestContent}});return function(){i(),o()}}},[e,n]),{contentRef:t,transformSelectionRef:r,loadedFile:l}}function m(e){var n=(0,u.A)().fs,t=(0,i._)((0,a.useState)(null),2),r=t[0],o=t[1],s=h(null==e?void 0:e.path),c=s.contentRef,p=s.loadedFile,f=s.transformSelectionRef;return(0,a.useEffect)(function(){(null==e?void 0:e.path)&&p&&f.current&&null!==c.current&&d({anchor:e,version:n.getOTVersion(e.path),transformSelection:f.current,content:c.current}).then(function(e){o(e)}).catch(function(e){o(null),l.Cp(e)})},[n,e,p,f,c]),r}},53301:(e,n,t)=>{"use strict";t.d(n,{s:()=>i});var r=t(36937),i="color-mix(in srgb, ".concat(r.LU.interactiveBackground," 60%, ").concat(r.LU.surfaceBackground,")")},53337:(e,n,t)=>{"use strict";t.d(n,{n:()=>v});var r=t(12694),i=t(81073),o=t(21462),a=t(96034),l=t(73745),s=t(95553),c=t(18509),u=t(27023),d=t(11769),p=t(41358),f=t(4616),h=t(85389),m=t(76477),g=(0,c.x)({root:[u.wp.borderRadius()],buttonContainer:[u.wp.width("100%"),u.wp.justify.center],upgradeButton:[u.wp.width("60%")]});function v(e){var n=e.aiName,t=(0,r._)((0,o.useState)(!1),2),c=t[0],u=t[1],v=(0,s.A)();return(0,i.FD)(p.ui,{elevated:!0,css:g.root,py:8,px:12,gap:8,align:"center",children:[(0,i.FD)(f.EY,{children:[n," is currently experiencing high demand and is temporarily unavailable for ",a.Lm," plan users."]}),(0,i.FD)(f.EY,{children:["Please try again later, or upgrade to ",a.en," for immediate access."]}),(0,i.Y)(h.S,{css:g.buttonContainer,row:!0,gap:6,children:(0,i.Y)(d.$n,{text:"Upgrade to ".concat(a.en),iconLeft:(0,i.Y)(m.A,{}),onClick:function(){return u(!0)},colorway:"brand",css:g.upgradeButton})}),(0,i.Y)(l.default,{isOpen:c,onClose:function(){return u(!1)},type:"purchase",analyticsContext:{upgrade:{context:"agent_freemium_quota"}},onPurchaseComplete:function(){return v()},reloadPageAfterPurchaseComplete:!0})]})}},53478:(e,n,t)=>{"use strict";t.d(n,{M:()=>h});var r=t(12694),i=t(21462),o=t(8950),a=t(17341),l=t(71355),s=t(67917),c=t(37872),u=t(39685),d=t(83244),p=t(43837),f=t(93704);function h(){var e,n,t,h=(e=(0,i.useRef)(new Map),n=(0,i.useRef)(new Map),t=(0,i.useRef)(null),{addMessage:function(r,i){if(e.current.set(i,r),c.vF.info("user message received",{eventId:i,sessionId:r.sessionId,sender:r.sender,created:r.created,agentRunning:(null==(a=t.current)?void 0:a.state)===o.g32.AGENT_STATE_RUNNING}),t.current&&(null==(l=t.current.reason)?void 0:l.$kind)!=="waitingOnPlanApproval"){var a,l,s=setTimeout(function(){var a;e.current.delete(i),c.vF.info("user message ghosted",{eventId:i,sessionId:r.sessionId,sender:r.sender,created:r.created,duration:Date.now()-r.created.getTime(),agentRunning:(null==(a=t.current)?void 0:a.state)===o.g32.AGENT_STATE_RUNNING}),n.current.delete(i)},t.current.state===o.g32.AGENT_STATE_PAUSED?3e4:6e4);n.current.set(i,s)}},acknowledgeMessage:function(t){var r=t.eventId,i=t.acknowledged,o=e.current.get(r);if(o){var a=i.getTime()-o.created.getTime();c.vF.info("user message acknowledged",{eventId:r,timeToAcknowledge:a,sessionId:o.sessionId,sender:o.sender,created:o.created,acknowledged:i});var l=n.current.get(r);l&&(clearTimeout(l),n.current.delete(r)),e.current.delete(r)}},agentStateChanged:function(e){if((null==(a=t.current)||null==(i=a.reason)?void 0:i.$kind)!=="waitingOnPlanApproval"||e.state!==o.g32.AGENT_STATE_RUNNING){var i,a,l,s=null==(l=e.reason)?void 0:l.$kind;if("userPaused"===s||"waitingOnPlanApproval"===s){(function(){var e=!0,t=!1,i=void 0;try{for(var o,a=n.current.entries()[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=(0,r._)(o.value,2),s=l[0],c=l[1];clearTimeout(c),n.current.delete(s)}}catch(e){t=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw i}}})(),t.current=e;return}t.current=e}}}),m=h.addMessage,g=h.acknowledgeMessage,v=h.agentStateChanged;(0,s.zv)("agent-state-changed",function(e){v(e.state);var n,t=null==(n=e.state.reason)?void 0:n.$kind;if(t){var r=new Map([["userPaused","user_paused"],["waitingOnPlanApproval","waiting_on_plan_approval"],["waitingOnUserResponse","waiting_on_user_input"],["rateLimited","quota_reached"],["error","agent_error_encountered"],["stepLimitExceeded","step_limit_exceeded"]]).get(t);r&&(0,u.p)({action:r,sessionId:e.sessionId})}});var y=(0,f.F)().isFreemiumStarterPlanUsersOwnRepl,w=(0,p.k)().hasAgentBillingV2,b=y?"starter":void 0;(0,s.zv)("received-event",function(e){var n=e.event,t=n.sessionId;if((0,a.TW)(n,"agentPlanEventContents")&&n.state===o.qOk.IN_PROGRESS){var r=n.contents.contents,i=(0,l.QN)(r);n.sender.type===o.utd.AI&&i.requiresApproval&&(0,u.Y)({action:"plan_proposal_started",sessionId:t,planId:i.planId,planSupportsVisualPreview:(0,d.l)(i.stackBlueprint)})}}),(0,s.zv)("received-completed-event",function(e){var n=e.event,t=n.sessionId;if((0,a.TW)(n,"messageEventContents")&&m({sender:n.sender.id,sessionId:t,created:n.created},n.id),(0,a.TW)(n,"agentPlanEventContents")){var r=n.contents.contents,i=(0,l.QN)(r);n.sender.type===o.utd.AI&&i.requiresApproval&&(0,u.Y)({action:"plan_proposal_completed",sessionId:t,planId:i.planId,planSupportsVisualPreview:(0,d.l)(i.stackBlueprint)})}if((0,a.TW)(n,"rapidBuildStarted")?(0,u.p)({action:"rapid_build_started",sessionId:t}):(0,a.TW)(n,"rapidBuildConcluded")&&(0,u.p)({action:"rapid_build_concluded",sessionId:t}),(0,a.TW)(n,"agentTimelineEventContents")){var s=(0,l.QN)(n.contents.contents),c=s.toolData;switch(s.toolName){case"mark_current_step_as_succeeded":return(0,u.p)({action:"step_completed",sessionId:t,replOwnerPlanName:b});case"mark_current_step_as_failed":return(0,u.p)({action:"step_failed",sessionId:t,replOwnerPlanName:b})}if(c)switch(c.$kind){case"commitData":return(0,u.p)({action:"checkpoint_created",sessionId:t,freeCheckpoint:c.commitData.billingRate===o.pSr.ZERO_RATED,replOwnerPlanName:b,hasUbbV2:w,checkpointPrice:c.commitData.usageCents});case"agentPlanStepBegin":var p=c.agentPlanStepBegin.planStep,f=p.id,h=p.name,v=p.blueprints;return(0,u.Y)({action:"plan_step_started",stepId:f,stepName:h,stepBlueprints:v,sessionId:t});case"blueprintsSetup":var y=c.blueprintsSetup.blueprintData;return(0,u.p)({action:"blueprints_setup",blueprints:y.map(function(e){return e.name}),sessionId:t,replOwnerPlanName:b});case"acknowledgeUserMessage":var S=c.acknowledgeUserMessage.eventIds,Y=!0,_=!1,A=void 0;try{for(var C,k=S[Symbol.iterator]();!(Y=(C=k.next()).done);Y=!0){var x=C.value;g({eventId:x,acknowledged:new Date})}}catch(e){_=!0,A=e}finally{try{Y||null==k.return||k.return()}finally{if(_)throw A}}}}})}},53829:(e,n,t)=>{"use strict";t.d(n,{A:()=>c,T:()=>s});var r=t(12694),i=t(21462),o=t(38674),a=t(33090),l=t(71424),s=".tutorial";function c(){var e=(0,l.A)().fs,n=(0,r._)((0,i.useState)({isLoading:!0,isTutorial:!1}),2),t=n[0],c=n[1];return(0,i.useEffect)(function(){e.watchDir(o.Dl,{onChange:function(e){c({isLoading:!1,isTutorial:e.some(function(e){return e.type===a.pt.Directory&&e.filename===s})})},onMoveOrDelete:function(){c({isLoading:!1,isTutorial:!1})},onError:function(){c({isLoading:!1,isTutorial:!1})}})},[e]),t}},53868:(e,n,t)=>{"use strict";t.d(n,{K:()=>z});var r=t(12694),i=t(81073),o=t(21462),a=t(29935),l=t(82643),s=t(8950),c=t(21762),u=t(1982),d=t(39685),p=t(11769),f=t(45351),h=t(40259),m=t(4616),g=t(85389);function v(e){var n=e.showHeading,t=e.onSubmit,a=(0,r._)((0,o.useState)(""),2),l=a[0],s=a[1];return(0,i.Y)(f.lV,{onSubmit:function(e){e.preventDefault(),t(l)},children:(0,i.FD)(g.S,{gap:8,children:[void 0===n||n?(0,i.FD)(g.S,{gap:2,children:[(0,i.Y)(m.Y9,{variant:"subheadDefault",level:1,children:"Feedback"}),(0,i.Y)(m.EY,{color:"dimmer",children:"All feedback is reviewed by the Replit team."})]}):null,(0,i.FD)(g.S,{gap:8,style:{minHeight:120},children:[(0,i.Y)(h.ov,{placeholder:"Please share bugs, feature requests, and anything else related to your experience...",autoSize:!0,value:l,onChange:function(e){return s(e.currentTarget.value)},autoFocus:!0}),(0,i.Y)(p.$n,{colorway:"primary",text:"Send feedback",type:"submit"})]})]})})}var y=t(86105),w=t(36937),b=t(18509),S=t(85051),Y=t(27023),_=t(86733),A=t(1684),C=t(32846),k=t(11122),x=t(17844),D=t(93629),E=t(52351);function R(e){return(0,i.Y)(E.Ay,(0,D._)((0,x._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M7.945 3.052a1.25 1.25 0 0 0-.835-.302h-3a1.25 1.25 0 0 0-1.243 1.357 19.04 19.04 0 0 0 2.953 8.335l.003.006a18.75 18.75 0 0 0 5.77 5.769l.005.004a19.04 19.04 0 0 0 8.296 2.953 1.25 1.25 0 0 0 1.356-1.251V16.901a1.25 1.25 0 0 0-1.072-1.268 13.592 13.592 0 0 1-2.97-.74l-.002-.001a1.251 1.251 0 0 0-1.317.28l-.002.001-1.267 1.267a.75.75 0 0 1-.9.122 16.75 16.75 0 0 1-6.282-6.281.75.75 0 0 1 .122-.901L8.828 8.11a1.25 1.25 0 0 0 .28-1.317v-.002a13.59 13.59 0 0 1-.741-2.97 1.25 1.25 0 0 0-.422-.77ZM7.107 1.25a2.75 2.75 0 0 1 2.747 2.372c.119.904.34 1.791.659 2.645A2.75 2.75 0 0 1 9.89 9.17l-.858.858a15.249 15.249 0 0 0 4.94 4.94l.86-.86v-.001a2.75 2.75 0 0 1 2.901-.62 12.085 12.085 0 0 0 2.652.66 2.75 2.75 0 0 1 2.365 2.781v2.99a2.752 2.752 0 0 1-3.011 2.748 20.54 20.54 0 0 1-8.954-3.185 20.25 20.25 0 0 1-6.226-6.226 20.54 20.54 0 0 1-3.186-9.007A2.75 2.75 0 0 1 4.11 1.25h2.998Z",clipRule:"evenodd"})}))}var I=[Y.wp.borderRadius(),Y.wp.px(12),Y.wp.py(16),S.b.filled,Y.wp.hover({backgroundColor:w.LU.accentPrimaryDimmer}),Y.wp.width("50%"),Y.wp.justify.center,Y.wp.flex.column],T=(0,b.x)({container:I,containerActive:(0,y._)(I).concat([Y.wp.backgroundColor.accentPrimaryDimmest,Y.wp.border({color:w.LU.accentPrimaryDimmer})]),headline:[Y.wp.fontWeight.medium],premiumPill:[Y.wp.display.inlineBlock,Y.wp.height("20px"),{verticalAlign:"middle"}],text:[Y.wp.width("100%")]});function F(e){var n=e.optionKey,t=e.icon,r=e.headline,o=e.description,a=e.isPremium,l=e.isActive,s=e.setSelectedOption;return(0,i.FD)(g.S,{css:l?T.containerActive:T.container,gap:6,onClick:function(){s(n)},children:[(0,i.FD)(g.S,{row:!0,gap:4,align:"center",children:[t,(0,i.Y)(m.EY,{variant:"subheadDefault",css:T.headline,children:r}),a?(0,i.Y)(A.a,{colorway:"green",text:"Premium",css:T.premiumPill}):null]}),(0,i.Y)(g.S,{row:!0,gap:4,align:"center",children:(0,i.Y)(m.EY,{variant:"small",color:"dimmer",css:T.text,children:o})})]})}var P=(0,b.x)({callOptionContainer:[Y.wp.width("100%"),Y.wp.flex.column,Y.wp.align.center,Y.wp.justify.center,Y.wp.height("100px"),Y.wp.border({color:w.LU.outlineDimmer}),Y.wp.borderRadius()],helpButtonContainer:[{"@media (max-width: 600px)":{flexDirection:"column"}}]});function L(e){var n=e.onSubmit,t=(0,r._)((0,o.useState)(null),2),a=t[0],l=t[1],s=[{optionKey:"call",icon:(0,i.Y)(R,{size:20}),headline:"Schedule a call",description:"Have a discussion with a Replit employee over a video call.",isPremium:!0},{optionKey:"feedback",icon:(0,i.Y)(k.A,{size:20}),headline:"Share feedback & bugs",description:"Tell us about your experience. Feedback is reviewed by the Replit team."}];return(0,i.FD)(g.S,{gap:8,children:[(0,i.Y)(m.EY,{variant:"headerDefault",children:"Talk to us"}),(0,i.Y)(g.S,{row:!0,gap:8,css:P.helpButtonContainer,pr:6,children:s.map(function(e){return(0,i.Y)(F,{icon:e.icon,headline:e.headline,description:e.description,isPremium:e.isPremium,optionKey:e.optionKey,isActive:a===e.optionKey,setSelectedOption:l},e.optionKey)})}),"call"===a?(0,i.Y)(g.S,{css:P.callOptionContainer,children:(0,i.Y)(_.v,{iconLeft:(0,i.Y)(C.A,{}),text:"Select a time to chat",colorway:"blue",target:"_blank",href:"https://calendly.com/kody-low-repl/replit-support"})}):null,"feedback"===a?(0,i.Y)(v,{showHeading:!1,onSubmit:function(e){n(e),l(null)}}):null]})}var U=t(97906),N=t(58770),O=t(85144);function M(e){var n=(0,U.A)(),t=(0,N.jl)(),a=(0,r._)((0,o.useState)(0),2),l=a[0],s=a[1],c=(0,o.useRef)(null),u="visualViewport"in window;(0,o.useEffect)(function(){if(!n)return void s(0);if(t&&u){var e=window.visualViewport;if(!e)return;var r=function(){s(window.innerHeight-e.height-e.offsetTop)};return r(),e.addEventListener("resize",r),e.addEventListener("scroll",r),function(){e.removeEventListener("resize",r),e.removeEventListener("scroll",r)}}n&&s(20)},[n,t,u]);var d=(0,o.useMemo)(function(){var t;return(0,D._)((0,x._)({},e.underlayProps||{}),{style:(0,D._)((0,x._)({},(null==(t=e.underlayProps)?void 0:t.style)||{}),{paddingBottom:n?l:void 0})})},[e.underlayProps,n,l]);return(0,i.Y)(O.a,(0,D._)((0,x._)({},e),{underlayProps:d,className:e.className,children:(0,i.Y)("div",{ref:c,children:e.children})}))}var H=(0,b.x)({container:[Y.wp.minWidth("300px"),{maxWidth:"90vw","@media (max-width: 600px)":{minWidth:"90vw"}}]});function B(e){var n,t=e.isOpen,r=e.onClose,p=e.onSubmit,f=e.session,h=e.source,m=void 0===h?"header":h,g=(0,u.A)(),y=g.showConfirm,w=g.showError,b=(n=(0,a._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:if(!f)return[2];return[4,f.submitUserFeedback({type:s.O3q.AGENT_FEEDBACK_UNKNOWN,comment:e})];case 1:return(null==(n=t.sent())?void 0:n.ok)?y("Feedback received."):w("Failed to send feedback. Please try again."),null==p||p(e),r(),[2]}})}),function(e){return n.apply(this,arguments)}),S=(0,c._P)({controlName:"flag-top-ai-spenders",type:"boolean"});return(0,o.useEffect)(function(){t&&f&&(0,d.p)({action:"open_feedback_modal_from_".concat(m),sessionId:f.id})},[t,f,m]),(0,i.Y)(M,{isOpen:t,onRequestClose:r,centered:!0,css:H.container,children:S?(0,i.Y)(L,{onSubmit:b}):(0,i.Y)(v,{onSubmit:b})})}function z(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"command",t=arguments.length>2?arguments[2]:void 0,a=(0,r._)((0,o.useState)(!1),2),l=a[0],s=a[1],c=(0,o.useCallback)(function(){s(!0)},[]),u=(0,o.useCallback)(function(){s(!1)},[]),d=(0,o.useCallback)(function(){return e?(0,i.Y)(B,{isOpen:l,onClose:u,session:e,source:n,onSubmit:t}):null},[l,e,u,n,t]);return{openFeedbackModal:c,closeFeedbackModal:u,FeedbackModal:d}}},53974:(e,n,t)=>{"use strict";t.d(n,{c:()=>h,l:()=>function e(n,t){if(!["context","action"].includes(n.data.type))throw Error("Command type not supported: "+n.data.type);if("action"===n.data.type)return{match:u.G2,data:{label:n.data.label,description:n.data.description,icon:n.data.iconPath?(0,a.Y)(p.A,{src:(0,c.sU)(n.extension.baseUrl,n.data.iconPath),layout:"fill",alt:""}):(0,a.Y)(a.FK,{children:" "}),type:"action",run:(0,r._)(function(){var e;return(0,o.YH)(this,function(t){switch(t.label){case 0:if(!(e=n.run))throw Error("Action command must have run");return[4,e()];case 1:return[2,t.sent()]}})})}};var l,s=n.commands;if(!s)throw Error("Context command must have commands");return{match:u.G2,data:{label:n.data.label,description:n.data.description,icon:n.data.iconPath?(0,a.Y)(p.A,{src:(0,c.sU)(n.extension.baseUrl,n.data.iconPath),layout:"fill",alt:""}):(0,a.Y)(a.FK,{}),type:n.data.type},commands:(l=(0,r._)(function(r){var a;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,s({active:r.active,searchQuery:r.searchQuery,path:a=(0,i._)(t.path).concat([{data:n.data}])})];case 1:return[2,o.sent().map(function(n){return e(n,{path:a})})]}})}),function(e){return l.apply(this,arguments)})}}});var r=t(29935),i=t(86105),o=t(82643),a=t(81073),l=t(684),s=t(45843),c=t(22419),u=t(59255),d=t(49326),p=t(55576),f=l.ZU.Object({id:l.ZU.Optional(l.ZU.String()),icon:l.ZU.Optional(l.ZU.String()),type:l.ZU.Union([l.ZU.Literal("action"),l.ZU.Literal("context")]),label:l.ZU.String(),description:l.ZU.String(),contributions:l.ZU.Optional(l.ZU.Array(l.ZU.Enum(d.P)))});function h(e,n){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e,n){var t,i,a;return(0,o.YH)(this,function(l){switch(l.label){case 0:return[4,e.data];case 1:if(t=l.sent(),!s.J(f,t))throw Error("Invalid command");if(i=null,"string"==typeof t.icon){if(""===t.icon)throw Error("Command icon cannot be empty. Omit it if you do not want an icon.");i=t.icon}if(a={data:{label:t.label,description:t.description,type:t.type,iconPath:i,id:t.id?t.id:void 0},extension:n.extension},t.contributions&&(a.data.contributions=t.contributions,n.logger.warn("Command ".concat(t.label," uses deprecated contributions field"))),"context"===t.type){var c;c=(0,r._)(function(t){var r,i,a,l,s,c,u,d,p;return(0,o.YH)(this,function(o){switch(o.label){case 0:r=t.active,i=t.searchQuery,a=t.path,l=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.commands({active:r,searchQuery:i,path:a})];case 2:return l=o.sent(),[3,4];case 3:return s=o.sent(),n.logger.error(s.message,{commandError:s,api:"command"}),[2,[]];case 4:return[4,l.length];case 5:c=o.sent(),u=[],d=0,o.label=6;case 6:if(!(d<c))return[3,9];return p=u.push,[4,h(l[d],n)];case 7:p.apply(u,[o.sent()]),o.label=8;case 8:return d++,[3,6];case 9:return[2,u]}})}),a.commands=function(e){return c.apply(this,arguments)}}else a.run=(0,r._)(function(){var t;return(0,o.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.run()];case 1:return r.sent(),[2,void 0];case 2:return t=r.sent(),n.logger.error(t.message,{runError:t,api:"command"}),[2,{type:"error",message:t.message}];case 3:return[2]}})});return[2,a]}})})).apply(this,arguments)}},54251:(e,n,t)=>{"use strict";t.d(n,{Wx:()=>w,cN:()=>v,fw:()=>b});var r=t(17844),i=t(93629),o=t(17459),a=t(81073),l=t(16240),s=t(18509),c=t(27023),u=t(83070),d=t(36073),p=t(85389),f=t(2760),h=t(63456),m=t(71872),g=[c.wp.p(8),c.wp.center],v=function(){return(0,a.Y)(p.S,{css:g,children:(0,a.Y)(h.A,{size:24})})},y=(0,s.x)({error:[c.wp.flex.grow(0),c.wp.mt(0)]}),w=function(e){var n=e.text,t=(0,o._)(e,["text"]);return(0,a.Y)(l.A,(0,i._)((0,r._)({css:y.error},t),{children:(0,a.Y)(d.N,{colorway:"warning",icon:(0,a.Y)(m.A,{}),text:n})}))},b=function(e){var n=e.onBack;return(0,a.Y)(p.S,{row:!0,align:"center",children:(0,a.Y)(u.K0,{alt:"Back",tooltipBehavior:"hidden",onClick:n,children:(0,a.Y)(f.A,{})})})}},54339:(e,n,t)=>{"use strict";t.d(n,{V:()=>o});var r=t(66890),i=t(58770);function o(){var e=(0,i.vm)(),n=(0,i.jl)(),t=(0,i.d0)();return e||n?r.onb.Mac:t?r.onb.Windows:r.onb.Linux}},54369:(e,n,t)=>{"use strict";t.d(n,{P:()=>f});var r=t(81073),i=t(36937),o=t(18509),a=t(85051),l=t(27023),s=t(11769),c=t(1684),u=t(41358),d=t(85389),p=(0,o.x)({root:[{borderBottom:"1px solid ".concat(i.LU.outlineDimmest)}],inner:[l.wp.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(i.LU.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(i.LU.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],tabs:[l.wp.overflowX("auto"),l.wp.pl(8)],tab:[a.b.nofill,l.wp.borderRadius(0),l.wp.px(12),l.wp.position.relative,{transition:"none",height:38,marginRight:1,"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:i.LU.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],dot:[l.wp.position.absolute,l.wp.borderRadius(16),l.wp.width(8),l.wp.height(8),l.wp.backgroundColor.accentPrimaryStronger,{top:8,right:8}]}),f=function(e){var n=e.tabs,t=e.value,o=e.onClick;return(0,r.Y)(u.ui,{css:p.root,children:(0,r.Y)(d.S,{css:p.inner,children:(0,r.Y)(d.S,{css:p.tabs,row:!0,align:"center",children:n.map(function(e){return(0,r.FD)(d.S,{css:l.wp.position.relative,children:[(0,r.Y)(s.$n,{style:{borderBottom:"1px solid "+(t===e.value?i.LU.foregroundDefault:"transparent")},css:p.tab,text:e.label,iconLeft:e.icon,iconRight:e.beta?(0,r.Y)(c.a,{text:"Beta",colorway:"grey"}):void 0,onClick:function(){return o(e)}}),e.showDot?(0,r.Y)(d.S,{css:p.dot}):null]},e.value)})})})})}},54564:(e,n,t)=>{"use strict";t.d(n,{Kb:()=>p,bf:()=>s,f_:()=>g,hX:()=>c,kS:()=>u,kZ:()=>d,m$:()=>h,uF:()=>f,xF:()=>m,z7:()=>l});var r=t(62019),i=t(37743),o=t(1833),a=t(89264),l=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="DeploymentNotFoundError",e.message="Could not find existing deployment",e}return(0,o._)(n,e),n}((0,a._)(Error)),s=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="CurrentBuildNotFoundError",e.message="Could not find existing current build",e}return(0,o._)(n,e),n}((0,a._)(Error)),c=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="RollbackBuildNotProvidedError",e.message="Rollback target build not provided",e}return(0,o._)(n,e),n}((0,a._)(Error)),u=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="RunCommandNotFoundError",e.message="Could not find run command",e}return(0,o._)(n,e),n}((0,a._)(Error)),d=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="SubdomainNotFoundError",e.message="Could not find subdomain",e}return(0,o._)(n,e),n}((0,a._)(Error)),p=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="AppTypeFoundError",e.message="Could not find app type",e}return(0,o._)(n,e),n}((0,a._)(Error)),f=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="PublicDirNotFoundError",e.message="Could not find public directory",e}return(0,o._)(n,e),n}((0,a._)(Error)),h=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="ReplConnectionError",e.message="An App connection error occurred. App is reconnecting or has been disconnected.",e}return(0,o._)(n,e),n}((0,a._)(Error)),m=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="InvalidTimezoneError",e}return(0,o._)(n,e),n}((0,a._)(Error)),g=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="CrontabNotFoundError",e}return(0,o._)(n,e),n}((0,a._)(Error))},54843:(e,n,t)=>{"use strict";t.d(n,{X:()=>q});var r,i=t(49069),o=t(62019),a=t(37743),l=t(48122),s=t(1833),c=t(23099),u=t.n(c),d=t(45773),p=t(44725),f=t(18254),h=t(28984),m=t(57043),g=i.sj.define({combine:function(e){var n;return null!=(n=e.filter(Boolean)[0])?n:null}}),v=i.sU.define({create:function(){return{diff:null,tree:f.PH.empty}},update:function(e,n){var t,r,i=n.state.facet(g),o=null==(t=n.state.facet(p.BH))?void 0:t.parser;if(!i)return null===e.diff&&e.tree===f.PH.empty?e:{diff:null,tree:f.PH.empty};var a=e.diff,l=e.tree;return(a&&a.a.eq(i)?n.docChanged&&(a=a.updateB(n.newDoc,n.changes)):(a=h.o.create(i,n.newDoc),l=f.PH.empty),(null==(r=n.startState.facet(p.BH))?void 0:r.parser)!==o&&(l=f.PH.empty),o&&l.length!==a.a.length)?(l=(0,m.B)({parser:o,text:a.a,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),y=t(83846),w=t(36937),b="cm-inline-diff-line-deletion-base",S="cm-inline-diff-line-deletion",Y="cm-inline-diff-text-deletion",_="cm-inline-diff-line-insertion-base",A="cm-inline-diff-line-insertion",C="cm-inline-diff-text-insertion",k="rgba(180, 0, 0, 0.075)",x="rgba(180, 0, 0, 0.125)",D="rgba(0, 180, 0, 0.075)",E="rgba(0, 180, 0, 0.125)",R="cm-inline-diff-marker",I="cm-inline-diff-marker-left",T="cm-inline-diff-marker-right";function F(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var P=d.Lz.theme((r={},(0,y._)(r,".".concat(b,", .").concat(S),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(w.LU.accentPrimaryDimmest," !important")}}),(0,y._)(r,".".concat(b),{background:F(k)}),(0,y._)(r,".".concat(S),{background:F(k,x)}),(0,y._)(r,".".concat(_),{background:F(D)}),(0,y._)(r,".".concat(A),{background:F(D,E)}),(0,y._)(r,".".concat(C),{display:"inline-block",background:E,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(E),paddingLeft:"3px",marginLeft:"-6px"}}),(0,y._)(r,".".concat(Y),{display:"inline-block",background:x,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(x),paddingLeft:"3px",marginLeft:"-6px"}}),(0,y._)(r,".".concat(R),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,y._)(r,".".concat(I),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,y._)(r,".".concat(T),{width:"50%",textAlign:"right"}),r)),L=t(38),U=t(38201),N=function(e){function n(e,t,r){var i;return(0,a._)(this,n),(i=(0,o._)(this,n)).line=e,i.index=t,i.changed=r,i}(0,s._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(b):"cm-line ".concat(S),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=l.text,c=l.tags,u=document.createElement("span");u.textContent=s||"\xa0",u.className=null!=c?c:"",n.appendChild(u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,p=0,f=null,h=null,m=function(n,t){if(!f)throw Error("range is null");var r=e.line[p],i=r.text,o=r.tags,a=i.slice(d-f.from,t-f.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",n.appendChild(l),d+=a.length};p<this.line.length;){if(!f){var g=this.line[p].text;f={from:d,to:d+g.length}}if(!h){var v=!0,y=!1,w=void 0;try{for(var _,A=this.changed[Symbol.iterator]();!(v=(_=A.next()).done);v=!0){var C=_.value;if(!(C.from>=f.to)&&!(C.to<=d)){var k=document.createElement("span");k.className=Y,h={from:C.from,to:C.to,dom:k},d<h.from&&m(n,h.from),n.appendChild(k);break}}}catch(e){y=!0,w=e}finally{try{v||null==A.return||A.return()}finally{if(y)throw w}}}h?(d<h.to&&m(h.dom,h.to),d>=h.to&&(h=null)):m(n,f.to),d>=f.to&&(f=null,p++)}return n},t.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null==(t=this.changed)?void 0:t.length)===(null==(r=e.changed)?void 0:r.length)&&u()(this.line,e.line)&&u()(this.changed,e.changed)},t.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,l._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(d.xO),O=d.NZ.line({class:_}),M=d.NZ.line({class:A}),H=d.NZ.mark({class:C}),B=d.Lz.decorations.compute([v],function(e){var n=function(e,n){if(r.getLineChangeType(e.number,L.mn.B)===L.DE.COVERED)o.push(M.range(e.from));else{o.push(O.range(e.from));var t=!0,i=!1,a=void 0;try{for(var l,s=(0,L.QG)(e,n,L.mn.B,!1)[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=l.value;o.push(H.range(c.from,c.to))}}catch(e){i=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}}},t=e.field(v,!1);if(!t||!t.diff)return d.NZ.none;var r=t.diff,i=t.tree,o=[],a=!0,l=!1,s=void 0;try{for(var c,u=r.chunks[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var p=c.value;if(p.fromB!==p.endB)for(var f=r.b.lineAt(p.fromB),h=r.b.lineAt(p.endB),m=f.number;m<=h.number;m++)n(r.b.line(m),p);else p.fromA===p.endA&&n(r.b.lineAt(p.fromB),p);if(p.fromA!==p.toA)for(var g=r.a.lineAt(p.fromA),y=(0,U.A7)(i,r.a,e,p.fromA,p.endA),w=0;w<y.length;w++){var b=y[w],S=r.a.line(g.number+w),Y=r.getLineChangeType(S.number,L.mn.A)===L.DE.COVERED?null:(0,L.QG)(S,p,L.mn.A,!0),_=d.NZ.widget({widget:new N(b,S.number,Y),block:!0,side:-(y.length-w)});o.push(_.range(p.fromB))}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return d.NZ.set(o,!0)}),z=t(92425),W=(0,d.cU)({class:z.n1,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(v,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;if(0===t.diff.a.length)return z.CI;var r=e.state.doc.lineAt(n.from);switch(t.diff.getLineChangeType(r.number,L.mn.B)){case L.DE.COVERED:case L.DE.MODIFIED:return z.CI;default:return null}},widgetMarker:function(e,n){if(!(n instanceof N))return null;var t=e.state.field(v,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;switch(t.diff.getLineChangeType(n.index,L.mn.A)){case L.DE.COVERED:case L.DE.MODIFIED:return z.RC;default:return null}},initialSpacer:function(e){var n=e.state.field(v,!1);return(null==n?void 0:n.diff)?z.CI:z.jn},updateSpacer:function(e,n){var t=n.state.field(v,!1),r=(null==t?void 0:t.diff)?z.CI:z.jn;return e===r?e:r}}),G=t(75321),V=function(e){function n(e,t){var r;return(0,a._)(this,n),(r=(0,o._)(this,n)).left=e,r.right=t,r}(0,s._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=e.state.doc.lines.toString().length,t=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return t.className=R,r.className=I,i.className=T,t.style.width="".concat(2*n+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),t.appendChild(r),t.appendChild(i),t},t.eq=function(e){return e instanceof n&&this.left===e.left&&this.right===e.right},n}(d.wJ),Z=G.DY.of(function(e,n){if(n instanceof N)return new V(n.index,null)}),j=[G.RG.of(function(e,n){var t,r=e.state.field(v,!1);if(r&&r.diff&&r.diff.hasChanges()){var i=e.state.doc.lineAt(n.from),o=r.diff.getCorrespondingLine(i.number,L.mn.B);return new V(null!=(t=null==o?void 0:o.number)?t:null,i.number)}}),Z],q=i.sj.define({enables:function(e){return[g.computeN([e],function(n){return n.facet(e)}),z.s,v,P,B,j,W]}})},54907:(e,n,t)=>{"use strict";t.d(n,{A:()=>k});var r=t(12694),i=t(86105),o=t(81073),a=t(21462),l=t(2568),s=t(17089),c=t(61430),u=t(18509),d=t(27023),p=t(38692),f=t(30124),h=t(83070),m=t(41358),g=t(4616),v=t(78626),y=t(85389),w=t(54148),b=t(48604),S=t(63456),Y=t(81650),_=(0,u.x)({module:[d.wp.borderRadius(4),d.wp.width("100%"),d.wp.overflow("hidden")],submoduleName:[d.wp.truncate,d.wp.mx(8),d.wp.flex.growAndShrink(1)],moduleActions:[d.wp.center],divider:[d.wp.backgroundColor.outlineDimmer]});function A(e){var n=e.isModifying,t=e.isInstalled,r=e.onInstallClick,i=e.onRemoveClick,a=e.module;if(n)return(0,o.Y)(h.K0,{alt:"Updating module",tooltipBehavior:"hidden",children:(0,o.Y)(S.A,{})});if(t){var l="replit"===a.id;return(0,o.Y)(h.K0,{alt:l?"The base module can't be removed":"Remove module",disabled:l,onClick:i,children:(0,o.Y)(Y.A,{})})}return(0,o.Y)(h.K0,{alt:"Add module",onClick:r,children:(0,o.Y)(w.A,{})})}function C(e){var n=e.module,t=e.isInstalled,i=(0,l.G)(),c=i.addModule,u=i.removeModule,d=(0,r._)((0,a.useState)(!1),2),p=d[0],f=d[1];return(0,a.useEffect)(function(){f(!1)},[t]),(0,o.FD)(y.S,{grow:!0,shrink:!0,row:!0,justify:"space-between",children:[(0,o.FD)(y.S,{row:!0,gap:12,children:[(0,o.Y)(g.EY,{children:n.name}),n.displayVersion?(0,o.Y)(g.EY,{color:"dimmer",children:n.displayVersion}):null]}),(0,o.FD)(y.S,{css:_.moduleActions,row:!0,gap:4,children:[n.description?(0,o.Y)(v.m_,{tooltip:n.description,children:(0,o.Y)(b.A,{})}):null,(0,o.Y)(A,{module:n,isInstalled:t,isModifying:p,onInstallClick:function(){f(!0),c(n.id),(0,s.u4)(s.AZ.NIX_MODULE_ADDED,{moduleId:n.id})},onRemoveClick:function(){f(!0),u(n.id),(0,s.u4)(s.AZ.NIX_MODULE_REMOVED,{moduleId:n.id})}})]})]})}function k(e){var n=e.module,t=e.defaultExpanded,r=e.isInstalled,a=(0,i._)(n.runners).concat((0,i._)(n.packagers),(0,i._)(n.formatters),(0,i._)(n.languageServers));return(0,o.Y)(m.ui,{elevated:!0,css:_.module,children:(0,o.FD)(p.A,{round:!1,defaultExpanded:t,headerContent:(0,o.Y)(C,{module:n,isInstalled:r}),children:[a.length>0?(0,o.Y)(f.a,{css:_.divider}):null,a.map(function(e){return(0,o.FD)(y.S,{p:4,row:!0,align:"center",children:[(0,o.Y)(c.A,{module:e}),(0,o.Y)(g.EY,{css:_.submoduleName,children:e.name}),e.displayVersion?(0,o.Y)(g.EY,{color:"dimmer",children:e.displayVersion}):null]},e.id)})]})})}},54928:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(67313),i=t(21462),o=t(67201),a=t(71424),l=t(38340);function s(){var e=(0,r.useRouter)(),n=(0,a.A)().container,t=(0,l.lY)(),s=(0,l.nZ)(),c=(0,l.hr)();(0,i.useEffect)(function(){e.query.debug&&"undefined"!==e.query.debug&&s(!0)},[s,e.query.debug]),(0,i.useEffect)(function(){if(t)return n.client().onDebugLog(function(e){if("log"===e.type){var t={name:e.log.channel.name,service:null};if("string"==typeof e.log.channel.service)t.service=e.log.channel.service;else if(e.log.channel.service){var r=n.getContext();r&&(t.service=e.log.channel.service(r))}c({id:(0,o.A)(),channel:t,dir:e.log.direction,cmd:e.log.cmd,stringifiedCmd:JSON.stringify(e.log.cmd),timestamp:window.performance.now()})}})},[t,n,c])}},55130:(e,n,t)=>{"use strict";t.d(n,{T:()=>o});var r=t(12584);function i(){var e=(0,r._)(["\n  fragment CreateProjectForkRepl on Repl {\n    id\n    publishedAs\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,t(41114).J1)(i())},55220:(e,n,t)=>{"use strict";t.d(n,{D:()=>d});var r,i=t(83846),o=t(81073),a=t(42793),l=t(27023),s=t(78626),c=t(81650),u=(0,a.AH)([l.wp.focusRing,l.wp.display.flex,l.wp.center,l.wp.borderRadius(4),l.wp.backgroundColor.backgroundRoot,l.wp.color.foregroundDefault,l.wp.cursor.pointer,l.wp.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i._)(r,l.Tp.hover,[l.wp.backgroundColor.backgroundHigher]),(0,i._)(r,":focus",{outline:"none"}),r)]),d=function(e){var n=e.onClick;return(0,o.Y)(s.m_,{tooltip:"Clear",placement:"bottom-start",children:(0,o.Y)("button",{"aria-label":"Clear",onClick:n,css:u,children:(0,o.Y)(c.A,{size:16})})})}},55587:e=>{e.exports={root:"TipRecommendation_root__26Qga",iconCell:"TipRecommendation_iconCell__JBWRf",iconCellExpanded:"TipRecommendation_iconCellExpanded__BBsTM",headerCell:"TipRecommendation_headerCell__CKhRY",bodyCell:"TipRecommendation_bodyCell__X97Fd"}},55919:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M4.055 2.055A2.75 2.75 0 0 1 6 1.25h8a.75.75 0 0 1 .53.22l6 6c.141.14.22.331.22.53v12A2.75 2.75 0 0 1 18 22.75H6A2.75 2.75 0 0 1 3.25 20V4c0-.73.29-1.429.805-1.945ZM6 2.75A1.25 1.25 0 0 0 4.75 4v16A1.25 1.25 0 0 0 6 21.25h12A1.25 1.25 0 0 0 19.25 20V8.75H14a.75.75 0 0 1-.75-.75V2.75H6Zm8.75 1.06 3.44 3.44h-3.44V3.81ZM12 11.25a.75.75 0 0 1 .75.75v2.25H15a.75.75 0 0 1 0 1.5h-2.25V18a.75.75 0 0 1-1.5 0v-2.25H9a.75.75 0 0 1 0-1.5h2.25V12a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},56348:e=>{e.exports={root:"AskUserForAction_root__HwBEl"}},56897:(e,n,t)=>{"use strict";t.d(n,{a8:()=>r}),t(35651);var r=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""}},56965:(e,n,t)=>{"use strict";t.d(n,{DJ:()=>k,O3:()=>Y,Ui:()=>x,Ww:()=>b,_x:()=>C,eQ:()=>_,xd:()=>E});var r=t(17844),i=t(93629),o=t(17459),a=t(12694),l=t(81073),s=t(21462),c=t(98679),u=t(31092),d=t(71424),p=t(79166),f=t(76982),h=t(66147),m=t(18509),g=t(15311),v=t(27023),y=t(85389);function w(e){for(var n=1,t=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var i=t[r];if(i){for(var o=!1,a=0;a<e.cols;a++)if(0!==i.hasContent(a)){o=!0;break}if(o){n=r+1;break}}}return n}var b=8,S=(0,g.v)(["topOffset"]),Y=S.cssVars,_=S.styleTokens,A=(0,m.x)({wrapper:{display:"grid",gridTemplateColumns:"1fr"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:_.topOffset,"& .xterm":[v.wp.py(b),v.wp.pl(b),v.wp.height("100%"),v.wp.overflow("hidden")],"& .xterm-viewport":[v.wp.overflow("hidden")]},terminalForHistoricalOutputWrapper:[v.wp.overflow("hidden")]});function C(e){var n=e.autoFocus,t=e.wrapperResizeRef,a=e.xterm,c=e.bufferHeight,u=e.onInput,d=e.setOnMessage,p=e.onResizeTerminal,f=e.children,h=(0,o._)(e,["autoFocus","wrapperResizeRef","xterm","bufferHeight","onInput","setOnMessage","onResizeTerminal","children"]);return(0,s.useEffect)(function(){n&&a&&a.focus()},[a,n]),(0,s.useEffect)(function(){if(a){var e=a.onData(function(e){u&&u(e)}),n=a.onResize(function(){p&&p(a.getSize())});return function(){e.dispose(),n.dispose()}}},[a,u,p]),(0,s.useEffect)(function(){if(a)return d(function(e){return a.write(e)})},[d,a]),(0,l.Y)(y.S,{innerRef:t,children:(0,l.Y)(y.S,(0,i._)((0,r._)({},h),{css:A.wrapper,style:(0,r._)({height:c},h.style),children:f}))})}function k(e){var n=e.xtermRef,t=e.visibleHeight,a=e.maxHeight,s=(0,o._)(e,["xtermRef","visibleHeight","maxHeight"]);return(0,l.Y)(y.S,(0,i._)((0,r._)({innerRef:n,css:A.terminal},s),{style:(0,i._)((0,r._)({},s.style),{height:t,maxHeight:a})}))}function x(e){var n=e.maxHeight,t=e.openPane,r=e.convertEol,i=(0,d.A)().fs,o=(0,s.useCallback)(function(e){return t({type:(0,p.QY)(e),data:e})},[t]),l=(0,s.useCallback)(function(e,n){return t({type:"webview",data:{ports:{type:"local",path:e,port:n}}})},[t]),h=(0,a._)((0,f.A)({autoFit:!1,size:{rows:10},openFile:o,listFiles:i.listFiles,openWebview:l,openPane:t,convertEol:r}),2),m=h[0],g=h[1],v=(0,s.useMemo)(function(){return null==m?void 0:m._term},[m]),y=(0,a._)((0,s.useState)(function(){var e,n,t=null==v?void 0:v._core;return null!=(n=null==t||null==(e=t._renderService)?void 0:e.dimensions.css.cell.height)?n:16}),2),S=y[0],Y=y[1];(0,s.useEffect)(function(){if(v){var e,n=null==v?void 0:v._core,t=null==n||null==(e=n._renderService)?void 0:e.onDimensionsChange(function(e){Y(e.css.cell.height)});return function(){null==t||t.dispose()}}},[v]);var _=(0,s.useMemo)(function(){return Math.floor((n-2*b)/S)},[n,S]),A=(0,a._)((0,s.useState)("normal"),2),C=A[0],k=A[1],x=(0,a._)((0,s.useState)(1),2),D=x[0],E=x[1],R=(0,a._)((0,s.useState)(1),2),I=R[0],T=R[1],F=(0,a._)((0,s.useState)(!1),2),P=F[0],L=F[1],U=(0,c.A)(D),N=(0,c.A)(I),O=(0,c.A)(C);(0,s.useEffect)(function(){if(v){var e=v.buffer.onBufferChange(function(e){k(e.type),"alternate"===e.type&&(E(_),T(_),L(!1))});return function(){e.dispose()}}},[v,_]);var M=(0,s.useCallback)(function(){if(v)if("alternate"===O.current)E(_);else{var e=w(v),n=e>_;T(e),E(Math.min(e,_)),L(n)}},[v,_,O]),H=(0,u.A)(function(e){var n=e.widthChanged;v&&m&&n&&(m.fit(),M())},{type:"debounce",wait:200});(0,s.useEffect)(function(){var e=function(){if(v&&"alternate"!==O.current){var e=w(v),n=Math.min(e,_);e>N.current&&T(e),n>U.current&&E(n),e>_&&L(!0)}};if(v){var n=[v.onLineFeed(e),v.onCursorMove(e)];return function(){n.forEach(function(e){return e.dispose()})}}},[v,U,O,N,_]),(0,s.useEffect)(function(){if(v&&m){var e=m.getSize();e.rows!==_&&v.resize(e.cols,_),M()}},[v,m,_,M]);var B=(0,s.useMemo)(function(){return Math.ceil((Math.min(D,I)+1)*S+2*b)},[D,I,S]),z=(0,s.useMemo)(function(){return Math.ceil(P?(I+1)*S+2*b:B)},[S,P,B,I]);return(0,s.useEffect)(function(){m&&m.fit()},[m,D,I]),{visibleHeight:B,visibleLines:D,bufferHeight:z,bufferLines:I,bufferMode:C,hasScrollback:P,wrapperResizeRef:H,xterm:m,xtermRef:g}}function D(){}function E(e){var n=e.output,t=e.maxHeight,r=x({maxHeight:t,openPane:e.openPane,convertEol:e.convertEol}),i=r.visibleHeight,o=r.bufferHeight,a=r.wrapperResizeRef,c=r.xterm,u=r.xtermRef,d=(0,s.useRef)(null);(0,s.useEffect)(function(){c&&d.current&&(c.clear(),d.current(n))},[d,c,n]);var p=(0,h.V)();return(0,l.Y)(y.S,{css:A.terminalForHistoricalOutputWrapper,style:{height:i,background:null==p?void 0:p.background},children:(0,l.Y)(C,{onInput:D,xterm:c,wrapperResizeRef:a,bufferHeight:o,setOnMessage:function(e){return d.current=e,D},onResizeTerminal:D,children:(0,l.Y)(k,{xtermRef:u,visibleHeight:i,maxHeight:t})})})}},57331:(e,n,t)=>{"use strict";t.d(n,{y:()=>R,R:()=>D});var r,i,o=t(83846),a=t(12694),l=t(81073),s=t(21462),c=t(79932),u=t(73176),d=t(93188),p=t(98679),f=t(80954),h=t(7814),m=t(74346),g=t(81986),v=t(44074),y=t(22074),w=t(73588),b=t(36937),S=t(18509),Y=t(15311),_=t(27023),A=t(85389),C=(0,Y.v)(["scrollToBottomTransform","opacity","padding","firstChildMargin","scrollHeight","scrollTop","scrollHeight","clientHeight","trackPointerEvents","trackOpacity","trackWidth","trackTranstionDelay","trackHeight","trackPointerEvents","thumbWidth","thumbHeight","thumbTransform","thumbUIWidth"]),k=C.cssVars,x=C.styleTokens,D={height:x.scrollHeight},E=(0,S.x)({root:[_.wp.position.relative,_.wp.flex.growAndShrink(1)],scroll:[{padding:x.padding,overflowY:"auto",overflowX:"hidden","&.scrollbar-hidden::-webkit-scrollbar":{display:"none"},overflow:"scroll",scrollbarWidth:"none"}],content:[{margin:x.firstChildMargin}]});function R(e){var n,t=e.children,r=e.snappiness,i=e.ramp,m=e.scrollerRef,v=e.shouldAutoScrollRef,b=e.scrollCache,S=e.scrollCacheKey,Y=e.padding,_=e.alignToEnd,C=e.autoScrollBehavior,x=e.buttonOffset,D=e.scrollToEndOnInitialRender,R=function(e){var n,t,r,i,o,l,h,m,g,v,w,b,S,Y,_,A,C,k,x,D=e.snappiness,E=e.ramp,R=e.shouldAutoScrollRef,I=e.scrollCache,T=e.scrollCacheKey,F=e.autoScrollBehavior,P=e.scrollToEndOnInitialRender,L=void 0===P||P,U=(0,u.HJ)(!1),N=(0,a._)((0,s.useState)(null),2),O=N[0],M=N[1],H=(0,a._)((0,s.useState)(null),2),B=H[0],z=H[1],W=(0,a._)((0,s.useState)(null),2),G=W[0],V=W[1],Z=(0,p.A)(I),j=(n=(0,u.HJ)({scrollTop:0,scrollHeight:0,clientHeight:0}),t=(0,u.HJ)("idle"),(0,s.useEffect)(function(){var e=function(){r&&clearTimeout(r),i||(i=!0,requestAnimationFrame(function(){if(i=!1,B){var e=B.scrollHeight,o=B.scrollTop,a=B.clientHeight;t.set(n.current.scrollTop>=o?"backwards":"forwards"),n.set({scrollHeight:e,scrollTop:o,clientHeight:a}),r=setTimeout(function(){t.set("idle")},200)}}))};if(B){var r=null,i=!1;return e(),B.addEventListener("scroll",e),function(){B.removeEventListener("scroll",e),r&&clearTimeout(r)}}},[B,n,t]),{measurements:n,scrollDirection:t}),q=j.measurements,K=j.scrollDirection,$=(r=(0,u.HJ)({width:0,height:0}),(0,s.useEffect)(function(){if(B){var e=null;return"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.target===B&&r.set({width:Math.round(l.contentRect.width),height:Math.round(l.contentRect.height)})}}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}})).observe(B),function(){null==e||e.disconnect()}}},[B,r]),{scrollSize:r}).scrollSize,J=(o=(i={snappiness:D,ramp:E,shouldAutoScrollRef:R,autoScrollBehavior:F,anchorEl:O,scrollEl:B,contentEl:G,scrollToEndOnInitialRender:L}).snappiness,l=i.ramp,h=i.shouldAutoScrollRef,m=i.autoScrollBehavior,g=i.anchorEl,v=i.scrollEl,w=i.contentEl,S=void 0===(b=i.scrollToEndOnInitialRender)||b,_=(Y=(0,a._)((0,s.useState)(!1),2))[0],A=Y[1],C=(0,s.useRef)(m),(0,s.useEffect)(function(){if(g&&v&&w){var e=0,n=!S,t=new c.F3(function(t,r){if(e+=t,!h.current)return e=0,A(!1),r();var i=v.scrollTop,a=Math.max(Math.min(g.getBoundingClientRect().top-v.getBoundingClientRect().top+i,v.scrollHeight-v.clientHeight),0);if("instant"===C.current||!n)return n=!0,e=0,v.scrollTop=a,A(!1),r();var s=function(e,n,t,r,i,o){var a=n-e;if(1>=Math.abs(a))return n;var l=1;t<o&&(l=t/o);var s=1-Math.exp(-i*l*r),c=(1-s)*e+s*n;return .5>Math.abs(c-e)?e+.5*Math.sign(a):c}(i,a,e,t,o,l);if(v.scrollTop=s,s===a)return e=0,A(!1),r();A(!0)}),r=new ResizeObserver(function(){h.current&&t.start()});return r.observe(g),r.observe(v),r.observe(w),h.current&&!S&&t.start(),function(){t.stop(),r.disconnect(),A(!1)}}},[o,l,h,g,v,w,S]),{autoScrolling:_}).autoScrolling;(0,s.useEffect)(function(){if(O&&B)return J?void U.set(!1):(0,f.l)(O,function(){return U.set(!1),function(){U.set(!0)}},{root:B,rootMargin:"100px"})},[U,J,O,B]),(0,s.useEffect)(function(){if(O&&B){var e=Z.current,n=e.get(T);return L&&(n?B.scrollTo(0,n):(0,y.A)(O,{behavior:"instant"})),function(){e.set(T,B.scrollTop)}}},[O,B,Z,T,L]);var Q=(k=(0,u.HJ)(null),x=(0,s.useMemo)(function(){return new d.V_(function(e){return k.subscribe(function(n){if(n){var t=!1,r=null,i=function(){var t=n.scrollHeight-(n.scrollTop+n.clientHeight);t!==r&&(r=t,e.next(t))},o=function(){t||(t=!0,requestAnimationFrame(function(){t=!1,i()}))};return i(),n.addEventListener("scroll",o,{passive:!0}),function(){return n.removeEventListener("scroll",o)}}})})},[k]),{setElement:(0,s.useCallback)(function(e){return k.set(e)},[k]),distanceFromBottom:x}),X=Q.setElement,ee=Q.distanceFromBottom,en=(0,s.useMemo)(function(){return ee.select(function(e){return e<=4})},[ee]);(0,u.q3)(en,{next:function(e){e&&(R.current=!0)}});var et=(0,u.G9)(en);return(0,s.useEffect)(function(){if(B)return B.addEventListener("wheel",e),B.addEventListener("pointerdown",n),B.addEventListener("pointerup",t),function(){B.removeEventListener("wheel",e),B.removeEventListener("pointerdown",n),B.removeEventListener("pointerup",t)};function e(e){if(e.deltaY<0){R.current=!1;return}}function n(){R.current=!1}function t(){et.current&&(R.current=!0)}},[B,R,et]),{showButton:U,anchorRef:M,scrollRef:(0,s.useCallback)(function(e){X(e),z(e)},[X]),scrollEl:B,contentRef:V,scrollToLatest:function(){O&&(0,y.A)(O,{behavior:"smooth"})},scrollSize:$,measurements:q,scrollDirection:K,autoScrolling:J}}({snappiness:void 0===r?16:r,ramp:void 0===i?1:i,shouldAutoScrollRef:v,scrollCache:b,scrollCacheKey:S,autoScrollBehavior:void 0===C?"instant":C,scrollToEndOnInitialRender:void 0===D||D}),I=R.showButton,F=R.anchorRef,P=R.scrollRef,L=R.contentRef,U=R.scrollToLatest,N=R.scrollSize,O=R.measurements,M=R.scrollEl,H=R.scrollDirection,B=(0,s.useRef)(null);(0,g.d)(B,N,function(e){return(0,o._)({},k.scrollHeight,e.height+"px")});var z="0";_&&(z="auto 0 0 0");var W=(0,h.S)([P,m],{breadcrumb:"client/components/AutoScroller.tsx:732"});return(0,l.FD)(A.S,{innerRef:B,css:E.root,style:(n={},(0,o._)(n,k.padding,null!=Y?Y:"0"),(0,o._)(n,k.firstChildMargin,z),n),children:[(0,l.FD)(A.S,{css:E.scroll,grow:!0,shrink:!0,innerRef:W,className:"scrollbar-hidden",children:[(0,l.Y)(A.S,{css:E.content,grow:!0,innerRef:L,children:t}),(0,l.Y)(A.S,{innerRef:F}),M?(0,l.Y)(T,{shouldAutoScrollRef:v,scrollDirection:H,scrollEl:M,measurements:O}):null]}),(0,l.Y)(w._,{bottomOffset:void 0===x?0:x,show:I,onClick:U})]})}var I=(0,S.x)({root:[(i={position:"absolute",width:x.trackWidth,height:x.trackHeight,opacity:x.trackOpacity,right:0,top:0,transition:"opacity 300ms",transitionDelay:x.trackTranstionDelay},(0,o._)(i,k.trackTranstionDelay,"600ms"),(0,o._)(i,k.thumbUIWidth,"40%"),(0,o._)(i,"pointerEvents",x.trackPointerEvents),(0,o._)(i,"&:hover, &:active",(r={},(0,o._)(r,k.trackTranstionDelay,"0ms"),(0,o._)(r,k.trackOpacity,"1 !important"),(0,o._)(r,k.trackPointerEvents,"auto !important"),(0,o._)(r,k.thumbUIWidth,"70%"),r)),i)],thumb:[_.wp.position.absolute,_.wp.py(4),_.wp.px(2),_.wp.align.end,{top:0,left:0,height:x.thumbHeight,transform:x.thumbTransform,width:x.thumbWidth,opacity:.5,"&:active":{opacity:.8}}],thumbUI:[{backgroundColor:b.LU.foregroundDimmest,transition:"width 200ms",width:x.thumbUIWidth},_.wp.height("100%"),_.wp.borderRadius(8)]});function T(e){var n=e.measurements,t=e.scrollDirection,r=e.scrollEl,i=e.shouldAutoScrollRef,a=(0,s.useRef)(null),c=(0,s.useRef)(!1),u=(0,s.useRef)(null),d=(0,s.useRef)(null),p=(0,s.useCallback)(function(){u.current&&clearTimeout(u.current),d.current&&clearTimeout(d.current)},[]),f=(0,s.useCallback)(function(){p(),c.current||(u.current=setTimeout(function(){(0,v.U)(a,(0,o._)({},k.trackOpacity,"0"))},600),d.current=setTimeout(function(){(0,v.U)(a,(0,o._)({},k.trackPointerEvents,"none"))},1200))},[p]);(0,s.useEffect)(function(){var e=function(e){var n;if("idle"===e)return void f();p(),(0,v.U)(a,(n={},(0,o._)(n,k.trackOpacity,"1"),(0,o._)(n,k.trackPointerEvents,"auto"),n))};e(t.current);var n=t.subscribe(e);return function(){n(),p()}},[t,f,p]),(0,g.d)(a,n,function(e){var n,t=e.clientHeight,r=e.clientHeight/e.scrollHeight*t,i=e.scrollHeight-e.clientHeight,a=i>0?e.scrollTop/i*(t-r):0,l=e.clientHeight>=e.scrollHeight?0:16;return n={},(0,o._)(n,k.trackWidth,l+"px"),(0,o._)(n,k.trackHeight,t+"px"),(0,o._)(n,k.thumbWidth,l+"px"),(0,o._)(n,k.thumbHeight,r+"px"),(0,o._)(n,k.thumbTransform,"translate(0, ".concat(a,"px)")),n});var h=(0,s.useCallback)(function(e){var t=0;i.current=!1;var o=!1;(0,m.j)(e,{start:function(){t=r.scrollTop},move:function(e){var i=e.delta;o||(o=!0,requestAnimationFrame(function(){o=!1;var e=n.current,a=e.clientHeight,l=e.scrollHeight,s=i.y/a;r.scrollTop=t+l*s}))}})},[r,n,i]),y=(0,s.useRef)(!1),w=(0,s.useCallback)(function(e){if(e.target===e.currentTarget){var t=e.currentTarget.getBoundingClientRect(),i=(e.clientY-t.y)/t.height;r.scrollTop=n.current.scrollHeight*i}},[r,n]),b=(0,s.useCallback)(function(e){e.deltaY<0&&(i.current=!1),y.current||(y.current=!0,requestAnimationFrame(function(){y.current=!1,r.scrollTop=r.scrollTop+e.deltaY}))},[r,i]);return(0,l.Y)(A.S,{innerRef:a,css:I.root,onMouseEnter:function(){c.current=!0,p()},onMouseLeave:function(){c.current=!1,f()},onWheel:b,onClick:w,children:(0,l.Y)(A.S,{css:I.thumb,onPointerDown:h,children:(0,l.Y)(A.S,{css:I.thumbUI})})})}},57356:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.24 3.25h9.52a2.751 2.751 0 0 1 2.462 1.526l3.449 6.888a.75.75 0 0 1 .079.336v6A2.75 2.75 0 0 1 20 20.75H4A2.75 2.75 0 0 1 1.25 18v-6a.75.75 0 0 1 .08-.336l3.448-6.888A2.75 2.75 0 0 1 7.24 3.25Zm0 1.5a1.25 1.25 0 0 0-1.118.694l-.001.002-2.907 5.804H8a.75.75 0 0 1 .624.334l1.777 2.666H13.6l1.777-2.666A.75.75 0 0 1 16 11.25h4.786l-2.907-5.804v-.002a1.25 1.25 0 0 0-1.119-.694m4.49 8h-4.849l-1.777 2.666a.75.75 0 0 1-.624.334h-4a.75.75 0 0 1-.624-.334L7.599 12.75H2.75V18A1.25 1.25 0 0 0 4 19.25h16A1.25 1.25 0 0 0 21.25 18v-5.25Zm-4.49-8H7.24h9.52Z",clipRule:"evenodd"})}))}},57466:e=>{e.exports={root:"SecretsRequested_root__3jXbJ",requestedSecretsList:"SecretsRequested_requestedSecretsList__NvRqA",requestedSecretsListItem:"SecretsRequested_requestedSecretsListItem__bL0vb",seeAllButton:"SecretsRequested_seeAllButton__cqzLa"}},57693:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M23.377 1.634a.75.75 0 1 0-.955-1.156L.578 18.522a.75.75 0 0 0 .956 1.157L23.377 1.634ZM4 2.25h13.921l-1.816 1.5H4c-.69 0-1.25.56-1.25 1.25v9.783L1.4 15.898A2.746 2.746 0 0 1 1.25 15V5A2.75 2.75 0 0 1 4 2.25Zm16 14H8.04l-1.816 1.5h5.026v2.5H8a.75.75 0 0 0 0 1.5h8a.75.75 0 0 0 0-1.5h-3.25v-2.5H20A2.75 2.75 0 0 0 22.75 15V5c0-.28-.042-.55-.12-.804l-1.38 1.14V15c0 .69-.56 1.25-1.25 1.25Z",clipRule:"evenodd"})}))}},57762:(e,n,t)=>{"use strict";t.d(n,{$1:()=>l,jy:()=>o,mV:()=>a});var r=t(42793),i=t(36937),o=(0,r.AH)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.AH)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.LU.backgroundDefault}),l=(0,r.AH)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},57847:(e,n,t)=>{"use strict";t.d(n,{e:()=>d,q:()=>p});var r=t(12694),i=t(21462),o=t(8950),a=t(67917),l=t(93188),s=t(73176),c=new Set(["planProgressData","agentPlanStepBegin","acknowledgeUserMessage","workflowsGetOutputToolData","presentResultsToolData","deployConfigData"]),u=new Set(["generate_plan","modify_step","verification","scroll_file","open_file"]);function d(){var e=(0,a.NC)(),n=(0,s.J2)(e.sessions.agent.current),t=null==n?void 0:n.agent.state,c=(0,i.useMemo)(function(){var e;return null!=(e=null==n?void 0:n.reduce(p,100))?e:null},[n]);return(0,i.useMemo)(function(){return t&&c?l.cP.combine(t,c).map(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];return((null==t?void 0:t.state)===o.g32.AGENT_STATE_PAUSED||(null==t?void 0:t.state)===o.g32.AGENT_STATE_UNKNOWN)&&i}):null},[t,c])}var p={direction:"reverse",state:{value:!1},map:function(e){return e.value},reducer:function(e,n){if(e.sender.type===o.utd.USER||e.sender.type!==o.utd.AI)return n.value=!1,!1;var t=e.contents.contents;switch(null==t?void 0:t.$kind){case"rapidBuildConcluded":return;case"agentPlanEventContents":n.value=t.agentPlanEventContents.requiresApproval;break;case"agentAskUserForActionRequest":n.value=!0;break;case"agentTimelineEventContents":var r=t.agentTimelineEventContents.toolData;if(r&&c.has(r.$kind))return;var i=t.agentTimelineEventContents.toolName;if(u.has(i))return;if((null==r?void 0:r.$kind)!=="messageData")break;(r.messageData.agentAction.optionType||["user_response","propose_new_plan"].includes(i))&&(n.value=!0);break;default:n.value=!1}return!1}}},57864:e=>{e.exports={button:"ToolUse_button__zg4Lf",label:"ToolUse_label__3erZA"}},57881:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(81073),i=t(67313),o=t(21462),a=t(23186),l=t(21762),s=t(96050),c=t(32332),u=t(97298);function d(e,n,t){return!!e&&("ReplRedirect"===e.__typename||"ReplSubscriptionExpired"===e.__typename||!e.authorizations.editFileContents.isAuthorized||!e.org&&!e.authorizations.connectToWorkspace.isAuthorized||!(0,s.Rq)(n.query.skipNixMigration,"boolean")&&(0,a.A)(e,t))}function p(e){var n=e.replResponse,t=e.replUrl,a=e.children,s=(0,i.useRouter)(),p=(0,l._P)({controlName:"flag-migrate-html"});if((0,o.useEffect)(function(){if(d(n,s,p)){if("ReplSubscriptionExpired"===n.__typename){var e=n.replId,r=n.isOwner,i=t.split("/")[1].slice(1),o=s.asPath.indexOf("#"),a=o<0?s.asPath:s.asPath.slice(0,o);s.replace({pathname:"/expiredPrivateRepl",query:{isOwner:r,ownerUsername:i,replId:e}},a);return}if("ReplRedirect"===n.__typename){window.location.href=n.replUrl;return}if("Repl"===n.__typename&&!n.org&&!n.authorizations.connectToWorkspace.isAuthorized){var l=n.isOwner,c=n.id,f=n.url,h=s.asPath.indexOf("#"),m=h<0?s.asPath:s.asPath.slice(0,h);s.replace({pathname:"/replMinutesLimit",query:{isOwner:l,replId:c,replUrl:f}},m);return}if(!n.authorizations.editFileContents.isAuthorized){var g=(0,u.z9)(n),v=g.href,y=g.as;s.replace(v,y);return}window.location.reload()}},[n,t,s,p]),d(n,s,p)){var f="";return"ReplRedirect"===n.__typename?f="Repl moved, redirecting":"ReplSubscriptionExpired"===n.__typename?f="Subscription expired, redirecting":n.org||n.authorizations.connectToWorkspace.isAuthorized?n.authorizations.editFileContents.isAuthorized&&(f="Your Repl requires an upgrade, please wait"):f="Repl minutes exceeded, redirecting",(0,r.Y)(c.A,{reason:f})}return(0,r.Y)(r.FK,{children:a})}},58145:(e,n,t)=>{"use strict";t.d(n,{G:()=>x,Y:()=>D});var r=t(29935),i=t(12694),o=t(82643),a=t(81073),l=t(90629),s=t(58219),c=t(59255),u=t(61191),d=t(33231),p=t(36937),f=t(18509),h=t(27023),m=t(43813),g=t(4616),v=t(85389),y=t(27301),w=t(68785),b=t(47820),S=t(71872),Y=(0,f.x)({singleLine:[{whiteSpace:"nowrap",fontFamily:p.LU.fontFamilyCode},h.wp.truncate,h.wp.color.foregroundDimmest]});function _(e){var n=e.path,t=e.line;return(0,a.FD)(v.S,{grow:!0,shrink:!0,p:8,gap:4,align:"start",children:[(0,a.FD)(v.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(m.A,{path:n,size:12}),(0,a.FD)(g.EY,{variant:"small",color:"dimmest",multiline:!1,children:[n.replace(/^\.\//,""),":",t.lineNumber]})]}),(0,a.Y)(v.S,{css:Y.singleLine,children:(0,a.Y)(w.eK,{source:t.content,matches:t.matches})})]})}function A(){return(0,a.FD)(v.S,{px:8,row:!0,gap:8,align:"center",children:[(0,a.Y)(S.A,{}),(0,a.Y)(g.EY,{color:"dimmest",multiline:!1,children:"Something went wrong searching your App's contents. Please try again."})]})}function C(){return(0,a.FD)(v.S,{row:!0,gap:8,p:8,align:"center",children:[(0,a.Y)(S.A,{}),(0,a.Y)(g.EY,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function k(){return(0,a.Y)(v.S,{row:!0,gap:8,p:8,align:"center",children:(0,a.Y)(g.EY,{color:"dimmest",multiline:!1,children:"Nothing came up searching your App's content."})})}var x=(0,u.FM)({cmdOrCtrl:!0,shift:!0,key:"f"});function D(e){var n,t,u=(0,d.v)({container:e.container});return(0,c.gu)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.Y)(b.A,{}),keyboardShortcut:e.keyboardShortcut?x:void 0},{match:(0,c.u4)({defaultScore:y.q.searchFileContents}),commands:(n=(0,r._)(function(n){var r,c,d,p,f,h,g,w,b,Y,x,D;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(!n.searchQuery||!n.active&&e.activeOnly)return[2,[]];return t=r=Math.random(),[4,u({query:n.searchQuery})];case 1:if(d=(c=o.sent()).results,p=c.error,f=c.isPartialResult,r!==t)return[2,[]];if(null!==p){if(!n.active)return[2,[]];return l.Cp(Error("Search file contents returned an error"),{extra:{message:p}}),[2,[{data:{type:"error",label:"error",icon:(0,a.Y)(S.A,{})},match:function(){return{score:1,render:{content:(0,a.Y)(A,{})}}}}]]}h=[],g=!0,w=!1,b=void 0;try{for(Y=function(){var t=(0,i._)(D.value,2),r=t[0];t[1].forEach(function(t){var i=t.matches[0].column;h.push({match:function(){var e=(0,s.w2)(n.searchQuery,t.content,{filterLowMatchScores:!0});return{score:Math.floor(((null==e?void 0:e.score)||1)*y.B.fileContentsSearch),render:{height:60,content:(0,a.Y)(_,{path:r,line:t})}}},data:{type:"action",label:r,icon:(0,a.Y)(m.A,{path:r}),key:[r,t.lineNumber,i].join(":"),run:function(){e.openFile({path:r,line:t.lineNumber,col:i})}}})})},x=Object.entries(d)[Symbol.iterator]();!(g=(D=x.next()).done);g=!0)Y()}catch(e){w=!0,b=e}finally{try{g||null==x.return||x.return()}finally{if(w)throw b}}if(0===h.length&&n.active)return[2,[{data:{type:"output",label:"",icon:(0,a.Y)(v.S,{})},match:function(){return{score:1,render:{content:(0,a.Y)(k,{})}}}}]];if(n.active)if(0===h.length)return[2,[{data:{type:"output",label:"",icon:(0,a.Y)(v.S,{})},match:function(){return{score:1,render:{content:(0,a.Y)(k,{})}}}}]];else f&&h.push({data:{type:"error",label:"error",icon:(0,a.Y)(S.A,{})},match:function(){return{score:1/0,render:{content:(0,a.Y)(C,{})}}}});return[2,h]}})}),function(e){return n.apply(this,arguments)})})}},58231:(e,n,t)=>{"use strict";t.d(n,{cL:()=>v,dL:()=>m,mb:()=>g});var r=t(12584),i=t(41114),o=t(22781),a=t(78638),l=t(71791),s=t(96597),c=t(15333),u=t(94317),d=t(39264);function p(){var e=(0,r._)(['\n  fragment ReplEnvironmentDesktopCurrentUser on CurrentUser {\n    id\n    image\n    email\n    isAdmin: hasRole(role: ADMIN)\n    ...CrosisContextCurrentUser\n    workspacePreferences\n    ...ReplEnvironmentHeaderLeftCurrentUser\n    ...ReplEnvironmentTourCurrentUser\n    ...LayoutHeaderAvatarDropdownCurrentUser\n    canMigrateRepls: gate(feature: "migrate2nix-killswitch")\n  }\n  ',"\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,r._)(["\n  fragment ReplAiAuthorizations on ReplAuthorizations {\n    useBasicChat: useAiChat(model: basic) {\n      isAuthorized\n      code\n      message\n    }\n    useAdvancedChat: useAiChat(model: advanced) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,r._)(["\n  fragment ReplEnvironmentDesktopRepl on Repl {\n    id\n    title\n    layoutState\n    description\n    multiplayers {\n      id\n    }\n    origin {\n      id\n    }\n    config {\n      isVnc\n      isServer\n      isExtension\n      isAgentRepl\n      isInPlanningPhase\n      figmaUrl\n      ...ReplAgentSettingsReplConfig\n    }\n    lesson {\n      id\n    }\n    rootOriginReplUrl\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n    ...PageTitleRepl\n    authorizations {\n      ...ReplAiAuthorizations\n    }\n    ...ConvertedToProjectModalRepl\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}var m=(0,i.J1)(p(),a.N,u.n,d.f,o.yL),g=(0,i.J1)(f()),v=(0,i.J1)(h(),l.xR,a.c,u.c,s.b,g,c.LM)},58565:(e,n,t)=>{"use strict";t.d(n,{M:()=>c,v:()=>s});var r=t(81073),i=t(79166),o=t(4616),a=t(85389),l=t(71872),s="Unsupported",c={Content:function(){return(0,r.Y)(a.S,{style:{padding:32},children:(0,r.Y)(o.EY,{variant:"text",multiline:!1,children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.Y)(l.A,{})},getTitle:function(){return s},category:i.bY.Other,decode:function(){return{type:"commands",data:{autoFocus:!1}}}}},58646:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M.47.47a.75.75 0 0 1 1.06 0L6.64 5.578a.742.742 0 0 1 .023.024l3.96 3.96c.056.042.105.09.147.146L23.53 22.47a.75.75 0 1 1-1.06 1.06l-6.72-6.72a.75.75 0 0 1-.704-.089 5.25 5.25 0 0 0-6.082 0 .75.75 0 0 1-.868-1.222 6.75 6.75 0 0 1 5.224-1.118l-3.408-3.408a10.19 10.19 0 0 0-4.43 2.152.75.75 0 1 1-.963-1.15 11.69 11.69 0 0 1 4.16-2.235L5.944 7.004a15.16 15.16 0 0 0-4.027 2.558.75.75 0 1 1-.994-1.124 16.66 16.66 0 0 1 3.888-2.567L.47 1.531A.75.75 0 0 1 .47.47Zm16.34 6.058a15.25 15.25 0 0 0-6.04-.73.75.75 0 0 1-.12-1.496 16.75 16.75 0 0 1 12.426 4.136.75.75 0 0 1-.992 1.124 15.25 15.25 0 0 0-5.274-3.034Zm-.764 4.203a.75.75 0 0 1 1.003-.345 11.69 11.69 0 0 1 2.436 1.592.75.75 0 0 1-.97 1.144 10.191 10.191 0 0 0-2.124-1.388.75.75 0 0 1-.345-1.003ZM11.25 20a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},58864:(e,n,t)=>{"use strict";t.d(n,{u:()=>m});var r=t(83846),i=t(81073),o=t(51349),a=t(36937),l=t(18509),s=t(15311),c=t(27023),u=t(85389),d=(0,s.v)(["fontSize"]),p=d.cssVars,f=d.styleTokens,h=(0,l.x)({button:[c.wp.reset.button,c.wp.flex.row,c.wp.align.center,c.wp.cursor.pointer,c.wp.hover({opacity:1}),{opacity:.6,fontFamily:a.LU.fontFamilyDefault,"*":{fontSize:f.fontSize,borderColor:a.LU.foregroundDimmest,color:a.LU.foregroundDimmest},":hover *":{borderColor:a.LU.foregroundDefault,color:a.LU.foregroundDefault}}],keyCombo:[{marginLeft:"calc(".concat(f.fontSize," * 0.3)")}]});function m(e){return(0,i.FD)(u.S,{className:e.className,tag:"button",css:h.button,style:(0,r._)({},p.fontSize,e.fontSize+"px"),onClick:e.onClick,children:[(0,i.Y)(u.S,{children:e.text}),e.keyCombo?(0,i.Y)(u.S,{css:h.keyCombo,justify:"center",children:(0,i.Y)(o._y,{fontSize:.8*e.fontSize,keyCombo:e.keyCombo})}):null]})}},59060:(e,n,t)=>{"use strict";t.d(n,{SS:()=>v});var r=t(17844),i=t(93629),o=t(81073),a=t(21462),l=t(39695),s=t(21762),c=t(36937),u=t(85051),d=t(27023),p=t(41358),f=t(4616),h=t(85389),m=t(3480),g=t(63837),v={AddFile:{type:"AddFile",text:"Add file"},AddFolder:{type:"AddFolder",text:"Add folder"},UploadFile:{type:"UploadFile",text:"Upload files"},UploadFolder:{type:"UploadFolder",text:"Upload folder"},DownloadZip:{type:"DownloadZip",text:"Download as zip"},Duplicate:{type:"Duplicate",text:"Duplicate file"},ShowHiddenFiles:{type:"ShowHiddenFiles",text:"Show hidden files"},HideHiddenFiles:{type:"HideHiddenFiles",text:"Hide hidden files"},OpenTab:{type:"OpenTab",text:"Open tab"},OpenPane:{type:"OpenPane",text:"Open pane"},CopyFilePath:{type:"CopyFilePath",text:"Copy file path"},CopyFolderPath:{type:"CopyFolderPath",text:"Copy folder path"},CopyLink:{type:"CopyLink",text:"Copy link"},OpenShellHere:{type:"OpenShellHere",text:"Open shell here"},Rename:{type:"Rename",text:"Rename"},Download:{type:"Download",text:"Download"},Delete:{type:"Delete",text:"Delete"}},y={self:[d.wp.position.relative,d.wp.width(20),d.wp.height("100%"),d.wp.justify.center,{"& span":{height:"100%"}}],self2:[d.wp.position.relative,d.wp.width(16),d.wp.height("100%"),d.wp.justify.center,d.wp.pr(1)],button:[d.wp.display.flex,d.wp.align.center,d.wp.justify.center,d.wp.py(2),d.wp.top(0),d.wp.width("100%"),d.wp.border({width:0,color:"none"}),d.wp.cursor.pointer,d.wp.color.foregroundDimmest,d.wp.borderRadius(4),u.b.filled,d.wp.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[d.wp.display.flex,d.wp.align.center,d.wp.py(2),d.wp.width("100%"),d.wp.height("100%"),d.wp.cursor.pointer,d.wp.color.foregroundDimmest,d.wp.focusRing,d.wp.borderRadius(4),{backgroundColor:"transparent",":hover":{color:c.LU.foregroundDefault}}],list:[d.wp.flex.column,d.wp.justify.center,d.wp.borderRadius(8),d.wp.zIndex(1),d.wp.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,n){return[d.wp.color.foregroundDefault,d.wp.p(8),d.wp.fontWeight.normal,d.wp.cursor.pointer,{whiteSpace:"nowrap"},n&&[d.wp.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:c.LU.accentNegativeDefault},":hover .option-label":{color:c.LU.white}}]]},optionLabel:function(e){return e?[d.wp.color.accentNegativeStronger]:[]}};function w(e){var n=e.isNegative,t=e.isHighlighted,r=e.children;return(0,o.Y)(h.S,{css:y.option(n,t),children:(0,o.Y)(f.EY,{className:"option-label",css:y.optionLabel(n),multiline:!1,children:r})})}var b=h.D.ul,S=h.D.li,Y=h.D.button,_=h.D.div;(0,a.forwardRef)(function(e,n){var t=e.isActive,u=e.actions,A=e.onAction,C=e.onOpenChange,k=(0,a.useRef)(!1),x=(0,l.WM)({items:u,onSelectedItemChange:function(e){var n=e.selectedItem;n&&(k.current||A(n),P())}}),D=x.isOpen,E=x.getToggleButtonProps,R=x.getMenuProps,I=x.highlightedIndex,T=x.getItemProps,F=x.openMenu,P=x.reset;(0,a.useImperativeHandle)(n,function(){return{open:F}}),(0,a.useEffect)(function(){C&&C(D)},[D,C]);var L=E(),U=(0,s._P)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,o.Y)(h.S,{css:U?y.self2:y.self,children:(0,o.FD)(m.A,{elevated:!0,showArrow:!0,isOpen:D,placement:"right-start",padding:0,onClickOutside:P,children:[(0,o.Y)(p.ui,{background:t?"default":"root",css:[d.wp.height("100%"),{background:t?c.LU.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,o.Y)(Y,(0,i._)((0,r._)({},L),{css:U?y.button2:y.button,size:20,onClick:function(e){e.stopPropagation(),L.onClick(e)},children:(0,o.Y)(g.A,{})}))}),(0,o.Y)(_,(0,i._)((0,r._)({},R({},{suppressRefError:!0})),{children:D?(0,o.Y)(b,{css:y.list,children:u.map(function(e,n){return(0,o.Y)(S,(0,i._)((0,r._)({"data-cy":"filetree-node-action-".concat(e.type)},T({item:e,index:n,onClick:function(n){k.current=!0,setTimeout(function(){k.current=!1}),A(e),n.stopPropagation()}})),{children:(0,o.Y)(w,{isHighlighted:I===n,isNegative:e.type===v.Delete.type,children:(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[(0,o.Y)(f.EY,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)})}):null}))]})})}).displayName="NodeActionsMenu"},59146:(e,n,t)=>{"use strict";t.d(n,{A:()=>y});var r=t(81073),i=t(21462),o=t(49022),a=t(71424),l=t(19807),s=t(81740),c=t(59743),u=t(11769),d=t(4616),p=t(85389),f=t(28174),h=t(41994),m=t(58646);function g(e){var n=e.children,t=e.action;return(0,r.FD)(p.S,{align:"center",children:[(0,r.Y)(d.EY,{children:n}),t?(0,r.Y)(p.S,{row:!0,align:"center",gap:4,children:t}):null]})}function v(e){var n=e.openNetworkingTool,t=(0,s.lO)().isRunning,l=(0,a.A)().ports,d=(0,o.A)(l.portsState),p=(0,i.useMemo)(function(){return null==d?void 0:d.some(function(e){return e.isOpen})},[d]);return t?p?(0,r.Y)(g,{action:(0,r.FD)(r.FK,{children:["Use"," ",(0,r.Y)(u.$n,{onClick:n,size:"small",text:"Networking",iconLeft:(0,r.Y)(h.A,{size:12})})," ","tool to configure them."]}),children:"The app is running, but has no external ports configured."}):(0,r.Y)(g,{children:"The app is running, but there's no webpage to preview right now."}):(0,r.Y)(g,{action:(0,r.FD)(r.FK,{children:[(0,r.Y)(c.d,{})," to see the results of your app."]}),children:"The app is currently not running."})}function y(e){var n=e.openNetworkingTool,t=e.didConnectOnce,i=e.didDisconnect;return!t||i?(0,r.Y)(l.A,{pane:{type:"webview"},icon:(0,r.Y)(m.A,{size:48}),headerText:t?"The workspace is reconnecting…":"The workspace is loading…",bodyText:null}):(0,r.Y)(l.A,{pane:{type:"webview"},icon:(0,r.Y)(f.A,{size:48}),headerText:"Preview your app here",bodyText:(0,r.Y)(v,{openNetworkingTool:n})})}},59369:(e,n,t)=>{"use strict";t.d(n,{Os:()=>a});var r=t(684),i=t(52531),o=t(4067);r.ZU.Object({refs:r.ZU.Array(i.$0),hash:r.ZU.String(),parents:r.ZU.Union([r.ZU.Null(),r.ZU.Array(r.ZU.String())]),grafted:r.ZU.Boolean(),author:o.T,committer:o.T,subject:r.ZU.String(),body:r.ZU.String(),trailers:r.ZU.Record(r.ZU.String(),r.ZU.Union([r.ZU.String(),r.ZU.Undefined()])),notes:r.ZU.Optional(r.ZU.String())});var a=function(e){return e.ADDED="ADDED",e.COPIED="COPIED",e.DELETED="DELETED",e.MODIFIED="MODIFIED",e.RENAMED="RENAMED",e.TYPE_CHANGED="TYPE_CHANGED",e.UNKNOWN="UNKNOWN",e.BROKEN="BROKEN",e}({}),l=r.ZU.Enum(a);r.ZU.Object({path:r.ZU.String(),type:l,originalPath:r.ZU.Optional(r.ZU.String())})},59474:(e,n,t)=>{"use strict";t.d(n,{L:()=>l}),t(81073);var r=t(17341),i=t(67917),o=t(73176),a=t(76969);t(89305),t(4616),t(78626);function l(e){var n=(0,i.NC)(),t=(0,o.Rj)(function(){return e?n.sessions.get(e):null},[n,e]);return(0,o.Rj)(function(){return null==t?void 0:t.reduce(s,"global").result.map(function(e){return e.cents})},[t])}var s={direction:"forward",state:{cents:0},reducer:function(e,n){(0,r.k)(e)&&(n.cents+=a.a7)}}},59512:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(12694),i=t(21462);function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,r._)((0,i.useState)(e),2),t=n[0],o=n[1];return[t,(0,i.useCallback)(function(){return o(function(e){return!e})},[])]}},59743:(e,n,t)=>{"use strict";t.d(n,{d:()=>b});var r=t(83846),i=t(81073),o=t(21462),a=t(71983),l=t(17089),s=t(81740),c=t(36937),u=t(18509),d=t(15311),p=t(27023),f=t(4616),h=t(85389),m=t(67382),g=(0,d.v)(["backgroundColor","color","hoverColor","hoverBackgroundColor"]),v=g.cssVars,y=g.styleTokens,w=(0,u.x)({wrapper:[p.wp.display.inlineFlex,{backgroundColor:y.backgroundColor,color:y.color,"&:hover":{color:y.hoverColor,backgroundColor:y.hoverBackgroundColor}},p.wp.align.center,p.wp.borderRadius(),p.wp.py(2),p.wp.px(6),p.wp.cursor.pointer]});function b(e){var n,t=e.trackSource,u=void 0===t?"unknown":t,d=(0,s.lO)(),p=d.isOffline,g=d.isWorkflowsLoading,y=d.isDisabled,b=(0,s.sT)(),S=(0,o.useMemo)(function(){return p||g},[p,g]);return(0,i.FD)(h.S,{tag:"button",onClick:function(){(0,l.u4)(a.AZ.WORKFLOW_RAN,{source:u,runner:"workflows"}),b()},css:w.wrapper,row:!0,gap:6,disabled:S||y,style:(n={},(0,r._)(n,v.backgroundColor,S?c.LU.backgroundHighest:c.LU.accentPositiveDimmer),(0,r._)(n,v.color,S?c.LU.foregroundDimmer:c.LU.accentPositiveStrongest),(0,r._)(n,v.hoverColor,S?c.LU.foregroundDefault:c.LU.white),(0,r._)(n,v.hoverBackgroundColor,S?c.LU.greyDimmest:c.LU.accentPositiveDefault),n),children:[(0,i.Y)(m.A,{size:12}),(0,i.Y)(f.EY,{children:"Run"})]})}},60070:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(21462),i=t(71424);function o(e){var n=(0,i.A)().container,t=(0,r.useRef)(null);(0,r.useEffect)(function(){return n.onConnectionStateChanged(function(n){n!==t.current&&(t.current=n,e(n))})},[n,e])}},60093:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(12694),i=t(86105),o=t(21462),a=t(46011),l=t(17844),s=t(93629),c=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=(0,r._)((0,o.useState)(null),2),a=i[0],u=i[1],d=(0,o.useCallback)(u,[u]),p=(0,o.useRef)(n);(0,o.useEffect)(function(){p.current=n},[n]);var f=(0,r._)((0,o.useState)(null),2),h=f[0],m=f[1];return(0,o.useEffect)(function(){if(a){var e=function(){var e=a.value,n=a.selectionStart;if(!n)return void m(null);var t=1===n||c(e[n-2]||""),r=e.length?e[n-1]:null;m(function(i){if(i&&(n<i.index||0===n))return null;if(!r||!i&&!t)return i;var o=p.current.includes(r);return i||o?i?c(r)?null:(0,s._)((0,l._)({},i),{text:e.slice(i.index,n)}):{index:n,text:"",match:r}:i})},n=function(){m(null)};return a.addEventListener("focus",e),a.addEventListener("keyup",e),a.addEventListener("blur",n),function(){m(null),a.removeEventListener("focus",e),a.removeEventListener("keyup",e),a.removeEventListener("blur",n)}}},[a,m]),[h,d]}function d(e){var n=(0,o.useRef)(e);(0,o.useEffect)(function(){n.current=e},[e]);var t=(0,r._)((0,o.useState)(!1),2),l=t[0],s=t[1],c=(0,r._)((0,o.useState)(null),2),d=c[0],p=c[1],f=(0,r._)(u.apply(void 0,(0,i._)(Object.keys(e))),2),h=f[0],m=f[1],g=(0,o.useRef)(h);(0,o.useEffect)(function(){g.current=h},[h]);var v=(0,a.A)(h,100);return(0,o.useEffect)(function(){if(!v)return void p(null);var e=v.match,t=v.text,r=n.current[e]?n.current[e]:null;if(!r)return void p(null);var i=!1;return s(!0),r(t).then(function(e){i||g.current===v&&(s(!1),p({textTrigger:v,results:e,applySuggestion:function(e){var n=e.targetValue,t=e.suggestionValue,r=n.slice(0,v.index),i=t,o=n.slice(v.index+v.text.length);o&&o.startsWith(" ")||(i+=" ");var a=r+i+o;return{cursorIndex:(r+i).length+(o&&o.startsWith(" ")?1:0),fullValue:a}}}))}),function(){i=!0}},[v,p]),[{isLoading:l,suggestions:d},m]}},60397:(e,n,t)=>{"use strict";t.d(n,{Wu:()=>_,n3:()=>b,qv:()=>Y});var r=t(12694),i=t(86105),o=t(81073),a=t(21462),l=t(48686),s=t(76746),c=t(46668),u=t(81740),d=t(36937),p=t(18509),f=t(27023),h=t(11769),m=t(49058),g=t(40259),v=t(4616),y=t(85389),w=t(6064);function b(e){var n=e.mode,t=void 0===n?"sequential":n,r=e.onChange,i=e.disabled;return(0,o.FD)(m.e2,{disabled:void 0!==i&&i,name:"mode",onChange:r,row:!0,value:null!=t?t:"sequential",children:[(0,o.Y)(m.$O,{id:"sequential",text:"Sequential",value:"sequential"}),(0,o.Y)(m.$O,{id:"parallel",text:"Parallel",value:"parallel"})]})}var S=(0,p.x)({root:[f.wp.maxHeight(520),f.wp.overflow("auto"),f.wp.backgroundColor.backgroundDefault,f.wp.borderRadius(0,0,4,4),f.wp.border({color:d.LU.backgroundHigher})],connectors:[f.wp.position.relative,f.wp.zIndex(0)],inputRow:[f.wp.position.relative],switchInputs:[f.wp.position.relative,f.wp.align.center,f.wp.justify.spaceBetween],nameWarning:[{color:d.LU.redDefault}],task:[f.wp.position.relative,f.wp.zIndex(1)],tasks:[f.wp.position.relative],taskItem:[f.wp.position.relative]});function Y(e){var n,t=e.workflow,r=e.readOnlyMode,i=e.addTask,a=e.reorderTask,l=e.taskIds,u=e.workflowIndex,d=e.simplified;return(0,o.FD)(y.S,{children:[t.tasks.length>0?(0,o.Y)(s.i,{mode:null!=(n=t.mode)?n:"sequential"}):null,(0,o.Y)(y.S,{css:S.tasks,pl:12,pb:8,gap:8,children:t.tasks.map(function(e,n,i){var p,f,h,m;return(0,o.FD)(y.S,{css:S.taskItem,children:[(0,o.Y)(s.L,{dragAble:!r,css:S.connectors,mode:t.mode,hideBottom:n>=i.length-1}),void 0!==u?(0,o.Y)(c.YZ,{css:S.task,disabled:r,format:null!=(h=null==(p=t.metadata)?void 0:p.generated)&&h,lastTask:1===i.length,onReorder:a,workflowIndex:u,taskIndex:n,simplified:d}):(0,o.Y)(c.S2,{css:S.task,disabled:r,format:null!=(m=null==(f=t.metadata)?void 0:f.generated)&&m,lastTask:1===i.length,onReorder:a,taskIndex:n,initialConfig:t.tasks[n],onChange:function(){},onRemove:function(){},simplified:d})]},l?l[n]:n)})}),r?null:(0,o.Y)(h.$n,{iconLeft:(0,o.Y)(w.A,{}),text:"Add task",onClick:i})]})}function _(e){var n,t=e.index,s=e.readOnly,c=(0,u.wS)(),d=(0,u.j3)(t),p=(0,u.XO)(),f=(0,u.Ss)(),h=(0,u.af)(),m=(0,u.IW)(),w=void 0!==s&&s||(null==d||null==(n=d.metadata)?void 0:n.generated)||(null==d?void 0:d.name)==="Project"&&"agent"===d.author,_=(0,a.useMemo)(function(){return p.filter(function(e){return e===(null==d?void 0:d.name)}).length>1},[d,p]),A=(0,a.useMemo)(function(){var e;return Array.from({length:null!=(e=null==d?void 0:d.tasks.length)?e:0},function(e){return(0,l.Ak)()})},[null==d?void 0:d.tasks.length]);return d?(0,o.FD)(y.S,{css:S.root,p:8,gap:8,children:[(0,o.Y)(v.EY,{variant:"small",color:"dimmest",children:"Workflow"}),_?(0,o.FD)(v.EY,{variant:"small",css:S.nameWarning,children:[d.name," already exists"]}):null,(0,o.Y)(y.S,{pb:4,row:!0,gap:8,align:"center",children:(0,o.Y)(g.pd,{onBlur:c,value:d.name,placeholder:"Name of your workflow",onChange:function(e){f(t,function(n){n.name=e.currentTarget.value})},disabled:w})}),(0,o.Y)(y.S,{css:S.switchInputs,row:!0,gap:4,children:(0,o.FD)(y.S,{children:[(0,o.Y)(v.EY,{variant:"small",color:"dimmest",children:"Mode"}),(0,o.Y)(b,{mode:d.mode,onChange:function(e){f(t,function(n){n.mode=e}),c()},disabled:w})]})}),(0,o.FD)(y.S,{css:S.inputRow,gap:4,children:[(0,o.Y)(v.EY,{variant:"small",color:"dimmest",children:"Tasks"}),(0,o.Y)(Y,{workflow:d,readOnlyMode:w,addTask:function(){return m(t)},reorderTask:function(e,n){var o=null==d?void 0:d.tasks;if(o&&e!==n){var a=(0,i._)(o),l=(0,r._)(a.splice(e,1),1)[0];a.splice(n,0,l);var s=(0,r._)(A.splice(e,1),1)[0];A.splice(n,0,s),h({workflowIndex:t},a,{persist:!0}),c()}},taskIds:A,workflowIndex:t})]})]}):(0,o.Y)(v.EY,{children:"Workflow not found"})}},60611:(e,n,t)=>{"use strict";t.d(n,{$:()=>a,C:()=>o});var r=t(684),i=t(82637),o=function(e){return e.DASHBOARD="DASHBOARD",e.BRANCH="BRANCH",e.CURRENT_BRANCH="CURRENT_BRANCH",e.SETTINGS="SETTINGS",e.COMMIT="COMMIT",e}({}),a=r.ZU.Union([r.ZU.Object({type:r.ZU.Literal("DASHBOARD")}),r.ZU.Object({type:r.ZU.Literal("BRANCH"),branch:i.AR}),r.ZU.Object({type:r.ZU.Literal("CURRENT_BRANCH")}),r.ZU.Object({type:r.ZU.Literal("SETTINGS")}),r.ZU.Object({type:r.ZU.Literal("COMMIT"),hash:r.ZU.String()})])},60630:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M15.078 1.242a3.75 3.75 0 0 1 3.648 3.332 4.75 4.75 0 0 1 3.021 4.617 4.75 4.75 0 0 1-.318 1.52 4.752 4.752 0 0 1 .57 5.854c-.33.514-.756.956-1.25 1.307a4.75 4.75 0 0 1-8.75 2.684 4.745 4.745 0 0 1-7.666.459 4.753 4.753 0 0 1-1.082-3.143 4.749 4.749 0 0 1-1.25-1.307 4.751 4.751 0 0 1 .568-5.852A4.751 4.751 0 0 1 3.921 5.38a4.75 4.75 0 0 1 1.353-.807A3.75 3.75 0 0 1 12 2.741a3.754 3.754 0 0 1 3.078-1.499Zm-6.125 1.5A2.253 2.253 0 0 0 6.89 4.211a2.252 2.252 0 0 0-.137.656v.228c.014.362.117.716.298 1.03a.75.75 0 1 1-1.3.749 3.748 3.748 0 0 1-.318-.722 3.25 3.25 0 0 0-1.587 3.63.75.75 0 0 1 .58 1.374c-.17.094-.328.2-.476.32v.001a3.25 3.25 0 0 0 .452 5.353l.185.097c.44.212.923.323 1.412.323A.75.75 0 0 1 6 18.75c-.405 0-.806-.052-1.194-.153a3.258 3.258 0 0 0 2.983 2.642A3.252 3.252 0 0 0 11.25 18v-5.567a5.248 5.248 0 0 1-2 1.276.751.751 0 0 1-.499-1.415 3.751 3.751 0 0 0 2.5-3.324V4.998a2.25 2.25 0 0 0-2.298-2.256Zm6.094 0a2.25 2.25 0 0 0-2.123 1.382 2.253 2.253 0 0 0-.174.874v3.97a3.75 3.75 0 0 0 2.5 3.325.75.75 0 0 1-.499 1.415 5.25 5.25 0 0 1-2-1.276v5.567l.003.167a3.248 3.248 0 0 0 2.15 2.89 3.25 3.25 0 0 0 4.288-2.46c-.387.101-.788.154-1.193.154L18 18v-.75a3.252 3.252 0 0 0 2.991-4.523 3.25 3.25 0 0 0-.941-1.25h-.001a3.2 3.2 0 0 0-.23-.17l-.245-.15-.065-.042a.75.75 0 0 1 .645-1.333 3.253 3.253 0 0 0-1.587-3.63c-.081.25-.186.493-.319.723a.75.75 0 0 1-1.299-.75 2.25 2.25 0 0 0 .298-1.031l.001-.002a2.252 2.252 0 0 0-2.201-2.35Zm2.952 16.008a.75.75 0 0 1 .001-1.5v1.5Z"})}))}},60666:(e,n,t)=>{"use strict";t.d(n,{R1:()=>f,lQ:()=>h,sX:()=>p});var r=t(83846),i=t(17844),o=t(12694),a=t(81073),l=t(21462),s=t(93702),c=t(18509),u=t(27023),d=t(85389),p=u.kL.min(600),f=(0,c.x)({maxWidth:{width:"100%",maxWidth:600,alignSelf:"center"},hiddenOnMobile:[u.wp.display.none,(0,r._)({},p,u.wp.display.flex)],hiddenOnDesktop:[u.wp.display.flex,(0,r._)({},p,u.wp.display.none)]});function h(e){var n,t,r,c,u=e.children,p=e.render,f=e.timeout,h=void 0===f?300:f,m=e.initialHeight,g=(0,l.useRef)(null),v=(0,l.useRef)(null),y=(n=v,r=(t=(0,o._)((0,l.useState)(0),2))[0],c=t[1],(0,l.useEffect)(function(){if(n.current){var e=new ResizeObserver(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value.borderBoxSize[0].blockSize;c(a)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}});return e.observe(n.current),function(){return e.disconnect()}}},[r,n]),r),w=y>0?y:m,b={transition:h+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},S={entering:{opacity:1,height:w},entered:{transitionProperty:"opacity",opacity:1,height:w,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,a.Y)(s.Ay,{nodeRef:g,timeout:h,in:p,children:function(e){return(0,a.Y)(d.S,{innerRef:g,style:(0,i._)({},b,S[e]),children:(0,a.Y)(d.S,{innerRef:v,children:u})})}})}},60690:(e,n,t)=>{"use strict";t.d(n,{Jn:()=>a.Jn,LH:()=>l.LH,SJ:()=>a.SJ,_y:()=>l._y,jM:()=>s});var r=t(81073),i=t(21462),o=t(61191),a=t(88873),l=t(51349);function s(e){var n=(0,a.PY)(e);return(0,r.FD)(a.J_.Provider,{value:n,children:[e.children,(0,r.Y)(c,{})]})}function c(){var e=(0,a.bU)(),n=(0,i.useRef)(null);return(0,i.useEffect)(function(){var t=function(t){var r=(0,o.te)(t);if(r){var i=r;n.current&&(i=(0,o.Y)(n.current,r));var l=e(i);switch(l.kind){case a.VO.NoMatch:n.current=null;break;case a.VO.WaitingForChord:n.current=l.key,t.preventDefault();break;case a.VO.MatchFound:n.current=null;var s=!0,c=!1,u=void 0;try{for(var d,p=l.matches[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value,h=f.run,m=f.bubble,g=void 0===m||m;if(!1!==h()&&(t.preventDefault(),!g))break}}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}}}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}},[e]),null}},60852:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(21462),i=t(96116),o=t.n(i);function a(e){return(0,r.useMemo)(function(){if(!e||e.length>40)return"Unknown License";var n=o()(e,{upgrade:!1});return n||"Unknown License"},[e])}},60943:(e,n,t)=>{"use strict";t.d(n,{Ef:()=>l,O3:()=>o,eQ:()=>a});var r=t(42793),i=(0,t(15311).v)(["fontSize","menuPaddingTop","borderBottomLeftRadius","borderBottomRightRadius","inputBarPadding","inputBarHeight","containerType","iconSize"]),o=i.cssVars,a=i.styleTokens,l=(0,r.AH)({"&& svg":{minWidth:a.iconSize,minHeight:a.iconSize,width:a.iconSize,height:a.iconSize}})},60987:(e,n,t)=>{"use strict";t.d(n,{i:()=>d});var r=t(67313),i=t(17844),o=t(12584),a=t(41114),l=t(86997);function s(){var e=(0,o._)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return s=function(){return e},e}var c={},u=(0,a.J1)(s());function d(){var e,n,t=(e=(0,i._)({},c,void 0),l.I(u,e)).data,o=(0,r.useRouter)();return(null==t||null==(n=t.currentUser)?void 0:n.isAdmin)||!!o.query.debug}},61002:(e,n,t)=>{"use strict";t.d(n,{D:()=>a});var r=t(684),i=t(37299),o=r.ZU.Object({type:r.ZU.Literal("commands"),data:r.ZU.Object({autoFocus:r.ZU.Boolean()})}),a=function(e){return i.T(o,e)}},61284:(e,n,t)=>{"use strict";t.d(n,{E:()=>_});var r=t(29935),i=t(12694),o=t(82643),a=t(81073),l=t(21462),s=t(37872),c=t(17089),u=t(71424),d=t(18509),p=t(27023),f=t(38692),h=t(11769),m=t(85144),g=t(36073),v=t(41358),y=t(4616),w=t(85389),b=t(63456),S=t(71872),Y=(0,d.x)({brokenNixErrorWrapper:[p.wp.maxHeight("300px"),{overflow:"scroll"},p.wp.p(8)],accordionWrapper:[p.wp.borderRadius(4)],inlineButton:[{display:"inline-flex"}]});function _(e){var n=e.isOpen,t=e.setIsOpen,d=e.nixState,p=e.openFile,_=(0,u.A)(),A=_.git,C=_.fs,k=(0,i._)((0,l.useState)(!1),2),x=k[0],D=k[1],E=(0,i._)((0,l.useState)(null),2),R=E[0],I=E[1],T=(0,l.useCallback)((0,r._)(function(){var e,n,r,i,a,l,u;return(0,o.YH)(this,function(o){switch(o.label){case 0:return(0,c.u4)(c.AZ.NIX_IS_BROKEN_RECOVERY,{state:"Started"}),s.vF.info("Started Nix Broken State Recovery"),D(!0),A.forceRefresh(),[4,A.status()];case 1:if((e=o.sent()).error)return D(!1),I("git is not accessible"),(0,c.u4)(c.AZ.NIX_IS_BROKEN_RECOVERY,{state:"Failed",reason:"Git State Error"}),s.vF.error("Nix Broken State Recovery Failed due to Git",{gitStatusError:e.error}),[2];if(n=e.changes.find(function(e){return".replit"===e.path}),r=e.changes.find(function(e){return"replit.nix"===e.path}),!n)return[3,3];return[4,A.stageFiles({add:[".replit"]})];case 2:o.sent(),o.label=3;case 3:if(!r)return[3,5];return[4,A.stageFiles({add:["replit.nix"]})];case 4:o.sent(),o.label=5;case 5:if(!(n||r))return[3,7];return[4,A.commit({message:"Pre-Recovery checkpoint"})];case 6:o.sent(),o.label=7;case 7:return[4,A.log({path:".replit"})];case 8:var d;if((i=o.sent()).error)return D(!1),I("git log is not accessible"),(0,c.u4)(c.AZ.NIX_IS_BROKEN_RECOVERY,{state:"Failed",reason:"Git Log Error"}),s.vF.error("Nix Broken State Recovery Failed due to Git",{gitLogError:i.error}),[2];return a=(d=i.commits)[d.length-1],[4,A.getFileContents({path:".replit",revision:a.hash,convertToBase64:!1})];case 9:if((l=o.sent()).error)return D(!1),I("failed recovering file contents"),(0,c.u4)(c.AZ.NIX_IS_BROKEN_RECOVERY,{state:"Failed",reason:"Git File Contents Error"}),s.vF.error("Nix Broken State Recovery Failed due to Git",{gitFileContentError:l.error}),[2];return[4,C.writeFile(".replit",null!=(u=l.content)?u:"")];case 10:return o.sent(),[4,C.deleteFile("replit.nix")];case 11:return o.sent(),[4,A.stageFiles({add:[".replit"]})];case 12:return o.sent(),[4,A.stageFiles({add:["replit.nix"]})];case 13:return o.sent(),[4,A.commit({message:"Post-Recovery checkpoint"})];case 14:return o.sent(),A.forceRefresh(),D(!1),t(!1),(0,c.u4)(c.AZ.NIX_IS_BROKEN_RECOVERY,{state:"Succeeded"}),s.vF.info("Finished Nix Broken State Recovery"),[2]}})}),[A,C,t]);return(0,a.Y)(m.a,{isOpen:n,onRequestClose:function(){return t(!1)},children:(0,a.FD)(w.S,{gap:16,children:[(0,a.FD)(w.S,{gap:8,children:[(0,a.Y)(y.EY,{variant:"subheadDefault",children:"The nix environment failed to build"}),(0,a.FD)(y.EY,{children:["Check if your"," ",(0,a.Y)(h.$n,{css:Y.inlineButton,variant:"underlined",onClick:function(){p(".replit"),t(!1)},text:".replit"})," ","and"," ",(0,a.Y)(h.$n,{css:Y.inlineButton,variant:"underlined",onClick:function(){p("replit.nix"),t(!1)},text:"replit.nix"})," ","files are configured properly:"]})]}),(0,a.Y)(v.ui,{elevated:!0,css:Y.accordionWrapper,children:(0,a.Y)(f.A,{headerContent:(0,a.Y)(w.S,{p:4,children:"Error Message"}),children:"error"===d.status?(0,a.Y)(w.S,{css:Y.brokenNixErrorWrapper,children:(0,a.Y)(y.EY,{variant:"code",children:d.error})}):null})}),(0,a.Y)(y.EY,{children:"Optionally, we can back up the broken configuration files and recover the original ones:"}),(0,a.Y)(h.$n,{text:"Recover original configuration files",colorway:null!==R?"grey":"warning",onClick:T,isDisabled:x||null!==R,iconLeft:x?(0,a.Y)(b.A,{}):(0,a.Y)(S.A,{})}),R?(0,a.Y)(g.N,{colorway:"warning",text:(0,a.FD)(y.EY,{children:["Recovery failed: ",R]})}):null]})})}},61430:(e,n,t)=>{"use strict";t.d(n,{A:()=>O});var r=t(81073),i=t(35651),o=t(31571),a=t(63599),l=t(17844),s=t(93629),c=t(52153);function u(e){return(0,r.FD)(c.A,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{fill:"#3E474A",fillRule:"evenodd",d:"m19.91 5.492-6.945-4.123a2.62 2.62 0 0 0-2.68 0L3.34 5.492A2.77 2.77 0 0 0 2 7.878v8.245c0 .984.51 1.894 1.34 2.386l6.945 4.122a2.623 2.623 0 0 0 2.68 0l6.945-4.122a2.77 2.77 0 0 0 1.34-2.386V7.878a2.77 2.77 0 0 0-1.34-2.386Z",clipRule:"evenodd"}),(0,r.Y)("path",{fill:"#FEFEFE",d:"m3.583 18.087 6.945 4.122a2.15 2.15 0 0 0 1.097.302c.123 0 .244-.014.365-.035-.367-.111-.606-.494-.605-1.086v-8.097c0-.987.604-1.525 1.424-2.004l6.57-4.058c.606-.354 1.125-.22 1.355.271a2.272 2.272 0 0 0-1.067-1.588l-6.945-4.123a2.15 2.15 0 0 0-2.194 0L3.582 5.914a2.285 2.285 0 0 0-1.1 1.964v8.245c0 .808.421 1.56 1.1 1.964Z"}),(0,r.Y)("path",{fill:"#47B353",fillRule:"evenodd",d:"m18.09 16.92-1.73 1.035c-.046.027-.08.057-.08.112v.453c0 .055.037.078.083.051l1.756-1.067c.046-.027.053-.078.053-.133v-.4c0-.054-.037-.078-.082-.05Z",clipRule:"evenodd"}),(0,r.Y)("path",{fill:"#FEFEFE",fillRule:"evenodd",d:"M14.407 13.11c.056-.028.102.007.102.08l.006.599c.25-.1.468-.126.666-.08.042.01.061.069.044.138l-.132.53a.227.227 0 0 1-.06.106.138.138 0 0 1-.035.025.078.078 0 0 1-.051.009c-.09-.02-.304-.067-.641.103-.353.18-.477.486-.474.714.003.271.142.354.624.362.642.01.919.291.926.938.006.634-.333 1.316-.85 1.733l.01.593c.001.071-.045.153-.101.181l-.35.202c-.057.029-.103-.006-.104-.078l-.006-.582c-.3.125-.605.155-.8.077-.036-.015-.052-.069-.037-.13l.127-.536a.221.221 0 0 1 .063-.111.132.132 0 0 1 .033-.024.07.07 0 0 1 .056-.006c.21.07.478.037.736-.093.327-.166.546-.5.543-.832-.004-.3-.167-.426-.563-.429-.504.002-.975-.098-.982-.84-.007-.612.311-1.248.815-1.65l-.007-.598c0-.073.044-.154.102-.183l.34-.217Z",clipRule:"evenodd"})]}))}var d=t(71299),p=t(59148),f=t(17547),h=t(60081),m=t(46567),g=t(96193),v=t(84530),y=t(94420),w=t(53896),b=t(81932),S=t(76654),Y=t(81645);function _(e){return(0,r.FD)(c.A,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{fill:"#009118",d:"M12.902.99a1.815 1.815 0 0 0-1.804 0l-2.02 1.165c-2.064 1.19-4.128 2.38-6.192 3.568A1.74 1.74 0 0 0 2 7.233v9.534a1.75 1.75 0 0 0 .92 1.525c.297.165.59.336.884.507.484.282.969.565 1.467.819.925.475 2.082.58 3.018.085.76-.41 1.097-1.323 1.096-2.162.004-1.987.003-3.974.002-5.961V8.102c.018-.14-.082-.289-.228-.286-.35-.005-.7-.003-1.05 0-.132-.014-.261.101-.251.24-.003 1.637-.002 3.275-.002 4.913l-.001 4.467c.008.432-.272.848-.671.994-.452.172-.956.038-1.366-.187l-.74-.426-1.446-.834a.263.263 0 0 1-.115-.108.272.272 0 0 1-.033-.157V7.283a.292.292 0 0 1 .173-.293L8.21 4.37c1.21-.698 2.42-1.394 3.63-2.09a.28.28 0 0 1 .32 0l3.615 2.08 4.569 2.629a.296.296 0 0 1 .172.294V16.718a.273.273 0 0 1-.147.268l-4.218 2.43-3.845 2.215-.051.03c-.117.07-.25.15-.38.072-.403-.233-.804-.471-1.205-.71-.298-.177-.597-.355-.897-.53-.076-.05-.173-.071-.253-.016-.02.01-.038.021-.057.032-.296.163-.593.327-.915.431-.041.017-.085.03-.128.045-.119.037-.24.075-.316.18.094.132.231.21.368.288a1140.648 1140.648 0 0 0 2.571 1.517c.54.351 1.266.377 1.824.05l3.893-2.24c1.44-.83 2.879-1.66 4.32-2.489.544-.29.924-.89.92-1.524V7.234a1.738 1.738 0 0 0-.857-1.492L16.317 2.96 12.902.99Z"}),(0,r.Y)("path",{fill:"#009118",d:"M17.032 8.148c-1.074-.6-2.352-.633-3.546-.554-.863.089-1.77.338-2.398.984-.645.649-.785 1.697-.479 2.545.22.599.772.988 1.343 1.195.735.27 1.508.355 2.28.439.706.076 1.41.153 2.088.371.277.096.6.243.684.557.078.373-.007.806-.297 1.065-.52.43-1.226.46-1.871.489l-.105.004a45.379 45.379 0 0 0-.206-.002c-.754-.009-1.555-.018-2.205-.446-.367-.255-.525-.706-.59-1.136-.007-.134-.11-.257-.25-.247a50.703 50.703 0 0 0-1.046 0c-.122-.011-.248.08-.255.209-.028.768.254 1.564.83 2.075.674.607 1.582.842 2.455.943.929.093 1.878.087 2.792-.12.687-.164 1.376-.465 1.85-1.018.583-.672.697-1.673.436-2.51-.2-.625-.772-1.025-1.356-1.231-.795-.285-1.625-.397-2.456-.51-.645-.087-1.29-.174-1.92-.342l-.031-.01c-.244-.078-.528-.169-.634-.427-.118-.376-.018-.843.313-1.074.43-.306.977-.35 1.486-.378H14c.68-.008 1.4-.015 2.021.303.416.218.658.665.757 1.116.019.133.104.271.251.265.237.005.474.005.711.004l.328-.001c.12.009.25-.062.273-.189-.015-.943-.476-1.909-1.308-2.37Z"})]}))}var A=t(18179),C=t(92264);function k(e){return(0,r.FD)(c.A,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{fill:"#56B3B4",d:"M20.238 4.762h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.595.595h-1.19a.59.59 0 0 1-.596-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M2.38 23.81h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.596Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M16.667 14.286h3.571a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-3.571a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M9.524 14.286h4.762a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H9.524a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M2.38 14.286h4.763a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M2.38 19.048h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595ZM2.38 9.524h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M8.333 2.381h11.905a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H8.333a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M2.38 2.381h3.572a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M7.143 21.429h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M7.143 7.143h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595ZM2.38 21.429h2.382a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M2.38 7.143h2.382a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M11.905 11.905h9.524a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-9.524a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M5.952 11.905h3.572a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H5.952a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M2.38 11.905h1.191a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M13.095 4.762h4.762a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-4.762a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M2.38 4.762h8.334a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M5.952 16.667h10.715a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H5.952a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M2.38 16.667h1.191a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M16.667 7.143h5.952a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-5.952a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M16.667 9.524h5.952a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-5.952a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M2.38 0h14.287a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595A.59.59 0 0 1 2.38 0Z"})]}))}var x=t(13678),D=t(78266),E=t(97700),R=t(67250),I=t(97025),T=t(9005),F=t(37873),P=t(64124),L=t(38524),U=t(53376),N=t(12378);function O(e){var n=e.module,t=n.name.toLowerCase(),l=t.split(" ");return t.includes("node")?(0,r.Y)(_,{}):t.includes("typescript")?(0,r.Y)(F.A,{}):t.includes("python")||t.includes("pyright")?(0,r.Y)(x.A,{}):t.includes("c++")||t.includes("cpp")||t.includes("clang")||t.includes("ccls")?(0,r.Y)(f.A,{}):t.includes("java")||t.includes("maven")?(0,r.Y)(b.A,{}):t.includes("rust")||t.includes("cargo")?(0,r.Y)(R.A,{}):l.includes("go")||t.includes("gopls")?(0,r.Y)(v.A,{}):t.includes("ruby")?(0,r.Y)(E.A,{}):t.includes("elixir")?(0,r.Y)(g.A,{}):t.includes("bash")?(0,r.Y)(u,{}):t.includes("clojure")?(0,r.Y)(p.A,{}):t.includes("php")?(0,r.Y)(C.A,{}):t.includes("swift")?(0,r.Y)(T.A,{}):t.includes("haskell")?(0,r.Y)(y.A,{}):t.includes("lua")?(0,r.Y)(S.A,{}):t.includes("dart")?(0,r.Y)(m.A,{}):t.includes("css")?(0,r.Y)(h.A,{}):t.includes("html")?(0,r.Y)(w.A,{}):l.includes("r")?(0,r.Y)(D.A,{}):t.includes("nix")?(0,r.Y)(Y.A,{}):t.includes("npm")?(0,r.Y)(A.A,{}):"bun"===t?(0,r.Y)(d.A,{}):t.includes("prettier")?(0,r.Y)(k,{}):t.includes("vue")?(0,r.Y)(P.A,{}):t.includes("svelte")?(0,r.Y)(I.A,{}):t.includes(".replit")?(0,r.Y)(U.A,{}):n instanceof i.api.PackagerOption?(0,r.Y)(L.A,{}):n instanceof i.api.LanguageServerOption?(0,r.Y)(o.A,{}):n instanceof i.api.FormatterOption?(0,r.Y)(a.A,{}):n instanceof i.api.RunOption?(0,r.Y)(N.A,{}):(0,r.Y)(L.A,{})}},61556:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(81073),s=t(21462),c=t(39159),u=t(56965),d=t(66147),p=t(18509),f=t(27023),h=t(85389);function m(){}var g=(0,p.x)({terminalWrapper:[f.wp.overflow("hidden"),{"& .xterm":[f.wp.borderRadius(0,0,4,4)]}]});function v(e){var n,t=e.workflowRunState,p=e.currentUserId,f=e.openPane,v=e.maxHeight,y=void 0===v?300:v,w=(0,s.useId)(),b=(0,d.V)(),S=t.runId,Y=t.tasks.findIndex(function(e){var n;return(null==(n=e.metadata)?void 0:n.task)==="shell.exec"}),_=(0,u.Ui)({maxHeight:y,openPane:f}),A=_.visibleHeight,C=_.bufferHeight,k=_.wrapperResizeRef,x=_.xterm,D=_.xtermRef,E=(0,o._)((0,s.useState)(null),2),R=E[0],I=E[1],T=(0,s.useCallback)(function(e){return I(function(){return e}),function(){}},[]),F=(0,s.useRef)(!1);return(0,c.b)((n=(0,i._)(function(e,n){var t,i,o,l,s,c,u,d,f,h,m;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=n.signal,F.current||!x||!R)return[2];o=(i=e.workflows.connectToTask.stream({runId:S,taskIdx:Y,userId:p,processViewId:w},{signal:t})).resReadable,l=i.reqWritable,F.current=!0,l.write({$kind:"resize",size:x.getSize()}),s=!1,c=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),d=(0,r._)(o),a.label=2;case 2:return[4,d.next()];case 3:if(!(s=!(f=a.sent()).done))return[3,5];if(!(h=f.value).ok){if("UNEXPECTED_DISCONNECT"===h.payload.code||"CANCEL"===h.payload.code||"NO_MATCHING_TASK_STATE"===h.payload.code)return[3,5];throw Error("[".concat(h.payload.code,"] ").concat(h.payload.message))}"output"===h.payload.$kind&&R(h.payload.chunk),a.label=4;case 4:return s=!1,[3,2];case 5:return[3,12];case 6:return m=a.sent(),c=!0,u=m,[3,12];case 7:if(a.trys.push([7,,10,11]),!(s&&null!=d.return))return[3,9];return[4,d.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(c)throw u;return[7];case 11:return[7];case 12:return l.close(),[2]}})}),function(e,t){return n.apply(this,arguments)}),[S,Y,R,x,p,w]),(0,l.Y)(h.S,{css:g.terminalWrapper,style:{height:A,background:null==b?void 0:b.background},children:(0,l.Y)(u._x,{onInput:m,xterm:x,wrapperResizeRef:k,bufferHeight:C,setOnMessage:T,onResizeTerminal:m,children:(0,l.Y)(u.DJ,{xtermRef:D,visibleHeight:A,maxHeight:y})})})}},61700:(e,n,t)=>{"use strict";t.d(n,{W:()=>i});var r=t(83585),i={overlay:r.Zy+20,gutterActive:r.Zy+19,maximizedTooltip:r.Zy+18,maximizedPane:r.Zy+17,maximizedHeader:r.Zy+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,dropPreview:7,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1,hiddenPane:0}},61702:e=>{e.exports={compactButton:"DynamicPrimaryButton_compactButton__L_u7B"}},61980:(e,n,t)=>{"use strict";t.d(n,{U:()=>l});var r=t(81073),i=t(21462),o=t(59318),a=t(70368),l=function(e){var n=e.children,t=(0,i.useRef)(null),l=(0,i.useRef)(null);return(0,i.useEffect)(function(){var e=function(e){var n,r,i=e.target;if(i&&"ArrowUp"===e.key){var o=t.current;o&&(null==(n=i.parentElement)?void 0:n.firstElementChild)===i&&(null==(r=o.querySelector("input"))||r.focus())}},n=l.current;if(n)return n.addEventListener("keydown",e,!1),function(){return n.removeEventListener("keydown",e,!1)}},[l,t]),(0,r.Y)(o.JC.Provider,{value:{ref:l,"aria-label":"Search Results"},children:(0,r.Y)(a.a.Provider,{value:{ref:t,onKeyDown:function(e){if("ArrowDown"===e.key){var n;e.preventDefault(),null==(n=l.current)||n.focus()}}},children:n})})}},62183:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M4.171 4.421c-.37.292-.421.493-.421.579 0 .086.052.287.421.579.362.285.932.574 1.702.83 1.534.512 3.7.841 6.127.841 2.427 0 4.593-.329 6.127-.84.77-.257 1.34-.546 1.701-.831.37-.292.422-.493.422-.579 0-.086-.052-.287-.422-.579-.361-.285-.93-.574-1.701-.83-1.534-.512-3.7-.841-6.127-.841-2.427 0-4.593.329-6.127.84-.77.257-1.34.546-1.702.831ZM20.25 7.103a8.448 8.448 0 0 1-1.649.73c-1.724.574-4.057.917-6.601.917-2.543 0-4.877-.343-6.601-.917a8.449 8.449 0 0 1-1.649-.73V12c0 .09.053.291.419.581.359.285.925.574 1.694.83 1.529.51 3.695.839 6.137.839 2.442 0 4.608-.328 6.137-.839.769-.256 1.335-.545 1.694-.83.366-.29.419-.492.419-.581V7.103ZM21.75 5c0-.743-.452-1.33-.993-1.757-.55-.433-1.298-.79-2.156-1.076-1.724-.574-4.057-.917-6.601-.917-2.543 0-4.877.343-6.601.917-.858.286-1.607.643-2.156 1.076C2.703 3.67 2.25 4.257 2.25 5v14c0 .74.447 1.329.987 1.757.548.434 1.294.791 2.15 1.077 1.721.574 4.055.916 6.613.916 2.558 0 4.892-.342 6.613-.916.856-.286 1.602-.643 2.15-1.077.54-.428.987-1.016.987-1.757V5Zm-1.5 9.108a8.394 8.394 0 0 1-1.637.726c-1.721.574-4.055.916-6.613.916-2.558 0-4.892-.342-6.612-.916a8.393 8.393 0 0 1-1.638-.726V19c0 .09.053.291.419.581.359.285.925.573 1.694.83 1.529.51 3.695.839 6.137.839 2.442 0 4.608-.328 6.137-.839.769-.257 1.335-.545 1.694-.83.366-.29.419-.492.419-.581v-4.892Z",clipRule:"evenodd"})}))}},62355:e=>{e.exports={buttonLeft:"Header_buttonLeft__z_g_m",buttonRight:"Header_buttonRight__5dQAr",root:"Header_root__kohSy",surface:"Header_surface__wvtCj",checkpointMade:"Header_checkpointMade__k5QGo",checkpointMadeIcon:"Header_checkpointMadeIcon__lzN_w","icon-animate":"Header_icon-animate__b0czC",checkpointMadeText:"Header_checkpointMadeText__lShLs","text-animate":"Header_text-animate__TkFhf",sessionTitle:"Header_sessionTitle__5ZHVg"}},62592:(e,n,t)=>{"use strict";t.d(n,{a:()=>A});var r=t(17844),i=t(93629),o=t(17459),a=t(81073),l=t(21462),s=t(66340),c=t(82936),u=t(18509),d=t(27023),p=t(95487),f=t(83070),h=t(40259),m=t(47245),g=t(24928),v=t(37252),y=t(4616),w=t(28908),b=t(85389),S=t(27789),Y=t(63456),_=(0,u.x)({comboBox:[d.wp.viewStyle,d.wp.colWithGap(4)],inputRow:[d.wp.viewStyle,d.wp.flex.row,d.wp.align.center],input:[{paddingRight:25}],trigger:[{marginLeft:-27}],popover:[{width:"var(--trigger-width)",padding:1}],emptyMessage:[d.wp.p(8),d.wp.flex.row,d.wp.align.center]}),A=(0,l.forwardRef)(function(e,n){var t=e.label,l=e.description,u=e.children,d=e.dataCy,A=e.isLoading,k=e.onLoadMore,x=e.emptyMessage,D=e.maxHeight,E=e.allowsEmptyCollection,R=e.icon,I=e.triggerIcon,T=(0,o._)(e,["label","description","children","dataCy","isLoading","onLoadMore","emptyMessage","maxHeight","allowsEmptyCollection","icon","triggerIcon"]),F=(0,s.wR)();return C({id:T.id,label:t,"aria-labelledby":T["aria-labelledby"],"aria-label":T["aria-label"]}),(0,a.Y)(c.a3,(0,i._)((0,r._)({css:_.comboBox},T),{allowsEmptyCollection:void 0===E||E,"data-cy":d,children:F?null:(0,a.FD)(a.FK,{children:[t?(0,a.Y)(m.J,{children:t}):null,(0,a.FD)("div",{css:_.inputRow,children:[(0,a.Y)(h.cQ,{ref:n,iconLeft:R,css:_.input}),(0,a.Y)(f.K0,{alt:"open",isTooltipOpen:!1,css:_.trigger,children:I||(0,a.Y)(S.A,{})})]}),l?(0,a.Y)(w.A3,{children:l}):null,(0,a.Y)(p.bg,{}),(0,a.Y)(v.g_,{css:_.popover,UNSTABLE_portalContainer:T.portalContainer,children:(0,a.Y)(g.qF,{style:{maxHeight:D},onLoadMore:k,renderEmptyState:function(){return A?(0,a.Y)(b.S,{p:16,row:!0,align:"center",justify:"center",children:(0,a.Y)(Y.A,{})}):(0,a.Y)(y.EY,{css:_.emptyMessage,color:"dimmer",children:null!=x?x:"No results"})},children:u})})]})}))}),C=function(){}},62688:(e,n,t)=>{"use strict";t.d(n,{Z:()=>S});var r=t(81073),i=t(21462),o=t(54988),a=t(70871),l=t(17844),s=t(93629),c=t(52351);function u(e){return(0,r.FD)(c.Ay,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{d:"M8.09945 1.00012C9.8352 1.00012 11.2423 2.40723 11.2423 4.14298L11.2422 4.16743C11.2554 6.75801 13.358 8.85436 15.951 8.85727L15.9566 8.85726C17.6924 8.85726 19.0995 10.2644 19.0995 12.0001C19.0995 13.7359 17.6924 15.143 15.9566 15.143C13.3611 15.143 11.2554 17.2404 11.2422 19.8328C11.2423 19.841 11.2423 19.8491 11.2423 19.8573C11.2423 21.593 9.8352 23.0001 8.09945 23.0001C6.3637 23.0001 4.9566 21.593 4.9566 19.8573C4.9566 18.1215 6.3637 16.7144 8.09945 16.7144C8.10155 16.7144 8.10365 16.7144 8.10575 16.7144C10.7064 16.7109 12.8136 14.6016 12.8136 12.0001C12.8136 9.39653 10.703 7.2859 8.09939 7.28584C6.36367 7.28581 4.9566 5.87871 4.9566 4.14298C4.9566 2.40723 6.3637 1.00012 8.09945 1.00012Z",fill:"url(#paint0_linear_434_35354)"}),(0,r.Y)("path",{d:"M11.2423 12.0001C11.2423 10.2644 9.83518 8.85729 8.09943 8.85729C6.36368 8.85729 4.95657 10.2644 4.95657 12.0001C4.95657 13.7359 6.36368 15.143 8.09943 15.143C9.83518 15.143 11.2423 13.7359 11.2423 12.0001Z",fill:"url(#paint1_linear_434_35354)"}),(0,r.FD)("defs",{children:[(0,r.FD)("linearGradient",{id:"paint0_linear_434_35354",x1:"4.95657",y1:"1.00012",x2:"25.7048",y2:"15.5274",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{stopColor:"#69D9F0"}),(0,r.Y)("stop",{offset:"1",stopColor:"#0093B0"})]}),(0,r.FD)("linearGradient",{id:"paint1_linear_434_35354",x1:"4.95657",y1:"1.00012",x2:"25.7048",y2:"15.5274",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{stopColor:"#69D9F0"}),(0,r.Y)("stop",{offset:"1",stopColor:"#0093B0"})]})]})]}))}var d=t(36937),p=t(18509),f=t(27023),h=t(11769),m=t(83070),g=t(41358),v=t(85389),y=t(77495),w=(0,p.x)({root:[f.wp.display.inlineBlock,f.wp.borderRadius(4),f.wp.border({color:d.LU.outlineDefault})],askButton:[f.wp.border({direction:"right",color:d.LU.outlineDefault})],askButtonInner:[f.wp.height(26),f.wp.borderRadius(4,0,0,4)],copyButton:[{"> button":[f.wp.width(26),f.wp.height(26),f.wp.borderRadius(0,4,4,0)]}]});function b(e){var n=e.adjustXPosition,t=e.adjustYPosition,i=e.onClickAskAssistant,o=e.onClickCopy;return(0,r.Y)(g.ui,{elevated:!0,css:w.root,style:{marginLeft:void 0===n?0:n,marginTop:void 0===t?4:t},children:(0,r.FD)(v.S,{row:!0,align:"center",children:[(0,r.Y)(v.S,{css:w.askButton,children:(0,r.Y)(h.$n,{text:"Ask Assistant",variant:"nofill",onClick:i,size:"small",iconLeft:(0,r.Y)(u,{}),css:w.askButtonInner})}),(0,r.Y)(v.S,{css:w.copyButton,children:(0,r.Y)(m.K0,{alt:"Copy",size:12,onClick:o,children:(0,r.Y)(y.A,{})})})]})})}function S(e){var n=e.xterm,t=e.onAskAssistant,l=(0,i.useMemo)(function(){return null==n?void 0:n._term},[n]),s=(0,i.useRef)(null),c=(0,i.useRef)(null),u=(0,i.useRef)(null);(0,i.useEffect)(function(){if(l)return l.onSelectionChange(function(){s.current&&s.current.dispose(),c.current&&c.current.dispose(),u.current&&(u.current.unmount(),u.current=null);var e=l.getSelectionPosition(),n=l.getSelection().trim();if(l.hasSelection()&&e&&n.length>0){var i,d,p,f=l.buffer.active.cursorY,h=e.end.y-f+1,m=null!=(d=null==l?void 0:l._core._renderService.dimensions.css.cell.width)?d:8,g=Math.round(((null==e?void 0:e.end.x)-(null==e?void 0:e.start.x))/2),v=-70,y=4,w=g*m,S=Math.ceil(140/m);w<70?(g=e.start.x,v=0):g>l.cols-S/2&&(g=e.end.x,v=-140),e.end.y>=l.rows-2&&(y=-8,h-=1),s.current=l.registerMarker(h),c.current=null!=(p=l.registerDecoration({marker:s.current,x:g,width:S,layer:"top"}))?p:null,null==(i=c.current)||i.onRender(function(e){u.current||(u.current=(0,o.createRoot)(e)),u.current.render((0,r.Y)(b,{adjustXPosition:v,adjustYPosition:y,onClickAskAssistant:function(){l.clearSelection(),t(n)},onClickCopy:function(){l.clearSelection(),(0,a.default)(n)}}))})}}).dispose},[t,l])}},62693:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M12.56 10.72a.75.75 0 0 0-1.06 0L8 14.22a.75.75 0 1 0 1.06 1.06l2.22-2.22v5.19a.75.75 0 0 0 1.5 0v-5.19L15 15.28a.75.75 0 0 0 1.06-1.06l-3.5-3.5Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M6 1.25A2.75 2.75 0 0 0 3.25 4v16A2.75 2.75 0 0 0 6 22.75h12A2.75 2.75 0 0 0 20.75 20V8a.75.75 0 0 0-.22-.53l-6-6a.75.75 0 0 0-.53-.22H6Zm-.884 1.866A1.25 1.25 0 0 1 6 2.75h7.25V8c0 .414.336.75.75.75h5.25V20A1.25 1.25 0 0 1 18 21.25H6A1.25 1.25 0 0 1 4.75 20V4c0-.332.132-.65.366-.884ZM18.19 7.25 14.75 3.81v3.44h3.44Z",clipRule:"evenodd"})]}))}},62792:(e,n,t)=>{"use strict";t.d(n,{P:()=>r,k:()=>i});var r=function(e){return e.Intro="intro",e.Deployment="deployment",e.DeploymentInProgress="deployment_in_progress",e.Analytics="analytics",e.Logs="logs",e.Settings="settings",e.Schedule="schedule",e.ResourceMonitoring="resource_monitoring",e.Domains="domains",e.ReservedVMTierSelection="reserved_vm_tier_selection",e.AutoscaleMachineConfiguration="autoscale_machine_configuration",e}({}),i=function(e){return e.SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",e.ChangeView="change_view",e.OpenPane="open_pane",e}({})},63280:(e,n,t)=>{"use strict";t.d(n,{sK:()=>_,j$:()=>A,Si:()=>C});var r=t(12694),i=t(21462),o=t(35992),a=t(17844),l=t(12584),s=t(41114),c=t(68197),u=t(70883);function d(){var e=(0,l._)(["\n  fragment OrgPresenceSessionUser on User {\n    id\n    username\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,l._)(["\n  fragment OrgPresenceSessionProject on Project {\n    id\n    title\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,l._)(["\n  fragment OrgPresenceSessionRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n    project {\n      id\n      org {\n        id\n        slug\n      }\n      ...OrgPresenceSessionProject\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,l._)(["\n  fragment OrgPresenceSessionItem on OrgPresenceSession {\n    id\n    user {\n      ...OrgPresenceSessionUser\n    }\n    repl {\n      ...OrgPresenceSessionRepl\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,l._)(["\n  subscription OrgPresence($input: OrgReplPresenceSessionEventsInput!) {\n    orgReplPresenceSessionEvents(input: $input) {\n      __typename\n      ... on OrgPresenceSessionInitEvent {\n        sessions {\n          ...OrgPresenceSessionItem\n        }\n      }\n      ... on OrgPresenceSessionPingEvent {\n        session {\n          ...OrgPresenceSessionItem\n        }\n      }\n      ... on OrgPresenceSessionLeaveEvent {\n        sessionId\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},v=(0,s.J1)(d()),y=(0,s.J1)(p()),w=(0,s.J1)(f(),u.r,y),b=(0,s.J1)(h(),v,w),S=(0,s.J1)(m(),b);function Y(e,n){var t=n.id,r=n.repl,i=n.user;if(i&&r){var o={id:t,repl:r,user:i,project:r.project||null},a=e.findIndex(function(e){return e.id===t});-1===a?e.push(o):e.splice(a,1,o)}}var _=function(e){var n,t,l=e.orgId,s=e.projectId,u=(0,r._)((0,i.useState)([]),2),d=u[0],p=u[1];return(0,i.useEffect)(function(){p([])},[l,s]),n={variables:{input:{orgId:l,projectId:s}},onData:function(e){var n,t=null==(n=e.data.data)?void 0:n.orgReplPresenceSessionEvents;t&&p(function(e){return(0,o.jM)(e,function(e){!function(e,n){switch(n.__typename){case"OrgPresenceSessionInitEvent":var t=!0,r=!1,i=void 0;try{for(var o,a=n.sessions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;Y(e,l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}break;case"OrgPresenceSessionPingEvent":Y(e,n.session);break;case"OrgPresenceSessionLeaveEvent":var s=e.findIndex(function(e){return e.id===n.sessionId});if(-1===s)return;e.splice(s,1)}}(e,t)})})}},t=(0,a._)({},g,n),c.R(S,t),d},A=function(e){var n=_({orgId:e});return(0,i.useMemo)(function(){return n.reduce(function(e,n){return n.project&&(e[n.project.id]||(e[n.project.id]={}),e[n.project.id][n.user.id]=n.user),e},{})},[n])},C=function(e){var n=_({orgId:e.orgId,projectId:e.projectId});return(0,i.useMemo)(function(){return n.reduce(function(e,n){return e[n.repl.id]||(e[n.repl.id]={}),e[n.repl.id][n.user.id]=n.user,e},{})},[n])}},63599:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.25 6A3.75 3.75 0 0 1 6 2.25h12A3.75 3.75 0 0 1 21.75 6v12A3.75 3.75 0 0 1 18 21.75H6A3.75 3.75 0 0 1 2.25 18V6ZM6 3.75A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6ZM6.25 8A.75.75 0 0 1 7 7.25h10a.75.75 0 0 1 0 1.5H7A.75.75 0 0 1 6.25 8Zm0 4a.75.75 0 0 1 .75-.75h4a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75Zm0 4a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},63951:(e,n,t)=>{"use strict";t.d(n,{JX:()=>U,vY:()=>L});var r=t(17844),i=t(93629),o=t(81073),a=t(11071),l=t(36937),s=t(18509),c=t(27023),u=t(79598),d=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)(u.A,{size:"small",onClick:t,children:n.content})},p=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)(u.A,{size:"small",fontWeight:"medium",onClick:t,children:n.content})},f=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("a",{href:n.url,onClick:t,rel:"noreferrer noopener nofollow",target:"_blank",children:n.content})},h=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("a",{href:n.url,onClick:t,target:"_blank",children:n.content})},m=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("a",{href:n.url,onClick:t,children:n.content})},g=function(e){var n=e.fragment,t=e.onClick,r=e.style;return(0,o.Y)("code",{onClick:t,style:r,children:n.content})},v=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("b",{onClick:t,children:n.content})},y=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("i",{onClick:t,children:n.content})},w=(0,s.x)({strikethrough:[{textDecoration:"line-through"}],blockquote:[c.wp.color.foregroundDimmest,c.wp.border({width:2,color:l.LU.foregroundDimmest,direction:"left"}),{paddingLeft:6}]}),b=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("span",{onClick:t,css:w.strikethrough,children:n.content})},S=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("blockquote",{onClick:t,css:w.blockquote,children:n.content})},Y=/(@[0-9a-zA-Z_]+)/,_=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,A=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,C=/(`.+?`)/,k=/(\*\*.+?\*\*)/,x=/(_.+?_)/,D=/(\*.+?\*)/,E=/(~~.+?~~)/,R=/(^>.+?$\n?)/m,I=/\/@([0-9a-zA-Z_]+)\/(.+)/;function T(e){var n=e.url;return{type:"LINK",url:n,content:n}}function F(e){var n=e.hash;return{type:"DEEP_LINK",url:n,content:n}}var P=RegExp([C.source,k.source,x.source,D.source,E.source,A.source,Y.source,_.source,R.source].join("|"),"m");function L(e,n){var t=e.split(P),r=[],i=[],o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;if(u){var d=function(e,n){if(A.test(e)){var t={};try{t=new window.URL(e)}catch(n){return{content:e,type:"TEXT"}}if(!["repl.it","replit.com",document.location.host].includes(t.host))return T({url:e});if(t.pathname===n.replUrl)return F({hash:t.hash});if(I.test(t.pathname)){var r={url:t}.url,i=I.exec(r.pathname);if(!i)throw Error("Not a Repl URL");return{type:"REPL_LINK",url:r.href,content:"@".concat(i[1],"/").concat(i[2]).concat(r.hash)}}return T({url:e})}if(_.test(e))return F({hash:e});if(R.test(e))return{type:"QUOTE",content:({text:e.slice(1).trim()}).text};if(C.test(e))return{type:"CODE",content:({code:e.slice(1,-1)}).code};if(k.test(e))return{type:"BOLD",content:({text:e.slice(2,-2)}).text};if(x.test(e)||D.test(e))return{type:"ITALICS",content:({text:e.slice(1,-1)}).text};if(E.test(e))return{type:"STRIKETHROUGH",content:({text:e.slice(2,-2)}).text};if(Y.test(e)){var o=e.slice(1);if(!n.users||n.users.includes(o))return{type:"MENTION",username:o,content:"@".concat(o)}}return{content:e,type:"TEXT"}}(u,n);if(d){if("MENTION"===d.type){if(!d.username)continue;r.push(d.username)}i.push(d)}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return{tokens:i,mentions:r}}function U(e){var n=e.message,t=e.onMentionClick,l=void 0===t?function(){}:t,s=e.codeStyles,c=void 0===s?{}:s;return(0,o.Y)(o.FK,{children:n.tokens.map(function(e,n){var t={fragment:e},o=n.toString();return"MENTION"===e.type?(0,a.n)(p,(0,i._)((0,r._)({},t),{key:o,onClick:function(){return l(e)}})):"LINK"===e.type?(0,a.n)(f,(0,i._)((0,r._)({},t),{key:o})):"REPL_LINK"===e.type?(0,a.n)(h,(0,i._)((0,r._)({},t),{key:o})):"DEEP_LINK"===e.type?(0,a.n)(m,(0,i._)((0,r._)({},t),{key:o})):"CODE"===e.type?(0,a.n)(g,(0,i._)((0,r._)({},t),{style:c,key:o})):"BOLD"===e.type?(0,a.n)(v,(0,i._)((0,r._)({},t),{key:o})):"ITALICS"===e.type?(0,a.n)(y,(0,i._)((0,r._)({},t),{key:o})):"STRIKETHROUGH"===e.type?(0,a.n)(b,(0,i._)((0,r._)({},t),{key:o})):"QUOTE"===e.type?(0,a.n)(S,(0,i._)((0,r._)({},t),{key:o})):(0,a.n)(d,(0,i._)((0,r._)({},t),{key:o}))})})}},64054:e=>{e.exports={tooltipTitle:"DynamicIntelligenceTooltip_tooltipTitle__S1Rnx"}},64137:e=>{e.exports={root:"Chat_root__Yf_1K",emptyState:"Chat_emptyState__uhAy7",footerContainer:"Chat_footerContainer__KTEt5",footerRow:"Chat_footerRow__0dttJ",centeredVisualPlanner:"Chat_centeredVisualPlanner__C_vdi",isMobile:"Chat_isMobile__d3LQ9",footerContainerLimitedWidth:"Chat_footerContainerLimitedWidth__PV9Wu"}},64330:(e,n,t)=>{"use strict";t.d(n,{K1:()=>u,Ps:()=>f,ao:()=>a,dO:()=>d,hh:()=>l,jr:()=>o,qo:()=>p,w9:()=>s,xM:()=>c});var r=t(12694),i=t(56902);function o(e,n){for(var t=[],r=e.split(n),i=0;i<r.length;i++){var o=r[i].trim();""!==o&&t.push(o)}return t}function a(e){return e.replace(/^<|>$/g,"")}function l(e){return"'".concat(e.replace(/'/g,"'\\''"),"'")}function s(e){return e.replace(/^refs\/(?:heads|remotes)\//,"")}function c(e){if(-1===e.indexOf("/")||e.startsWith("refs/heads/"))return[null,null];if(e.startsWith("refs/remotes/")){var n=(0,i._)(e.split("/"));return[n[2],n.slice(3).join("/")]}var t=(0,i._)(e.split("/"));return[t[0],t.slice(1).join("/")]}function u(e){return e.replace(/^refs\/remotes\//,"")}function d(e){var n=(0,i._)(e.split("\n")),t=n[0],r=n.slice(1);return r.length?"".concat(t,"\n").concat(r.map(function(e){return"	"+e}).join("\n")):e}function p(e){if(0===Object.keys(e).length)return"";var n=Object.entries(e).map(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];return"".concat(t,": ").concat(d(i))}).join("\n");return'-m "'.concat(n,'"')}function f(e){var n=(0,i._)(e.split("\n")),t=n[0],r=n.slice(1);return r.length?"".concat(t,"\n").concat(r.map(function(e){return e.slice(1)}).join("\n")):e}},64445:e=>{e.exports={container:"CheckpointMetrics_container__KKGrv",header:"CheckpointMetrics_header__iKEbq",textContainer:"CheckpointMetrics_textContainer__JMWSo",expandedContent:"CheckpointMetrics_expandedContent__63wcw"}},64761:(e,n,t)=>{"use strict";t.d(n,{U:()=>O,O:()=>U});var r=t(83846),i=t(17844),o=t(93629),a=t(12694),l=t(86105),s=t(81073),c=t(21462),u=t(24052),d=t(13095),p=t(83425),f=t(59512),h=t(55220),m=t(50301),g=t(36937),v=t(27023),y=t(28290),w=t(49058),b=t(52749),S=t(83070),Y=t(40259),_=t(8017),A=t(4616),C=t(85389),k=t(47434),x=t(24140),D=t(87064),E=t(53774),R=t(53307),I=t(14566),T=t(52351);function F(e){return(0,s.Y)(T.Ay,(0,o._)((0,i._)({},e),{children:(0,s.Y)("path",{fillRule:"evenodd",d:"M1.25 6A.75.75 0 0 1 2 5.25h20a.75.75 0 0 1 0 1.5H2A.75.75 0 0 1 1.25 6Zm0 6a.75.75 0 0 1 .75-.75h20a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1-.75-.75Zm0 6a.75.75 0 0 1 .75-.75h20a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var P=t(48604),L=t(63456),U=function(e){var n,t,u,g,k,x,D=e.isHidden,E=(t=(n=(0,a._)((0,c.useState)(null),2))[0],u=n[1],g=(0,m.rM)(),(0,c.useEffect)(function(){g!==t&&null!=g&&u(g)},[g,t]),t),T=(0,p.A)(E||""),F=(0,a._)((0,c.useState)(null==(k=T[0])?void 0:k.clientId),2),P=F[0],L=F[1];P&&!T.find(function(e){return P===e.clientId})&&L(null==(x=T[0])?void 0:x.clientId),!P&&T.length&&L(T[0].clientId);var U=(0,y.c)(),O=(0,a._)((0,f.A)(!0),2),H=O[0],B=O[1],z=(0,a._)((0,c.useState)(""),2),W=z[0],G=z[1],V=(0,a._)((0,c.useState)(function(){return{}}),2),Z=V[0],j=V[1],q=(0,a._)((0,f.A)(!0),2),K=q[0],$=q[1],J=(0,a._)((0,f.A)(!0),2),Q=J[0],X=J[1],ee=(0,c.useCallback)(function(e,n){j(function(t){var a;return(0,o._)((0,i._)({},t),(0,r._)({},e,[n].concat((0,l._)(null!=(a=t[e])?a:[])).slice(0,100)))})},[]),en=(0,c.useCallback)(function(e,n,t){j(function(r){if(r[e]){for(var o=0;o<r[e].length;o++)if(r[e][o].id===n){r[e][o]=t(r[e][o]);break}r[e]=r[e].slice(0,100)}return(0,i._)({},r)})},[]),et=(0,c.useCallback)(function(){P&&j(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},P,[]))})},[P]),er=(0,c.useMemo)(function(){return T.find(function(e){return e.clientId===P})},[T,P]),ei=null==er?void 0:er.isOpen(E||""),eo=(0,c.useCallback)(function(){var e=null==er?void 0:er.clientId;e&&ee(e,{canceled:!1,notification:{method:"probe",params:{filePath:E,state:null==er?void 0:er.getServerState(),capabilities:null==er?void 0:er.getServerCapabilities(),diagnostics:ei?null==er?void 0:er.getDiagnostics(E||""):[],isOpen:ei,isSupportedFile:null==er?void 0:er.isSupportedFile(E||"")}},requestTime:new Date,type:"probe"})},[ee,E,er,ei]),ea=(0,c.useMemo)(function(){if(!P)return[];var e,n,t=W.split(",").map(function(e){return e.trim()}).filter(Boolean);if(!t.length)return null!=(e=Z[P])?e:[];var r=null!=(n=Z[P])?n:[];return K||(r=r.filter(function(e){return null==e.notification})),Q||(r=r.filter(function(e){return null==e.request})),W&&(r=r.filter(function(e){return t.some(function(n){var t;return null==(t=e.request||e.notification)?void 0:t.method.toLowerCase().includes(n.toLowerCase())})})),r},[W,Z,P,K,Q]);return((0,c.useEffect)(function(){return(0,d.xW)(T.flatMap(function(e){return[e.onRequest(function(n){H&&ee(e.clientId,{id:n.id,canceled:!1,request:n.data,requestTime:new Date})}),e.onResponse(function(n){H&&en(e.clientId,n.id,function(e){return(0,i._)((0,o._)((0,i._)({},e),{responseTime:new Date}),void 0!==n.result?{response:n.result}:{error:n.error})})}),e.onCancelRequest(function(n){H&&en(e.clientId,n,function(e){return(0,o._)((0,i._)({},e),{canceled:!0})})}),e.onDiagnostics(function(n){var t=n.path,r=n.diagnostics;H&&ee(e.clientId,{canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+t,params:r},requestTime:new Date,type:"diagnostics"})}),e.onServerStateChange(function(n){H&&ee(e.clientId,{canceled:!1,notification:{method:"state",params:{serverState:n}},requestTime:new Date,type:"state"})}),e.onServerCapabilitiesChange(function(n){H&&ee(e.clientId,{canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:n}},requestTime:new Date,type:"capabilities"})}),e.onSendNotification(function(n){H&&ee(e.clientId,{canceled:!1,notification:n,requestTime:new Date})}),e.onReceiveNotification(function(n){H&&ee(e.clientId,{canceled:!1,notification:n,requestTime:new Date})})]}))},[ee,en,H,T]),D)?null:(0,s.FD)(C.S,{css:[v.wp.flex.column],children:[(0,s.FD)(C.S,{css:[v.wp.m(4),v.wp.position.sticky,v.wp.top(0),v.wp.backgroundColor.backgroundDefault,v.wp.zIndex(1)],row:!0,align:"center",children:[(0,s.Y)(A.EY,{multiline:!1,children:P?(0,s.FD)(s.FK,{children:[(0,s.Y)(M,{})," logs for ",(0,s.Y)("code",{children:E})]}):"No LSP client available"}),(0,s.Y)(S.K0,{alt:"Probe LSP",onClick:eo,children:(0,s.Y)(R.A,{})}),(0,s.Y)(C.S,{grow:!0}),(0,s.Y)(_.d,{"aria-label":"Enable LSP Logs",isSelected:H,onChange:B})]}),(0,s.Y)(C.S,{children:(0,s.Y)(w.e2,{name:"Visible LSP Client",value:P,onChange:L,row:!0,children:T.map(function(e){return(0,s.Y)(w.$O,{id:e.clientId,text:e.clientName,value:e.clientId},e.clientId)})})}),(0,s.FD)(C.S,{row:!0,gap:8,css:[v.wp.m(4),v.wp.mb(8)],children:[(0,s.FD)(C.S,{row:!0,gap:4,children:[(0,s.Y)(I.A,{}),(0,s.Y)(A.EY,{multiline:!1,children:"Show"})]}),(0,s.FD)(C.S,{row:!0,gap:4,children:[(0,s.Y)(b.S,{name:"showNotifications",id:U("showNotifications"),checked:K,onChange:$}),(0,s.Y)("label",{htmlFor:U("showNotifications"),children:" Notifications"})]}),(0,s.FD)(C.S,{row:!0,gap:4,children:[(0,s.Y)(b.S,{name:"showRequests",id:U("showRequests"),checked:Q,onChange:X}),(0,s.Y)("label",{htmlFor:U("showRequests"),children:" Requests"})]}),(0,s.Y)(C.S,{grow:!0,shrink:!0}),(0,s.Y)(C.S,{row:!0,gap:4,children:(0,s.Y)(h.D,{onClick:et})})]}),(0,s.Y)(C.S,{row:!0,gap:4,children:(0,s.Y)(Y.pd,{id:U("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return G(e.target.value)},value:W})}),(0,s.FD)(C.S,{css:[v.wp.flex.column,v.wp.overflow("auto")],grow:!0,children:[ea.map(function(e,n){var t;return(0,s.Y)(N,{log:e},null!=(t=e.id)?t:e.requestTime.valueOf()+""+n)}),!ea.length&&(0,s.Y)(C.S,{css:v.wp.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},N=(0,c.memo)(function(e){var n,t,r,i,o,l,c=e.log,u=c.requestTime,d=c.responseTime,p=c.request,h=c.response,m=c.notification,g=c.id,y=(0,a._)((0,f.A)(!0),2),w=y[0],b=y[1];return(0,s.FD)(C.S,{css:[v.wp.my(4),v.wp.mx(4)],children:[(0,s.FD)(C.S,{role:"button",onClick:b,onKeyDown:b,tabIndex:0,css:[{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],row:!0,gap:4,children:[(0,s.FD)(C.S,{grow:!0,row:!0,gap:2,children:[(0,s.Y)(A.EY,{className:"lspLog-emoji",multiline:!1,children:(t=(n=c).type,r=n.canceled,i=n.response,o=n.notification,"state"===t?(0,s.Y)(E.A,{}):"diagnostics"===t?(0,s.Y)(k.A,{}):"capabilities"===t?(0,s.Y)(F,{}):"probe"===t?(0,s.Y)(R.A,{}):r?(0,s.Y)(D.A,{}):o?(0,s.Y)(P.A,{}):void 0!==i?(0,s.Y)(x.A,{}):(0,s.Y)(L.A,{}))}),(0,s.FD)(A.EY,{className:"lspLog-requestMethod",multiline:!1,children:[(0,s.Y)("code",{children:null==(l=p||m)?void 0:l.method}),null!=g&&(0,s.FD)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",g]})]})]}),(0,s.Y)(C.S,{css:{opacity:.5},children:null!=d&&(0,s.FD)(A.EY,{css:v.wp.fontSize(13),multiline:!1,children:[d.valueOf()-u.valueOf(),"ms"]})})]}),!w&&(0,s.FD)(s.FK,{children:[void 0!==p&&(0,s.Y)(O,{name:"request.params",src:p.params}),void 0!==m&&(0,s.Y)(O,{name:"notification.params",src:m.params}),void 0!==h&&(0,s.Y)(O,{name:"response",src:h})]})]})}),O=(0,c.memo)(function(e){var n=e.name,t=e.src;return(0,s.Y)(C.S,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,s.Y)(u.A,{json:(0,r._)({},n,t)})})}),M=function(){return(0,s.Y)(A.EY,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(g.LU.redDimmer," 2px 2px")},children:"LSP"})}},64852:(e,n,t)=>{"use strict";t.d(n,{A:()=>d,C:()=>m});var r=t(29935),i=t(17844),o=t(12694),a=t(82643);function l(){return(l=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){return setTimeout(function(){return n()},e)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}var s=t(66485),c=t(97970),u=new RegExp(/(file:\/\/)?\/home\/runner\/[^/]+\/(.*)/);function d(e,n,t,r){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e,n,t,i){var l,u,d;return(0,a.YH)(this,function(p){switch(p.label){case 0:return u=(l=(0,o._)((0,c.z)(e-1,!1,n),2))[0],d=l[1]+1,[4,m(u,(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,i()];case 1:return[2,null==(e=n.sent())?void 0:e.files]}})}))];case 1:return[2,p.sent().map(function(e){var r=e.from,i=e.to,o=e.file,a=e.line,l=e.col;return{range:(0,c.W)(d,r,i,n),text:o,activate:function(e,n){(0,s.T$)(e)&&t({path:n,line:a,col:l})}}})]}})})).apply(this,arguments)}var f=/[a-zA-Z0-9_\-.[\]$@()]+/,h='", line ';function m(e,n){return g.apply(this,arguments)}function g(){return(g=(0,r._)(function(e,n){var t,r,o,s,c,d,p,m,g;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,Promise.race([n(),(function(e){return l.apply(this,arguments)})(5e3).then(function(){return[]})])];case 1:if(!(t=a.sent())||0===t.length)return[2,[]];for(r=[],o=0,s=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e[o+n]},c=function(){var n=e[o];return o++,n},d=function(){var n=o;c();for(var t="";/\d/.test(s());)t+=c();if(0===t.length)return o=n,null;if(":"!==s())return{line:parseInt(t,10),col:0};c();for(var r="";o<e.length&&/\d/.test(s());)r+=c();return 0===r.length?(o--,{line:parseInt(t,10),col:0}):{line:parseInt(t,10),col:parseInt(r,10)}},p=function(){for(var n=o,t=0;t<h.length;t++)c();for(var r="";o<e.length&&/\d/.test(s());)r+=c();return 0===r.length?(o=n,null):{line:parseInt(r,10),col:0}},m=function(){var n=o,r="";for("."===s()&&"/"===s(1)&&(r+=c(),r+=c()),("("===s()||"["===s())&&c();o<e.length;){var a=s();if(f.test(a))r+=c();else if("/"===a){if("/"===r[r.length-1])break;r+=c()}else break}var l={line:1,col:0};if(":"===s()){var m=d();m&&(l=m)}else if(e.substring(o,o+h.length)===h){var g=p();g&&(l=g,n--)}(r.startsWith("a/")||r.startsWith("b/"))&&(e.indexOf("diff --git ")>=0||e.indexOf("--- a/")>=0||e.indexOf("+++ b/")>=0)&&t.indexOf(r.substring(2))>=0&&(r=r.substring(2),n+=2);var v=r.replace(u,"$2").replace(/^\.?\//,"").trim();return v&&t.find(function(e){return e===v||e.substring(e.lastIndexOf("/")+1)===v})?(0,i._)({file:v,from:n,to:o},l):null};o<e.length;)(g=m())?r.push(g):c();return[2,r]}})})).apply(this,arguments)}},64944:(e,n,t)=>{"use strict";t.d(n,{f:()=>r});var r=new Map([["envEditor",["Environment variables"]],["ghostwriterChat",["Chat",{alias:"Ghostwriter",prefix:"previously"}]],["shell",["Terminal"]],["objectStorage",["Blobject Storage","Blob Cloud"]],["dependencies",["Packages","System dependencies","Nix","Modules"]],["integrations",["Cloud Services","OpenAI","Slack"]],["agentProgress",["Agent Progress","AI Agent","Preview","Output","Webview"]],["neon",[{alias:"Supabase",prefix:"similar to"}]],["webview",["Preview","Output",{alias:"Webview",prefix:"previously"}]]])},64955:(e,n,t)=>{"use strict";t.d(n,{T:()=>i});var r=t(21462);function i(e){var n,t,i=e.mode,o=e.authz,a=!0,l=void 0;return"advanced"===i?(a=null!=(n=null==o?void 0:o.advancedAssistant.isAuthorized)&&n,l=null==o?void 0:o.advancedAssistant.message):"basic"===i&&(a=null!=(t=null==o?void 0:o.basicAssistant.isAuthorized)&&t,l=null==o?void 0:o.basicAssistant.message),(0,r.useMemo)(function(){return{isAuthorized:a,message:l}},[a,l])}},66097:e=>{e.exports={blueprintsRow:"TechStackInfo_blueprintsRow__7XQv0",integrationPill:"TechStackInfo_integrationPill__W1O_K"}},66113:e=>{e.exports={root:"ReadOnlySession_root__h_iV4",fullWidth:"ReadOnlySession_fullWidth__PxMcx"}},66147:(e,n,t)=>{"use strict";t.d(n,{V:()=>a});var r=t(21462),i=t(43303),o=t(44115);function a(){var e=(0,i.D)().values;return(0,r.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.T5.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(e)},[e])}},66241:(e,n,t)=>{"use strict";t.d(n,{Gi:()=>i,UN:()=>o});var r=t(684),i=function(e){return e.NOT_INITIALIZED="NOT_INITIALIZED",e.ON_UNBORN_BRANCH="ON_UNBORN_BRANCH",e.MERGING="MERGING",e.REBASING="REBASING",e.REVERTING="REVERTING",e.CHERRY_PICKING="CHERRY_PICKING",e.APPLYING_MAILBOX="APPLYING_MAILBOX",e.BISECTING="BISECTING",e.INDEX_LOCKED="INDEX_LOCKED",e.DIRTY_WORKTREE="DIRTY_WORKTREE",e.DIRTY_INDEX="DIRTY_INDEX",e.CLEAN="CLEAN",e.DETACHED_HEAD="DETACHED_HEAD",e}({});r.ZU.Enum(i);var o=function(e){return e.INITIALIZING="INITIALIZING",e.INTERMEDIATE="INTERMEDIATE",e.NORMAL="NORMAL",e.DETACHED_HEAD="DETACHED_HEAD",e}({});r.ZU.Enum(o)},66297:(e,n,t)=>{"use strict";t.d(n,{Q:()=>i});var r=t(90629);function i(e){var n=e.error,t=e.context,i=e.extras,o=e.isDeploymentsPane,a=void 0===o||o;return r.v4(function(e){e.setTag("deployments-pane",a),e.setTag("context",t),i&&e.setExtras(i),r.Cp(n)}),n}},66398:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9.341 6.066 12 18.43l2.655-12.364a3.57 3.57 0 0 0 .029-1.183.748.748 0 0 1-.042-.21 2.262 2.262 0 0 0-.721-1.188 3.12 3.12 0 0 0-1.923-.735 3.12 3.12 0 0 0-1.923.735 2.263 2.263 0 0 0-.721 1.189.747.747 0 0 1-.042.209 3.57 3.57 0 0 0 .029 1.183Zm-1.565-.642a5.61 5.61 0 0 0 .096.944l2.46 11.441-5.034-8.286a3.551 3.551 0 0 1-.281-.7.755.755 0 0 0-.038-.148c-.152-.652-.1-1.313.187-1.846.336-.626 1.087-1.242 2.61-1.405Zm.248-1.525c-2.108.127-3.501.957-4.18 2.22-.398.74-.51 1.562-.42 2.353-1.179.603-1.866 1.732-2.09 2.892-.257 1.334.07 2.85 1.11 3.817a.758.758 0 0 0 .037.032l9.045 7.368a.75.75 0 0 0 .948 0l9.045-7.368a.723.723 0 0 0 .038-.032c1.039-.968 1.366-2.483 1.109-3.817-.224-1.161-.913-2.292-2.094-2.894.09-.79-.023-1.61-.42-2.351-.68-1.263-2.073-2.093-4.18-2.22a3.76 3.76 0 0 0-1.062-1.542c-.906-.795-2.08-1.107-2.912-1.107-.832 0-2.006.312-2.912 1.107A3.76 3.76 0 0 0 8.024 3.9Zm8.196 1.525a5.607 5.607 0 0 1-.096.944l-2.457 11.44 5.03-8.285a3.543 3.543 0 0 0 .309-.801c.166-.667.117-1.347-.176-1.893-.336-.626-1.087-1.242-2.61-1.405Zm3.932 4.54a5.077 5.077 0 0 1-.162.32l-5.092 8.388 5.653-4.605c.568-.542.823-1.481.642-2.419-.133-.688-.486-1.298-1.041-1.684ZM9.1 18.67l-5.094-8.386a5.033 5.033 0 0 1-.16-.317c-.554.385-.906.994-1.039 1.681-.18.938.074 1.877.642 2.419l5.65 4.603Z",clipRule:"evenodd"})}))}},66437:(e,n,t)=>{"use strict";t.d(n,{D:()=>o});var r=t(49069),i=t(76484);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=r.Pe.define(),o=r.sU.define({create:function(){return n},update:function(n,r){return(0,i.C)(r,t,function(t){n=e(t.value,n)}),n}});return{effect:t,state:o}}},66682:(e,n,t)=>{"use strict";t.d(n,{A:()=>k});var r=t(81073),i=t(49384),o=t.n(i),a=t(67313),l=t(17844),s=t(12584),c=t(41114),u=t(86997);function d(){var e=(0,s._)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(13843),m=t(55100),g=t(36937),v=t(18509),y=t(27023),w=t(11769),b=t(85144),S=t(4616),Y=t(78626),_=t(85389),A=t(99998),C=(0,v.x)({staffHelpers:[y.wp.border({color:g.LU.accentNegativeDefault,width:1,style:"solid"}),y.wp.overflow("hidden")]});let k=function(e){var n,t,i,s=e.isOpen,c=(0,a.useRouter)(),d=(n={skip:!s},t=(0,l._)({},p,n),u.I(f,t)).data,g=(0,m.A)(),v=null==d||null==(i=d.currentUser)?void 0:i.isStaff;return(0,r.Y)(b.a,{preventClose:!0,isOpen:s,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.FD)(_.S,{gap:32,children:[(0,r.Y)(_.S,{row:!0,gap:16,align:"center",children:(0,r.Y)(S.Y9,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You can’t run this Repl right now."})}),(0,r.FD)(_.S,{gap:16,children:[(0,r.FD)(S.EY,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.Y)(o(),{href:h.aC.TERMS_OF_SERVICE,children:"Terms of Service"}),"."]}),(0,r.Y)(S.EY,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),v?(0,r.FD)(_.S,{css:C.staffHelpers,gap:8,children:[(0,r.FD)(_.S,{row:!0,gap:8,children:[(0,r.Y)(Y.m_,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.Y)(A.A,{})}),(0,r.Y)(S.Y9,{level:3,children:"Debug Info"})]}),(0,r.Y)(_.S,{children:(0,r.FD)(S.EY,{children:["Repl ID ",g," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.Y)(_.S,{children:(0,r.FD)(S.EY,{multiline:!1,children:[(0,r.Y)(o(),{href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(g),children:"All datadog logs"})," ","•"," ",(0,r.Y)(o(),{href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(g,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.FD)(_.S,{row:!0,gap:16,justify:"end",children:[(0,r.Y)(w.$n,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.Y)(w.$n,{text:"Leave",onClick:function(){c.push("/home","~/")}})]})]})})}},66767:(e,n,t)=>{"use strict";t.d(n,{Bg:()=>Y,XH:()=>b,aW:()=>g,jN:()=>y});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175),s=t(68389);function c(){var e=(0,i._)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    hasDeployLogs\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n      username\n      fullName\n      image\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n    rollbackSourceBuildId\n    envVars {\n      name\n      value\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n    isRollbackCandidate\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              rollbackSourceBuildId\n              envVars {\n                name\n                value\n              }\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation RollbackHostingBuild($input: RollbackHostingBuildInput!) {\n    rollbackHostingBuild(input: $input) {\n      ... on RollbackHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}var h={},m=(0,o.J1)(c(),s.mY),g=(0,o.J1)(u(),m),v=(0,o.J1)(d(),g);function y(e){var n=(0,r._)({},h,e);return a.I(v,n)}var w=(0,o.J1)(p());function b(e){var n=(0,r._)({},h,e);return a.I(w,n)}var S=(0,o.J1)(f(),s.UQ,s.Zc);function Y(e){var n=(0,r._)({},h,e);return l.n(S,n)}},66898:(e,n,t)=>{"use strict";t.d(n,{Ik:()=>l,jq:()=>a,r$:()=>o});var r=t(9527),i=t(90342);function o(e){return 80===e||443===e}function a(e,n){var t=new URL(e);return!n||o(n)?(t.hostname.endsWith(".localhost")?t.port="8081":t.port&&(t.port=""),t):(t.port=n.toString(),t)}function l(e){var n,t,o,l=e.container,s=e.ports,c=e.addDevToolsSuffix,u=!(t=(0,i.w)(s)).length||t.some(function(e){return 80===e.configuration.externalPort})?80:null!=(n=t[0].configuration.externalPort)?n:80,d=(0,r.A)(l),p=d.url,f=d.reachability;if(!u||!p)return null;var h=a(p,u).toString(),m=a(p+"/__replco/workspace_iframe.html",u).toString();return{iframeSrc:void 0===c||c?m:(o=new URL(h)).hostname.endsWith(".localhost")?h:(o.protocol="https:",o.toString()),presentationUrl:h,baseUrl:p,reachability:f}}},67197:(e,n,t)=>{"use strict";t.d(n,{D4:()=>I,QS:()=>T});var r=t(17844),i=t(93629),o=t(81073),a=t(21462),l=t(684),s=t(37299),c=t(67917),u=t(90342),d=t(71424),p=t(86080),f=t(8782),h=t(52751),m=t(74741),g=t(59146),v=t(37157),y=t(79166),w=t(23959),b=t(30938),S=t(77271),Y=t(28177),_=t(55515),A=t(36937),C=t(83070),k=t(52351),x=t(28174),D=t(93936),E=l.ZU.Union([l.ZU.Object({type:l.ZU.Literal("local"),port:l.ZU.Number(),path:l.ZU.Optional(l.ZU.String())}),l.ZU.Object({type:l.ZU.Literal("external"),port:l.ZU.Number(),path:l.ZU.Optional(l.ZU.String())})]),R=l.ZU.Object({type:l.ZU.Literal("webview"),data:l.ZU.Optional(l.ZU.Object({previewScreenSize:l.ZU.Optional(h.R),ports:l.ZU.Optional(E),sessionId:l.ZU.Optional(l.ZU.String())}))}),I=function(e){return s.T(R,e)},T={Content:function(e){var n,t=e.pane.data,l=e.options,s=l.performPaneOperation,p=l.isActive,h=(0,a.useRef)(null),m=(0,c.jt)(),g=(0,d.A)().ports,v=(0,u.w)(g),y=(0,a.useMemo)(function(){var e;return null!=(e=(0,f.E)(t,v))?e:80},[t,v]),b=null==t||null==(n=t.ports)?void 0:n.path,S=(0,a.useCallback)(function(e){s({operation:"open",pane:e})},[s]),Y=(0,a.useCallback)(function(){return S({type:"deployments"})},[S]),A=null==t?void 0:t.previewScreenSize,C=(0,a.useCallback)(function(e){s({operation:"replace",pane:{type:"webview",data:(0,i._)((0,r._)({},t),{previewScreenSize:e})}})},[t,s]),k=(0,a.useCallback)(function(){var e,n;s({operation:"openPip",data:{type:"webview",port:y,path:null!=(n=null==(e=h.current)?void 0:e.getCurrentPath())?n:"/"}})},[y,s]),x=(0,w.xQ)({openDeploymentsPane:Y,includeSharing:!0}).getCommandGroups;return((0,_.Qt)(function(){var e={type:"webview",refresh:function(){var e;null==(e=h.current)||e.refresh()},navigate:function(e,n){var t;null==(t=h.current)||t.navigateTo(e,n)}},n=x();return n.length>0?(0,i._)((0,r._)({},e),{commands:n}):e},[x]),m)?(0,o.Y)(P,{ref:h,isActive:p,initialPort:y,initialPath:b,openPane:S,handlePipClick:k,previewScreenSize:A,setPreviewScreenSize:C,openDeploymentsPane:Y}):(0,o.Y)(F,{ref:h,isActive:p,initialPort:y,initialPath:b,openPane:S,handlePipClick:k,previewScreenSize:A,setPreviewScreenSize:C})},Icon:function(e){var n=e.size;return(0,o.Y)(k.Vx.Provider,{value:{color:A.LU.foregroundDimmer,size:n},children:(0,o.Y)(x.A,{})})},getTitle:function(){return"Preview"},description:"Preview your App",category:y.bY.WorkspaceFeatures,decode:I},F=(0,a.forwardRef)(function(e,n){var t=e.isActive,r=e.initialPort,i=e.initialPath,l=e.openPane,s=e.handlePipClick,c=e.previewScreenSize,u=e.setPreviewScreenSize,p=(0,m.X)(r),h=(0,v.A)(),y=h.didConnectOnce,w=h.didDisconnect,S=(0,d.A)(),Y=S.container,_=S.ports,A=(0,a.useCallback)(function(){return l({type:"networking"})},[l]),C=(0,a.useCallback)(function(){return l({type:"deployments"})},[l]);return((0,b.VP)({isVisible:t&&!p}),p)?(0,o.Y)(g.A,{openNetworkingTool:A,didConnectOnce:y,didDisconnect:w}):(0,o.FD)(o.FK,{children:[(0,o.Y)(L,{openDeploymentsPane:C,handlePipClick:s}),(0,o.Y)(f.Q,{ref:n,initialPort:r,initialPath:i,ports:_,container:Y,openPane:l,previewScreenSize:c,setPreviewScreenSize:u})]})}),P=(0,a.forwardRef)(function(e,n){var t=e.isActive,r=e.initialPort,i=e.initialPath,a=e.openPane,l=e.handlePipClick,s=e.previewScreenSize,c=e.setPreviewScreenSize,u=e.openDeploymentsPane,p=(0,Y.X5)(),h=(0,d.A)(),m=h.container,g=h.ports,v=p.state===Y.J4.READY||p.state===Y.J4.LAST_RESORT_READY;if((0,b.VP)({isVisible:t&&v}),!v)return(0,o.Y)(S.j,{webviewState:p,openPane:a});var y=p.state===Y.J4.READY?p.presentPort:p.externalPort,w=p.state===Y.J4.READY?p.presentRoute:i;return(0,o.FD)(o.FK,{children:[(0,o.Y)(L,{openDeploymentsPane:u,handlePipClick:l}),(0,o.Y)(f.Q,{ref:n,initialPort:null!=y?y:r,initialPath:null!=w?w:i,ports:g,container:m,openPane:a,previewScreenSize:s,setPreviewScreenSize:c})]})});function L(e){var n=e.openDeploymentsPane,t=e.handlePipClick;return(0,o.FD)(o.FK,{children:[(0,o.Y)(p.cR,{side:"left",children:(0,o.Y)(w.Cv,{openDeploymentsPane:n})}),(0,o.Y)(p.cR,{side:"right",children:(0,o.Y)(C.K0,{size:36,alt:"Picture in Picture",onClick:t,children:(0,o.Y)(D.A,{})})})]})}},67244:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(21462),i=t(53811),o=t(52968),a=t(14596),l=t(55100),s=t(37872),c=t(78094),u=t(71424),d=new Set;function p(e){var n=e.workspaceType,t=(0,l.A)(),p=(0,u.A)(),f=p.dotReplit,h=p.container;(0,r.useEffect)(function(){if(!d.has(t)){d.add(t);var e=f.watch(function(t){if(!t.error||t.error!==a.DO.Disconnected){try{var r=h.getConnectionMetadata();if(!r||!r.token)throw Error("Expected token in measure call.");!function(e){var n=e.workspaceType,t=e.parsedToken,r=!!window.performance.getEntriesByName(o.pY.pageNavStart,"mark").length,a={ssr:!r,workspaceType:n,tokenCluster:t.cluster},l="time to code";window.performance.measure(l,r?o.pY.pageNavStart:void 0);var c=window.performance.getEntriesByName(l,"measure")[0];if(!c)return s.vF.info("Could not obtain measure for time to code",a);var u="page invisible fetch connection metadata",d=c.duration;window.performance.getEntriesByName(o.pY.fetchConnectionMetadataPageInvisibleStart,"mark").length&&(window.performance.measure(u,o.pY.fetchConnectionMetadataPageInvisibleStart,o.pY.fetchConnectionMetadataPageInvisibleEnd),d-=window.performance.getEntriesByName(u,"measure")[0].duration,window.performance.clearMeasures(u),window.performance.clearMarks(o.pY.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(o.pY.fetchConnectionMetadataPageInvisibleEnd)),s.vF.time("time to code minus page invisible",d,a),s.vF.time("time to code with page invisible",c.duration,a),window.performance.clearMeasures(l),i.L.addTiming("time_to_code_minus_page_invisible",d),i.L.addTiming("time_to_code_with_page_invisible",c.duration)}({workspaceType:n,parsedToken:(0,c.p)(r.token)})}catch(e){s.vF.info("Could not measure time to code",{workspaceType:n,e:e,dotReplitResult:t.error?t.error:"success"})}e()}});return e}},[t,n,f,h])}},67524:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M5.25 16.75a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1ZM17.25 15.25a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 11.618c0-.298.048-.594.144-.877L3.62 4.123A2.75 2.75 0 0 1 6.226 2.25h11.548c1.18 0 2.23.754 2.606 1.873l2.227 6.618c.095.283.143.579.143.877V19A2.75 2.75 0 0 1 20 21.75H4A2.75 2.75 0 0 1 1.25 19v-7.382ZM6.226 3.75h11.548a1.25 1.25 0 0 1 1.184.851l2.227 6.619c.043.128.065.263.065.398v.132H2.75v-.132c0-.135.022-.27.065-.398L5.042 4.6a1.25 1.25 0 0 1 1.184-.851Zm-3.476 9.5V19c0 .69.56 1.25 1.25 1.25h16c.69 0 1.25-.56 1.25-1.25v-5.75H2.75Z",clipRule:"evenodd"})]}))}},67662:(e,n,t)=>{"use strict";t.d(n,{n:()=>l});var r=t(82706),i=t(83603),o=t(21762),a=t(8985);function l(){var e=(0,i.ET)().orgId,n=(0,a.o)({controlName:r.Ec,default:!1}),t=(0,o._P)({controlName:r.Ec,default:!1});return e?!!n:t}},67963:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M14.47 20.53a.75.75 0 0 0 1.06 0l5-5a.75.75 0 0 0 0-1.06l-5-5a.75.75 0 1 0-1.06 1.06l3.72 3.72H8A3.25 3.25 0 0 1 4.75 11V4a.75.75 0 0 0-1.5 0v7A4.75 4.75 0 0 0 8 15.75h10.19l-3.72 3.72a.75.75 0 0 0 0 1.06Z",clipRule:"evenodd"})}))}},68135:(e,n,t)=>{"use strict";t.d(n,{G:()=>o,n:()=>a});var r=t(3520),i=t(65326),o=function(e){var n=new Date(e),t=new Date;return 60>(0,r.A)(t,n)?"just now":(0,i.K)(n,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},68641:(e,n,t)=>{"use strict";t.d(n,{O:()=>ee,A:()=>ei});var r=t(12694),i=t(81073),o=t(49384),a=t.n(o),l=t(21462),s=t(8950),c=t(67917),u=t(13843),d=t(49022),p=t(17089),f=t(82112),h=t(86105),m=t(35992),g=t(48686),v=t(27915),y=t(76746),w=t(46668),b=t(60397),S=t(81740),Y=t(36937),_=t(18509),A=t(27023),C=t(11769),k=t(45351),x=t(40259),D=t(41358),E=t(4616),R=t(78626),I=t(85389),T=t(22568),F=t(6064),P=t(18911),L=(0,_.x)({wrapper:[A.wp.borderRadius(4),A.wp.border({color:Y.LU.backgroundHigher})],root:[A.wp.colWithGap(8),A.wp.maxHeight(520),A.wp.overflow("hidden")],inputs:[A.wp.mb(4),A.wp.p(8)],nameWarning:[{color:Y.LU.redDefault}],taskItem:[A.wp.position.relative],buttons:[A.wp.border({direction:"top",color:Y.LU.backgroundHigher})],nameInput:[A.wp.my(4)]});function U(e){var n=(0,r._)((0,l.useState)(""),2),t=n[0],o=n[1],a=(0,r._)((0,l.useState)([{id:(0,g.Ak)(),config:null}]),2),s=a[0],c=a[1],u=(0,r._)((0,l.useState)("sequential"),2),d=u[0],f=u[1],Y=(0,S.XO)(),_=(0,l.useMemo)(function(){return!Y.includes(t)},[t,Y]),A=(0,l.useMemo)(function(){if(!t)return(0,v._)("Missing name");if(!_)return(0,v._)("".concat(t," already exists"));if(0===s.length)return(0,v._)("Missing tasks");var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=s[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null===c.config)return(0,v._)("Invalid task");n.push(c.config)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return(0,v.Ok)({name:t,mode:d,author:e.userId,tasks:n})},[t,d,s,_,e.userId]);function U(e,n){if(s&&e!==n){var t=(0,h._)(s),i=(0,r._)(t.splice(e,1),1)[0];t.splice(n,0,i),c(t)}}return(0,i.Y)(D.ui,{css:L.wrapper,children:(0,i.FD)(k.lV,{css:L.root,onSubmit:function(n){(0,p.u4)(p.AZ.WORKFLOW_CREATED,{pane:"workflows",shellExecCount:s.reduce(function(e,n){var t;return(null==(t=n.config)?void 0:t.task)==="shell.exec"?e+1:e},0),packagerCount:s.reduce(function(e,n){var t,r;return(null==(t=n.config)?void 0:t.task)==="packager.installForAll"||(null==(r=n.config)?void 0:r.task)==="packager.installForLanguage"?e+1:e},0),mode:d,userId:e.userId}),n.preventDefault(),A.ok&&e.onCreate(A.value)},children:[(0,i.FD)(I.S,{css:L.inputs,gap:8,children:[(0,i.FD)(I.S,{gap:2,children:[(0,i.Y)(E.EY,{variant:"small",color:"dimmest",children:"Workflow"}),_?null:(0,i.Y)(E.EY,{variant:"small",css:L.nameWarning,children:"Duplicate workflow name"}),(0,i.Y)(x.pd,{css:L.nameInput,required:!0,placeholder:"Name",value:t,onChange:function(e){return o(e.currentTarget.value)}})]}),(0,i.FD)(I.S,{gap:2,children:[(0,i.Y)(E.EY,{variant:"small",color:"dimmest",children:"Mode"}),(0,i.Y)(b.n3,{mode:d,disabled:!1,onChange:f})]}),(0,i.FD)(I.S,{gap:2,children:[(0,i.Y)(E.EY,{variant:"small",color:"dimmest",children:"Tasks"}),s.length?(0,i.Y)(y.i,{mode:d}):null,(0,i.FD)(I.S,{pl:12,gap:8,children:[(0,i.Y)(T.A,{children:s.map(function(e,n){var t;return(0,i.FD)(I.S,{css:L.taskItem,children:[(0,i.Y)(w.S2,{taskIndex:n,disabled:!1,format:!1,onReorder:U,onChange:function(e){c(function(t){return(0,m.jM)(t,function(t){t[n].config=e})})},onRemove:function(){c(function(e){return(0,m.jM)(e,function(e){e.splice(n,1)})})},initialConfig:null!=(t=s[n].config)?t:void 0}),(0,i.Y)(y.L,{mode:d,hideBottom:n>=s.length-1})]},e.id)})}),(0,i.Y)(C.$n,{text:"Add task",type:"button",onClick:function(){c(function(e){return(0,m.jM)(e,function(e){e.push({id:(0,g.Ak)(),config:null})})})},iconLeft:(0,i.Y)(F.A,{})})]})]})]}),(0,i.FD)(I.S,{css:L.buttons,grow:!0,shrink:!0,justify:"end",p:8,row:!0,gap:12,children:[(0,i.Y)(C.$n,{text:"Cancel",onClick:e.onCancel}),(0,i.Y)(R.m_,{tooltip:A.ok?"Save Workflow":A.error,children:(0,i.Y)(C.$n,{iconLeft:(0,i.Y)(P.A,{}),colorway:"primary",disabled:!A.ok,text:"Save",type:"submit"})})]})]})})}var N=t(84322),O=t(18069),M=t(38692),H=t(30124),B=t(83070),z=t(85144),W=t(43796),G=t(53384),V=t(36073),Z=t(61655),j=t(63456),q=t(67382),K=t(14792),$=t(81650),J=t(71872);function Q(e){var n=(0,S.cQ)(),t=(0,f.I)(function(t){return function(){(0,p.u4)(p.AZ.WORKFLOW_RAN,{source:"workflowsPane"});var r,i=null==(r=n())?void 0:r[e];return!!i&&t.workflows.runWorkflow.rpc({workflowId:i.name})}},[n,e]),r=(0,S.Jl)(e),i=(0,f.I)(function(e){return function(){(0,p.u4)(p.AZ.WORKFLOW_STOPPED,{source:"workflowsPane"});var n,t=null==(n=r())?void 0:n.runId;return!!t&&e.workflows.stopRun.rpc({runId:t})}},[r]),o=(0,S.ch)(e);return(0,l.useMemo)(function(){return t&&i?{run:t,stop:i,isRunningObservable:o}:null},[t,i,o])}function X(e){var n=e.index,t=(0,S.j3)(n),r=Q(n),o=(0,d.A)(null==r?void 0:r.isRunningObservable);return t&&r?(0,i.Y)(I.S,{row:!0,gap:8,children:(0,i.Y)(C.$n,{size:"small",iconLeft:o?(0,i.Y)(K.A,{}):(0,i.Y)(q.A,{}),text:t.name,onClick:function(){o?r.stop():r.run()}})}):null}function ee(){var e=(0,S.wU)(),n=(0,S.mP)();return(0,i.Y)(I.S,{gap:8,children:e.filter(function(e){var t;return!(null==(t=n[e].metadata)?void 0:t.generated)}).map(function(e){return(0,i.Y)(X,{index:e},e)})})}var en=(0,_.x)({wrapper:[A.wp.borderRadius(4),A.wp.backgroundColor.backgroundHigher],expandedContent:[A.wp.border({direction:"top"})]});function et(e){var n,t=e.index,o=e.readOnly,a=(0,S.j3)(t),s=(0,S.nd)(t),c=Q(t),u=(0,d.A)(null==c?void 0:c.isRunningObservable),p=(0,r._)((0,l.useState)(!1),2),f=p[0],h=p[1],m=(0,S.oE)(),g=(0,S.jP)(),v=(0,l.useMemo)(function(){return(null==a?void 0:a.name)===g},[a,g]);return a?(0,i.FD)(D.ui,{children:[(0,i.Y)(M.A,{css:en.wrapper,headerContent:(0,i.FD)(I.S,{grow:!0,shrink:!0,row:!0,gap:4,children:[c?(0,i.Y)(B.K0,{alt:u?"Stop workflow":"Run workflow",onClick:function(){u?c.stop():c.run()},children:u?(0,i.Y)(K.A,{}):(0,i.Y)(q.A,{})}):null,(0,i.Y)(I.S,{grow:!0,shrink:!0,row:!0,gap:8,align:"center",justify:"start",children:(0,i.Y)(E.EY,{multiline:!1,children:a.name})}),(0,i.FD)(I.S,{row:!0,gap:4,align:"center",children:[s?(0,i.Y)(R.m_,{tooltip:s,children:(0,i.Y)(J.A,{color:Y.LU.accentNegativeDefault})}):null,v?(0,i.Y)(R.m_,{tooltip:"Assigned to run button",maxWidth:150,children:(0,i.Y)(W.K,{text:"Run Button",colorway:"positive"})}):null,"agent"===a.author||(null==(n=a.metadata)?void 0:n.generated)?(0,i.Y)(R.m_,{tooltip:"Generated by ".concat(a.author),maxWidth:150,children:(0,i.Y)(W.K,{text:"Generated",colorway:"purple"})}):(0,i.Y)(B.K0,{alt:"Delete",onClick:function(){h(!0)},children:(0,i.Y)($.A,{})})]})]}),children:(0,i.Y)(I.S,{css:en.expandedContent,children:(0,i.Y)(b.Wu,{index:t,readOnly:o})})}),(0,i.Y)(z.a,{isOpen:f,onRequestClose:function(){return h(!1)},children:(0,i.Y)(Z.A,{name:"Workflow",description:a.name,confirmDescription:"workflow",hideModal:function(){return h(!1)},delete:function(){return m(t)}})})]}):null}var er=(0,_.x)({generatedList:[{opacity:.7}],loading:[A.wp.center,A.wp.p(16)],error:[A.wp.center,A.wp.p(16)],divider:[A.wp.height(2),A.wp.backgroundColor.accentPrimaryDimmest]});function ei(){var e=(0,r._)((0,l.useState)(""),2),n=e[0],t=e[1],o=(0,r._)((0,l.useState)(!1),2),d=o[0],f=o[1],h=(0,c.jt)(),m=(0,O.hT)(),g=(0,r._)((0,l.useState)(!1),2),v=g[0],y=g[1],w=(0,S.wU)(),b=(0,S.mP)(),Y=(0,S.XO)(),_=(0,S.Eo)(),A=(0,S.oh)(),k=(0,S.wb)(),x=(0,N.i)(),D=!!k||h&&(m===s.g32.AGENT_STATE_RUNNING||m===s.g32.AGENT_STATE_PAUSING),T=(0,l.useMemo)(function(){return w.reduce(function(e,t){return Y[t].toLowerCase().includes(n.toLowerCase())&&e.push(t),e},[]).sort(function(e,n){var t,r,i,o,a=null!=(i=(null==(t=b[e].metadata)?void 0:t.generated)||"agent"===b[e].author)&&i,l=null!=(o=(null==(r=b[n].metadata)?void 0:r.generated)||"agent"===b[n].author)&&o;return a&&!l?1:!a&&l?-1:0})},[n,w,Y,b]),P=(0,l.useMemo)(function(){return T.filter(function(e){var n=b[e];return!(n.metadata&&n.metadata.generated)&&"agent"!==n.author})},[T,b]),L=(0,l.useMemo)(function(){return T.filter(function(e){return"agent"===b[e].author})},[T,b]),B=(0,l.useRef)(),z=function(){clearTimeout(B.current),B.current=setTimeout(function(){(0,p.u4)(p.AZ.WORKFLOWS_SEARCHED)},1e3)};return A?(0,i.Y)(I.S,{css:er.loading,children:(0,i.Y)(j.A,{})}):(0,i.FD)(I.S,{p:8,gap:8,children:[(0,i.FD)(I.S,{row:!0,gap:8,children:[(0,i.Y)(I.S,{grow:!0,shrink:!0,children:(0,i.Y)(G.I,{placeholder:"Search for a workflow...",value:n,onChange:function(e){z(),t(e.target.value)},onClear:function(){return t("")}})}),(0,i.Y)(C.$n,{isDisabled:D,colorway:"primary",iconLeft:(0,i.Y)(F.A,{}),text:"New Workflow",disabled:d,onClick:function(){f(!0)}})]}),(0,i.Y)(H.a,{}),d?(0,i.FD)(i.FK,{children:[(0,i.Y)(U,{onCreate:function(e){_(e),f(!1)},onCancel:function(){f(!1)},userId:null==x?void 0:x.id}),(0,i.Y)(H.a,{css:er.divider})]}):null,k?(0,i.Y)(I.S,{css:er.error,children:(0,i.Y)(R.m_,{tooltip:k.extras,children:(0,i.Y)(V.N,{icon:(0,i.Y)(J.A,{}),colorway:"red",text:k.message})})}):null,(0,i.FD)(I.S,{gap:8,children:[P.length||k?null:(0,i.Y)(I.S,{align:"center",children:(0,i.Y)(E.EY,{children:(0,i.Y)(a(),{target:"_blank",href:u.ik.WORKFLOWS,children:"Learn more about configuring Workflows"})})}),P.length?P.map(function(e){return(0,i.Y)(et,{readOnly:D,index:e},e)}):null,L.length?(0,i.Y)(I.S,{children:(0,i.Y)(M.A,{headerContent:"Agent Workflows",expanded:v,onClick:function(){return y(!v)},children:(0,i.Y)(I.S,{css:er.generatedList,py:8,gap:8,children:L.map(function(e){return(0,i.Y)(et,{index:e,readOnly:D},e)})})})}):null]})]})}},68752:(e,n,t)=>{"use strict";t.d(n,{VP:()=>p,XI:()=>f,fI:()=>d});var r=t(17844),i=t(93629),o=t(17459),a=t(81073),l=t(18509),s=t(27023),c=t(85389),u=(0,l.x)({table:{},tableRow:[s.wp.rowWithGap(12),s.wp.align.center,s.wp.border({direction:"bottom"}),{boxSizing:"border-box"}],column:[s.wp.display.flex,s.wp.colWithGap(0),s.wp.justify.center,s.wp.border({direction:"right"}),{":last-child":{borderRight:0}}],cell:[s.wp.rowWithGap(4),s.wp.align.center,s.wp.color.foregroundDimmest,s.wp.justify.spaceBetween,s.wp.fontSize("small"),s.wp.mx(4),s.wp.py(2),{overflow:"hidden",whiteSpace:"nowrap"}]}),d=function(e){var n=e.children,t=(0,o._)(e,["children"]);return(0,a.Y)("tr",(0,i._)((0,r._)({css:u.tableRow},t),{children:(0,a.Y)(c.S,{row:!0,gap:0,children:n})}))},p=function(e){var n=e.header,t=e.width,r=e.last,i=e.children,o={};return(t&&(o.width=t),r&&(o.marginLeft="auto"),void 0!==n&&n)?(0,a.Y)("th",{style:o,children:(0,a.Y)(c.S,{css:u.cell,children:i})}):(0,a.Y)("td",{css:u.column,style:o,children:(0,a.Y)(c.S,{css:u.cell,children:i})})},f=function(e){var n=e.children;return(0,a.Y)("table",{css:u.table,children:n})}},68839:e=>{e.exports={surface:"Thoughts_surface__fC7QS"}},69341:(e,n,t)=>{"use strict";t.d(n,{P:()=>y});var r=t(12694),i=t(81073),o=t(21462),a=t(9701),l=t(77659),s=t(79361),c=t(71424),u=t(18509),d=t(27023),p=t(11769),f=t(85144),h=t(4616),m=t(85389),g=(0,u.x)({splitContainer:[d.wp.mt(8)],text:[d.wp.mt(8)]}),v=function(){var e=(0,r._)((0,o.useState)(navigator.onLine),2),n=e[0],t=e[1];return(0,o.useEffect)(function(){var e=function(){t(navigator.onLine)};return window.addEventListener("online",e),window.addEventListener("offline",e),function(){window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),n},y=function(){var e=(0,c.A)().container,n=(0,r._)((0,o.useState)(!1),2),t=n[0],u=n[1],d=(0,o.useRef)(!1),y=(0,s.A)(e),w=(0,o.useMemo)(function(){return y===a.KN.CONNECTED},[y]),b=(0,l.T)(),S=v(),Y=(0,o.useCallback)(function(){u(!1)},[]),_=(0,o.useCallback)(function(){location.reload()},[]);return(0,o.useEffect)(function(){if(!d.current&&!w&&b&&S){var e=setTimeout(function(){u(!0),d.current=!0},6e4);return function(){return clearTimeout(e)}}},[w,b,S]),(0,i.Y)(f.a,{isOpen:t,onRequestClose:Y,maxWidth:360,centered:!0,children:(0,i.FD)(m.S,{gap:8,children:[(0,i.Y)(h.Y9,{level:2,variant:"subheadBig",children:"You are disconnected"}),(0,i.Y)(h.EY,{css:g.text,children:"Your connection to the server has been lost and reconnection attempts have failed. Please refresh the page to continue."}),(0,i.FD)(m.S,{css:g.splitContainer,row:!0,gap:8,justify:"space-between",children:[(0,i.Y)(p.$n,{text:"Cancel",onClick:Y}),(0,i.Y)(m.S,{row:!0,gap:8,children:(0,i.Y)(p.$n,{text:"Refresh",onClick:_,colorway:"blue"})})]})]})})}},69389:e=>{e.exports={root:"WebSearch_root__AabUU",divider:"WebSearch_divider__qsQIt",showMoreLessButton:"WebSearch_showMoreLessButton__tBoH2",sourceLink:"WebSearch_sourceLink__4JBrk",sourceLinkText:"WebSearch_sourceLinkText__h8KUZ"}},69406:(e,n,t)=>{"use strict";t.d(n,{mj:()=>p,xo:()=>f,Qq:()=>v,l8:()=>m,Nn:()=>g});var r=t(17844),i=t(93629),o=t(86105),a=t(95707),l=t(37872);function s(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")}).join(" ")}var c=t(3674),u=t(4180),d=t(64254).hp,p=524288;function f(){var e="",n=new Map;return function(t){var o=new Set,a=!1;if(t.trim().startsWith("error"))return{error:u.F.INVALID_COMMAND,filesMap:n,filesMapChanges:o};var s=t.indexOf("\n"),c=0,d=e+t;if(s>=0)s+=e.length;else{e=d;return}for(;s>=0;){var p=d.substring(c,s).trim();if(0!==p.length){var f=function(e){try{return JSON.parse(e)}catch(e){return null}}(p);f&&!function(e,n,t){switch(e.type){case"begin":var o=h(e.data.path);if(!o)return!1;n.set(o,{path:o,lines:[],dedentBy:0}),t.add(o);break;case"end":break;case"match":case"context":var a=h(e.data.path);if(!a)return!1;t.add(a);var s=n.get(a);if(!s)return!1;var c=function(e,n){var t,o,a=h(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),s=[];(null==(t=l[0])?void 0:t.trim())===""&&l.shift(),(null==(o=l[l.length-1])?void 0:o.trim())===""&&l.pop();var c=0,u=0,d=e.data.submatches;return l.forEach(function(n,t){var r=e.data.line_number+t,i=u;u+=n.length+1;for(var o=[];c<d.length;){var a=d[c];if(a.start>=u)break;var l=a.start-i,p=void 0;if(p=a.end<u?a.end-a.start:a.end===u?a.end-a.start-1:n.length-l,l<n.length&&o.push({start:l,length:p}),a.end>u){a.start=u;break}c++}s.push({lineNumber:r,content:n,matches:o})}),(0,i._)((0,r._)({},n),{lines:n.lines.concat(s)})}(e,s);c&&n.set(a,c);break;case"error":return l.vF.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}(f,n,o)&&(a=!0)}c=s+1,s=d.indexOf("\n",c)}return e=d.substring(c),{error:a?u.F.INVALID_LINE:null,filesMap:n,filesMapChanges:o}}}function h(e){return e?"bytes"in e?d.from(e.bytes,"base64").toString():e.text:null}function m(e){var n,t=e.lines.length>0?(n=Math).min.apply(n,(0,o._)(e.lines.map(function(e){return e.content.match(/^[\t ]+/)}).flat().map(function(e){return(null==e?void 0:e.length)||0}))):0;return(0,i._)((0,r._)({},e),{dedentBy:t})}function g(e,n,t){for(var r=(0,o._)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,s=n.get(l);t.has(l)&&s&&(r[a]=s,i.add(l))}var c=!0,u=!1,d=void 0;try{for(var p,f=t[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value,m=n.get(h);!i.has(h)&&m&&r.push(m)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}return r}function v(e){var n=e.mode,t=e.query,r=e.context,i=e.isRegex,l=e.isCaseSensitive,u=e.isMatchingWholeWords,d=e.includeGlobs,f=e.excludeGlobs,h=void 0===f?(0,o._)(a.TJ):f,m=["rg"];switch(n){case"json":m.push("--json");break;case"files":m.push("--files-with-matches")}return null!==r&&m.push("--context","".concat(r)),t.includes("\n")&&m.push("--multiline"),i||m.push("--fixed-strings"),m.push("--max-count","100"),m.push("--max-filesize","4M"),m.push("--max-depth","24"),m.push("--max-columns","512"),m.push("--max-columns-preview"),m.push(l?"--case-sensitive":"--ignore-case"),m.push("--hidden"),u&&m.push("--word-regexp"),m.push.apply(m,(0,o._)((0,c.F4)(d,h))),m.push("--",t),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return["sh","-c","".concat(s.apply(void 0,(0,o._)(e))," | head -c ").concat(n)]}(m)}},69549:(e,n,t)=>{"use strict";t.d(n,{aK:()=>i,mW:()=>a,md:()=>o,sc:()=>l});var r=t(80817),i=[r.SemanticTokenTypes.namespace,r.SemanticTokenTypes.type,r.SemanticTokenTypes.class,r.SemanticTokenTypes.enum,r.SemanticTokenTypes.interface,r.SemanticTokenTypes.struct,r.SemanticTokenTypes.typeParameter,r.SemanticTokenTypes.parameter,r.SemanticTokenTypes.variable,r.SemanticTokenTypes.property,r.SemanticTokenTypes.enumMember,r.SemanticTokenTypes.event,r.SemanticTokenTypes.function,r.SemanticTokenTypes.method,r.SemanticTokenTypes.macro,r.SemanticTokenTypes.keyword,r.SemanticTokenTypes.modifier,r.SemanticTokenTypes.comment,r.SemanticTokenTypes.string,r.SemanticTokenTypes.number,r.SemanticTokenTypes.regexp,r.SemanticTokenTypes.operator,r.SemanticTokenTypes.decorator,"angle","arithmetic","attribute","attributeBracket","bitwise","boolean","brace","bracket","builtinAttribute","builtinType","character","colon","comma","comparison","constParameter","derive","deriveHelper","dot","escapeSequence","invalidEscapeSequence","formatSpecifier","generic","label","lifetime","logical","macroBang","parenthesis","punctuation","selfKeyword","selfTypeKeyword","semicolon","typeAlias","toolModule","union","unresolvedReference","tomlArrayKey","tomlTableKey"],o=[r.SemanticTokenModifiers.declaration,r.SemanticTokenModifiers.definition,r.SemanticTokenModifiers.readonly,r.SemanticTokenModifiers.static,r.SemanticTokenModifiers.deprecated,r.SemanticTokenModifiers.abstract,r.SemanticTokenModifiers.async,r.SemanticTokenModifiers.modification,r.SemanticTokenModifiers.documentation,r.SemanticTokenModifiers.defaultLibrary,"attribute","callable","constant","consuming","controlFlow","crateRoot","injected","intraDocLink","library","macro","mutable","public","reference","trait","unsafe"];function a(e,n){var t=e.tokenTypes[n];return t&&i.includes(t)?t:null}function l(e,n){for(var t=[],r=0;r<e.tokenModifiers.length;r++)if(n&1<<r){var i=e.tokenModifiers[r];i&&o.includes(i)&&t.push(i)}return t}},69961:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(21462),i=t(41467),o=t(71424);function a(e){var n=(0,o.A)().fs,t=(0,r.useCallback)(function(t,r){var o=t.code,a=t.insertAt,l=t.newLine,s=void 0===l||l;if(!e||(0,i.FN)(e)||(0,i.P1)(e)||(0,i.rb)(e)||(0,i.Go)(e))throw Error("Invalid file, this should never happen");if(0!==o.length)var c=n.watchTextFile(e,{onReady:function(t){var i=t.initialContent,l=t.writeChange,u=i.toString(),d="end"===a?u.length:a,p=o;s&&(0!==d&&d!==u.length&&-1===(d=u.indexOf("\n",d))&&(d=u.length),0!==d&&"\n"!==u[d-1]&&(p="\n"+p),"\n"!==u[d]&&(p+="\n")),l({from:d,insert:p},r),n.flush(new Set([e])).finally(function(){c()})}})},[e,n]);return!e||(0,i.FN)(e)||(0,i.P1)(e)||(0,i.rb)(e)||(0,i.Go)(e)?null:t}},69993:e=>{e.exports={scroll:"Checkpoints_scroll__iJ40G",session:"Checkpoints_session__d4uU2",sessionCheckpoint:"Checkpoints_sessionCheckpoint__0DtGn",checkpoint:"Checkpoints_checkpoint__T6Tka",checkpointLine:"Checkpoints_checkpointLine__t0ZVc",dashed:"Checkpoints_dashed__23B7o",toggleCollapsedButton:"Checkpoints_toggleCollapsedButton__7JFlt",highlight:"Checkpoints_highlight___OnSH","highlight-bg":"Checkpoints_highlight-bg__fwSoR",stickyFade:"Checkpoints_stickyFade__vlBej"}},70089:(e,n,t)=>{"use strict";t.d(n,{_:()=>c});var r=t(29935),i=t(82643),o=t(12584);function a(){var e=(0,o._)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,t(41114).J1)(a()),s=t(81869);function c(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var n,t,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,null===s.V||void 0===s.V?void 0:s.V.query({query:l,variables:{replId:e}})];case 1:return r=(null==(t=i.sent())||null==(n=t.data)?void 0:n.repl.__typename)==="Repl"?t.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}})})).apply(this,arguments)}},70417:(e,n,t)=>{"use strict";t.d(n,{OR:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    workspaceCta\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n      editPermissions {\n        isAuthorized\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u);function p(e){var n=(0,r._)({},c,e);return a.I(d,n)}},70433:e=>{e.exports={root:"SetupImport_root__BbZw_",statusIcon:"SetupImport_statusIcon__OpqmH",appIcon:"SetupImport_appIcon___kzWx"}},70489:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(81073),i=t(12157),o=t(95047),a=t(18509),l=t(27023),s=t(11769),c=t(36073),u=t(41358),d=t(4616),p=t(85389),f=t(24140),h=t(48604),m=(0,a.x)({connectButtonRow:[l.wp.flex.rowReverse]});function g(e){var n=e.onConfirm,t=(0,o.A)(),a="Host *.replit.dev\n  Port 22\n  IdentityFile ".concat(t,"/.ssh/replit");return(0,r.FD)(u.ui,{gap:12,children:[(0,r.FD)(p.S,{gap:4,children:[(0,r.Y)(d.Y9,{level:1,variant:"subheadBig",children:"Update your SSH configuration"}),(0,r.FD)(d.EY,{color:"dimmer",children:["Before connecting over SSH, you need to update your local SSH configuration file, which is usually located at ",t,"/.ssh/config"]})]}),(0,r.Y)(i.A,{code:a,header:".ssh/config",multiline:!0}),(0,r.Y)(c.N,{text:"You can find this information later in the SSH docs",icon:(0,r.Y)(h.A,{})}),(0,r.Y)(p.S,{css:m.connectButtonRow,children:(0,r.Y)(s.$n,{text:"I updated my config",iconLeft:(0,r.Y)(f.A,{}),onClick:n,colorway:"primary",stretch:!1})})]})}},70636:(e,n,t)=>{"use strict";t.d(n,{q:()=>r});var r=t(49069).sj.define({combine:function(e){var n=e.filter(Boolean);return{onDismiss:function(e){return n.forEach(function(n){var t;return null==(t=n.onDismiss)?void 0:t.call(n,e)})},onRequestIgnoredBackendOnly:function(e){return n.forEach(function(n){var t;return null==(t=n.onRequestIgnoredBackendOnly)?void 0:t.call(n,e)})},onRequestFirstEmit:function(e){return n.forEach(function(n){var t;return null==(t=n.onRequestFirstEmit)?void 0:t.call(n,e)})},onRequestEndedWithNoSuggestion:function(e){return n.forEach(function(n){var t;return null==(t=n.onRequestEndedWithNoSuggestion)?void 0:t.call(n,e)})},onRequestCompletelyPresented:function(e){return n.forEach(function(n){var t;return null==(t=n.onRequestCompletelyPresented)?void 0:t.call(n,e)})},onSuggestionExplicitlyDismissed:function(e,t){return n.forEach(function(n){var r;return null==(r=n.onSuggestionExplicitlyDismissed)?void 0:r.call(n,e,t)})},onSuggestionAccepted:function(e,t){return n.forEach(function(n){var r;return null==(r=n.onSuggestionAccepted)?void 0:r.call(n,e,t)})}}}})},70707:(e,n,t)=>{"use strict";t.d(n,{p:()=>_});var r=t(83846),i=t(17844),o=t(81073),a=t(27469),l=t(36937),s=t(18509),c=t(15311),u=t(27023),d=t(11769),p=t(83070),f=t(4616),h=t(85389),m=t(24140),g=t(50746),v=t(54613),y=t(87064),w=(0,c.v)(["padding","backgroundColor","borderColor"]),b=w.cssVars,S=w.styleTokens,Y=(0,s.x)({root:[u.wp.position.relative,u.wp.border({width:1,style:"solid",color:S.borderColor}),u.wp.pb(12),u.wp.borderRadius(),u.wp.shadow(2),u.wp.flex.column,{padding:S.padding,backgroundColor:S.backgroundColor,gap:S.padding}],closeIconButton:[u.wp.position.absolute,u.wp.top(S.padding),u.wp.right(S.padding)],dot:[u.wp.borderRadius("full"),u.wp.width(l.LU.space8),u.wp.height(l.LU.space8)]});function _(e){var n,t=e.title,a=e.subtitle,s=e.icon,c=e.content,u=e.containerStyle,w=e.colorway,S=void 0===w?"primary":w,_=e.totalSteps,C=void 0===_?1:_,k=e.currentStepIndex,x=void 0===k?0:k,D=e.onDismiss,E=e.onCurrentStepChange,R=e.cypressCloseData,I=e.compact,T=e.hideCloseButton,F=void 0!==T&&T,P=e.hideNavigation,L=e.doneText,U=!1===S?void 0:S,N=x>=C-1;return(0,o.FD)(h.S,{css:Y.root,style:(0,i._)((n={},(0,r._)(n,b.padding,void 0===I||I?l.LU.space8:l.LU.space16),(0,r._)(n,b.backgroundColor,U?l.ky[U].dimmest:l.LU.backgroundDefault),(0,r._)(n,b.borderColor,U?l.ky[U].dimmer:l.LU.backgroundHighest),(0,r._)(n,"paddingRight",t||F?void 0:l.LU.space32),n),u),children:[F?null:(0,o.Y)(p.K0,{alt:"Close",colorway:U,css:Y.closeIconButton,onClick:D,dataCy:R,children:(0,o.Y)(y.A,{})}),t?(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[s?(0,o.Y)(s,{}):null,(0,o.FD)(h.S,{row:!0,gap:8,align:"end",children:[(0,o.Y)(f.EY,{variant:"subheadDefault",multiline:!1,children:t}),a?(0,o.Y)(f.EY,{variant:"text",color:"dimmest",multiline:!1,css:{transform:"translateY(1.5px)"},children:a}):null]})]}):null,(0,o.Y)(h.S,{children:"function"==typeof c?(0,o.Y)(c,{}):(0,o.Y)(f.EY,{children:c})}),C>1&&E&&!(void 0!==P&&P)?(0,o.FD)(h.S,{row:!0,align:"center",justify:"space-between",children:[(0,o.Y)(d.$n,{css:{visibility:x<=0?"hidden":void 0},colorway:U,text:"Back",iconLeft:(0,o.Y)(g.A,{}),onClick:function(){return E(x-1)}}),(0,o.Y)(A,{colorway:U,total:C,current:x}),(0,o.Y)(d.$n,{"data-autofocus":!0,colorway:N?"primary":U,text:N?void 0===L?"Done":L:"Next",iconLeft:N?(0,o.Y)(m.A,{}):(0,o.Y)(v.A,{}),onClick:function(){return N?D():E(x+1)}})]}):null]})}function A(e){var n=e.total,t=e.current,r=e.colorway;return(0,o.FD)(h.S,{children:[(0,o.Y)(a.s,{children:(0,o.Y)("progress",{value:t+1,max:n,"aria-label":"Step"})}),(0,o.Y)(h.S,{"aria-hidden":!0,row:!0,gap:8,children:Array(n).fill(0).map(function(e,n){return(0,o.Y)(h.S,{style:{backgroundColor:n===t?r?l.ky[r].stronger:l.LU.foregroundDimmest:r?l.ky[r].dimmer:l.LU.outlineDimmest},css:Y.dot},n)})})]})}},70855:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 3c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 9 10.75H3A1.75 1.75 0 0 1 1.25 9V3ZM3 2.75a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6A.25.25 0 0 0 9.25 9V3A.25.25 0 0 0 9 2.75H3ZM13.25 3c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 21 10.75h-6A1.75 1.75 0 0 1 13.25 9V3ZM15 2.75a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25V3a.25.25 0 0 0-.25-.25h-6ZM1.25 15c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 9 22.75H3A1.75 1.75 0 0 1 1.25 21v-6ZM3 14.75a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25v-6a.25.25 0 0 0-.25-.25H3Zm10.25.25c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 21 22.75h-6A1.75 1.75 0 0 1 13.25 21v-6Zm1.75-.25a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25v-6a.25.25 0 0 0-.25-.25h-6Z",clipRule:"evenodd"})}))}},70876:(e,n,t)=>{"use strict";t.d(n,{A:()=>ei});var r,i=t(17844),o=t(93629),a=t(86105),l=t(81073),s=t(21462),c=t(2526),u=t(18509),d=t(27023),p=t(11769),f=t(4616),h=t(85389),m=t(83846),g=t(36937),v=t(43813),y=t(41358),w=g.LU.outlineDimmest,b=(0,s.createContext)({});function S(){return(0,s.useContext)(b)}function Y(e){var n=e.diff,t=e.onPathClick,r=e.onViewFullDiff,i=e.children,o=(0,s.useMemo)(function(){var e=!0,t=!1,r=void 0;try{for(var i,o=n.headers[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if("index"===a.type)return{a:a.hashA,b:a.hashB}}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}},[n]),a=(0,s.useMemo)(function(){return{handlePathNavigation:t?function(e,r){var i="a"===e?n.pathA:n.pathB,a="a"===e?null==o?void 0:o.a:null==o?void 0:o.b;i&&t({path:i,revision:a,line:r})}:void 0,handleViewFullDiffNavigation:r?function(){var e=n.pathB||n.pathA,t=(null==o?void 0:o.b)||(null==o?void 0:o.a);e&&r({path:e,revision:t})}:void 0}},[n,t,r,o]);return(0,l.Y)(b.Provider,{value:a,children:i})}var _=t(29935),A=t(12694),C=t(82643),k=t(80367),x=t(4882),D=t(38201),E=t(95707),R=t(43303);function I(){return(I=(0,_._)(function(e,n,t){var r,a,l,s,c,u,d;return(0,C.YH)(this,function(p){switch(p.label){case 0:if(0===e.hunks.length)return[2,e];if(r=e.pathA?E.Jh.from(e.pathA):null,a=e.pathB?E.Jh.from(e.pathB):null,l=null,s=null,!(r&&r.codeMirrorLanguage))return[3,4];if(!r.codeMirrorLanguage.support)return[3,1];return c=r.codeMirrorLanguage.support.language.parser,[3,3];case 1:return[4,r.codeMirrorLanguage.load()];case 2:c=p.sent().language.parser,p.label=3;case 3:l=c,p.label=4;case 4:if(!(a&&a.codeMirrorLanguage))return[3,8];if(!a.codeMirrorLanguage.support)return[3,5];return u=a.codeMirrorLanguage.support.language.parser,[3,7];case 5:return[4,a.codeMirrorLanguage.load()];case 6:u=p.sent().language.parser,p.label=7;case 7:s=u,p.label=8;case 8:if(t.aborted||!l&&!s)return[2,e];return d=e.hunks.map(function(e){var t=e.lines.filter(function(e){return null!==e.numberA}).map(function(e){return e.content}).join("\n"),r=e.lines.filter(function(e){return null!==e.numberB}).map(function(e){return e.content}).join("\n");e.heading&&(t=t?"".concat(e.heading,"\n").concat(t):"",r=r?"".concat(e.heading,"\n").concat(r):"");var a=(0,D.ZE)(t,n,l),c=(0,D.ZE)(r,n,s);return e.heading&&t&&a.shift(),e.heading&&r&&c.shift(),(0,o._)((0,i._)({},e),{lines:e.lines.map(function(n){if(null!==n.numberB)t="b",r=n.numberB;else if(null!==n.numberA)t="a",r=n.numberA;else throw Error("Invalid line, no number for either side");var t,r,l="a"===t?a[r-e.fromA]:c[r-e.fromB];if(!l)throw Error("Line not found in side ".concat(t));return(0,o._)((0,i._)({},n),{content:l})})})}),[2,(0,o._)((0,i._)({},e),{hunks:d})]}})})).apply(this,arguments)}var T=new WeakSet,F="/* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */",P=t(89635),L=t.n(P),U=t(7868),N=t(63837),O=t(45894),M="--number-width-a",H="--number-width-b",B=(0,u.x)({content:{marginLeft:g.LU.space8,wordBreak:"break-word",whiteSpace:"pre-wrap"},nbsp:{userSelect:"none"},span:{"&::selection":{backgroundColor:g.LU.accentPrimaryDimmer}},line:{display:"flex",flexDirection:"row",alignItems:"stretch",gap:"1ch",paddingLeft:"1ch",paddingRight:g.LU.space8,".is-patch-with-border &":{"&.is-added":{borderLeft:"1px solid ".concat(g.LU.accentPositiveDimmest)},"&.is-removed":{borderLeft:"1px solid ".concat(g.LU.accentNegativeDimmest)},"&.is-same":{borderLeft:"1px solid ".concat(w)}},"&.is-skipped":{paddingTop:g.LU.space4,paddingBottom:g.LU.space4,color:g.LU.foregroundDimmest,userSelect:"none"}},number:{flexShrink:0,whiteSpace:"nowrap",userSelect:"none",".is-added &":{color:g.LU.accentPositiveStronger},".is-removed &":{color:g.LU.accentNegativeStronger},".is-same &":{color:g.LU.foregroundDimmest},".is-skipped &":{position:"relative",left:"25%",color:g.LU.foregroundDimmest}},numberContainer:{display:"flex",flexDirection:"row",alignItems:"start",justifyContent:"flex-end",flexShrink:0,"&.is-side-a":{width:"var(".concat(M,")")},"&.is-side-b":{width:"var(".concat(H,")")}}});function z(e){var n=(0,R.D)().values;return(0,s.useMemo)(function(){if("same"===e)return"";var t="added"===e?n.global.accentPositiveDefault:n.global.accentNegativeDefault;return L()(t).alpha(.2).hex()},[e,n.global.accentPositiveDefault,n.global.accentNegativeDefault])}function W(e){var n=e.type,t=void 0===n?"same":n,r=e.changes,i=S().handleViewFullDiffNavigation,o=z(t);if(r<=0)return null;var a=!1,s=!1;return("removed"===t||"same"===t)&&(a=(0,l.Y)(N.A,{size:20})),("added"===t||"same"===t)&&(s=(0,l.Y)(N.A,{size:20})),(0,l.FD)("div",{className:"is-".concat(t," is-skipped"),css:B.line,style:{backgroundColor:o},children:[(0,l.Y)(V,{side:"a",type:t,number:a}),(0,l.Y)(V,{side:"b",type:t,number:s}),(0,l.Y)("div",{css:B.content,children:(0,l.Y)("span",{css:B.span,children:i?(0,l.Y)(p.$n,{text:"view ".concat(r," more ").concat((0,U.A)("change",r)),iconLeft:(0,l.Y)(O.A,{}),variant:"underlinedOnHover",colorway:"primary",onClick:function(){return i()}}):"".concat(r," more ").concat((0,U.A)("change",r)," not shown")})})]})}function G(e){var n=e.type,t=e.content,r=e.numberA,i=e.numberB,o=z(n);return(0,l.FD)("div",{className:"is-".concat(n),css:B.line,style:{backgroundColor:o},children:[(0,l.Y)(V,{side:"a",type:n,number:void 0===r?null:r}),(0,l.Y)(V,{side:"b",type:n,number:void 0===i?null:i}),(0,l.Y)("div",{className:"is-".concat(n),css:B.content,children:"string"==typeof t?(0,l.Y)("span",{css:B.span,children:t||(0,l.Y)("span",{css:B.nbsp,children:"\xa0"})}):t.map(function(e,n){var t=e.text,r=e.tags;return(0,l.Y)("span",{className:r,css:B.span,children:t||(0,l.Y)("span",{css:B.nbsp,children:"\xa0"})},n)})})]})}function V(e){var n=e.side,t=e.type,r=e.number,i=S().handlePathNavigation;return!1===r?null:null===r?(0,l.Y)("div",{css:B.numberContainer,className:"is-side-".concat(n)}):(0,l.Y)("div",{css:B.numberContainer,className:"is-side-".concat(n),children:i&&"number"==typeof r?(0,l.Y)(p.$n,{text:(0,l.Y)("span",{css:B.number,children:r}),variant:"underlinedOnHover",onClick:function(){return i("removed"===t?"a":"b",r)}}):(0,l.Y)("span",{css:B.number,children:r})})}var Z=(0,u.x)({hunk:[d.wp.flex.column,{":not(:first-of-type)":{borderTop:"1px solid ".concat(w)},":first-of-type [data-hunk-header]":{borderTopLeftRadius:3}}],header:[d.wp.colorMixBg(g.LU.interactiveBackground,g.LU.surfaceBackground),{gap:"1ch",padding:"".concat(g.LU.space4," 1ch"),".is-patch-with-border &":{borderLeft:"1px solid ".concat(w)}}],countAdded:[d.wp.textAlign.right,d.wp.color.accentPositiveStronger,d.wp.width("var(".concat(H,")"))],countRemoved:[d.wp.textAlign.right,d.wp.color.accentNegativeStronger,d.wp.width("var(".concat(M,")"))],sectionHeading:[d.wp.ml(8),d.wp.font.code,d.wp.color.foregroundDimmer],hunks:[d.wp.flex.column,d.wp.font.code,(r={lineHeight:g.LU.lineHeightSmall},(0,m._)(r,"> div:last-child"+F,d.wp.pb(2)),(0,m._)(r,"> div:first-child"+F,d.wp.pt(4)),r)]});function j(e){var n=e.hunk,t=e.hideHeader,r=e.maxLines,o=(0,s.useMemo)(function(){var e=0,t=0,r=!0,i=!1,o=void 0;try{for(var a,l=n.lines[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;"added"===s.type?t++:"removed"===s.type&&e++}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return{a:e,b:t}},[n]),a=(0,s.useMemo)(function(){return void 0!==r&&n.lines.length>r?n.lines.slice(0,r):n.lines},[n,r]);return(0,l.FD)(h.S,{css:Z.hunk,children:[t?null:(0,l.FD)(h.S,{css:Z.header,row:!0,align:"center","data-hunk-header":!0,children:[(0,l.FD)("span",{css:Z.countRemoved,children:["-",o.a]}),(0,l.FD)("span",{css:Z.countAdded,children:["+",o.b]}),n.heading?(0,l.Y)("span",{css:Z.sectionHeading,children:n.heading}):null]}),(0,l.Y)(h.S,{css:Z.hunks,children:a.map(function(e,n){return(0,l.Y)(G,(0,i._)({},e),n)})})]})}var q=t(1035),K=(0,u.x)({diff:[d.wp.flex.column,{"&.is-patch-with-border":d.wp.borderRadius(4)}],header:[d.wp.rowWithGap(8),d.wp.my(8),d.wp.align.center,d.wp.flex.wrap],headerFile:{lineHeight:1,"&.is-added":d.wp.color.accentPositiveStronger,"&.is-removed":d.wp.color.accentNegativeStronger},binaryTag:[d.wp.color.accentPrimaryStronger],container:[d.wp.flex.column,d.wp.overflow("hidden"),{".is-patch-with-border &":[d.wp.borderRadius(4),{"&.is-modified":{border:"1px solid ".concat(w),borderLeft:"none"},"&.is-added":{border:"1px solid ".concat(g.LU.accentPositiveDimmest),borderLeft:"none"},"&.is-removed":{border:"1px solid ".concat(g.LU.accentNegativeDimmest),borderLeft:"none"},"&.is-no-changes":{border:"1px solid ".concat(g.LU.outlineDimmer)},"&.is-binary":{border:"1px solid ".concat(g.LU.outlineDimmer)}}],"&.is-no-changes":[d.wp.p(8),d.wp.center],"&.is-binary":[d.wp.p(8),d.wp.center]}],file:[d.wp.flex.column,d.wp.font.code,{lineHeight:g.LU.lineHeightSmall,"> div:last-child":d.wp.pb(2),"> div:first-child":d.wp.pt(4)}]});function $(e){var n,t,r,i,o,a,c=e.diff,u=e.maxLines,d=e.noHeader,p=e.noBorder,f=e.background,g=e.compressed,v=e.onPathClick,y=e.onViewFullDiff,w=(t=(n=(0,A._)((0,s.useState)(c),2))[0],r=n[1],i=(0,R.D)(),o=(0,s.useMemo)(function(){return(0,x.y)(i.values.editor.syntaxHighlighting)},[i.values.editor.syntaxHighlighting]),(0,s.useEffect)(function(){!o.module||T.has(o.module)||(k.G.mount(document,o.module),T.add(o.module))},[o.module]),(0,s.useEffect)(function(){r(c);var e=0,n=!0,t=!1,i=void 0;try{for(var a,l=c.hunks[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value;if((e+=s.lines.length)>1e3)return}}catch(e){t=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw i}}var u=new AbortController,d=u.signal;return(function(e,n,t){return I.apply(this,arguments)})(c,o,d).then(function(e){d.aborted||r(e)}),function(){u.abort()}},[c,o]),t),b=(0,s.useMemo)(function(){var e=0,n=0,t=0,r=0,i=!0,o=!1,a=void 0;try{for(var l,s=c.hunks[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value,d=0,p=0,f=!0,h=!1,m=void 0;try{for(var v,y=u.lines[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var w=v.value;w.numberA&&(t=Math.max(t,w.numberA)),w.numberB&&(r=Math.max(r,w.numberB)),"removed"===w.type&&d++,"added"===w.type&&p++}}catch(e){h=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(h)throw m}}e=Math.max(e,d),n=Math.max(n,p)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var b=t.toString().length,S=r.toString().length;if((!g||c.hunks.length>1)&&c.pathA&&c.pathB){var Y=e.toString().length+1,_=n.toString().length+1;b=Math.max(b,Y),S=Math.max(S,_)}return{a:b,b:S}},[c,g]);return(0,l.Y)(Y,{diff:c,onPathClick:v,onViewFullDiff:y,children:(0,l.FD)(h.S,{css:K.diff,className:p?"":"is-patch-with-border",style:(a={},(0,m._)(a,M,"".concat(b.a,"ch")),(0,m._)(a,H,"".concat(b.b,"ch")),a),children:[!d&&(c.pathA||c.pathB)?(0,l.Y)(Q,{diff:w}):null,(0,l.Y)(ee,{diff:w,compressed:g,background:f,maxLines:u})]})})}function J(){return(0,l.Y)(f.EY,{css:K.binaryTag,variant:"small",children:"Binary"})}function Q(e){var n=e.diff;if(n.pathA&&n.pathB&&n.pathA===n.pathB)return(0,l.FD)(h.S,{css:K.header,children:[(0,l.Y)(X,{diff:n,side:"b"}),n.binary?(0,l.Y)(J,{}):null]});if(n.pathA&&n.pathB&&n.pathA!==n.pathB)return(0,l.FD)(h.S,{css:K.header,children:[(0,l.Y)(X,{diff:n,side:"a"}),n.binary?(0,l.Y)(J,{}):null,(0,l.Y)(q.A,{color:g.LU.foregroundDimmest}),(0,l.Y)(X,{diff:n,side:"b"}),n.binary?(0,l.Y)(J,{}):null]});var t=n.pathA?"a":"b";return(0,l.FD)(h.S,{css:K.header,children:[(0,l.Y)(X,{diff:n,side:t}),n.binary?(0,l.Y)(J,{}):null]})}function X(e){var n=e.diff,t=e.side,r=S().handlePathNavigation,i="a"===t?n.pathA:n.pathB,o="a"===t?n.pathB:n.pathA;if(!i)return null;var a="";o!==i&&(a="b"===t?"is-added":"is-removed");var s=(0,l.Y)(f.EY,{className:a,css:K.headerFile,children:i});return r?(0,l.Y)(p.$n,{text:s,iconLeft:(0,l.Y)(v.A,{path:i}),onClick:function(){return r(t)},variant:"underlinedOnHover"}):(0,l.FD)(l.FK,{children:[(0,l.Y)(v.A,{path:i}),s]})}function ee(e){var n=e.diff,t=e.background,r=e.compressed,i=e.maxLines,o=null===t?void 0:t||"root";if(n.binary)return(0,l.Y)(y.ui,{className:"is-binary",css:K.container,background:o,children:(0,l.Y)(f.EY,{color:"dimmest",children:"Changes can't be shown for binary files."})});if(!n.hunks.length)return(0,l.Y)(y.ui,{className:"is-no-changes",css:K.container,background:o,children:(0,l.Y)(f.EY,{color:"dimmer",children:"No additional changes"})});if(n.pathA&&n.pathB){var a=0,s=n.hunks.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+ +("same"!==n.type)},0)},0),c=n.hunks.map(function(e){if(void 0!==i&&a>=i)return null;var t=void 0!==i?i-a:void 0;return s-=e.lines.slice(0,t).reduce(function(e,n){return e+ +("same"!==n.type)},0),a+=e.lines.length+1,(0,l.Y)(j,{hunk:e,hideHeader:r&&1===n.hunks.length,maxLines:t},a)});return(0,l.FD)(y.ui,{className:"is-modified",css:K.container,background:o,children:[c,(0,l.Y)(W,{changes:s})]})}var u=n.pathB?"b":"a",d="a"===u?"removed":"added",p=n.hunks.flatMap(function(e){return e.lines.filter(function(e){return e.type!==("a"===u?"added":"removed")}).map(function(e){return e.content})}),m=void 0!==i?p.slice(0,i):p,g=p.length-m.length;return(0,l.Y)(y.ui,{className:"is-".concat(d),css:K.container,background:o,children:(0,l.FD)(h.S,{css:K.file,children:[m.map(function(e,n){return(0,l.Y)(G,{type:d,content:e,numberA:"a"===u&&n+1,numberB:"b"===u&&n+1},n)}),g<=0?null:(0,l.Y)(W,{type:d,changes:g})]})})}var en=(0,u.x)({patch:d.wp.colWithGap(12),truncatedDiffsMessage:[d.wp.color.foregroundDimmest,d.wp.align.center,d.wp.justify.start]}),et=/^diff --git /m;function er(e){return{pathA:e.labelA,pathB:e.labelB,headers:[],binary:!1,hunks:e.hunks}}function ei(e){var n=e.patch,t=e.maxLines,r=e.maxDiffs,u=e.noHeader,d=e.noBorder,m=e.background,g=e.compressed,v=e.onPathClick,y=e.onViewFullDiff,w=(0,s.useMemo)(function(){return function e(n){return Array.isArray(n)?n.flatMap(function(n){return e(n)}):"string"==typeof n?et.test(n)?(0,c.yf)(n):[er((0,c.rj)(n))]:"headers"in n?[n]:[er(n)]}(n)},[n]),b=(0,s.useMemo)(function(){var e=void 0!==r?Math.min(w.length,r):w.length;if(!g&&e===w.length)return w;for(var n=[],t=0;t<e;t++){var l=w[t];if(!g){n.push(l);continue}n.push((0,o._)((0,i._)({},l),{hunks:l.hunks.map(function(e){return function(e){for(var n,t,r,l,s=(0,a._)(e.lines),c=e.fromA,u=e.fromB,d=e.toA,p=e.toB;(null==(n=s[0])?void 0:n.type)==="same"&&(null==(t=s[1])?void 0:t.type)==="same";)s.shift(),c++,u++;for(;(null==(r=s[s.length-1])?void 0:r.type)==="same"&&(null==(l=s[s.length-2])?void 0:l.type)==="same";)s.pop(),d--,p--;return(0,o._)((0,i._)({},e),{fromA:c,fromB:u,toA:d,toB:p,lines:s})}(e)}).filter(function(e){return e.lines.length>0})}))}return n},[w,r,g]),S=w.length-b.length,Y=1===S?"file":"files";return(0,l.FD)(h.S,{css:en.patch,children:[b.map(function(e,n){return(0,l.Y)($,{diff:e,maxLines:t,noHeader:u,noBorder:d,background:m,compressed:g,onPathClick:v,onViewFullDiff:y},n)}),S<=0?null:(0,l.Y)(h.S,{css:en.truncatedDiffsMessage,pt:4,row:!0,gap:4,children:y?(0,l.Y)(p.$n,{text:"view in full (".concat(S," more changed ").concat(Y,")"),iconLeft:(0,l.Y)(O.A,{}),onClick:function(){return y({})},variant:"underlinedOnHover",colorway:"primary"}):(0,l.FD)(f.EY,{children:[S," other changed ",Y," not shown"]})})]})}},71029:(e,n,t)=>{"use strict";t.d(n,{H:()=>p,Y:()=>d});var r=t(37743),i=t(12694),o=t(22531),a=t(21462),l=t(96907),s=t.n(l),c=t(42527),u=t(30908),d=function(){function e(n){var t=this;if((0,r._)(this,e),this.saveToLocalStorage=s()(function(){u.A.set("stateCache",{version:2,entries:Array.from(t.map.entries())})},500,{leading:!1,trailing:!0,maxWait:1e3}),this.map=new c.q(20),n){if((void 0===n?"undefined":(0,o._)(n))!=="object"||null===n||!Object.prototype.hasOwnProperty.call(n,"version")||!Object.prototype.hasOwnProperty.call(n,"entries")||"number"!=typeof n.version||2!==n.version)return;var a=n.entries,l=!0,d=!1,p=void 0;try{for(var f,h=a[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=(0,i._)(f.value,2),g=m[0],v=m[1];this.map.set(g,v)}}catch(e){d=!0,p=e}finally{try{l||null==h.return||h.return()}finally{if(d)throw p}}}}var n=e.prototype;return n.set=function(e,n){this.map.set(e,n),this.saveToLocalStorage()},n.get=function(e){return this.map.get(e)},e}(),p=(0,a.createContext)(null)},71469:(e,n,t)=>{"use strict";t.d(n,{D:()=>s});var r=t(684),i=t(37299),o=t(13843),a=r.ZU.Union(Object.values(o.ik).map(function(e){return r.ZU.Literal(e)})),l=r.ZU.Object({type:r.ZU.Literal("docs"),data:r.ZU.Optional(r.ZU.Object({url:r.ZU.Optional(r.ZU.Union([a,r.ZU.Null()]))}))}),s=function(e){return i.T(l,e)}},71791:(e,n,t)=>{"use strict";t.d(n,{JZ:()=>g,Q6:()=>h,xR:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175);function s(){var e=(0,i._)(["\n  fragment ReplAgentSettingsReplConfig on ReplConfig {\n    agentSettings {\n      thinkingEnabled\n      modelProfile\n      enableAutomatedTesting\n      samplingRate\n      webSearchEnabled\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query ReplAgentSetting($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          ...ReplAgentSettingsReplConfig\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation UpdateReplAgentSettings($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          ...ReplAgentSettingsReplConfig\n        }\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(s()),f=(0,o.J1)(c(),p);function h(e){var n=(0,r._)({},d,e);return a.I(f,n)}var m=(0,o.J1)(u(),p);function g(e){var n=(0,r._)({},d,e);return l.n(m,n)}},71866:(e,n,t)=>{"use strict";t.d(n,{A:()=>h});var r=t(12694),i=t(21462),o=t(67917),a=t(9701),l=t(46011),s=t(54682),c=t(82112),u=t(60070),d=t(27231),p=t(81740),f=t(18069);function h(){var e=(0,o.jt)(),n=(0,f.sz)(),t=(0,p.lO)(),h=t.isRunning,m=t.isWorkflowsLoading,g=(0,p.jP)(),v=(0,s.m5)(),y=(0,p.mP)(),w=(0,p.MP)(),b=(0,r._)((0,i.useState)(!1),2),S=b[0],Y=b[1],_=(0,l.A)(S,200),A=(0,r._)((0,i.useState)(!0),2),C=A[0],k=A[1],x=(0,i.useMemo)(function(){return y.length>0&&!m},[m,y.length]),D=(0,i.useMemo)(function(){var e=y.find(function(e){return e.name===g});if(!e)return!1;var n="agent"===e.author,t=(0,p.ij)(e,y);return n&&t},[g,y]),E=(0,c.I)(function(e){return function(n){return v||w(d.QG.AUTO_RUN),e.workflows.agentStartRunWorkflow.rpc({name:n})}},[w,v]);(0,i.useEffect)(function(){if(e&&_&&C&&x&&E&&g){if(h||!D||n)return void k(!1);k(!1),E(g)}},[m,E,e,h,D,C,x,_,g,n]);var R=(0,i.useCallback)(function(e){Y(e===a.KN.CONNECTED),e===a.KN.CONNECTED&&k(!0)},[]);(0,u.A)(R)}},72094:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M4 2.25a.75.75 0 0 1 .75.75v7a.75.75 0 0 1-1.5 0V3A.75.75 0 0 1 4 2.25Zm8 0a.75.75 0 0 1 .75.75v4.25H15a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h2.25V3a.75.75 0 0 1 .75-.75Zm8 0a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75Zm-8 9a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0v-9a.75.75 0 0 1 .75-.75ZM.25 14a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5H4.75V21a.75.75 0 0 1-1.5 0v-6.25H1A.75.75 0 0 1 .25 14Zm16 2a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-2.25V21a.75.75 0 0 1-1.5 0v-4.25H17a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},72688:e=>{e.exports={timeline:"InitialVersionTimeline_timeline__RrlKw",timelineItemComplete:"InitialVersionTimeline_timelineItemComplete__CKiBT",timelineItemText:"InitialVersionTimeline_timelineItemText__Q8xsM",divider:"InitialVersionTimeline_divider__Uj6lH"}},72882:e=>{e.exports={errorMessage:"ErrorBoundary_errorMessage__3Jcbl"}},72924:(e,n,t)=>{"use strict";function r(e,n){var t=n.existing,r=n.getKey,i=new Map,o=!0,a=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;i.set(r(u),u)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var d=new Set,p=[],f=!0,h=!1,m=void 0;try{for(var g,v=t[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var y=g.value,w=r(y),b=i.get(w);b&&(p.push(b),d.add(w))}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}var S=!0,Y=!1,_=void 0;try{for(var A,C=e[Symbol.iterator]();!(S=(A=C.next()).done);S=!0){var k=A.value;d.has(r(k))||p.push(k)}}catch(e){Y=!0,_=e}finally{try{S||null==C.return||C.return()}finally{if(Y)throw _}}return p}t.d(n,{A:()=>r})},73043:e=>{e.exports={drawerSurface:"PlannerDrawer_drawerSurface__POCP_",plannerItemSurface:"PlannerDrawer_plannerItemSurface__ZzlPs",plannerItemText:"PlannerDrawer_plannerItemText__oXybq",preserveNewlines:"PlannerDrawer_preserveNewlines__qjQsw",titleContainer:"PlannerDrawer_titleContainer__8TJOd",compactButton:"PlannerDrawer_compactButton__t52VY",draggable:"PlannerDrawer_draggable__1tJ1K",dragging:"PlannerDrawer_dragging__QoNnX",dropIndicatorAbove:"PlannerDrawer_dropIndicatorAbove__FBti0",dropIndicatorBelow:"PlannerDrawer_dropIndicatorBelow__D_DIK"}},73205:(e,n,t)=>{"use strict";t.d(n,{u:()=>H});var r=t(17459),i=t(81073),o=t(21462),a=t(4163),l=t(60630),s=t(80089),c=t(47630),u=t(12360),d=t(87971),p=t(31571),f=t(62183),h=t(33791),m=t(8486),g=t(53307),v=t(55919),y=t(43258),w=t(2188),b=t(10327),S=t(27959),Y=t(61518),_=t(15864),A=t(31855),C=t(38524),k=t(18974),x=t(6064),D=t(17844),E=t(93629),R=t(52351);function I(e){return(0,i.FD)(R.Ay,(0,E._)((0,D._)({},e),{children:[(0,i.Y)("path",{fillRule:"evenodd",d:"M10.122 9.849A.75.75 0 0 0 9 10.5v6a.75.75 0 0 0 1.122.651l5.25-3a.75.75 0 0 0 0-1.302l-5.25-3Zm3.366 3.651L10.5 15.208v-3.416l2.988 1.708Z",clipRule:"evenodd"}),(0,i.Y)("path",{fillRule:"evenodd",d:"M3 5.25A2.25 2.25 0 0 1 5.25 3h13.5A2.25 2.25 0 0 1 21 5.25v13.5A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25Zm2.25-.75h13.5a.75.75 0 0 1 .75.75v1.5h-15v-1.5a.75.75 0 0 1 .75-.75ZM4.5 8.25v10.5c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75V8.25h-15Z",clipRule:"evenodd"})]}))}var T=t(34883),F=t(91506),P=t(12378),L=t(47820),U=t(50932),N=t(36540),O=t(5414),M=t(70855);function H(e){var n=e.kind,t=(0,r._)(e,["kind"]),D={createPostgresqlDatabaseData:(0,i.Y)(f.A,{}),createFileData:(0,i.Y)(v.A,{}),deployData:(0,i.Y)(m.A,{}),readFileData:(0,i.Y)(a.A,{}),readDirData:(0,i.Y)(w.A,{}),fileEditData:(0,i.Y)(y.A,{}),shellExecutionData:(0,i.Y)(N.A,{}),packagerInstallData:(0,i.Y)(C.A,{}),screenshotData:(0,i.Y)(s.A,{}),toolchainInstallData:(0,i.Y)(O.A,{}),searchFilesystemData:(0,i.Y)(L.A,{}),searchFileData:(0,i.Y)(L.A,{}),planProgressData:(0,i.Y)(u.A,{}),packagerUninstallData:(0,i.Y)(C.A,{}),messageData:(0,i.Y)(c.A,{}),memoryCompressionData:(0,i.Y)(l.A,{}),systemDependencyInstallData:(0,i.Y)(h.A,{}),systemDependencyUninstallData:(0,i.Y)(h.A,{}),workflowsStartToolData:(0,i.Y)(k.A,{}),workflowsRestartToolData:(0,i.Y)(T.A,{}),workflowsStopToolData:(0,i.Y)(U.A,{}),workflowsSetRunConfigToolData:(0,i.Y)(k.A,{}),workflowsRemoveRunConfigToolData:(0,i.Y)(p.A,{}),workflowsGetOutputToolData:(0,i.Y)(g.A,{}),presentResultsToolData:(0,i.Y)(I,{}),sqlExecutionData:(0,i.Y)(f.A,{}),summarizeObjectiveData:(0,i.Y)(a.A,{}),revertData:(0,i.Y)(F.A,{}),agentPlanStepBegin:(0,i.Y)(P.A,{}),deployConfigData:(0,i.Y)(m.A,{}),acknowledgeUserMessage:(0,i.Y)(d.A,{}),newSessionNudge:(0,i.Y)(x.A,{}),commitData:(0,i.Y)(d.A,{}),thoughts:(0,i.Y)(l.A,{}),blueprintsSetup:(0,i.Y)(Y.A,{}),webSearchData:(0,i.Y)(b.A,{}),webPageVisitData:(0,i.Y)(L.A,{}),imageGenerationData:(0,i.Y)(S.A,{}),projectImportCompleted:(0,i.Y)(w.A,{}),taskListData:(0,i.Y)(_.A,{}),suggestRollbackData:(0,i.Y)(F.A,{}),samplingEvent:(0,i.Y)(M.A,{}),setupObjectStorageData:(0,i.Y)(A.A,{})};return n&&D[n]?(0,o.cloneElement)(D[n],t):(0,o.cloneElement)((0,i.Y)(d.A,{}),t)}},73380:(e,n,t)=>{"use strict";t.d(n,{V4:()=>c,VU:()=>d,aU:()=>u});var r=t(12584),i=t(41114),o=t(70883);function a(){var e=(0,r._)(["\n  fragment HandleReplRedirectionReplRedirect on ReplRedirect {\n    replUrl\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment HandleReplRedirectionSubscriptionExpired on ReplSubscriptionExpired {\n    isOwner\n    replId\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,r._)(["\n  fragment HandleReplRedirectionRepl on Repl {\n    id\n    isOwner\n    language\n    ...ReplLinkRepl\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n      connectToWorkspace {\n        isAuthorized\n      }\n    }\n    org {\n      id\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c=(0,i.J1)(a()),u=(0,i.J1)(l()),d=(0,i.J1)(s(),o.r)},73588:(e,n,t)=>{"use strict";t.d(n,{_:()=>m});var r=t(83846),i=t(81073),o=t(21462),a=t(81986),l=t(36937),s=t(85051),c=t(4616),u=t(67843),d=t(84855),p=t.n(d),f=(0,l.CK)("ScrollToLatestButton.module.css",["--opacity","--scale","--y","--bottom-offset","--pointer-events"]);function h(e){var n;return n={},(0,r._)(n,f.y,e?"-8px":"0px"),(0,r._)(n,f.scale,e?"1":"0.25"),(0,r._)(n,f.opacity,e?"1":"0"),(0,r._)(n,f.pointerEvents,e?"auto":"none"),n}function m(e){var n=(0,o.useRef)(null);(0,a.d)(n,e.show,h);var t=e.bottomOffset?(0,r._)({},f.bottomOffset,e.bottomOffset+"px"):void 0;return(0,i.FD)("button",{style:t,ref:n,clsx:p().button,css:s.b.filledAndOutlined,onClick:e.onClick,children:[(0,i.Y)(u.A,{size:12,clsx:p().buttonContent}),(0,i.Y)(c.EY,{variant:"small",clsx:p().buttonContent,children:"Scroll to latest"})]})}},73762:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(55100),i=t(9527),o=t(71424);function a(){var e=(0,o.A)().container,n=(0,r.A)(),t=(0,i.A)(e,{fallbackToReplCo:!1}).url;if(!t)return null;var a=new URL(t).host,l=a.indexOf(":"),s="22";return -1!==l&&(a=a.substring(0,l),s="2022"),{sshUser:n,sshHostname:a,sshPort:s}}},73806:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 .25a.75.75 0 0 1 .53.22l5 5a.75.75 0 0 1-1.06 1.06l-3.72-3.72V10a.75.75 0 0 1-1.5 0V2.81L7.53 6.53a.75.75 0 0 1-1.06-1.06l5-5A.75.75 0 0 1 12 .25Zm0 13a.75.75 0 0 1 .75.75v7.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 1 1 1.06-1.06l3.72 3.72V14a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},74055:(e,n,t)=>{"use strict";t.d(n,{C:()=>w});var r=t(17844),i=t(93629),o=t(12694),a=t(81073),l=t(21462),s=t(47993),c=t(90329),u=t(32331),d=t(31092);t(85336);var p=t(11418),f=t(18509),h=t(27023);t(36075);var m=p.f+1,g=((0,f.x)({inlinePlaceholder:[h.wp.visibility.hidden,{pointerEvents:"none"}],portal:[h.wp.position.absolute,h.wp.zIndex(m)]}),t(36937)),v=t(78626),y=t(70707);function w(e){var n=e.targetElement,t=e.activeStep,p=e.goto,f=e.currentStepIndex,h=e.totalSteps,w=e.done,b=e.disableAnimation,S=e.placement,Y=e.cypressCloseData,_=e.onClickOutside,A=e.innerRef,C=e.width,k=e.colorway,x=void 0===k?"primary":k,D=e.doneText,E=(0,o._)((0,l.useState)(null),2),R=E[0],I=E[1],T=(0,o._)((0,l.useState)(null),2),F=T[0],P=T[1],L=(0,c.E)(n,R,{placement:void 0===S?"right":S,modifiers:[{name:"arrow",options:{element:F,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),U=(0,d.A)(function(){var e;null==(e=L.update)||e.call(L)},{type:"throttle",wait:100});(0,l.useEffect)(function(){U(n)},[n,U]),(0,l.useImperativeHandle)(A,function(){return{updatePosition:function(){var e;null==(e=L.update)||e.call(L)}}});var N=(0,u.A)(function(){_&&_()},[_]);return(0,s.createPortal)((0,a.FD)("div",(0,i._)((0,r._)({ref:function(e){N.current=e,I(e)},style:L.styles.popper,css:{transition:b?"all":"all 0.5s ease-out",zIndex:m+1,width:null!=C?C:320}},L.attributes.popper),{children:[(0,a.Y)(y.p,{title:t.title,subtitle:t.subtitle,icon:t.icon,content:t.content,onDismiss:w,currentStepIndex:f,onCurrentStepChange:p,totalSteps:h,cypressCloseData:void 0===Y?"tour-popover-close-button":Y,hideCloseButton:t.hideCloseButton,hideNavigation:t.hideNavigation,colorway:x,doneText:D}),(0,a.Y)("span",{style:L.styles.arrow,css:[v.RE,{"&::after":x?{backgroundColor:g.ky[x].dimmest,border:"1px solid "+g.ky[x].dimmer}:{backgroundColor:g.LU.backgroundDefault,border:"1px solid "+g.LU.backgroundHighest}}],ref:P})]})),document.body)}},74346:(e,n,t)=>{"use strict";function r(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0===t.moveThreshold;e.preventDefault();var i={x:e.pageX,y:e.pageY},o={x:0,y:0};n.start&&n.start({mouse:i,shiftKey:e.shiftKey});var a=function(e){var a={x:e.pageX,y:e.pageY};if(o={x:a.x-i.x,y:a.y-i.y},void 0!==t.moveThreshold&&!r){if(Math.abs(o.x)<t.moveThreshold&&Math.abs(o.y)<t.moveThreshold)return;r=!0}n.move({delta:o,shiftKey:e.shiftKey,mouse:a})},l=null,s=function(e){e.preventDefault(),l&&cancelAnimationFrame(l),l=requestAnimationFrame(function(){a(e)})},c=function(){l&&cancelAnimationFrame(l),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",c),document.removeEventListener("touchcancel",c),(void 0===t.moveThreshold||r)&&n.end&&n.end({delta:o,shiftKey:e.shiftKey})};document.addEventListener("pointermove",s),document.addEventListener("pointerup",c),document.addEventListener("touchcancel",c)}t.d(n,{j:()=>r})},74741:(e,n,t)=>{"use strict";t.d(n,{X:()=>a});var r=t(21462),i=t(90342),o=t(71424);function a(e){var n=(0,o.A)().ports,t=(0,i.w)(n);return(0,r.useMemo)(function(){return 0===t.length||void 0===e},[t.length,e])}},75081:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r="file://";function i(e){var n=e;return e.startsWith(r)&&(n=e.slice(r.length)),n.startsWith("/")&&(n=n.slice(1)),n}},75174:(e,n,t)=>{"use strict";t.d(n,{H:()=>Y,j:()=>b});var r=t(12694),i=t(86105),o=t(81073),a=t(21462),l=t(7868),s=t(86215),c=t(36937),u=t(18509),d=t(85051),p=t(27023),f=t(11769),h=t(4616),m=t(85389),g=t(27789),v=t(82450),y=t(6064),w=t(71872);function b(e){var n=e.secrets,t=e.otherSecrets,i=new Map,o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=(0,r._)(s.value,2),d=u[0],p=u[1];n.has(d)||i.set(d,p)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return{missing:i}}var S=(0,u.x)({root:[p.wp.borderRadius(8),{border:"1px solid "+c.LU.outlineDimmer}],button:[p.wp.reset.button,d.b.nofill,p.wp.rowWithGap(8),p.wp.align.center,p.wp.height(32),p.wp.px(8),{border:"0 none",borderBottomLeftRadius:0,borderBottomRightRadius:0}],subtitle:[{borderTop:"1px solid "+c.LU.outlineDimmest,top:-1},p.wp.py(8),p.wp.position.relative]});function Y(e){var n=e.secrets,t=e.otherSecrets,u=e.otherEnvName,d=e.onAddSecret,p=e.initialExpanded,Y=b({secrets:n,otherSecrets:t}).missing,_=(0,r._)((0,a.useState)(p),2),A=_[0],C=_[1],k=0===Y.size;if((0,a.useEffect)(function(){k&&C(!1)},[k]),k)return null;var x="".concat(Y.size," ").concat((0,l.A)("secret",Y.size)," out of sync"),D=1===Y.size?"A ".concat(u," secret is missing from this environment"):"".concat(Y.size," ").concat(u," secrets are missing from this environment");return(0,o.FD)(m.S,{css:S.root,children:[(0,o.FD)(m.S,{css:S.button,tag:"button",onClick:function(){return C(function(e){return!e})},children:[(0,o.FD)(m.S,{grow:!0,shrink:!0,row:!0,gap:8,align:"center",children:[(0,o.Y)(w.A,{color:c.LU.orangeDefault}),(0,o.Y)(h.EY,{multiline:!1,children:x})]}),A?(0,o.Y)(v.A,{}):(0,o.Y)(g.A,{})]}),A?(0,o.FD)(m.S,{px:8,pb:8,children:[(0,o.Y)(h.EY,{css:S.subtitle,color:"dimmer",children:D}),(0,o.Y)(m.S,{gap:8,children:(0,i._)(Y.entries()).map(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];return(0,o.FD)(m.S,{row:!0,gap:8,children:[(0,o.FD)(m.S,{grow:!0,shrink:!0,row:!0,gap:8,children:[(0,o.Y)(s.Ge,{value:t}),(0,o.Y)(s.iJ,{value:i})]}),i?(0,o.Y)(f.$n,{iconLeft:(0,o.Y)(y.A,{}),variant:"outlined",text:"Add secret",onClick:function(){return d({key:t,value:i})}}):null]},t)})})]}):null]})}},75268:(e,n,t)=>{"use strict";t.d(n,{S:()=>o,V:()=>a});var r=t(12694),i=[{"Anthropic API Key":/(sk-ant-api03-[\w-]{93}AA)/g,"AWS API Key":/AKIA[0-9A-Z]{16}/g,"AWS AppSync GraphQL Key":/da2-[a-z0-9]{26}/g,"AWS MWS ID":/mzn\.mws\.[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,"AWS client ID":/(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}/g,"Discord Bot Token":/(?:N|M|O)[a-zA-Z0-9]{23}\\.[a-zA-Z0-9-_]{6}\\.[a-zA-Z0-9-_]{27}/g,"Discord Webhook Url":/https?:\/\/(?:ptb\.|canary\.)?discord\.com\/api(?:\/v\d{1,2})?\/webhooks\/(\d{17,19})\/([\w-]{68})/gi,"Dynatrace Token":/dt0[a-zA-Z]{1}[0-9]{2}\\.[A-Z0-9]{24}\\.[A-Z0-9]{64}/gi,"Facebook Access Token":/EAACEdEose0cBA[0-9A-Za-z]+/g,"Facebook OAuth":/[fF][aA][cC][eE][bB][oO][oO][kK].*['|"][0-9a-f]{32}['|"]/g,"Github Personal Access Token":/ghp_[0-9a-zA-Z]{36}/g,"Github OAuth Access Token":/gho_[0-9a-zA-Z]{36}/g,"Github App Installation Access Token":/(ghu|ghs)_[0-9a-zA-Z]{36}/g,"Github App Refresh Token":/ghr_[0-9a-zA-Z]{76}/g,"Generic API Key":/[aA][pP][iI]_?[kK][eE][yY].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Generic Secret":/[sS][eE][cC][rR][eE][tT].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Google API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google Gmail API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google OAuth Access Token":/ya29\\.[0-9A-Za-z\\-_]+/g,"Google YouTube API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Heroku API Key":/[hH][eE][rR][oO][kK][uU].*[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/g,"MailChimp API Key":/[0-9a-f]{32}-us[0-9]{1,2}/g,"Mailgun API Key":/key-[0-9a-zA-Z]{32}/g,"Mapbox, Public Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"Mapbox, Secret Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"npm Access Token":/npm_[0-9a-zA-Z]{36}/g,"NuGet API Key":/oy2[a-z0-9]{43}/g,"OpenAI API Key":/sk-[a-zA-Z0-9_-]+/g,"PGP private key block":/-----BEGIN PGP PRIVATE KEY BLOCK-----/g,"Picatic API Key":/sk_live_[0-9a-z]{32}/g,"PyPI API Token":/pypi-AgEIcHlwaS5vcmc[A-Za-z0-9-_]{50,1000}/g,"SSH (DSA) private key":/-----BEGIN DSA PRIVATE KEY-----/g,"SSH (EC) private key":/-----BEGIN EC PRIVATE KEY-----/g,"SSH (RSA) private key":/-----BEGIN RSA PRIVATE KEY-----/g,"SendGrid API Key":/SG\\.[0-9A-Za-z\\-_]{22}\\.[0-9A-Za-z-_]{43}/g,"Shopify Access Token":/shpat_[a-fA-F0-9]{32}/g,"Shopify App Shared Secret":/shpss_[a-fA-F0-9]{32}/g,"Shopify Custom App Access Token":/shpca_[a-fA-F0-9]{32}/g,"Shopify Private App Password":/shppa_[a-fA-F0-9]{32}/g,"Slack Token":/(xox[pborsa]-[0-9]{12}-[0-9]{12}-[0-9]{12}-[a-z0-9]{32})/g,"Slack API Token":/xox[baprs]-([0-9a-zA-Z]{10,48})?/g,"Slack Live API Key":/(?:r|s)k_live_[0-9a-zA-Z]{24}/g,"Slack Test API Key":/(?:r|s)k_test_[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Bot Access Token":/xoxb-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Configuration Token":/xoxe.xoxp-1-[0-9a-zA-Z]{166}/g,"Slack, OAuth v2 Refresh Token":/xoxe-1-[0-9a-zA-Z]{147}/g,"Slack, OAuth v2 User Access Token":/xoxp-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack Webhook":/https:\/\/hooks.slack.com\/services\/T[a-zA-Z0-9_]{10}\/B[a-zA-Z0-9_]{10}\/[a-zA-Z0-9_]{24}/g,"Square Access Token":/sq0atp-[0-9A-Za-z\\-_]{22}/g,"Square OAuth Secret":/sq0csp-[0-9A-Za-z\\-_]{43}/g,"Stripe API Key":/sk_live_[0-9a-zA-Z]{24}/g,"Stripe Restricted API Key":/rk_live_[0-9a-zA-Z]{24}/g,"Twilio API Key":/SK[0-9a-fA-F]{32}/g,"Twitter Access Token":/[tT][wW][iI][tT][tT][eE][rR].*[1-9][0-9]+-[0-9a-zA-Z]{40}/g,"Twitter OAuth":/[tT][wW][iI][tT][tT][eE][rR].*['|"][0-9a-zA-Z]{35,44}['|"]/g},{"Instagram oauth":/[0-9a-fA-F]{7}\.[0-9a-fA-F]{32}/g}];function o(e){if(e.length>2e3)return!1;var n=!0,t=!1,o=void 0;try{for(var a,l=i[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value,c=!0,u=!1,d=void 0;try{for(var p,f=Object.entries(s)[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=(0,r._)(p.value,2),m=h[0],g=h[1],v=e.search(g);if(!(v<0)){var y=e.match(g);if(y){var w=v+y[0].length;return{start:v,end:w,secret:e.slice(v,w),provider:m}}}}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}catch(e){t=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw o}}return!1}function a(e){for(var n=null,t="",o=0,a=0;a<e.length;a++){var l=e[a],s=" "===l||"\n"===l||"	"===l||"\r"===l;if(s||(o=t?o:a,t+=l),t&&(s||a===e.length-1)){if(t.length<16){t="",o=0;continue}e:for(;t;){var c=!0,u=!1,d=void 0;try{for(var p,f=i[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value,m=!0,g=!1,v=void 0;try{for(var y,w=Object.entries(h)[Symbol.iterator]();!(m=(y=w.next()).done);m=!0){var b=(0,r._)(y.value,2),S=b[0],Y=b[1];Y.lastIndex=0;var _=Y.exec(t);if(_){var A=_[0].length,C=_.index,k=C+A;null!=n||(n=[]),n.push({start:o+C,end:o+k,secret:_[0],provider:S}),t=t.slice(A),o+=A;continue e}}}catch(e){g=!0,v=e}finally{try{m||null==w.return||w.return()}finally{if(g)throw v}}}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}t="",o=0}}}return n}},75679:(e,n,t)=>{"use strict";t.d(n,{Bm:()=>U,CK:()=>V,Gp:()=>G,KA:()=>Z,UC:()=>B,Y9:()=>P,Yw:()=>M,af:()=>z,ou:()=>W});var r=t(29935),i=t(82643),o=t(81073),a=t(67313),l=t.n(a),s=t(21462),c=t(48686),u=t(41467),d=t(27741),p=t(70871),f=t(5966),h=t(90890),m=t(54682),g=t(71424),v=t(30267),y=t(59255),w=t(63816),b=t(12576),S=t(79166),Y=t(50301),_=t(13353),A=t(42793),C=t(36937),k=t(27023),x=t(85389),D=t(41526),E=t(77495),R=t(54148),I=t(49748),T=t(81650),F=(0,A.AH)([k.wp.height(28),k.wp.flex.row,k.wp.align.center,{borderBottom:"1px solid ".concat(C.LU.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function P(e){return"/replEnvironmentDesktop"!==l().pathname?null:(0,o.Y)(x.S,{css:F,children:e.children})}var L=(0,A.AH)([k.wp.flex.row,k.wp.align.center,k.wp.flex.growAndShrink(1),k.wp.overflowX("auto"),k.wp.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function U(e){return(0,o.Y)(x.S,{css:L,children:e.children})}var N=(0,A.AH)([k.wp.flex.row,k.wp.align.center,k.wp.height("100%")]),O=(0,A.AH)([k.wp.flex.row,k.wp.align.center,k.wp.height("100%"),k.wp.px(2)]);function M(e){return(0,o.Y)(x.S,{css:N,children:(0,o.Y)(x.S,{css:O,children:e.children})})}var H=(0,A.AH)([k.wp.flex.growAndShrink(1),k.wp.position.relative,k.wp.overflow("hidden"),k.wp.borderRadius(0,0,8,8)]);function B(e){return(0,o.Y)(x.S,{css:[H,e.children?k.wp.center:null],children:e.children})}function z(e){return{type:(0,S.QY)({path:e}),data:{path:e}}}function W(e){var n=e.path,t=e.performPaneOperation,r=e.children,i=(0,s.useCallback)(function(e){t({operation:"replace",pane:z(e)})},[t]);return(0,o.FD)(P,{children:[(0,o.Y)(U,{children:(0,o.Y)(w.D,{path:n,onFileClick:i})}),r?(0,o.Y)(M,{children:r}):null]})}function G(e,n){return{match:y.G2,data:{label:"Download",icon:(0,o.Y)(R.A,{}),type:"action",run:function(){return(0,r._)(function(){var t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,n.readFile(e)];case 1:if((t=r.sent()).error)return[2,{type:"error",message:"Error downloading file"}];return[4,(0,f.A)(e,t.content)];case 2:return r.sent(),[2]}})})()}}}}function V(e,n){return{match:y.G2,data:{label:"Download",icon:(0,o.Y)(R.A,{}),type:"action",run:function(){return(0,r._)(function(){var t,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,n.readFile(e)];case 1:if((t=i.sent()).error||!(r=t.content.toString("base64")))return[2,{type:"error",message:"Error downloading file"}];return o=(0,u.WP)(e),(0,v._z)({messageType:_.tF.DOWNLOAD_FILE,fileName:o,fileContent:r},(0,c.Ak)()),[2]}})})()}}}}function Z(e){var n=e.path,t=e.performPaneOperation,a=(0,g.A)(),l=(0,Y.gi)(),s=(0,m.m6)();return(0,d.A)(function(){var e,c;return n?[{match:y.G2,data:{label:"Copy file path",icon:(0,o.Y)(D.A,{}),type:"action",run:function(){(0,p.default)(n)}}},{match:y.G2,data:{label:"Copy link",icon:(0,o.Y)(I.A,{}),type:"action",run:function(){var e=(0,b.Ax)({path:n});(0,p.default)(e)}}},(e=a.fs,c=function(e){t({operation:"replace",pane:{type:(0,S.QY)({path:e}),data:{path:e}}})},{match:y.G2,data:{label:"Duplicate file",icon:(0,o.Y)(E.A,{}),type:"action",run:function(){return(0,r._)(function(){var t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,h.A)(n,e)];case 1:return t=r.sent(),[3,3];case 2:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return c(t),[2]}})})()}}}),s?V(n,a.fs):G(n,a.fs),{match:y.G2,data:{label:"Delete",icon:(0,o.Y)(T.A,{color:C.LU.redDefault}),type:"action",run:function(){l(n)}}}]:null},[n,a.fs,s,l,t])}},75802:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(81073),i=t(21462),o=t(54907),a=t(85389);function l(e){var n=e.modules,t=(0,i.useMemo)(function(){return n.filter(function(e){return"replit"!==e.id})},[n]);return(0,r.Y)(a.S,{gap:8,children:t.map(function(e){return(0,r.Y)(o.A,{module:e,defaultExpanded:!0,isInstalled:!0},e.id)})})}},75813:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.FD)("g",{clipPath:"url(#clip0_8159_320)",children:[(0,o.Y)("path",{fill:"#1ABCFE",d:"M12 12c0-2.187 1.734-3.96 3.873-3.96 2.14 0 3.873 1.773 3.873 3.96 0 2.187-1.734 3.96-3.873 3.96C13.734 15.96 12 14.186 12 12Z"}),(0,o.Y)("path",{fill:"#0ACF83",d:"M4.254 19.919c0-2.187 1.734-3.96 3.873-3.96H12v3.96c0 2.186-1.734 3.959-3.873 3.959-2.14 0-3.873-1.773-3.873-3.96Z"}),(0,o.Y)("path",{fill:"#FF7262",d:"M12 .122v7.919h3.873c2.14 0 3.873-1.773 3.873-3.96 0-2.186-1.734-3.959-3.873-3.959H12Z"}),(0,o.Y)("path",{fill:"#F24E1E",d:"M4.254 4.081c0 2.187 1.734 3.96 3.873 3.96H12V.122H8.127c-2.14 0-3.873 1.773-3.873 3.96Z"}),(0,o.Y)("path",{fill:"#A259FF",d:"M4.254 12c0 2.187 1.734 3.96 3.873 3.96H12V8.04H8.127c-2.14 0-3.873 1.773-3.873 3.96Z"})]}),(0,o.Y)("defs",{children:(0,o.Y)("clipPath",{id:"clip0_8159_320",children:(0,o.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}},75821:(e,n,t)=>{"use strict";t.d(n,{Dy:()=>r,RB:()=>o,Wf:()=>i});var r=18,i=30,o=28},76746:(e,n,t)=>{"use strict";t.d(n,{L:()=>h,i:()=>m});var r=t(83846),i=t(81073),o=t(75821),a=t(36937),l=t(18509),s=t(15311),c=t(27023),u=(0,s.v)(["connectorHeight","connectorLeft","markerTop","markerBottom","markerLeft"]),d=u.cssVars,p=u.styleTokens,f=(0,l.x)({connectorSegmentBorder:[c.wp.position.absolute,c.wp.left(p.connectorLeft),c.wp.width(o.Dy),c.wp.height(p.connectorHeight),c.wp.top("100%"),{borderRight:"2px solid ".concat(a.LU.outlineDimmer)}],parallelSegmentBorder:[c.wp.position.absolute,c.wp.top(0),c.wp.left(p.connectorLeft),c.wp.bottom(0),c.wp.height(p.connectorHeight),c.wp.width(o.Dy),{borderLeft:"2px solid ".concat(a.LU.outlineDimmer),borderBottom:"2px solid ".concat(a.LU.outlineDimmer),borderRadius:"0 0 0 50px"}],parallelSegmentConnectorBorder:[c.wp.position.absolute,c.wp.top(0),c.wp.bottom(0),c.wp.left(p.connectorLeft),c.wp.height("115%"),{borderLeft:"2px solid ".concat(a.LU.outlineDimmer)}],marker:[c.wp.position.absolute,c.wp.top(-2),c.wp.left(-3),c.wp.height(4),c.wp.width(4),c.wp.backgroundColor.foregroundDimmest,c.wp.borderRadius("full")],sequentialMarkerBorder:[c.wp.position.relative,c.wp.top(4),c.wp.left(p.markerLeft),c.wp.height(12),c.wp.width(o.Wf),{borderTop:"2px solid ".concat(a.LU.outlineDimmer),borderRight:"2px solid ".concat(a.LU.outlineDimmer),borderRadius:"0 10px 0 0"}],parallelMarkerBorder:[c.wp.position.relative,c.wp.top(4),c.wp.left(p.markerLeft),c.wp.height(12),c.wp.width(o.Wf),{borderLeft:"2px solid ".concat(a.LU.outlineDimmer)}]});function h(e){var n,t,a=e.mode,l=e.dragAble,s=e.hideBottom,c=void 0!==s&&s,u=e.connectorHeight,p=e.connectorLeft;return"sequential"===(void 0===a?"sequential":a)?(0,i.Y)(i.FK,{children:c?null:(0,i.Y)("div",{css:f.connectorSegmentBorder,style:(n={},(0,r._)(n,d.connectorHeight,"".concat(null!=u?u:8,"px")),(0,r._)(n,d.connectorLeft,"".concat(null!=p?p:0,"px")),n)})}):(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{css:f.parallelSegmentBorder,style:(t={width:void 0===l||l?o.Dy-6:o.Dy},(0,r._)(t,d.connectorHeight,"".concat(null!=u?u:25,"px")),(0,r._)(t,d.connectorLeft,"".concat(null!=p?p:-12,"px")),t)}),c?null:(0,i.Y)("div",{css:f.parallelSegmentConnectorBorder,style:(0,r._)({},d.connectorLeft,"".concat(null!=p?p:-12,"px"))})]})}function m(e){var n,t,o=e.top,a=void 0===o?-2:o,l=e.bottom,s=void 0===l?0:l,c=e.left;return"sequential"===e.mode?(0,i.Y)("div",{css:f.sequentialMarkerBorder,style:(n={},(0,r._)(n,d.markerTop,"".concat(a,"px")),(0,r._)(n,d.markerBottom,"".concat(s,"px")),(0,r._)(n,d.markerLeft,"".concat(c,"px")),n),children:(0,i.Y)("div",{css:f.marker})}):(0,i.Y)("div",{css:f.parallelMarkerBorder,style:(t={},(0,r._)(t,d.markerTop,"".concat(a,"px")),(0,r._)(t,d.markerBottom,"".concat(s,"px")),(0,r._)(t,d.markerLeft,"".concat(c,"px")),t),children:(0,i.Y)("div",{css:f.marker})})}},76947:e=>{e.exports={container:"EnabledTogglePill_container__25NLk",closeButton:"EnabledTogglePill_closeButton__XZq_W",iconClickable:"EnabledTogglePill_iconClickable__Rqq54"}},76982:(e,n,t)=>{"use strict";t.d(n,{A:()=>M});var r,i=t(29935),o=t(12694),a=t(86105),l=t(82643),s=t(21462),c=t(90629),u=t(79932),d=t(71514),p=t(99528),f=t(34140),h=t(41930),m=t(98679),g=t(31092),v=t(70871),y=t(10752),w=t(61191),b=t(88873),S=t(69945),Y=t.n(S)()(function(){if("undefined"!=typeof AudioContext){var e=(r||(r=new AudioContext),r),n=e.createBufferSource();e.decodeAudioData(function(e){for(var n=window.atob(e),t=n.length,r=new Uint8Array(t),i=0;i<t;i++)r[i]=n.charCodeAt(i);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(t){n.buffer=t,n.connect(e.destination),n.start(0)})}},500,{leading:!0,trailing:!0}),_="replit-icons-font",A=t(37872),C="BESbswy";function k(e){return x.apply(this,arguments)}function x(){return(x=(0,i._)(function(e){return(0,l.YH)(this,function(n){switch(n.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,n){return E.apply(this,arguments)}(document.fonts,e)];case 1:case 3:return n.sent(),[2];case 2:return[4,Promise.all([R("serif",e),R("sans-serif",e),R("monospace",e)])]}})})).apply(this,arguments)}function D(e){var n=e.family,t=e.style,r=e.weight;return"".concat(void 0===t?"normal":t," ").concat(void 0===r?"normal":r," 100px ").concat(n)}function E(){return(E=(0,i._)(function(e,n){var t,r,i,o,a,s;return(0,l.YH)(this,function(l){return t=n.fontInfo,i=void 0===(r=n.characters)?C:r,a=void 0===(o=n.timeout)?3e3:o,s=D(t),[2,new Promise(function(n,r){var o=!1,l=A.vF.timeStart({family:t.family,style:t.style,weight:t.weight}),c=setTimeout(function(){o=!0,l("xterm font loading timed out"),n()},a);e.load(s,i).then(function(){o||(clearTimeout(c),n())}).catch(function(e){o||(clearTimeout(c),r(e))})})]})})).apply(this,arguments)}function R(e,n){return I.apply(this,arguments)}function I(){return(I=(0,i._)(function(e,n){var t,r,i,o,a,s,c,u,d;return(0,l.YH)(this,function(l){return(t=n.fontInfo,i=void 0===(r=n.characters)?C:r,a=void 0===(o=n.timeout)?3e3:o,s=D(t),(c=document.createElement("span")).innerText=i,c.style.font="normal normal 100px ".concat(e),c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",document.body.appendChild(c),u=c.offsetWidth,c.style.font=s,(d=function(){return u!==c.offsetWidth})())?[2]:[2,new Promise(function(e,n){var r=setInterval(function(){d()&&(clearInterval(r),clearTimeout(i),document.body.removeChild(c),e())},50),i=setTimeout(function(){if(clearInterval(r),document.body.removeChild(c),d())return void e();n(Error("Font loading timed out "+t.family))},a)})]})})).apply(this,arguments)}function T(e){c.Cp(e)}var F='"ReplitHack"',P=String.fromCharCode(61095);function L(){return(L=(0,i._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:if(!document.getElementById(_)){var n=document.createElement("style");n.id=_,n.type="text/css",n.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(n)}return[4,Promise.all([k({fontInfo:{family:"replit-icons"},characters:P}).catch(T),k({fontInfo:{family:F,weight:"400"}}).catch(T),k({fontInfo:{family:F,weight:"400",style:"italic"}}).catch(T),k({fontInfo:{family:F,weight:"700"}}).catch(T),k({fontInfo:{family:F,weight:"700",style:"italic"}}).catch(T)])];case 1:return e.sent(),[2]}})})).apply(this,arguments)}var U=t(66147),N=t(95570);function O(){return/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)}function M(e){var n,r,S,_,A,C,k,x,D,E,R,I=(0,o._)((0,s.useState)(null),2),T=I[0],P=I[1],M=(0,o._)((0,s.useState)(null),2),H=M[0],B=M[1],z=(0,U.V)(),W=(0,d.g)("fontSize","accessibleTerminal","shellBellAudio").preferences,G=W.fontSize,V=W.accessibleTerminal,Z=W.shellBellAudio,j=(0,y.iO)(),q=(0,f.A)(),K=(0,h.a)(),$=null==e?void 0:e.openFile,J=(0,m.A)(null==e?void 0:e.openWebview),Q=null==e?void 0:e.listFiles,X=(0,s.useMemo)(function(){return $&&Q?{openFile:$,listFiles:Q}:null},[$,Q]),ee=(0,m.A)(null==e?void 0:e.onInBandOSCMessages),en={screenReaderMode:V,fileLinking:X,terminalTheme:z,fontSize:G,scrollback:null==e?void 0:e.scrollback,openPane:null!=(E=null==e?void 0:e.openPane)?E:null,emitPaneMetrics:null==e?void 0:e.emitPaneMetrics,convertEol:null!=(R=null==e?void 0:e.convertEol)&&R},et=(0,m.A)(en),er=(0,g.A)(function(){(null==e?void 0:e.autoFit)!==!1&&(null==H||H.fit())},{type:"debounce",wait:200}),ei=(0,s.useRef)(null),eo=(0,s.useRef)(null),ea=(0,m.A)(null==e?void 0:e.size),el=(0,b.bU)();return(0,s.useLayoutEffect)(function(){if(T){var n=!1,r=[];return(function(){return s.apply(this,arguments)})().catch(function(e){if(e.message&&e.message.toLowerCase().includes("loading chunk"))return void c.v4(function(n){n.setExtra("message",e.message),n.setExtra("stack",e.stack),c.Cp(Error("Loading chunk failed"))});j({error:e,origin:"Xterm: init"})}),function(){r.forEach(function(e){return e()})}}function s(){return(s=(0,i._)(function(){var i,s,d,f,h,m,g,y,S,Y,_,A,C,k,x,D,E,R,I,P,U,M,H,z,W,G;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,Promise.all([Promise.all([(0,u.jc)(function(){return t.e(1296).then(t.t.bind(t,39989,23))}),(0,u.jc)(function(){return t.e(1669).then(t.t.bind(t,61669,23))}),(0,u.jc)(function(){return t.e(3618).then(t.t.bind(t,63618,23))}),(0,u.jc)(function(){return t.e(7088).then(t.t.bind(t,47088,23))}),(0,u.jc)(function(){return t.e(1497).then(t.t.bind(t,51497,23))}),(0,u.jc)(function(){return t.e(730).then(t.bind(t,70730))}),(0,u.jc)(function(){return t.e(9411).then(t.bind(t,79411))}),(0,u.jc)(function(){return t.e(4695).then(t.t.bind(t,94695,23))}),(0,u.jc)(function(){return t.e(1836).then(t.t.bind(t,21836,23))})]),function(){return L.apply(this,arguments)}()])];case 1:var V;if(g=o._.apply(void 0,[l.sent(),1]),S=(y=(0,o._)(g[0],9))[0].Terminal,Y=y[1].FitAddon,_=y[2].SearchAddon,A=y[3].WebLinksAddon,C=y[4].Unicode11Addon,k=y[5].FileLinkAddon,x=y[6].PaneLinkAddon,D=y[7].CanvasAddon,E=y[8].WebglAddon,n||!T)return[2];return I={allowProposedApi:!0,cursorBlink:!1,scrollback:null!=(R=et.current.scrollback)?R:1e4,tabStopWidth:4,fontFamily:"".concat(F,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:et.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,convertEol:et.current.convertEol,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:et.current.terminalTheme,screenReaderMode:et.current.screenReaderMode,logger:{trace:function(e,n){return(i=N).trace.apply(i,["xterm: "+e].concat((0,a._)(n)))},debug:function(e,n){return(s=N).debug.apply(s,["xterm: "+e].concat((0,a._)(n)))},info:function(e,n){return(d=N).info.apply(d,["xterm: "+e].concat((0,a._)(n)))},warn:function(e,n){return(f=N).warn.apply(f,["xterm: "+e].concat((0,a._)(n)))},error:function(e,n){"string"==typeof e&&e.includes("Parsing error")||N.error("xterm: "+e,n)}}},(null==(h=ea.current)?void 0:h.cols)!==void 0&&(I.cols=ea.current.cols),(null==(m=ea.current)?void 0:m.rows)!==void 0&&(I.rows=ea.current.rows),P=new S(I),et.current.fileLinking?(ei.current=new k(et.current.fileLinking.openFile,et.current.fileLinking.listFiles),P.loadAddon(ei.current)):ei.current=null,!eo.current&&(null==e?void 0:e.openPane)&&(eo.current=new x(e.openPane,e.emitPaneMetrics)),eo.current&&P.loadAddon(eo.current),U=new Y,P.loadAddon(U),M=new A((V=function(e){q?p.M.openExternalUrl(e):window.open(e,"_blank")},function(e,n){var t;try{t=new URL(n)}catch(e){return}if(("0.0.0.0"===t.hostname||"localhost"===t.hostname)&&void 0!==J.current)return void J.current(t.pathname,parseInt(t.port,10));V(n)})),P.loadAddon(M),H=new _,P.loadAddon(H),z=new C,P.loadAddon(z),P.unicode.activeVersion="11",P.open(T),r.push(function(){try{P.dispose()}catch(e){}}),function(){try{if(!(!function(){if(!O())return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&(O()||!K||!(window.devicePixelRatio>1))&&document.createElement("canvas").getContext("webgl2"))){var e=new D;P.loadAddon(e);return}var n=new E;P.loadAddon(n),n.onContextLoss(function(){n.dispose(),P.loadAddon(new D)})}catch(e){var t=new D;P.loadAddon(t)}}(),W=!1,G=null,P.attachCustomKeyEventHandler(function(e){var n,t,r=(0,w.te)(e);if(r){var i=r;G&&(i=(0,w.Y)(G,r));var o=el(i);switch(o.kind){case b.VO.NoMatch:G=null;break;case b.VO.WaitingForChord:return G=o.key,!1;case b.VO.MatchFound:return G=null,!1}}return n=P,t=e,(!window.navigator.clipboard||"c"!==t.key.toLowerCase()||!t.ctrlKey||!t.shiftKey||("keyup"===t.type&&n.hasSelection()&&(0,v.default)(n.getSelection()).catch(function(e){c.v4(function(n){n.setTag("xterm-clipboard",!0),n.setExtra("type","copy"),c.Cp(e)})}),t.preventDefault(),t.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!W)&&(W="escape"===e.key.toLowerCase(),!0))}),ee.current&&Object.entries(ee.current).forEach(function(e){var n=(0,o._)(e,2),t=n[0],r=n[1];P.parser.registerOscHandler(Number(t),function(e){return r(P,e),!0})}),B({onKey:P.onKey.bind(P),onData:P.onData.bind(P),onResize:P.onResize.bind(P),write:P.write.bind(P),fit:function(){var e=T.getBoundingClientRect(),n=e.width,t=e.height;n>0&&t>0&&U.fit()},focus:function(){return P.focus()},clear:function(){return P.clear()},findPrevious:function(e,n){return H.findPrevious(e,n)},findNext:function(e,n){return H.findNext(e,n)},getSize:function(){return{cols:P.cols,rows:P.rows}},paste:function(e){return P.paste(e)},_term:P}),er(T),[2]}})})).apply(this,arguments)}},[T,er,et,j,ea,el,q,K,J,ee,null==e?void 0:e.openPane,null==e?void 0:e.emitPaneMetrics]),n=null==H?void 0:H._term,r=ei,S=eo,A=(_=en).screenReaderMode,C=_.fileLinking,k=_.terminalTheme,x=_.openPane,D=_.emitPaneMetrics,(0,s.useEffect)(function(){n&&k&&(n.options.theme=k)},[n,k]),(0,s.useEffect)(function(){n&&(n.options.screenReaderMode=A)},[n,A]),(0,s.useEffect)(function(){if(n){if(C){if(!r.current){var e=!1;return t.e(730).then(t.bind(t,70730)).then(function(t){var i=t.FileLinkAddon;e||(r.current=new i(C.openFile,C.listFiles),n.loadAddon(r.current))}),function(){e=!0}}r.current.update(C.openFile,C.listFiles),r.current.reactivate()}else r.current&&r.current.deactivate();if(x){if(!S.current){var i=!1;return t.e(9411).then(t.bind(t,79411)).then(function(e){var t=e.PaneLinkAddon;i||(S.current=new t(x,D),n.loadAddon(S.current))}),function(){i=!0}}S.current.update(x,null!=D?D:null)}else S.current&&S.current.deactivate()}},[n,C,r,S,x,D]),(0,s.useEffect)(function(){var e=null==H?void 0:H._term;e&&G&&e.options.fontSize!==G&&(e.options.fontSize=G,e.refresh(0,e.rows-1),H.fit())},[G,H]),(0,s.useEffect)(function(){if(Z){var e=null==H?void 0:H._term;if(e)return e.onBell(Y).dispose}},[Z,H]),[H,P]}},77100:e=>{e.exports={trajectoryItem:"SamplingEvent_trajectoryItem__p1G4S"}},77252:(e,n,t)=>{"use strict";t.d(n,{A:()=>Y});var r=t(17844),i=t(93629),o=t(12694),a=t(86105),l=t(21462),s=t(69945),c=t.n(s),u=t(96202),d=t(84515),p=t(44781),f=t(86550),h=t(1982),m=t(55100),g=t(27741),v=t(71424),y=t(15095),w=t(63951);function b(e,n){if(!e)return null;var t,r=e.state.field(y.K1),i=e.state.field(y.TW),o=null!=(t=r[n])?t:(null==i?void 0:i.id)===n?i:null;return o||null}function S(e,n){if(!e)return null;var t=b(e,n);if(!t)return null;var r=Math.min(t.indexStart,t.indexEnd),i=Math.max(t.indexStart,t.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),s=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:s}}function Y(e,n,t){var s=(0,h.A)().showError,Y=(0,m.A)(),_=(0,f.A)().map(function(e){return e.username}),A=(0,v.A)().fs,C=(0,d.Mk)({variables:{id:e}}),k=C.data,x=C.error,D=C.loading,E=C.client,R=function(){if(D||!k){var t;return!!n&&(null==(t=n.state.field(y.TW))?void 0:t.id)===e}return"AnnotationAnchor"!==k.thread.__typename}(),I=(0,l.useMemo)(function(){return D||!k?null:"UserError"===k.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===k.thread.__typename?k.thread:null},[k,e,D]),T=(0,o._)((0,d.v4)({onError:function(e){return s(e.message)},update:function(e,n){var t,r;return n.errors?void n.errors.forEach(function(e){return s(e.message)}):(null==(r=n.data)||null==(t=r.createThread)?void 0:t.__typename)==="UserError"?void s(n.data.createThread.message):void 0}}),1)[0],F=(0,o._)((0,d.ET)({onError:function(e){return s(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return s(e.message)});var t,r=null==(t=n.data)?void 0:t.createThreadMessage;r&&"UserError"===r.__typename&&s(r.message)}}),1)[0],P=(0,o._)((0,d.eP)({onError:function(e){return s(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return s(e.message)});var t,r=null==(t=n.data)?void 0:t.updateThread;r&&"UserError"===r.__typename&&s(r.message)}}),1)[0],L=(0,o._)((0,u.CY)(),1)[0],U=(0,g.A)(function(){return c()(L,1e3,{trailing:!1})},[L]),N=function(){var e=null==k?void 0:k.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,fullName:e.fullName,image:e.image}}:{}};return{thread:I,isPlaceholder:R,error:x,loading:D,getHighlight:S,getLatestAnchor:function(){return b(n,e)},updateThread:function(e){var n,t=e.changes,o=(null==k||null==(n=k.thread)?void 0:n.__typename)==="AnnotationAnchor"?k.thread:null;if(!o)throw Error("expected thread");P({variables:{id:o.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i._)((0,r._)({},o,t),{isResolved:"boolean"==typeof t.isResolved?t.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l=o.message,s=o.messageId,c=(0,w.vY)(l,{users:(0,a._)(_).concat(["everyone"])}),u={id:s,text:l,mentions:c.mentions};if(R&&n&&t){var f=n.state.field(y.TW),h={id:e,replId:Y,indexStart:null==f?void 0:f.indexStart,indexEnd:null==f?void 0:f.indexEnd,otVersion:A.getOTVersion(t),path:t};T({variables:{thread:h,message:u,highlight:S(n,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i._)((0,r._)({__typename:"AnnotationAnchor"},h,N()),{messages:[(0,i._)((0,r._)({id:s,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:h.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),E.writeQuery({query:d.c_,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i._)((0,r._)((0,i._)((0,r._)({},h),{isResolved:!1,isGeneral:!1}),N()),{messages:[(0,i._)((0,r._)({id:s,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:h.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null==k?void 0:k.currentUser}});var m=E.readQuery({query:p.FZ,variables:{replId:Y,path:t}});if(m){var g,v,b=(null==(v=m.threadsByFile)?void 0:v.__typename)==="ThreadsByFileResult"?m.threadsByFile.threads:[],C=N().user;E.writeQuery({query:p.FZ,variables:{replId:Y,path:t},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a._)(b).concat([(0,r._)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:C,isResolved:!1,participants:[C]},h)])}}})}return}var x=(null==k||null==(g=k.thread)?void 0:g.__typename)==="AnnotationAnchor"?k.thread:null;if(!x)throw Error("expected thread");F({variables:{replId:Y,threadId:x.id,threadMessage:u,highlight:S(n,x.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i._)((0,r._)({},x),{messages:(0,a._)(x.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,i._)((0,r._)({},N(),u),{content:{text:u.text,__typename:"TextMessageContentType"},anchor:{id:x.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},changeThreadMessage:function(n){U({variables:{threadId:e,messageId:n.messageId,message:null}})}}}},77271:(e,n,t)=>{"use strict";t.d(n,{j:()=>N});var r=t(81073),i=t(91326),o=t(19807),a=t(3549),l=t(24478),s=t(107),c=t(21462),u=t(64912),d=t(78502),p=t(32900),f=t(81740),h=t(61556),m=t(59743),g=t(26176),v=t(11769),y=t(4616),w=t(85389),b=t(47973),S=t(63456),Y=t(28174),_=t(57693),A=t(58646),C=t(85154),k=t.n(C);function x(){return(0,r.Y)(o.A,{pane:{type:"webview"},headerText:"Preview will be available soon",bodyText:"".concat((0,u.Nn)({capitalizeFirstChar:!0})," is working…"),icon:(0,r.Y)(Y.A,{size:48})})}function D(){return(0,r.Y)(o.A,{pane:{type:"webview"},icon:(0,r.Y)(_.A,{size:48}),headerText:"Your app is not running",body:(0,r.FD)(w.S,{align:"center",row:!0,gap:4,children:[(0,r.Y)(m.d,{})," to preview your app."]})})}function E(){return(0,r.Y)(o.A,{pane:{type:"webview"},icon:(0,r.Y)(S.A,{size:48}),headerText:"Your app is starting",bodyText:null})}function R(){return(0,r.Y)(o.A,{pane:{type:"webview"},icon:(0,r.Y)(A.A,{size:48}),headerText:"The workspace is loading…",bodyText:null})}function I(){return(0,r.Y)(o.A,{pane:{type:"webview"},icon:(0,r.Y)(A.A,{size:48}),headerText:"The workspace is reconnecting…",bodyText:null})}function T(e){var n=e.isAgentWorking,t=e.openPane,i=e.crashedRunId,a=(0,f.If)(),l=null==a?void 0:a[i],s=(0,d.T)();return(0,r.Y)(o.A,{pane:{type:"webview"},icon:(0,r.Y)(_.A,{size:48}),headerText:"Your app crashed",body:(0,r.FD)(w.S,{clsx:k().crashedBodyWrapper,gap:16,children:[s&&l?(0,r.Y)(w.S,{clsx:k().terminalWrapper,children:(0,r.Y)(h.A,{workflowRunState:l,currentUserId:s,openPane:t})}):null,(0,r.Y)(w.S,{align:"center",children:n?(0,r.FD)(y.EY,{children:[(0,u.Nn)({capitalizeFirstChar:!0})," is working on it…"]}):(0,r.Y)(F,{openPane:t})})]})})}function F(e){var n=e.openPane,t=(0,p.c)({openPane:n}),i=(0,c.useCallback)(function(e){t("The app failed to run, please debug and fix it.",e)},[t]);return(0,r.Y)(g.C,{onSendAgentMessage:i,buttonText:"Debug with ".concat(u.g$),menuPrefix:"Debug",colorway:"blurple"})}function P(e){var n=e.openPane;return(0,r.Y)(w.S,{clsx:k().root,children:(0,r.Y)(o.A,{pane:{type:"webview"},headerText:"Waiting for plan details",bodyText:"".concat((0,u.Nn)({capitalizeFirstChar:!0})," is planning your app…"),action:(0,r.Y)(v.$n,{iconLeft:(0,r.Y)(b.A,{}),text:"Switch to ".concat(u.g$),onClick:function(){return n({type:"agentChat"})}})})})}var L=t(28177);function U(){return(0,r.Y)(o.A,{pane:{type:"webview"},icon:(0,r.Y)(_.A,{size:48}),headerText:"The app is running, but the preview isn't ready",bodyText:null})}function N(e){var n=e.webviewState,t=e.openPane,o=e.readonlyBannerVariant;switch(n.state){case L.J4.WORKSPACE_CONNECTING:case L.J4.SERVICES_LOADING:return(0,r.Y)(R,{});case L.J4.WORKSPACE_RECONNECTING:return(0,r.Y)(I,{});case L.J4.HTML_PREVIEW_EMPTY_STATE:return(0,r.Y)(P,{openPane:t});case L.J4.HTML_PREVIEW_FROM_DISK:return(0,r.Y)(l.a,{banner:(0,r.Y)(s.p,{isRapidBuildInProgress:!0}),filePath:n.designReferenceFilePath});case L.J4.HTML_PREVIEW_STREAM:return(0,r.Y)(a.F,{openPane:t,readonlyBannerVariant:void 0===o?"default":o});case L.J4.APP_CRASHED_AGENT_WORKING:return(0,r.Y)(T,{isAgentWorking:!0,openPane:t,crashedRunId:n.crashedRunId});case L.J4.APP_CRASHED_AGENT_IDLE:return(0,r.Y)(T,{isAgentWorking:!1,openPane:t,crashedRunId:n.crashedRunId});case L.J4.APP_NOT_RUNNING_AGENT_WORKING:case L.J4.APP_STARTING_AGENT_WORKING:return(0,r.Y)(x,{});case L.J4.APP_NOT_RUNNING_AGENT_IDLE:return(0,r.Y)(D,{});case L.J4.APP_STARTING_AGENT_IDLE:return(0,r.Y)(E,{});case L.J4.LAST_RESORT_RUNNING_NO_PORT:return(0,r.Y)(U,{});default:(0,i.A)(n)}}},77425:(e,n,t)=>{"use strict";t.d(n,{t:()=>u});var r=t(91246),i=t.n(r),o=t(90342),a=t(71424),l=t(28177),s=t(80122),c=t(81740);function u(){var e=(0,l.gv)(),n=(0,l.ZO)(),t=(0,l.cn)(),r=(0,l.X5)(),u=(0,c.lO)(),d=(0,a.A)().ports,p=(0,o.w)(d).map(function(e){return i()(e,["processInfo"])});(0,s.Nx)({agentAwareWebviewState:r,agentAwareWebviewStateInputs:t,visualPreviewState:n,visualPreviewStateInputs:e,runInfo:u,openedAndForwardedPorts:p})}},77582:(e,n,t)=>{"use strict";t.d(n,{Ak:()=>m,pK:()=>f,yQ:()=>v});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175);function s(){var e=(0,i._)(["\n  query DatabaseUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            neonComputeTime {\n              usage\n            }\n            neonDataStorage {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation RollbackNeonDatabase($input: RollbackNeonDatabaseInput!) {\n    rollbackNeonDatabase(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on RollbackNeonDatabaseResult {\n        database {\n          id\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation SetNeonHistoryRetentionPeriod(\n    $input: SetNeonDatabaseConfigurationInput!\n  ) {\n    setNeonDatabaseConfiguration(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on SetNeonDatabaseConfigurationResult {\n        database {\n          id\n          historyRetentionSeconds\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(s());function f(e){var n=(0,r._)({},d,e);return a.I(p,n)}var h=(0,o.J1)(c());function m(e){var n=(0,r._)({},d,e);return l.n(h,n)}var g=(0,o.J1)(u());function v(e){var n=(0,r._)({},d,e);return l.n(g,n)}},77595:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M13.163 3.834a8.25 8.25 0 1 0 6.62 10.916.75.75 0 1 1 1.414.5 9.75 9.75 0 1 1-2.305-10.148l3.358 3.162V4a.75.75 0 0 1 1.5 0v6a.75.75 0 0 1-.75.75h-6a.75.75 0 0 1 0-1.5h4.11l-3.254-3.064a8.25 8.25 0 0 0-4.693-2.352Z",clipRule:"evenodd"})}))}},77915:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 .25a.75.75 0 0 1 .75.75v7.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 0 1 1.06-1.06l3.72 3.72V1A.75.75 0 0 1 12 .25Zm0 13a.75.75 0 0 1 .53.22l5 5a.75.75 0 1 1-1.06 1.06l-3.72-3.72V23a.75.75 0 0 1-1.5 0v-7.19l-3.72 3.72a.75.75 0 0 1-1.06-1.06l5-5a.75.75 0 0 1 .53-.22Z",clipRule:"evenodd"})}))}},78094:(e,n,t)=>{"use strict";t.d(n,{p:()=>a});var r=t(35651),i=t(2272),o=t(64254).hp;function a(e){var n=e.split(".");if(4!==n.length)throw Error("Invalid token: should have exactly 4 parts: "+e);for(var t=n[2].replace(/-/g,"+").replace(/_/g,"/");t.length%4;)t+="=";var i=window.atob(t);if(i.length<64)throw Error("Invalid token: signed part is too short: "+i.length);var a=i.substring(0,i.length-64);return r.api.token.ReplToken.decode(new o(a,"base64"))}i.env.PROXY_SUFFIX},78251:(e,n,t)=>{"use strict";t.d(n,{ER:()=>c,mU:()=>l,zV:()=>s});var r=t(22531),i=t(46231),o=t.n(i),a=t(13843),l=function(e){return"string"==typeof e&&""!==e.trim()},s=function(e){return(void 0===e?"undefined":(0,r._)(e))==="object"&&"string"==typeof e.name&&"string"==typeof e.value&&""!==e.name};function c(e){var n=e.replSlug,t=e.username,r=t?"-".concat(t):"",i=a.sA-(0+r.length);if(i>0){var l=o()(n).slice(0,i),s="".concat("").concat(l).concat(r);if(s.length<=a.sA)return s}return"".concat("").concat(o()(n)).concat(r)}},78375:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7 2.25a.75.75 0 0 1 .692.462l5 12a.75.75 0 0 1-1.384.577L9.72 11.48H4.28l-1.587 3.808a.75.75 0 0 1-1.384-.578l5-12A.75.75 0 0 1 7 2.25ZM4.904 9.98h4.192L7 4.95 4.904 9.98ZM14.25 8a.75.75 0 0 1 .75-.75h4A3.75 3.75 0 0 1 21.25 14 3.75 3.75 0 0 1 19 20.75h-4a.75.75 0 0 1-.75-.75V8Zm1.5 6.75v4.5H19a2.25 2.25 0 0 0 0-4.5h-3.25Zm3.25-1.5a2.25 2.25 0 0 0 0-4.5h-3.25v4.5H19Z",clipRule:"evenodd"})}))}},78671:(e,n,t)=>{"use strict";t.d(n,{I:()=>r});var r=function(e){return null!=e.connectionString&&null!=e.databaseId&&null!=e.databaseName&&null!=e.projectId}},78761:(e,n,t)=>{"use strict";t.d(n,{A:()=>tz,G:()=>tB});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(81073),s=t(21462),c=t(79203),u=t(17844),d=t(12584),p=t(41114),f=t(86997),h=t(50175);function m(){var e=(0,d._)(["\n  fragment ObjectStorageBucket on Bucket {\n    id\n    externalId\n    name\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,d._)(["\n  query ObjectStoragePane(\n    $replId: String!\n    $bucketsAfter: String\n    $bucketsCount: Int\n  ) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n        authorizations {\n          createObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n          editObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n        }\n        buckets(after: $bucketsAfter, count: $bucketsCount) {\n          ... on BucketConnection {\n            __typename\n            items {\n              ...ObjectStorageBucket\n            }\n            pageInfo {\n              nextCursor\n            }\n          }\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n        defaultBucket {\n          ... on Bucket {\n            ...ObjectStorageBucket\n          }\n          ... on Error {\n            message\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n          ... on UserError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,d._)(["\n  mutation ObjectStoragePaneCreateBucket($input: CreateBucketInput!) {\n    createBucket(input: $input) {\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var y={},w=(0,p.J1)(m()),b=(0,p.J1)(g(),w),S=(0,p.J1)(v(),w);function Y(e){var n=(0,u._)({},y,e);return h.n(S,n)}var _=t(46797),A=t(1982),C=t(55100),k=t(71424);function x(){var e=(0,d._)(["\n  query CreateBucketName($teamId: Int, $name: String) {\n    bucketName: replTitle(teamId: $teamId, title: $name)\n  }\n"]);return x=function(){return e},e}var D={},E=(0,p.J1)(x()),R=t(18509),I=t(27023),T=t(28290),F=t(11769),P=t(40259),L=t(47245),U=t(85144),N=t(41358),O=t(4616),M=t(85389),H=t(63456),B=t(6064),z=(0,R.x)({createBucketButton:[I.wp.flex.growAndShrink(1),I.wp.justify.center,I.wp.textAlign.center],labeledInput:[I.wp.textAlign.left],row:[I.wp.flex.growAndShrink(1),I.wp.pt(16),I.wp.rowWithGap(16),{flexBasis:"300px"}],wrapper:[I.wp.flex.wrap]});function W(e){var n,t,r,o,a,c,d,p,h,m,g,v,y,w,b=e.isOpen,S=e.loading,Y=e.handleCreateBucket,_=e.onRequestClose,A=(t=(n={}).preferredName,r=n.teamId,a=(o=(0,i._)((0,s.useState)(""),2))[0],c=o[1],d=(0,s.useRef)(null),p=(0,s.useRef)(!1),v=(h={variables:{name:t,teamId:r},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1},m=(0,u._)({},D,h),g=f.I(E,m)).data,y=g.previousData,w=(null==v?void 0:v.bucketName)||(null==y?void 0:y.bucketName),(0,s.useEffect)(function(){w&&(p.current||c(w))},[w]),{name:a,setName:(0,s.useCallback)(function(e){p.current=!0,c(e.slice(0,60))},[]),nameInputRef:d}),k=A.name,x=A.setName,R=A.nameInputRef,I=(0,C.A)();return(0,l.Y)(M.S,{children:(0,l.Y)(U.a,{fitContent:!0,isOpen:b,onRequestClose:_,children:(0,l.FD)(N.ui,{children:[(0,l.Y)(O.Y9,{level:1,variant:"subheadBig",children:"Create a Bucket"}),(0,l.FD)(M.S,{css:z.wrapper,row:!0,children:[(0,l.Y)(M.S,{css:z.row,children:(0,l.Y)(G,{name:k,setName:x,nameInputRef:R,disabled:S})}),(0,l.Y)(M.S,{css:z.row,children:(0,l.Y)(F.$n,{css:z.createBucketButton,text:S?"Creating bucket...":"Create bucket",onClick:function(){return Y({name:k,replId:I})},colorway:"primary",iconLeft:S?(0,l.Y)(H.A,{}):(0,l.Y)(B.A,{}),disabled:S})})]})]})})})}function G(e){var n=e.name,t=e.setName,r=e.nameInputRef,i=e.disabled,o=(0,T.c)();return(0,l.FD)(M.S,{css:z.labeledInput,grow:!0,shrink:!0,gap:8,children:[(0,l.Y)(L.J,{htmlFor:o("bucketName"),children:"Name"}),(0,l.Y)(P.pd,{spellCheck:!1,id:o("bucketName"),disabled:i,onChange:function(e){t(e.currentTarget.value)},value:n,ref:r,placeholder:"Name your Bucket"})]})}var V=t(93629),Z=t(90629),j=t(45843),q=t(2789),K=t(53522),$=t(53351),J=t(2634),Q=t(684),X=Q.ZU.Object({id:Q.ZU.String(),name:Q.ZU.String(),contentType:Q.ZU.Optional(Q.ZU.String()),timeCreated:Q.ZU.String(),size:Q.ZU.String()}),ee=Q.ZU.Array(X),en={FILE:"file"},et=function(e){return e[e.Direct=1]="Direct",e[e.Multipart=2]="Multipart",e}({});function er(e){return"".concat(e.status," - ").concat(e.statusText)}function ei(){return(ei=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.pageToken,i=void 0===(r=e.maxResults)?1e3:r,o=e.matchGlob,l=new URLSearchParams({maxResults:i.toString()}),t&&l.append("pageToken",t),o&&l.append("matchGlob","**".concat(o,"**")),[4,fetch("/object-storage/storage/v1/b/".concat(n,"/o?").concat(l.toString()),{method:"GET",credentials:"same-origin"})];case 1:if(!(s=a.sent()).ok)throw Error("Failed to get objects: ".concat(er(s)));return[4,s.json()];case 2:if(d=null!=(u=(c=a.sent()).items)?u:[],!j.J(ee,d))throw(0,$.$J)(ee,d);return[2,{items:d,nextPageToken:c.nextPageToken}]}})})).apply(this,arguments)}function eo(e){return ea.apply(this,arguments)}function ea(){return(ea=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(n=e.bucketExternalId,t=e.objectName,r=e.file,void 0===(i=e.uploadMethod)?1:i){case 1:return[2,function(e){return el.apply(this,arguments)}({bucketExternalId:n,objectName:t,file:r})];case 2:return[2,function(e){return ed.apply(this,arguments)}({bucketExternalId:n,objectName:t,file:r})]}return[2]})})).apply(this,arguments)}function el(){return(el=(0,r._)(function(e){var n,t,r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.objectName,r=e.file,i=encodeURIComponent(t),[4,fetch("/object-storage/upload/storage/v1/b/".concat(n,"/o?uploadType=media&name=").concat(i),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},body:r})];case 1:if(!(o=a.sent()).ok)throw Error("Failed to upload object: ".concat(er(o)));return[2]}})})).apply(this,arguments)}function es(){return(es=(0,r._)(function(e){var n,t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.encodedObjectName,r=e.file,[4,fetch("/object-storage/".concat(n,"/").concat(t,"?uploads"),{method:"POST",credentials:"same-origin",headers:{"Content-Length":"0","Content-Type":r.type,"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(i=a.sent()).ok)throw Error("Failed to initiate multipart upload: ".concat(er(i)));return[4,i.text()];case 2:if(o=a.sent(),!(l=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("UploadId")[0].textContent))throw Error("Failed to initiate multipart upload: missing UploadId");return[2,l]}})})).apply(this,arguments)}function ec(){return(ec=(0,r._)(function(e){var n,t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.encodedObjectName,r=e.partNumber,i=e.uploadId,o=e.chunk,[4,fetch("/object-storage/".concat(n,"/").concat(t,"?partNumber=").concat(r,"&uploadId=").concat(i),{method:"PUT",credentials:"same-origin",headers:{"Content-Length":o.length.toString(),"Content-Type":"text/xml","X-Requested-With":"XMLHttpRequest"},body:o})];case 1:if(!(l=a.sent()).ok)throw Error("Failed to upload chunk: ".concat(er(l)));if(!(s=l.headers.get("x-upload-etag")))throw Error("Failed to upload chunk: missing x-upload-etag");return[2,{partNumber:r,etag:s}]}})})).apply(this,arguments)}function eu(){return(eu=(0,r._)(function(e){var n,t,r,i,o,l,s,c;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.encodedObjectName,r=e.uploadId,i=e.parts,l=(o=document.implementation.createDocument("","",null)).createElement("CompleteMultipartUpload"),i.forEach(function(e){var n=o.createElement("Part"),t=o.createElement("PartNumber");t.textContent=e.partNumber.toString(),n.appendChild(t);var r=o.createElement("ETag");r.textContent=e.etag,n.appendChild(r),l.appendChild(n)}),o.appendChild(l),s=new XMLSerializer().serializeToString(o),[4,fetch("/object-storage/".concat(n,"/").concat(t,"?uploadId=").concat(r),{method:"POST",credentials:"same-origin",headers:{"Content-Length":s.length.toString(),"Content-Type":"application/xml","X-Requested-With":"XMLHttpRequest"},body:s})];case 1:if(!(c=a.sent()).ok)throw Error("Failed to complete multipart upload: ".concat(er(c)));return[2]}})})).apply(this,arguments)}function ed(){return(ed=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.objectName,r=e.file,[4,(0,J.g6)(r)];case 1:return i=a.sent(),l=(o=K.A.from(i)).toBuffer(),s=encodeURIComponent(t),[4,function(e){return es.apply(this,arguments)}({bucketExternalId:n,encodedObjectName:s,file:r})];case 2:return c=a.sent(),u=(0,q.A)(5),[4,Promise.all(Array(Math.ceil(o.length/0x2000000)).fill(0).map(function(e,t){var r=l.subarray(0x2000000*t,(t+1)*0x2000000);return u(function(){return function(e){return ec.apply(this,arguments)}({bucketExternalId:n,encodedObjectName:s,partNumber:t+1,uploadId:c,chunk:r})})}))];case 3:return d=a.sent(),[4,function(e){return eu.apply(this,arguments)}({bucketExternalId:n,encodedObjectName:s,uploadId:c,parts:d})];case 4:return a.sent(),[2]}})})).apply(this,arguments)}function ep(e){return ef.apply(this,arguments)}function ef(){return(ef=(0,r._)(function(e){var n,t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:return n=e.bucketExternalId,t=encodeURIComponent(e.objectName),[4,fetch("/object-storage/storage/v1/b/".concat(n,"/o/").concat(t),{method:"DELETE",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(r=i.sent()).ok)throw Error("Failed to delete object: ".concat(er(r)));return[2]}})})).apply(this,arguments)}function eh(){return(eh=(0,r._)(function(e){var n,t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.sourceBucketExternalId,t=e.destinationBucketExternalId,r=e.sourceObjectName,i=e.destinationObjectName,o=encodeURIComponent(r),l=encodeURIComponent(i),[4,fetch("/object-storage/storage/v1/b/".concat(n,"/o/").concat(o,"/copyTo/b/").concat(t,"/o/").concat(l),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(s=a.sent()).ok)throw Error("Failed to copy object: ".concat(er(s)));return[2]}})})).apply(this,arguments)}var em=t(35992),eg=t(76957),ev=t(67201),ey=(0,eg.eU)(new Map);function ew(e){var n=e.items,t=e.objects,r=new Set(n.map(function(e){return e.name})),i=t.filter(function(e){return!r.has(e.name)});return(0,o._)(n).concat((0,o._)(i))}var eb=(0,eg.eU)(null,function(e,n,t){var r=t.bucketExternalId,i=t.objects,o=t.nextPageToken,a=t.isSearch;n(ey,function(e){return(0,em.jM)(e,function(n){var t,l,s=e.get(r),c=n.get(r);if(!c)return void n.set(r,{items:i,nextPageToken:o,isLoading:!1});var u=ew({items:c.items,objects:i}),d=c.search;if(a){c.search=d={items:ew({items:null!=(l=null==d?void 0:d.items)?l:[],objects:i}),currentPageToken:null==s||null==(t=s.search)?void 0:t.currentPageToken,nextPageToken:o},c.items=u,c.isLoading=!1;return}c.items=u,c.search=void 0,c.currentPageToken=null==s?void 0:s.nextPageToken,c.nextPageToken=o,c.isLoading=!1})})}),eS=(0,eg.eU)(null,function(e,n,t){var r=t.bucketExternalId,i=t.isLoading;n(ey,function(e){return(0,em.jM)(e,function(e){var n=e.get(r);if(!n)return void e.set(r,{items:[],isLoading:i});n.isLoading=i})})}),eY=(0,eg.eU)(null,function(e,n,t){var r=t.bucketExternalId,i=t.name,o=t.contentType,a=t.size,l={id:"optimistic-"+(0,ev.A)(),name:i,contentType:o,size:a,timeCreated:new Date().toISOString(),optimisticallyInserted:!0};n(ey,function(e){return(0,em.jM)(e,function(e){var n=e.get(r);if(!n)return void e.set(r,{items:[l],isLoading:!1});var t=n.items.find(function(e){return e.name===i});t?Object.assign(t,l):n.items.push(l)})})}),e_=(0,eg.eU)(null,function(e,n,t){var r=t.name,i=t.bucketExternalId,o=t.isPendingDeletion,a=t.isOptimisticallyInserted;n(ey,function(e){return(0,em.jM)(e,function(e){var n=e.get(i);if(!n)throw Error("Bucket not found when updating object");var t=n.items.findIndex(function(e){return e.name===r});if(-1===t)throw Error("Bucket not found when updating object");void 0!==o&&(n.items[t].isPendingDeletion=o),void 0!==a&&(n.items[t].optimisticallyInserted=a)})})}),eA=(0,eg.eU)(null,function(e,n,t){var r=t.name,i=t.bucketExternalId;n(ey,function(e){return(0,em.jM)(e,function(e){var n=e.get(i);if(!n)throw Error("Bucket not found when removing object");var t=n.search;if(t){t.items=t.items.filter(function(e){return e.name!==r});return}e.set(i,{items:n.items.filter(function(e){return e.name!==r}),isLoading:n.isLoading,nextPageToken:n.nextPageToken,search:t})})})}),eC=new Intl.Collator;function ek(e){return e.sort(function(e,n){return eC.compare(e.displayName,n.displayName)})}var ex=[1e3,2500,5e3];function eD(){var e,n=(0,c.md)(ey),t=(0,c.Xr)(eb),o=(0,c.Xr)(eS),l=(0,i._)((0,s.useState)(!1),2),u=l[0],d=l[1],p=(0,i._)((0,s.useState)(1e3),2),f=p[0],h=p[1];return{fetchObjects:(0,s.useCallback)((e=(0,r._)(function(e){var r,i,l,s,c,u,p,h,m,g,v,y;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(r=e.bucketExternalId,i=e.matchGlob,l=e.loadMorePageToken,s=e.isNewBucket,c=e.onError,s)return t({bucketExternalId:r,objects:[],isSearch:i}),[2];d(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),o({bucketExternalId:r,isLoading:!0}),p=n.get(r),h=i?null==p||null==(u=p.search)?void 0:u.currentPageToken:null==p?void 0:p.currentPageToken,[4,function(e){return ei.apply(this,arguments)}({bucketExternalId:r,pageToken:null!=l?l:h,matchGlob:i,maxResults:f})];case 2:return g=(m=a.sent()).items,v=m.nextPageToken,t({bucketExternalId:r,objects:g,nextPageToken:v,isSearch:i}),[3,5];case 3:return y=a.sent(),Z.Cp(y,{tags:{bucketExternalId:r,action:"fetchObjects"}}),null==c||c(y instanceof Error?y:Error("Failed to fetch objects")),[3,5];case 4:return o({bucketExternalId:r,isLoading:!1}),d(!1),[7];case 5:return[2]}})}),function(n){return e.apply(this,arguments)}),[t,o,n,f]),setMaxResults:h,maxResults:f,loading:u}}function eE(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(eY),l=(0,c.Xr)(eA),u=(0,c.Xr)(e_);function d(){return(d=(0,r._)(function(e){var n,i,s,c,d;return(0,a.YH)(this,function(p){switch(p.label){case 0:n=e.bucketExternalId,i=e.files,s=e.targetFolder,c=e.onError,t(!0),p.label=1;case 1:var f;return p.trys.push([1,3,,4]),[4,Promise.all(i.map((f=(0,r._)(function(e){var t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:t=s+(e.webkitRelativePath||e.dirPath||e.name),o({bucketExternalId:n,name:t,contentType:e.type,size:null==e?void 0:e.size.toString()}),r=e.size>0x1e00000?et.Multipart:et.Direct,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,eo({bucketExternalId:n,objectName:t,file:e,uploadMethod:r})];case 2:return i.sent(),u({bucketExternalId:n,name:t,isOptimisticallyInserted:!1}),[3,4];case 3:return i.sent(),l({bucketExternalId:n,name:t}),[3,4];case 4:return[2]}})}),function(e){return f.apply(this,arguments)})))];case 2:return p.sent(),[3,4];case 3:return d=p.sent(),null==c||c(d),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{uploadFiles:function(e){return d.apply(this,arguments)},loading:n}}function eR(){var e=(0,d._)(["\n  query UserBuckets($input: CurrentUserBucketsInput!) {\n    currentUser {\n      id\n      buckets(input: $input) {\n        ... on BucketConnection {\n          __typename\n          items {\n            ...ObjectStorageBucket\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eR=function(){return e},e}function eI(){var e=(0,d._)(["\n  query OrgBuckets($orgId: String!, $input: OrgBucketsInput!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          buckets(input: $input) {\n            ... on BucketConnection {\n              __typename\n              items {\n                ...ObjectStorageBucket\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return eI=function(){return e},e}function eT(){var e=(0,d._)(["\n  mutation AddReplBucket($input: AddReplBucketInput!) {\n    addReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return eT=function(){return e},e}var eF={},eP=(0,p.J1)(eR(),w),eL=(0,p.J1)(eI(),w),eU=(0,p.J1)(eT(),w),eN=t(68264),eO=t(4729),eM=t(59318),eH=t(36937),eB=t(85051),ez=t(24602),eW=t(24928),eG=t(37252),eV=t(24140),eZ=t(27789),ej=(0,R.x)({error:[I.wp.color.accentNegativeStronger],button:[I.wp.reset.button,I.wp.viewStyle,eB.b.nofill,I.wp.display.inlineFlex,{borderColor:eB.b.outlined.borderColor},I.wp.flex.growAndShrink(1)],select:[I.wp.display.flex,I.wp.flex.growAndShrink(1)],selectDisabled:[{backgroundColor:eH.LU.backgroundHigher}],popover:[I.wp.width("max-content"),I.wp.overflow("auto"),I.wp.p(1),I.wp.minWidth(240)],labeledInput:[I.wp.minWidth(250)],listbox:[I.wp.maxHeight(300),I.wp.minWidth(300),I.wp.overflow("auto")],dropdownItemAndContainer:[I.wp.flex.row,I.wp.align.center,eB.b.listItem,I.wp.px(8),I.wp.py(4)],selectedItemAndContainer:[I.wp.px(8),I.wp.py(4),I.wp.justify.spaceBetween,I.wp.align.center,I.wp.rowWithGap(8)],selectedBucketName:[I.wp.align.center,I.wp.textAlign.left,I.wp.rowWithGap(8)],bucketName:[I.wp.textAlign.left,I.wp.rowWithGap(8)],loading:[I.wp.minWidth(200),I.wp.display.flex,I.wp.flex.grow(1),ez.S.backgroundPulse(eH.LU.backgroundHighest,eH.LU.backgroundHigher)]});function eq(e){var n=e.buckets,t=e.error,r=e.loading,i=e.onChange,o=e.onLoadMore,a=e.selectedBucketId,c=(0,s.useId)();return(0,l.FD)(M.S,{grow:!0,shrink:!0,children:[(0,l.Y)(eX,{buckets:n,loading:r,selectedBucketId:a,onLoadMore:o,onSelectionChange:function(e){"string"==typeof e&&i(e)}}),t?(0,l.Y)(M.S,{css:ej.error,"aria-live":"polite","aria-atomic":"true",id:c,children:(0,l.Y)("span",{children:t})}):null]})}var eK=(0,R.x)({self:[ej.dropdownItemAndContainer,I.wp.justify.spaceBetween,{backgroundColor:eH.LU.interactiveBackground}]});function e$(){return(0,l.Y)(M.S,{css:ej.selectDisabled,children:(0,l.Y)(M.S,{css:ej.selectedItemAndContainer,children:(0,l.Y)(M.S,{css:ej.selectedBucketName,children:(0,l.Y)(O.EY,{color:"dimmer",variant:"text",children:"No buckets available to add"})})})})}function eJ(e){var n=e.title;return(0,l.FD)(M.S,{css:ej.selectedItemAndContainer,children:[(0,l.Y)(M.S,{css:ej.selectedBucketName,children:(0,l.Y)(O.EY,{variant:"text",children:n})}),(0,l.Y)(eZ.A,{})]})}function eQ(e){var n=e.bucketName,t=e.selected;return(0,l.FD)(M.S,{css:t?eK.self:ej.dropdownItemAndContainer,children:[(0,l.Y)(M.S,{css:ej.bucketName,align:"center",children:(0,l.Y)(O.EY,{variant:"text",color:t?"default":"dimmer",children:n})}),(0,l.Y)(M.S,{pl:8,align:"center",row:!0,children:t?(0,l.Y)(eV.A,{}):null})]})}function eX(e){var n=e.buckets,t=e.loading,r=e.selectedBucketId,i=e.onLoadMore,o=e.onSelectionChange,a=(0,T.c)(),c=(0,s.useMemo)(function(){return n.find(function(e){return e.id===r})},[n,r]);return(0,l.FD)(M.S,{css:ej.labeledInput,grow:!0,shrink:!0,gap:8,children:[(0,l.Y)(L.J,{htmlFor:a("bucket"),children:"Bucket"}),t?(0,l.Y)(P.pd,{css:ej.loading,disabled:!0}):(0,l.FD)(eN.l6,{css:ej.select,id:a("bucket"),onSelectionChange:o,"aria-label":"Bucket Select",children:[(0,l.Y)(eO.$,{css:ej.button,isDisabled:!c,children:c?(0,l.Y)(eJ,{title:c.name}):(0,l.Y)(e$,{})}),(0,l.Y)(eG.g_,{css:ej.popover,background:"default",placement:"bottom left",children:(0,l.Y)(eW.qF,{css:ej.listbox,onLoadMore:i,children:n.map(function(e){var n=e.id,t=e.name;return(0,l.Y)(eM.nh,{id:n,textValue:t,children:(0,l.Y)(eQ,{bucketName:t,selected:n===r})},n)})})})]})]})}var e0=(0,R.x)({addBucketButton:[I.wp.flex.growAndShrink(1),I.wp.justify.center,I.wp.textAlign.center],row:[I.wp.flex.growAndShrink(1),I.wp.pt(16),I.wp.rowWithGap(16),{flexBasis:"300px"}],wrapper:[I.wp.flex.wrap]});function e1(e){var n,t,r,a,c,d,p,m,g,v,y,w,b,S,Y,_,A,k,x,D,E,R,I,T,P,L=e.excludeBucketIds,z=e.isOpen,W=e.onBucketAdded,G=e.onError,Z=e.onRequestClose,j=e.orgId,q=(0,i._)((0,s.useState)(),2),K=q[0],$=q[1],J=(0,C.A)(),Q=(g=(n={onError:G,orgId:j}).orgId,w=(y=(t={fetchPolicy:"network-only",onError:v=n.onError,skip:void 0!==g,ssr:!1,variables:{input:e2}},r=(0,u._)({},eF,t),f.I(eP,r))).data,b=y.fetchMore,S=y.loading,Y=(0,s.useCallback)(function(){var e,n,t;b({variables:{input:(0,V._)((0,u._)({},e2),{after:null==w||null==(t=w.currentUser)||null==(n=t.buckets)||null==(e=n.pageInfo)?void 0:e.nextCursor})},updateQuery:function(e,n){if(!(null==(a=n.fetchMoreResult)||null==(i=a.currentUser)||null==(r=i.buckets)?void 0:r.items))return e;var t=(0,u._)({},n.fetchMoreResult);if(null==(l=t.currentUser)?void 0:l.buckets){var r,i,a,l,s,c,d,p=null!=(d=null==e||null==(c=e.currentUser)||null==(s=c.buckets)?void 0:s.items)?d:[],f=t.currentUser.buckets.items;t.currentUser.buckets.items=(0,o._)(f).concat((0,o._)(p))}return t}})},[b,w]),A=(_=(a={fetchPolicy:"network-only",onError:v,skip:void 0===g,ssr:!1,variables:{input:e2,orgId:g||""}},c=(0,u._)({},eF,a),f.I(eL,c))).data,k=_.fetchMore,x=_.loading,E=(null==(D=(null==A||null==(d=A.currentUser)?void 0:d.org.__typename)==="Org"?null==A||null==(p=A.currentUser)?void 0:p.org:void 0)?void 0:D.buckets.__typename)==="BucketConnection"?null==D?void 0:D.buckets:void 0,R=(0,s.useCallback)(function(){k({variables:{input:(0,V._)((0,u._)({},e2),{after:null==E?void 0:E.pageInfo.nextCursor})},updateQuery:function(e,n){var t,r,i=n.fetchMoreResult,a=null==i?void 0:i.currentUser;if((null==a?void 0:a.__typename)!=="CurrentUser")return e;var l=null==i||null==(t=i.currentUser)?void 0:t.org;if((null==l?void 0:l.__typename)!=="Org")return e;var s=l.buckets;if("BucketConnection"!==s.__typename)return e;var c=null==e||null==(r=e.currentUser)?void 0:r.org;if((null==c?void 0:c.__typename)!=="Org")return i;var d=c.buckets;return"BucketConnection"!==d.__typename?i:(0,V._)((0,u._)({},i),{currentUser:(0,V._)((0,u._)({},a),{__typename:"CurrentUser",org:(0,V._)((0,u._)({},l),{__typename:"Org",buckets:(0,V._)((0,u._)({},s),{__typename:"BucketConnection",items:(0,o._)(s.items).concat((0,o._)(d.items))})})})})}})},[k,E]),I=(0,s.useCallback)(function(){g?R():Y()},[g,R,Y]),{buckets:g?null==E?void 0:E.items:null==w||null==(m=w.currentUser)?void 0:m.buckets.items,fetchMore:I,loading:x||S}),X=Q.buckets,ee=Q.fetchMore,en=Q.loading;(0,s.useEffect)(function(){!K&&X&&X.length>1&&$(X[0].id)},[K,X]);var et=(0,s.useMemo)(function(){return X?X.filter(function(e){return!(null!=L?L:[]).includes(e.id)}):[]},[X,L]);(0,s.useEffect)(function(){!K&&et&&et.length>0&&$(et[0].id)},[et,K]);var er=(0,i._)((T={variables:{input:{bucketId:null!=K?K:"",replId:J}}},P=(0,u._)({},eF,T),h.n(eU,P)),2),ei=er[0],eo=er[1].loading;return(0,l.Y)(M.S,{children:(0,l.Y)(U.a,{fitContent:!0,isOpen:z,onRequestClose:Z,children:(0,l.FD)(N.ui,{children:[(0,l.Y)(O.Y9,{level:1,variant:"subheadBig",children:"Choose a Bucket"}),(0,l.FD)(M.S,{css:e0.wrapper,row:!0,children:[(0,l.Y)(M.S,{css:e0.row,children:(0,l.Y)(eq,{buckets:et,loading:en,onChange:$,onLoadMore:ee,selectedBucketId:K})}),(0,l.Y)(M.S,{css:e0.row,children:(0,l.Y)(F.$n,{css:e0.addBucketButton,text:eo?"Adding Bucket to Repl...":"Add Bucket to Repl",onClick:function(){ei({onCompleted:function(e){var n="Bucket"===e.addReplBucket.__typename?e.addReplBucket:null;if(!n)return void G(Error("Failed to create bucket"));W(n,!1),$(void 0)},onError:G})},colorway:"primary",iconLeft:eo||en?(0,l.Y)(H.A,{}):(0,l.Y)(B.A,{}),disabled:eo||!K})})]})]})})})}var e2={count:10},e4=t(22531),e5=t(37658),e3=t(79315),e7=t(35563),e6=t(36073),e8=t(25578),e9=t(27659),ne=t(17767),nn=t(3113),nt=t(13678),nr=[{icon:(0,l.Y)(nn.A,{}),title:"JavaScript",value:"js"},{icon:(0,l.Y)(nt.A,{}),title:"Python",value:"py"},{icon:(0,l.Y)(ne.A,{}),title:"All other languages",value:"other"}],ni={js:{packagerConfigLanguage:"nodejs",description:(0,l.Y)(e8.Ay,{components:{code:function(e){return(0,l.Y)(e5.A,(0,u._)({language:"json"},e))}},children:"This library supports Bun, Deno, and Node.js. It is not recommended for browser-based applications.\n  \nFor more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/typescript-api-reference/)."}),packageName:"@replit/object-storage",commands:[{label:"Import Object Store Library",code:"const { Client } = require('@replit/object-storage');\nconst client = new Client();\n"},{label:"Download an object as text (i.e. JSON)",code:"const { ok, value: textValue, error } = await client.downloadAsText('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object as its raw byte representation (i.e. images)",code:"const { ok, value: bytesValue, error } = await client.downloadAsBytes('file.png');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object by streaming the object's contents (i.e. streaming data over an API)",code:"const { ok, value: stream, error } = await client.downloadAsStream('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object to the filesystem",code:"const { ok, error } = await client.downloadToFilename('file.json', destFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"List the objects in the bucket",code:"const { ok, value, error } = await client.list();\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from text (i.e. JSON)",code:"const { ok, error } = await client.uploadFromText('file.json', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from its byte representation (i.e. images)",code:"const { ok, error } = await client.uploadFromBytes('file.png', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from the filesystem",code:"const { ok, error } = await client.uploadFromFilename('file.json', srcFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from a stream (i.e. streaming data over an API)",code:"const { ok, error } = await client.uploadFromStream('file.json', stream);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Delete an object from the bucket",code:"const { ok, error } = await client.delete('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"}]},py:{packagerConfigLanguage:"python3",description:(0,l.Y)(e8.Ay,{components:{code:function(e){return(0,l.Y)(e5.A,(0,u._)({language:"json"},e))}},children:"For more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/python-api-reference/)."}),packageName:"replit-object-storage",commands:[{label:"Import Object Store Library",code:"from replit.object_storage import Client\nclient = Client()"},{label:"Download an object as text (i.e. JSON)",code:'client.download_as_text("file.json")'},{label:"Download an object as its raw byte representation (i.e. images)",code:'client.download_as_bytes("file.png")'},{label:"Download an object to the filesystem",code:'client.download_to_filename("file.json", dest_filename)'},{label:"List the objects in the bucket",code:"client.list()"},{label:"Upload an object from text (i.e. JSON)",code:'client.upload_from_text("file.json", data)'},{label:"Upload an object from its byte representation (i.e. images)",code:'client.upload_from_bytes("file.png", data)'},{label:"Upload an object from the filesystem",code:'client.upload_from_filename("file.json", src_filename)'},{label:"Delete an object from the bucket",code:'client.delete("file.json")'}]},other:{description:(0,l.Y)(e8.Ay,{components:{code:function(e){return(0,l.Y)(e5.A,(0,u._)({language:"json"},e))}},children:'\nYou can use the [Google Cloud client libraries](https://cloud.google.com/storage/docs/reference/libraries#use) to interact with your bucket in any of the supported languages.\n\nIf there isn\'t a client library for your language of choice, you can use the [JSON API](https://cloud.google.com/storage/docs/json_api).\n\nWith both the client libraries and the JSON API, only blob/file/object APIs are authorized.\n\n## Authorization\n\n### Client libraries\n\n1. Create a JSON file with these contents in your project root directory, `google_application_credentials.json`\n\n```\n{\n  "type": "external_account",\n  "audience": "replit",\n  "credential_source": {\n    "url": "http://127.0.0.1:1106/credential"\n  },\n  "token_url": "http://127.0.0.1:1106/token"\n}\n```\n\n2. Set the `GOOGLE_APPLICATION_CREDENTIALS` environment variable to `"google_application_credentials.json"`\n3. Set the `GCLOUD_PROJECT` environment variable to `""`\n\n### JSON API\n\n1. Issue a `POST` request to `http://127.0.0.1:1106/token`\n\n## Bucket Selection\nUsing Google Cloud APIs or libraries directly requires a bucket name parameter to be specified on all requests. This field is interchangeable with your bucket\'s ID within Replit Object Storage.\n\nTo get the ID of the default bucket for your App or Deployment, issue a `GET` request to `http://127.0.0.1:1106/object-storage/default-bucket`\n'}),commands:[]}},no=(0,R.x)({statusBanner:[I.wp.maxWidth("fit-content")]});function na(e){var n=e.onError,t=(0,i._)((0,s.useState)("js"),2),o=t[0],c=t[1],d=(0,A.A)().showConfirm,p=(0,k.A)().packager,f=(0,e3.J)().configs,h=(0,e7.hF)(),m=(0,i._)((0,s.useState)(!1),2),g=m[0],v=m[1],y=f.find(function(e){return e.language===ni[o].packagerConfigLanguage}),w=!!(ni[o].packagerConfigLanguage&&ni[o].packageName&&y),b=!!(y&&h(y.id).some(function(e){return e.name===ni[o].packageName})),S=(0,i._)((0,s.useState)(!1),2),Y=S[0],_=S[1];function C(){return(C=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:if(!w)return n(Error("Package not available for selected language")),[2];return v(!0),[4,p.addPackages([{name:ni[o].packageName}])];case 1:return e.sent()?(d("Installed ".concat(ni[o].packageName," package")),_(!0)):n(Error("Failed to install ".concat(ni[o].packageName," package"))),[2]}})})).apply(this,arguments)}var x=nr.find(function(e){return e.value===o}),D=Y||b;return(0,s.useLayoutEffect)(function(){var e=!0,n=!1,t=void 0;try{for(var r,i=nr[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=function(){var e=r.value;if(ni[e.value].packagerConfigLanguage&&f.find(function(n){return n.language===ni[e.value].packagerConfigLanguage}))return c(e.value),{v:void 0}}();if("object"===(0,e4._)(o))return o.v}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}c("other")},[]),(0,l.FD)(M.S,{gap:16,children:[(0,l.Y)(M.S,{row:!0,gap:0,children:(0,l.Y)(e9.l,{items:nr,selectedItem:x,initialSelectedItem:nr[0],onChange:function(e){_(!1),c(e.value)}})}),ni[o].description?ni[o].description:null,!D&&w?(0,l.Y)(F.$n,{onClick:function(){return C.apply(this,arguments)},text:"Install ".concat(ni[o].packageName," package"),colorway:"primary",loading:g}):null,x&&D?(0,l.Y)(e6.N,{text:"Package installed",colorway:"positive",css:no.statusBanner}):null,ni[o].commands.map(function(e){return(0,l.FD)(M.S,{gap:6,children:[(0,l.Y)(O.EY,{children:e.label}),(0,l.Y)(e8.Ay,{components:{code:function(e){return(0,l.Y)(e5.A,(0,u._)({language:o},e))}},children:"```\n".concat(e.code)})]},e.label)})]})}function nl(){var e=(0,d._)(["\n  query ObjectStorageReplOrg($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return nl=function(){return e},e}var ns={},nc=(0,p.J1)(nl()),nu=t(66890),nd=t(91326),np=t(29839),nf=t(54682),nh=t(74251),nm=t(78008),ng=t(97802),nv=t(15493),ny=t(41696),nw=t(97153),nb=t(71872),nS=(0,R.x)({ctaStatusBanner:[I.wp.textAlign.left],cta:[I.wp.width("100%"),I.wp.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],payment:[I.wp.borderRadius(12),I.wp.textAlign.left,I.wp.shadow(2)]});function nY(e){var n=e.children,t=e.createBucketAuthz,o=e.actionDescription,c=e.refetchAuthzQueryData,u=e.loading,d=e.replId,p=(0,i._)((0,s.useState)(!1),2),f=p[0],h=p[1],m=(0,i._)((0,s.useState)(!1),2),g=m[0],v=m[1];return(0,l.FD)(l.FK,{children:[(0,l.FD)(M.S,{gap:8,children:[(0,l.Y)(n_,{replId:d,mainActionCTA:n,showPaymentMethodForm:f,setShowPaymentMethodForm:function(){return h(!0)},setShowSupportForm:function(){return v(!0)},createBucketAuthz:t,actionDescription:o,refetchAuthzQueryData:c,loading:u}),f?(0,l.Y)(N.ui,{elevated:!0,css:nS.payment,p:16,children:(0,l.Y)(nh.y,{onClose:(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return h(!1),[4,c()];case 1:return e.sent(),[2]}})}),context:"workspace_object_storage_pane"})}):null]}),(0,l.Y)(U.a,{isOpen:g,onRequestClose:function(){return v(!1)},children:(0,l.Y)(ny.A,{onRequestClose:function(){return v(!1)}})})]})}function n_(e){var n=e.mainActionCTA,t=e.showPaymentMethodForm,r=e.setShowPaymentMethodForm,i=e.setShowSupportForm,o=e.createBucketAuthz,a=e.actionDescription,s=e.refetchAuthzQueryData,c=e.loading,u=e.replId,d=(0,nf.m6)();if(!o)return null;if(!o.isAuthorized&&d)return(0,l.Y)(e6.N,{text:o.message,colorway:"warning",icon:(0,l.Y)(nb.A,{}),css:nS.ctaStatusBanner});switch(o.code){case nu.S4P.RequiresActiveSubscription:return(0,l.Y)(M.S,{gap:8,align:"center",children:(0,l.Y)(nm.A,{context:"workspace_object_storage_pane",text:"Upgrade your plan to ".concat(a,"."),css:nS.cta,colorway:"primary",variant:"default",disabled:t,onPlanCheckoutComplete:s})});case nu.S4P.RequiresPaymentMethodOrSubscription:return(0,l.FD)(M.S,{gap:8,align:"center",children:[(0,l.Y)(nm.A,{context:"workspace_object_storage_pane",text:"Upgrade your plan to ".concat(a,"."),css:nS.cta,colorway:"primary",variant:"default",disabled:t,onPlanCheckoutComplete:s}),(0,l.Y)(F.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:nS.cta,disabled:t,loading:c,iconLeft:(0,l.Y)(nw.A,{}),onClick:function(){return r()}})]});case nu.S4P.RequiresSmsVerification:return(0,l.Y)(np.A,{context:nu.SGY.ObjectStorage,onSuccess:s});case nu.S4P.RequiresPaymentMethod:return(0,l.Y)(F.$n,{colorway:"primary",text:"Add a payment method",css:nS.cta,disabled:t,loading:c,iconLeft:(0,l.Y)(nw.A,{}),onClick:function(){return r()}});case nu.S4P.RequiresUnbanning:return(0,l.Y)(nv.d,{text:"Your account is not currently allowed to ".concat(a,". We're here to help! Please reach out to support@replit.com for assistance."),colorway:"warning",iconLeft:(0,l.Y)(nb.A,{}),css:nS.ctaStatusBanner,onClick:function(){return i()}});case nu.S4P.InsufficientBudget:return(0,l.FD)(l.FK,{children:[(0,l.Y)(e6.N,{text:"You've reached your monthly usage budget. Increase your budget to ".concat(a,"."),colorway:"warning",icon:(0,l.Y)(nb.A,{}),css:nS.ctaStatusBanner}),(0,l.Y)(ng.h,{onUpdateSuccess:s,replId:u})]});case nu.S4P.FeatureDisabled:case nu.S4P.FeatureUnsupportedForReplitTeams:case nu.S4P.FeatureUnsupportedForTeamsEdu:case nu.S4P.FeatureUnsupportedForTeamsFree:case nu.S4P.FeatureUnsupportedForTeamsPro:case nu.S4P.InsufficientPermissions:case nu.S4P.InsufficientQuota:case nu.S4P.RequiresActiveTeamsSubscription:case nu.S4P.PaymentDelinquent:case nu.S4P.RequiresEmailVerification:return(0,l.Y)(e6.N,{text:o.message,colorway:"warning",icon:(0,l.Y)(nb.A,{}),css:nS.ctaStatusBanner});case nu.S4P.Authorized:case nu.S4P.AuthorizedQuota:return(0,l.Y)(l.FK,{children:n});default:(0,nd.A)(o.code)}}var nA=t(19807),nC=t(78626),nk=t(55576),nx=t(47820),nD=[{imageUrl:"/public/images/object-storage/objects-in-bucket.svg",text:"Store immutable files, like photos and documents, in writable buckets (databases for unstructured files).",altText:"An image and a file going into a bucket"},{imageUrl:"/public/images/object-storage/upload-to-cloud.svg",text:"Deploy apps that handle variable sets of files added by your users, like an upload-based photo gallery.",altText:"Images being uploaded to a cloud"},{imageUrl:"/public/images/object-storage/share-same-bucket.svg",text:"Buckets are automatically shared between development and production, so you can easily pass files to your users directly from the Workspace.",altText:"Development icon and deployment icon sharing a bucket"}],nE=(0,R.x)({action:[I.wp.width("100%"),I.wp.maxWidth(320),I.wp.px(32),{marginLeft:"auto",marginRight:"auto"}],rowText:[I.wp.flex.growAndShrink(1),I.wp.textAlign.left]});function nR(e){var n,t,r,o,a=e.createBucketAuthz,c=e.editBucketAuthz,d=e.refetchAuthzQueryData,p=e.onBucketAdded,h=e.onError,m=e.innerRef,g=(0,i._)((0,s.useState)(!1),2),v=g[0],y=g[1],w=(0,s.useCallback)(function(){return y(!1)},[]),b=(0,s.useCallback)(function(){return y(!0)},[]),S=(0,i._)((0,s.useState)(!1),2),_=S[0],A=S[1],k=(0,s.useCallback)(function(){return A(!1)},[]),x=(0,s.useCallback)(function(){return A(!0)},[]),D=(0,C.A)(),E=(n={variables:{replId:D}},t=(0,u._)({},ns,n),f.I(nc,t)).data,R=(null==E?void 0:E.getRepl.__typename)==="Repl"?null==(r=E.getRepl.org)?void 0:r.id:void 0,I=(0,i._)(Y(),2),T=I[0],P=I[1].loading;return(0,l.FD)(l.FK,{children:[(0,l.Y)(e1,{isOpen:v,onBucketAdded:p,onError:h,onRequestClose:w,orgId:R}),(0,l.Y)(W,{isOpen:_,loading:P,handleCreateBucket:function(e){T({variables:{input:e},onCompleted:function(e){var n="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!n)return void h(Error("Failed to create bucket"));p(n)},onError:h})},onRequestClose:k}),(0,l.Y)(nA.A,{pane:{type:"objectStorage"},maxWidth:450,body:nD.map(function(e,n){return(0,l.FD)(M.S,{row:!0,gap:16,children:[(0,l.Y)(M.S,{children:(0,l.Y)(nk.A,{src:e.imageUrl,width:44,height:44,alt:e.altText})}),(0,l.Y)(O.EY,{css:nE.rowText,children:e.text})]},n)}),innerRef:m,action:(0,l.FD)(nY,{replId:D,createBucketAuthz:a,actionDescription:"create a bucket",refetchAuthzQueryData:d,loading:P,children:[(0,l.Y)(F.$n,{css:nE.action,text:P?"Creating bucket...":"Create new bucket",onClick:x,colorway:"primary",iconLeft:P?(0,l.Y)(H.A,{}):(0,l.Y)(B.A,{}),disabled:P}),(0,l.Y)(M.S,{children:(0,l.Y)(nC.m_,{isDisabled:null==c?void 0:c.isAuthorized,tooltip:null!=(o=null==c?void 0:c.message)?o:"You are not authorized to edit buckets",delay:"default",placement:"bottom-start",children:(0,l.Y)(F.$n,{css:nE.action,text:"Use an existing bucket",onClick:b,iconLeft:(0,l.Y)(nx.A,{}),disabled:P||!(null==c?void 0:c.isAuthorized)})})})]})})]})}var nI=t(83846),nT=t(95983),nF=t(4880),nP=t(32728),nL=t(32331),nU=t(13539),nN=t(64287),nO=t(98444),nM=function(e){var n=e.folderPath,t=e.onDropNativeFiles,r=(0,i._)((0,nN.H)(function(){return{accept:[en.FILE,nO.FILE],drop:function(e){return"files"in e&&t(e.files),{name:n}},collect:function(e){return{isOver:!!e.isOver()}}}}),2);return{isDraggedOver:r[0].isOver,drop:r[1]}},nH=function(e){var n=e.currentFolder,t=e.onDropNativeFiles,r=(0,i._)((0,nN.H)(function(){return{accept:[nO.FILE],drop:function(e,n){n.didDrop()||e.dirContent.then(function(e){t(e)})},collect:function(e){return{isOverCurrent:e.isOver({shallow:!0})}}}},[n]),2);return{isOverCurrent:r[0].isOverCurrent,drop:r[1]}},nB=t(65623),nz=t(15311),nW=t(98398),nG=t(83070),nV=t(53384),nZ=t(52637),nj=t(64347),nq=t(61655),nK=t(80089),n$=t(54148),nJ=t(74726),nQ=t(62693),nX=t(2188),n0=t(7481),n1=t(50919),n2=t(27959),n4=t(94993),n5=t(34883),n3=t(81650),n7="1px dashed ".concat(eH.LU.accentPrimaryDefault),n6=I.kL.min(500),n8=(0,nz.v)(["bodyOutline","bodyMarginBottom"]),n9=n8.cssVars,te=n8.styleTokens,tn=(0,R.x)({buttons:[(0,nI._)({},n6,[I.wp.rowWithGap(8)])],tableWrapper:[I.wp.borderRadius(4),{outline:te.bodyOutline,marginBottom:te.bodyMarginBottom}],tableHeader:[I.wp.position.sticky,I.wp.top(0),I.wp.textAlign.left,I.wp.zIndex(1),I.wp.backgroundColor.backgroundDefault],tableHeaderMainColumn:[I.wp.textAlign.left,I.wp.p(4)],footer:[I.wp.mb(8),I.wp.pt(8),I.wp.flex.growAndShrink(1)],loadMoreButton:[I.wp.flex.growAndShrink(1)],pageSizeSelect:[I.wp.minWidth(75),{borderTopRightRadius:"".concat(eH.LU.space4," !important"),borderBottomRightRadius:"".concat(eH.LU.space4," !important")}]});function tt(e){var n,t,d,p,f,h,m,g,v=e.bucketExternalId,y=e.onOpenCommandsTab,w=e.onError,b=(0,i._)((0,s.useState)(""),2),S=b[0],Y=b[1],_=(0,c.md)(ey).get(v),A=null!=(m=null==_?void 0:_.isLoading)&&m,C=(0,i._)((0,s.useState)(""),2),k=C[0],x=C[1],D=(t=(n={searchQuery:S,bucketState:_,currentFolder:k}).bucketState,d=n.currentFolder,(0,s.useMemo)(function(){if(!t)return{displayedItems:[],nextPageToken:void 0,total:0};var e=t.items,n=t.search,r=t.nextPageToken,i=n?n.items:e,a=n?n.nextPageToken:r,l=n?n.items.length:e.length,s=[],c=new Map,p=!0,f=!1,h=void 0;try{for(var m,g=i[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(v.name.startsWith(d)&&v.name!==d){var y=v.name.slice(d.length);if(!y.includes("/")){s.push((0,V._)((0,u._)({},v),{isFolder:!1,displayName:y}));continue}var w=y.split("/")[0];if(c.get(w)||c.set(w,{isFolder:!0,name:d+w+"/",displayName:w}),v.name===d+w+"/"){var b=c.get(w);if(!b)throw Error("Folder should have been added to map");b.optimisticallyInserted=v.optimisticallyInserted,b.isPendingDeletion=v.isPendingDeletion}}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}var S=ek(Array.from(c.values())),Y=ek(s);return{displayedItems:(0,o._)(S).concat((0,o._)(Y)),nextPageToken:a,total:l}},[t,d])),E=D.displayedItems,R=D.nextPageToken,I=D.total,T=!!R,P=(0,s.useMemo)(function(){return[{accessorKey:"name",header:"Name",size:500},{accessorKey:"added",header:"Added",size:200},{accessorKey:"size",header:"Size",size:200}]},[]),L=(0,nT.useReactTable)({data:E,columns:P,getCoreRowModel:(0,nT.getCoreRowModel)()}),U=L.getRowModel().rows,N=(0,s.useRef)(null),B=(0,nF.Te)({count:T?U.length+1:U.length,getScrollElement:function(){return N.current},estimateSize:function(){return 34},overscan:20}),z=eD(),W=z.fetchObjects,G=z.maxResults,Z=z.setMaxResults,j=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(eY),l=(0,c.Xr)(e_),u=(0,c.Xr)(eA);function d(){return(d=(0,r._)(function(e){var n,r,i,s,c,d,p;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(n=e.bucketExternalId,r=e.folderName,i=e.currentFolder,s=e.onError,r.includes("/"))return null==s||s(Error("Folder name cannot contain a forward slash")),[2];t(!0),o({bucketExternalId:n,name:c=i+r+"/",contentType:"text/plain",size:"0"}),d=new File([""],r,{type:"text/plain"}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,eo({bucketExternalId:n,objectName:c,file:d})];case 2:return a.sent(),l({bucketExternalId:n,name:c,isOptimisticallyInserted:!1}),[3,4];case 3:return p=a.sent(),null==s||s(p),u({bucketExternalId:n,name:c}),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{createFolder:function(e){return d.apply(this,arguments)},loading:n}}().createFolder,q=eE().uploadFiles,K=(0,s.useRef)(null),$=(0,s.useRef)(null),J=(0,i._)((0,s.useState)(!1),2),Q=J[0],X=J[1],ee=(0,i._)((0,s.useState)(null),2),en=ee[0],et=ee[1],er=nH({currentFolder:k,onDropNativeFiles:function(e){q({bucketExternalId:v,files:e,targetFolder:k,onError:w})}}),ei=er.isOverCurrent,ea=er.drop,el=function(e){Y(e),""===e&&W({bucketExternalId:v,onError:w})},es=!(E&&E.length);return(0,l.FD)(l.FK,{children:[(0,l.FD)(M.S,{grow:!0,shrink:!0,children:[(0,l.FD)(M.S,{css:tn.buttons,gap:8,children:[(0,l.FD)(M.S,{row:!0,gap:8,children:[(0,l.Y)(F.$n,{onClick:function(){K.current&&K.current.click()},text:"Upload files",colorway:"primary",iconLeft:(0,l.Y)(nQ.A,{})}),(0,l.Y)(F.$n,{onClick:function(){$.current&&$.current.click()},text:"Upload folder",colorway:"primary",iconLeft:(0,l.Y)(n1.A,{})})]}),(0,l.FD)(M.S,{grow:!0,row:!0,gap:8,justify:"space-between",children:[(0,l.Y)(F.$n,{onClick:function(){return X(!0)},text:"Create folder",iconLeft:(0,l.Y)(n0.A,{})}),(0,l.Y)(M.S,{grow:!0,children:(0,l.Y)(nV.I,{value:S,onChange:function(e){return el(e.target.value)},onKeyDown:function(e){"Escape"===e.key&&el(""),"Enter"===e.key&&W({bucketExternalId:v,matchGlob:S,onError:w})},onClear:function(){return el("")},disabled:A})}),(0,l.Y)(F.$n,{onClick:function(){return W({bucketExternalId:v,matchGlob:S,onError:w})},text:"Refresh",loading:A,iconLeft:(0,l.Y)(n5.A,{})})]})]}),(0,l.FD)(M.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,l.Y)(tv,{currentFolder:k,bucketExternalId:v,setCurrentFolder:x,onError:w}),(0,l.Y)(M.S,{children:A?(0,l.Y)(H.A,{size:12}):(0,l.FD)(O.EY,{color:"dimmer",variant:"small",children:[T?"Loaded":"Total"," ",I]})})]}),(0,l.Y)(M.S,{innerRef:ea,css:tn.tableWrapper,grow:!0,shrink:!0,style:(g={},(0,nI._)(g,n9.bodyOutline,(f=(p={isOverCurrent:ei,isEmpty:es}).isOverCurrent,h=p.isEmpty,f?n7:h?"1px dashed ".concat(eH.LU.outlineDefault):void 0)),(0,nI._)(g,n9.bodyMarginBottom,ei||es?eH.LU.space8:void 0),g),children:!es||Q?(0,l.Y)("div",{ref:N,className:"container",style:{overflow:"auto",flex:"1 1 auto"},children:(0,l.Y)("div",{style:{height:"".concat(B.getTotalSize(),"px")},children:(0,l.FD)("table",{style:{width:"100%"},children:[(0,l.Y)("thead",{css:tn.tableHeader,children:L.getHeaderGroups().map(function(e){return(0,l.Y)("tr",{children:e.headers.map(function(e){return(0,l.Y)("th",{css:tn.tableHeaderMainColumn,colSpan:e.colSpan,style:{width:e.getSize()},children:(0,nT.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,l.FD)("tbody",{children:[Q?(0,l.Y)(tb,{onCreateFolder:function(e){X(!1),j({bucketExternalId:v,folderName:e,currentFolder:k,onError:w})},onCanceled:function(){return X(!1)}}):null,B.getVirtualItems().map(function(e,n){if(e.index>U.length-1)return(0,l.Y)("tr",{style:{height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start-n*e.size,"px)")},children:(0,l.Y)("td",{colSpan:3,children:(0,l.FD)(nW.Y,{css:tn.footer,children:[(0,l.Y)(F.$n,{css:tn.loadMoreButton,onClick:function(){return W({bucketExternalId:v,matchGlob:S,loadMorePageToken:R,onError:w})},text:A?"":"Load more",iconLeft:A?(0,l.Y)(H.A,{}):void 0,loading:A,disabled:A||!T}),(0,l.Y)(nZ.l,{css:tn.pageSizeSelect,isDisabled:A||!T,"aria-label":"Select page size",selectedKey:G.toString(),onSelectionChange:function(e){return Z(Number(e))},items:ex.map(function(e){return{id:e.toString()}}),children:function(e){return(0,l.Y)(eW.nh,{label:e.id},e.id)}})]})})},e.key.toString());var t=E[e.index];return t?t.isFolder?(0,l.Y)(ta,{index:n,virtualRow:e,item:t,setCurrentFolder:x,onDeleteClick:et,bucketExternalId:v,onError:w},t.name):(0,l.Y)(tl,{index:n,virtualRow:e,item:t,bucketExternalId:v,onDeleteClick:et,onError:w},t.name):null})]})]})})}):(0,l.Y)(l.FK,{children:A?(0,l.Y)(M.S,{align:"center",justify:"center",style:{flex:1},children:(0,l.Y)(H.A,{})}):(0,l.Y)(tA,{onOpenCommandsTab:y})})}),(0,l.Y)(nB.v,{fileUploadInputRef:K,dirUploadInputRef:$,uploadFiles:function(e){return q({bucketExternalId:v,files:e.files,targetFolder:k,onError:w})}})]}),(0,l.Y)(tY,{bucketExternalId:v,requestedDeleteItem:en,onRequestClose:function(){return et(null)},onError:w})]})}var tr=(0,nz.v)(["rowOutline","rowOpacity","rowTextDecoration","rowCursor"]),ti=tr.cssVars,to=tr.styleTokens;function ta(e){var n,t=e.index,r=e.virtualRow,i=e.item,o=e.bucketExternalId,a=e.setCurrentFolder,s=e.onDeleteClick,c=e.onError,u=eE().uploadFiles,d=(0,A.A)().showConfirm,p=nM({folderPath:i.name,onDropNativeFiles:function(e){d('Uploading files to "'.concat(i.name,'"')),u({bucketExternalId:o,files:e,targetFolder:i.name,onError:c})}}),f=p.isDraggedOver,h=p.drop;return(0,l.Y)(td,{index:t,virtualRow:r,item:i,ref:h,onDeleteClick:function(){return s(i)},icon:(0,l.Y)(nX.A,{}),timeCreatedCell:"-",sizeCell:"-",style:(n={},(0,nI._)(n,ti.rowOutline,f?n7:void 0),(0,nI._)(n,ti.rowCursor,"pointer"),n),onClick:function(){return a(i.name)},onKeyDown:function(e){"Enter"===e.key&&a(i.name)}})}function tl(e){var n,t,o,u,d,p=e.index,f=e.virtualRow,h=e.item,m=e.bucketExternalId,g=e.onDeleteClick,v=e.onError,y=encodeURIComponent(h.name),w="/object-storage/storage/v1/b/".concat(m,"/o/").concat(y,"?alt=media"),b=!!(h.optimisticallyInserted||h.isPendingDeletion),S=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(e_),l=(0,c.Xr)(eY),u=(0,c.Xr)(eA);function d(){return(d=(0,r._)(function(e){var n,r,i,s,c,d,p;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=e.bucketExternalId,r=e.object,i=e.destinationFolder,s=e.onError,c=e.onSuccess,t(!0),d=i+r.name.split("/").pop(),o({bucketExternalId:n,name:r.name,isPendingDeletion:!0}),l({bucketExternalId:n,name:d,contentType:r.contentType,size:r.size}),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,function(e){return eh.apply(this,arguments)}({destinationBucketExternalId:n,sourceBucketExternalId:n,sourceObjectName:r.name,destinationObjectName:d})];case 2:return a.sent(),[4,ep({bucketExternalId:n,objectName:r.name})];case 3:return a.sent(),u({bucketExternalId:n,name:r.name}),o({bucketExternalId:n,name:d,isOptimisticallyInserted:!1}),null==c||c(),[3,5];case 4:return p=a.sent(),null==s||s(p),o({bucketExternalId:n,name:r.name,isPendingDeletion:!1}),u({bucketExternalId:n,name:d}),[3,5];case 5:return t(!1),[2]}})})).apply(this,arguments)}return{loading:n,moveObject:function(e){return d.apply(this,arguments)}}}().moveObject,Y=(0,A.A)().showConfirm,_=(t=(n={item:h,disableDrag:b,onDropOverFolder:function(e){return S({bucketExternalId:m,object:h,destinationFolder:e,onSuccess:function(){Y('Moved "'.concat(h.name,'" to "').concat(e,'"'))},onError:v})}}).item,o=n.disableDrag,u=n.onDropOverFolder,{isDragging:(d=(0,i._)((0,nU.i)(function(){return{type:en.FILE,canDrag:!o,item:function(){return{name:t.name,type:en.FILE}},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,n){var t=n.getDropResult();t&&t&&u(t.name)}}},[o]),2))[0].isDragging,drag:d[1]}),C=_.isDragging,k=_.drag;return(0,l.Y)(td,{index:p,virtualRow:f,item:h,ref:k,onDeleteClick:function(){return g(h)},icon:(0,l.Y)(tS,{contentType:h.contentType}),timeCreatedCell:(0,l.Y)(nj.Dc,{date:h.timeCreated}),sizeCell:(0,nP.z)(Number(h.size),{isKib:!0,isKibNotation:!0}),style:(0,nI._)({},ti.rowOpacity,C?.5:void 0),additionalActionButtons:(0,l.Y)(l.FK,{children:(0,l.Y)(nG.K0,{alt:"Download",css:tc.rowActionButton,children:(0,l.Y)("a",{download:h.displayName,href:w,css:I.wp.color.foregroundDefault,children:(0,l.Y)(n$.A,{})})})})})}var ts=(0,R.x)({row:[I.wp.position.relative,I.wp.borderRadius(4),{outline:to.rowOutline,outlineOffset:-1,opacity:to.rowOpacity,cursor:to.rowCursor,":hover":{background:"".concat(eH.LU.backgroundHigher," !important")},":hover #action-buttons":{display:"flex"},":focus":{outline:"2px solid ".concat(eH.LU.accentPrimaryDefault)}}],text:[I.wp.flex.shrink(1)]}),tc=(0,R.x)({row:[ts.row],pendingRow:[ts.row,I.wp.color.foregroundDimmest],tableData:[I.wp.p(4),{":first-of-type":{borderTopLeftRadius:4,borderBottomLeftRadius:4},":last-of-type, :nth-last-of-type(2)":{borderTopRightRadius:4,borderBottomRightRadius:4}}],text:ts.text,strikeThroughText:[ts.text,{textDecoration:"line-through"}],actionButtonTableData:[I.wp.position.relative],rowActionButtonGroup:[I.wp.position.absolute,I.wp.right(0),I.wp.top(0),I.wp.bottom(0),I.wp.rowWithGap(4),I.wp.align.center,I.wp.backgroundColor.backgroundHigher,{display:"none",borderTopRightRadius:4,borderBottomRightRadius:4}],rowActionButton:[eB.b.filled],loadingTableData:[I.wp.position.relative],loadingIconWrapper:[I.wp.position.absolute,I.wp.right(4),I.wp.top(0),I.wp.bottom(0),I.wp.justify.center],loadingIcon:[{borderRadius:"50%"},I.wp.backgroundColor.backgroundDefault]}),tu=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],r=(0,i._)((0,s.useState)(null),2),o=r[0],a=r[1];return(0,s.useEffect)(function(){if(null!==o){var e=function(){t(o.offsetWidth<o.scrollWidth||o.offsetHeight<o.scrollHeight)};e();var n=new ResizeObserver(e);return n.observe(o),function(){return n.disconnect()}}},[o]),{attachObserver:a,isOverflowing:n}},td=(0,s.forwardRef)(function(e,n){var t=e.index,r=e.virtualRow,i=e.item,o=e.onDeleteClick,a=e.icon,s=e.timeCreatedCell,c=e.sizeCell,d=e.style,p=e.onClick,f=e.onKeyDown,h=e.additionalActionButtons,m=i.isPendingDeletion?tc.strikeThroughText:tc.text,g=i.optimisticallyInserted||i.isPendingDeletion,v=tu(),y=v.attachObserver,w=v.isOverflowing;return(0,l.FD)("tr",{style:(0,V._)((0,u._)({},d),{height:"".concat(r.size,"px"),transform:"translateY(".concat(r.start-t*r.size,"px)"),background:r.index%2==0?"color-mix(in srgb, ".concat(eH.LU.backgroundDefault," 60%, ").concat(eH.LU.backgroundRoot,")"):void 0}),ref:n,tabIndex:0,css:g?tc.pendingRow:tc.row,onClick:p,onKeyDown:f,children:[(0,l.Y)("td",{css:tc.tableData,children:(0,l.Y)(nC.m_,{isDisabled:!w,tooltip:i.displayName,children:(0,l.FD)(M.S,{row:!0,gap:8,align:"center",children:[a,(0,l.Y)(O.EY,{multiline:!0,maxLines:1,css:m,ref:y,children:i.displayName})]})})}),(0,l.Y)("td",{css:tc.tableData,children:(0,l.Y)(O.EY,{multiline:!0,maxLines:1,css:m,children:s})}),(0,l.Y)("td",{css:tc.tableData,children:(0,l.Y)(O.EY,{multiline:!0,maxLines:1,css:m,children:c})}),g?null:(0,l.Y)("td",{css:tc.actionButtonTableData,children:(0,l.FD)(M.S,{css:tc.rowActionButtonGroup,px:4,id:"action-buttons",children:[h,(0,l.Y)(nG.K0,{onClick:o,alt:"Delete",css:tc.rowActionButton,children:(0,l.Y)(n3.A,{color:eH.LU.accentNegativeDefault})})]})}),g?(0,l.Y)("td",{css:tc.loadingTableData,children:(0,l.Y)(M.S,{css:tc.loadingIconWrapper,children:(0,l.Y)(H.A,{css:tc.loadingIcon})})}):null]},i.name)}),tp=(0,nz.v)(["breadcrumbOutline","breadcrumbTextColor"]),tf=tp.cssVars,th=tp.styleTokens,tm=(0,R.x)({breadcrumb:[{color:th.breadcrumbTextColor,outline:th.breadcrumbOutline}]}),tg=function(e){var n=e.split("/").filter(function(e){return""!==e}),t=n.map(function(e,t){return{folderName:e,path:n.slice(0,t+1).join("/")+"/"}});return[{folderName:"Objects",path:""}].concat((0,o._)(t))};function tv(e){var n=e.currentFolder,t=e.bucketExternalId,r=e.setCurrentFolder,i=e.onError,o=tg(n);return(0,l.Y)(M.S,{pt:12,pb:4,row:!0,gap:2,align:"center",children:o.map(function(e,n){var a=e.folderName,c=e.path,u=n===o.length-1;return(0,l.FD)(s.Fragment,{children:[(0,l.Y)(ty,{folderPath:c,folderName:a,bucketExternalId:t,onClick:function(){return r(c)},isLastBreadcrumb:u,onError:i}),u?null:(0,l.Y)(O.EY,{color:"dimmest",children:"/"})]},c)})})}function ty(e){var n,t=e.folderPath,r=e.folderName,i=e.bucketExternalId,o=e.onClick,a=e.isLastBreadcrumb,s=e.onError,c=eE().uploadFiles,u=nM({folderPath:t,onDropNativeFiles:function(e){return c({bucketExternalId:i,files:e,targetFolder:t,onError:s})}}),d=u.isDraggedOver,p=u.drop;return(0,l.Y)(F.$n,{ref:p,text:r,variant:"nofill",onClick:o,iconLeft:(0,l.Y)(nX.A,{}),size:"small",disabled:a,style:(n={},(0,nI._)(n,tf.breadcrumbTextColor,a?eH.LU.foregroundDefault:void 0),(0,nI._)(n,tf.breadcrumbOutline,d?n7:void 0),n),css:tm.breadcrumb})}var tw=(0,R.x)({icon:[I.wp.height(24),I.wp.width(24),I.wp.center]});function tb(e){var n=e.onCreateFolder,t=e.onCanceled,r=(0,i._)((0,s.useState)(""),2),o=r[0],a=r[1],c=(0,nL.A)(t,[]);return(0,l.Y)("tr",{children:(0,l.Y)("td",{colSpan:3,children:(0,l.FD)(M.S,{innerRef:c,row:!0,gap:8,align:"center",children:[(0,l.Y)(M.S,{css:tw.icon,children:(0,l.Y)(nX.A,{})}),(0,l.Y)(P.pd,{value:o,autoFocus:!0,onChange:function(e){return a(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(n(o),a("")),"Escape"===e.key&&t()},autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"})]})})})}function tS(e){var n=e.contentType;return n?n.startsWith("image/")?(0,l.Y)(n2.A,{}):n.startsWith("video/")?(0,l.Y)(nK.A,{}):n.startsWith("audio/")?(0,l.Y)(n4.A,{}):(0,l.Y)(nJ.A,{}):(0,l.Y)(nJ.A,{})}function tY(e){var n,t=e.bucketExternalId,o=e.requestedDeleteItem,u=e.onRequestClose,d=e.onError,p=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(e_),l=(0,c.Xr)(eA);function u(){return(u=(0,r._)(function(e){var n,r,i,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=e.bucketExternalId,r=e.objectName,i=e.onError,t(!0),o({bucketExternalId:n,name:r,isPendingDeletion:!0}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,ep({bucketExternalId:n,objectName:r})];case 2:return a.sent(),l({bucketExternalId:n,name:r}),[3,4];case 3:return s=a.sent(),null==i||i(s),o({bucketExternalId:n,name:r,isPendingDeletion:!1}),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{loading:n,deleteObject:function(e){return u.apply(this,arguments)}}}().deleteObject,f=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(e_),l=(0,c.Xr)(eA),u=(0,c.md)(ey);function d(){return(d=(0,r._)(function(e){var n,i,s,c,d,p,f;return(0,a.YH)(this,function(h){switch(h.label){case 0:n=e.bucketExternalId,i=e.folderPath,s=e.onError,t(!0),p=(null!=(d=null==(c=u.get(n))?void 0:c.items)?d:[]).filter(function(e){return e.name.startsWith(i)}),h.label=1;case 1:var m;return h.trys.push([1,3,,4]),[4,Promise.all(p.map((m=(0,r._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:o({bucketExternalId:n,name:e.name,isPendingDeletion:!0}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ep({bucketExternalId:n,objectName:e.name})];case 2:return t.sent(),l({bucketExternalId:n,name:e.name}),[3,4];case 3:return t.sent(),o({bucketExternalId:n,name:e.name,isPendingDeletion:!1}),[3,4];case 4:return[2]}})}),function(e){return m.apply(this,arguments)})))];case 2:return h.sent(),[3,4];case 3:return f=h.sent(),null==s||s(f),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{loading:n,deleteFolder:function(e){return d.apply(this,arguments)}}}().deleteFolder,h=(n=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:if(!(null==o?void 0:o.isFolder))return[3,2];return[4,f({bucketExternalId:t,folderPath:o.name,onError:d})];case 1:return e.sent(),u(),[2];case 2:if(!o)return[3,4];return[4,p({bucketExternalId:t,objectName:o.name,onError:d})];case 3:e.sent(),u(),e.label=4;case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,l.Y)(U.a,{isOpen:!!o,onRequestClose:u,children:o?(0,l.Y)(nq.A,{name:o.displayName,description:'"'.concat(o.displayName,'" ').concat(o.isFolder?" and all its contents":""),entityType:o.isFolder?"folder":"file",hideModal:u,delete:h}):null})}var t_=(0,R.x)({wrapper:[I.wp.center,I.wp.colWithGap(16),I.wp.flex.grow(1),I.wp.justify.center,I.wp.borderRadius(4),I.wp.mb(8)],textWrapper:[I.wp.center,I.wp.colWithGap(4)],text:[I.wp.center],textButton:[I.wp.color.accentPrimaryStronger]});function tA(e){var n=e.onOpenCommandsTab;return(0,l.Y)(M.S,{css:t_.wrapper,children:(0,l.FD)(M.S,{css:t_.textWrapper,children:[(0,l.Y)(O.EY,{variant:"subheadBig",children:"No objects"}),(0,l.FD)(M.S,{css:t_.text,children:[(0,l.Y)(O.EY,{children:"Drag and drop or click to upload,"}),(0,l.FD)(M.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(O.EY,{children:"or"}),(0,l.Y)(F.$n,{variant:"underlinedOnHover",colorway:"primary",onClick:n,text:"upload using commands",css:t_.textButton})]})]})]})})}function tC(){var e=(0,d._)(["\n  mutation ObjectStorageSettingsDeleteBucket($input: DeleteBucketInput!) {\n    deleteBucket(input: $input) {\n      ... on Bucket {\n        id\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return tC=function(){return e},e}function tk(){var e=(0,d._)(["\n  mutation ObjectStorageSettingsRemoveReplBucket(\n    $input: RemoveReplBucketInput!\n  ) {\n    removeReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return tk=function(){return e},e}var tx={},tD=(0,p.J1)(tC()),tE=(0,p.J1)(tk(),w),tR=t(92005),tI=t(87064);function tT(e){var n,t,r=e.bucketId,o=e.bucketExternalId,a=e.onSettingsUpdate,c=e.onError,d=(0,C.A)(),p=(0,i._)((0,s.useState)(!1),2),f=p[0],m=p[1],g=function(){return m(!1)},v=(0,i._)((0,s.useState)(!1),2),y=v[0],w=v[1],b=function(){return w(!1)},S=(0,i._)((n=(0,u._)({},tx,void 0),h.n(tD,n)),2),Y=S[0],_=S[1].loading,A=(0,i._)((t=(0,u._)({},tx,void 0),h.n(tE,t)),2),k=A[0],x=A[1].loading;return(0,l.FD)(l.FK,{children:[(0,l.FD)(M.S,{gap:32,children:[(0,l.Y)(M.S,{gap:12,children:(0,l.FD)(M.S,{gap:6,children:[(0,l.Y)(O.EY,{variant:"subheadDefault",children:"Bucket ID"}),(0,l.Y)(e8.Ay,{children:"```\n".concat(o)})]})}),(0,l.FD)(M.S,{gap:12,children:[(0,l.FD)(M.S,{gap:6,children:[(0,l.Y)(F.$n,{text:x?"Removing Bucket from Repl...":"Remove Bucket from Repl",loading:x,css:I.wp.color.accentNegativeStronger,onClick:function(){return w(!0)}}),(0,l.Y)(O.EY,{color:"dimmest",children:"Your Repl will no longer be able to access this bucket. No data will be deleted and you can re-add this bucket at any time."})]}),(0,l.FD)(M.S,{gap:6,children:[(0,l.Y)(F.$n,{text:_?"Deleting…":"Delete Bucket",loading:_,iconLeft:(0,l.Y)(n3.A,{color:eH.LU.accentNegativeStronger}),css:I.wp.color.accentNegativeStronger,onClick:function(){return m(!0)}}),(0,l.Y)(O.EY,{color:"dimmest",children:"You cannot undo this action."})]})]})]}),(0,l.Y)(U.a,{isOpen:y,onRequestClose:b,children:(0,l.Y)(tR.A,{prompt:"Remove Bucket?",desc:"This action will revoke this Repl's access to this bucket.",onCancel:b,confirmText:"Remove Bucket",icon:(0,l.Y)(tI.A,{}),onConfirm:function(){k({variables:{input:{bucketId:r,replId:d}},onError:c,onCompleted:function(e){"Bucket"===e.removeReplBucket.__typename?a({type:"removeBucket",data:{bucketId:r}}):c(Error("Failed to remove bucket: "+e.removeReplBucket.message))}}),b()}})}),(0,l.Y)(U.a,{isOpen:f,onRequestClose:g,children:(0,l.Y)(nq.A,{name:"bucket",description:"this bucket and all its contents",entityType:"bucket",hideModal:g,delete:function(){return Y({variables:{input:{bucketId:r}},onError:c,onCompleted:function(e){"Bucket"===e.deleteBucket.__typename?a({type:"deleteBucket",data:{bucketId:r}}):c(Error("Failed to delete bucket: "+e.deleteBucket.message))}})}})})]})}var tF=t(12056),tP=t(30124),tL=t(69762),tU=t(22568),tN=t(31855),tO=t(51055),tM=[{icon:(0,l.Y)(tN.A,{}),title:"Objects",value:"objects"},{icon:(0,l.Y)(ne.A,{}),title:"Commands",value:"commands"},{icon:(0,l.Y)(tO.A,{}),title:"Settings",value:"settings"}],tH=(0,R.x)({controlSeparator:[I.wp.color.outlineDefault,I.wp.px(8)],panels:[I.wp.flex.column,I.wp.px(8),I.wp.pt(12),I.wp.flex.growAndShrink(1)],objectTabPanel:[I.wp.flex.column,I.wp.flex.growAndShrink(1)]}),tB=function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.onError,o=t.onCompleted,a=(0,C.A)(),l=(0,s.useCallback)(function(e){if((null==e?void 0:e.repl.__typename)==="Repl")try{return function(e){if("Repl"!==e.__typename)throw Error("Failed to fetch bucket data");var n,t=e.buckets;if(t&&"BucketConnection"!==t.__typename)throw Error(t.message);var r=null!=(n=null==t?void 0:t.items)?n:[];if(!r.length)return{buckets:r};var i=e.defaultBucket;if(i)if("Bucket"===i.__typename)return{initialBucket:i,buckets:r};else throw Error(i.message);return{initialBucket:r[0],buckets:r}}(e.repl)}catch(e){null==r||r(e)}},[]),c=(e={variables:{replId:a,bucketsCount:10},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){if((null==e?void 0:e.repl.__typename)==="Repl"){var n=l(e);n&&(null==o||o(n))}}},n=(0,u._)({},y,e),f.I(b,n)),d=c.data,p=c.loading,h=c.error,m=c.refetch,g=(0,i._)((0,s.useState)(d?l(d):void 0),2),v=g[0],w=g[1];return(0,s.useEffect)(function(){d&&w(l(d))},[l,d]),{buckets:null==v?void 0:v.buckets,initialBucket:null==v?void 0:v.initialBucket,data:d,loading:p,error:h,refetch:m}};function tz(){var e,n,t,u,d=(0,i._)((0,s.useState)(),2),p=d[0],f=d[1],h=(0,s.useMemo)(function(){return null==p?void 0:p.map(function(e){return e.id})},[p]),m=(0,i._)((0,s.useState)(),2),g=m[0],v=m[1],y=(0,i._)((0,s.useState)("objects"),2),w=y[0],b=y[1],S=(0,i._)((0,s.useState)(!1),2),C=S[0],x=S[1],D=(0,s.useCallback)(function(){return x(!1)},[]),E=(0,s.useCallback)(function(){return x(!0)},[]),R=(0,i._)((0,s.useState)(!1),2),I=R[0],T=R[1],F=(0,s.useCallback)(function(){return T(!1)},[]),P=(0,s.useCallback)(function(){return T(!0)},[]),L=(0,c.md)(ey).get(null!=(t=null==g?void 0:g.externalId)?t:""),U=eD(),N=U.fetchObjects,H=U.loading,B=(0,s.useCallback)(function(e){v(e),b("objects"),N({bucketExternalId:e.externalId})},[N]),z=(0,k.A)().dotReplit;(0,s.useEffect)(function(){g&&z.updateDotReplit([(0,_.Xl)(g.externalId)])},[g,z]);var G=(0,A.A)(),V=G.showConfirm,j=G.showError,q=function(e){j(e.message),Z.v4(function(n){n.setTag("object-storage-pane",!0),Z.Cp(e)})},K=tB({onError:q,onCompleted:function(e){var n=e.buckets,t=e.initialBucket;f(n),!g&&t&&(v(t),N({bucketExternalId:null==t?void 0:t.externalId}))}}),$=K.data,J=K.loading,Q=K.error,X=K.refetch,ee=(0,i._)(Y(),2),en=ee[0],et=ee[1].loading,er=(0,s.useCallback)(function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];f(function(n){return n?[e].concat((0,o._)(n)):[e]}),v(e),X(),N({bucketExternalId:e.externalId,isNewBucket:n})},[N,X]),ei=(0,s.useCallback)(function(e){var n=(null!=p?p:[]).filter(function(n){return n.id!==e});if(f(n),0===n.length){v(void 0),b("objects"),z.updateDotReplit([{path:"objectStorage",op:"remove"}]);return}v(n[0]),N({bucketExternalId:n[0].externalId}),b("objects")},[N,p,z]),eo=(null==$?void 0:$.repl.__typename)==="Repl"?$.repl.authorizations.createObjectBucket:void 0,ea=(null==$?void 0:$.repl.__typename)==="Repl"?$.repl.authorizations.editObjectBucket:void 0,el=(null==$?void 0:$.repl.__typename)==="Repl"?null==(n=$.repl.org)?void 0:n.id:void 0;if(Q)return(0,l.Y)(M.S,{p:16,children:(0,l.Y)(e6.N,{text:'Error: "'.concat(Q.message,'". The issue has been logged and the Replit team will look into it.'),colorway:"negative"})});if(J&&!p)return(0,l.Y)(nA.A,{pane:{type:"objectStorage"},maxWidth:450,loading:!0});if(!g)return(0,l.Y)(nR,{createBucketAuthz:eo,editBucketAuthz:ea,refetchAuthzQueryData:X,onBucketAdded:(e=(0,r._)(function(e){var n=arguments;return(0,a.YH)(this,function(t){return er(e,!(n.length>1)||void 0===n[1]||n[1]),[2]})}),function(n){return e.apply(this,arguments)}),onError:q});switch(w){case"objects":u=H&&void 0===L?(0,l.Y)(tF.A,{}):(0,l.Y)(M.S,{css:tH.objectTabPanel,children:(0,l.Y)(tU.A,{children:(0,l.Y)(tt,{bucketExternalId:g.externalId,onOpenCommandsTab:function(){b("commands")},onError:q})})});break;case"commands":u=(0,l.Y)(M.S,{children:(0,l.Y)(na,{onError:q})});break;case"settings":u=(0,l.Y)(M.S,{children:(0,l.Y)(tT,{bucketId:g.id,bucketExternalId:g.externalId,onSettingsUpdate:function(e){("deleteBucket"===e.type||"removeBucket"===e.type)&&ei(e.data.bucketId),"deleteBucket"===e.type&&V("Bucket deleted successfully"),"removeBucket"===e.type&&V("Bucket removed from Repl successfully")},onError:q})})}return(0,l.FD)(M.S,{grow:!0,shrink:!0,children:[(0,l.Y)(e1,{excludeBucketIds:null!=h?h:[],isOpen:C,onBucketAdded:function(e){D(),er(e,!1),V("Bucket added to Repl successfully")},onError:q,onRequestClose:D,orgId:el}),(0,l.Y)(W,{isOpen:I,loading:et,handleCreateBucket:function(e){en({variables:{input:{name:e.name,replId:e.replId}},onCompleted:function(e){var n="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!n)return void q(Error("Failed to create bucket"));F(),er(n),V("Bucket created successfully")},onError:q})},onRequestClose:F}),(0,l.FD)(M.S,{px:8,py:4,align:"center",row:!0,children:[(0,l.Y)(tW,{buckets:p,onRequestAddBucket:E,onRequestCreateBucket:P,onSelect:B,selectedBucketId:null==g?void 0:g.id}),(0,l.Y)(O.EY,{css:tH.controlSeparator,variant:"small",children:"/"}),(0,l.Y)(tG,{onSelect:b,selectedView:w})]}),(0,l.Y)(tP.a,{}),(0,l.Y)(M.S,{css:tH.panels,children:u})]})}function tW(e){var n=e.buckets,t=e.onRequestAddBucket,r=e.onRequestCreateBucket,i=e.onSelect,o=e.selectedBucketId,a=(0,s.useMemo)(function(){if(n&&o)return n.find(function(e){return e.id===o})},[n,o]);return a&&n?(0,l.Y)(M.S,{children:(0,l.FD)(tL.in,{label:a.name,items:n,trigger:(0,l.Y)(F.$n,{size:"default",variant:"nofill",text:a.name,iconRight:(0,l.Y)(eZ.A,{size:12})}),children:[n.map(function(e){return(0,l.Y)(tL.Dr,{icon:(0,l.Y)(eV.A,{visibility:e.id===a.id?"visible":"hidden"}),id:e.id,label:e.name,onAction:e.id!==a.id?function(){i(e)}:void 0},e.id)}),(0,l.Y)(tL.wv,{}),(0,l.Y)(tL.Dr,{icon:(0,l.Y)(B.A,{}),id:"create-new",label:"Create new bucket",onAction:r},"create-new"),(0,l.Y)(tL.Dr,{icon:(0,l.Y)(nx.A,{}),id:"add-existing",label:"Add an existing bucket",onAction:t},"add-existing")]})}):(0,l.Y)(M.S,{children:(0,l.Y)(F.$n,{size:"default",variant:"nofill",text:"Loading...",iconRight:(0,l.Y)(eZ.A,{size:12})})})}function tG(e){var n=e.onSelect,t=e.selectedView,r=(0,s.useMemo)(function(){return tM.find(function(e){return e.value===t})},[t]);return r?(0,l.Y)(M.S,{children:(0,l.Y)(tL.in,{onAction:function(e){var t=tM.find(function(n){return n.value===e});t&&n(t.value)},label:r.title,items:tM,trigger:(0,l.Y)(F.$n,{size:"default",variant:"nofill",text:r.title,iconLeft:r.icon,iconRight:(0,l.Y)(eZ.A,{size:12})}),children:function(e){return(0,l.Y)(tL.Dr,{icon:e.icon,id:e.value,label:e.title},e.value)}})}):null}},79107:(e,n,t)=>{"use strict";t.d(n,{u:()=>eQ});var r=t(81073),i=t(21462),o=t(684),a=t(37299),l=t(12694),s=t(17844),c=t(12584),u=t(41114),d=t(86997);function p(){var e=(0,c._)(["\n  query IntegrationsPaneAuthorizations($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          editSecrets {\n            isAuthorized\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(55100),g=t(86402),v=t(17089),y=t(78104),w=t(86105),b=t(49384),S=t.n(b),Y=t(82315),_=t(13843),A=t(71424),C=t(2810),k=t(22799),x=t(78761),D=(0,i.createContext)(void 0);function E(e){var n,t,i=e.children,o=(0,k.GK)(),a=o.database,l=o.loading,s=(0,x.G)(),c=s.buckets,u=s.loading,d=(0,m.A)(),p=(0,C.CX)({variables:{id:d}}),f=p.data,h=p.loading,g=(null==f||null==(n=f.getRepl)?void 0:n.__typename)==="Repl"?f.getRepl:null,v=null==g?void 0:g.hasAuthUsers;return t=c&&c.length>0?"connected":u?"loading":"disconnected",(0,r.Y)(D.Provider,{value:{neon:a?"connected":l?"loading":"disconnected",objectStorage:t,replitAuth:v?"connected":h?"loading":"disconnected"},children:i})}function R(){var e=(0,i.useContext)(D);if(!e)throw Error("useConnectionStatus must be used within a ConnectionStatusProvider");return e}var I=t(29935),T=t(83846),F=t(93629),P=t(82643),L=t(47993),U=t(64912),N=t(66169),O=t(1982),M=t(86215),H=t(79315),B=t(55515),z=t(36937),W=t(31450),G=t(18509),V=t(27023),Z=t(11769),j=t(11938),q=t(30124),K=t(83070),$=t(24928),J=t(52637),Q=t(41358),X=t(4616),ee=t(78626),en=t(85389),et=t(25578),er=t(5142),ei=t(4163),eo=t(27789),ea=t(82450),el=t(96075),es=t(17767),ec=t(16645),eu=t(3113),ed=t(13678),ep=t(51055),ef=V.kL.max(300),eh=(0,G.x)({root:[V.wp.flex.column,V.wp.borderRadius(),V.wp.backgroundColor.backgroundHigher,V.wp.border({color:z.LU.outlineDimmer,width:1}),V.wp.overflow("hidden")],summary:[V.wp.flex.column],summaryHeader:[V.wp.gap(8),V.wp.p(8),V.wp.align.center,V.wp.justify.spaceBetween,(0,T._)({},ef,[V.wp.flex.wrap])],summaryControls:[{'&[data-open="true"]':{display:"flex"},'&[data-open="false"]':{display:"none"}}],connectedIcon:[V.wp.backgroundColor.accentPositiveDimmer,V.wp.border({color:z.LU.accentPositiveDimmest,width:2}),V.wp.borderRadius(8)],summaryDetails:[V.wp.flex.column,V.wp.gap(4),{'&[data-open="true"]':{visibility:"visible",maxHeight:"100%"},'&[data-open="false"]':{visibility:"hidden",maxHeight:"0"},overflow:"hidden"}],summaryBody:[V.wp.color.foregroundDimmer,{fontSize:z.LU.fontSizeSmall,lineHeight:z.LU.lineHeightSmall}],summaryFooter:[V.wp.gap(4),{'&[data-open="true"]':{visibility:"visible",maxHeight:"100%"},'&[data-open="false"]':{visibility:"hidden",maxHeight:"0"}}],sectionContainer:[V.wp.backgroundColor.backgroundRoot,V.wp.flex.growAndShrink(1)],sectionTitle:[(0,T._)({},"@media (max-width: ".concat(W.LO.mobileMax,"px)"),{display:"none"})],sectionButton:[(0,T._)({},"@media (max-width: ".concat(W.LO.mobileMax,"px)"),{"& > div":{gap:0}})],divider:[V.wp.height(2),V.wp.backgroundColor.backgroundHighest]}),em=function(){return(0,r.Y)(el.A,{color:z.LU.accentPositiveDefault,css:eh.connectedIcon})},eg={Configuration:{icon:(0,r.Y)(ep.A,{}),colorway:"primary",variant:"default",displayName:"Configure"},"Code samples":{icon:(0,r.Y)(es.A,{}),variant:"outlined",displayName:"Code samples"},Docs:{icon:(0,r.Y)(ei.A,{}),variant:"outlined",displayName:"Docs"}},ev=function(e){var n=e.sectionTitles,t=e.selectedSection,i=e.setSelectedSection;return(0,r.Y)(en.S,{row:!0,gap:8,children:n.map(function(e){return(0,r.Y)(Z.$n,{variant:eg[e].variant,colorway:eg[e].colorway,css:eh.sectionButton,style:{outlineColor:t===e?z.LU.outlineStronger:z.LU.outlineDefault},iconLeft:eg[e].icon,text:(0,r.Y)(X.EY,{css:eh.sectionTitle,children:eg[e].displayName}),onClick:function(){t===e?i(null):i(e)}},e)})})},ey=function(e){var n=e.sections,t=e.selectedSection;return(0,r.Y)(Q.ui,{elevated:!0,css:eh.sectionContainer,children:n.map(function(e){return(0,r.FD)(en.S,{style:{display:t===e.title?"flex":"none"},children:[(0,r.Y)(q.a,{css:eh.divider}),e.content]},e.key)})})},ew=function(e){var n,t=e.icon,o=e.title,a=e.description,s=e.onClick,c=e.isConnected,u=e.sections,d=e.configIcon,p=void 0===d?(0,r.Y)(ep.A,{}):d,f=e.editSecretsAuthzErrorMessage,h=(0,l._)((0,i.useState)(!1),2),m=h[0],g=h[1],v=(0,l._)((0,i.useState)(null),2),y=v[0],w=v[1];return(0,r.Y)(en.S,{tag:"li",css:eh.root,children:(0,r.FD)(en.S,{css:eh.summary,children:[(0,r.FD)(en.S,{onClick:function(){return g(!m)},css:eh.summaryHeader,shrink:!0,row:!0,children:[(0,r.FD)(en.S,{row:!0,gap:8,align:"center",shrink:!0,p:6,children:[c?(0,r.Y)(em,{}):null,t,(0,r.Y)(X.EY,{style:{overflow:"hidden",flexShrink:1},variant:"subheadDefault",children:o})]}),(0,r.FD)(en.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(en.S,{row:!0,gap:8,align:"center",css:eh.summaryControls,shrink:!0,"data-open":m,children:u?(0,r.Y)(ev,{sectionTitles:null!=(n=null==u?void 0:u.map(function(e){return e.title}))?n:[],selectedSection:y,setSelectedSection:w}):(0,r.Y)(ee.m_,{isDisabled:!f,tooltip:f,children:(0,r.Y)(Z.$n,{colorway:"primary",onClick:s,iconLeft:p,text:"Configure"})})}),(0,r.Y)(K.K0,{onClick:function(){w(null),g(!m)},alt:m?"Hide":"Configure",children:m?(0,r.Y)(ea.A,{}):(0,r.Y)(eo.A,{})})]})]}),(0,r.Y)(en.S,{css:eh.summaryDetails,"data-open":m,children:(0,r.Y)(en.S,{css:eh.summaryBody,p:8,children:a})}),(0,r.Y)(en.S,{css:eh.summaryFooter,"data-open":m,row:!0,align:"center",justify:"end",children:u?(0,r.Y)(ey,{sections:u,selectedSection:y}):null})]})})},eb=(0,G.x)({accordionItemBody:[V.wp.flex.column,V.wp.gap(8),V.wp.p(8)],configurationItem:[V.wp.flex.column,V.wp.gap(8)],configurationItemTitle:[V.wp.fontWeight.bold,V.wp.flex.row,V.wp.align.end,V.wp.gap(4)],configurationActions:[V.wp.gap(8)],secretRow:[V.wp.gap(4),{input:{height:22}}],markdownReset:[{"& > div":{"*":{fontSize:"".concat(z.LU.fontSizeSmall," !important"),lineHeight:"".concat(z.LU.lineHeightSmall," !important")},"p, ol":{color:z.LU.foregroundDimmer},a:{color:"".concat(z.LU.foregroundDefault," !important"),textDecoration:"underline"},ol:{marginLeft:z.LU.space16},h4:{marginBottom:0,marginTop:z.LU.space16,color:z.LU.foregroundDefault}}}]}),eS=function(e){var n=e.serviceName,t=e.items,o=e.isConnected,a=e.secrets,s=e.editSecretsAuthzErrorMessage,c=(0,O.A)(),u=(0,l._)((0,i.useState)(new Map(t.map(function(e){return[e.key,""]}))),2),d=u[0],p=u[1];(0,i.useEffect)(function(){p(a)},[a]);var f=(0,A.A)().secrets,h=(0,l._)((0,i.useState)(!1),2),m=h[0],g=h[1],y=(0,i.useCallback)((0,I._)(function(){var e;return(0,P.YH)(this,function(t){switch(t.label){case 0:g(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,f.addEntries(d)];case 2:return t.sent(),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configurationSaved",service:n}),[3,4];case 3:return e=t.sent(),c.showError(e.message),[3,4];case 4:return g(!1),[2]}})}),[d,c,f,n]),b=(0,l._)((0,i.useState)(!1),2),S=b[0],Y=b[1],_=(0,i.useCallback)((0,I._)(function(){var e,r;return(0,P.YH)(this,function(i){switch(i.label){case 0:g(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(e=f).removeEntries.apply(e,(0,w._)(t.map(function(e){return e.key})))];case 2:return i.sent(),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configurationReset",service:n}),[3,4];case 3:return r=i.sent(),c.showError(r.message),[3,4];case 4:return Y(!1),g(!1),[2]}})}),[t,c,f,n]);return(0,r.FD)(en.S,{css:eb.accordionItemBody,children:[t.map(function(e){var n;return(0,r.FD)(en.S,{css:eb.configurationItem,children:[(0,r.FD)(en.S,{css:eb.configurationItemTitle,children:[e.title,e.required?null:(0,r.Y)(X.EY,{variant:"small",color:"dimmest",multiline:!1,children:"(optional)"})]}),(0,r.Y)(et.Ay,{css:eb.markdownReset,children:e.description}),(0,r.FD)(en.S,{css:eb.secretRow,row:!0,align:"center",children:[(0,r.Y)(M.Ge,{value:e.key}),(0,r.Y)(M.iJ,{placeholder:e.placeholder,value:null!=(n=d.get(e.key))?n:"",canEditDisabledMessage:s,onChange:function(n){p(function(t){var r=new Map(t);return r.set(e.key,n),r})}})]})]},e.key)}),(0,r.FD)(en.S,{css:eb.configurationActions,row:!0,justify:"end",children:[o?(0,r.Y)(Z.$n,{text:"Delete",colorway:"red",variant:"outlined",size:"small",onClick:function(){return Y(!0)},loading:m,disabled:void 0!==s}):null,(0,r.Y)(Z.$n,{text:"Save",colorway:"primary",size:"small",onClick:y,loading:m,disabled:void 0!==s})]}),(0,r.Y)(M.g1,{keys:t.map(function(e){return e.key}),isOpen:S,onClose:function(){return Y(!1)},onConfirm:function(){return _()},loading:m})]})},eY=(0,G.x)({root:[V.wp.flex.column,V.wp.gap(8)],header:[V.wp.mb(8),V.wp.p(8),V.wp.pb(0)],items:[V.wp.flex.column,V.wp.gap(8),V.wp.overflowY("auto"),V.wp.maxHeight(250),{marginLeft:"-var(".concat(z.LU.space8,")"),marginRight:"-var(".concat(z.LU.space8,")")}],item:[V.wp.width("100%"),V.wp.flex.column,V.wp.gap(8),{"&:not(:last-of-type)":[V.wp.pb(8),{borderBottom:"1px solid ".concat(z.LU.outlineDimmest)}]}],itemHeader:[V.wp.gap(4),V.wp.fontWeight.bold],itemCodeRoot:[V.wp.position.relative,V.wp.minHeight(52)],itemCode:[V.wp.font.code,V.wp.overflowX("auto"),V.wp.fontSize(12),V.wp.width("100%"),V.wp.pr(8),V.wp.color.foregroundDimmer,{whiteSpace:"pre"}],itemCodeActions:[V.wp.position.absolute,V.wp.right(0),V.wp.top(0),V.wp.backgroundColor.backgroundDefault,V.wp.flex.column,V.wp.align.center,V.wp.gap(4),V.wp.pr(4)]}),e_={JavaScript:{icon:(0,r.Y)(eu.A,{})},Python:{icon:(0,r.Y)(ed.A,{})}},eA=function(e){var n=e.items,t=e.serviceName,o=e.openPane,a=(0,l._)((0,i.useState)("JavaScript"),2),c=a[0],u=a[1],d=(0,H.J)().configs,p=(0,i.useCallback)(function(){return d.some(function(e){return["python2","python3"].includes(e.language)})?"Python":"JavaScript"},[d]);(0,i.useEffect)(function(){u(p())},[p]);var f=(0,B.Hw)(),h=(0,i.useCallback)(function(e){(0,L.flushSync)(function(){o({type:"ghostwriterChat"})});var n=f(function(e){var n=(0,l._)(e,2);return"ghostwriterChat"===(n[0],n[1]).type});(null==n?void 0:n.bindings.type)==="ghostwriterChat"&&n.bindings.setInputText(e)},[o,f]);return(0,r.FD)(en.S,{css:eY.root,children:[(0,r.Y)(en.S,{css:eY.header,row:!0,align:"center",justify:"space-between",children:(0,r.Y)(J.l,{items:Object.entries(e_).map(function(e){var n=(0,l._)(e,2),t=n[0],r=n[1];return(0,F._)((0,s._)({},r),{value:t})}),selectedKey:c,onSelectionChange:function(e){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleLanguageChanged",service:t,language:e}),u(e)},"aria-label":"Select a language",children:function(e){return(0,r.Y)($.nh,{id:e.value,label:e.value,icon:e.icon},e.value)}})}),(0,r.Y)(en.S,{css:eY.items,children:n.map(function(e){return(0,r.FD)(en.S,{css:eY.item,pl:8,children:[(0,r.FD)(en.S,{css:eY.itemHeader,row:!0,align:"center",children:[e.title,(0,r.Y)(K.K0,{tooltipPlacement:"right",colorway:void 0,alt:"Explain this code",onClick:function(){var n=e.code[c];(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleExplained",sample:n,service:t,title:e.title,language:c}),h(["Can you explain this code sample for me?","","```",n,"```"].join("\n"))},children:(0,r.Y)(ec.A,{color:z.LU.tealStronger})})]}),(0,r.FD)(en.S,{css:eY.itemCodeRoot,children:[(0,r.Y)(N.A,{fontSize:12,language:c,code:e.code[c],css:eY.itemCode}),(0,r.Y)(en.S,{css:eY.itemCodeActions,children:(0,r.Y)(j.r,{tooltipPlacement:"left",textToCopy:e.code[c],onCopy:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleCopied",service:t,sample:e.title,language:c})}})})]})]},e.title)})},c),(0,r.Y)(en.S,{p:8,children:(0,r.Y)(Z.$n,{size:"small",text:"Get started with "+U.BP,iconLeft:(0,r.Y)(er.A,{}),colorway:void 0,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleStartWithAi",service:t,language:c}),h("How do I use ".concat(t," in ").concat(c,"?"))}})})]})},eC=function(e){var n=e.configurationItems,t=e.codeSampleItems,o=e.title,a=e.description,c=e.openPane,u=e.editSecretsAuthzErrorMessage,d=e.icon,p=e.isConnected,f=(0,l._)((0,i.useState)({configuration:!1,codeSamples:!1}),2),h=f[0],m=f[1],g=(0,A.A)().secrets,y=(0,l._)((0,i.useState)(new Map),2),w=y[0],b=y[1];return(0,i.useEffect)(function(){return g.watch(function(e){b(e)})},[g]),(0,r.Y)(r.FK,{children:(0,r.Y)(ew,{title:o,description:a,icon:d,isConnected:p,editSecretsAuthzErrorMessage:u,onClick:function(){m(function(e){return(0,F._)((0,s._)({},e),{configuration:!0})}),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configurationOpened",service:o,source:"configureButton"})},onSectionToggle:function(e){m(function(n){var t=!n[e];return t&&(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configuration"===e?"configurationOpened":"codeSampleOpened",service:o,source:"accordion"}),(0,F._)((0,s._)({},n),(0,T._)({},e,t))})},sections:[{key:"codeSamples",title:"Code samples",content:(0,r.Y)(eA,{serviceName:o,items:t,openPane:c}),isOpen:h.codeSamples},{key:"configuration",title:"Configuration",content:(0,r.Y)(eS,{serviceName:o,items:n,isConnected:p,secrets:w,editSecretsAuthzErrorMessage:u}),isOpen:h.configuration}]})})},ek=t(52351),ex=t(11536),eD=t(52153),eE=[{tags:["database","storage","sql"],pane:{type:"neon"},serviceName:"neon"},{tags:["authentication"],pane:{type:"replitAuth"},serviceName:"replitAuth"},{tags:["storage","files"],pane:{type:"objectStorage"},serviceName:"objectStorage"},{tags:["database","storage"],pane:{type:"database"},serviceName:"neon"}],eR=[{title:"OpenAI",description:"OpenAI offers cutting-edge AI models for various applications, including natural language processing and generation. Enhance your projects with state-of-the-art AI capabilities.",tags:["AI","LLM","chat"],icon:(0,r.Y)(function(e){return(0,r.Y)(ek.Ay,(0,F._)((0,s._)({},e),{children:(0,r.Y)("path",{d:"M22.28 9.823a5.979 5.979 0 0 0-.514-4.911 6.047 6.047 0 0 0-6.513-2.901A5.981 5.981 0 0 0 10.743 0a6.048 6.048 0 0 0-5.768 4.186 5.981 5.981 0 0 0-3.998 2.9 6.049 6.049 0 0 0 .744 7.09 5.978 5.978 0 0 0 .513 4.911 6.047 6.047 0 0 0 6.513 2.901 5.976 5.976 0 0 0 4.51 2.01 6.048 6.048 0 0 0 5.77-4.19 5.982 5.982 0 0 0 3.999-2.9 6.05 6.05 0 0 0-.746-7.088v.002ZM13.257 22.43a4.483 4.483 0 0 1-2.879-1.041c.037-.02.1-.055.142-.08l4.779-2.76a.777.777 0 0 0 .393-.68v-6.738l2.02 1.167a.07.07 0 0 1 .039.055v5.58a4.503 4.503 0 0 1-4.493 4.497Zm-9.662-4.127a4.478 4.478 0 0 1-.537-3.014c.036.021.098.06.142.085l4.779 2.76a.778.778 0 0 0 .785 0l5.835-3.369v2.333a.075.075 0 0 1-.029.062l-4.83 2.789a4.504 4.504 0 0 1-6.145-1.646ZM2.338 7.872A4.483 4.483 0 0 1 4.678 5.9l-.002.165v5.521c-.001.28.149.54.393.68l5.834 3.368-2.02 1.166a.071.071 0 0 1-.068.006l-4.832-2.792a4.503 4.503 0 0 1-1.646-6.141Zm16.594 3.862-5.834-3.37 2.02-1.165a.071.071 0 0 1 .068-.006l4.831 2.79a4.499 4.499 0 0 1-.694 8.116v-5.686a.777.777 0 0 0-.39-.68Zm2.01-3.026a6.493 6.493 0 0 0-.142-.084l-4.779-2.76a.778.778 0 0 0-.785 0L9.402 9.233V6.9a.075.075 0 0 1 .029-.062l4.83-2.787a4.497 4.497 0 0 1 6.68 4.657h.001ZM8.304 12.866l-2.02-1.167a.07.07 0 0 1-.04-.055v-5.58a4.498 4.498 0 0 1 7.377-3.454c-.037.02-.1.055-.142.08L8.7 5.45a.776.776 0 0 0-.393.68l-.003 6.736ZM9.401 10.5 12 9l2.599 1.5v3L12 15l-2.599-1.5v-3Z"})}))},{}),configurationItems:[{key:"OPENAI_API_KEY",title:"API Key",description:"To get started, you'll need an API key from OpenAI. Visit the [API keys page](https://platform.openai.com/account/api-keys) in your OpenAI account, generate a new key, and paste it below.",placeholder:"sk-•••••••••••••••••••••",required:!0},{key:"OPENAI_ORG_ID",title:"Organization ID",description:"For accounts associated with multiple organizations, you can specify the [Organization ID](https://platform.openai.com/account/org-settings) to use. This is optional; if not provided, your default organization will be used."}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nfrom openai import OpenAI\n\napi_key = os.environ['OPENAI_API_KEY']\norganization_id = os.environ.get('OPENAI_ORG_ID')  # Optional\n\nclient = OpenAI(api_key=api_key, organization=organization_id)",JavaScript:"import { OpenAI } from 'openai';\n\nconst apiKey = process.env.OPENAI_API_KEY;\nconst organizationId = process.env.OPENAI_ORG_ID;  // Optional\n\nconst openai = new OpenAI({\n  apiKey,\n  organization: organizationId,\n});"}},{title:"Chat creation",code:{Python:'response = client.chat.completions.create(\n    model="gpt-3.5-turbo",\n    messages=[\n        {"role": "system", "content": "You are a helpful assistant."},\n        {"role": "user", "content": "Hello!"}\n    ]\n)\n\nprint(response.choices[0].message.content)',JavaScript:'const response = await openai.chat.completions.create({\n  model: "gpt-3.5-turbo",\n  messages: [\n    {role: "system", content: "You are a helpful assistant."},\n    {role: "user", content: "Hello!"}\n  ],\n});\n\nconsole.log(response.choices[0].message.content);'}},{title:"Image generation",code:{Python:'response = client.images.generate(\n    model="dall-e-3",\n    prompt="A futuristic cityscape with flying cars",\n    size="1024x1024",\n    quality="standard",\n    n=1,\n)\n\nimage_url = response.data[0].url\nprint(f"Generated image URL: {image_url}")',JavaScript:'const response = await openai.images.generate({\n  model: "dall-e-3",\n  prompt: "A futuristic cityscape with flying cars",\n  size: "1024x1024",\n  quality: "standard",\n  n: 1,\n});\n\nconst imageUrl = response.data[0].url;\nconsole.log(`Generated image URL: ${imageUrl}`);'}},{title:"Embedding generation",code:{Python:'response = client.embeddings.create(\n    model="text-embedding-ada-002",\n    input="The quick brown fox jumps over the lazy dog"\n)\nembedding = response.data[0].embedding\nprint(f"Embedding vector (first 5 elements): {embedding[:5]}")',JavaScript:'const response = await openai.embeddings.create({\n  model: "text-embedding-ada-002",\n  input: "The quick brown fox jumps over the lazy dog",\n});\nconst embedding = response.data[0].embedding;\nconsole.log(`Embedding vector (first 5 elements): ${embedding.slice(0, 5)}`);'}}]},{title:"Google AI (Gemini)",description:"Google AI's Gemini model represents the latest in machine learning technology. Integrate this powerful tool into your applications for advanced natural language processing and generation.",tags:["AI","LLM","chat"],icon:(0,r.Y)(function(e){return(0,r.FD)(eD.A,(0,F._)((0,s._)({},e),{children:[(0,r.Y)("g",{clipPath:"url(#clip0_7378_480)",children:(0,r.Y)("path",{fill:"url(#paint0_radial_7378_480)",d:"M24 12.024A12.783 12.783 0 0 0 12.024 24h-.048A12.782 12.782 0 0 0 0 12.024v-.048A12.782 12.782 0 0 0 11.976 0h.048A12.783 12.783 0 0 0 24 11.976v.048Z"})}),(0,r.FD)("defs",{children:[(0,r.FD)("radialGradient",{id:"paint0_radial_7378_480",cx:"0",cy:"0",r:"1",gradientTransform:"matrix(24.19889 8.18296 -65.55084 193.84876 2.382 9.755)",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{offset:".067",stopColor:"#9168C0"}),(0,r.Y)("stop",{offset:".343",stopColor:"#5684D1"}),(0,r.Y)("stop",{offset:".672",stopColor:"#1BA1E3"})]}),(0,r.Y)("clipPath",{id:"clip0_7378_480",children:(0,r.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}))},{}),configurationItems:[{key:"GOOGLE_AI_API_KEY",title:"API Key",description:"To use Gemini, you'll need to set up an API key. Go to the [Google AI Studio](https://makersuite.google.com/app/apikey) to create one. Once you have your key, enter it below to start using Gemini in your projects.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport google.generativeai as genai\n\ngenai.configure(api_key=os.environ['GOOGLE_AI_API_KEY'])",JavaScript:'const {\n  GoogleGenerativeAI,\n  HarmCategory,\n  HarmBlockThreshold,\n} = require("@google/generative-ai");\n\nconst genAI = new GoogleGenerativeAI(process.env.GOOGLE_AI_API_KEY);'}},{title:"Chat creation",code:{Python:"model = genai.GenerativeModel('gemini-pro')\nchat = model.start_chat()\n\nresponse = chat.send_message(\"Hello, how are you?\")\nprint(response.text)",JavaScript:'const model = genAI.getGenerativeModel({ model: "gemini-pro" });\n\nconst chat = model.startChat({\n  generationConfig: {\n    maxOutputTokens: 100,\n  },\n});\n\nconst result = await chat.sendMessage("Hello, how are you?");\nconst response = result.response;\nconsole.log(response.text());'}},{title:"Text generation",code:{Python:"model = genai.GenerativeModel('gemini-pro')\nresponse = model.generate_content(\"Write a short poem about artificial intelligence.\")\nprint(response.text)",JavaScript:'const model = genAI.getGenerativeModel({ model: "gemini-pro" });\nconst result = await model.generateContent("Write a short poem about artificial intelligence.");\nconsole.log(result.response.text());'}},{title:"Image analysis",code:{Python:"from PIL import Image\n\nmodel = genai.GenerativeModel('gemini-pro-vision')\nimg = Image.open('image.jpg')\nresponse = model.generate_content([\"Describe this image:\", img])\nprint(response.text)",JavaScript:'const fs = require(\'fs\');\n\nconst model = genAI.getGenerativeModel({ model: "gemini-pro-vision" });\n\nconst imageParts = [\n  {\n    inlineData: {\n      data: fs.readFileSync("image.jpg", {encoding: \'base64\'}),\n      mimeType: "image/jpeg"\n    }\n  },\n];\n\nconst result = await model.generateContent(["Describe this image:", ...imageParts]);\nconsole.log(result.response.text());'}}]},{title:"Anthropic (Claude)",description:"Anthropic offers safe AI models like Claude, enhancing applications with capabilities for analysis, writing, coding, and problem-solving.",tags:["AI","LLM","chat"],icon:(0,r.Y)(function(e){return(0,r.Y)(ek.Ay,(0,F._)((0,s._)({},e),{children:(0,r.Y)("path",{d:"M16.868 4.705h-3.365l6.133 15.51H23l-6.132-15.51Zm-9.736 0L1 20.215h3.436l1.265-3.245h6.418l1.241 3.245h3.436l-6.132-15.51H7.132Zm-.334 9.377 2.1-5.44 2.1 5.44h-4.2Z"})}))},{}),configurationItems:[{key:"ANTHROPIC_API_KEY",title:"API Key",description:"[Create an API key](https://console.anthropic.com/account/keys) and paste the key below. If you get an error, you may have reached your Anthropic usage limits. To view your usage, check your [Anthropic usage dashboard](https://console.anthropic.com/usage).",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:'import os\nimport anthropic\n\nclient = anthropic.Anthropic(api_key=os.environ["ANTHROPIC_API_KEY"])',JavaScript:"const Anthropic = require('@anthropic-ai/sdk');\n\nconst anthropic = new Anthropic({\n  apiKey: process.env.ANTHROPIC_API_KEY,\n});"}},{title:"Chat creation",code:{Python:'message = client.messages.create(\n    model="claude-3-opus-20240229",\n    max_tokens=1000,\n    messages=[\n        {"role": "user", "content": "Hello, Claude!"}\n    ]\n)\nprint(message.content[0].text)',JavaScript:"const message = await anthropic.messages.create({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 1000,\n  messages: [\n    {role: 'user', content: 'Hello, Claude!'}\n  ],\n});\nconsole.log(message.content[0].text);"}},{title:"Streaming response",code:{Python:'with client.messages.stream(\n    model="claude-3-opus-20240229",\n    max_tokens=1000,\n    messages=[\n        {"role": "user", "content": "Write a short story about time travel."}\n    ]\n) as stream:\n    for text in stream.text_stream:\n        print(text, end="", flush=True)',JavaScript:"const stream = await anthropic.messages.stream({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 1000,\n  messages: [\n    {role: 'user', content: 'Write a short story about time travel.'}\n  ],\n});\n\nfor await (const chunk of stream) {\n  if (chunk.type === 'content_block_delta') {\n    process.stdout.write(chunk.delta.text);\n  }\n}"}},{title:"Content classification",code:{Python:'message = client.messages.create(\n    model="claude-3-opus-20240229",\n    max_tokens=100,\n    messages=[\n        {"role": "user", "content": "Classify the sentiment of this text: \'I absolutely love this product!\'"}\n    ]\n)\nprint(message.content[0].text)',JavaScript:"const message = await anthropic.messages.create({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 100,\n  messages: [\n    {role: 'user', content: \"Classify the sentiment of this text: 'I absolutely love this product!'\"}\n  ],\n});\nconsole.log(message.content[0].text);"}}]},{title:"Perplexity",description:"Perplexity AI provides powerful language models and APIs for various natural language processing tasks. Integrate advanced AI capabilities into your applications with ease.",tags:["AI","LLM","NLP"],icon:(0,r.Y)(function(e){return(0,r.Y)(ek.Ay,(0,F._)((0,s._)({},e),{children:(0,r.Y)("path",{fillRule:"evenodd",d:"m5.29.765 6.398 5.895V.779h1.246v5.907L19.36.765v6.721H22v9.696h-2.63v5.985l-6.436-5.654v5.719h-1.246v-5.626l-6.39 5.63V17.18h-2.64V7.486H5.29V.765Zm5.46 7.952H3.903v7.234h1.392V13.67l5.453-4.952Zm-4.207 5.498v6.275l5.145-4.532V9.54l-5.145 4.674Zm6.427 1.683V9.535l5.147 4.674v2.973h.007v3.244l-5.154-4.528Zm6.4.053h1.384V8.717H13.96l5.41 4.9v2.334Zm-1.254-8.465V3.595l-4.224 3.891h4.224Zm-7.357 0H6.535V3.595l4.224 3.891Z",clipRule:"evenodd"})}))},{}),configurationItems:[{key:"PERPLEXITY_API_KEY",title:"API Key",description:"To use Perplexity's API, you'll need an API key. Sign up for an account on the [Perplexity website](https://www.perplexity.ai/), navigate to your account settings, and generate a new API key. Paste it below.",placeholder:"pplx-••••••••••••••••••••••••••••••",required:!0}],codeSampleItems:[{title:"API Client Initialization",code:{Python:'import os\nimport requests\n\napi_key = os.environ[\'PERPLEXITY_API_KEY\']\nheaders = {\n    "Authorization": f"Bearer {api_key}",\n    "Content-Type": "application/json"\n}',JavaScript:"const apiKey = process.env.PERPLEXITY_API_KEY;\nconst headers = {\n  'Authorization': `Bearer ${apiKey}`,\n  'Content-Type': 'application/json'\n};"}},{title:"Text Generation",code:{Python:'url = "https://api.perplexity.ai/chat/completions"\ndata = {\n    "model": "sonar-medium-online",\n    "messages": [\n        {"role": "system", "content": "You are a helpful assistant."},\n        {"role": "user", "content": "What is the capital of France?"}\n    ]\n}\n\nresponse = requests.post(url, json=data, headers=headers)\nprint(response.json()[\'choices\'][0][\'message\'][\'content\'])',JavaScript:"const url = 'https://api.perplexity.ai/chat/completions';\nconst data = {\n  model: 'sonar-medium-online',\n  messages: [\n    {role: 'system', content: 'You are a helpful assistant.'},\n    {role: 'user', content: 'What is the capital of France?'}\n  ]\n};\n\nconst response = await fetch(url, {\n  method: 'POST',\n  headers: headers,\n  body: JSON.stringify(data)\n});\n\nconst result = await response.json();\nconsole.log(result.choices[0].message.content);"}}]},{title:"Mistral AI",description:"Mistral AI offers state-of-the-art language models and APIs for a wide range of AI applications. Leverage their powerful models to enhance your projects with advanced natural language processing capabilities.",tags:["AI","LLM","NLP"],icon:(0,r.Y)(function(e){return(0,r.FD)(eD.A,(0,F._)((0,s._)({},e),{children:[(0,r.Y)("path",{d:"M15 6v4h-2V6h2Zm4-4v4h-2V2h2ZM1 2h2v20H1V2Zm8 12h2v4H9v-4Zm8 0h2v8h-2v-8Z"}),(0,r.Y)("path",{fill:"#F7D046",d:"M19 2h4v4h-4V2ZM3 2h4v4H3V2Z"}),(0,r.Y)("path",{fill:"#F2A73B",d:"M15 10V6h8v4h-8ZM3 10V6h8v4H3Z"}),(0,r.Y)("path",{fill:"#EE792F",d:"M3 14v-4h20v4H3Z"}),(0,r.Y)("path",{fill:"#EB5829",d:"M11 14h4v4h-4v-4Zm8 0h4v4h-4v-4ZM3 14h4v4H3v-4Z"}),(0,r.Y)("path",{fill:"#EA3326",d:"M19 18h4v4h-4v-4ZM3 18h4v4H3v-4Z"})]}))},{}),configurationItems:[{key:"MISTRAL_API_KEY",title:"API Key",description:"To access Mistral AI's services, you need an API key. Visit the [Mistral AI platform](https://console.mistral.ai/), create an account, and generate a new API key. Enter it below.",placeholder:"mis-••••••••••••••••••••••••••••••",required:!0}],codeSampleItems:[{title:"Client Setup",code:{Python:"import os\nfrom mistralai.client import MistralClient\n\napi_key = os.environ['MISTRAL_API_KEY']\nclient = MistralClient(api_key=api_key)",JavaScript:"const apiKey = process.env.MISTRAL_API_KEY;\nconst headers = {\n  'Authorization': `Bearer ${apiKey}`,\n  'Content-Type': 'application/json'\n};"}},{title:"Chat Completion",code:{Python:'chat_response = client.chat(\n    model="mistral-tiny",\n    messages=[\n        {"role": "user", "content": "What are the main features of Python?"}\n    ]\n)\n\nprint(chat_response.choices[0].message.content)',JavaScript:'const url = \'https://api.mistral.ai/v1/chat/completions\';\nconst data = {\n  model: "mistral-tiny",\n  messages: [\n    {role: "user", content: "What are the main features of Python?"}\n  ]\n};\n\nconst response = await fetch(url, {\n  method: \'POST\',\n  headers: headers,\n  body: JSON.stringify(data)\n});\n\nconst result = await response.json();\nconsole.log(result.choices[0].message.content);'}},{title:"Embedding Generation",code:{Python:'embed_response = client.embeddings(\n    model="mistral-embed",\n    input=["Hello world", "The quick brown fox jumps over the lazy dog"]\n)\n\nfor embedding in embed_response.data:\n    print(f"Embedding (first 5 dimensions): {embedding.embedding[:5]}")',JavaScript:'const url = \'https://api.mistral.ai/v1/embeddings\';\nconst data = {\n  model: "mistral-embed",\n  input: ["Hello world", "The quick brown fox jumps over the lazy dog"]\n};\n\nconst response = await fetch(url, {\n  method: \'POST\',\n  headers: headers,\n  body: JSON.stringify(data)\n});\n\nconst result = await response.json();\nresult.data.forEach((embedding, index) => {\n  console.log(`Embedding ${index + 1} (first 5 dimensions): ${embedding.embedding.slice(0, 5)}`);\n});'}}]},{title:"Google Sheets",description:"Google Sheets API allows you to read, write, and modify Google Sheets. This integration uses a service account for authentication, suitable for server-side applications.",tags:["Google","Spreadsheets","Data"],icon:(0,r.Y)(function(e){return(0,r.FD)(eD.A,(0,F._)((0,s._)({},e),{children:[(0,r.FD)("g",{clipPath:"url(#clip0_7379_618)",children:[(0,r.Y)("path",{fill:"#188038",d:"m14.455 0 6 6-3 .545-3-.545-.546-3 .546-3Z"}),(0,r.Y)("path",{fill:"#34A853",d:"M14.455 6V0H4.635C3.732 0 3 .732 3 1.636v20.728C3 23.268 3.732 24 4.636 24h14.182c.904 0 1.636-.732 1.636-1.636V6h-6Z"}),(0,r.Y)("path",{fill:"#fff",d:"M6.273 9.273v7.909h10.909v-7.91H6.272Zm4.772 6.545H7.636V13.91h3.41v1.91Zm0-3.273H7.636v-1.909h3.41v1.91Zm4.773 3.273H12.41V13.91h3.41v1.91Zm0-3.273H12.41v-1.909h3.41v1.91Z"})]}),(0,r.Y)("defs",{children:(0,r.Y)("clipPath",{id:"clip0_7379_618",children:(0,r.Y)("path",{fill:"#fff",d:"M3 0h17.454v24H3z"})})})]}))},{}),configurationItems:[{key:"GOOGLE_SERVICE_ACCOUNT_JSON",title:"Service Account JSON",description:'The entire contents of your Google Cloud service account JSON key file. This includes all the necessary information for authentication.\n\n#### Creating a Service Account\n1. Go to [Google Cloud Console](https://console.cloud.google.com/) and sign in with your Google account.\n2. Select an existing project or create a new one (Click project dropdown > "New Project").\n3. Navigate to ["IAM & Admin" > "Service Accounts"](https://console.cloud.google.com/iam-admin/serviceaccounts) in the left sidebar.\n4. Click "+ CREATE SERVICE ACCOUNT".\n5. Enter a name and optional description, then click "CREATE AND CONTINUE".\n6. Grant appropriate permissions (e.g., "Editor" for Sheets access), then click "CONTINUE".\n7. (Optional) Grant users access, or click "DONE".\n8. In the service accounts list, click the three dots next to your new account > "Manage keys".\n9. Click "ADD KEY" > "Create new key", choose "JSON" format, and click "CREATE" to download the key file.\n10. Go to ["APIs & Services" > "Dashboard"](https://console.cloud.google.com/apis/dashboard), click ["+ ENABLE APIS AND SERVICES"](https://console.cloud.google.com/apis/library) up top.\n11. Search for and enable "Google Sheets API". Add "Google Docs API" if you\'re also using Google Docs.\n12. Open the JSON key file you downloaded, copy its entire contents, and paste it into this field.\n\nRemember to keep your key secure and never share it or commit it to Git. Follow the principle of least privilege when assigning roles.\n\n#### Getting a Spreadsheet ID\n1. Open the Google Sheet you want to access.\n2. Look at the URL in your browser. It will be in this format: `https://docs.google.com/spreadsheets/d/SPREADSHEET_ID/edit#gid=0`\n3. The SPREADSHEET_ID is the long string of letters, numbers, and hyphens between \'/d/\' and \'/edit\'.\n\n#### IMPORTANT: Granting Spreadsheet Access to Your Service Account\n1. Find your service account\'s email address in the JSON key file (look for "client_email").\n2. Open your Google Sheet.\n3. Click the "Share" button in the top right corner.\n4. In the "Share with people and groups" field, paste your service account\'s email address.\n5. Set the permission to "Editor" if you need write access, or "Viewer" for read-only access.\n6. Uncheck the "Notify people" box (optional).\n7. Click "Send" or "Share" (depending on your Google Workspace settings).',placeholder:'{ "type": "service_account", "project_id": "your-project-id", "private_key_id": "..." }',required:!0}],codeSampleItems:[{title:"Authentication Setup",code:{Python:"import os\nimport json\nfrom google.oauth2 import service_account\nfrom googleapiclient.discovery import build\n\nSERVICE_ACCOUNT_JSON = os.environ['GOOGLE_SERVICE_ACCOUNT_JSON']\nservice_account_info = json.loads(SERVICE_ACCOUNT_JSON)\n\ncredentials = service_account.Credentials.from_service_account_info(\n    service_account_info,\n    scopes=['https://www.googleapis.com/auth/spreadsheets']\n)\n\nsheets_service = build('sheets', 'v4', credentials=credentials)",JavaScript:"const { google } = require('googleapis');\n\nconst SERVICE_ACCOUNT_JSON = JSON.parse(process.env.GOOGLE_SERVICE_ACCOUNT_JSON);\n\nconst auth = new google.auth.GoogleAuth({\n  credentials: SERVICE_ACCOUNT_JSON,\n  scopes: ['https://www.googleapis.com/auth/spreadsheets'],\n});\n\nconst sheets = google.sheets({ version: 'v4', auth });"}},{title:"Read from Google Sheets",code:{Python:"SPREADSHEET_ID = 'your-spreadsheet-id'\nRANGE = 'Sheet1!A1:B5'\n\nresult = sheets_service.spreadsheets().values().get(\n    spreadsheetId=SPREADSHEET_ID,\n    range=RANGE\n).execute()\n\nvalues = result.get('values', [])\nfor row in values:\n    print(row)",JavaScript:"const SPREADSHEET_ID = 'your-spreadsheet-id';\nconst RANGE = 'Sheet1!A1:B5';\n\nconst response = await sheets.spreadsheets.values.get({\n  spreadsheetId: SPREADSHEET_ID,\n  range: RANGE,\n});\n\nconst rows = response.data.values;\nif (rows.length) {\n  rows.forEach(row => {\n    console.log(row);\n  });\n} else {\n  console.log('No data found.');\n}"}},{title:"Write to Google Sheets",code:{Python:"SPREADSHEET_ID = 'your-spreadsheet-id'\nRANGE = 'Sheet1!A1:B2'\nVALUES = [\n    ['Name', 'Score'],\n    ['Alice', 95],\n]\n\nresult = sheets_service.spreadsheets().values().update(\n    spreadsheetId=SPREADSHEET_ID,\n    range=RANGE,\n    valueInputOption='USER_ENTERED',\n    body={'values': VALUES}\n).execute()\n\nprint(f\"{result.get('updatedCells')} cells updated.\")",JavaScript:"const SPREADSHEET_ID = 'your-spreadsheet-id';\nconst RANGE = 'Sheet1!A1:B2';\nconst VALUES = [\n  ['Name', 'Score'],\n  ['Alice', 95],\n];\n\nconst response = await sheets.spreadsheets.values.update({\n  spreadsheetId: SPREADSHEET_ID,\n  range: RANGE,\n  valueInputOption: 'USER_ENTERED',\n  resource: { values: VALUES },\n});\n\nconsole.log(`${response.data.updatedCells} cells updated.`);"}}]},{title:"Google Docs",description:"Google Docs API allows you to create, read, and modify Google Docs. This integration uses a service account for authentication, suitable for server-side applications.",tags:["Google","Documents","Text Processing"],icon:(0,r.Y)(function(e){return(0,r.FD)(eD.A,(0,F._)((0,s._)({},e),{children:[(0,r.Y)("path",{fill:"#3086F6",d:"M18.818 24H4.636C3.736 24 3 23.264 3 22.364V1.636C3 .736 3.736 0 4.636 0h9.819l6 6v16.364c0 .9-.737 1.636-1.637 1.636Z"}),(0,r.Y)("path",{fill:"#0C67D6",d:"m14.455 0 6 6h-6V0Z"}),(0,r.Y)("path",{fill:"#FDFFFF",d:"M16.636 10.636H6.818V9.273h9.818v1.363Zm0 1.91H6.818v1.363h9.818v-1.364Zm-2.727 3.272H6.82v1.364h7.09v-1.364Z"})]}))},{}),configurationItems:[{key:"GOOGLE_SERVICE_ACCOUNT_JSON",title:"Service Account JSON",description:'The entire contents of your Google Cloud service account JSON key file. This includes all the necessary information for authentication.\n\n#### Creating a Service Account\n1. Go to [Google Cloud Console](https://console.cloud.google.com/) and sign in with your Google account.\n2. Select an existing project or create a new one (Click project dropdown > "New Project").\n3. Navigate to ["IAM & Admin" > "Service Accounts"](https://console.cloud.google.com/iam-admin/serviceaccounts) in the left sidebar.\n4. Click "+ CREATE SERVICE ACCOUNT".\n5. Enter a name and optional description, then click "CREATE AND CONTINUE".\n6. Grant appropriate permissions (e.g., "Editor" for Docs access), then click "CONTINUE".\n7. (Optional) Grant users access, or click "DONE".\n8. In the service accounts list, click the three dots next to your new account > "Manage keys".\n9. Click "ADD KEY" > "Create new key", choose "JSON" format, and click "CREATE" to download the key file.\n10. Go to ["APIs & Services" > "Dashboard"](https://console.cloud.google.com/apis/dashboard), click ["+ ENABLE APIS AND SERVICES"](https://console.cloud.google.com/apis/library) up top.\n11. Search for and enable "Google Docs API". Add "Google Sheets API" if you\'re also using Google Sheets.\n12. Open the JSON key file you downloaded, copy its entire contents, and paste it into this field.\n\nRemember to keep your key secure and never share it or commit it to Git. Follow the principle of least privilege when assigning roles.\n\n#### Getting a Document ID\n1. Open the Google Doc you want to access.\n2. Look at the URL in your browser. It will be in this format: `https://docs.google.com/document/d/DOCUMENT_ID/edit`\n3. The DOCUMENT_ID is the long string of letters, numbers, and hyphens between \'/d/\' and \'/edit\'.\n\n#### IMPORTANT: Granting Document Access to Your Service Account\n1. Find your service account\'s email address in the JSON key file (look for "client_email").\n2. Open your Google Doc.\n3. Click the "Share" button in the top right corner.\n4. In the "Share with people and groups" field, paste your service account\'s email address.\n5. Set the permission to "Editor" if you need write access, or "Viewer" for read-only access.\n6. Uncheck the "Notify people" box (optional).\n7. Click "Send" or "Share" (depending on your Google Workspace settings).',placeholder:'{ "type": "service_account", "project_id": "your-project-id", "private_key_id": "..." }',required:!0}],codeSampleItems:[{title:"Authentication Setup",code:{Python:"import os\nimport json\nfrom google.oauth2 import service_account\nfrom googleapiclient.discovery import build\n\nSERVICE_ACCOUNT_JSON = os.environ['GOOGLE_SERVICE_ACCOUNT_JSON']\nservice_account_info = json.loads(SERVICE_ACCOUNT_JSON)\n\ncredentials = service_account.Credentials.from_service_account_info(\n    service_account_info,\n    scopes=['https://www.googleapis.com/auth/documents']\n)\n\ndocs_service = build('docs', 'v1', credentials=credentials)",JavaScript:"const { google } = require('googleapis');\n\nconst SERVICE_ACCOUNT_JSON = JSON.parse(process.env.GOOGLE_SERVICE_ACCOUNT_JSON);\n\nconst auth = new google.auth.GoogleAuth({\n  credentials: SERVICE_ACCOUNT_JSON,\n  scopes: ['https://www.googleapis.com/auth/documents'],\n});\n\nconst docs = google.docs({ version: 'v1', auth });"}},{title:"Read from Google Docs",code:{Python:"DOCUMENT_ID = 'your-document-id'\n\nresult = docs_service.documents().get(documentId=DOCUMENT_ID).execute()\nprint(f\"The title of the document is: {result.get('title')}\")\n\ncontent = result.get('body').get('content')\nfor element in content:\n    if 'paragraph' in element:\n        for run in element['paragraph']['elements']:\n            if 'textRun' in run:\n                print(run['textRun']['content'])",JavaScript:"const DOCUMENT_ID = 'your-document-id';\n\nconst response = await docs.documents.get({\n  documentId: DOCUMENT_ID,\n});\n\nconsole.log(`The title of the document is: ${response.data.title}`);\n\nconst content = response.data.body.content;\ncontent.forEach(element => {\n  if (element.paragraph) {\n    element.paragraph.elements.forEach(run => {\n      if (run.textRun) {\n        console.log(run.textRun.content);\n      }\n    });\n  }\n});"}},{title:"Write to Google Docs",code:{Python:"DOCUMENT_ID = 'your-document-id'\n\nrequests = [\n    {\n        'insertText': {\n            'location': {\n                'index': 1,\n            },\n            'text': 'Hello from the Google Docs API!'\n        }\n    }\n]\n\nresult = docs_service.documents().batchUpdate(\n    documentId=DOCUMENT_ID,\n    body={'requests': requests}\n).execute()\n\nprint(f\"Document updated: {result.get('documentId')}\")",JavaScript:"const DOCUMENT_ID = 'your-document-id';\n\nconst requests = [\n  {\n    insertText: {\n      location: {\n        index: 1,\n      },\n      text: 'Hello from the Google Docs API!',\n    },\n  },\n];\n\nconst response = await docs.documents.batchUpdate({\n  documentId: DOCUMENT_ID,\n  requestBody: {\n    requests: requests,\n  },\n});\n\nconsole.log(`Document updated: ${response.data.documentId}`);"}}]},{title:"Slack",description:"Slack is a communication platform for teams to collaborate in real-time. Integrate with Slack to send messages, manage channels, and automate workflows.",tags:["communication","chat"],icon:(0,r.Y)(function(e){return(0,r.FD)(eD.A,(0,F._)((0,s._)({},e),{children:[(0,r.FD)("g",{clipPath:"url(#clip0_7378_478)",children:[(0,r.Y)("path",{fill:"#E01E5A",d:"M5.14 15.118a2.492 2.492 0 0 1-2.494 2.495A2.492 2.492 0 0 1 .15 15.118a2.492 2.492 0 0 1 2.495-2.494H5.14v2.494Zm1.247 0a2.492 2.492 0 0 1 2.495-2.494 2.492 2.492 0 0 1 2.494 2.494v6.236a2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495v-6.236Z"}),(0,r.Y)("path",{fill:"#36C5F0",d:"M8.882 5.102a2.492 2.492 0 0 1-2.495-2.494A2.492 2.492 0 0 1 8.882.113a2.492 2.492 0 0 1 2.494 2.495v2.494H8.882Zm0 1.267a2.492 2.492 0 0 1 2.494 2.494 2.492 2.492 0 0 1-2.494 2.495H2.627A2.492 2.492 0 0 1 .132 8.863a2.492 2.492 0 0 1 2.495-2.494h6.255Z"}),(0,r.Y)("path",{fill:"#2EB67D",d:"M18.879 8.863a2.492 2.492 0 0 1 2.494-2.494 2.492 2.492 0 0 1 2.495 2.494 2.492 2.492 0 0 1-2.495 2.495H18.88V8.863Zm-1.248 0a2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495V2.608A2.492 2.492 0 0 1 15.138.113a2.492 2.492 0 0 1 2.494 2.495v6.255Z"}),(0,r.Y)("path",{fill:"#ECB22E",d:"M15.137 18.86a2.492 2.492 0 0 1 2.494 2.494 2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495V18.86h2.495Zm0-1.247a2.492 2.492 0 0 1-2.495-2.495 2.492 2.492 0 0 1 2.495-2.494h6.255a2.492 2.492 0 0 1 2.495 2.494 2.492 2.492 0 0 1-2.495 2.495h-6.255Z"})]}),(0,r.Y)("defs",{children:(0,r.Y)("clipPath",{id:"clip0_7378_478",children:(0,r.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))},{}),configurationItems:[{key:"SLACK_BOT_TOKEN",title:"Bot Token",description:"[Create a Slack app](https://api.slack.com/apps) and obtain a Bot Token. This token allows your bot to interact with your Slack workspace.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nfrom slack_sdk import WebClient\n\nclient = WebClient(token=os.environ['SLACK_BOT_TOKEN'])",JavaScript:"const { WebClient } = require('@slack/web-api');\n\nconst client = new WebClient(process.env.SLACK_BOT_TOKEN);"}},{title:"Message sending",code:{Python:'try:\n    response = client.chat_postMessage(\n        channel="#general",\n        text="Hello from your bot!"\n    )\n    print(f"Message sent: {response[\'ts\']}")\nexcept Exception as e:\n    print(f"Error sending message: {e}")',JavaScript:"try {\n  const result = await client.chat.postMessage({\n    channel: '#general',\n    text: 'Hello from your bot!',\n  });\n  console.log(`Message sent: ${result.ts}`);\n} catch (error) {\n  console.error(`Error sending message: ${error}`);\n}"}},{title:"File upload",code:{Python:'try:\n    response = client.files_upload_v2(\n        channels="#general",\n        file="path/to/file.txt",\n        title="Sample File",\n        initial_comment="Here\'s a file for your review."\n    )\n    print(f"File uploaded: {response[\'file\'][\'id\']}")\nexcept Exception as e:\n    print(f"Error uploading file: {e}")',JavaScript:"try {\n  const result = await client.files.uploadV2({\n    channels: '#general',\n    file: fs.createReadStream('path/to/file.txt'),\n    title: 'Sample File',\n    initial_comment: \"Here's a file for your review.\",\n  });\n  console.log(`File uploaded: ${result.file.id}`);\n} catch (error) {\n  console.error(`Error uploading file: ${error}`);\n}"}},{title:"Retrieving channel information",code:{Python:"try:\n    response = client.conversations_info(channel=\"C1234567890\")\n    print(f\"Channel name: {response['channel']['name']}\")\n    print(f\"Channel purpose: {response['channel']['purpose']['value']}\")\nexcept Exception as e:\n    print(f\"Error retrieving channel info: {e}\")",JavaScript:"try {\n  const result = await client.conversations.info({\n    channel: 'C1234567890'\n  });\n  console.log(`Channel name: ${result.channel.name}`);\n  console.log(`Channel purpose: ${result.channel.purpose.value}`);\n} catch (error) {\n  console.error(`Error retrieving channel info: ${error}`);\n}"}}]},{title:"Discord",description:"Discord is a communication platform designed for creating communities. Integrate with Discord to send messages, manage servers, and enhance user engagement.",tags:["communication","chat"],icon:(0,r.Y)(ex.A,{}),configurationItems:[{key:"DISCORD_BOT_TOKEN",title:"Bot Token",description:"[Create a Discord application](https://discord.com/developers/applications), add a bot to it, and paste the bot token below. This token allows your bot to interact with Discord servers.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport discord\nfrom discord.ext import commands\n\nintents = discord.Intents.default()\nintents.message_content = True\nbot = commands.Bot(command_prefix='!', intents=intents)",JavaScript:"const { Client, GatewayIntentBits } = require('discord.js');\n\nconst client = new Client({\n  intents: [\n    GatewayIntentBits.Guilds,\n    GatewayIntentBits.GuildMessages,\n    GatewayIntentBits.MessageContent,\n  ],\n});"}},{title:"Bot setup and message handling",code:{Python:"@bot.event\nasync def on_ready():\n    print(f'We have logged in as {bot.user}')\n\n@bot.command()\nasync def hello(ctx):\n    await ctx.send('Hello!')\n\nbot.run(os.environ['DISCORD_BOT_TOKEN'])",JavaScript:"client.once('ready', () => {\n  console.log(`Logged in as ${client.user.tag}!`);\n});\n\nclient.on('messageCreate', async message => {\n  if (message.content === '!hello') {\n    await message.reply('Hello!');\n  }\n});\n\nclient.login(process.env.DISCORD_BOT_TOKEN);"}},{title:"Slash command",code:{Python:'@bot.tree.command(name="greet", description="Greet a user")\nasync def greet(interaction: discord.Interaction, user: discord.Member):\n    await interaction.response.send_message(f"Hello, {user.mention}!")\n\n@bot.event\nasync def on_ready():\n    await bot.tree.sync()\n    print(f\'We have logged in as {bot.user}\')\n\nbot.run(os.environ[\'DISCORD_BOT_TOKEN\'])',JavaScript:"const { Client, GatewayIntentBits, REST, Routes, SlashCommandBuilder } = require('discord.js');\n\nconst client = new Client({ intents: [GatewayIntentBits.Guilds] });\n\nconst commands = [\n  new SlashCommandBuilder()\n    .setName('greet')\n    .setDescription('Greet a user')\n    .addUserOption(option => option.setName('user').setDescription('The user to greet').setRequired(true)),\n];\n\nclient.once('ready', async () => {\n  console.log(`Logged in as ${client.user.tag}!`);\n\n  const rest = new REST({ version: '10' }).setToken(process.env.DISCORD_BOT_TOKEN);\n  try {\n    await rest.put(Routes.applicationCommands(client.user.id), { body: commands });\n    console.log('Slash commands registered');\n  } catch (error) {\n    console.error(error);\n  }\n});\n\nclient.on('interactionCreate', async interaction => {\n  if (!interaction.isCommand()) return;\n\n  if (interaction.commandName === 'greet') {\n    const user = interaction.options.getUser('user');\n    await interaction.reply(`Hello, ${user}!`);\n  }\n});\n\nclient.login(process.env.DISCORD_BOT_TOKEN);"}},{title:"Sending embeds",code:{Python:'@bot.command()\nasync def embed(ctx):\n    embed = discord.Embed(title="Example Embed", description="This is an example embed.", color=0x00ff00)\n    embed.add_field(name="Field 1", value="Value 1", inline=False)\n    embed.add_field(name="Field 2", value="Value 2", inline=False)\n    await ctx.send(embed=embed)',JavaScript:"client.on('messageCreate', async message => {\n  if (message.content === '!embed') {\n    const embed = new EmbedBuilder()\n      .setTitle('Example Embed')\n      .setDescription('This is an example embed.')\n      .setColor(0x00ff00)\n      .addFields(\n        { name: 'Field 1', value: 'Value 1' },\n        { name: 'Field 2', value: 'Value 2' }\n      );\n    await message.channel.send({ embeds: [embed] });\n  }\n});"}}]},{title:"Stripe",description:"Stripe is a payment processing platform that allows businesses to accept online payments. Integrate with Stripe to manage transactions, subscriptions, and billing.",tags:["payments"],icon:(0,r.Y)(function(e){return(0,r.FD)(eD.A,(0,F._)((0,s._)({},e),{children:[(0,r.FD)("g",{fillRule:"evenodd",clipPath:"url(#clip0_7378_479)",clipRule:"evenodd",children:[(0,r.Y)("path",{fill:"#635BFF",d:"M0 2a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v20a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Z"}),(0,r.Y)("path",{fill:"#fff",d:"M11.064 9.33c0-.564.462-.786 1.23-.786 1.104 0 2.496.336 3.6.93V6.066C14.688 5.586 13.5 5.4 12.3 5.4c-2.946 0-4.902 1.536-4.902 4.104 0 4.002 5.514 3.366 5.514 5.094 0 .666-.582.882-1.392.882-1.206 0-2.742-.492-3.96-1.158v3.45c1.35.582 2.712.828 3.96.828 3.018 0 5.094-1.494 5.094-4.092-.024-4.32-5.55-3.552-5.55-5.178Z"})]}),(0,r.Y)("defs",{children:(0,r.Y)("clipPath",{id:"clip0_7378_479",children:(0,r.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))},{}),configurationItems:[{key:"STRIPE_SECRET_KEY",title:"Secret Key",description:"[Create a Stripe account](https://dashboard.stripe.com/register) and obtain your Secret Key from the [API keys page](https://dashboard.stripe.com/apikeys). This key allows access to your Stripe account for processing payments.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport stripe\n\nstripe.api_key = os.environ['STRIPE_SECRET_KEY']",JavaScript:"const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY);"}},{title:"Create a payment intent",code:{Python:"try:\n    intent = stripe.PaymentIntent.create(\n        amount=2000,  # Amount in cents\n        currency='usd',\n        payment_method_types=['card'],\n    )\n    print(f\"PaymentIntent created: {intent.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating PaymentIntent: {e}\")",JavaScript:"try {\n  const paymentIntent = await stripe.paymentIntents.create({\n    amount: 2000, // Amount in cents\n    currency: 'usd',\n    payment_method_types: ['card'],\n  });\n  console.log(`PaymentIntent created: ${paymentIntent.id}`);\n} catch (error) {\n  console.error(`Error creating PaymentIntent: ${error.message}`);\n}"}},{title:"Create a customer",code:{Python:"try:\n    customer = stripe.Customer.create(\n        email='customer@example.com',\n        name='John Doe',\n        description='Test customer'\n    )\n    print(f\"Customer created: {customer.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating customer: {e}\")",JavaScript:"try {\n  const customer = await stripe.customers.create({\n    email: 'customer@example.com',\n    name: 'John Doe',\n    description: 'Test customer'\n  });\n  console.log(`Customer created: ${customer.id}`);\n} catch (error) {\n  console.error(`Error creating customer: ${error.message}`);\n}"}},{title:"Create a subscription",code:{Python:"try:\n    subscription = stripe.Subscription.create(\n        customer='cus_1234567890',\n        items=[{'price': 'price_1234567890'}]\n    )\n    print(f\"Subscription created: {subscription.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating subscription: {e}\")",JavaScript:"try {\n  const subscription = await stripe.subscriptions.create({\n    customer: 'cus_1234567890',\n    items: [{ price: 'price_1234567890' }]\n  });\n  console.log(`Subscription created: ${subscription.id}`);\n} catch (error) {\n  console.error(`Error creating subscription: ${error.message}`);\n}"}}]},{title:"HubSpot",description:"HubSpot provides a comprehensive CRM platform with powerful API capabilities. Integrate HubSpot's features into your applications to manage contacts, deals, marketing campaigns, and more using secure private apps.",tags:["CRM","Marketing","API"],icon:(0,r.Y)(function(e){return(0,r.Y)(eD.A,(0,F._)((0,s._)({},e),{children:(0,r.Y)("path",{fill:"#FF7A59",d:"M12.478 10.13a5.463 5.463 0 0 0-1.718 3.984 5.45 5.45 0 0 0 1.095 3.285L9.77 19.496a1.72 1.72 0 0 0-.59-.105 1.694 1.694 0 0 0-1.697 1.702A1.685 1.685 0 0 0 9.18 22.78c.455 0 .88-.164 1.205-.488a1.692 1.692 0 0 0 .417-1.71l2.106-2.114a5.477 5.477 0 0 0 8.814-4.35 5.475 5.475 0 0 0-4.641-5.42V6.103a1.924 1.924 0 0 0 1.188-1.807c0-1.099-.88-2.017-1.98-2.017-1.099 0-1.967.918-1.967 2.017 0 .805.451 1.495 1.188 1.807v2.577a5.45 5.45 0 0 0-1.798.573c-1.162-.88-4.948-3.61-7.113-5.256.05-.185.084-.379.084-.58 0-1.214-.99-2.2-2.207-2.2a2.2 2.2 0 0 0 0 4.402 2.2 2.2 0 0 0 1.129-.32l6.873 4.83Zm3.77 6.89a2.906 2.906 0 1 1 0-5.813 2.906 2.906 0 0 1 0 5.813Z"})}))},{}),configurationItems:[{key:"HUBSPOT_ACCESS_TOKEN",title:"Access Token",description:"To get started, you'll need to create a private app in HubSpot. Go to Settings > Account Setup > Integrations > Private Apps. Create a new private app, select the necessary scopes, and generate your access token. Paste the token below.",placeholder:"pat-na1-••••••••-••••-••••-••••-••••••••••••",required:!0}],codeSampleItems:[{title:"Authentication setup",code:{Python:"import os\nfrom hubspot import HubSpot\n\naccess_token = os.environ['HUBSPOT_ACCESS_TOKEN']\nclient = HubSpot(access_token=access_token)",JavaScript:"const hubspot = require('@hubspot/api-client');\n\nconst accessToken = process.env.HUBSPOT_ACCESS_TOKEN;\nconst hubspotClient = new hubspot.Client({ accessToken });"}},{title:"Fetch contacts",code:{Python:'from hubspot import HubSpot\n\naccess_token = os.environ[\'HUBSPOT_ACCESS_TOKEN\']\nclient = HubSpot(access_token=access_token)\n\ndef get_all_contacts():\n    all_contacts = []\n    after = None\n    while True:\n        contacts_page = client.crm.contacts.basic_api.get_page(\n            limit=100,\n            after=after,\n            properties=["firstname", "lastname", "email"]\n        )\n        all_contacts.extend(contacts_page.results)\n        if not contacts_page.paging:\n            break\n        after = contacts_page.paging.next.after\n    return all_contacts\n\ncontacts = get_all_contacts()\nfor contact in contacts:\n    print(f"Name: {contact.properties[\'firstname\']} {contact.properties[\'lastname\']}")\n    print(f"Email: {contact.properties[\'email\']}")\n    print("---")',JavaScript:"const hubspot = require('@hubspot/api-client');\n\nconst accessToken = process.env.HUBSPOT_ACCESS_TOKEN;\nconst hubspotClient = new hubspot.Client({ accessToken });\n\nasync function getAllContacts() {\n  const allContacts = [];\n  let after = undefined;\n  let hasMore = true;\n\n  while (hasMore) {\n    const apiResponse = await hubspotClient.crm.contacts.basicApi.getPage(\n      100,\n      after,\n      ['firstname', 'lastname', 'email']\n    );\n\n    allContacts.push(...apiResponse.results);\n\n    hasMore = !!apiResponse.paging;\n    after = hasMore ? apiResponse.paging.next.after : undefined;\n  }\n\n  return allContacts;\n}\n\ngetAllContacts()\n  .then(contacts => {\n    contacts.forEach(contact => {\n      console.log(`Name: ${contact.properties.firstname} ${contact.properties.lastname}`);\n      console.log(`Email: ${contact.properties.email}`);\n      console.log('---');\n    });\n  })\n  .catch(err => console.error('Error: ', err));"}}]}],eI=t(79166),eT=t(45894),eF=(0,G.x)({root:[V.wp.flex.column,V.wp.gap(12)],description:[V.wp.flex.column,V.wp.gap(4)],serviceList:[V.wp.flex.column,V.wp.gap(16),V.wp.pb(8)],linkButton:[V.wp.reset.button,V.wp.linkStyle]});function eP(e){var n=e.openPane,t=e.query,o=e.editSecretsAuthzErrorMessage,a=(0,eI.Vv)(),s=a.getDescription,c=a.Icon,u=a.getTitle,d=R(),p=(0,A.A)().secrets,f=(0,l._)((0,i.useState)(new Map),2),h=f[0],m=f[1];(0,i.useEffect)(function(){return p.watch(function(e){m(e)})},[p]);var g=(0,i.useCallback)(function(e){return e.filter(function(e){return e.required}).every(function(e){return!!h.get(e.key)})},[h]),y=(0,i.useMemo)(function(){return eR.filter(function(e){return g(e.configurationItems)})},[g]),b=(0,i.useMemo)(function(){return eE.filter(function(e){return"connected"===d[e.serviceName]})},[d]),C=(0,i.useMemo)(function(){return(0,w._)(y).concat((0,w._)(b))},[y,b]),k=(0,i.useMemo)(function(){return new Y.Rk(C,{fuzzy:!1,selector:function(e){return"pane"in e?"".concat(u(e.pane)," ").concat(s(e.pane)," ").concat(e.tags.join(" ")):"".concat(e.title," ").concat(e.description," ").concat(e.tags.join(" "))}})},[C,s,u]),x=(0,i.useMemo)(function(){return t?k.find(t).map(function(e){return e.item}):C},[C,k,t]);return(0,r.FD)(en.S,{css:eF.root,px:8,children:[(0,r.Y)(X.EY,{variant:"subheadBig",children:"Connected Services"}),(0,r.Y)(en.S,{css:eF.description,children:(0,r.FD)(X.EY,{variant:"text",color:"dimmer",children:[(0,r.FD)("div",{children:["Connect your Repl to a variety of Replit's services and third-party services using"," ",(0,r.Y)("button",{css:eF.linkButton,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"secretsOpened",source:"description"}),n({type:"envEditor"})},children:"Secrets"}),"."]}),(0,r.FD)("div",{children:["Never share or expose tokens in code."," ",(0,r.Y)(S(),{href:_.ik.SECRETS_SAFETY,target:"_blank",rel:"noopener",css:eF.linkButton,children:"Learn how Replit keeps your Secrets safe"}),"."]})]})}),x.length>0?(0,r.Y)(r.FK,{children:(0,r.Y)(en.S,{tag:"ul",css:eF.serviceList,children:x.map(function(e){if("pane"in e){var t,i=u(e.pane);return(0,r.Y)(ew,{title:i,description:null!=(t=s(e.pane))?t:"",icon:(0,r.Y)(c,{pane:e.pane}),onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"replitServiceOpened",service:i}),n(e.pane)},isConnected:!0,configIcon:(0,r.Y)(eT.A,{}),configIconPosition:"right"},i)}if("title"in e)return(0,r.Y)(eC,{title:e.title,icon:e.icon,isConnected:!0,description:e.description,configurationItems:e.configurationItems,codeSampleItems:e.codeSampleItems,openPane:n,editSecretsAuthzErrorMessage:o},e.title)})})}):(0,r.Y)(X.EY,{variant:"subheadDefault",children:"No matching services."})]})}var eL=(0,G.x)({root:[V.wp.flex.column,V.wp.gap(12)],description:[V.wp.flex.column,V.wp.gap(4)],serviceList:[V.wp.flex.column,V.wp.gap(16),V.wp.pb(8)],linkButton:[V.wp.reset.button,V.wp.linkStyle]});function eU(e){var n=e.openPane,t=e.query,o=e.editSecretsAuthzErrorMessage,a=(0,A.A)().secrets,s=(0,l._)((0,i.useState)(new Map),2),c=s[0],u=s[1];(0,i.useEffect)(function(){return a.watch(function(e){u(e)})},[a]);var d=(0,i.useCallback)(function(e){return e.filter(function(e){return e.required}).every(function(e){return!!c.get(e.key)})},[c]),p=(0,i.useMemo)(function(){return new Y.Rk(eR,{fuzzy:!1,selector:function(e){return"".concat(e.title," ").concat(e.description," ").concat(e.tags.join(" "))}})},[]),f=(0,i.useMemo)(function(){return t?p.find(t).map(function(e){return e.item}):eR},[p,t]);return(0,r.FD)(en.S,{css:eL.root,px:8,children:[(0,r.Y)(X.EY,{variant:"subheadBig",children:"External Services"}),(0,r.Y)(en.S,{css:eL.description,children:(0,r.FD)(X.EY,{variant:"text",color:"dimmer",children:[(0,r.FD)("div",{children:["Connect your App to a variety of third-party services using"," ",(0,r.Y)("button",{css:eL.linkButton,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"secretsOpened",source:"description"}),n({type:"envEditor"})},children:"Secrets"}),"."]}),(0,r.FD)("div",{children:["Never share or expose tokens in code."," ",(0,r.Y)(S(),{href:_.ik.SECRETS_SAFETY,target:"_blank",rel:"noopener",css:eL.linkButton,children:"Learn how Replit keeps your Secrets safe"}),"."]})]})}),f.length>0?(0,r.Y)(r.FK,{children:(0,r.Y)(en.S,{css:eL.serviceList,children:f.map(function(e){return(0,r.Y)(eC,{title:e.title,icon:e.icon,description:e.description,configurationItems:e.configurationItems,codeSampleItems:e.codeSampleItems,openPane:n,isConnected:d(e.configurationItems),editSecretsAuthzErrorMessage:o},e.title)})})}):(0,r.Y)(X.EY,{variant:"subheadDefault",children:"No matching services."})]})}var eN=t(58565),eO=(0,G.x)({root:[V.wp.flex.column,V.wp.gap(12)]});function eM(e){var n=e.openPane,t=e.query,o=(0,eI.Vv)(),a=o.getDescription,l=o.Icon,s=o.getTitle,c=R(),u=(0,i.useMemo)(function(){return new Y.Rk(eE,{fuzzy:!1,selector:function(e){return"".concat(s(e.pane)," ").concat(a(e.pane)," ").concat(e.tags.join(" "))}})},[a,s]),d=(0,i.useMemo)(function(){return t?u.find(t).map(function(e){return e.item}):eE},[u,t]);return(0,r.FD)(en.S,{css:eO.root,px:8,pb:8,children:[(0,r.Y)(X.EY,{variant:"subheadBig",children:"Replit Services"}),(0,r.Y)(X.EY,{variant:"text",color:"dimmer",children:"Connect to Replit's storage and auth services."}),d.length>0?null:(0,r.Y)(X.EY,{variant:"subheadDefault",children:"No matching services."}),eE.map(function(e){var t,i=s(e.pane);return d.includes(e)&&i!==eN.v?(0,r.Y)(ew,{title:i,description:null!=(t=a(e.pane))?t:"",icon:(0,r.Y)(l,{pane:e.pane}),onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"replitServiceOpened",service:i}),n(e.pane)},isConnected:"connected"===c[e.serviceName],configIcon:(0,r.Y)(eT.A,{}),configIconPosition:"right"},i):null})]})}var eH=t(42793),eB=t(49058),ez=t(53384),eW=t(10327),eG=t(49748),eV=t(15864),eZ=t(53376),ej=(0,eH.AH)([V.wp.maxWidth(600),V.wp.width("100%"),{alignSelf:"center"}]),eq=(0,G.x)({root:[V.wp.width("100%"),V.wp.overflowY("auto"),V.wp.flex.column,V.wp.flex.grow(1),V.wp.height("100%"),V.wp.width("100%"),{margin:"0 auto"}],header:[ej,V.wp.backgroundColor.backgroundDefault,V.wp.flex.growAndShrink(0),V.wp.p(8),V.wp.flex.row,V.wp.gap(12),V.wp.position.sticky,V.wp.top(0),V.wp.zIndex(1),{alignSelf:"center","& > div:first-child":{flexGrow:1}}],content:[V.wp.width("100%"),V.wp.gap(24),V.wp.pb(8),ej]});function eK(e){var n,t,o,a=e.openPane,c=(0,l._)((0,i.useState)(null),2),u=c[0],p=c[1],w=(0,l._)((0,i.useState)(""),2),b=w[0],S=w[1],Y=(0,m.A)(),_=(0,y.A)("integrations-pane","integrations-toast").dismiss,A=(n={variables:{replId:Y}},t=(0,s._)({},f,n),d.I(h,t)).data,C=(null==A?void 0:A.getRepl.__typename)==="Repl"?A.getRepl.authorizations.editSecrets:void 0,k=(null==C?void 0:C.isAuthorized)===!0?void 0:null!=(o=null==C?void 0:C.message)?o:"Checking Authorizations";return(0,i.useEffect)(function(){_()},[_]),(0,g.M)(v.AZ.INTEGRATIONS_PANE_USED,{action:"viewed"}),(0,r.Y)(E,{children:(0,r.FD)(en.S,{css:eq.root,children:[(0,r.FD)(en.S,{css:eq.header,children:[(0,r.Y)(ez.I,{placeholder:"Search for a service...",value:b,onChange:function(e){return S(e.target.value)},onBlur:function(){b&&(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"searchUsed",query:b})},onClear:function(){return S("")}}),(0,r.FD)(eB.e2,{name:"integrations-category",value:u,onChange:p,row:!0,children:[(0,r.Y)(eB.$O,{id:"all",value:null,text:"All",icon:(0,r.Y)(eV.A,{})}),(0,r.Y)(eB.$O,{id:"connected",value:"connected",text:"Connected",icon:(0,r.Y)(eG.A,{})}),(0,r.Y)(eB.$O,{id:"replit",value:"replit",text:"Replit",icon:(0,r.Y)(eZ.A,{})}),(0,r.Y)(eB.$O,{id:"external",value:"external",text:"External",icon:(0,r.Y)(eW.A,{})})]})]}),(0,r.FD)(en.S,{css:eq.content,grow:!0,shrink:!0,children:[u&&"connected"!==u?null:(0,r.Y)(eP,{query:b,openPane:a,editSecretsAuthzErrorMessage:k}),u&&"replit"!==u?null:(0,r.Y)(eM,{query:b,openPane:a}),u&&"external"!==u?null:(0,r.Y)(eU,{query:b,openPane:a,editSecretsAuthzErrorMessage:k})]})]})})}var e$=t(61518),eJ=o.ZU.Object({type:o.ZU.Literal("integrations")}),eQ={Content:function(e){var n=e.options.performPaneOperation,t=(0,i.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:e})},[n]);return(0,r.Y)(eK,{openPane:t})},Icon:function(e){var n=e.size;return(0,r.Y)(e$.A,{size:n})},getTitle:function(){return"Integrations"},description:"Connect to Replit-native and external services",category:eI.bY.CloudServices,decode:function(e){return a.T(eJ,e)}}},79315:(e,n,t)=>{"use strict";t.d(n,{J:()=>s});var r=t(17844),i=t(93629),o=t(21462),a=t(83490),l={nodejs:["package.json","package-lock.json","yarn.lock","node_modules/"],python2:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],python3:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function s(){var e=(0,a.I)();return{configs:(0,o.useMemo)(function(){var n=(null==e?void 0:e.packagers)||[],t=(null==n?void 0:n.map(function(e){var n,t;return(0,i._)((0,r._)({},e),{title:e.language,packagerFiles:(null==(n=e.packagerFiles)?void 0:n.length)?e.packagerFiles:null!=(t=l[e.language])?t:[]})}))||[];return t.push({id:"nix",title:"system",name:"System Dependencies",language:"nix",packageSearch:!0,guessImports:!1,packagerFiles:["replit.nix"]}),t},[e]),loading:!e}}},79680:e=>{e.exports={loading:"ImageGeneration_loading__WhDG7",container:"ImageGeneration_container__cz1G_",image:"ImageGeneration_image__YQGIi"}},79989:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.387 2.47a.75.75 0 0 1 0 1.06L4.811 6.107h13.618a.75.75 0 0 1 0 1.5H4.81l2.576 2.577a.75.75 0 1 1-1.06 1.06L2.47 7.388a.75.75 0 0 1 0-1.06L6.327 2.47a.75.75 0 0 1 1.06 0Zm9.226 10.285a.75.75 0 0 1 1.06 0l3.857 3.858a.75.75 0 0 1 0 1.06l-3.857 3.857a.75.75 0 0 1-1.06-1.06l2.576-2.577H5.571a.75.75 0 0 1 0-1.5H19.19l-2.576-2.577a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},80122:(e,n,t)=>{"use strict";t.d(n,{N_:()=>f,Nx:()=>h,TO:()=>p});var r=t(86105),i=t(67313),o=t(21462),a=t(76957),l=t(70417),s=t(67917),c=t(55100),u=t(63492),d=(0,a.eU)([]);function p(){return(0,u.h)(d)}function f(){var e,n=(0,c.A)(),t=(0,l.OR)({variables:{replId:n}}).data,r=(0,i.useRouter)();return(0,s.jt)()&&((null==t||null==(e=t.currentUser)?void 0:e.isAdmin)||!!r.query.debug)}function h(e){var n=f(),t=(0,u.ob)(d),i=(0,o.useRef)();(0,o.useEffect)(function(){if(n){var o=JSON.stringify(e);if(i.current!==o){i.current=o;var a={timestamp:Date.now(),state:e};t(function(e){return[a].concat((0,r._)(e)).slice(0,100)})}}},[e,n,t])}},80712:(e,n,t)=>{"use strict";t.d(n,{A:()=>z});var r=t(12694),i=t(81073),o=t(49384),a=t.n(o),l=t(21462),s=t(17844),c=t(12584),u=t(41114),d=t(50175),p=t(96202);function f(){var e=(0,c._)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},m=(0,u.J1)(f(),p.A9),g=t(78502),v=t(1982),y=t(68135),w=t(5847),b=t(79833),S=t(29206),Y=t(5275),_=t(26394),A=t(71514),C=t(37658),k=t(20809),x=t(42793),D=t(36937),E=t(25578),R=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"];let I=(0,l.memo)(function(e){var n=e.content,t=(0,A.g)("fontSize").preferences.fontSize,r=(0,l.useCallback)(function(e){return(0,i.Y)(C.A,(0,s._)({},e))},[]);return(0,i.Y)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.Y)(w.$,{css:(0,x.AH)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:D.LU.foregroundDefault,fontFamily:"".concat(D.LU.fontFamilyDefault," !important"),fontSize:t,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:D.LU.foregroundDefault,fontWeight:D.LU.fontWeightMedium,marginBottom:D.LU.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:D.LU.space8,borderBottom:"1px solid ".concat(D.LU.backgroundHigher),marginTop:D.LU.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:D.LU.space24},h4:{fontSize:"1em",marginTop:D.LU.space16},h5:{fontSize:"0.875em"},h6:{color:D.LU.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(D.LU.space16,")"),paddingRight:D.LU.space4},".anchor:focus":{outline:"none"},p:{marginBottom:D.LU.space16,fontSize:t,fontFamily:"".concat(D.LU.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:D.LU.space16,wordBreak:"normal",th:{fontWeight:D.LU.fontWeightMedium},"td, th":{padding:"".concat(D.LU.space8," ").concat(D.LU.space12),border:"1px solid ".concat(D.LU.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:D.LU.backgroundDefault,borderTop:"1px solid ".concat(D.LU.backgroundHighest)},"tr:nth-of-type(2n)":{backgroundColor:D.LU.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:D.LU.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:D.LU.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:D.LU.space16},ol:{listStyle:"decimal",marginBottom:D.LU.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:D.LU.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(D.LU.fontFamilyCode," !important"),margin:"".concat(D.LU.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:D.LU.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:D.LU.space16,borderLeft:"".concat(D.LU.space2," solid ").concat(D.LU.backgroundHighest),paddingLeft:D.LU.space16},"blockquote > *":{color:"".concat(D.LU.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(D.LU.fontFamilyCode),color:D.LU.foregroundDimmer,verticalAlign:"middle",backgroundColor:D.LU.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(D.LU.backgroundHighest)},a:{color:D.LU.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:D.LU.space8,padding:0},details:{marginBottom:D.LU.space16,display:"block",background:D.LU.backgroundHigher,borderRadius:D.LU.borderRadius4,padding:D.LU.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:D.LU.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(D.LU.backgroundHighest),marginBottom:D.LU.space16,paddingBottom:D.LU.space16},hr:{height:1,backgroundColor:D.LU.backgroundHigher,margin:"".concat(D.LU.space24," 0"),border:0}}),allowedElements:R,remarkPlugins:[E.yN,Y.A,_.A,S.A],linkTarget:"_blank",rehypePlugins:[b.A],components:{code:r,img:k.A},children:n})})});var T=t(1684),F=t(36073),P=t(4616),L=t(78626),U=t(47876),N=t(85389),O=t(80659),M=t(4163),H=t(24140),B=t(81650);let z=(0,l.memo)(function(e){var n,t,o=e.thread,c=e.message,u=(0,g.T)(),p=(0,v.A)().showError,f=(0,r._)((n={onError:function(e){p(e.message)},onCompleted:function(e){var n;(null==(n=e.deleteThreadMessage)?void 0:n.__typename)==="UserError"&&p(e.deleteThreadMessage.message)}},t=(0,s._)({},h,n),d.n(m,t)),2),w=f[0],b=f[1].loading,S=!!(o&&o.indexStart===o.indexEnd),Y={statusBanner:{resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},outdated:"Outdated",outdatedTooltip:"The code has changed since the comment was left"},_=(0,l.useMemo)(function(){return{diff:(0,y.G)(c.timeCreated),full:(0,y.n)(c.timeCreated)}},[c]);if(!c.user)return null;var A=u===c.user.id?[{label:"Delete",icon:(0,i.Y)(B.A,{}),isDestructive:!0}]:[];return(0,i.FD)(N.S,{children:[(0,i.FD)(N.S,{pb:4,row:!0,justify:"space-between",children:[(0,i.FD)(N.S,{row:!0,align:"center",gap:8,children:[(0,i.Y)(a(),{href:"/@".concat(c.user.username),children:(0,i.Y)(U.K,{small:!0,src:c.user.image,username:c.user.username})}),(0,i.Y)("p",{children:(0,i.Y)(L.m_,{tooltip:_.full,placement:"top",children:(0,i.Y)(P.EY,{variant:"small",color:"dimmer",multiline:!1,children:_.diff})})}),A.length>0?(0,i.Y)(O.A,{items:A,onItemClick:function(e){"Delete"!==e.label||b||w({variables:{id:c.id}})},label:"More"}):null]}),S?(0,i.Y)(L.m_,{tooltip:Y.outdatedTooltip,children:(0,i.Y)(T.a,{colorway:"negative",text:Y.outdated})}):null]}),"StatusMessageContentType"===c.content.__typename&&"resolved"===c.content.status?(0,i.Y)(F.N,{colorway:"positive",icon:(0,i.Y)(H.A,{}),text:Y.statusBanner.resolved}):null,"StatusMessageContentType"===c.content.__typename&&"unresolved"===c.content.status?(0,i.Y)(F.N,{colorway:"primary",icon:(0,i.Y)(M.A,{}),text:Y.statusBanner.unresolved}):null,"TextMessageContentType"===c.content.__typename&&(0,i.Y)(I,{content:c.content.text})]})})},81086:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(21462),s=t(7306),c=t(41467),u=t(33090),d=t(17089),p=t(71424),f=t(10752),h=t(60987),m=t(56262);function g(e){var n,t,g,v=e.moveOrDeleteFile,y=(0,p.A)().fs,w=(0,l.useRef)(new Map),b=(0,m.mU)(),S=(0,i._)((0,l.useState)(!1),2),Y=S[0],_=S[1],A=(0,i._)((0,l.useState)(!1),2),C=A[0],k=A[1],x=(0,i._)((0,l.useState)([]),2),D=x[0],E=x[1],R=(0,h.i)(),I=(0,f.iO)(),T=D.map(function(e){return e.path}).map(function(e){return{title:e,path:e}}),F=(0,i._)((0,l.useState)(),2),P=F[0],L=F[1],U=(0,m.tn)();(0,l.useEffect)(function(){if(b&&!w.current.has(b)){var e=function(e){var n=e.node.path;U(e.eventType===u.dV.Move?{path:n,type:"move",to:e.to}:{path:n,type:"delete"}),v&&v(e),w.current.delete(b),E(function(e){return e.filter(function(e){return e.path!==b})})};(0,c.m6)(b)?y.watchTextFile(b,{onMoveOrDelete:e,onError:function(e,n){e.code||(y.flush(),y.persist({skipDebounce:!0}),I({error:e,extras:n,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,n){E(function(t){return(0,o._)(t.filter(function(e){return e.path!==b})||[]).concat([{path:b,prompt:n,cb:e}])}),_(!0),P||L(b)}}):y.watchFile(b,{onChange:function(){},onMoveOrDelete:e}),w.current.set(b,!0)}},[b,y,I,v,P,U]);var N=(n=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:return(0,d.u4)(d.AZ.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,d.u4)(d.AZ.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),k(!0),[4,Promise.all(D.map(function(n){return E(function(e){var t=e.filter(function(e){return e.path!==n.path});return 0===t.length?_(!1):L(t[0].path),t}),n.cb(e)}))];case 1:return n.sent(),k(!1),[2]}})}),function(e){return n.apply(this,arguments)}),O=P?D.find(function(e){return e.path===P}):null,M=null==O?void 0:O.prompt,H=(0,s.M)({left:{code:null!=(t=null==M?void 0:M.localContent)?t:"",filePath:P},right:{code:null!=(g=null==M?void 0:M.remoteContent)?g:"",filePath:P}});return{isConverging:C,didContentsDiverge:Y,showMoreDetail:R,failedFiles:D,failedFilesOptions:T,selectedFile:P,setSelectedFile:L,reviewingPrompt:M,onChoice:N,local:H.left,remote:H.right}}},81280:(e,n,t)=>{"use strict";t.d(n,{F:()=>c});var r=t(12694),i=t(81073),o=t(21462),a=t(76957),l=t(30331),s=t(336);function c(e){var n=(0,r._)((0,o.useState)(function(){var n,t,r,i,o,s,c;return t=(n={fs:e.fs,container:e.container,dotReplit:e.dotReplit,ports:e.ports,secrets:e.secrets}).container,r=n.fs,i=n.dotReplit,o=n.ports,s=n.secrets,(c=(0,a.y$)()).set(l.xs,t),c.set(l.fg,r),c.set(l.Vc,i),c.set(l.kK,o),c.set(l.$s,s),c}),1)[0];return(0,i.FD)(s.rF.Provider,{value:n,children:[e.children,(0,i.Y)(l.JH,{replId:e.replId,orgId:e.orgId})]})}},81539:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(81073),i=t(32852);function o(e){var n=e.children,t=e.config,o=(0,i.ob)(i.Ai);return t.id&&o(t),(0,r.Y)(r.FK,{children:n})}function a(e){var n=e.children,t=e.config,a=(0,i.PY)();return(0,r.Y)(i.uB.Provider,{value:a,children:t?(0,r.Y)(o,{config:t,children:n}):n})}},81740:(e,n,t)=>{"use strict";t.d(n,{IW:()=>Z,Eo:()=>q,wb:()=>eA,AK:()=>W,oE:()=>z,Jl:()=>ep,cQ:()=>eu,hc:()=>eL,X6:()=>eU,I7:()=>eC,oh:()=>N,ch:()=>ef,bD:()=>ex,d_:()=>eF,sT:()=>eR,KZ:()=>eI,qP:()=>eT,wS:()=>eS,jP:()=>eo,lO:()=>eE,z1:()=>H,b7:()=>es,MP:()=>eD,Ss:()=>B,vJ:()=>G,af:()=>V,j3:()=>ec,nd:()=>et,wU:()=>ea,XO:()=>el,mP:()=>ei,OK:()=>L,If:()=>$,g3:()=>ew,IE:()=>Q,ij:()=>eP});var r=t(29935),i=t(17844),o=t(12694),a=t(86105),l=t(22531),s=t(82643),c=t(292),u=t.n(c),d=t(21462),p=t(23099),f=t.n(p),h=t(35992),m=t(76957),g=t(69737),v=t(8950),y=t(73176),w=t(51744),b=t(27915),S=t(47824),Y=t(46011),_=t(21762),A=t(98679),C=t(82112),k=t(71424),x=t(27231),D=t(46434),E=t(39159),R=t(60070),I=t(63492),T=t(18069),F=t(37157),P=(0,m.eU)();function L(){return(0,I.h)(P)}var U=(0,m.eU)(!0);function N(){return(0,I.h)(U)}var O=(0,m.eU)(null,function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,h.jM)(e(P),t);return n(P,i),r.persist&&e(eb).persist(),i});function M(){return(0,I.ob)(O)}function H(){var e=M();return(0,d.useCallback)(function(n){return e(function(e){if(!e){e={runButton:n};return}e.runButton=n},{persist:!0})},[e])}function B(){var e=M();return(0,d.useCallback)(function(n,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).persist;return e(function(e){var r,i=null==e||null==(r=e.workflow)?void 0:r[n];i&&t(i)},{persist:r})},[e])}function z(){var e=M();return(0,d.useCallback)(function(n){return e(function(e){var t;null==e||null==(t=e.workflow)||t.splice(n,1)},{persist:!0})},[e])}function W(){var e=B();return(0,d.useCallback)(function(n){return e(n.workflowIndex,function(e){null==e||e.tasks.splice(n.taskIndex,1)},{persist:!0})},[e])}function G(){var e=B();return(0,d.useCallback)(function(n,t,r){var i=r.persist;return e(n.workflowIndex,function(e){e.tasks[n.taskIndex]=t},{persist:i})},[e])}function V(){var e=B();return(0,d.useCallback)(function(n,t,r){var i=r.persist;return e(n.workflowIndex,function(e){e.tasks=t},{persist:i})},[e])}function Z(){var e=B();return(0,d.useCallback)(function(n){return e(n,function(e){var n,t=null!=(n=e.tasks[e.tasks.length-1])?n:{};e.tasks.push(t?(0,i._)({},t):{task:"shell.exec",args:""})})},[e])}var j=(0,m.eU)(null,function(e,n,t){var r=n(O,function(e){if(void 0===e)return{workflow:[t]};e.workflow?e.workflow.push(t):e.workflow=[t]},{persist:!0});return u()(null==r?void 0:r.workflow),r.workflow.length-1});function q(){return(0,I.ob)(j)}var K=(0,m.eU)(void 0);function $(){return(0,I.h)(K)}var J=(0,m.eU)(function(e){var n=e(K);return n?Object.entries(n).flatMap(function(e){var n=(0,o._)(e,2),t=n[0],r=n[1];return r.tasks.filter(function(e){return e.state===w.Dr.RUNNING||e.state===w.Dr.FINISHED||e.state===w.Dr.FAILED||e.state===w.Dr.ERROR}).map(function(e,n){return{task:e,taskIdx:n,runId:t,config:r.workflow.tasks[n]}})}):[]});function Q(){return(0,I.h)(J)}var X=(0,m.eU)(function(e){var n,t=e(P);return null!=(n=null==t?void 0:t.workflow)?n:[]}),ee=(0,g.mg)(X,function(e){var n;return null!=(n=null==e?void 0:e.map(function(e,n){return n}))?n:[]},f()),en=(0,m.eU)(function(e){var n=function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=e.tasks[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if("workflow.run"===l.task&&!r.includes(l.args))return(0,b._)('workflow "'.concat(l.args,'" not found'))}}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return(0,b.Ok)(null)},t=e(X),r=e(er),i={};return t.forEach(function(e,t){var r=n(e);r.ok||(i[t]=r.error)}),i});function et(e){return(0,I.h)((0,d.useMemo)(function(){return(0,g.mg)(en,function(n){return e in n?n[e]:null})},[e]))}var er=(0,g.mg)(X,function(e){var n;return null!=(n=null==e?void 0:e.map(function(e){return e.name}))?n:[]},f());function ei(){return(0,I.h)(X)}function eo(){return(0,I.h)(eg)}function ea(){return(0,I.h)(ee)}function el(){return(0,I.h)(er)}function es(e){var n,t;return(0,I.h)((n=e.workflowIndex,t=e.taskIndex,(0,d.useMemo)(function(){return(0,g.mg)(X,function(e){var r;return e?null==(r=e[n])?void 0:r.tasks[t]:null})},[n,t])))}function ec(e){return(0,I.h)((0,d.useMemo)(function(){return(0,g.mg)(X,function(n){return n?n[e]:null})},[e]))}function eu(){return(0,I.Ou)(X)}function ed(e){var n=(0,d.useMemo)(function(){return(0,m.eU)(function(n){var t,r=null==(t=n(X)[e])?void 0:t.name;if(!r)return null;var i=n(K);return i?function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=Object.values(e)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;s.workflow.name===n&&t.push(s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.length?t.sort(function(e,n){return e.startTime-n.startTime}):null}(i,r):null})},[e]);return(0,d.useMemo)(function(){return(0,g.mg)(n,function(e){return e?e[e.length-1]:null})},[n])}function ep(e){return(0,I.Ou)(ed(e))}function ef(e){var n;return(0,I.AI)((n=ed(e),(0,d.useMemo)(function(){return(0,g.mg)(n,function(e){return(null==e?void 0:e.step)===w.zY.RUNNING})},[n])))}function eh(){return(eh=(0,r._)(function(e,n){var t;return(0,s.YH)(this,function(r){switch(r.label){case 0:return[4,e.updateDotReplit([(null==(t=n.workflow)?void 0:t.length)||n.runButton?{path:"workflows",op:"add",value:JSON.stringify(n)}:{path:"workflows",op:"remove",value:""}])];case 1:if(r.sent().error)return[2,(0,b._)("Error applying update")];return[2,(0,b.Ok)(null)]}})})).apply(this,arguments)}var em=(0,m.eU)(function(e){var n=e(P);if(!(null==n?void 0:n.workflow)||!(null==n?void 0:n.runButton))return null;var t=!0,r=!1,i=void 0;try{for(var o,a=n.workflow[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.name===n.runButton)return l}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return null}),eg=(0,g.mg)(em,function(e){var n;return null!=(n=null==e?void 0:e.name)?n:null}),ev=(0,m.eU)(function(e){var n=e(X).find(function(e){var n;return null==(n=e.metadata)?void 0:n.dotReplitRun});return n?n.name:null}),ey=(0,m.eU)(function(e){var n=e(K);if(!n)return null;var t=Object.values(n).filter(function(e){return e.step===w.zY.RUNNING});return 0===t.length?null:t});function ew(){var e=(0,I.h)(eg),n=(0,_._P)({controlName:"flag-run-migration"}),t=(0,k.A)().fs,i=(0,I.h)(ev);!e&&n&&(e=i);var o=(0,I.h)(ey),a=eD(),l=(0,d.useMemo)(function(){return null!==o&&o.some(function(e){return"agent"===e.userId})},[o]),c=(0,d.useMemo)(function(){return l||(null==o?void 0:o.some(function(e){return e.step===w.zY.RUNNING}))?x.ll.RUNNING:x.ll.IDLE},[l,o]),u=(0,C.I)(function(n){var i;return i=(0,r._)(function(r){return(0,s.YH)(this,function(i){switch(i.label){case 0:return[4,t.flush()];case 1:return i.sent(),a(r),[2,!!e&&n.workflows.runWorkflow.rpc({workflowId:e})]}})}),function(e){return i.apply(this,arguments)}},[a,e,t]),p=(0,C.I)(function(e){return function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).graceful;null==o||o.forEach(function(t){e.workflows.stopRun.rpc({runId:t.runId,graceful:n})})}},[o]);return null!==e?{workflowId:e,run:u,stop:p,step:c,runningWorkflows:o,isAgentRunningWorkflow:l}:null}var eb=(0,m.eU)({persist:(0,r._)(function(){return(0,s.YH)(this,function(e){return[2,(0,b.Ok)(null)]})})});function eS(){var e=(0,I.Ou)(eb);return(0,d.useCallback)(function(){return(0,e().persist)()},[e])}var eY={PARSE_ERROR:"Failed to parse workflow configs from .replit",NOT_FOUND:"Missing .replit file",READ_FILE:"Error reading .replit"},e_=(0,m.eU)(void 0);function eA(){return(0,I.h)(e_)}function eC(e){var n,t,i,o,a,l,c,u=e.dotReplit,p=(0,I.Ou)(P),h=(0,I.ob)(P),m=(0,I.ob)(e_),g=(0,I.ob)(K),v=(0,I.ob)(U),y=(0,I.h)(U),w=(0,d.useCallback)(function(e){var n=p();n&&f()(e,n)||h(e||{}),v(!1)},[v,p,h]),Y=(0,d.useCallback)(function(e){v(!1),(0,x.Sb)(e.code)?m({code:e.code,message:eY[e.code],extras:e.extras}):m(void 0)},[m,v]),A=(0,d.useCallback)(function(e){switch(e){case S.K.DISCONNECTED:g(void 0),v(!0);return;case S.K.CONNECTING:v(!0);return;case S.K.CONNECTED:y&&p()&&v(!1);return}},[v,g,y,p]);t=(n={onWorkflowsConfigChange:w,onRunStateChange:g,onDotReplitStateChange:Y,onConnectionStateChange:A}).onWorkflowsConfigChange,i=n.onDotReplitStateChange,o=n.onRunStateChange,a=n.onConnectionStateChange,l=(0,_._P)({controlName:"flag-run-migration"}),(0,E.b)((c=(0,r._)(function(e,n){var a;function c(){return(c=(0,r._)(function(){var n,r,o,l,c,u,d,p;return(0,s.YH)(this,function(s){switch(s.label){case 0:n=e.workflows.config.subscribe({},{signal:a}).resReadable,r=!1,o=!1,s.label=1;case 1:s.trys.push([1,6,7,12]),c=(0,D._)(n),s.label=2;case 2:return[4,c.next()];case 3:if(!(r=!(u=s.sent()).done))return[3,5];if(!(d=u.value).ok)return(0,x.QS)(d.payload)&&i(d.payload),[3,4];if(void 0!==d.payload.dotReplitState)return i(d.payload.dotReplitState),[3,4];t(d.payload.config),s.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return p=s.sent(),o=!0,l=p,[3,12];case 7:if(s.trys.push([7,,10,11]),!(r&&null!=c.return))return[3,9];return[4,c.return()];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:if(o)throw l;return[7];case 11:return[7];case 12:return[2]}})})).apply(this,arguments)}function u(){return(u=(0,r._)(function(){var n,t,r,i,l,c,u,d;return(0,s.YH)(this,function(s){switch(s.label){case 0:n=e.workflows.runState.subscribe({},{signal:a}).resReadable,t=!1,r=!1,s.label=1;case 1:s.trys.push([1,6,7,12]),l=(0,D._)(n),s.label=2;case 2:return[4,l.next()];case 3:if(!(t=!(c=s.sent()).done))return[3,5];if(!(u=c.value).ok)return[3,4];o(u.payload.state),s.label=4;case 4:return t=!1,[3,2];case 5:return[3,12];case 6:return d=s.sent(),r=!0,i=d,[3,12];case 7:if(s.trys.push([7,,10,11]),!(t&&null!=l.return))return[3,9];return[4,l.return()];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:if(r)throw i;return[7];case 11:return[7];case 12:return[2]}})})).apply(this,arguments)}return(0,s.YH)(this,function(t){switch(t.label){case 0:return a=n.signal,[4,e.workflows.init.rpc({useWorkflowGenerators:l},{signal:a})];case 1:if(!t.sent().ok)return[2];return[4,Promise.all([function(){return c.apply(this,arguments)}(),function(){return u.apply(this,arguments)}()])];case 2:return t.sent(),[2]}})}),function(e,n){return c.apply(this,arguments)}),[l,t,i,o]),(0,R.A)(a);var C=(0,I.AI)(P),k=(0,I.ob)(eb);(0,d.useEffect)(function(){k({persist:(0,r._)(function(){var e,n,t;return(0,s.YH)(this,function(r){return(n=C.current)?(t=null==(e=n.workflow)?void 0:e.filter(function(e){var n;return!(null==(n=e.metadata)?void 0:n.generated)}),[2,function(e,n){return eh.apply(this,arguments)}(u,{runButton:n.runButton,workflow:t})]):[2,(0,b._)("No config found")]})})})},[u,k,C])}var ek=(0,m.eU)([]);function ex(e,n){var t=(0,I.ob)(ek),r=(0,A.A)(e);(0,d.useEffect)(function(){var e=function(e){r.current(e)};return t(function(n){return(0,a._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t].concat((0,a._)(n)))}function eD(){var e=(0,I.h)(ek);return(0,d.useCallback)(function(n){e.forEach(function(e){return e(n)})},[e])}function eE(){var e=(0,F.A)().didDisconnect,n=N(),t=ew(),r=el(),i=(0,T.C9)().agentState,o=(0,y.J2)(i),a=(0,d.useMemo)(function(){var e;return!!o&&null!=t&&!!t.isAgentRunningWorkflow&&(o.state===v.g32.AGENT_STATE_RUNNING||o.state===v.g32.AGENT_STATE_PAUSING||o.state===v.g32.AGENT_STATE_PAUSED&&(null==(e=o.reason)?void 0:e.$kind)==="waitingOnUserResponse")},[o,null==t?void 0:t.isAgentRunningWorkflow]),l=(0,Y.A)(a,1e3),s=(0,d.useMemo)(function(){return(null==t?void 0:t.step)===x.ll.RUNNING},[null==t?void 0:t.step]),c=(0,Y.A)(s,100),u=(0,d.useMemo)(function(){return l?c:s},[l,c,s]),p=(0,d.useMemo)(function(){var e=null==t?void 0:t.workflowId;return!e||!r.includes(e)},[r,null==t?void 0:t.workflowId]);return{isWorkflowsLoading:n,isWorkflowsRunning:s,isRunning:u,isAgentRunningWorkflow:null==t?void 0:t.isAgentRunningWorkflow,isOffline:e,isDisabled:p,runButtonWorkflowName:null==t?void 0:t.workflowId}}function eR(){var e=ew(),n=eE().isRunning;return(0,d.useCallback)(function(t){var r;n||null==e||null==(r=e.run)||r.call(e,null!=t?t:x.QG.RUN_BUTTON_CLICKED)},[n,e])}function eI(){var e=ew(),n=eE(),t=n.isRunning,r=n.isWorkflowsRunning;return(0,d.useCallback)(function(){if(t&&r){var n;null==e||null==(n=e.stop)||n.call(e,{graceful:!0})}},[t,r,e])}function eT(){var e=eR(),n=eI(),t=eE().isRunning;return(0,d.useCallback)(function(r){t?n():e(r)},[t,e,n])}function eF(){var e=eR(),n=eI(),t=eE().isRunning,r=(0,A.A)(t),i=(0,o._)((0,d.useState)(!1),2),a=i[0],l=i[1];return(0,d.useEffect)(function(){a&&(r.current||(e(),l(!1)))},[a,r,e]),(0,d.useCallback)(function(){a||(r.current?(l(!0),n()):e())},[a,r,e,n])}function eP(e,n){return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(r>=5)return!1;var i=!0,o=!1,a=void 0;try{for(var s,c=t.tasks[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=function(){var t=s.value;if("shell.exec"===t.task&&t.waitForPort)return{v:!0};if("workflow.run"===t.task){var i=n.find(function(e){return e.name===t.args});if(i&&e(i,r+1))return{v:!0}}}();if("object"===(0,l._)(u))return u.v}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return!1}(e)}function eL(){var e=ei();return(0,d.useMemo)(function(){return e.some(function(e){return"agent"===e.author})},[e])}function eU(){var e=ei();return(0,d.useMemo)(function(){return e.some(function(e){var n;return(null==(n=e.metadata)?void 0:n.generated)!==!0})},[e])}},81785:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 21.75a.75.75 0 0 0 .75-.75V10.81l3.72 3.72a.75.75 0 1 0 1.06-1.06l-5-5a.75.75 0 0 0-1.06 0l-5 5a.75.75 0 1 0 1.06 1.06l3.72-3.72V21c0 .414.336.75.75.75Zm-9-12A.75.75 0 0 0 3.75 9V5A1.25 1.25 0 0 1 5 3.75h14A1.25 1.25 0 0 1 20.25 5v4a.75.75 0 0 0 1.5 0V5A2.75 2.75 0 0 0 19 2.25H5A2.75 2.75 0 0 0 2.25 5v4c0 .414.336.75.75.75Z",clipRule:"evenodd"})}))}},82057:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(21462),i=t(12694),o=t(78094),a=t(71424),l=t(37872);function s(e,n){var t,s,c,u,d,p=(t=(0,a.A)().container,c=(s=(0,i._)((0,r.useState)(null),2))[0],u=s[1],(0,r.useEffect)(function(){if(t)return t.onConnectionStateChanged(function(){u(t.getConnectionMetadata())})},[t]),d=c,(0,r.useMemo)(function(){return d?(0,o.p)(d.token):null},[d]));(0,r.useEffect)(function(){if(e&&n){var t,r,i,o=(null==(t=e.origin)?void 0:t.__typename)==="Repl"?e.origin.id:null,a={id:e.id,slug:e.slug,originId:o,roles:n.roles&&n.roles.map(function(e){return e.name}),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null==(i=e.source)||null==(r=i.release)?void 0:r.id,tokenCluster:null==p?void 0:p.cluster};return(0,l.aq)(a),function(){(0,l.ve)()}}},[e,n,p])}},82529:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>d,aT:()=>u});var r=t(29935),i=t(83846),o=t(17844),a=t(93629),l=t(82643),s=t(684),c=t(64330),u="Replit-Restored-To";function d(e,n){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:var l,s,d,p,f,h;return[4,e((s=(0,c.hh)(n.commit),d=(0,c.hh)(null!=(l=n.message)?l:"Restored to ".concat(s)),p=(0,a._)((0,o._)({},n.trailers),(0,i._)({},u,"${RESOLVED_COMMIT_HASH}")),f=(0,c.qo)(p),h="-p HEAD"+(n.extraParent?" -p ".concat((0,c.hh)(n.extraParent)):""),["set -eo pipefail;","RESOLVED_COMMIT_HASH=$(git rev-parse ".concat(s,");"),"COMMIT_HASH=$(git commit-tree ".concat(h," -m ").concat(d," ").concat(f,' "${RESOLVED_COMMIT_HASH}^{tree}");'),'git reset --quiet --hard "$COMMIT_HASH";','echo -n "$COMMIT_HASH";'].join(" ")))];case 1:if((t=r.sent()).error)return[2,t];return[2,{hash:t.output,error:null}]}})})).apply(this,arguments)}s.ZU.Object({commit:s.ZU.String(),extraParent:s.ZU.Optional(s.ZU.String()),message:s.ZU.Optional(s.ZU.String()),trailers:s.ZU.Optional(s.ZU.Record(s.ZU.String(),s.ZU.String()))})},82532:(e,n,t)=>{"use strict";t.d(n,{A:()=>g,M:()=>y});var r=t(17844),i=t(17459),o=t(81073),a=t(41467),l=t(18509),s=t(27023),c=t(11769),u=t(11938),d=t(41358),p=t(4616),f=t(85389),h=t(54613),m=(0,l.x)({code:[s.wp.font.code,s.wp.flex.grow(1)],surface:[s.wp.borderRadius(8),s.wp.p(8),s.wp.flex.row,s.wp.rowWithGap(8),s.wp.align.center,s.wp.width("100%"),s.wp.overflowX("auto")]});function g(e){var n=y(e.filePath,e.keyName);if(!n)return null;var t=n.import,i=n.access;return(0,o.FD)(f.S,{gap:8,children:[t?(0,o.Y)(v,(0,r._)({code:t},e)):null,(0,o.Y)(v,(0,r._)({code:i},e))]})}function v(e){var n=e.code,t=e.onInsert,r=(0,i._)(e,["code","onInsert"]);return(0,o.FD)(d.ui,{elevated:r.elevated,css:m.surface,children:[(0,o.Y)(u.r,{textToCopy:n}),(0,o.Y)(p.EY,{variant:"small",css:m.code,multiline:!1,children:n}),t?(0,o.Y)(c.$n,{variant:"outlined",size:"small",onClick:function(){return t(n)},text:"Insert",iconRight:(0,o.Y)(h.A,{})}):null]})}function y(e,n){if(!e)return null;switch((0,a.an)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(n,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(n,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(n,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(n,'")')};case"rb":return{import:null,access:'ENV["'.concat(n,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(n,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(n,'");')};case"sh":return{import:null,access:'"$'.concat(n,'"')};default:return null}}},82637:(e,n,t)=>{"use strict";t.d(n,{AR:()=>d,xx:()=>a});var r=t(684),i=t(52531),o=t(4067),a=function(e){return e.LOCAL="LOCAL",e.REMOTE="REMOTE",e.TRACKED="TRACKED",e}({});r.ZU.Enum(a);var l=r.ZU.Object({hash:r.ZU.String(),author:o.T}),s=r.ZU.Object({type:r.ZU.Literal("LOCAL"),name:r.ZU.String(),push:r.ZU.Union([i.$5,i.VH,r.ZU.Null()]),commit:l,remote:r.ZU.Null(),tracking:r.ZU.Null()}),c=r.ZU.Object({type:r.ZU.Literal("REMOTE"),name:r.ZU.String(),remote:r.ZU.String(),commit:l,push:r.ZU.Null(),tracking:r.ZU.Null()}),u=r.ZU.Object({type:r.ZU.Literal("TRACKED"),name:r.ZU.String(),remote:r.ZU.String(),push:i.$5,tracking:c,commit:l}),d=r.ZU.Union([s,c,u]);r.ZU.Union([d,i.VH,i.$5,r.ZU.String()])},82672:e=>{e.exports={rect:"LoadingAnimation_rect___3VEP",rect1:"LoadingAnimation_rect1__a6376",rect2:"LoadingAnimation_rect2__eP5zJ",rect3:"LoadingAnimation_rect3__tMdU6"}},83098:(e,n,t)=>{"use strict";t.d(n,{A:()=>U});var r=t(12694),i=t(81073),o=t(17844),a=t(12584),l=t(41114),s=t(86997),c=t(50175);function u(){var e=(0,a._)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,a._)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,a._)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,l.J1)(u()),m=(0,l.J1)(d()),g=(0,l.J1)(p()),v=t(1982),y=t(70871),w=t(17089),b=t(36937),S=t(18509),Y=t(27023),_=t(11938),A=t(40259),C=t(15493),k=t(41358),x=t(8017),D=t(4616),E=t(85389),R=t(10327),I=t(49748),T=t(63456),F=t(71872),P=(0,S.x)({container:[Y.wp.colWithGap(12),Y.wp.px(12)],header:[Y.wp.flex.row,Y.wp.justify.spaceBetween],globeIconContainer:[Y.wp.width(40),Y.wp.height(40),Y.wp.backgroundColor.accentPrimaryDimmer,Y.wp.borderRadius("full"),Y.wp.align.center,Y.wp.justify.center],title:[Y.wp.fontWeight.medium],inviteUrlContainer:[Y.wp.borderRadius(8),Y.wp.flex.row],input:[Y.wp.borderRadius(8,0,0,8),Y.wp.color.foregroundDimmer],copyToClipboard:[Y.wp.borderRadius(0,8,8,0)]}),L=function(){return(0,i.FD)(E.S,{row:!0,gap:12,children:[(0,i.Y)(E.S,{css:P.globeIconContainer,children:(0,i.Y)(R.A,{color:b.LU.accentPrimaryStrongest,size:20})}),(0,i.FD)(E.S,{children:[(0,i.Y)(D.EY,{css:P.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,i.Y)(D.EY,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function U(e){var n,t,a,l,u,d,p,S,R,U,N,O,M,H,B=e.replId,z=(0,v.A)(),W=z.showConfirm,G=z.showError,V=(n={variables:{replId:B}},t=(0,o._)({},f,n),s.I(h,t)),Z=V.data,j=V.loading,q=V.error,K=V.refetch,$=(0,r._)((a={variables:{replId:B},onError:function(e){return G(e.message)},onCompleted:function(){return W("Join link created")}},l=(0,o._)({},f,a),c.n(m,l)),2),J=$[0],Q=$[1],X=(0,r._)((u={variables:{replId:B},onError:function(e){return G(e.message)},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInviteLink.__typename)return void G(e.deleteMultiplayerInviteLink.message);"Repl"===e.deleteMultiplayerInviteLink.__typename&&W("Join link deleted")}},d=(0,o._)({},f,u),c.n(g,d)),2),ee=X[0],en=X[1],et=(null==Z||null==(p=Z.repl)?void 0:p.__typename)==="Repl"?Z.repl:null,er=Q.loading||en.loading,ei=(null==Z||null==(S=Z.repl)?void 0:S.__typename)==="Repl"&&(null==et||null==(R=et.owner)?void 0:R.__typename)==="Team",eo=(null==Z||null==(U=Z.repl)?void 0:U.__typename)==="Repl"&&(null==et||null==(N=et.owner)?void 0:N.__typename)==="Team"&&(null==et||null==(O=et.owner.capabilities)?void 0:O.isBusinessPlan)&&(null==et||null==(M=et.owner.capabilities)?void 0:M.hasValidSubscription),ea=(null==Z||null==(H=Z.repl)?void 0:H.__typename)==="Repl"&&(null==et?void 0:et.inviteUrl)&&1?window.location.origin+(null==et?void 0:et.inviteUrl):null;return j||ei&&!eo?null:q?(0,i.FD)(E.S,{css:P.container,children:[(0,i.FD)(E.S,{css:P.header,children:[(0,i.Y)(L,{}),(0,i.Y)(x.d,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.Y)(C.d,{css:[Y.wp.textAlign.left],iconLeft:(0,i.Y)(F.A,{color:b.LU.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return K({replId:B})}})]}):(0,i.FD)(E.S,{css:P.container,children:[(0,i.FD)(E.S,{css:P.header,children:[(0,i.Y)(L,{}),j?(0,i.FD)(E.S,{row:!0,gap:4,align:"center",children:[(0,i.Y)(T.A,{color:b.LU.foregroundDimmer}),(0,i.Y)(D.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,i.Y)(x.d,{isSelected:!!ea,isDisabled:er,onChange:function(e){er||(e?J():ee())},"aria-labelledby":"link-switch-label"})]}),!j&&ea?(0,i.FD)(i.FK,{children:[(0,i.FD)(k.ui,{css:P.inviteUrlContainer,children:[(0,i.Y)(A.pd,{type:"url",readOnly:!0,disabled:!0,value:er?"Loading...":ea,css:P.input}),(0,i.Y)(_.i,{textToCopy:ea,onClick:function(){ea?((0,y.default)(ea),(0,w.u4)(w.AZ.JOIN_LINK_COPIED,{replId:null==et?void 0:et.id,isTeamRepl:ei,source:"replEnvironment"}),W("Link copied")):G("Could not copy link")},tooltipSuccessText:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.Y)(I.A,{}),css:P.copyToClipboard,colorway:"primary",disabled:er})]}),(0,i.Y)(E.S,{children:(0,i.FD)(D.EY,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,i.Y)("a",{css:Y.wp.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),er||J())},onClick:function(e){e.preventDefault(),er||J()},children:"Generate a new link"})]})})]}):null]})}},83244:(e,n,t)=>{"use strict";t.d(n,{l:()=>i});var r=t(8950);function i(e){return!!e&&e===r.qf8.STACK_BLUEPRINT_FULLSTACK_JS}},83365:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(12694),i=t(86105),o=t(21462),a=t(23099),l=t.n(a),s=t(36976),c=t(98679),u=t(27741),d=t(71424);function p(e){var n,t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=(0,r._)((0,o.useState)(null),2),h=f[0],m=f[1],g=(0,c.A)(h),v=null==(t=null!=(n=p.keepStaleResult)?n:p.refresh)||t,y=(0,o.useCallback)(function(e){l()(e,g.current)||m(e)},[g]),w=(0,u.A)(function(){return e},(0,i._)(a)),b=(0,d.A)().git,S=(0,o.useRef)(null),Y=(0,o.useCallback)(function(){S.current?S.current():v||y(null);var e=!1;w(b).then(function(n){e||(y(n),S.current=null)}).catch(function(){e||(y({error:s.uA.UNKNOWN}),S.current=null)}),S.current=function(){e=!0,S.current=null,v||y(null)}},[y,w,b,v]);return(0,o.useEffect)(function(){return Y()},[Y]),(0,o.useEffect)(function(){var e;if(null==(e=p.refresh)||e)return b.onRefresh(Y)},[b,Y,p.refresh]),h}},83425:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(12694),i=t(21462),o=t(13095),a=t(55100),l=t(17844),s=t(93629),c=t(64678),u=t.n(c),d=t(37872),p=t(33682);function f(e){return Math.floor(performance.now()-e.startTime)}var h=new WeakSet,m=t(71424),g=t(60987);function v(e){var n=(0,a.A)(),t=(0,m.A)().lspnix,c=(0,r._)((0,i.useState)([]),2),v=c[0],y=c[1],w=(0,g.i)();return(0,i.useEffect)(function(){if(e){var n=t.onClient(e,y);return function(){n(),y([])}}},[t,e]),(0,i.useEffect)(function(){return(0,o.xW)(v.map(function(t){return function(e){var n=e.client,t=e.replId,r=e.language,i=e.debug;if(!h.has(n)){h.add(n);var a=new Map,c=function(e){var i,o=n.getServerState(),a=null!=(i=n.getServerInfo())?i:{name:"unknown",version:"none"},l=o===p.b.INITIALIZED?"".concat(null==a?void 0:a.name,"@").concat(null==a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:t,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:n.clientId}},m=u()(function(e,n){var t=f(n);t>1e4&&d.vF.time("LSP unresponsive request",t,c(n))}),g=setInterval(function(){a.forEach(function(e){m(e.id,e)})},2e3);return(0,o.xW)([n.onRequest(function(e){var n=e.id,t=e.data;(i||.01>Math.random())&&a.set(n,{id:n,method:t.method,startTime:performance.now()})}),n.onResponse(function(e){var n=e.id,t=e.error,r=a.get(n);null!=r&&(a.delete(n),d.vF.time("LSP request",f(r),(0,s._)((0,l._)({},c(r)),{result:null==t?"ok":"error"})))}),n.onCancelRequest(function(e){var n=a.get(e);null!=n&&(a.delete(e),d.vF.time("LSP request",f(n),(0,s._)((0,l._)({},c(n)),{result:"cancelled"})))}),function(){return clearInterval(g)},function(){return h.delete(n)}])}}({client:t,replId:n,language:t.getLanguageId(e),debug:w})}))},[v,n,e,w]),v}},83478:e=>{e.exports={cta:"NeonStartPage_cta__Xo8J4",ctaStatusBanner:"NeonStartPage_ctaStatusBanner__usq51",payment:"NeonStartPage_payment__XcSLy",detailsItem:"NeonStartPage_detailsItem__MFQEb",detailsText:"NeonStartPage_detailsText__Y4kfI"}},83479:(e,n,t)=>{"use strict";t.d(n,{Hn:()=>d,dz:()=>a,fZ:()=>u});var r=t(21462),i=t(76957),o=t(79203),a=(0,r.createContext)(null),l=(0,i.eU)(null),s=(0,i.eU)(null,function(e,n,t){n(l,t)});function c(){var e=(0,r.useContext)(a);if(!e)throw Error("Expected store in context");return e}function u(){return(0,o.md)(l,{store:c()})}function d(e){var n=(0,o.md)(l,{store:c()}),t=(0,o.Xr)(s,{store:c()});(0,r.useEffect)(function(){n!==e&&t(e)},[e,n,t])}},83490:(e,n,t)=>{"use strict";t.d(n,{I:()=>o});var r=t(49022),i=t(71424);function o(){var e=(0,i.A)().toolchain;return(0,r.A)(e.configs)}},83528:(e,n,t)=>{"use strict";t.d(n,{Tu:()=>I,tL:()=>O,Ai:()=>E,RY:()=>U,KO:()=>N,nW:()=>L,Uz:()=>S,b7:()=>M,wm:()=>w,Hi:()=>T,yr:()=>H,$6:()=>P,Uo:()=>b,PI:()=>Y,if:()=>eY,MO:()=>eU,gM:()=>eh,_f:()=>$,Je:()=>et,PY:()=>eN,Ge:()=>eT,J4:()=>eg,oh:()=>ep,d9:()=>x,b:()=>eI,f6:()=>q,IT:()=>ey,mg:()=>z});var r=t(29935),i=t(17844),o=t(12694),a=t(82643),l=t(21462),s=t(35992),c=t(76957),u=t(69737),d=t(98679),p=t(27741),f=t(28290),h=t(86105);function m(e,n){for(var t=e.indexPath,r=n.indexPath,i=Math.min(t.length,r.length),o=0;o<i;o++){if(t[o]>r[o])return 1;if(t[o]<r[o])return -1}return t.length-r.length}var g=t(51240),v=t(90097),y=function(e){return"item-"+e},w=(0,c.eU)(0),b=(0,c.eU)(0),S=(0,c.eU)(0),Y=(0,c.eU)(function(e){return e(w)+e(b)+e(S)}),_=(0,c.eU)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),A=(0,c.eU)(!0);function C(){return(0,v.h)(A)}var k=(0,c.eU)(!1);function x(){return(0,v.h)(k)}var D=(0,c.eU)(null),E=(0,c.eU)({}),R=(0,u.mg)(E,function(e){return!!e.openOnInput}),I=(0,u.mg)(E,function(e){return!!e.autoFocus}),T=(0,u.mg)(E,function(e){return e.keyboardShortcut}),F=(0,u.mg)(E,function(e){return e.command}),P=(0,u.mg)(E,function(e){return e.overscan}),L=(0,u.mg)(E,function(e){return e.footer}),U=(0,u.mg)(E,function(e){return e.focusRef}),N=(0,u.mg)(E,function(e){return e.compact?12:14}),O=(0,u.mg)(E,function(e){return!!e.compact}),M=(0,u.mg)(E,function(e){return!!e.fullWidth}),H=(0,u.mg)(E,function(e){return void 0!==e.minItemHeight?e.minItemHeight:e.compact?28:32}),B=(0,u.mg)(E,function(e){var n;return null!=(n=e.showToolDescriptions)&&n});function z(){return(0,v.h)(B)}var W=(0,c.eU)(function(e){return!e(R)}),G=(0,u.mg)(E,function(e){return!!e.compact}),V=(0,c.eU)(null),Z=(0,c.eU)(function(e){return e(ee)>-1}),j=(0,c.eU)(function(e){var n=e(_);return!n.isLoading&&0===n.rows.length});function q(){return(0,v.AI)(j)}var K=(0,c.eU)({label:"",input:"",menu:""});function $(){return(0,v.h)(K)}var J=(0,c.eU)(""),Q=(0,c.eU)(""),X=(0,c.eU)(""),ee=(0,c.eU)(-1),en=(0,c.eU)(function(e){var n=e(ee);return e(er).findIndex(function(e){return"item"===e.type&&e.index===n})});function et(){return(0,v.h)(en)}var er=(0,c.eU)(function(e){return e(_).rows}),ei=(0,c.eU)(function(e){return e(_).items}),eo=(0,c.eU)(function(e){return e(ei).length}),ea=(0,c.eU)(function(e){return e(ew).filter(function(e){return"context"===e.data.type&&!!e.match})}),el=(0,c.eU)(function(e){return e(ea).length>0}),es=(0,c.eU)(!1),ec=(0,c.eU)(null,function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(es,!0);var i=e(E).command,o=Array.isArray(i)?[i[0]]:[i];n(_,function(e){return(0,s.jM)(e,function(e){e.path=o})}),e(eP).setPath(e(ew)),n(ee,-1),n(J,""),n(Q,""),n(X,""),e(R)&&n(A,!1),r.focus&&(null==(t=e(eD))||t.focus())}),eu=(0,c.eU)(function(e){return e(_).placeholder}),ed=(0,c.eU)(function(e){return e(_).isLoading});function ep(){return(0,v.h)(ed)}var ef=(0,c.eU)(function(e){return e(_).path.length});function eh(){return(0,v.h)(ef)}var em=(0,c.eU)(function(e){return e(el)||!!e(J)});function eg(){return(0,v.h)(em)}var ev=(0,c.eU)(null,function(){var e=(0,r._)(function(e,n,t,r){var i,o,l,s,c,u;function d(t){var r;n(eC,null!=t?t:"Something went wrong"),null==(r=e(eD))||r.focus()}return(0,a.YH)(this,function(a){switch(a.label){case 0:if("group"===t.data.type)return[2];if(n(V,t),o=e(E),"context"===t.data.type)return n(ex,s=t.path),n(ee,-1),e(eP).setPath(s),null==(l=e(eD))||l.focus(),[2];switch(t.data.type){case"output":case"error":return n(ec),null==(c=o.onSelect)||c.call(o,t),[2]}n(k,!0),u=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.resolve(t.data.run(r.nativeEvent))];case 2:return u=a.sent(),[3,4];case 3:return a.sent(),n(k,!1),d(),[2];case 4:if(n(k,!1),(null==u?void 0:u.type)==="error")return d(u.message),[2];return n(ec),null==(i=o.onAction)||i.call(o),[2]}})});return function(n,t,r,i){return e.apply(this,arguments)}}());function ey(e){var n=(0,v.ob)(ev),t=(0,l.useMemo)(function(){return(0,u.mg)(er,function(n){return n[e]})},[e]),r=(0,v.h)(t),i="item"===r.type?r.index:null,o=(0,l.useMemo)(function(){return(0,c.eU)(function(e){return null!==i&&e(ee)===i})},[i]),a=(0,v.h)(o),s=(null==r?void 0:r.type)==="item"?function(e){return n(r.item,e)}:void 0,d="item"===r.type?{id:y(e),role:"option","aria-selected":a}:void 0;return{row:r,active:a,onClick:s,ariaAttrs:d}}var ew=(0,c.eU)(function(e){return e(_).path}),eb=(0,c.eU)(function(e){return 1===e(ew).length}),eS=(0,c.eU)(null,function(e,n,t){var r=e(ew),i=r.indexOf(t);-1!==i&&(r=r.slice(0,i+1),n(ee,0),e(eP).setPath(r),n(J,""))});function eY(){return{iconOnly:(0,v.h)(G),breadcrumbs:(0,v.h)(ea),onClick:(0,v.ob)(eS)}}function e_(e,n){return n.match.score-e.match.score}var eA=(0,c.eU)(null,function(e,n,t){var r;if(e(X)===e(X)){var i=t.items.sort(e_),o=t.path.length?t.path[t.path.length-1]:null,a=(0,g.k)(i),l=a.items,s=a.rows,c=null!=(r=null==o?void 0:o.data)?r:null,u=null==c?void 0:c.description;e(G)&&(null==c?void 0:c.type)!=="group"&&(u=null==c?void 0:c.label),n(_,function(e){return{items:l,rows:s,isLoading:!!t.partial,path:t.path,placeholder:u||e.placeholder}}),s.length&&-1===e(ee)&&n(ee,0)}}),eC=(0,c.eU)(null,function(e,n,t){n(D,t),n(_,function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}})}),ek=(0,c.eU)(null,function(e,n,t){n(J,t),n(ee,t?0:-1),n(D,null),n(_,function(e){return(0,s.jM)(e,function(e){e.isLoading=!!t})}),e(R)&&n(A,!!t)}),ex=(0,c.eU)(null,function(e,n,t){n(_,function(e){return(0,s.jM)(e,function(e){e.items=[],e.rows=[],e.path=t})}),n(ek,""),n(Q,""),n(X,"")}),eD=(0,c.eU)(null),eE=(0,c.eU)(null,function(e,n,t){var r=e(ee);if(!(r<0)){var i=e(ei)[r];i&&n(ev,i,t)}}),eR=(0,c.eU)(null,function(e,n,t){var r=e(A),i=e(eo),o=e(ee);switch(t.key){case"ArrowDown":t.preventDefault();var a=o+1;n(ee,a<i?a:0),n(A,!0);return;case"ArrowUp":t.preventDefault(),n(ee,Math.max(-1,o-1));return;case"Home":t.preventDefault(),t.shiftKey?t.currentTarget.selectionStart=0:t.currentTarget.setSelectionRange(0,0);return;case"End":t.preventDefault();var l=t.currentTarget.value.length;t.shiftKey?t.currentTarget.selectionEnd=l:t.currentTarget.setSelectionRange(l,l);return;case"Escape":if(!e(J)||(t.preventDefault(),n(ek,""),n(Q,""),e(W)))return;n(A,!1);return;case"Enter":if(!r)return;t.preventDefault(),n(eE,t);return;case"PageUp":case"PageDown":if(!r)return;t.preventDefault();var s="PageUp"===t.key?-10:10;n(ee,function(e){return Math.max(Math.min(e+s,i-1),0)});return}});function eI(){var e=(0,v.h)(er),n=C(),t=(0,l.useRef)(null),r=eh(),i=(0,v.h)(K);return{rows:e,isOpen:n,scrollRef:t,currentPathIndex:r,ariaAttrs:{id:i.menu,"aria-labelledby":i.label,role:"listbox"}}}function eT(){var e,n,t,r,i=(0,v.ob)(eD),a=(0,v.h)(eu),s=(0,o._)((e=(0,v.h)(J),n=(0,v.ob)(ek),t=(0,v.ob)(Q),r=(0,o._)((0,l.useTransition)(),2)[1],[e,(0,l.useCallback)(function(e){var i="string"==typeof e?e:e.currentTarget.value;n(i),r(function(){return t(i)})},[n,r,t])]),2),c=s[0],u=s[1],d=(0,v.ob)(ee),p=(0,v.h)(ee),f=(0,v.h)(K),h=C();return{onBlur:function(){return d(-1)},onChange:u,placeholder:a,value:c,ref:i,disabled:x(),ariaAttrs:{id:f.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":p>-1?y(p):"","aria-controls":f.menu,"aria-expanded":h,"aria-labelledby":f.label}}}var eF=(0,c.eU)(null,function(e,n,t){var r=Array.isArray(t)?t:[t];e(es)&&(r=[r[0]]);var i=e(Q);n(X,i),e(eP).setPath(r,i)}),eP=(0,c.eU)({}),eL=(0,c.eU)(null,function(e,n){var t=e(ew),r=e(ea);if(r.pop()){var i=r.pop();if(!i)return void n(ec);var o=t.indexOf(i);t=t.slice(0,o+1),n(ee,0),n(ex,t),e(eP).setPath(t)}});function eU(){var e,n,t,r,i,o,a,s=C(),c=(0,v.h)(em),u=(0,v.h)(J),f=(0,v.h)(j),h=x(),m=(0,v.h)(D),g=(0,v.ob)(eR),y=(0,v.h)(Z),w=(0,v.ob)(ec),b=(0,v.Ou)(eD);e=(0,v.h)(eP),n=(0,v.h)(F),t=(0,v.AI)(eb),r=(0,v.AI)(Q),i=(0,v.ob)(X),o=(0,v.ob)(eF),a=(0,d.A)(n),(0,l.useEffect)(function(){t.current&&o(n)},[e,t,n,r,o]),(0,l.useEffect)(function(){return t.subscribe(function(e){e&&o(a.current)})},[e,r,t,o,a]),(0,l.useEffect)(function(){var n=function(n){i(n),e.search(n)};return n(r.current),r.subscribe(n)},[e,r,t,i,a]);var S=(0,p.A)(function(){return function(){var e;return null==(e=b())?void 0:e.focus()}},[b]),Y=(0,v.ob)(eL);return{focus:S,onKeyDown:(0,p.A)(function(){return function(e){return"Backspace"!==e.key||e.currentTarget.value?g(e):void Y()}},[g,Y]),inputValue:u,isOpen:s,isClearable:c,noResults:f,hasHighlightedItem:y,isRunning:h,actionError:m,clearCommands:w}}function eN(e){var n=(0,f.c)(),t={label:n("label"),input:n("input"),menu:n("menu")},r=(0,o._)((0,l.useState)(function(){var n,r,o=(0,c.y$)();o.set(K,t),o.set(E,e),o.set(A,!e.openOnInput),o.set(eP,function(e){var n=e.initialPath,t=e.partialUpdateTimeout,r=e.onUpdate,i=n,o=null,a=0;function l(e){o&&clearTimeout(o);var n=++a,l=0,s=[],c=i[i.length-1];if(!c.commands)return void r({items:s,path:i});void 0!==t&&(o=setTimeout(function(){s.length&&r({items:(0,h._)(s).sort(m),partial:!0,path:i})},t)),!function t(c,u,d){if(l++,!c.commands)throw Error("Expected commands");var p=(0,h._)(u).concat([c]),f=p.length===i.length;Promise.resolve(c.commands({active:f,searchQuery:e,path:p})).then(function(c){if(n!==a){o&&clearTimeout(o);return}l--,c.forEach(function(n,r){var i=(0,h._)(p).concat([n]),o=(0,h._)(d).concat([r]),a=n.match?n.match({searchQuery:e,data:n.data,path:i,active:f}):null;a&&s.push({path:i,data:n.data,match:a,indexPath:o}),n.commands&&t(n,p,o)}),l>0||(o&&clearTimeout(o),r({items:(0,h._)(s).sort(m),path:i}))})}(c,i.slice(0,i.length-1),[])}return{search:l,setPath:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i=e,l(n)},getPath:function(){return i}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:100,onUpdate:function(e){return o.set(eA,(0,i._)({},e))}}));var a=Array.isArray(e.command)?e.command[0]:e.command,l=null!=(r=null==a||null==(n=a.data)?void 0:n.description)?r:null;return l&&o.set(_,function(e){return(0,s.jM)(e,function(e){e.placeholder=l})}),o}),1)[0];return(0,l.useEffect)(function(){r.set(E,e)},[r,e]),r}},83731:(e,n,t)=>{"use strict";t.d(n,{A:()=>I});var r=t(29935),i=t(12694),o=t(82643),a=t(81073),l=t(21462),s=t(17844),c=t(12584),u=t(41114),d=t(86997),p=t(50175);function f(){var e=(0,c._)(["\n  query GetReplShieldStatus($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        isReplShieldEnabled\n        authorizations {\n          editDevUrlPrivacy {\n            isAuthorized\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,c._)(["\n  mutation ToggleReplShield($input: SetReplShieldInput!) {\n    setReplShield(input: $input) {\n      ... on Repl {\n        id\n        isReplShieldEnabled\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}var m={},g=(0,u.J1)(f()),v=(0,u.J1)(h()),y=t(96034),w=t(83603),b=t(1982),S=t(55100),Y=t(14417),_=t(18509),A=t(27023),C=t(8017),k=t(4616),x=t(78626),D=t(85389),E=t(74033),R=(0,_.x)({titleRow:[A.wp.gap(8),A.wp.align.center]});function I(){var e,n,t,c,u,f,h,_,I,T,F,P=(0,b.A)().showError,L=(0,S.A)(),U=(0,i._)((0,l.useState)(null),2),N=U[0],O=U[1],M=(0,Y.nL)().forceRemint,H=(0,w.ET)(),B=H.loading,z=H.orgId,W=!B&&!z,G=(e={variables:{replId:L},skip:!L},n=(0,s._)({},m,e),d.I(g,n)),V=G.data,Z=G.loading,j=(0,i._)((t=(0,s._)({},m,void 0),p.n(v,t)),2),q=j[0],K=j[1].loading,$=(null==V||null==(u=V.getRepl)?void 0:u.__typename)==="Repl"&&V.getRepl.isReplShieldEnabled,J=(null==V||null==(f=V.getRepl)?void 0:f.__typename)==="Repl"&&(null==(_=V.getRepl.authorizations)||null==(h=_.editDevUrlPrivacy)?void 0:h.isAuthorized),Q=(null==V||null==(I=V.getRepl)?void 0:I.__typename)==="Repl"&&(null==(F=V.getRepl.authorizations)||null==(T=F.editDevUrlPrivacy)?void 0:T.message),X=null!==N?N:$,ee=(c=(0,r._)(function(){var e,n,t,r,i,a,l;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(!L||!J)return[2];O(!X),o.label=1;case 1:return o.trys.push([1,6,,7]),[4,q({variables:{input:{replId:L,isEnabled:!X}},refetchQueries:[{query:g,variables:{replId:L}}]})];case 2:if((null==(n=(l=o.sent()).data)||null==(e=n.setReplShield)?void 0:e.__typename)!=="UserError"&&(null==(r=l.data)||null==(t=r.setReplShield)?void 0:t.__typename)!=="NotFoundError"&&(null==(a=l.data)||null==(i=a.setReplShield)?void 0:i.__typename)!=="UnauthorizedError")return[3,3];return P(l.data.setReplShield.message),O(null),[3,5];case 3:return[4,M()];case 4:o.sent(),o.label=5;case 5:return[3,7];case 6:return o.sent(),P("Failed to toggle configuration"),O(null),[3,7];case 7:return[2]}})}),function(){return c.apply(this,arguments)});return(0,a.Y)(D.S,{p:4,children:(0,a.FD)(D.S,{row:!0,justify:"space-between",children:[(0,a.FD)(D.S,{gap:4,children:[(0,a.FD)(D.S,{css:R.titleRow,row:!0,children:[(0,a.Y)(k.EY,{children:"Private Dev URL"}),W?(0,a.Y)(E.A,{plan:"Teams",size:"small",tooltipProps:{description:"Private Dev URL is only available on Replit ".concat(y.$B,".")}}):null]}),(0,a.Y)(k.EY,{variant:"small",css:A.wp.color.foregroundDimmer,children:"Restrict Dev URL access to authenticated editors only."}),(0,a.Y)(k.EY,{variant:"small",css:A.wp.color.foregroundDimmer,children:"When this option is disabled, anyone with the Dev URL can access your app preview."})]}),(0,a.Y)(D.S,{row:!0,align:"center",children:(0,a.Y)(x.m_,{tooltip:K?"Loading...":Z?"Loading status...":J?W?"Private Dev URL is only available on Replit ".concat(y.$B,"."):"Toggle to ".concat(X?"disable":"enable"," private dev URL"):Q||"You do not have permission to change this setting",children:(0,a.Y)(D.S,{children:(0,a.Y)(C.d,{"aria-label":"Toggle private dev URL",isSelected:X,onChange:ee,isDisabled:K||Z||!J||W,colorway:X?"positive":"primary"})})})})]})})}},84037:(e,n,t)=>{"use strict";t.d(n,{$:()=>A});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(81073),s=t(21462),c=t(17844),u=t(12584),d=t(41114),p=t(86997);function f(){var e=(0,u._)(["\n  query CurrentUserGithubToken {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return f=function(){return e},e}var h={},m=(0,d.J1)(f()),g=t(17089),v=t(39159),y=t(71424),w=t(11769),b=t(85144),S=t(4616),Y=t(85389),_=t(24140);function A(){var e,n,t=(0,y.A)().replspaceApi,u=(0,o._)((0,s.useState)(null),2),d=u[0],f=u[1],A=(0,o._)((0,s.useState)(!1),2),C=A[0],k=A[1],x=(e=(0,c._)({},h,void 0),p.I(m,e)).data,D=(null==x?void 0:x.currentUser)||void 0;return(0,s.useEffect)(function(){return t.onConfirmSendToken(function(e){e&&(0,g.u4)(g.AZ.MODAL_VIEWED,{modalName:"git_token_modal"}),f(function(){return e})})},[t]),(0,v.b)((n=(0,i._)(function(e,n){var t,i,o,l,s,c,u,d,p,h,m,v;return(0,a.YH)(this,function(a){switch(a.label){case 0:t=n.session,i=n.signal,l=(o=e.replspaceApi.init.stream({session:t.from},{signal:i})).reqWritable,s=o.resReadable,c=!1,u=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),p=function(){var e=m.value;if(e.ok&&"getGithubToken"===e.payload.$kind){var n,t,r=e.payload.nonce,i=null!=(t=null==D||null==(n=D.gitHubInfo)?void 0:n.accessToken)?t:void 0;if(!i)return l.write({$kind:"githubToken",nonce:r}),"continue";if(C)return l.write({$kind:"githubToken",token:i,nonce:r}),"continue";(0,g.u4)(g.AZ.MODAL_VIEWED,{modalName:"git_token_modal"}),f(function(){return function(e){if(!e){f(null),l.write({$kind:"githubToken",nonce:r});return}l.write({$kind:"githubToken",token:i,nonce:r}),f(null),k(!0)}})}},h=(0,r._)(s),a.label=2;case 2:return[4,h.next()];case 3:if(!(c=!(m=a.sent()).done))return[3,5];p(),a.label=4;case 4:return c=!1,[3,2];case 5:return[3,12];case 6:return v=a.sent(),u=!0,d=v,[3,12];case 7:if(a.trys.push([7,,10,11]),!(c&&null!=h.return))return[3,9];return[4,h.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(u)throw d;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[D,C]),(0,l.Y)(b.a,{isOpen:"function"==typeof d,onRequestClose:function(){null==d||d(!1),(0,g.u4)(g.AZ.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),f(null)},children:(0,l.FD)(Y.S,{gap:16,children:[(0,l.Y)(S.Y9,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,l.Y)(S.EY,{children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,l.Y)(S.EY,{children:"If you did not initiate a git command, you should deny this."}),(0,l.FD)(Y.S,{justify:"end",row:!0,gap:16,children:[(0,l.Y)(w.$n,{onClick:function(){null==d||d(!1),(0,g.u4)(g.AZ.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),f(null)},text:"Deny"}),(0,l.Y)(w.$n,{onClick:function(){null==d||d(!0),(0,g.u4)(g.AZ.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),f(null)},iconLeft:(0,l.Y)(_.A,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},84322:(e,n,t)=>{"use strict";t.d(n,{i:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query CurrentUserEnv {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(){var e,n=(e=(0,r._)({},s,void 0),a.I(c,e)).data;return(null==n?void 0:n.currentUser)||void 0}},84515:(e,n,t)=>{"use strict";t.d(n,{ET:()=>S,Mk:()=>m,c_:()=>h,eP:()=>w,v4:()=>v});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175),s=t(96202);function c(){var e=(0,i._)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var f={},h=(0,o.J1)(c(),s.A9);function m(e){var n=(0,r._)({},f,e);return a.I(h,n)}var g=(0,o.J1)(u(),s.A9);function v(e){var n=(0,r._)({},f,e);return l.n(g,n)}var y=(0,o.J1)(d(),s.A9);function w(e){var n=(0,r._)({},f,e);return l.n(y,n)}var b=(0,o.J1)(p(),s.A9);function S(e){var n=(0,r._)({},f,e);return l.n(b,n)}},84647:(e,n,t)=>{"use strict";t.d(n,{B:()=>sG});var r,i,o,a,l,s=t(17844),c=t(93629),u=t(12694),d=t(22531),p=t(81073),f=t(21462),h=t(684),m=t(37299),g=t(30331),v=t(22940),y=t(5932),w=t(29935),b=t(86105),S=t(82643),Y=t(66890),_=t(62792),A=t(16240),C=t(83846),k=t(70492),x=t(55490),D=t(78454),E=t(1867),R=t(21640),I=t(12584),T=t(41114),F=t(86997);function P(){var e=(0,I._)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return P=function(){return e},e}function L(){var e=(0,I._)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return L=function(){return e},e}var U={},N=(0,T.J1)(P()),O=(0,T.J1)(L(),N),M=t(42793),H=t(43303),B=t(27023),z=(0,M.AH)([B.wp.maxHeight(320),B.wp.minHeight(240),{aspectRatio:"2 / 1"}]);function W(){var e=(0,H.D)().values;return{animation:{duration:0},backgroundColor:e.global.backgroundHigher,borderColor:e.global.outlineDimmer,borderWidth:1,titleFont:{family:"'IBM Plex Sans', sans-serif"},titleColor:e.global.foregroundDimmest,bodyFont:{family:"'IBM Plex Sans', sans-serif"},bodyColor:e.global.foregroundDimmest,footerFont:{family:"'IBM Plex Sans', sans-serif"},footerColor:e.global.foregroundDimmest,padding:8,cornerRadius:6}}var G=t(24602),V=t(36073),Z=t(4616),j=t(85389),q=function(e){var n=e.data;R.t1.register(R.E8);var t=(0,H.D)().values;return(0,p.Y)(E.yP,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},plugins:{tooltip:W()},scales:{y:{title:{display:!0,text:"# Requests",color:t.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:t.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return e}},grid:{color:t.global.outlineDimmest}},x:{title:{font:{family:"'IBM Plex Sans', sans-serif"},display:!0,text:"Duration (ms)",color:t.global.foregroundDimmer},ticks:{autoSkip:!1,maxRotation:20,color:t.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:t.global.outlineDimmest}}}},data:{labels:n.results.map(function(e){var n=e.value.replace("ms","").split("-"),t=n[n.length-1];return t.includes("s+")?t.replace("s+","000+"):"< "+t}),datasets:[{borderWidth:0,data:n.results.map(function(e){return e.count}),backgroundColor:Array(n.results.length).fill(t.global.tealDefault)}]}})};let K=function(e){var n,t,r,i,o=e.replId,a=e.start,l=e.hours,c=(0,u._)((0,f.useState)(void 0),2),d=c[0],h=c[1],m=(n={variables:{id:o,input:{start:a,hours:l,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsDuration.__typename){case"UserError":case"NotFoundError":h(Error(e.getRepl.analyticsDuration.message))}}},t=(0,s._)({},U,n),F.I(O,t)),g=m.data,v=m.loading,y=m.error;return y&&h(y),(0,p.FD)(j.S,{gap:8,children:[(0,p.Y)(Z.EY,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,p.FD)(j.S,{children:[v?(0,p.Y)(j.S,{css:[z,B.wp.borderRadius(),G.S.backgroundPulse()]}):null,d?(0,p.Y)(V.N,{text:d.message,colorway:"negative"}):null,(null==g||null==(r=g.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=g.getRepl.analyticsDuration)?void 0:i.__typename)==="ReplAnalyticsDuration"?(0,p.Y)(j.S,{css:z,children:(0,p.Y)(q,{data:g.getRepl.analyticsDuration})}):null]})]})};var $=t(21691);function J(){var e=(0,I._)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return J=function(){return e},e}function Q(){var e=(0,I._)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return Q=function(){return e},e}function X(){var e=(0,I._)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return X=function(){return e},e}var ee={},en=(0,T.J1)(J()),et=(0,T.J1)(Q(),en),er=(0,T.J1)(X(),et),ei=t(76334),eo=t(38184);R.t1.register(R.PP,R.kc,R.FN,R.No,R.m_);let ea=function(e){var n=e.labels,t=e.datasets,r=e.maintainAspectRatio,i=e.yAxisLabel,o=e.xAxisLabel,a=e.unit,l=(0,H.D)().values,u={labels:n.map(function(e){return e.toISOString()}),datasets:t.map(function(e){return(0,c._)((0,s._)({},e),{data:e.data.map(function(e){var n=e.x,t=e.y;return{x:n.toISOString(),y:t}}),pointRadius:.5,tension:.1})})},d=n.length;return(0,p.Y)(E.N1,{options:{clip:4,interaction:{mode:"nearest",intersect:!1},transitions:{active:{animation:{duration:0}}},elements:{point:{hoverRadius:4},line:{borderWidth:2}},responsive:!0,maintainAspectRatio:void 0===r||r,plugins:{tooltip:(0,c._)((0,s._)({},W()),{callbacks:{title:function(e){var n=new Date(e[0].label);return(0,ei.A)(n,"MMM d, HH:mm (z)")}}})},scales:{y:{title:{display:!0,text:void 0===i?"# Requests":i,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return a?"".concat(e).concat(a):e}},min:0},x:{title:{display:!0,text:void 0===o?"Time":o,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e,t){var r=n[t];if(d<=24){if(r.getHours()%4!=0)return;return(0,ei.A)(r,"HH:mm")}if(r.toISOString()===(0,eo.A)(r).toISOString())return(0,ei.A)(r,"MMM d")}}}}},data:u})};var el=function(e){var n=e.data,t=e.start,r=e.hours,i=(0,H.D)().values,o=Array(r).fill(0).map(function(e,n){return(0,$.A)(t,n)}),a=n.results.reduce(function(e,n){return e.set(n.timestamp,n),e},new Map),l=[{label:"Connected",data:o.map(function(e){var n;return{y:(null!=(n=a.get(e.toISOString()))?n:{success:0}).success,x:e}}),borderColor:i.global.accentPrimaryStronger,backgroundColor:i.global.accentPrimaryStronger},{label:"Failed",data:o.map(function(e){var n;return{y:(null!=(n=a.get(e.toISOString()))?n:{failure:0}).failure,x:e}}),borderColor:i.global.accentNegativeStronger,backgroundColor:i.global.accentNegativeStronger}];return(0,p.Y)(ea,{labels:o,datasets:l,maintainAspectRatio:!1})};let es=function(e){var n,t,r,i,o=e.replId,a=e.start,l=e.hours,c=(0,u._)((0,f.useState)(void 0),2),d=c[0],h=c[1],m=(n={variables:{id:o,input:{start:a,hours:l,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":h(Error(e.getRepl.analyticsPageViews.message))}}},t=(0,s._)({},ee,n),F.I(er,t)),g=m.data,v=m.loading,y=m.error,w=(null==g||null==(r=g.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=g.getRepl.analyticsPageViews)?void 0:i.__typename)==="ReplAnalyticsPageViews"?g.getRepl.analyticsPageViews:void 0,b=w?w.uniques:void 0;return y&&h(y),(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{row:!0,align:"center",justify:"space-between",children:[(0,p.Y)(Z.EY,{variant:"subheadDefault",multiline:!1,children:"Requests"}),b?(0,p.FD)(Z.EY,{multiline:!1,children:[(0,p.Y)("strong",{children:b})," unique IP addresses"]}):null]}),(0,p.FD)(j.S,{children:[v?(0,p.Y)(j.S,{css:[B.wp.width("100%"),z,B.wp.borderRadius(),G.S.backgroundPulse()]}):null,d?(0,p.Y)(V.N,{text:d.message,colorway:"negative"}):null,w?(0,p.Y)(j.S,{css:z,children:(0,p.Y)(el,{data:w,start:a,hours:l})}):null]})]})};function ec(){var e=(0,I._)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n    unit\n  }\n"]);return ec=function(){return e},e}function eu(){var e=(0,I._)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return eu=function(){return e},e}function ed(){var e=(0,I._)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return ed=function(){return e},e}var ep={},ef=(0,T.J1)(ec()),eh=(0,T.J1)(eu(),ef),em=(0,T.J1)(ed(),eh);t(51106),R.t1.register(R.PP,R.kc,R.FN,R.No,R.hE,R.m_,R.UA);let eg=function(e){var n,t=e.data,r=e.start,i=e.end,o=e.label,a=e.unit,l=e.xAxisLabel,c=e.yAxisLabel,u=(0,H.D)().values,d=W(),f={datasets:[{label:o,data:t,fill:!1,borderColor:u.global.blueDimmer,tension:.1}]},h=(n=Math).max.apply(n,(0,b._)(t.map(function(e){return e.y}))),m=Math.ceil(a===D.zj.Percentage?Math.max(h,100):Math.ceil(1.2*h)),g=function(e,n){var t=n.getTime()-e.getTime();if(t<=36e5)return{unit:"minute",stepSize:5};if(t<=216e5)return{unit:"minute",stepSize:30};if(t<=864e5)return{unit:"hour",stepSize:2};if(t<=2592e5)return{unit:"hour",stepSize:6};if(t<=6048e5)return{unit:"hour",stepSize:12};else return{unit:"day",stepSize:1}}(r,i),v=g.unit,y=g.stepSize;return(0,p.Y)(E.N1,{data:f,options:{animation:!1,scales:{x:{type:"time",time:{unit:v},title:{display:!0,text:l},min:r.getTime(),max:i.getTime(),ticks:{stepSize:y,color:u.global.foregroundDimmer}},y:{title:{display:!0,text:c},type:"linear",suggestedMax:m,ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:u.global.foregroundDimmer,callback:function(e){return a?"".concat(e).concat(a):e}},min:0}},maintainAspectRatio:!1,responsive:!0,plugins:{tooltip:(0,s._)({},d)}}})};var ev=function(e){var n,t,r,i,o=e.start,a=e.end,l=e.timeSeriesFragment,s=e.xAxisLabel,c=e.yAxisLabel;if(0===l.results.length)return(0,p.Y)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px"},children:"No Data Available"});var d=(r=(n=l.results)[0].value,{label:r,unit:(i=null==(t=n[0])?void 0:t.unit)?function(e,n){var t=Object.entries(e).find(function(e){var t=(0,u._)(e,2);return t[0],t[1]===n});if(t)return e[t[0]]}(D.zj,i):void 0,data:n.map(function(e){return{x:new Date(e.timestamp),y:e.count}})}),f=d.label,h=d.unit,m=d.data;return(0,p.Y)(eg,{data:m,start:o,end:a,label:f,unit:h,xAxisLabel:s,yAxisLabel:c})},ey=function(e){var n=e.data,t=e.start,r=e.hours,i=e.colorFn,o=Array(r).fill(0).map(function(e,n){return(0,$.A)(t,n)}),a=n.results.reduce(function(e,n){var t,r=n.timestamp,i=n.value,o=n.count,a=null!=(t=e.get(i))?t:new Map;return a.set(r,o),e.set(i,a),e},new Map),l=(0,b._)(a.keys()).map(function(e,n){var t=i(e,n),r=a.get(e);return{label:e,data:o.map(function(e){var n,t=null!=(n=null==r?void 0:r.get(e.toISOString()))?n:0;return{x:new Date(e),y:t}}),borderColor:t,backgroundColor:t}});return(0,p.Y)(ea,{labels:o,datasets:l,maintainAspectRatio:!1})};let ew=function(e){var n,t,r,i,o=e.replId,a=e.title,l=e.metric,c=e.start,d=e.hours,h=e.colorFn,m=(0,u._)((0,f.useState)(void 0),2),g=m[0],v=m[1],y=(n={variables:{id:o,input:{metric:l,start:c,hours:d,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsTimeSeries.__typename){case"TooManyRequestsError":v(Error("Too many requests"));break;case"UserError":case"NotFoundError":v(Error(e.getRepl.analyticsTimeSeries.message))}}},t=(0,s._)({},ep,n),F.I(em,t)),w=y.data,b=y.loading,S=y.error,Y=(null==w||null==(r=w.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=w.getRepl.analyticsTimeSeries)?void 0:i.__typename)==="ReplAnalyticsTimeSeries"?w.getRepl.analyticsTimeSeries:void 0;return S&&v(S),(0,p.FD)(j.S,{gap:8,children:[(0,p.Y)(j.S,{row:!0,align:"center",justify:"space-between",children:(0,p.Y)(Z.EY,{variant:"subheadDefault",multiline:!1,children:a})}),(0,p.FD)(j.S,{children:[b?(0,p.Y)(j.S,{css:[B.wp.width("100%"),z,B.wp.borderRadius(),G.S.backgroundPulse()]}):null,g?(0,p.Y)(V.N,{text:g.message,colorway:"negative"}):null,Y?(0,p.Y)(j.S,{css:z,children:(0,D.P0)(l)?(0,p.Y)(ev,{start:c,end:(0,$.A)(c,d),timeSeriesFragment:Y}):(0,p.Y)(ey,{data:Y,start:c,hours:d,colorFn:h})}):null]})]})};var eb=t(73677),eS=t.n(eb);function eY(){var e=(0,I._)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return eY=function(){return e},e}function e_(){var e=(0,I._)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return e_=function(){return e},e}var eA={},eC=(0,T.J1)(eY()),ek=(0,T.J1)(e_(),eC),ex=t(36937),eD=t(83070),eE=t(77915),eR=t(73806),eI=function(e){var n=e.data,t=e.variant;if(0===n.results.length)return(0,p.Y)(Z.EY,{multiline:!1,children:"No results"});switch(t){case"map":return(0,p.Y)(eP,{data:n});case"pie":return(0,p.Y)(eF,{data:n,devices:!1});case"device-pie":return(0,p.Y)(eF,{data:n,devices:!0});case"table":return(0,p.Y)(eT,{data:n})}},eT=function(e){var n=e.data;return R.t1.register(R.Bs),(0,p.Y)(j.S,{children:n.results.map(function(e,n){return(0,p.FD)(j.S,{css:[{borderBottom:"1px solid ".concat(ex.LU.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],py:8,row:!0,gap:16,children:[(0,p.Y)(j.S,{css:[B.wp.maxWidth("90%")],grow:!0,children:(0,p.Y)(Z.EY,{title:e.value,multiline:!1,children:e.value})}),(0,p.Y)(j.S,{children:(0,p.Y)(Z.EY,{multiline:!1,children:e.count})})]},n)})})},eF=function(e){var n=e.data,t=e.devices,r=(0,H.D)(),i=r.isDarkColorScheme,o=r.values,a=i?B.iB.categorical:B.iB.categorical.reverse(),l=new Map;return t?n.results.forEach(function(e){var n=e.value,t=e.count,r=n.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),o=l.get(i)||0;l.set(i,o+t)}else{var a=l.get("Unknown")||0;l.set("Unknown",a+t)}}):n.results.forEach(function(e){var n=e.value,t=e.count,r=n.replace(/ \(.*\)/,""),i=l.get(r)||0;l.set(r,i+t)}),(0,p.Y)(j.S,{css:z,children:(0,p.Y)(E.Fq,{options:{radius:"90%",maintainAspectRatio:!1,plugins:{tooltip:W()}},data:{labels:(0,b._)(l.keys()),datasets:[{borderWidth:+((0,b._)(l.keys()).length>1),borderColor:o.global.outlineDimmest,data:(0,b._)(l.values()),backgroundColor:Array(l.size).fill(0).map(function(e,n){return a[n%a.length]})}]}})})},eP=function(e){var n=e.data,r=eS()(function(){return Promise.all([t.e(1175),t.e(1434),t.e(8679),t.e(3891)]).then(t.bind(t,73891))},{loadableGenerated:{webpack:function(){return[73891]}},ssr:!1}),i=n.results.map(function(e){return{country:e.value,numHits:e.count}});return(0,p.Y)(r,{countries:i})};let eL=function(e){var n,t,r,i,o=e.replId,a=e.start,l=e.hours,c=e.metric,d=e.count,h=e.variant,m=void 0===h?"table":h,g=e.expandable,v=(0,D.sJ)(c),y=(0,u._)((0,f.useState)(void 0),2),w=y[0],b=y[1],S=(0,u._)((0,f.useState)(!1),2),Y=S[0],_=S[1],A=(n={variables:{id:o,input:{metric:c,start:a,hours:l,deployment:!0,count:Y?3*d:d}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsTopList.__typename){case"UserError":case"NotFoundError":b(Error(e.getRepl.analyticsTopList.message))}}},t=(0,s._)({},eA,n),F.I(ek,t)),C=A.data,k=A.loading,x=A.error;return x&&b(x),(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{row:!0,gap:8,children:[(0,p.Y)(Z.EY,{variant:"subheadDefault",multiline:!1,children:"device-pie"===m?"Top Devices":"Top ".concat(v)}),void 0!==g&&g?(0,p.Y)(eD.K0,{alt:Y?"Collapse list":"Expand list",onClick:function(){return _(!Y)},children:Y?(0,p.Y)(eE.A,{}):(0,p.Y)(eR.A,{})}):null]}),(0,p.FD)(j.S,{children:[k?(0,p.Y)(j.S,{css:[B.wp.height(80),B.wp.borderRadius(),G.S.backgroundPulse()]}):null,w?(0,p.Y)(V.N,{text:w.message,colorway:"negative"}):null,(null==C||null==(r=C.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=C.getRepl.analyticsTopList)?void 0:i.__typename)==="ReplAnalyticsTopList"?(0,p.Y)(eI,{variant:m,data:C.getRepl.analyticsTopList}):null]})]})};var eU=t(97626),eN=t(82839),eO=t(18509),eM=t(69762),eH=[{label:"six hours",key:6},{label:"one day",key:24},{label:"five days",key:120},{label:"one week",key:168},{label:"two weeks",key:336},{label:"thirty days",key:720}],eB={label:"one week",key:168},ez=B.kL.min(600),eW=(0,eO.x)({fullWidth:(0,C._)({},ez,{gridColumn:"span 2"})}),eG=(0,eO.x)({container:[B.wp.display.grid,B.wp.gap(32),B.wp.pb(32),(0,C._)({},ez,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"})],fullWidth:eW.fullWidth,map:[eW.fullWidth],pies:[eW.fullWidth,B.wp.flex.column,(0,C._)({gap:32},B.kL.min(480),[B.wp.flex.row,{" > *":{flex:1}}])]}),eV=function(e){var n=e.replId,t=(0,u._)((0,f.useState)(eB),2),r=t[0],i=r.key,o=r.label,a=t[1],l=(0,u._)((0,f.useState)((0,k.A)((0,x.A)(new Date),i-1)),2),s=l[0],c=l[1],d=(0,eN.g)("deployment-analytics-dot"),h=d.isDone,m=d.setAsDone,g=(0,k.A)((0,x.A)(new Date),23),v=(0,H.D)().values,y=[v.global.redStronger,v.global.redDimmer,v.global.redStrongest,v.global.redDimmest],w=[v.global.orangeDefault,v.global.orangeDimmer,v.global.orangeStronger,v.global.orangeDimmest],b=[v.global.blueDefault,v.global.blueDimmer,v.global.blueStronger,v.global.blueDimmest],S=[v.global.greenDefault,v.global.greenDimmer,v.global.greenStronger,v.global.greenDimmest];return(0,f.useEffect)(function(){(0,eU.Ae)({context:_.P.Analytics})},[]),(0,f.useEffect)(function(){h||m()},[h,m]),(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{css:eG.container,children:[(0,p.Y)(j.S,{css:eG.fullWidth,children:(0,p.Y)(eM.in,{items:eH,label:"Past ".concat(o),onAction:function(e){var n,t="string"==typeof e?parseInt(e,10):e;a(null!=(n=eH.find(function(e){return e.key===t}))?n:eB),c((0,k.A)((0,x.A)(new Date),t-1))},children:function(e){return(0,p.Y)(eM.Dr,{label:e.label,id:e.key},e.key)}})}),(0,p.Y)(j.S,{css:eG.fullWidth,children:(0,p.Y)(es,{replId:n,start:s,hours:i})}),(0,p.Y)(eL,{replId:n,metric:D.d0.Url,start:s,hours:i,count:4,expandable:!0}),(0,p.Y)(eL,{replId:n,metric:D.d0.Referrer,start:s,hours:i,count:4,expandable:!0}),(0,p.Y)(ew,{replId:n,title:"HTTP Statuses (24h)",metric:D.YE.Statuses,start:g,hours:24,colorFn:function(e,n){var t=Number(e);return t<300?S[n%S.length]:t<400?b[n%b.length]:t<500?w[n%w.length]:y[n%y.length]}}),(0,p.Y)(K,{replId:n,start:s,hours:i}),(0,p.FD)(j.S,{css:eG.pies,children:[(0,p.Y)(eL,{replId:n,metric:D.d0.Browser,start:s,hours:i,count:100,variant:"pie"}),(0,p.Y)(eL,{replId:n,metric:D.d0.Browser,start:s,hours:i,count:100,variant:"device-pie"})]}),(0,p.Y)(j.S,{css:eG.map,children:(0,p.Y)(eL,{replId:n,metric:D.d0.Country,start:s,hours:i,count:100,variant:"map"})})]})})},eZ=t(4710),ej=t(66767);function eq(){var e=(0,I._)(["\n  query HostingDeploymentConfigRedeploy($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        ignoredSecrets\n        activityLogs(count: 20) {\n          items {\n            id\n            ...HostingActivityLogLine2\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n        currentBuild {\n          id\n          envVars {\n            name\n            value\n          }\n          suspendedReason\n        }\n        ...DeploymentsDeployOptionsDeployment\n        repl {\n          ...DeploymentsDeployOptionsAuthzRepl\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return eq=function(){return e},e}var eK={},e$=(0,T.J1)(eq(),ej.aW,eZ.vz,eZ.px),eJ=t(71983),eQ=t(17089),eX=t(11769),e0=t(85144),e1=t(93517),e2=t(87064),e4=t(35381),e5=(0,eO.x)({buttonLeft:[B.wp.borderRadius(8,0,0,8),B.wp.flex.growAndShrink(1)],buttonRight:[B.wp.borderRadius(0,8,8,0)]});function e3(e){var n=e.shouldShow,t=e.onDismissTour,r=(0,u._)((0,f.useState)(!1),2),i=r[0],o=r[1];return(0,p.FD)(p.FK,{children:[n?(0,p.FD)(j.S,{pb:12,row:!0,gap:2,justify:"center",children:[(0,p.Y)(eX.$n,{iconLeft:(0,p.Y)(e4.A,{}),onClick:function(){(0,eQ.u4)(eJ.AZ.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),o(!0)},text:"Deploy with the Replit App!",css:e5.buttonLeft}),(0,p.Y)(eX.$n,{css:e5.buttonRight,text:"",iconLeft:(0,p.Y)(e2.A,{}),onClick:t})]}):null,(0,p.Y)(e0.a,{isOpen:i,onRequestClose:function(){o(!1),t()},children:(0,p.Y)(e1.A,{source:"deployment_build_success"})})]})}var e7=t(90205),e6=t(33612),e8=t(54251),e9=t(8923),ne=t(99400),nn=t(21762),nt=t(75174),nr=t(34415),ni=t(8486),no=t(45894),na=t(71872),nl=(0,eO.x)({self:B.wp.colWithGap(8),ctaGroup:{flexDirection:"row",gap:8,flexWrap:"wrap"},deployOptions:[B.wp.borderRadius(8),B.wp.border({color:ex.LU.outlineDimmest})]}),ns=function(e){var n,t,r,i,o,a,l,c,d,h,m,b,Y,A,C,k,x,D,E,R,I=e.deploymentId,T=e.replId,P=e.dotReplit,L=e.fs,U=e.ports,N=e.secrets,O=e.onError,M=e.expanded,H=e.setExpanded,B=e.shouldShowMobileTour,z=e.onDismissMobileTour,W=e.openNetworkingPane,G=e.onResume,Z=e.hasAgentSession,q=e.onViewAction,K=(0,nn._P)({controlName:"flag-security-scanning"}),$=(0,g.Tp)().redeployWithNoNewOptions,J=(0,v.u)(),Q=(i=(n={deploymentId:I,dotReplit:P}).deploymentId,o=n.dotReplit,l=(a=(0,u._)((0,f.useState)(null),2))[0],c=a[1],(0,f.useEffect)(function(){var e=!1;function n(){return(n=(0,w._)(function(){var n;return(0,S.YH)(this,function(t){switch(t.label){case 0:return[4,(0,e7.XE)(o)];case 1:if(n=t.sent(),e)return[2];return c(n),[2]}})})).apply(this,arguments)}return!function(){n.apply(this,arguments)}(),function(){e=!0}},[o]),d=l,Y=(h={variables:{id:i},ssr:!1,fetchPolicy:"cache-and-network"},m=(0,s._)({},eK,h),b=F.I(e$,m)).data,A=b.loading,C=b.error,k=(null==Y||null==(t=Y.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"?Y.hostingDeployment:null,(null==Y||null==(r=Y.hostingDeployment)?void 0:r.__typename)==="NotFoundError"?{deployment:null,config:null,error:"Deployment not found",loading:!1}:null===d||!k&&A?{data:null,erorr:null,loading:!0}:C||!k?{deployment:null,config:null,error:"Something went wrong",loading:!1}:{deployment:k,config:d,error:null,loading:!1}),X=(0,g.mj)().deployability,ee=null==(x=Q.deployment)?void 0:x.currentBuild,en=(0,e6.g)({secrets:N,replId:T}).devSecrets,et=null==(D=Q.deployment)?void 0:D.currentBuild.envVars,er=null==(E=Q.deployment)?void 0:E.repl.authorizations.editSecrets.isAuthorized,ei=null==(R=Q.deployment)?void 0:R.repl.authorizations.editDeploymentSecrets.isAuthorized,eo=(0,f.useMemo)(function(){return en&&et&&er&&ei?(0,nt.j)({secrets:new Map(null==et?void 0:et.map(function(e){return[e.name,e.value]})),otherSecrets:en}).missing.size:0},[en,et,er,ei]);if(Q.error)return(0,p.Y)(e8.Wx,{text:Q.error});if(M)return ee?(0,p.Y)(j.S,{css:nl.deployOptions,p:16,pt:12,children:(0,p.Y)(e9.S,{initialSubdomain:"",provider:ee.provider,deploymentId:I,replId:T,fs:L,secrets:N,dotReplit:P,ports:U,onCancel:function(){return H(!1)},onDeploy:function(){return H(!1)},onError:O,initialSecretsSyncExpanded:eo>0,openNetworkingPane:W,hasAgentSession:Z,onViewAction:q})}):(0,p.Y)(V.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"Provider not found"});var ea=Q.loading||!X.redeploy.isAuthorized||J!==y.d.Ready&&J!==y.d.Suspended;return(0,p.FD)(j.S,{css:nl.self,children:[(0,p.Y)(ne.Y,{deployability:X,isRedeploy:!0}),(0,p.FD)(j.S,{css:nl.ctaGroup,children:[(0,p.Y)(eX.$n,{disabled:ea,onClick:(0,w._)(function(){return(0,S.YH)(this,function(e){switch(e.label){case 0:if(Q.loading)return[2];if(J===y.d.Suspended)return G(),[2];return[4,$({hasAgentSession:Z})];case 1:return e.sent(),[2]}})}),text:J===y.d.Suspended?"Resume":"Redeploy",iconLeft:(0,p.Y)(ni.A,{})}),(0,p.Y)(eX.$n,{disabled:ea,text:"Edit commands and secrets",onClick:function(){return H(!0)}}),K?(0,p.Y)(eX.$n,{text:"Run security scan",iconLeft:(0,p.Y)(no.A,{}),onClick:function(){q({type:_.k.OpenPane,payload:{type:"securityScan"}}),(0,nr.kB)(nr.aJ.REDEPLOY_PANE)}}):null,(0,p.Y)(e3,{shouldShow:B,onDismissTour:z})]})]})},nc=(0,eO.x)({line:{width:1,position:"absolute",left:3},circlePast:{position:"absolute",top:10,left:1,width:5,height:5,borderRadius:"100%",opacity:.5}}),nu=(0,eO.x)({container:{width:7,position:"relative"},linePast:[nc.line,{backgroundColor:ex.LU.outlineDimmest,top:15,bottom:-10}],linePresent:[nc.line,{backgroundImage:"linear-gradient(to top, ".concat(ex.LU.outlineDimmest,", ").concat(ex.LU.outlineDimmer,")"),top:27,bottom:-10}],lineFuture:[nc.line,{borderRight:"1px dashed "+ex.LU.outlineDimmer,top:23,bottom:-20}],lineFutureFailClosed:[nc.line,{backgroundColor:ex.LU.outlineDimmest,top:19,bottom:-20}],lineFutureFailOpen:[nc.line,{borderRight:"1px dashed "+ex.LU.outlineDimmer,top:22,bottom:-18}],circlePastGreen:[nc.circlePast,B.wp.backgroundColor.accentPositiveDefault],circlePastRed:[nc.circlePast,B.wp.backgroundColor.accentNegativeDefault],circlePastGray:[nc.circlePast,B.wp.backgroundColor.outlineDimmer],circlePresent:[B.wp.backgroundColor.accentPrimaryStronger,{position:"absolute",top:20,left:0,width:7,height:7,borderRadius:"100%"}],circleFuture:{position:"absolute",top:12,left:-1,width:9,height:9},circleFutureFailClosed:[B.wp.backgroundColor.accentNegativeDefault,{position:"absolute",top:14,left:1,width:5,height:5,borderRadius:"100%",opacity:.6}]});function nd(e){var n,t;switch(e.type){case"pastSuccess":n=nu.linePast,t=(0,p.Y)(j.S,{css:nu.circlePastGreen});break;case"pastFail":n=nu.linePast,t=(0,p.Y)(j.S,{css:nu.circlePastRed});break;case"pastNeutral":n=nu.linePast,t=(0,p.Y)(j.S,{css:nu.circlePastGray});break;case"present":n=nu.linePresent,t=(0,p.Y)(j.S,{css:nu.circlePresent});break;case"future":n=nu.lineFuture,t=(0,p.Y)("svg",{viewBox:"0 0 9 9",css:nu.circleFuture,children:(0,p.Y)("circle",{cx:4.5,cy:4.5,r:4,fill:"none",stroke:ex.LU.outlineStrongest,strokeDasharray:"2 1"})});break;case"futureFailClosed":n=nu.lineFutureFailClosed,t=(0,p.Y)(j.S,{css:nu.circleFutureFailClosed});break;case"futureFailOpen":n=nu.lineFutureFailOpen,t=null}return(0,p.FD)(j.S,{css:nu.container,children:[(0,p.Y)(j.S,{css:n,"data-timeline-line":!0}),t]})}var np=t(39218),nf=t(11349);function nh(){var e=(0,I._)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return nh=function(){return e},e}var nm={},ng=(0,T.J1)(nh()),nv=t(51026),ny=t(68389),nw=t(50175);function nb(){var e=(0,I._)(["\n  fragment Domains2Repl on Repl {\n    id\n    org {\n      id\n    }\n  }\n"]);return nb=function(){return e},e}function nS(){var e=(0,I._)(["\n  fragment HostingDeploymentDomainsDomain on HostingDeploymentDomain {\n    id\n    status\n    state\n    domain\n    managed\n    timeCreated\n  }\n"]);return nS=function(){return e},e}function nY(){var e=(0,I._)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      title\n      apexProxy\n    }\n    domains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n  }\n  ","\n"]);return nY=function(){return e},e}function n_(){var e=(0,I._)(["\n  query Domains2Repl($id: String!) {\n    getRepl(id: $id) {\n      ...Domains2Repl\n    }\n  }\n  ","\n"]);return n_=function(){return e},e}function nA(){var e=(0,I._)(["\n  query HostingDeploymentDomains($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return nA=function(){return e},e}function nC(){var e=(0,I._)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          ...HostingDeploymentDomainsDomain\n        }\n      }\n    }\n  }\n  ","\n"]);return nC=function(){return e},e}var nk={},nx=(0,T.J1)(nb()),nD=(0,T.J1)(nS()),nE=(0,T.J1)(nY(),nD),nR=(0,T.J1)(n_(),nx),nI=(0,T.J1)(nA(),nE);function nT(e){var n=(0,s._)({},nk,e);return F.I(nI,n)}var nF=(0,T.J1)(nC(),nD);function nP(){var e=(0,I._)(["\n  fragment DeploymentSettingsAuthorizations on ReplAuthorizations {\n    addCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteDeployment {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentStatus(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentTier(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return nP=function(){return e},e}function nL(){var e=(0,I._)(["\n  query HostingDeploymentSettings($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        currentBuild {\n          id\n          provider\n          suspendedReason\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          machineJob {\n            ... on HostingBuildMachineJob {\n              failureNotifications\n            }\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return nL=function(){return e},e}function nU(){var e=(0,I._)(["\n  query HostingDeploymentSettingsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          ...DeploymentSettingsAuthorizations\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return nU=function(){return e},e}var nN={},nO=(0,T.J1)(nP()),nM=(0,T.J1)(nL(),nE,ny.yH);function nH(e){var n=(0,s._)({},nN,e);return F.I(nM,n)}var nB=(0,T.J1)(nU(),nO);function nz(e){var n=(0,s._)({},nN,e);return nv._(nB,n)}var nW=t(48958),nG=t(1684),nV=t(24140),nZ=t(31518),nj=t(63456),nq=t(94982),nK=function(e){var n=e.stage,t=e.activeStage,r=e.erroredStage,i=e.pausedStage;return n===r?(0,p.Y)(na.A,{alt:"error"}):n<t?(0,p.Y)(nV.A,{alt:"success"}):n===i?(0,p.Y)(nq.A,{alt:"paused"}):n===t?(0,p.Y)(nj.A,{alt:"current"}):(0,p.Y)(nZ.A,{alt:"waiting"})},n$=function(e){var n=e.stage,t=e.activeStage,r=e.erroredStage,i=e.pausedStage;return void 0===t?null:n===r?"negative":n<t?"positive":n===i?"orange":n===t?"primary":null},nJ=function(e){var n,t=e.stage,r=e.totalStagesWithTitle,i=e.activeStage,o=e.text,a=e.erroredStage,l=e.pausedStage,s=void 0!==i;return(0,p.Y)(f.Fragment,{children:(0,p.Y)(nG.a,{text:s?o:"",colorway:null!=(n=n$({stage:t,activeStage:i,erroredStage:a,pausedStage:l}))?n:void 0,variant:"filled",css:[s&&i<t&&!a?G.S.foregroundPulse():{},B.wp.border({color:ex.LU.backgroundDefault}),B.wp.overflow("hidden"),(0,C._)({position:"relative",flex:1,height:26,zIndex:r-t,":first-of-type":{paddingLeft:6,paddingRight:6},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}," span":B.wp.display.none},B.kL.min(400),{" span":B.wp.display.flex,":first-of-type":{paddingLeft:16,paddingRight:0}})],iconRight:s?(0,p.Y)(nK,{stage:t,activeStage:i,erroredStage:a,pausedStage:l}):void 0})},s&&i<=t&&!a?1:0)},nQ=t(76982),nX=t(66147),n0=t(10500),n1=t(8950),n2=t(67917),n4=t(64912),n5=t(45843),n3=t(71355),n7=t(73176),n6=h.ZU.Object({description:h.ZU.String(),name:h.ZU.Optional(h.ZU.String()),type:h.ZU.Optional(h.ZU.String()),before:h.ZU.Optional(h.ZU.String()),after:h.ZU.Optional(h.ZU.String()),file:h.ZU.Optional(h.ZU.Union([h.ZU.String(),h.ZU.Null()])),File:h.ZU.Optional(h.ZU.Object({$kind:h.ZU.String(),file:h.ZU.String()}))}),n8=h.ZU.Object({errors:n1.wIV.properties.errors,suggestions:h.ZU.Array(n6)}),n9={direction:"forward",state:{result:void 0,completed:!1},reducer:function(e,n){if((0,n3.VF)(e.contents.contents,"hostingDebugSummaryEventContents")&&e.state===n1.qOk.COMPLETE&&e.sender.type===n1.utd.AI){var t=(0,n3.QN)(e.contents.contents).result;if(n5.J(n8,t))return n.result=t,n.completed=e.state===n1.qOk.COMPLETE,!1}}},te=t(66297),tn=t(55100),tt=t(18069),tr=t(26176),ti=t(20775),to=t(64955),ta=t(32900),tl=t(15864),ts=(0,eO.x)({link:{color:ex.LU.foregroundDefault,textDecoration:"underline",":hover":{color:ex.LU.accentPrimaryStronger}},list:[{listStyle:"inside"}]});function tc(e){var n=e.provider,t=e.onViewApplicationLogs,r=(0,g.O6)();return(0,p.FD)(p.FK,{children:["Common issues for promote stage errors can be an error occurring while trying to run your run command, your application exiting unexpectedly, an error on your app server or a provisioning issue.",(0,p.Y)("br",{}),(0,p.Y)("br",{}),"Ways to debug:",(0,p.FD)("ul",{css:ts.list,children:[r?(0,p.Y)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,p.Y)("li",{children:"Make sure your repl runs in the Workspace."}),(0,p.FD)("li",{children:["View our"," ",(0,p.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:ts.link,onClick:function(){return(0,eU.Ae)({context:"troubleshooting_doc"})},children:"troubleshooting tips."})]}),n!==Y.Q0q.Static&&t?(0,p.FD)("li",{children:["Look for errors in your application's server logs.",(0,p.Y)(eX.$n,{text:"Logs",size:"small",iconLeft:(0,p.Y)(tl.A,{}),onClick:t,css:B.wp.display.inlineFlex})," "]}):null,(0,p.Y)("li",{children:"Look for errors in your deploy logs."})]})]})}function tu(){var e=(0,g.O6)();return(0,p.FD)(p.FK,{children:["Common issues for build stage errors can be an error occurring while trying to run your build command or an compilation issue with your application code.",(0,p.Y)("br",{}),(0,p.Y)("br",{}),"Ways to debug:",(0,p.FD)("ul",{css:ts.list,children:[e?(0,p.Y)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,p.Y)("li",{children:"Make sure your repl runs in the Workspace."}),(0,p.FD)("li",{children:["View our"," ",(0,p.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:ts.link,onClick:function(){return(0,eU.Ae)({context:"troubleshooting_doc"})},children:"troubleshooting tips."})]}),(0,p.Y)("li",{children:"Look for errors in your deploy logs."})]})]})}var td=t(38692),tp=t(41358),tf=t(78626),th=t(27789),tm=t(82450),tg=t(54781),tv=t(5142),ty=t(87978),tw=t(15149);function tb(){var e=(0,I._)(["\n      The deployment failed with the following error:\n\n\n      ```\n      ","\n      ```\n      Suggested fixes include:\n\n\n      ```\n      ","\n      ```\n      Can you apply the suggested fixes?\n    "],["\n      The deployment failed with the following error:\\n\\n\n      \\`\\`\\`\n      ","\n      \\`\\`\\`\n      Suggested fixes include:\\n\\n\n      \\`\\`\\`\n      ","\n      \\`\\`\\`\n      Can you apply the suggested fixes?\n    "]);return tb=function(){return e},e}var tS=[B.wp.cursor.pointer,B.wp.reset.button,B.wp.color.foregroundDimmest,B.wp.focusRing,B.wp.hover(B.wp.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],tY=(0,eO.x)({errorsSection:[B.wp.colorMixBg(ex.LU.accentNegativeDimmest,"transparent",.3),B.wp.color.accentNegativeStrongest],errorsSectionTitleText:[B.wp.color.foregroundDefault],errorsList:[B.wp.display.flex,B.wp.colWithGap(4),B.wp.pt(6),B.wp.pl(24),{listStyleType:"disc"}],suggestionsSectionAssistant:[B.wp.colorMixBg(ex.LU.tealDimmest,"transparent",.15),B.wp.border({direction:"top",color:ex.LU.outlineDimmer})],suggestionsSectionAgent:[B.wp.colorMixBg(ex.LU.blurpleDimmest,"transparent",.15),B.wp.border({direction:"top",color:ex.LU.outlineDimmer})],aiSuggestionsTitle:[B.wp.color.blurpleStrongest,B.wp.align.center],aiSuggestionsList:B.wp.pl(24),textButton:[tS]});function t_(e){var n,t,r,i,o,a,l,s,c,d,h,m,v,y,b,Y,_,A=e.title,C=e.debugSummary,k=e.view,x=e.provider,D=e.onViewBuildLogs,E=e.viewingBuildLogs,R=e.viewBuildLogsIcon,I=e.openFile,T=e.openPane,F=(0,tn.A)(),P=(0,g.i$)(),L=(0,n2.NC)(),U=(0,f.useCallback)(function(e){(0,te.Q)({error:e,context:"useHostingDebugSummary",extras:{replId:F,deploymentId:P,debugSummary:C,view:k,provider:x}})},[C,P,x,F,k]),N=(n=C.sessionId,t=(0,n2.NC)(),i=(r=(0,u._)((0,f.useState)(),2))[0],o=r[1],l=(a=(0,u._)((0,f.useState)(!0),2))[0],s=a[1],d=(c=(0,u._)((0,f.useState)(!1),2))[0],h=c[1],m=(0,f.useRef)(null),v=(0,f.useCallback)(function(e){s(!1),U(e),h(!0)},[U]),y=(0,n7.J2)(n?t.sessions.get(n):null),b=(0,f.useMemo)(function(){return null==y?void 0:y.reduce(n9,"global").result},[y]),(0,n7.q3)(b,{next:function(e){e.result&&e.completed&&(o(e.result),m.current&&(clearTimeout(m.current),m.current=null),s(!1))},error:function(e){v(e instanceof Error?e:Error(String(e)))}}),(0,f.useEffect)(function(){if(l&&y)return m.current=setTimeout(function(){v(Error("Debug summary event timed out while loading."))},3e4),function(){m.current&&(clearTimeout(m.current),m.current=null)}},[l,y,v]),{loading:l,error:d,debugResult:i}),O=N.loading,M=N.debugResult,H=N.error,B=(0,g.om)().listFiles,z=(0,u._)((0,f.useState)([]),2),W=z[0],G=z[1],V=(0,n2.dm)(),Z=V.assistantMode,j=V.getAssistantMessageModel,q=V.getAssistantMessageIntent,K=(0,to.T)({mode:Z,authz:(0,ti.L)().authorizations}),$=(Y=(0,w._)(function(){var e;return(0,S.YH)(this,function(n){switch(n.label){case 0:return[4,L.sessions.get(C.sessionId).once()];case 1:return[4,(e=n.sent()).updateSession({sessionType:n1.dF3.CHAT})];case 2:return n.sent(),[4,e.appendEvent({kind:"message",message:"Can you help me with this deployment issue?",modelType:j(K),intent:q()})];case 3:return n.sent(),T({type:"ghostwriterChat",data:{sessionId:C.sessionId}}),[2]}})}),function(){return Y.apply(this,arguments)}),J=(0,ta.c)({openPane:T}),Q=(_=(0,w._)(function(e){return(0,S.YH)(this,function(n){return M&&J((0,n0.A)(tb(),null==M?void 0:M.errors.join("\n"),null==M?void 0:M.suggestions.map(function(e){return"".concat(e.description,"\n")}).join("\n")),e),[2]})}),function(e){return _.apply(this,arguments)}),X=(0,f.useRef)(!1);return(0,f.useEffect)(function(){P&&M&&!X.current&&(X.current=!0,(0,eU.QH)("viewed",{view:k,debugSummary:C,debugResult:M,replId:F,deploymentId:P}),M.suggestions.some(function(e){return!!tx(e)})&&B().then(function(e){e.files&&G(e.files)}))},[M,k,C,F,P,B]),(0,p.Y)(tA,{title:A,debugSummary:C,debugResult:M,provider:x,viewingBuildLogs:E,viewBuildLogsIcon:R,loading:O,files:W,error:H,onViewBuildLogs:D,openFile:I,onDebugWithAssistant:$,onDebugWithAgent:Q})}function tA(e){var n=e.title,t=e.debugSummary,r=e.debugResult,i=e.provider,o=e.viewingBuildLogs,a=e.viewBuildLogsIcon,l=e.loading,s=e.files,c=e.error,u=e.onViewBuildLogs,d=e.openFile,f=e.onDebugWithAssistant,h=e.onDebugWithAgent,m=(0,n2.jt)();return(0,p.FD)(tp.ui,{elevated:!0,children:[(0,p.FD)(j.S,{css:tY.errorsSection,p:8,gap:4,children:[(0,p.FD)(j.S,{row:!0,gap:12,align:"center",justify:"space-between",children:[(0,p.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(na.A,{color:ex.LU.accentNegativeStronger}),(0,p.Y)(Z.EY,{css:tY.errorsSectionTitleText,multiline:!1,children:n})]}),(0,p.Y)(j.S,{row:!0,gap:0,children:"function"==typeof u?(0,p.Y)(j.S,{children:(0,p.FD)("button",{css:tY.textButton,onClick:u,children:[o?"Hide":"View"," logs"," ",(0,p.Y)(tD,{viewingBuildLogs:o,viewBuildLogsIcon:a})]})}):null})]}),(0,p.FD)(Z.EY,{children:[l?(0,p.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(nj.A,{}),(0,p.Y)(Z.EY,{children:"Analyzing error, generating suggestions…"})]}):(0,p.Y)(p.FK,{children:r?(0,p.FD)(p.FK,{children:[(0,p.Y)(Z.EY,{children:"Your deployment attempt had the following errors:"}),(0,p.Y)("ul",{css:tY.errorsList,children:r.errors.map(function(e){return(0,p.Y)("li",{children:e},e)})})]}):null}),c?(0,p.FD)(p.FK,{children:[(0,p.FD)(Z.EY,{children:["An error occurred while loading AI generated suggestions. Please try deploying again or follow the common debugging steps."," "]}),t.type===Y.UfI.DeploymentBuildError?(0,p.Y)(tu,{}):null,t.type===Y.UfI.DeploymentPromotionError?(0,p.Y)(tc,{provider:i}):null]}):null]})]}),!l&&r?(0,p.Y)(j.S,{css:m?tY.suggestionsSectionAgent:tY.suggestionsSectionAssistant,children:(0,p.FD)(j.S,{p:8,gap:8,children:[m?(0,p.Y)(tk,{onDebugWithAgent:h}):(0,p.Y)(tC,{onDebugWithAssistant:f}),(0,p.Y)("ol",{css:tY.aiSuggestionsList,children:r.suggestions.map(function(e,n){return(0,p.Y)(tR,{suggestion:e,files:s,openFile:d},"".concat(t.id,"-").concat(n))})})]})}):null]})}function tC(e){var n=e.onDebugWithAssistant;return(0,p.FD)(j.S,{css:tY.aiSuggestionsTitle,row:!0,gap:8,children:[(0,p.Y)(tv.A,{}),(0,p.FD)(Z.EY,{multiline:!1,style:{flex:"1 1 auto",color:ex.LU.tealStrongest},children:[n4.BP," suggestions"]}),(0,p.Y)(eX.$n,{size:"small",iconLeft:(0,p.Y)(ty.A,{}),colorway:"teal",text:"Debug with ".concat(n4.BP),onClick:n})]})}function tk(e){var n=e.onDebugWithAgent,t=(0,tt.hT)()===n1.g32.AGENT_STATE_RUNNING;return(0,p.FD)(j.S,{css:tY.aiSuggestionsTitle,row:!0,gap:8,children:[(0,p.Y)(tg.A,{}),(0,p.FD)(Z.EY,{multiline:!1,style:{flex:"1 1 auto",color:ex.LU.blurpleStrongest},children:[n4.g$," suggestions"]}),(0,p.Y)(tf.m_,{tooltip:"".concat(n4.g$," is running, please wait until it finishes its current work"),isDisabled:!t,children:(0,p.Y)(tr.C,{onSendAgentMessage:n,disabled:t,buttonText:"Debug with ".concat(n4.g$),menuPrefix:"Debug",colorway:"blurple"})})]})}function tx(e){var n,t,r,i;return"File"in e&&(null==(n=e.File)?void 0:n.file)!=="null"&&(null==(t=e.File)?void 0:t.file)!==""?(null==(r=e.File)?void 0:r.file.replace("./",""))||void 0:"file"in e&&"null"!==e.file&&""!==e.file&&(null==(i=e.file)?void 0:i.replace("./",""))||void 0}function tD(e){var n=e.viewingBuildLogs,t=e.viewBuildLogsIcon;return t||(n?(0,p.Y)(tm.A,{}):(0,p.Y)(th.A,{}))}var tE=(0,eO.x)({self:{"[data-accordion-header]":[B.wp.align.start,B.wp.flex.growAndShrink(1),B.wp.rowWithGap(4)]},headerInner:[B.wp.flex.growAndShrink(1),B.wp.align.baseline,B.wp.rowWithGap(4)],description:[B.wp.textAlign.left,B.wp.color.foregroundDimmer,B.wp.rowWithGap(8),B.wp.flex.growAndShrink(1),B.wp.justify.spaceBetween],interactiveDescription:[tS,B.wp.textAlign.left,B.wp.color.foregroundDimmer,B.wp.rowWithGap(8),B.wp.flex.growAndShrink(1),B.wp.justify.spaceBetween],body:[B.wp.border(),B.wp.borderRadius(),B.wp.mt(4),B.wp.mb(8),B.wp.overflow("hidden"),B.wp.font.code,B.wp.fontSize("small"),{lineHeight:ex.LU.lineHeightSmall}],before:[B.wp.color.accentNegativeStrongest,B.wp.colorMixBg(ex.LU.accentNegativeDimmest,"transparent",.3),B.wp.px(6),B.wp.py(2)],after:[B.wp.color.accentPositiveStrongest,B.wp.colorMixBg(ex.LU.accentPositiveDimmest,"transparent",.3),B.wp.px(6)],fileLinkButton:[tS,B.wp.fontSize("small"),B.wp.cursor.pointer]});function tR(e){var n=e.suggestion,t=e.files,r=e.openFile,i=(0,f.useRef)(tx(n)),o=(0,u._)((0,f.useState)(),2),a=o[0],l=o[1];(0,f.useEffect)(function(){if(i.current&&!a){var e=!0,n=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done);e=!0)if(o.value===i.current)return void l(i.current)}catch(e){n=!0,r=e}finally{try{e||null==s.return||s.return()}finally{if(n)throw r}}}},[t,a]);var s=(null==n?void 0:n.after)&&(null==n?void 0:n.after)!=="",c=(null==n?void 0:n.before)&&(null==n?void 0:n.before)!=="";return s||c?(0,p.Y)("li",{css:tE.self,children:(0,p.Y)(td.A,{toggleOn:"chevron",chevron:"none",headerContent:function(e){var t=e.isExpanded,i=e.toggle;return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{css:tE.headerInner,children:[(0,p.FD)("button",{css:tE.interactiveDescription,onClick:i,children:[(0,p.Y)(Z.EY,{maxLines:t?void 0:1,style:{color:"inherit"},children:n.description})," "]}),a?(0,p.Y)("button",{css:tE.fileLinkButton,onClick:function(e){e.stopPropagation(),r({path:a})},children:(0,p.FD)(j.S,{row:!0,gap:4,align:"center",css:B.wp.cursor.pointer,children:[a,(0,p.Y)(tw.A,{size:12})]})}):null]}),(0,p.Y)(eD.K0,{alt:"Show suggestion",onClick:i,children:t?(0,p.Y)(tm.A,{}):(0,p.Y)(th.A,{})})]})},headerProps:{"data-accordion-header":""},children:(0,p.FD)(j.S,{css:tE.body,children:[c?(0,p.Y)(j.S,{css:tE.before,children:(0,p.Y)("pre",{children:n.before})}):null,s?(0,p.Y)(j.S,{css:tE.after,children:(0,p.Y)("pre",{children:n.after})}):null]})})}):(0,p.Y)("li",{css:tE.self,children:(0,p.FD)(j.S,{css:tE.headerInner,children:[(0,p.FD)(j.S,{css:tE.description,children:[(0,p.Y)(Z.EY,{style:{color:"inherit"},children:n.description})," "]}),a?(0,p.Y)("button",{css:tE.fileLinkButton,onClick:function(e){e.stopPropagation(),r({path:a})},children:(0,p.FD)(j.S,{row:!0,gap:4,align:"center",children:[a,(0,p.Y)(tw.A,{size:12})]})}):null]})})}function tI(e){var n=e.currentStatus,t=e.provider,r=e.logs,i=e.viewBuildLogs,o=e.debugSummary,a=e.openFile,l=e.openPane,s=e.onViewBuildLogs,c=e.onViewApplicationLogs;if((0,g.mj)().hasDebugSummariesAuthorization&&o){var u=n===Y.nHS.Building?"Build failed":"Promotion failed";return(0,p.Y)(t_,{title:u,debugSummary:o,view:_.P.DeploymentInProgress,provider:t,openFile:a,openPane:l})}return n===Y.nHS.Building?(0,p.Y)(tO,{provider:t,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:s}):n===Y.nHS.Promoting?(0,p.Y)(tN,{provider:t,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:s,onViewApplicationLogs:c}):null}function tT(e){var n=e.currentStatus,t=e.provider,r=e.debugSummary,i=e.openFile,o=e.openPane,a=e.onViewApplicationLogs;return(0,g.mj)().hasDebugSummariesAuthorization&&r?(0,p.Y)(t_,{title:"Deployment failed",debugSummary:r,view:"deploy_history_logs",provider:t,openFile:i,openPane:o}):n===Y.nHS.Building?(0,p.Y)(tO,{provider:t,openFile:i}):n===Y.nHS.Promoting?(0,p.Y)(tN,{provider:t,openFile:i,onViewApplicationLogs:a}):null}var tF=(0,eO.x)({self:[B.wp.borderRadius(4),B.wp.overflow("hidden"),B.wp.border({color:ex.LU.outlineDimmer}),B.wp.mb(6)]});function tP(e){var n=e.title,t=e.debugSummary,r=e.provider,i=e.openFile,o=e.openPane,a=e.onViewBuildLogs;return(0,p.Y)(j.S,{css:tF.self,children:(0,p.Y)(t_,{title:n,debugSummary:t,view:_.P.Deployment,provider:r,onViewBuildLogs:a,viewBuildLogsIcon:(0,p.Y)(tl.A,{}),openFile:i,openPane:o})})}var tL=(0,eO.x)({xtermContainer:[B.wp.display.flex,B.wp.pt(12),B.wp.pl(16),B.wp.overflow("hidden"),B.wp.borderRadius(4,4,0,0)],xterm:[B.wp.width("100%"),B.wp.maxWidth("100%"),B.wp.height(200)],xtermButton:B.wp.borderRadius(0,0,4,4)});function tU(e){var n=e.title,t=e.description,r=e.logs,i=e.viewBuildLogs,o=e.onViewBuildLogs,a=e.openFile,l=(0,nX.V)(),s=(0,g.om)(),c=(0,u._)((0,nQ.A)({openFile:a,listFiles:s.listFiles}),2),d=c[0],h=c[1],m=(0,f.useRef)(r?r.slice(-5):[]);return(0,f.useEffect)(function(){m.current.length&&m.current.forEach(function(e){null==d||d.write(e)})},[d]),(0,p.FD)(tp.ui,{elevated:!0,p:12,gap:12,children:[(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(na.A,{color:ex.LU.accentNegativeStronger}),(0,p.Y)(Z.EY,{multiline:!1,children:n})]}),(0,p.Y)(Z.EY,{children:t})]}),void 0===i||i?null:(0,p.FD)(j.S,{children:[(0,p.Y)(j.S,{css:tL.xtermContainer,style:{backgroundColor:null==l?void 0:l.background},children:(0,p.Y)(j.D.div,{css:tL.xterm,ref:h})}),(0,p.Y)(eX.$n,{text:"View all",iconLeft:(0,p.Y)(eR.A,{}),onClick:function(){return null==o?void 0:o()},css:tL.xtermButton})]})]})}function tN(e){return(0,p.Y)(tU,(0,s._)({title:"Your app failed to promote",description:(0,p.Y)(tc,{provider:e.provider,onViewApplicationLogs:e.onViewApplicationLogs})},e))}function tO(e){return(0,p.Y)(tU,(0,s._)({title:"Your app failed to build",description:(0,p.Y)(tu,{})},e))}function tM(e){return(0,p.Y)(tU,(0,s._)({title:"This build's deploy logs have expired",description:(0,p.Y)(p.FK,{children:"No information was found for this build. Deploy logs expire after 30 days."})},e))}var tH=t(66169);function tB(e){var n=e.onClick,t=e.loading;return(0,p.Y)(eX.$n,{text:"Approve and deploy",iconRight:(0,p.Y)(ni.A,{}),colorway:"primary",size:"small",onClick:n,loading:t})}function tz(e){var n=e.open,t=e.onClick;return(0,p.Y)(eD.K0,{alt:n?"Hide details":"Show details",onClick:t,children:n?(0,p.Y)(tm.A,{}):(0,p.Y)(th.A,{})})}function tW(e){var n=e.state,t=e.canExpand,r=e.expandedToggle,i=e.setExpandedToggle,o=e.onApproveAndDeploy;return(0,p.FD)(j.S,{row:!0,grow:!0,align:"center",justify:"end",gap:8,children:[n.type===nW.XB.GeneratingDiffStatements&&o&&n.completed?(0,p.Y)(tB,{onClick:function(){return o(n.statementsToExecute)},loading:n.approved}):null,t?(0,p.Y)(tz,{open:r,onClick:function(){return i(!r)}}):null]})}var tG=t(51385),tV=t.n(tG);function tZ(e){var n,t=e.loading,r=e.completed,i=ex.LU.blueDimmest,o=ex.LU.blueStrongest;return r&&(i=ex.LU.accentPositiveDimmest,o=ex.LU.accentPositiveStrongest,n=(0,p.Y)(nV.A,{})),t&&(i=ex.LU.accentPrimaryDimmest,o=ex.LU.accentPrimaryStrongest,n=(0,p.Y)(nj.A,{})),(0,p.Y)("div",{clsx:tV().stageIcon,style:{background:i,color:o},children:n})}var tj=t(87694),tq=t.n(tj);function tK(e){var n,t=e.state,r=e.onApproveAndDeploy,i=t.type===nW.XB.GeneratingDiffStatements,o=(0,u._)((0,f.useState)(i),2),a=o[0],l=o[1],s=t.type===nW.XB.GeneratingDiffStatements&&t.completed,c=s&&a;return(0,p.FD)(tp.ui,{clsx:tq().stage,elevated:!0,p:8,children:[(0,p.FD)(j.S,{clsx:(n={},(0,C._)(n,tq().stageHeader,c),(0,C._)(n,tq().isExpanded,!t.completed||c),n),row:!0,gap:8,align:"center",justify:"space-between",wrap:!t.completed,shrink:!0,children:[(0,p.FD)(j.S,{row:!0,gap:8,align:"center",shrink:!0,children:[(0,p.Y)(tZ,{loading:t.running,completed:t.completed}),(0,p.Y)(Z.EY,{color:t.completed?"dimmer":"default",shrink:!0,children:function(e){var n=e.type,t=e.completed;switch(n){case nW.XB.FoundDiff:return"Development database changes detected";case nW.XB.GeneratingDiffStatements:return t?"Generated migrations to apply to production database":"Generating database migrations..."}}({type:t.type,completed:t.completed})})]}),(0,p.Y)(tW,{onApproveAndDeploy:r,state:t,canExpand:s,expandedToggle:a,setExpandedToggle:l})]}),c?(0,p.FD)(j.S,{gap:8,children:[(0,p.Y)(Z.EY,{color:"dimmer",variant:"small",children:t.infoToPrint}),(0,p.Y)(j.S,{clsx:tq().stageCode,gap:4,children:(0,p.Y)(tH.A,{code:t.statementsToExecute.join("\n"),fontSize:12,lineNumbers:!0})})]}):null]})}var t$=(0,eO.x)({self:[B.wp.borderRadius(0,0,4,4),B.wp.overflow("hidden")],text:[B.wp.display.flex,B.wp.py(12),B.wp.px(16)]});function tJ(){var e=(0,nW.cc)().state,n=(0,g.Tp)().approveAndDeployDatabaseChanges;return(0,p.Y)(j.S,{css:t$.self,children:(0,p.Y)(j.S,{css:t$.text,children:(0,p.Y)(j.S,{gap:8,wrap:!0,children:(0,b._)(e.stages).map(function(t,r){var i=(0,u._)(t,2),o=(i[0],i[1]);return(0,p.Y)(tK,{state:o,onApproveAndDeploy:function(t){return n({prepareDatabaseStateId:e.id,sqlStatementsToExecute:t})}},r)})})})})}var tQ=t(30124),tX=[{id:0,title:"Provision",statusType:Y.nHS.Pending},{id:1,title:"Build",statusType:Y.nHS.Building},{id:2,title:"Bundle",statusType:Y.nHS.Running},{id:3,title:"Promote",statusType:Y.nHS.Promoting},{id:4,statusType:Y.nHS.Success}],t0=tX.filter(function(e){return"title"in e}),t1=function(e){return tX.find(function(n){return n.statusType===e})},t2=(0,eO.x)({base:{borderRadius:ex.LU.borderRadiusDefault,paddingLeft:6,paddingRight:6,height:24}}),t4=[B.wp.borderRadius(),{border:"1px solid ".concat(ex.LU.outlineDimmest)}],t5=(0,eO.x)({container:t4,header:[B.wp.width("100%")],headerLeft:[B.wp.align.baseline,B.wp.flex.shrink(1)],started:[B.wp.rowWithGap(6),B.wp.flex.growAndShrink(1),B.wp.justify.end,B.wp.color.foregroundDimmest],cancel:[t2.base,{'&[data-cancelable="true"]':{opacity:1,width:"auto"},'&[data-cancelable="false"]':{opacity:0,width:0}}],stages:[{zIndex:0}],bottom:[B.wp.borderRadius(0,0,4,4),B.wp.overflow("hidden")],logsOpen:[B.wp.overflow("hidden"),B.wp.height("auto")],logsClosed:[B.wp.overflow("hidden"),B.wp.height(0)],xtermContainer:[B.wp.display.flex,B.wp.pt(12),B.wp.pl(16),B.wp.overflow("hidden")],xterm:[B.wp.width("100%"),B.wp.maxWidth("100%"),B.wp.height(340)],textButton:[B.wp.cursor.pointer,B.wp.reset.button,B.wp.color.foregroundDimmest,B.wp.focusRing,B.wp.hover(B.wp.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}]}),t3=function(e){var n,t,r,i,o=(r={variables:{replId:(0,tn.A)(),provider:null!=(n=e.provider)?n:Y.Q0q.CloudRun},skip:!e.provider},i=(0,s._)({},nN,r),F.I(nB,i)).data,a=(null==o?void 0:o.getRepl.__typename)==="Repl"?o.getRepl.authorizations.editDeploymentStatus:void 0,l=null!=(t=null==a?void 0:a.isAuthorized)&&t;return(0,p.FD)(j.S,{p:16,pt:12,gap:12,children:[(0,p.FD)(j.S,{css:t5.header,row:!0,gap:8,justify:"space-between",children:[(0,p.FD)(j.S,{css:t5.headerLeft,row:!0,gap:8,children:[(0,p.Y)(Z.EY,{variant:"subheadDefault",multiline:!1,children:"Deploying"}),e.timeStarted&&e.userDisplayName?(0,p.FD)(Z.EY,{css:t5.started,multiline:!1,maxLines:1,children:["Started ".concat((0,nf.A)(new Date(e.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,p.Y)("span",{children:e.userDisplayName})]}):null,(0,p.Y)(tf.m_,{isDisabled:l,tooltip:null==a?void 0:a.message,children:(0,p.Y)(eX.$n,{size:"small",text:"Cancel",css:t5.cancel,onClick:e.onCancel,iconRight:e.isCanceling?(0,p.Y)(nj.A,{}):void 0,disabled:e.isCanceling||!l,"data-cancelable":e.onCancel?"true":"false"})})]}),(0,p.Y)(j.S,{row:!0,gap:6,justify:"end",children:e.onViewBuildLogs?(0,p.FD)("button",{css:t5.textButton,onClick:e.onViewBuildLogs,children:[e.viewBuildLogs?"Hide":"View"," logs"," ",e.viewBuildLogs?(0,p.Y)(tm.A,{}):(0,p.Y)(th.A,{})]}):null})]}),(0,p.Y)(j.S,{css:t5.stages,grow:!0,row:!0,children:t0.map(function(n){var t=n.id,r=n.title;return(0,p.Y)(nJ,{stage:t,totalStagesWithTitle:t0.length,text:r,activeStage:e.activeStage,pausedStage:e.pausedStage,erroredStage:e.erroredStage},t)})})]})},t7=function(e){var n=(0,v.u)();return n===y.d.Preparing?(0,p.Y)(j.S,{css:t5.container,children:(0,p.Y)(t3,{})}):n===y.d.PreparingDatabase?(0,p.Y)(t6,{}):(0,p.Y)(t8,(0,s._)({},e))};function t6(){var e=t1(Y.nHS.Pending),n=(0,nW.jp)()?null==e?void 0:e.id:void 0;return e?(0,p.FD)(j.S,{css:t5.container,children:[(0,p.Y)(t3,{activeStage:e.id,pausedStage:n}),(0,p.FD)(j.S,{css:t5.bottom,children:[(0,p.Y)(tQ.a,{}),(0,p.Y)(tJ,{})]})]}):null}var t8=function(e){var n,t,r,i,o,a,l,c,d,h,m,v,y,_,A=e.initialBuild,C=e.viewBuildLogsOnLoad,k=e.onViewLogs,x=e.onCanceled,D=e.onError,E=e.openFile,R=e.openPane,I=(0,g.UM)(),T=(0,g.tq)(),P=T?{id:T.id,status:T.status,provider:T.provider,timeStarted:T.timeCreated,userDisplayName:T.user.displayName,debugSummary:T.debugSummary}:void 0,L=(0,f.useRef)(A||P),U=(n={skip:!(null==(i=L.current)?void 0:i.id),variables:{input:{buildId:null!=(_=null==(o=L.current)?void 0:o.id)?_:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null==e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":D(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var n=e.hostingBuildDeployActionHistory.results;if(n&&n.length>0){var t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;switch(c.__typename){case"HostingBuildDeployLogAction":t.push(c.log);break;case"HostingBuildDeployStatusAction":r.push(c)}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}eo({type:"setHistory",payload:t});var u=!0,d=!1,p=void 0;try{for(var f,h=r[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;ea(m.status,m.debugSummary)}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}break;default:D("Unexpected typename.")}},onError:function(e){D(e.message)}},t=(0,s._)({},nm,n),F.I(ng,t)),N=U.loading,O=U.refetch;(0,g.kW)(function(e){switch(e.__typename){case"HostingBuildDeployLogAction":eo({type:"addLog",payload:e.log});break;case"HostingBuildDeployStatusAction":ea(e.status,e.debugSummary)}});var M=(0,u._)((0,f.useState)(L.current?null==(a=t1(L.current.status))?void 0:a.id:void 0),2),H=M[0],B=M[1],z=(0,u._)((0,f.useState)((null==(l=L.current)?void 0:l.status)==="failed"?null==(c=t1(null==(d=L.current)?void 0:d.status))?void 0:c.id:void 0),2),W=z[0],G=z[1],V=(0,u._)((0,f.useState)((null==(h=L.current)?void 0:h.debugSummary)||void 0),2),Z=V[0],q=V[1],K=(0,u._)((0,f.useState)(!1),2),$=K[0],J=K[1],Q=(0,g.om)(),X=(0,u._)((0,nQ.A)({openFile:E,listFiles:Q.listFiles}),2),ee=X[0],en=X[1],et=(0,nX.V)(),er=(0,u._)((0,f.useReducer)(function(e,n){switch(n.type){case"setHistory":return ee&&ee.clear(),{allLogs:(0,b._)(n.payload).concat((0,b._)(e.allLogs))};case"addLog":return{allLogs:(0,b._)(e.allLogs).concat([n.payload]),recentLogs:[n.payload]};case"refetchLogs":return ee&&ee.clear(),N||O(),{allLogs:[]}}},{allLogs:[]}),2),ei=er[0],eo=er[1],ea=function(e,n){if(e===Y.nHS.Failed)G(H),n&&q(n);else{var t=t1(e);if(!t)return;B(t.id)}},el=(r=(0,w._)(function(){return(0,S.YH)(this,function(e){switch(e.label){case 0:return J(!0),[4,I()];case 1:return e.sent(),x(),[2]}})}),function(){return r.apply(this,arguments)}),es=(0,u._)((0,f.useState)(C||!1),2),ec=es[0],eu=es[1],ed=function(){eu(!ec),ec||(0,eU.Ae)({context:"deploy_progress_logs"})};(0,f.useEffect)(function(){(0,eU.Ae)({context:"deploy_progress"})},[]),(0,f.useEffect)(function(){var e;(null==(e=L.current)?void 0:e.id)&&T&&T.id!==L.current.id&&(L.current={id:T.id,status:T.status,provider:T.provider,timeStarted:T.timeCreated,userDisplayName:T.user.displayName,debugSummary:T.debugSummary},B(void 0),G(void 0),eo({type:"refetchLogs"}))},[T,null==(m=L.current)?void 0:m.id,O]),(0,f.useEffect)(function(){var e;void 0!==H&&(null==(e=L.current)?void 0:e.status)==="failed"&&G(H)},[H,null==(v=L.current)?void 0:v.status]),(0,f.useEffect)(function(){if(ee){if(ei.recentLogs)return void ei.recentLogs.forEach(function(e){return ee.write(e)});ei.allLogs.forEach(function(e){return ee.write(e)})}},[ei,ee]);var ep=null===(y=tX.find(function(e){return e.id===H}))||void 0===y?void 0:y.statusType,ef=ep!==Y.nHS.Success&&!W;return L.current?(0,p.FD)(j.S,{css:t5.container,children:[(0,p.Y)(t3,{onCancel:ef?el:void 0,isCanceling:$,onViewBuildLogs:ed,viewBuildLogs:ec,provider:L.current.provider,timeStarted:L.current.timeStarted,userDisplayName:L.current.userDisplayName,activeStage:H,erroredStage:W}),(0,p.FD)(j.S,{css:t5.bottom,children:[(0,p.FD)(j.S,{css:ec?t5.logsOpen:t5.logsClosed,children:[(0,p.Y)(tQ.a,{}),(0,p.Y)(j.S,{css:t5.xtermContainer,style:{backgroundColor:null==et?void 0:et.background},children:(0,p.Y)(j.D.div,{css:t5.xterm,ref:en})})]}),W&&ep?(0,p.FD)(p.FK,{children:[(0,p.Y)(tQ.a,{}),(0,p.Y)(tI,{currentStatus:ep,provider:L.current.provider,debugSummary:Z,logs:ei.allLogs,viewBuildLogs:ec,openFile:E,openPane:R,onViewBuildLogs:ed,onViewApplicationLogs:k})]}):null]})]}):null},t9=t(37981),re=t(60666),rn=t(3480),rt=function(e){return e.Current="current",e}(rt||{}),rr=(0,C._)({},"current",{icon:(0,p.Y)(function(e){var n=e.color;return(0,p.Y)(j.S,{css:[{textTransform:"capitalize"}],align:"center",row:!0,gap:8,children:(0,p.Y)(j.S,{tag:"span",css:[B.wp.width("8px"),B.wp.height("8px"),B.wp.borderRadius("full"),{backgroundColor:n,boxShadow:"0 0 12px ".concat(n)}]})})},{color:ex.LU.blueStronger}),text:"Current deployment"}),ri=j.D.div,ro=function(e){var n=e.activityLogItem.type,t=(0,u._)((0,f.useState)(!1),2),r=t[0],i=t[1],o=(0,u._)((0,f.useState)(!1),2),a=o[0],l=o[1],s=(0,f.useRef)(!1);(0,f.useEffect)(function(){s.current=!0;var e=setTimeout(function(){l(r)},200);return function(){clearTimeout(e)}},[r]);var c=n in rr&&rr[n];if(!c)return null;var d=c.icon,h=c.text;return(0,p.Y)(j.S,{p:8,onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:(0,p.FD)(rn.A,{isOpen:a,onClickOutside:function(){return l(!1)},padding:8,children:[(0,p.Y)(ri,{css:B.wp.cursor.pointer,children:d}),(0,p.Y)(j.S,{css:[B.wp.maxWidth(240)],children:(0,p.Y)(Z.EY,{children:h})})]})})},ra=t(41930),rl=t(85051),rs=t(22422),rc=t(91506),ru=(0,eO.x)({rollbackPillSpan:[rl.b.listItem,B.wp.display.inlineBlock,B.wp.px(6),B.wp.fontSize(ex.LU.fontSizeDefault),B.wp.color.foregroundDimmer,B.wp.borderRadius(16),{whiteSpace:"nowrap"}],longId:[B.wp.maxWidth(260)],shortId:[B.wp.pl(4),B.wp.color.foregroundDimmer],buildIdColumn:[B.wp.flex.row,B.wp.minWidth(85)],pillSpanActivityLog:[B.wp.pl(16)],displayName:[B.wp.fontWeight.medium,B.wp.pl(6)],formattedText:[B.wp.pl(4),B.wp.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]}),rd=function(e){var n=e.build,t=n.id.slice(0,8),r=(0,u._)((0,f.useState)(!1),2),i=r[0],o=r[1],a=(0,u._)((0,f.useState)(!1),2),l=a[0],s=a[1],c=(0,f.useRef)(!1);return(0,f.useEffect)(function(){c.current=!0;var e=setTimeout(function(){s(i)},200);return function(){clearTimeout(e)}},[i]),(0,p.Y)("span",{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:(0,p.FD)(rn.A,{isOpen:l,onClickOutside:function(){return s(!1)},padding:8,children:[(0,p.Y)("span",{css:[rl.b.listItem,B.wp.display.inlineBlock,B.wp.px(2),B.wp.py(0),B.wp.borderRadius(4)],children:t}),(0,p.Y)(j.S,{css:[B.wp.maxWidth(260)],children:(0,p.Y)(Z.EY,{variant:"small",children:n.id})})]})})},rp=(r={},(0,C._)(r,Y.Eyb.Deploy,"deployed"),(0,C._)(r,Y.Eyb.Rollback,"rolled back"),(0,C._)(r,Y.Eyb.Fail,"failed to deploy"),r),rf=function(e){var n,t=e.build,r=e.background,i=null==(n=t.rollbackSourceBuildId)?void 0:n.slice(0,8);r=null!=r?r:"higher";var o=(0,u._)((0,f.useState)(!1),2),a=o[0],l=o[1],s=(0,u._)((0,f.useState)(!1),2),c=s[0],d=s[1],h=(0,f.useRef)(!1);return(0,f.useEffect)(function(){h.current=!0;var e=setTimeout(function(){d(a)},200);return function(){clearTimeout(e)}},[a]),(0,p.Y)("span",{onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},children:(0,p.FD)(rn.A,{isOpen:c,onClickOutside:function(){return d(!1)},padding:8,children:[(0,p.FD)(tp.ui,{background:r,css:ru.rollbackPillSpan,children:[(0,p.Y)(rc.A,{size:12}),(0,p.Y)(Z.EY,{css:ru.shortId,children:i})]}),(0,p.Y)(j.S,{css:ru.longId,children:(0,p.Y)(Z.EY,{variant:"small",children:t.rollbackSourceBuildId})})]})})},rh=function(e){var n=e.activityLogItem,t=n.type,r=n.build,i=e.formattedTime,o=r.user.displayName,a=t in rp&&rp[t];if(!a)return null;var l=r.rollbackSourceBuildId;return(0,p.FD)(j.S,{pb:4,align:"center",row:!0,children:[(0,p.Y)("span",{css:ru.buildIdColumn,children:(0,p.Y)(rd,{build:r})}),(0,p.Y)(rs.e,{src:r.user.image||null,size:16,username:r.user.username||"",fullName:r.user.fullName||""}),(0,p.Y)("span",{css:ru.displayName,children:o}),(0,p.FD)("span",{css:ru.formattedText,children:[" "+a," "+i]}),l?(0,p.Y)("span",{css:ru.pillSpanActivityLog,children:(0,p.Y)(rf,{build:r})}):null," "]})},rm=function(e){var n=e.activityLogItem,t=n.type,r=n.build,i=e.formattedTime,o=r.user.displayName,a=t in rp&&rp[t];if(!a)return null;var l=r.rollbackSourceBuildId;return(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{row:!0,align:"center",children:[(0,p.Y)(rd,{build:r}),l?(0,p.Y)("span",{css:ru.pillSpanActivityLog,children:(0,p.Y)(rf,{build:r})}):null]}),(0,p.FD)(j.S,{py:4,row:!0,align:"center",children:[(0,p.Y)(rs.e,{src:r.user.image||null,size:24,username:r.user.username||"",fullName:r.user.fullName||""}),(0,p.Y)("span",{css:ru.displayName,children:o}),(0,p.FD)("span",{css:ru.formattedText,children:[" "+a," "+i]})]})]})},rg=function(e){var n=e.activityLogItem,t=(0,ra.a)(),r=new Date(n.build.timeCreated),i=Date.now(),o=(0,nf.A)(r,i,{addSuffix:!0});return(0,p.Y)(p.FK,{children:t?(0,p.Y)(rm,{activityLogItem:n,formattedTime:o}):(0,p.Y)(rh,{activityLogItem:n,formattedTime:o})})},rv=t(37582),ry=t(53307),rw=t(69554),rb=(0,eO.x)({title:[B.wp.fontSize(24),B.wp.pt(32)],subtitle:[B.wp.pt(6)],accordionContainer:[B.wp.pt(24)],accordion:[B.wp.backgroundColor.backgroundHigher,B.wp.borderRadius(6)],accordionItem:[B.wp.px(8),B.wp.py(2),B.wp.rowWithGap(8),B.wp.align.center],tableContainer:[B.wp.backgroundColor.backgroundDefault,B.wp.border({color:ex.LU.backgroundHigher}),B.wp.borderRadius(0,0,6,6),B.wp.px(12),B.wp.pb(6)],changedSecretsDisclaimer:[B.wp.py(8)],table:[B.wp.width("100%"),{".tr":{display:"flex",width:"100%",flexDirection:"row"},".th":{flexDirection:"row",borderBottom:"1px solid ".concat(ex.LU.outlineDimmest),color:ex.LU.foregroundDimmer},".td":{flexDirection:"row"}}],cell:[B.wp.fontWeight.normal,B.wp.fontSize(ex.LU.fontSizeDefault),B.wp.py(8),B.wp.display.flex,B.wp.flex.row,B.wp.align.center,B.wp.justify.spaceBetween],secretValue:[B.wp.pl(4),B.wp.color.foregroundDefault],noValue:[B.wp.pl(4),B.wp.color.foregroundDimmest],shortId:[B.wp.display.inlineBlock,B.wp.py(0),B.wp.borderRadius(4)],longId:[B.wp.maxWidth(260)]}),rS=function(e){var n=e.buildSecret,t=e.shortSecretLength,r=n.slice(0,void 0===t?8:t),i=(0,u._)((0,f.useState)(!1),2),o=i[0],a=i[1],l=(0,u._)((0,f.useState)(!1),2),s=l[0],c=l[1],d=(0,f.useRef)(!1);return((0,f.useEffect)(function(){d.current=!0;var e=setTimeout(function(){c(o)},200);return function(){clearTimeout(e)}},[o]),r.length===n.length)?(0,p.Y)("span",{children:r}):(0,p.Y)("span",{onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,p.FD)(rn.A,{isOpen:s,onClickOutside:function(){return c(!1)},padding:8,children:[(0,p.FD)("span",{css:rb.shortId,children:[r,"..."]}),(0,p.Y)(j.S,{css:rb.longId,children:(0,p.Y)(Z.EY,{variant:"small",children:n})})]})})};function rY(e){var n=e.secretKey,t=e.build1Secret,r=e.build2Secret,i=e.hideSecret,o=e.selectedSecretsMap,a=e.updateSecretsMap,l=(0,u._)((0,f.useState)(o.get(n)),2),s=l[0],c=l[1],d=function(e){var t=e.buildSecret;return(0,p.Y)("td",{className:"td",children:(0,p.FD)(j.S,{css:rb.cell,style:{justifyContent:"start"},children:[(0,p.Y)(rv.s,{id:n,value:null!=t?t:"",checked:s===t,onChange:function(){c(t),a({key:n,value:t})}}),t?(0,p.Y)("span",{css:rb.secretValue,children:i?"••••••••":(0,p.Y)(rS,{buildSecret:t})}):(0,p.Y)("span",{css:rb.noValue,children:"No Value"})]})})};return(0,p.FD)("tr",{children:[(0,p.Y)("td",{className:"td",children:(0,p.Y)(j.S,{css:rb.cell,className:"cell",children:n})}),(0,p.Y)(d,{buildSecret:t}),(0,p.Y)(d,{buildSecret:r})]})}var r_=function(e){var n=e.secretKey,t=e.secretValue,r=e.hideSecret;return(0,p.FD)("tr",{children:[(0,p.Y)("td",{className:"td",children:(0,p.Y)(j.S,{css:rb.cell,className:"cell",children:n})}),(0,p.Y)("td",{className:"td",children:(0,p.Y)("span",{css:rb.cell,className:"cell",children:r?"••••••••••••••••••••••••":(0,p.Y)(rS,{buildSecret:t,shortSecretLength:20})})})]})};let rA=function(e){var n=e.currentBuild,t=e.build,r=e.selectedSecretsMap,i=e.updateSecretsMap,o=(0,u._)((0,f.useState)(!1),2),a=o[0],l=o[1],s=(0,u._)((0,f.useState)(!1),2),c=s[0],d=s[1],h=(0,u._)((0,f.useState)(!0),2),m=h[0],g=h[1],v=(0,u._)((0,f.useState)(!0),2),y=v[0],w=v[1],b=(0,u._)((0,f.useState)(),2),S=b[0],Y=b[1];return((0,f.useEffect)(function(){var e,r,o,a,l,s,c,u,d,p=(r=(e={build1Secrets:n.envVars,build2Secrets:t.envVars}).build1Secrets,o=e.build2Secrets,a=new Map,l=new Map,s=new Map,c=new Map,u=new Set,d=new Map,r.forEach(function(e){s.set(e.name,e.value),u.add(e.name)}),o.forEach(function(e){c.set(e.name,e.value),u.add(e.name)}),u.forEach(function(e){var n=s.get(e)||void 0,t=c.get(e)||void 0;n===t?n&&(a.set(e,n),d.set(e,n)):(l.set(e,{build1Value:n,build2Value:t}),d.set(e,n))}),{unchangedSecrets:a,changedSecrets:l,defaultSelectedMap:d});p.defaultSelectedMap.forEach(function(e,n){i({key:n,value:e})}),Y(p)},[t.envVars,n.envVars,i]),S&&(0!==S.unchangedSecrets.size||0!==S.changedSecrets.size))?(0,p.FD)(p.FK,{children:[(0,p.Y)(j.S,{css:rb.title,children:"Review Secrets"}),(0,p.Y)(Z.EY,{css:rb.subtitle,children:"Manage which secrets you would like to preserve from your production deployment or from your rollback target."}),S.changedSecrets.size>0?(0,p.Y)(j.S,{css:rb.accordionContainer,children:(0,p.Y)(td.A,{headerContent:(0,p.FD)(j.S,{css:rb.accordionItem,children:[(0,p.Y)(na.A,{color:ex.LU.yellowStronger}),S.changedSecrets.size,1===S.changedSecrets.size?" secret is ":" secrets are ","different across deployments"]}),expanded:c,onClick:function(){return d(!c)},css:rb.accordion,children:(0,p.FD)(j.S,{css:rb.tableContainer,children:[(0,p.Y)(Z.EY,{css:rb.changedSecretsDisclaimer,children:"Select secret values from either your production environment or rollback environment to copy over in your rollback."}),(0,p.FD)("table",{css:rb.table,children:[(0,p.FD)("tr",{children:[(0,p.Y)("th",{className:"th",style:{width:"40%"},children:(0,p.Y)(j.S,{css:rb.cell,children:"Key"})}),(0,p.Y)("th",{className:"th",style:{width:"30%"},children:(0,p.Y)(j.S,{css:rb.cell,children:"Production"})}),(0,p.Y)("th",{className:"th",style:{width:"30%"},children:(0,p.FD)(j.S,{css:rb.cell,children:["Rollback Build",(0,p.Y)(eD.K0,{alt:y?"Reveal Values":"Hide Values",onClick:function(){w(!y)},children:y?(0,p.Y)(rw.A,{}):(0,p.Y)(ry.A,{})})]})})]}),Array.from(S.changedSecrets.entries()).map(function(e){var n=(0,u._)(e,2),t=n[0],o=n[1];return(0,p.Y)(rY,{secretKey:t,build1Secret:o.build1Value,build2Secret:o.build2Value,hideSecret:y,selectedSecretsMap:r,updateSecretsMap:i},t)})]})]})})}):null,S.unchangedSecrets.size>0?(0,p.Y)(j.S,{css:rb.accordionContainer,children:(0,p.Y)(td.A,{headerContent:(0,p.FD)(j.S,{css:rb.accordionItem,children:[(0,p.Y)(nV.A,{color:ex.LU.accentPositiveStronger}),S.unchangedSecrets.size,1===S.unchangedSecrets.size?" secret is ":" secrets are ","shared across deployments"]}),expanded:a,onClick:function(){return l(!a)},css:rb.accordion,children:(0,p.Y)(j.S,{css:rb.tableContainer,children:(0,p.FD)("table",{css:rb.table,children:[(0,p.FD)("tr",{children:[(0,p.Y)("th",{className:"th",style:{width:"40%"},children:(0,p.Y)(j.S,{css:rb.cell,children:"Key"})}),(0,p.Y)("th",{className:"th",style:{width:"60%"},children:(0,p.FD)(j.S,{css:rb.cell,children:["Rollback Build",(0,p.Y)(eD.K0,{alt:m?"Reveal Values":"Hide Values",onClick:function(){g(!m)},children:m?(0,p.Y)(rw.A,{}):(0,p.Y)(ry.A,{})})]})})]}),Array.from(S.unchangedSecrets.entries()).map(function(e,n){var t=(0,u._)(e,2),r=t[0],i=t[1];return(0,p.Y)(r_,{secretKey:r,secretValue:i,hideSecret:m},n)})]})})})}):null]}):null};var rC=t(90755),rk=t(81274),rx=t(7868),rD=t(2760),rE=t(1035),rR=t(37565),rI=t(87971);function rT(e){var n=e.type,t=e.view,r=e.provider,i=e.onViewBuildLogs,o=e.openFile,a=e.openPane,l=e.onClickRollback,s=(0,tn.A)();return(0,p.Y)(rZ,{replId:s,type:void 0===n?"default":n,view:t,provider:r,onSelect:i,openFile:o,openPane:a,onClickRollback:l})}var rF=tX.filter(function(e){return"title"in e}),rP=(0,eO.x)({root:[{zIndex:0}]});function rL(e){var n=e.activeStage,t=e.erroredStage;return(0,p.Y)(j.S,{css:rP.root,px:8,pb:8,row:!0,children:rF.map(function(e){return(0,p.Y)(nJ,{stage:e.id,text:e.title,totalStagesWithTitle:rF.length,activeStage:n,erroredStage:t},e.id)})})}var rU=(0,eO.x)({root:[B.wp.height("100%")],divider:[{marginLeft:8,marginRight:8,borderBottom:"1px solid "+ex.LU.outlineDimmest}],name:[B.wp.color.foregroundDefault,B.wp.fontWeight.medium],content:[B.wp.position.relative],loading:[B.wp.coverContainer,B.wp.center],error:[B.wp.m(8),B.wp.borderRadius(8),B.wp.overflow("hidden")],xterm:[B.wp.coverContainer,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,"& > div":[B.wp.coverContainer,B.wp.p(8)]}]}),rN=(0,eO.x)({root:[re.R1.maxWidth],title:[B.wp.fontSize(24),B.wp.pt(8)],subheader:[B.wp.fontSize(14)],content:[B.wp.position.relative],prodToTargetContainer:[{b:{display:"contents",fontWeight:500}}],prodStatusDot:[B.wp.width(12),B.wp.align.center],buildContainer:[B.wp.borderRadius(),{outline:"1px solid ".concat(ex.LU.outlineDimmer)},B.wp.backgroundColor.outlineDimmest,B.wp.width("45%"),B.wp.height("100%")],buildContainerTitle:[B.wp.fontSize(16),B.wp.align.center],buildContainerSubTitle:[B.wp.color.foregroundDimmer]});function rO(e){var n=e.build,t=e.isCurrentBuild,r=Date.now(),i=(0,nf.A)(new Date(n.timeCreated),r,{addSuffix:!0}),o=t?(0,p.Y)(j.S,{css:rN.prodStatusDot,children:(0,p.Y)(rC.$,{status:n.status})}):(0,p.Y)(rI.A,{color:ex.LU.outlineStrongest,size:12});return(0,p.FD)(j.S,{css:rN.buildContainer,py:12,px:16,gap:8,children:[(0,p.FD)(j.S,{css:rN.buildContainerTitle,row:!0,gap:6,children:[o,t?"Production":n.id.slice(0,8)]}),(0,p.FD)(j.S,{css:rN.buildContainerSubTitle,row:!0,gap:6,align:"center",children:[(0,p.Y)(rs.e,{src:n.user.image||null,size:12,username:n.user.username||"",fullName:n.user.fullName||""}),(0,p.Y)("b",{children:" "+n.user.displayName})," deployed"," "+i]})]})}function rM(e){var n=e.build,t=e.onBack,r=e.onClickRollback,i=e.onError,o=(0,g.cF)(),a=(0,u._)((0,f.useState)(new Map),2),l=a[0],s=a[1],c=(0,ra.a)();return o?(0,p.FD)(j.S,{css:rN.root,pt:12,pb:16,children:[(0,p.Y)(j.S,{pt:8,pl:8,row:!0,gap:8,align:"center",children:(0,p.Y)(eD.K0,{alt:"Back to timeline",onClick:function(){return t()},children:(0,p.Y)(rD.A,{})})}),(0,p.FD)(j.S,{css:rN.content,grow:!0,shrink:!0,px:8,children:[(0,p.Y)(j.S,{css:rN.title,children:"Instant Rollback"}),(0,p.Y)(j.S,{css:rN.subheader,pt:12,children:"Replace your current production with a previously successful deployment."}),(0,p.FD)(j.S,{css:rN.prodToTargetContainer,pt:32,children:["Rolling back from ",(0,p.Y)("b",{children:"production"})," to the following"," ",(0,p.Y)("b",{children:"rollback target"}),":",(0,p.FD)(j.S,{grow:!0,shrink:!0,align:"center",justify:"space-between",pt:16,row:!0,gap:8,children:[(0,p.Y)(rO,{build:o,isCurrentBuild:!0}),(0,p.Y)(rE.A,{}),(0,p.Y)(rO,{build:n,isCurrentBuild:!1})]})]}),c?null:(0,p.Y)(rA,{build:n,currentBuild:o,updateSecretsMap:function(e){var n=e.key,t=e.value;s(l.set(n,t))},selectedSecretsMap:l}),(0,p.Y)(j.S,{pt:24,children:(0,p.Y)(eX.$n,{text:"Confirm Rollback",iconLeft:(0,p.Y)(rc.A,{}),onClick:function(){var e=[];l.forEach(function(n,t){n&&e.push({name:t,value:n})}),r(e),t()},colorway:"primary"})})]})]}):(i("This deployment does not have a current build to rollback from"),null)}function rH(e){var n=e.build,t=e.onBack,r=e.fs,i=e.openFile,o=e.openPane,a=e.onViewAppLogs,l=(0,u._)((0,nQ.A)({openFile:i,listFiles:r.listFiles}),2),s=l[0],c=l[1],d=(0,ej.XH)({variables:{input:{buildId:n.id}},ssr:!1,fetchPolicy:"cache-and-network"}),h=d.data,m=d.loading,g=(0,f.useMemo)(function(){var e=[],n=h&&"HostingBuildDeployActionHistoryResults"===h.hostingBuildDeployActionHistory.__typename?h.hostingBuildDeployActionHistory.results:null;if(n){var t=void 0,r=void 0,i=void 0,o=!0,a=!1,l=void 0;try{for(var s,c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)!function(){var n=c.value;if("HostingBuildDeployLogAction"===n.__typename)return e.push(n.log);tX.some(function(e){return e.statusType===n.status})&&(t=n.status),n.status===Y.nHS.Failed&&(r=t)}()}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var d=t?null==(s=t1(t))?void 0:s.id:void 0;return r&&(i=d),{logs:e,activeStage:d,erroredStage:i,erroredStatus:r}}},[h]);return(0,f.useEffect)(function(){s&&g&&s.write(g.logs.join(""))},[s,g]),(0,p.FD)(j.S,{css:rU.root,gap:8,children:[(0,p.FD)(j.S,{pt:8,px:8,row:!0,gap:8,align:"center",children:[(0,p.Y)(eD.K0,{alt:"Back to timeline",onClick:function(){return t()},children:(0,p.Y)(rD.A,{})}),(0,p.Y)(j.S,{children:(0,p.FD)(Z.EY,{color:"dimmer",multiline:!1,children:[(0,p.Y)("span",{css:rU.name,children:n.user.displayName+" "}),(0,t9.f)(n.status)]})}),(0,p.Y)(rd,{build:n})]}),g||m?(0,p.FD)(p.FK,{children:[(null==g?void 0:g.erroredStatus)?(0,p.Y)(j.S,{css:rU.error,children:(0,p.Y)(tT,{currentStatus:g.erroredStatus,provider:n.provider,debugSummary:n.debugSummary,openFile:i,openPane:o,onViewApplicationLogs:a})}):null,(0,p.Y)(rL,{activeStage:null==g?void 0:g.activeStage,erroredStage:null==g?void 0:g.erroredStage}),(0,p.Y)(j.S,{css:rU.divider}),(0,p.FD)(tp.ui,{css:rU.content,grow:!0,shrink:!0,p:8,children:[(0,p.Y)(j.S,{css:rU.xterm,innerRef:c}),m||!s?(0,p.Y)(j.S,{css:rU.loading,children:(0,p.Y)(nj.A,{color:ex.LU.white,size:24})}):null]})]}):(0,p.Y)(tM,{provider:n.provider,openFile:i})]})}var rB=(0,eO.x)({item:B.wp.rowWithGap(12),past:{":last-of-type":{"[data-timeline-line]":{display:"none"}}},future:{":last-of-type":{"[data-timeline-line]":{bottom:-19}}}}),rz=(0,eO.x)({empty:[B.wp.center,B.wp.align.stretch],items:[],loadMore:[B.wp.center],item:[B.wp.color.foregroundDimmest,B.wp.hover(B.wp.color.foregroundDefault),{"&:hover .itemRight":{display:"flex"},"&:hover .itemLine":{display:"flex"}}],itemMainText:[(0,C._)({},B.kL.min(640),B.wp.flex.growAndShrink(0))],itemLine:[B.wp.display.none,(0,C._)({},B.kL.min(640),[B.wp.flex.growAndShrink(1),B.wp.border({color:ex.LU.outlineDimmest,direction:"top"})])],itemRight:[B.wp.textAlign.right,B.wp.display.none],itemPast:[rB.item,rB.past],itemFuture:[rB.item,rB.future],disabledLog:{cursor:"not-allowed"}}),rW=(0,eO.x)({top:B.wp.rowWithGap(12),button:[B.wp.reset.button,B.wp.cursor.pointer,B.wp.borderRadius(8),B.wp.display.flex,B.wp.rowWithGap(6),B.wp.align.center,B.wp.px(8),B.wp.color.foregroundDimmer,B.wp.height(32),B.wp.hover(B.wp.color.foregroundDefault),{'&[data-highlight="true"]':[B.wp.color.accentNegativeStrongest,B.wp.backgroundColor.accentNegativeDimmest,B.wp.border({color:ex.LU.accentNegativeDimmer})]}],info:[B.wp.flex.growAndShrink(1),{'&[data-open="false"]':B.wp.pb(6)}],buttonContent:[B.wp.flex.growAndShrink(1),B.wp.rowWithGap(8),B.wp.align.center],failedBuildList:B.wp.pt(8)});function rG(e){var n=e.items,t=e.upcomingBuildStatus,r=e.view,i=e.provider,o=e.onClick,a=e.openFile,l=e.openPane,s=(0,u._)((0,f.useState)(!1),2),c=s[0],d=s[1],h=(0,v.u)(),m=n[0],g=m.build.debugSummary,w=h===y.d.Ready&&!t&&r!==_.P.DeploymentInProgress&&g;return(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{css:rW.top,children:[(0,p.Y)(nd,{type:c?"futureFailOpen":"futureFailClosed"}),(0,p.FD)(j.S,{css:rW.info,"data-open":c,children:[w?(0,p.Y)(tP,{title:"".concat(n.length," ").concat((0,rx.A)("build",n.length)," failed"),debugSummary:g,onViewBuildLogs:function(){return o(m.build)},openFile:a,provider:i,openPane:l}):null,(0,p.FD)("button",{onClick:function(){return d(!c)},css:rW.button,children:[(0,p.FD)(j.S,{css:rW.buttonContent,children:[(0,p.Y)(eR.A,{}),(0,p.Y)(Z.EY,{children:"View all failed builds"}),c?null:(0,p.FD)(Z.EY,{css:B.wp.color.foregroundDimmest,variant:"small",children:[n.length>1?"Most recent: ":null,(0,nf.A)(new Date(n[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),c?(0,p.Y)(tm.A,{color:ex.LU.foregroundDimmer}):(0,p.Y)(th.A,{color:ex.LU.foregroundDimmer})]})]})]}),c?(0,p.Y)(j.S,{css:rW.failedBuildList,children:n.map(function(e){return(0,p.Y)(rq,{item:e,onClick:function(){return o(e.build)},type:"future"},e.id)})}):null]})}function rV(e){var n=e.items,t=e.view,r=e.provider,i=e.onClick,o=e.openFile,a=e.openPane,l=(0,u._)((0,f.useState)(!1),2),s=l[0],c=l[1],d=(0,g.mj)().hasDebugSummariesAuthorization,h=(0,g.tq)(),m=(0,f.useRef)(void 0);(0,f.useEffect)(function(){(null==h?void 0:h.status)!==void 0&&(m.current=null==h?void 0:h.status)},[h,null==h?void 0:h.status]);var v=!h&&m.current!==Y.nHS.Building&&m.current!==Y.nHS.Success,y=v?ex.LU.accentNegativeStronger:ex.LU.foregroundDimmer;if(0===n.length)return null;var w=n[0];return d&&w.build.debugSummary?(0,p.Y)(rG,{items:n,upcomingBuildStatus:m.current,view:t,provider:r,onClick:i,openFile:o,openPane:a}):(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{css:rW.top,children:[(0,p.Y)(nd,{type:s?"futureFailOpen":"futureFailClosed"}),(0,p.Y)(j.S,{css:rW.info,"data-open":s,children:(0,p.FD)("button",{onClick:function(){return c(!s)},css:rW.button,"data-highlight":v,children:[(0,p.FD)(j.S,{css:rW.buttonContent,children:[v?(0,p.Y)(na.A,{color:ex.LU.accentNegativeStronger}):null,(0,p.FD)(Z.EY,{children:[n.length," ",(0,rx.A)("build",n.length)," failed"]}),s?null:(0,p.FD)(Z.EY,{children:[n.length>1?"Most recent: ":null,(0,nf.A)(new Date(n[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),s?(0,p.Y)(tm.A,{color:y}):(0,p.Y)(th.A,{color:y})]})})]}),s?(0,p.Y)(j.S,{css:rW.failedBuildList,children:n.map(function(e){return(0,p.Y)(rq,{item:e,onClick:function(){return i(e.build)},type:"future"},e.id)})}):null]})}function rZ(e){var n,t,r=e.replId,i=e.type,o=void 0===i?"default":i,a=e.view,l=e.provider,s=e.onSelect,c=e.openFile,u=e.openPane,d=e.onClickRollback,h=(0,ej.jN)({variables:{replId:r,count:20},fetchPolicy:"cache-and-network",ssr:!1}),m=h.data,b=h.previousData,_=h.loading,A=h.error,C=h.fetchMore,k=null!=m?m:b,x=(0,v.u)(),D=(null==k?void 0:k.getRepl.__typename)==="Repl"?k.getRepl:null,E=(null==D||null==(t=D.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"?D.hostingDeployment:null,R=(n=(0,w._)(function(){var e;return(0,S.YH)(this,function(n){switch(n.label){case 0:if(!(e=null==E?void 0:E.activityLogs.pageInfo.nextCursor))return[2];return[4,C({variables:{after:e,count:20}})];case 1:return n.sent(),[2]}})}),function(){return n.apply(this,arguments)}),I=(0,rk.A)({onLoadMore:R,rootMargin:"0px 0px 300px 0px"}).targetRef,T=(0,g.cF)(),F=(0,g.tq)(),P=(0,f.useRef)(void 0);if((0,f.useEffect)(function(){(null==F?void 0:F.id)!==void 0&&(P.current=null==F?void 0:F.id)},[null==F?void 0:F.id]),_&&!E)return"failureQueue"===o?null:(0,p.Y)(r$,{});if(!(null==E?void 0:E.activityLogs))return null;var L=E.activityLogs,U=L.items,N=L.pageInfo;if(0===U.length)return null;if(A)return(0,p.Y)(j.S,{css:rz.empty,pb:8,children:(0,p.Y)(V.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"Something went wrong"})});var O=function(e,n){var t=[],r=(null==n?void 0:n.timeCreated)?new Date(n.timeCreated):null,i=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(c.type!==Y.Eyb.Fail||r&&r.getTime()>new Date(c.build.timeCreated).getTime())break;t.push(c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t}(U,T);return"failureQueue"===o?(0,p.Y)(re.lQ,{render:O.length>0,initialHeight:44,children:(0,p.Y)(rV,{items:O,view:a,provider:l,onClick:s,openFile:c,openPane:u})}):(0,p.FD)(j.S,{gap:8,"data-history-timeline-items":U.length-O.length,children:[(0,p.Y)(j.S,{css:rz.items,children:U.map(function(e,n){if(e.build.id===(null==T?void 0:T.id)||n<O.length)return null;var t=!1;return e.isRollbackCandidate&&e.build.status===Y.nHS.Success&&!e.build.rollbackSourceBuildId&&d&&x===y.d.Ready&&(t=!0),(0,p.Y)(rq,{item:e,onClick:function(){return s(e.build)},onClickRollback:t&&d?function(){return d(e.build)}:void 0},e.id)})}),N.nextCursor?(0,p.Y)(j.S,{css:rz.loadMore,children:(0,p.Y)(eD.K0,{disabled:_,tooltipBehavior:"hidden",alt:"Show more",onClick:R,ref:I,children:_?(0,p.Y)(nj.A,{}):(0,p.Y)(rR.A,{})})}):null]})}var rj=function(e){var n=e.onClickRollback,t=e.rollbackTooltip;if((0,ra.a)()&&!n)return(0,p.Y)(p.FK,{});var r=void 0===n;return(0,p.Y)(eD.K0,{alt:t,onClick:function(){return n?n():void 0},disabled:r,css:r&&rz.disabledLog,children:(0,p.Y)(rc.A,{})})};function rq(e){var n=e.item,t=e.onClick,r=e.onClickRollback,i=e.timeline,o=e.type,a=n.build.hasDeployLogs,l=!a,s=(0,ra.a)(),c=(0,v.u)(),u="Rollback";r||(u="Cannot roll back, the image for this build is no longer available"),c!==y.d.Ready?u="Cannot roll back while a deployment is in progress":n.build.status!==Y.nHS.Success?u="Cannot roll back to a failed build":n.build.rollbackSourceBuildId&&(u="Cannot roll back, already rolled back to this deployment");var d=(0,p.FD)(j.S,{css:rz.item,grow:!0,shrink:!0,pl:8,pr:4,pb:12,align:"center",row:!0,gap:8,style:s?{alignItems:"start"}:{},children:[(0,p.Y)(j.S,{css:rz.itemMainText,grow:!0,shrink:!0,children:(0,p.Y)(rg,{activityLogItem:n})}),(0,p.Y)(j.S,{css:rz.itemLine,className:"itemLine"}),(0,p.FD)(j.S,{css:rz.itemRight,row:!0,gap:0,justify:"end",style:s?{display:"flex"}:{},className:"itemRight",children:[(0,p.Y)(ro,{activityLogItem:n}),(0,p.Y)(rj,{onClickRollback:r,rollbackTooltip:u}),(0,p.Y)(eD.K0,{alt:a?"View deploy logs":"Deploy logs expire after 30 days",onClick:t,disabled:l,css:l&&rz.disabledLog,children:(0,p.Y)(tl.A,{})})]})]});return void 0===i||i?(0,p.FD)(j.S,{css:"past"===(void 0===o?"past":o)?rz.itemPast:rz.itemFuture,children:[(0,p.Y)(nd,{type:n.type===Y.Eyb.Fail?"pastFail":"pastSuccess"}),d]}):d}var rK=(0,eO.x)({loading:[{":last-of-type":{"[data-timeline-line]":{display:"none"}}}],loadingItem:[G.S.backgroundPulse(),B.wp.height(20.4),B.wp.mt(2),B.wp.ml(4),B.wp.flex.growAndShrink(1),B.wp.borderRadius(6),{opacity:.5,marginBottom:14}]});function r$(){return(0,p.Y)(j.S,{children:[,,,].fill(0).map(function(e,n){return(0,p.FD)(j.S,{css:rK.loading,row:!0,gap:12,children:[(0,p.Y)(nd,{type:"pastNeutral"}),(0,p.Y)(tp.ui,{elevated:!0,css:rK.loadingItem})]},n)})})}var rJ=t(8216),rQ=t(49384),rX=t.n(rQ),r0=t(71449),r1=t(94299),r2=(0,eO.x)({name:[B.wp.color.foregroundDefault,B.wp.fontWeight.medium],itemRight:[B.wp.textAlign.right],disabledLog:{cursor:"not-allowed"}}),r4=function(e){var n=e.onClick,t=(0,v.u)(),r=(0,g.cF)();if(t===y.d.Loading||!r)return(0,p.Y)(nj.A,{size:12});var i=r.status,o=r.hasDeployLogs,a=!o;return(0,p.Y)(j.S,{shrink:!0,row:!0,gap:0,children:(0,p.FD)(j.S,{grow:!0,shrink:!0,pr:4,align:"center",row:!0,gap:8,children:[(0,p.Y)(rC.$,{status:i}),(0,p.Y)(j.S,{grow:!0,shrink:!0,align:"center",children:(0,p.FD)(Z.EY,{multiline:!1,children:[(0,p.Y)("span",{css:r2.name,children:r.user.displayName+" "}),(0,t9.f)(i,r.suspendedReason)+" ",!function(e){switch(e){case Y.nHS.Building:case Y.nHS.Promoting:case Y.nHS.Running:case Y.nHS.Pending:case Y.nHS.Failed:case Y.nHS.Success:return!0;case Y.nHS.Resuming:case Y.nHS.Suspending:case Y.nHS.Suspended:case Y.nHS.UpdatingTier:return!1}}(i)?null:(0,p.Y)(tf.m_,{tooltip:(0,r1.A)(new Date(r.timeCreated),"MMMM do, Y 'at' h:m aa z"),maxWidth:250,children:function(e,n){return(0,p.Y)("span",(0,c._)((0,s._)({},e),{ref:n,children:(0,nf.A)(new Date(r.timeCreated),Date.now(),{addSuffix:!0})}))}})]})}),(0,p.Y)(j.S,{css:r2.itemRight,children:(0,p.Y)(eD.K0,{alt:o?"View deploy logs":"Deploy logs expire after 30 days",onClick:n,disabled:a,css:a&&r2.disabledLog,children:(0,p.Y)(tl.A,{})})})]})})},r5=(i={},(0,C._)(i,Y.Q0q.Gce,"Reserved VM"),(0,C._)(i,Y.Q0q.CloudRun,"Autoscale"),(0,C._)(i,Y.Q0q.Static,"Static"),(0,C._)(i,Y.Q0q.Cron,"Scheduled"),i);function r3(){var e=(0,I._)(["\n  query DeploymentSuspendedReplOrg($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return r3=function(){return e},e}var r7={},r6=(0,T.J1)(r3()),r8=t(82706),r9=t(96034),ie=t(48604),it=(0,eO.x)({suspendedLink:[B.wp.color.accentPrimaryStronger],deploymentInfoWrapper:[B.wp.flex.growAndShrink(1),B.wp.rowWithGap(12),{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}],deploymentSuspension:[B.wp.flex.growAndShrink(1),B.wp.colWithGap(12)]});function ir(){var e,n,t,r=(0,tn.A)(),i=(0,g.cF)(),o=(0,g.mj)().deployability,a=(e={variables:{replId:r}},n=(0,s._)({},r7,e),F.I(r6,n)).data;if(!i)return null;var l=(null==a?void 0:a.getRepl.__typename)==="Repl"&&(null==(t=a.getRepl.org)?void 0:t.__typename)==="Org"?"Org Settings > Billing":"Account > Subscription",c=o.redeploy.isAuthorized?"You can resume your deployment to make it available once again.":"Navigate to ".concat(l," to resolve."),u="If no action is taken your deployment will be deleted ".concat(r8.wp," days after the date it was suspended. For more assistance reach out to support at ");return i.suspendedReason===Y.UVQ.Ubb?(0,p.Y)(j.S,{css:it.deploymentInfoWrapper,children:(0,p.Y)(j.S,{css:it.deploymentSuspension,children:(0,p.Y)(V.N,{icon:(0,p.Y)(ie.A,{}),text:["Your deployment was suspended due to a billing failure. ".concat(c," ").concat(u),(0,p.Y)("a",{css:it.suspendedLink,href:"mailto:support@replit.com",children:(0,p.Y)("u",{children:"support@replit.com"})},""),"."]})})}):i.suspendedReason===Y.UVQ.SubscriptionRequired?(0,p.Y)(j.S,{css:it.deploymentInfoWrapper,children:(0,p.Y)(j.S,{css:it.deploymentSuspension,children:(0,p.Y)(V.N,{icon:(0,p.Y)(ie.A,{}),text:["Your deployment was suspended due to requiring an active ".concat(r9.en," membership. ").concat(c," ").concat(u),(0,p.Y)("a",{css:it.suspendedLink,href:"mailto:support@replit.com",children:(0,p.Y)("u",{children:"support@replit.com"})},""),"."]})})}):null}function ii(){var e=(0,I._)(["\n  fragment ExecuteScheduledJobExecution on ScheduledJobExecution {\n    id\n    startedAt\n    endedAt\n    status\n  }\n"]);return ii=function(){return e},e}function io(){var e=(0,I._)(["\n  mutation ExecuteScheduledJob($deploymentId: String!) {\n    executeScheduledJob(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ExecuteScheduledJobResult {\n        execution {\n          ...ExecuteScheduledJobExecution\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return io=function(){return e},e}var ia={},il=(0,T.J1)(ii()),is=(0,T.J1)(io(),il),ic=t(88624),iu=t(1982),id=t(18974);function ip(e){var n,t,r=e.disabled,i=e.onSuccessfulExecution,o=(0,g.i$)(),a=(0,g.cF)(),l=(0,v.u)(),c=(0,iu.A)().showError,d=(0,u._)((0,f.useState)(),2),h=d[0],m=d[1],w=function(e){m(e.message),c(e.message)},b=(0,u._)((n={onError:w,onCompleted:function(e){var n=e.executeScheduledJob;if("ExecuteScheduledJobResult"===n.__typename){null==i||i(n.execution);return}w(Error("An error occurred while executing the scheduled job"))}},t=(0,s._)({},ia,n),nw.n(is,t)),2),S=b[0],_=b[1].loading,A=!!(!o||!a||_||h||void 0!==r&&r),C=(null==a?void 0:a.status)===Y.nHS.Success,k=l===y.d.Ready,x=!A&&k&&C,D=k?"You must successfully deploy your project before being able to run it":"Can't run while deployment is ".concat((0,ic.OS)(l));return(0,p.Y)(tf.m_,{tooltip:D,isDisabled:x,children:(0,p.Y)(eX.$n,{text:"Run now",iconLeft:_?(0,p.Y)(nj.A,{}):(0,p.Y)(id.A,{}),size:"small",disabled:A||!x,onClick:function(){o&&!A&&S({variables:{deploymentId:o}})}})})}var ih=t(1040),im=t(37252),ig=t(67611),iv=t(52351);function iy(e){return(0,p.Y)(iv.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M3.75 4A.25.25 0 0 1 4 3.75h3a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25H4A.25.25 0 0 1 3.75 7V4ZM4 2.25A1.75 1.75 0 0 0 2.25 4v3c0 .966.784 1.75 1.75 1.75h3A1.75 1.75 0 0 0 8.75 7V4A1.75 1.75 0 0 0 7 2.25H4ZM16.75 4a.25.25 0 0 1 .25-.25h3a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25h-3a.25.25 0 0 1-.25-.25V4ZM17 2.25A1.75 1.75 0 0 0 15.25 4v3c0 .966.784 1.75 1.75 1.75h3A1.75 1.75 0 0 0 21.75 7V4A1.75 1.75 0 0 0 20 2.25h-3ZM4 16.75a.25.25 0 0 0-.25.25v3c0 .138.112.25.25.25h3a.25.25 0 0 0 .25-.25v-3a.25.25 0 0 0-.25-.25H4ZM2.25 17c0-.966.784-1.75 1.75-1.75h3c.966 0 1.75.784 1.75 1.75v3A1.75 1.75 0 0 1 7 21.75H4A1.75 1.75 0 0 1 2.25 20v-3ZM18 15.25A2.75 2.75 0 0 0 15.25 18v3a.75.75 0 0 0 1.5 0v-3A1.25 1.25 0 0 1 18 16.75h3a.75.75 0 0 0 0-1.5h-3Zm3 5a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V21a.75.75 0 0 1 .75-.75ZM12.75 7a.75.75 0 0 0-1.5 0v3A1.25 1.25 0 0 1 10 11.25H7a.75.75 0 0 0 0 1.5h3A2.75 2.75 0 0 0 12.75 10V7Zm-10.5 5a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75ZM12 2.25a.75.75 0 0 0 0 1.5h.01a.75.75 0 0 0 0-1.5H12Zm0 13a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V16a.75.75 0 0 1 .75-.75Zm4-4a.75.75 0 0 0 0 1.5h1a.75.75 0 0 0 0-1.5h-1Zm5 0a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V12a.75.75 0 0 1 .75-.75ZM12.75 20a.75.75 0 0 0-1.5 0v1a.75.75 0 0 0 1.5 0v-1Z",clipRule:"evenodd"})}))}var iw=(0,eO.x)({qrCodeWrapper:[B.wp.borderRadius(4),{backgroundColor:"white"}]}),ib=function(e){var n=e.currentBuild,t=(0,nn._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:r8.co}),r=(0,u._)((0,f.useState)([]),2),i=r[0],o=r[1],a=t!==r8.co;return(0,f.useEffect)(function(){var e=(null==(i=n.repl.hostingDeployment)?void 0:i.__typename)==="HostingDeployment"&&n.repl.hostingDeployment.id,r=[];switch(n.provider){case Y.Q0q.Gce:case Y.Q0q.CloudRun:case Y.Q0q.Static:var i,a,l,s,c,u,d=(null==(a=n.repl.hostingDeployment)?void 0:a.__typename)==="HostingDeployment"?null==(l=n.repl.hostingDeployment)?void 0:l.replitAppSubdomain:void 0;!d&&(null==(s=n.repl.owner)?void 0:s.username)&&(d="".concat(n.repl.slug,"-").concat(n.repl.owner.username)),d&&r.push({href:"https://".concat(d).concat((null==(u=window)||null==(c=u.location)?void 0:c.hostname)!=="replit.com"?".staging":"",".").concat(t),private:!1})}if(n.repl.domains){var p=n.repl.domains.filter(function(n){return(null==n?void 0:n.hosting_deployment_id)===e}),f=!0,h=!1,m=void 0;try{for(var g,v=p[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var y=g.value;y&&r.push({href:"https://".concat(y.domain),private:!1,state:"verified"!==y.state?y.state:void 0})}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}o(r)},[n,t]),(0,p.FD)(j.S,{gap:2,grow:!0,shrink:!0,children:[a?(0,p.Y)(V.N,{colorway:"warning",text:"The ".concat(r8.co," domain is currently unavailable, please use the ").concat(t," URL below.")}):null,i.map(function(e,n){return(0,p.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(Z.EY,{css:[B.wp.flex.shrink(1)],multiline:!1,children:(0,p.Y)("a",{href:e.href,target:"_blank",css:[B.wp.color.foregroundDefault],children:e.href})}),e.private?(0,p.Y)(ig.A,{color:ex.LU.foregroundDefault}):null,(0,p.Y)("a",{href:e.href,target:"_blank",css:[B.wp.display.flex,B.wp.align.center],children:(0,p.Y)(tw.A,{color:ex.LU.foregroundDefault})}),(0,p.Y)(iS,{url:e.href}),e.state?(0,p.FD)(Z.EY,{multiline:!1,children:["(","pushed_to_goval"===e.state?"verifying":e.state,")"]}):null]},"domains-".concat(n))})]})};function iS(e){var n=e.url,t=(0,u._)((0,f.useState)(!1),2),r=t[0],i=t[1];return(0,p.FD)(im.Wv,{isOpen:r,onOpenChange:function(e){return i(e)},label:"QR Code",children:[(0,p.Y)(eD.K0,{alt:"QR Code",children:(0,p.Y)(iy,{})}),(0,p.Y)(j.S,{align:"start",children:(0,p.Y)(j.S,{css:iw.qrCodeWrapper,p:8,children:(0,p.Y)(ih.Ay,{size:128,value:n})})})]})}var iY=t(10327),i_=t(6064),iA=(0,M.i7)("\n    50% {\n      background-color: ".concat(ex.LU.accentPositiveDimmest,";\n      outline: 1px solid ").concat(ex.LU.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),iC=(0,eO.x)({deploymentInfo:[B.wp.colWithGap(8),B.wp.p(16),B.wp.borderRadius(),{outline:"1px solid transparent"}]}),ik=(0,eO.x)({textButton:[B.wp.reset.button,B.wp.color.foregroundDimmest,B.wp.hover(B.wp.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":[B.wp.cursor.pointer,B.wp.color.accentPrimaryStronger,B.wp.focusRing]}],textLink:B.wp.hover(B.wp.color.accentPrimaryStrongest),labeledSection:[B.wp.flex.growAndShrink(1),(0,C._)({},B.kL.min(400),[B.wp.flex.row,B.wp.align.baseline])],labeledSectionFullWidth:[B.wp.flex.growAndShrink(1),(0,C._)({},B.kL.min(400),[B.wp.flex.row,B.wp.align.baseline,B.wp.flex.grow(1),B.wp.justify.spaceBetween])],deploymentInfo:iC.deploymentInfo,deploymentInfoAnimate:[iC.deploymentInfo,{animation:"".concat(iA," 700ms ease-out")}],deploymentInfoTitle:[B.wp.flex.wrap,B.wp.flex.shrink(0),B.wp.justify.spaceBetween],deploymentInfoContent:[(0,C._)({},B.kL.min(400),B.wp.colWithGap(4))],typeColumn:[B.wp.flex.wrap,B.wp.flex.shrink(1)]}),ix=function(e){var n=e.text,t=e.onClick,r=e.disabled;return(0,p.Y)("button",{css:ik.textButton,onClick:t,disabled:void 0!==r&&r,children:n})},iD=function(e){var n=e.name,t=e.sku,r=e.canManage,i=e.usageLink,o=e.onManageClick;return(0,p.FD)(j.S,{css:ik.typeColumn,row:!0,gap:6,children:[(0,p.Y)(Z.EY,{multiline:!1,children:n}),t?(0,p.FD)(Z.EY,{color:"dimmest",multiline:!1,children:["(",t,")"]}):null,"function"==typeof o?(0,p.Y)(ix,{text:"Manage",onClick:o,disabled:!r}):null,i?(0,p.Y)(rX(),{href:"/usage",css:ik.textLink,children:(0,p.Y)(Z.EY,{children:"See all usage"})}):null]})},iE=function(e){var n=e.label,t=e.children,r=e.fullWidth;return(0,p.FD)(j.S,{css:r?ik.labeledSectionFullWidth:ik.labeledSection,children:[(0,p.Y)(j.S,{css:B.wp.minWidth(100),children:(0,p.Y)(Z.EY,{css:B.wp.color.foregroundDimmer,multiline:!1,children:n})}),t]})},iR=function(e){var n=e.provider,t=e.machine,r=e.onViewBuildLogs,i=e.onManageClick,o=e.onViewAction,a=(0,v.u)(),l=(0,g.cF)(),s=void 0!==l,c=n!==Y.Q0q.Static&&s&&null===l.hasImageTag,u=!!((a===y.d.Ready||a===y.d.Suspended)&&!c),d=(0,nn._P)({controlName:"flag-operation-dot-forge"}),h=null,m=null,w=null,b=null,S=(0,g.tq)(),A=(0,f.useRef)(void 0);(0,f.useEffect)(function(){S&&(A.current=null==S?void 0:S.id)},[S,null==S?void 0:S.id]);var C=(null==l?void 0:l.status)===Y.nHS.Success,k=(null==l?void 0:l.id)===A.current,x=(null==l?void 0:l.provider)!==Y.Q0q.Cron;switch(l&&(m=(0,p.FD)(p.FK,{children:[(0,p.Y)(iE,{label:"Status",children:(0,p.Y)(j.S,{shrink:!0,row:!0,gap:4,align:"center",children:(0,p.Y)(r4,{onClick:function(){r(l)}})})}),(0,p.Y)(iE,{label:"Visibility",children:(0,p.Y)(j.S,{shrink:!0,row:!0,gap:4,align:"center",children:l.isPrivate?(0,p.FD)(p.FK,{children:[(0,p.Y)(ig.A,{color:ex.LU.foregroundDefault}),(0,p.Y)(Z.EY,{multiline:!1,children:"Private"})]}):(0,p.FD)(p.FK,{children:[(0,p.Y)(iY.A,{color:ex.LU.foregroundDefault}),(0,p.Y)(Z.EY,{multiline:!1,children:"Public"})]})})}),x?(0,p.Y)(iE,{label:"Domain",children:(0,p.FD)(j.S,{gap:8,children:[(0,p.Y)(ib,{currentBuild:l}),d?(0,p.Y)("div",{children:(0,p.Y)(eX.$n,{variant:"outlined",text:"Buy a new domain",iconLeft:(0,p.Y)(i_.A,{}),size:"small",iconRight:(0,p.Y)(nG.a,{compact:!0,colorway:"primary",text:"Beta"}),onClick:function(){o({type:_.k.ChangeView,payload:{view:_.P.Domains}})}})}):null]})}):null]})),n){case Y.Q0q.Gce:w=(0,p.Y)(iE,{label:"Type",fullWidth:!s,children:(0,p.Y)(iD,{name:r5[n],sku:null==t?void 0:t.configurationLabel,canManage:u,onManageClick:i})});break;case Y.Q0q.CloudRun:w=(0,p.Y)(iE,{label:"Type",fullWidth:!s,children:(0,p.Y)(iD,{name:r5[n],sku:t?"".concat(t.configurationLabel," / ").concat(t.maxInstances," Max"):"Beta",canManage:u,usageLink:!0,onManageClick:i})});break;case Y.Q0q.Static:w=(0,p.Y)(iE,{label:"Type",fullWidth:!s,children:(0,p.Y)(iD,{name:r5[n],sku:void 0,canManage:u&&s,onManageClick:i})});break;case Y.Q0q.Cron:if(!(null==l||null==(D=l.machineJob)?void 0:D.timezone))break;var D,E,R,I=null==l||null==(E=l.machineJob)?void 0:E.timezone,T=r0.m.find(function(e){return e.utc.includes(I)}),F=(null==T?void 0:T.abbr)||I;w=(0,p.Y)(iE,{label:"Type",fullWidth:!s,children:(0,p.Y)(iD,{name:r5[n],sku:"".concat(F,", ").concat(null==l||null==(R=l.machineJob)?void 0:R.crontab),canManage:!1})}),h=(0,p.Y)(ip,{onSuccessfulExecution:function(){o({type:_.k.ChangeView,payload:{view:_.P.Schedule}})}})}return(c&&(b=(0,p.Y)(j.S,{children:(0,p.Y)(V.N,{icon:(0,p.Y)(na.A,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),m||w||b)?(0,p.FD)(tp.ui,{elevated:!0,css:C&&k?ik.deploymentInfoAnimate:ik.deploymentInfo,style:{paddingTop:l?12:16},children:[l?(0,p.FD)(j.S,{css:ik.deploymentInfoTitle,row:!0,gap:8,children:[(0,p.Y)(Z.EY,{variant:"subheadDefault",multiline:!1,children:"Production"}),h,l.rollbackSourceBuildId?(0,p.Y)(rf,{build:l,background:"highest"}):null]}):null,(0,p.FD)(j.S,{css:ik.deploymentInfoContent,gap:8,children:[(0,p.Y)(ir,{}),m,w,b]})]}):null},iI=t(54682),iT=t(78104),iF=t(67313),iP=t(48686),iL=t(13353),iU=t(30267),iN=(0,eO.x)({deploymentInfoWrapper:[{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}]}),iO=function(e){var n,t,r,i=e.view,o=e.onLifecycleCommand,a=e.onViewAction,l=e.onError,s=e.openFile,c=e.openPane,d=e.hasAgentSession,h=(0,v.u)(),m=(0,g.i$)(),w=(0,g.cF)(),b=(0,g.tq)(),S=(0,g.om)(),C=(0,g.g$)(),k=(0,iI.m6)(),x=(0,g.Tp)().rollbackToPreviousBuild,D=(n=(0,iF.useRouter)(),t=(0,iI.ME)(n,"storeReviewPrompt")&&(0,iI.Po)(n),r=(0,f.useCallback)(function(e){var n=e.source;t&&(0,iU._z)({messageType:iL.tF.REQUEST_STORE_REVIEW_PROMPT,source:n},(0,iP.Ak)())},[t]),(0,f.useMemo)(function(){return{isSupported:t,requestPrompt:r}},[t,r])),E=void 0!==w,R=(0,tn.A)(),I=(0,g.ik)(R),T=null==w?void 0:w.provider,F=E&&w.machineConfiguration?{configurationId:w.machineConfiguration.id,configurationLabel:w.machineConfiguration.label,configurationSlug:w.machineConfiguration.slug,maxInstances:null==w?void 0:w.maxMachineInstances}:void 0,P=(0,iT.A)("deployments-pane","deployments-mobile-download"),L=P.shouldDisplay,U=P.dismiss,N=P.register;(0,f.useEffect)(function(){N()},[N]),(0,f.useEffect)(function(){E&&h===y.d.Deploying&&D.requestPrompt({source:"deployProgress"})},[D,E,h]);var O=(null==w?void 0:w.status)&&w.status===Y.nHS.Success&&L&&!k,M=(0,u._)((0,f.useState)(!1),2),H=M[0],B=M[1],z=(0,u._)((0,f.useState)(null),2),W=z[0],G=z[1],V=(0,u._)((0,f.useState)(null),2),Z=V[0],q=V[1],K=(0,u._)((0,f.useState)(null),2),$=K[0],J=K[1];(0,f.useEffect)(function(){(0,eU.Ae)({context:_.P.Deployment})},[]),(0,f.useEffect)(function(){(h===y.d.Preparing||h===y.d.PreparingDatabase||h===y.d.Deploying)&&(i===_.P.DeploymentInProgress||Z||a({type:_.k.ChangeView,payload:{view:_.P.DeploymentInProgress}}))},[h,i,a,Z]);var Q=(0,f.useRef)(void 0);(0,f.useEffect)(function(){Q.current=null==b?void 0:b.id},[null==b?void 0:b.id]);var X=(null==w?void 0:w.status)===Y.nHS.Success,ee=(null==w?void 0:w.id)===Q.current;(0,f.useEffect)(function(){X&&ee&&a({type:_.k.ChangeView,payload:{view:_.P.Deployment}})},[X,ee,a]);var en=null==b?void 0:b.status,et=(0,f.useRef)(en);(0,f.useEffect)(function(){en&&(et.current=en)},[en]);var er=(0,g.Ol)(),ei=(0,g.Rh)();if(Z)return(0,p.Y)(rH,{build:Z,fs:S,openFile:s,openPane:c,onBack:function(){q(null)},onViewAppLogs:function(){a({type:_.k.ChangeView,payload:{view:_.P.Logs}})}});if(W)return(0,p.Y)(rM,{build:W,onBack:function(){G(null)},onClickRollback:function(e){x({rollbackCandidateBuildId:W.id,envVars:e})},onError:function(e){G(null),l(e)}});if($===Y.Q0q.CloudRun)return(0,p.Y)(np.J,{onError:l,onConfirm:function(e){a({type:_.k.SendDeploymentLifecycleCommand,payload:{command:Y.jPZ.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return J(null)}});if($===Y.Q0q.Gce)return(0,p.Y)(rJ.VW,{replId:R,isTeamRepl:I,initialMachineConfiguration:F,onConfirm:function(e){a({type:_.k.SendDeploymentLifecycleCommand,payload:{command:Y.jPZ.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return J(null)},onError:l});var eo=!E||!m||h!==y.d.Ready&&h!==y.d.Suspended&&h!==y.d.ProcessingLifecycleCommand;return(0,p.Y)(p.FK,{children:(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{row:!0,gap:12,children:[E?(0,p.Y)(nd,{type:"future"}):null,(0,p.FD)(j.S,{grow:!0,shrink:!0,gap:12,pb:12,children:[eo?null:(0,p.Y)(ns,{dotReplit:er,fs:S,secrets:C,ports:ei,deploymentId:m,replId:R,onError:l,expanded:H,setExpanded:B,shouldShowMobileTour:null!=O&&O,onDismissMobileTour:U,openNetworkingPane:function(){a({type:_.k.OpenPane,payload:{type:"networking"}})},onResume:function(){o({command:Y.jPZ.Resume})},hasAgentSession:d,onViewAction:a}),i===_.P.DeploymentInProgress?(0,p.Y)(t7,{openFile:s,openPane:c,viewBuildLogsOnLoad:!E,onViewLogs:function(){a({type:_.k.ChangeView,payload:{view:_.P.Logs}})},onCanceled:function(){a({type:_.k.ChangeView,payload:{view:_.P.Deployment}}),l("Build cancelled")},onError:l}):null]})]}),E&&T?(0,p.FD)(p.FK,{children:[(0,p.Y)(rT,{type:"failureQueue",onViewBuildLogs:q,openFile:s,openPane:c,view:i,provider:T}),(0,p.FD)(j.S,{css:iN.deploymentInfoWrapper,row:!0,gap:12,children:[(0,p.Y)(nd,{type:"present"}),(0,p.Y)(j.S,{grow:!0,shrink:!0,gap:12,pb:16,children:(0,p.Y)(iR,{provider:T,machine:F,onViewBuildLogs:q,onManageClick:function(){if(T===Y.Q0q.CloudRun||T===Y.Q0q.Gce)return void J(T);T===Y.Q0q.Static&&a({type:_.k.ChangeView,payload:{view:_.P.Settings}})},onViewAction:a})})]}),(0,p.Y)(rT,{onViewBuildLogs:q,openFile:s,openPane:c,view:i,provider:T,onClickRollback:function(e){G(e)}})]}):null]})})})},iM=t(43126);function iH(){var e=(0,I._)(["\n  mutation BuyDomain($input: BuyDomainInput!) {\n    buyDomain(input: $input) {\n      ... on BuyDomainOutput {\n        scheduled\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return iH=function(){return e},e}function iB(){var e=(0,I._)(["\n  query GetPaymentMethod {\n    currentUser {\n      id\n      paymentMethod {\n        ... on Error {\n          message\n        }\n        ... on PaymentMethod {\n          id\n          last4\n        }\n      }\n    }\n  }\n"]);return iB=function(){return e},e}var iz={},iW=(0,T.J1)(iH()),iG=(0,T.J1)(iB()),iV=t(91326);function iZ(e){return null==e?"N/A":"$".concat(e.toFixed(2))}function ij(e,n){switch(n.type){case"select_domain":return{step:"confirm",selectedDomain:n.payload,purchaseErrorMessage:null};case"purchase_failed":if(null==e.selectedDomain)throw Error("Selected domain is null");return{step:"confirm",selectedDomain:e.selectedDomain,purchaseErrorMessage:n.payload};case"search":return{step:"search",selectedDomain:null};case"processing":if(null==e.selectedDomain)throw Error("Selected domain is null");return{step:"processing",selectedDomain:e.selectedDomain}}return e}var iq=t(98151),iK=t(81686),i$=(0,eO.x)({scrollArea:[{overflowY:"auto",minHeight:0,maxHeight:"100%"}],primaryActionButton:[B.wp.width("100%"),B.wp.py(12),{fontSize:ex.LU.fontSizeDefault}],confirmDetails:[B.wp.borderRadius(4)],detailRow:[B.wp.rowWithGap(8),B.wp.justify.spaceBetween],errorMessage:[B.wp.borderRadius(4),B.wp.backgroundColor.accentNegativeDimmest],root:[B.wp.overflow("hidden")],relativeContainer:[{position:"relative",minHeight:0,maxHeight:"100%"}]});function iJ(e){var n,t,r,i=e.isBillingInfoLoading,o=e.selectedDomain,a=e.purchaseErrorMessage,l=e.handleBuyDomain,s=e.isPurchasing,c=e.lastFour,d=e.onGoBack,h=(t=(n=(0,u._)((0,f.useState)(!1),2))[0],r=n[1],(0,iq.Z)(function(){r(!0)},1e3),t);return i?(0,p.FD)(j.S,{align:"center",p:8,children:[(0,p.Y)(nj.A,{size:16}),(0,p.Y)(Z.EY,{children:"Loading your billing information..."})]}):c?(0,p.FD)(j.S,{p:8,gap:16,css:i$.root,shrink:!0,children:[(0,p.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(eD.K0,{alt:"Go back",onClick:d,children:(0,p.Y)(rD.A,{})}),(0,p.Y)(Z.Y9,{level:2,children:"Confirm Domain Purchase"}),(0,p.Y)(nG.a,{colorway:"primary",text:"Beta"})]}),(0,p.Y)(j.S,{css:i$.relativeContainer,shrink:!0,children:(0,p.FD)(j.S,{gap:16,css:i$.scrollArea,shrink:!0,children:[(0,p.FD)(tp.ui,{elevated:!0,gap:8,css:i$.confirmDetails,p:12,children:[(0,p.FD)(j.S,{css:i$.detailRow,children:[(0,p.Y)(Z.EY,{color:"dimmer",children:"Domain:"}),(0,p.Y)(Z.EY,{children:o.domainName})]}),(0,p.FD)(j.S,{css:i$.detailRow,children:[(0,p.Y)(Z.EY,{color:"dimmer",children:"Price:"}),o.years>1?(0,p.Y)(tf.m_,{tooltip:"Some domains such as .ai must be purchased and renewed in multi-year increments. You will be charged for ".concat(o.years," years up front."),children:(0,p.FD)("span",{children:[iZ(o.purchasePrice)," for"," ",o.years," years"]})}):(0,p.Y)(Z.EY,{children:iZ(o.purchasePrice)})]}),o.renewalPrice?(0,p.Y)(tf.m_,{tooltip:o.years>1?"Some domains such as .ai must be purchased and renewed in multi-year increments. Your domain will renew every ".concat(o.years," years for the displayed price."):"You can always cancel the renewal later",children:(0,p.FD)(j.S,{css:i$.detailRow,children:[(0,p.Y)(Z.EY,{color:"dimmer",children:o.years>1?"Renewal:":"Annual renewal:"}),(0,p.FD)(Z.EY,{children:[iZ(o.renewalPrice)," ",o.years>1?"every ".concat(o.years," years"):"/year"]})]})}):null,(0,p.FD)(j.S,{css:i$.detailRow,children:[(0,p.Y)(Z.EY,{color:"dimmer",children:"Payment method:"}),(0,p.FD)(Z.EY,{children:["Your card ending in"," ",(0,p.Y)(Z.EY,{variant:"code",children:c.toString()})]})]})]}),a?(0,p.FD)(j.S,{css:i$.errorMessage,gap:4,p:12,children:[(0,p.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(na.A,{size:16,color:ex.LU.accentNegativeDefault}),(0,p.Y)(Z.EY,{color:"dimmer",children:"Purchase failed"})]}),(0,p.Y)(Z.EY,{color:"dimmer",children:a})]}):null,(0,p.Y)(j.S,{justify:"center",children:(0,p.Y)(eX.$n,{variant:"default",colorway:"positive",onClick:l,loading:s,text:"Confirm Purchase",disabled:!h,css:i$.primaryActionButton})}),(0,p.FD)(iK.s,{color:"dimmer",variant:"small",children:["Domain purchases are non-refundable. You will be charged immediately for the registration price of"," ",iZ(o.purchasePrice)," and every"," ",1===o.years?" year":" ".concat(o.years," years")," ","for the renewal price of ",iZ(o.renewalPrice),". Your domain will be available to use immediately. Domain Purchasing on Replit is currently in Beta, and some features may be unavailable. For more information, see our"," ",(0,p.Y)(rX(),{href:"https://docs.replit.com/cloud-services/deployments/domain-purchasing",target:"_blank",children:"Documentation"}),". For additional help, contact Replit Support."]})]})})]}):(0,p.FD)(j.S,{p:8,children:[(0,p.Y)(Z.EY,{children:"No payment method found"}),(0,p.Y)(Z.EY,{children:"Please add a payment method to your account and return to this screen."})]})}function iQ(){return(0,p.Y)(j.S,{gap:16,pt:16,children:(0,p.FD)(j.S,{align:"center",gap:16,children:[(0,p.Y)(nj.A,{size:32}),(0,p.Y)(Z.EY,{variant:"subheadDefault",children:(0,p.Y)("strong",{children:"Processing your domain purchase"})})]})})}function iX(){var e=(0,I._)(["\n  query SearchForDomain($input: SearchDomainsInput!) {\n    searchDomains(input: $input) {\n      ... on DomainSearchOutput {\n        results {\n          domainName\n          sld\n          tld\n          purchasable\n          premium\n          purchasePrice\n          purchaseType\n          renewalPrice\n          years\n        }\n      }\n    }\n  }\n"]);return iX=function(){return e},e}var i0={},i1=(0,T.J1)(iX()),i2=t(46011),i4=t(24928),i5=t(61980),i3=t(21963),i7=t(53420),i6=(0,eO.x)({scrollArea:[{display:"flex",flexDirection:"column",overflowY:"auto",minHeight:0,paddingBottom:8,flexShrink:1}],domainResult:[B.wp.borderRadius(8),B.wp.border({color:ex.LU.outlineDimmer}),B.wp.hover([B.wp.border({color:ex.LU.outlineDefault}),B.wp.backgroundColor.accentPrimaryDimmest]),B.wp.mb(8)],noResults:[B.wp.borderRadius(8),B.wp.border({color:ex.LU.outlineDimmer}),B.wp.mb(8)],root:[B.wp.overflow("hidden")]});function i8(e){var n,t,r,i,o,a,l,c,d,h,m,g=e.suggestedDomain,v=e.onDomainSelect,y=e.onGoBack,w=(t=(n=(0,u._)((0,f.useState)(g||""),2))[0],r=n[1],c=(o={variables:{input:{keyword:i=(0,i2.A)(t,500)}}},a=(0,s._)({},i0,o),l=F.I(i1,a)).data,d=l.loading,h=l.error,m=(null==c?void 0:c.searchDomains)&&"DomainSearchOutput"===c.searchDomains.__typename?c.searchDomains.results.filter(Boolean):[],(0,f.useEffect)(function(){i&&i.length>0&&(0,eQ.u4)(eQ.AZ.DOMAIN_SEARCH_PERFORMED,{searchTerm:i,resultsCount:m.length})},[i,m.length]),{searchTerm:t,setSearchTerm:r,searchResults:m,debouncedSearchTerm:i,loading:d||t!==i,error:h}),b=w.searchTerm,S=w.setSearchTerm,Y=w.searchResults,_=w.loading,A=w.error,C=w.debouncedSearchTerm;return(0,p.FD)(j.S,{css:i6.root,gap:8,grow:!0,shrink:!0,px:8,pt:8,children:[(0,p.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(eD.K0,{onClick:y,alt:"Back to domains",children:(0,p.Y)(rD.A,{})}),(0,p.Y)(Z.Y9,{level:2,variant:"subheadDefault",children:"Buy a new domain"}),(0,p.Y)(nG.a,{colorway:"primary",text:"Beta"})]}),(0,p.Y)(j.S,{tag:"label",row:!0,gap:8,align:"center",children:(0,p.Y)(Z.EY,{color:"dimmer",children:"Search for a domain to buy"})}),(0,p.FD)(i5.U,{children:[(0,p.Y)(i3.L,{autoFocus:!0,placeholder:"Search for a domain...",value:b,onChange:function(e){return S(e)}}),(0,p.Y)(i4.qF,{css:i6.scrollArea,onAction:function(e){var n=Y.find(function(n){return n.domainName===e});n&&v(n)},items:Y,isLoading:_,renderEmptyState:function(){return(0,p.FD)(j.S,{gap:8,align:"stretch",children:[(0,p.Y)(j.S,{css:i6.noResults,align:"center",justify:"center",p:16,children:(0,p.Y)(Z.EY,{color:"dimmer",children:C?'No domains found matching "'.concat(C,'"'):"Enter a domain name to search"})}),A?(0,p.FD)(j.S,{row:!0,gap:4,align:"center",justify:"center",children:[(0,p.Y)(na.A,{size:12,color:ex.LU.orangeDefault}),(0,p.Y)(Z.EY,{variant:"small",color:"dimmer",children:A.message})]}):null]})},children:function(e){return(0,p.FD)(i4.if,{textValue:"".concat(e.domainName," - ").concat(e.purchasable?"available":"unavailable"," ").concat(e.years>1?"".concat(iZ(e.purchasePrice)," for ").concat(e.years," years"):iZ(e.purchasePrice)),id:e.domainName,css:i6.domainResult,children:[(0,p.FD)(j.S,{gap:4,grow:!0,children:[(0,p.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(Z.EY,{children:e.domainName}),e.purchasable?(0,p.Y)(j.S,{row:!0,gap:2,align:"center",children:(0,p.Y)(nV.A,{size:12,color:ex.LU.accentPositiveDefault})}):null,e.premium?(0,p.Y)(i7.A,{size:12,color:ex.LU.accentPrimaryDefault}):null]}),null!=e.renewalPrice&&(0,p.Y)(Z.EY,{variant:"small",color:"dimmer",children:e.years>1?(0,p.Y)(tf.m_,{tooltip:"Some domains such as .ai must be purchased and renewed in multi-year increments. Your domain will renew every ".concat(e.years," years for the displayed price."),children:(0,p.FD)("span",{children:["Renews at ",iZ(e.renewalPrice)," every"," ",e.years," years"]})}):(0,p.FD)(p.FK,{children:["Renews at ",iZ(e.renewalPrice),"/yr"]})})]}),(0,p.Y)(Z.EY,{children:e.years>1?(0,p.Y)(tf.m_,{tooltip:"Some domains such as .ai must be purchased and renewed in multi-year increments. You will be charged for ".concat(e.years," years up front."),children:(0,p.FD)("span",{children:[iZ(e.purchasePrice)," for ",e.years," ","years"]})}):iZ(e.purchasePrice)})]},e.domainName)}})]}),(0,p.Y)(j.S,{})]})}function i9(e){var n,t,r,i,o,a,l=(i=(0,s._)({},iz,void 0),F.I(iG,i)),c=l.data,d=l.loading,h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{step:"search",selectedDomain:null},n=(0,u._)((0,f.useReducer)(ij,e),2);return{state:n[0],dispatch:n[1]}}(),m=h.state,g=h.dispatch,v=(0,u._)((0,f.useState)(null),2),y=v[0],b=v[1];nT({variables:{id:e.deploymentId},fetchPolicy:"cache-and-network",ssr:!1,skip:!y||"search"===m.step||"confirm"===m.step,onCompleted:function(n){var t;(null==(t=n.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"&&y&&(n.hostingDeployment.domains||[]).find(function(e){return e.domain===y})&&e.onRequestClose()}});var Y=(0,u._)((n={refetchQueries:[{query:nI,variables:{id:e.deploymentId}}],awaitRefetchQueries:!0},t=(0,s._)({},iz,n),nw.n(iW,t)),2),_=Y[0],A=Y[1].loading,C=(r=(0,w._)(function(){var n,t;return(0,S.YH)(this,function(r){switch(r.label){case 0:if(null==m.selectedDomain)return[2];return(0,eQ.u4)(eQ.AZ.DOMAIN_PURCHASE_CONFIRMED,{sld:m.selectedDomain.sld,tld:m.selectedDomain.tld,domainName:m.selectedDomain.domainName,purchasePrice:m.selectedDomain.purchasePrice,years:m.selectedDomain.years}),g({type:"processing"}),[4,_({variables:{input:{years:m.selectedDomain.years,domainName:m.selectedDomain.domainName,contact:{firstName:"",lastName:"",companyName:"",address1:"",address2:"",city:"",state:"",zip:"",country:"",phone:"",email:""},hostingDeploymentId:e.deploymentId,expectedChargeAmountCents:null!=m.selectedDomain.purchasePrice?Math.round(100*m.selectedDomain.purchasePrice):0}}})];case 1:return(null==(n=(t=r.sent()).data)?void 0:n.buyDomain)&&("BuyDomainOutput"===t.data.buyDomain.__typename&&t.data.buyDomain.scheduled?((0,eQ.u4)(eQ.AZ.DOMAIN_PURCHASE_COMPLETED,{deploymentId:e.deploymentId,domainName:m.selectedDomain.domainName,purchasePrice:m.selectedDomain.purchasePrice,years:m.selectedDomain.years}),b(m.selectedDomain.domainName),e.onRequestClose()):"UserError"===t.data.buyDomain.__typename?((0,eQ.u4)(eQ.AZ.DOMAIN_PURCHASE_FAILED,{domainName:m.selectedDomain.domainName,sld:m.selectedDomain.sld,tld:m.selectedDomain.tld,error:t.data.buyDomain.message}),g({type:"purchase_failed",payload:t.data.buyDomain.message})):"UnauthorizedError"===t.data.buyDomain.__typename&&((0,eQ.u4)(eQ.AZ.DOMAIN_PURCHASE_FAILED,{domainName:m.selectedDomain.domainName,sld:m.selectedDomain.sld,tld:m.selectedDomain.tld,error:t.data.buyDomain.message}),g({type:"purchase_failed",payload:t.data.buyDomain.message}))),[2]}})}),function(){return r.apply(this,arguments)});switch(m.step){case"search":return(0,p.Y)(i8,{suggestedDomain:e.suggestedDomain,onDomainSelect:function(e){(0,eQ.u4)(eQ.AZ.DOMAIN_SELECTED,{domainName:e.domainName,tld:e.tld,sld:e.sld,purchasePrice:e.purchasePrice,renewalPrice:e.renewalPrice,years:e.years,premium:e.premium}),g({type:"select_domain",payload:e})},onGoBack:e.onRequestClose});case"confirm":return(0,p.Y)(iJ,{lastFour:(null==c||null==(a=c.currentUser)||null==(o=a.paymentMethod)?void 0:o.__typename)==="PaymentMethod"?c.currentUser.paymentMethod.last4:null,isBillingInfoLoading:d,onGoBack:function(){return g({type:"search"})},selectedDomain:m.selectedDomain,purchaseErrorMessage:m.purchaseErrorMessage,handleBuyDomain:C,isPurchasing:A});case"processing":return(0,p.Y)(iQ,{});default:(0,iV.A)(m)}}function oe(){var e=(0,I._)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          id\n        }\n      }\n    }\n  }\n"]);return oe=function(){return e},e}function on(){var e=(0,I._)(["\n  mutation HostingDeploymentsVerifyDomain(\n    $input: VerifyHostingDeploymentDomainInput!\n  ) {\n    verifyHostingDeploymentDomain(input: $input) {\n      ... on HostingDeploymentDomain {\n        id\n        state\n      }\n    }\n  }\n"]);return on=function(){return e},e}var ot={},or=(0,T.J1)(oe()),oi=(0,T.J1)(on()),oo=t(70871),oa=t(15311),ol=t(40259),os=t(77495),oc=(0,oa.v)(["paddingRight"]),ou=oc.cssVars,od=oc.styleTokens,op=(0,eO.x)({inputWrapper:[B.wp.position.relative,B.wp.flex.growAndShrink(1),{input:[{paddingRight:od.paddingRight}]}],copyButton:[B.wp.position.absolute,B.wp.top("50%"),B.wp.right(4),{transform:"translateY(-50%)"}]});function of(e){return(0,p.FD)(j.S,{css:op.inputWrapper,style:(0,C._)({},ou.paddingRight,e.value?"36px":"8px"),children:[(0,p.Y)(ol.pd,(0,c._)((0,s._)({},e),{onClick:function(e){return e.currentTarget.select()}})),e.value?(0,p.Y)(eD.K0,{css:op.copyButton,alt:"Copy",tooltipBehavior:"hidden",onClick:function(){return e.value&&(0,oo.default)(e.value)},children:(0,p.Y)(os.A,{})}):null]})}var oh=(0,eO.x)({root:[B.wp.flex.column,(o={gap:8},(0,C._)(o,B.kL.min("mobileMax"),[B.wp.flex.row,{"& > div:nth-of-type(1)":{maxWidth:50},"& > div:nth-of-type(2)":{width:"30%"}}]),(0,C._)(o,"label",[B.wp.color.foregroundDimmer,{fontSize:ex.LU.fontSizeSmall}]),o)],col:[B.wp.colWithGap(4),B.wp.flex.growAndShrink(1)],records:[B.wp.borderRadius(12),(0,C._)({},B.kL.min("mobileMax"),B.wp.colWithGap(12))],divider:(0,C._)({display:"flex",height:1,backgroundColor:ex.LU.outlineDimmest},B.kL.min("mobileMax"),B.wp.display.none)});function om(e){var n=e.hostname.split(".").slice(0,-2).join(".");return(0,p.FD)(j.S,{css:oh.root,children:[(0,p.FD)(j.S,{css:oh.col,children:[(0,p.Y)(j.S,{tag:"label",children:"Type"}),(0,p.Y)(ol.pd,{value:e.type,readOnly:!0})]}),(0,p.FD)(j.S,{css:oh.col,children:[(0,p.Y)(j.S,{tag:"label",children:"Hostname"}),(0,p.Y)(ol.pd,{value:""===n?"@":n,readOnly:!0})]}),(0,p.FD)(j.S,{css:oh.col,children:[(0,p.Y)(j.S,{tag:"label",children:"Record"}),(0,p.Y)(of,{value:e.record,readOnly:!0})]})]})}function og(e){var n="replit-verify=".concat(e.deploymentId);return(0,p.FD)(tp.ui,{background:"default",css:oh.records,px:12,pt:8,pb:16,gap:16,children:[(0,p.Y)(om,{hostname:e.hostname,type:"A",record:e.apexProxy}),(0,p.Y)(j.S,{css:oh.divider}),(0,p.Y)(om,{hostname:e.hostname,type:"TXT",record:n})]})}var ov="https://docs.replit.com/cloud-services/deployments/custom-domains",oy=t(11938),ow=t(83728),ob=t(34883),oS=t(81650),oY=(0,eO.x)({root:[B.wp.colWithGap(8),B.wp.borderRadius(8),B.wp.pl(8),B.wp.pr(4),B.wp.height(32),B.wp.justify.center]}),o_=(0,eO.x)({root:oY.root,rootExpanded:[oY.root,B.wp.height("auto"),B.wp.pt(4),B.wp.pb(12),B.wp.justify.start],domainRow:[B.wp.reset.button,B.wp.rowWithGap(8),B.wp.align.center,B.wp.justify.spaceBetween],domainWrapper:[B.wp.color.accentPrimaryStronger,{a:B.wp.hover(B.wp.color.accentPrimaryStrongest)}],statusDot:[B.wp.borderRadius("full"),B.wp.width(6),B.wp.height(6)],buttons:[B.wp.flex.column,B.wp.justify.spaceBetween,(a={gap:8},(0,C._)(a,B.kL.min("mobileMax"),B.wp.flex.row),(0,C._)(a,"button",[B.wp.flex.growAndShrink(1)]),a)]}),oA={verified:{color:ex.LU.accentPositiveDefault,text:"Verified"},verifying:{color:ex.LU.orangeDefault,text:"Verifying"},pushed_to_goval:{color:ex.LU.orangeDefault,text:"Verifying"},failed:{color:ex.LU.accentNegativeDefault,text:"Failed"}};function oC(e){var n,t,r,i,o=e.domain,a=e.deploymentId,l=e.apexProxy,c=e.authorizations,d=(0,u._)((0,f.useState)(!1),2),h=d[0],m=d[1],g=(0,u._)((0,f.useState)(!1),2),v=g[0],y=g[1],w=(0,u._)((n={variables:{id:a},fetchPolicy:"network-only",ssr:!1},t=(0,s._)({},nk,n),nv._(nI,t)),2),b=w[0],S=w[1].loading,_=(0,u._)((r=(0,s._)({},ot,void 0),nw.n(or,r)),2),A=_[0],C=_[1].loading,k=(0,u._)((i=(0,s._)({},ot,void 0),nw.n(oi,i)),2),x=k[0],D=k[1].loading,E=o.state===Y.xpm.Failed,R=c.addCustomDomain,I=R.isAuthorized,T=R.message,F=c.deleteCustomDomain,P=F.isAuthorized,L=F.message;return(0,p.FD)(tp.ui,{elevated:!0,css:h?o_.rootExpanded:o_.root,children:[(0,p.FD)(j.S,{css:o_.domainRow,style:{borderBottomLeftRadius:h?0:void 0,borderBottomRightRadius:h?0:void 0},children:[(0,p.FD)(j.S,{css:o_.domainWrapper,shrink:!0,row:!0,gap:8,align:"center",children:[(0,p.Y)(Z.EY,{multiline:!1,children:(0,p.Y)("a",{target:"_blank",href:"".concat(o.domain.startsWith("http://")||o.domain.startsWith("https://")?"":"https://").concat(o.domain),children:o.domain})}),(0,p.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(j.S,{css:o_.statusDot,style:{backgroundColor:oA[o.state].color}}),(0,p.Y)(Z.EY,{color:"dimmer",variant:"small",children:oA[o.state].text})]})]}),(0,p.FD)(j.S,{row:!0,children:[(0,p.Y)(oy.r,{textToCopy:o.domain,tooltipSuccessText:"Copy link"}),o.managed?null:(0,p.Y)(tf.m_,{tooltip:T,isDisabled:I,children:(0,p.Y)(eD.K0,{alt:"Edit",disabled:!I,tooltipBehavior:"hidden",onClick:function(){y(!1),m(function(e){return!e})},css:B.wp.color.foregroundDimmer,children:h?(0,p.Y)(tm.A,{}):(0,p.Y)(ow.A,{})})})]})]}),h?(0,p.Y)(j.S,{pl:4,pr:8,gap:12,children:v?(0,p.FD)(p.FK,{children:[(0,p.Y)(Z.EY,{children:"Are you sure you want to unlink this domain?"}),(0,p.FD)(j.S,{css:o_.buttons,children:[(0,p.Y)(eX.$n,{size:"small",variant:"outlined",text:"Cancel",onClick:function(){y(!1)}}),(0,p.Y)(eX.$n,{size:"small",disabled:C,text:"Yes, unlink "+o.domain,colorway:"negative",onClick:function(){A({variables:{input:{hostingDeploymentDomainId:o.id}}})}})]})]}):(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{gap:6,children:[E?(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{row:!0,gap:6,align:"center",children:[(0,p.Y)(na.A,{}),(0,p.Y)(Z.EY,{children:"DNS Error"})]}),(0,p.FD)(Z.EY,{children:["Failed to link domain",o.status?": ".concat(o.status.endsWith(".")?o.status.slice(0,-1):o.status):null,". Make sure your domain's DNS settings have these records."," ",(0,p.Y)("a",{target:"_blank",href:ov,children:"Learn more"})]})]}):(0,p.FD)(Z.EY,{color:"dimmer",children:["Add these records to your domain's"," ",(0,p.Y)("strong",{css:B.wp.color.foregroundDefault,children:"DNS settings"}),". This may take up to 48 hours to fully apply."," ",(0,p.Y)("a",{target:"_blank",href:ov,children:"Learn more"})]}),(0,p.Y)(og,{hostname:o.domain,apexProxy:l,deploymentId:a})]}),(0,p.FD)(j.S,{css:o_.buttons,children:[(0,p.Y)(eX.$n,{iconLeft:S||D?(0,p.Y)(nj.A,{}):(0,p.Y)(ob.A,{}),size:"small",text:E?"Retry linking":"Check status",onClick:function(){E?x({variables:{input:{hostingDeploymentDomainId:o.id}}}):b()}}),(0,p.Y)(tf.m_,{isDisabled:P,tooltip:L,children:(0,p.Y)(eX.$n,{iconLeft:(0,p.Y)(oS.A,{}),size:"small",disabled:C||!P,text:E?"Remove domain":"Unlink domain",colorway:"negative",onClick:function(){y(!0)}})})]})]})}):null]})}function ok(){var e=(0,I._)(["\n  query LinkablePurchasedDomains {\n    currentUser {\n      id\n      domains(managed: true, onlyUnlinked: true) {\n        items {\n          id\n          domain\n        }\n      }\n    }\n  }\n"]);return ok=function(){return e},e}function ox(){var e=(0,I._)(["\n  mutation LinkPurchasedDomain(\n    $replId: String!\n    $domainName: String!\n    $deploymentId: String!\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      deploymentId: $deploymentId\n      domain: $domainName\n    ) {\n      __typename\n      ... on Repl {\n        id\n      }\n    }\n  }\n"]);return ox=function(){return e},e}var oD={},oE=(0,T.J1)(ok()),oR=(0,T.J1)(ox()),oI=(0,eO.x)({item:[B.wp.borderRadius(8)]});function oT(e){var n,t,r,i,o,a,l=e.deploymentId,c=e.refetchDomainsQuery,d=(0,tn.A)(),f=(n={fetchPolicy:"cache-and-network",ssr:!1},t=(0,s._)({},oD,n),F.I(oE,t)),h=f.data,m=f.refetch,g=null==h||null==(a=h.currentUser)||null==(o=a.domains)?void 0:o.items,v=(0,u._)((r=(0,s._)({},oD,void 0),nw.n(oR,r)),2),y=v[0],b=v[1].loading;if(!(null==g?void 0:g.length))return null;var Y=(i=(0,w._)(function(e){return(0,S.YH)(this,function(n){switch(n.label){case 0:return[4,y({variables:{replId:d,domainName:e,deploymentId:l}})];case 1:return n.sent(),c(),m(),[2]}})}),function(e){return i.apply(this,arguments)});return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{row:!0,align:"center",gap:8,children:[(0,p.Y)(Z.EY,{variant:"subheadDefault",children:"Available to link:"}),b?(0,p.Y)(nj.A,{}):null]}),(0,p.Y)(j.S,{gap:8,tag:"ul",children:g.map(function(e){return(0,p.Y)(oF,{loading:b,domain:e.domain,handleLink:Y},e.id)})}),(0,p.FD)(Z.EY,{variant:"small",color:"dimmer",children:["View all your purchased domains on your"," ",(0,p.Y)(rX(),{href:"/account#domains",target:"_blank",children:"account"})," ","page."]})]})}function oF(e){var n=e.domain,t=e.handleLink,r=e.loading,i=(0,u._)((0,f.useState)(!1),2),o=i[0],a=i[1];return(0,p.FD)(tp.ui,{tag:"li",css:oI.item,elevated:!0,row:!0,px:8,py:4,align:"center",justify:"space-between",children:[(0,p.Y)(Z.EY,{children:n}),(0,p.FD)(im.Wv,{placement:"bottom right",isOpen:o&&!r,onOpenChange:a,label:"Link domain",children:[(0,p.Y)(eD.K0,{onClick:function(){return a(!0)},alt:"Link",children:(0,p.Y)(i_.A,{})}),(0,p.FD)(j.S,{gap:8,p:8,children:[(0,p.FD)(Z.EY,{children:["Point ",n," to this deployment?"]}),(0,p.Y)(eX.$n,{onClick:function(){t(n),a(!1)},text:"Yes",loading:r})]})]})]})}var oP=t(59655),oL=t.n(oP),oU=t(36734),oN=t(49748),oO=(0,eO.x)({root:[B.wp.borderRadius(8),B.wp.border({color:ex.LU.outlineDimmer})],labelRow:[B.wp.rowWithGap(8),B.wp.align.center],labelText:[B.wp.flex.growAndShrink(1)],controls:[{"& > button":[B.wp.flex.growAndShrink(1)]}],valueRow:[B.wp.borderRadius(8),B.wp.pl(8),B.wp.pr(4),B.wp.height(32),B.wp.rowWithGap(8),B.wp.align.center,B.wp.justify.spaceBetween,{a:B.wp.hover(B.wp.color.accentPrimaryStrongest)}]}),oM=function(e){try{return new URL(e.startsWith("http")?e:"https://".concat(e)).hostname.toLowerCase()}catch(n){return e.trim().toLowerCase()}};function oH(e){var n,t,r=(0,u._)((0,f.useState)(!0),2),i=r[0],o=r[1],a=(0,u._)((0,f.useState)(""),2),l=a[0],c=a[1],d=(0,u._)((0,f.useState)(!1),2),h=d[0],m=d[1],g=(0,u._)((0,f.useState)(!1),2),v=g[0],y=g[1],w=(0,u._)((n={onCompleted:function(){e.onAdd()}},t=(0,s._)({},nk,n),nw.n(nF,t)),2),b=w[0],S=w[1].loading,Y=(0,f.useRef)(null),_=(0,f.useId)(),A=oL()(l),C=S||!l||v&&!A,k=v&&!A?"Enter a valid domain":null,x=S?(0,p.Y)(nj.A,{}):(0,p.Y)(rE.A,{});return i||S||(x=(0,p.Y)(oN.A,{})),(0,p.FD)(j.S,{tag:"form",css:oO.root,p:8,gap:16,onSubmit:function(n){if(n.preventDefault(),i){var t,r=oM(l);c(r),y(!0),oL()(r)?(o(!1),null==(t=Y.current)||t.focus()):m(!0);return}b({variables:{input:{hostingDeploymentId:e.deploymentId,domain:l}}})},children:[(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{tag:"label",htmlFor:_,css:oO.labelRow,children:[A&&!i?(0,p.Y)(nV.A,{color:ex.LU.accentPositiveDefault}):null,(0,p.Y)(Z.EY,{color:"dimmer",children:"First, enter your domain"})]}),i?(0,p.Y)(ol.pd,{id:_,autoFocus:!0,placeholder:"example.com",value:l,disabled:S,onChange:function(e){c(e.currentTarget.value),y(!1),m(!1)}}):(0,p.FD)(tp.ui,{elevated:!0,css:oO.valueRow,children:[(0,p.Y)(j.S,{href:"https://"+l,tag:"a",target:"_blank",children:l}),(0,p.Y)(eD.K0,{alt:"Edit",onClick:function(){return o(!0)},children:(0,p.Y)(ow.A,{color:ex.LU.foregroundDimmer})})]}),k&&h?(0,p.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(na.A,{size:12,color:ex.LU.orangeDefault}),(0,p.Y)(Z.EY,{variant:"small",children:k})]}):null]}),!i&&A?(0,p.Y)(oB,{apexProxy:e.apexProxy,domain:l,deploymentId:e.deploymentId}):null,(0,p.FD)(j.S,{css:oO.controls,row:!0,gap:8,justify:"space-between",children:[(0,p.Y)(eX.$n,{type:"button",text:"Cancel",onClick:e.onCancel}),(0,p.Y)(eX.$n,{ref:Y,iconRight:x,colorway:"primary",type:"submit",disabled:C,text:i?"Next":"Link domain"})]})]})}function oB(e){var n={A:{hostname:e.domain,record:e.apexProxy},TXT:{hostname:e.domain,record:"replit-verify=".concat(e.deploymentId)}};return(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{css:oO.labelRow,children:[(0,p.Y)(oU.A,{color:ex.LU.foregroundDimmest}),(0,p.FD)(Z.EY,{multiline:!0,css:oO.labelText,children:["Next, add the following records to your domain's DNS settings."," ",(0,p.Y)("a",{target:"_blank",href:ov,children:"Learn more"})]}),(0,p.Y)(oy.i,{textToCopy:JSON.stringify(n,null,2),text:"JSON",showIcon:!0,size:"small"})]}),(0,p.Y)(og,{apexProxy:e.apexProxy,hostname:e.domain,deploymentId:e.deploymentId})]})}var oz=t(68197);function oW(){var e=(0,I._)(["\n  fragment PendingDomainsRepl on Repl {\n    id\n    pendingDomains {\n      domainName\n      status\n      message\n    }\n  }\n"]);return oW=function(){return e},e}function oG(){var e=(0,I._)(["\n  query PendingDomainsQuery($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...PendingDomainsRepl\n      }\n    }\n  }\n  ","\n"]);return oG=function(){return e},e}function oV(){var e=(0,I._)(["\n  subscription PendingDomainsUpdates($replId: String!) {\n    pendingDomainsUpdates(replId: $replId) {\n      id\n      ...PendingDomainsRepl\n    }\n  }\n  ","\n"]);return oV=function(){return e},e}var oZ={},oj=(0,T.J1)(oW()),oq=(0,T.J1)(oG(),oj),oK=(0,T.J1)(oV(),oj),o$=(0,eO.x)({root:[B.wp.borderRadius(8),B.wp.minHeight(32)],domainMessage:[B.wp.color.foregroundDimmer]});function oJ(e){var n=e.domainName,t=e.status,r=e.message;return(0,p.FD)(tp.ui,{elevated:!0,css:o$.root,pl:8,pr:4,py:4,children:[(0,p.FD)(j.S,{row:!0,gap:8,align:"center",justify:"start",children:[(0,p.Y)(Z.EY,{multiline:!1,children:n}),(0,p.FD)(j.S,{row:!0,align:"center",gap:4,children:[function(e){switch(e){case"pending":default:return(0,p.Y)(nZ.A,{color:ex.LU.foregroundDimmer});case"success":return(0,p.Y)(nV.A,{color:ex.LU.accentPositiveDefault});case"fail":return(0,p.Y)(e2.A,{color:ex.LU.accentNegativeDefault})}}(t),(0,p.Y)(Z.EY,{color:"dimmer",variant:"small",children:function(e){switch(e){case"pending":return"Processing...";case"dns-verifying":return"Verifying DNS...";case"success":return"Domain purchased successfully";case"fail":return"Purchase failed";default:return e}}(t)})]})]}),r?(0,p.Y)(Z.EY,{variant:"small",css:o$.domainMessage,children:r}):null]})}function oQ(e){var n,t,r,i=e.refetchDomainsQuery,o=e.omitDomains,a=(0,u._)((0,f.useState)(new Set),2),l=a[0],c=a[1],d=(0,tn.A)(),h=(n={variables:{replId:d},fetchPolicy:"cache-and-network",ssr:!1},t=(0,s._)({},oZ,n),F.I(oq,t)).data;r=(0,s._)({},oZ,{variables:{replId:d},onData:function(e){var n,t,r=e.data;if(r&&(null==(t=r.data)||null==(n=t.pendingDomainsUpdates)?void 0:n.pendingDomains)){var o=r.data.pendingDomainsUpdates.pendingDomains.filter(function(e){return"success"===e.status}).map(function(e){return e.domainName}),a=new Set((0,b._)(l).concat((0,b._)(o)));a.size>l.size&&i(),c(a)}}}),oz.R(oK,r);var m=(0,f.useMemo)(function(){var e;return(null==h||null==(e=h.getRepl)?void 0:e.__typename)!=="Repl"?null:h.getRepl.pendingDomains.filter(function(e){return!o.has(e.domainName)})},[h,o]);return m&&0!==m.length?(0,p.Y)(j.S,{gap:8,children:m.map(function(e){var n;return o.has(e.domainName)?null:(0,p.Y)(oJ,{domainName:e.domainName,status:e.status,message:null!=(n=e.message)?n:void 0},e.domainName)})}):null}var oX=(0,eO.x)({primaryDomain:[B.wp.borderRadius(8),B.wp.height(32)],primaryDomainLink:[B.wp.flex.shrink(1),B.wp.color.accentPrimaryStronger,{a:B.wp.hover(B.wp.color.accentPrimaryStrongest)}],domainPostPurchaseInfo:[B.wp.borderRadius(8),B.wp.border()]}),o0=(0,eO.x)({buyWrapper:[B.wp.height("100%"),B.wp.overflow("hidden")]});function o1(e){var n,t,r,i,o,a,l=e.deployment,c=e.authorizations,d=(n={variables:{id:(0,tn.A)()}},t=(0,s._)({},nk,n),F.I(nR,t)),h=d.data,m=d.loading,v=(null==h||null==(r=h.getRepl)?void 0:r.__typename)==="Repl"&&!!(null==(i=h.getRepl.org)?void 0:i.id),y=(0,u._)((0,f.useState)(!1),2),w=y[0],b=y[1],S=(0,u._)((0,f.useState)(!1),2),_=S[0],C=S[1],k=(0,u._)((0,f.useState)(void 0),2),x=k[0],D=k[1],E=(0,nn._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:r8.co}),R=(0,nn._P)({type:"boolean",controlName:"flag-operation-dot-forge",default:!1}),I=nT({variables:{id:l.id},fetchPolicy:"cache-and-network",ssr:!1,pollInterval:x,onCompleted:function(e){var n,t;D((null==(n=e.hostingDeployment)?void 0:n.__typename)==="HostingDeployment"&&(null==(t=e.hostingDeployment.domains)?void 0:t.some(function(e){return e.state===Y.xpm.Verifying}))?3e4:void 0)}}).refetch,T=(null==l||null==(o=l.domains)?void 0:o.length)?l.domains:null,P=(0,f.useMemo)(function(){return T?new Set(T.map(function(e){return e.domain})):new Set},[T]),L=(null==l?void 0:l.currentBuild.status)===Y.nHS.Success,U=null==l?void 0:l.repl.apexProxy,N=(0,g.cF)();if(_&&U&&R)return(0,p.Y)(j.S,{css:o0.buyWrapper,gap:8,children:(0,p.Y)(i9,{suggestedDomain:null==l?void 0:l.repl.title,deploymentId:l.id,onRequestClose:function(){return C(!1)}})});var O=function(){var e,n,t,r,i,o=(null==N||null==(e=N.repl.hostingDeployment)?void 0:e.__typename)==="HostingDeployment"?null==(n=N.repl.hostingDeployment)?void 0:n.replitAppSubdomain:void 0;if(!o&&(null==N||null==(t=N.repl.owner)?void 0:t.username)&&(o="".concat(N.repl.slug,"-").concat(N.repl.owner.username)),o)return"".concat(o).concat((null==(i=window)||null==(r=i.location)?void 0:r.hostname)!=="replit.com"?".staging":"",".").concat(E)}(),M=c.addCustomDomain,H=M.isAuthorized,z=M.message;return(0,p.FD)(A.A,{maxWidth:!0,children:[(0,p.Y)(Z.EY,{variant:"subheadDefault",children:"Domains"}),(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(tp.ui,{elevated:!0,css:oX.primaryDomain,justify:"space-between",align:"center",pl:8,pr:4,row:!0,gap:4,children:[(0,p.Y)(Z.EY,{multiline:!1,css:oX.primaryDomainLink,children:(0,p.Y)("a",{href:"https://".concat(O),target:"_blank",rel:"noreferrer noopener",children:O})}),(0,p.FD)(j.S,{row:!0,align:"center",children:[(0,p.Y)(oy.r,{textToCopy:null!=O?O:""}),(0,p.Y)(tf.m_,{tooltip:o2,children:(0,p.Y)(ig.A,{"aria-label":o2,color:ex.LU.foregroundDimmer,css:B.wp.m(4)})})]})]}),T&&l?(0,p.Y)(j.S,{gap:8,children:T.map(function(e){return(0,p.Y)(j.S,{children:(0,p.Y)(oC,{apexProxy:l.repl.apexProxy,deploymentId:l.id,domain:e,authorizations:c})},e.domain)})}):null,R?(0,p.Y)(oQ,{refetchDomainsQuery:function(){I()},omitDomains:P}):null,R?(0,p.Y)(oT,{deploymentId:l.id,refetchDomainsQuery:I}):null,(null==(a=l.domains)?void 0:a.some(function(e){return e.managed&&5>(0,iM.A)(new Date,new Date(e.timeCreated))}))?(0,p.FD)(tp.ui,{px:8,py:8,elevated:!0,css:oX.domainPostPurchaseInfo,children:[(0,p.FD)(j.S,{row:!0,align:"center",gap:8,children:[(0,p.Y)(ie.A,{}),(0,p.Y)(Z.EY,{children:"Congratulations on your new domain!"})]}),(0,p.Y)(j.S,{pl:24,children:(0,p.Y)(Z.EY,{variant:"small",children:"You may see a temporary error when accessing your domain that usually resolves within a few minutes after purchasing. If the problem persists longer than 48 hours, please contact Replit Support."})})]}):null,w&&U?(0,p.Y)(oH,{apexProxy:U,deploymentId:l.id,onAdd:function(){return b(!1)},onCancel:function(){return b(!1)}}):null,L?null:(0,p.Y)(V.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"You must successfully deploy your project before linking a domain"}),!1===w?(0,p.FD)(j.S,{row:!0,gap:8,children:[R?(0,p.Y)(tf.m_,{tooltip:v?"Custom domain purchasing is coming soon to org-owned Apps.":z,isDisabled:H&&!v,children:(0,p.Y)(eX.$n,{disabled:!L||!H||v||m,iconLeft:(0,p.Y)(i_.A,{}),text:"Buy a new domain",onClick:function(){(0,eQ.u4)(eQ.AZ.DOMAIN_PURCHASE_FLOW_OPENED,{suggestedDomain:null==l?void 0:l.repl.title}),C(!0)},variant:"outlined",size:"small",iconRight:(0,p.Y)(nG.a,{compact:!0,colorway:"primary",text:"Beta"})})}):null,(0,p.Y)(tf.m_,{tooltip:z,isDisabled:H,children:(0,p.Y)(eX.$n,{disabled:!L||!H,iconLeft:(0,p.Y)(i_.A,{}),text:R?"Manually connect from another registrar":"Link a domain",onClick:function(){b(!0)},variant:"outlined",size:"small"})})]}):null]})]})}var o2="The primary domain always ends in replit.app. To change, you must shut down your deployment and redeploy.",o4=(0,eO.x)({container:[B.wp.height("100%"),B.wp.overflowY("hidden")]}),o5={addCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:Y.S4P.InsufficientPermissions,message:"Loading"},deleteCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:Y.S4P.InsufficientPermissions,message:"Loading"}};function o3(e){var n=e.deploymentId;return n?(0,p.Y)(o7,{deploymentId:n}):(0,p.Y)(A.A,{children:(0,p.Y)(V.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"Deployment not found"})})}function o7(e){var n,t,r=e.deploymentId;(0,f.useEffect)(function(){(0,eU.Ae)({context:_.P.Domains})},[]);var i=(0,u._)(nz(),2),o=i[0],a=i[1],l=a.data,s=a.error,c=nH({variables:{id:r},ssr:!1,fetchPolicy:"cache-and-network",onCompleted:function(e){var n;(null==e||null==(n=e.hostingDeployment)?void 0:n.__typename)==="HostingDeployment"&&o({variables:{replId:e.hostingDeployment.repl.id,provider:e.hostingDeployment.currentBuild.provider}})}}),d=c.data,h=c.loading,m=c.error,g=(null==d||null==(n=d.hostingDeployment)?void 0:n.__typename)==="HostingDeployment"?d.hostingDeployment:void 0;if(m)return(0,p.Y)(e8.Wx,{text:m.message});if(h||!g)return(0,p.Y)(A.A,{centered:!0,children:(0,p.Y)(e8.cN,{})});if(g.currentBuild.provider===Y.Q0q.Cron)return(0,p.Y)(A.A,{children:(0,p.Y)(V.N,{colorway:"warning",text:"Domains are not supported for scheduled jobs"})});var v=(null==l||null==(t=l.getRepl)?void 0:t.__typename)==="Repl"?l.getRepl.authorizations:o5;return(0,p.FD)(A.A,{maxWidth:!0,css:o4.container,children:[s?(0,p.Y)(V.N,{colorway:"negative",text:s.message}):null,(0,p.Y)(o1,{deployment:g,authorizations:v})]})}function o6(){var e=(0,I._)(["\n  fragment DeploymentsNewDeploymentRepl on Repl {\n    id\n    slug\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    org {\n      __typename\n      id\n      slug\n      type\n    }\n  }\n"]);return o6=function(){return e},e}function o8(){var e=(0,I._)(["\n  query DeploymentsNewDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentsNewDeploymentRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return o8=function(){return e},e}var o9={},ae=(0,T.J1)(o6()),an=(0,T.J1)(o8(),ae);function at(){var e=(0,I._)(["\n  query DeploymentsPaneIntro($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n        }\n        ...DeploymentsNewDeploymentRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return at=function(){return e},e}var ar={},ai=(0,T.J1)(at(),ae),ao=t(29839),aa=t(8483),al=t(46449),as=t(78008),ac=t(2099),au=t(97802),ad=t(15493),ap=t(72490),af=(0,eO.x)({cta:[B.wp.width("100%"),B.wp.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[B.wp.colWithGap(8),B.wp.align.center],ctaStatusBanner:[B.wp.textAlign.left],disabledBanner:[B.wp.py(6),{alignSelf:"center"}]});function ah(e){var n=e.provider,t=e.isDeployable,r=e.isDeployableCode,i=e.isDeployableExplanation,o=e.isIncludedInSubscription,a=e.loading,l=e.onProviderContinue,s=e.refetchDeployabilityQueryData,c=e.setShowPaymentMethodForm,u=e.isPaymentMethodFormShown,d=e.setShowSupportForm,f=e.replId,h=e.org,m=e.hasAgentSession,g=(0,iF.useRouter)(),v=(0,iI.Po)(g),y=(0,aa.r)({isOrg:null!=h});if(!t&&v&&y.includes(r))return(0,p.Y)(V.N,{text:i,colorway:"grey",css:af.disabledBanner});if(o)return(0,p.FD)(p.FK,{children:[(0,p.Y)(eX.$n,{colorway:"primary",onClick:l,text:"Included in your subscription",loading:a,css:af.cta}),(0,p.Y)(Z.EY,{color:"dimmer",children:i})]});var w=function(){if(h){var e=(0,al.EG)(h).settings.href.toString()+"/billing";window.open(e,"_blank");return}c()};switch(r){case Y.S4P.RequiresActiveSubscription:return(0,p.Y)(j.S,{css:af.ctaContainer,children:(0,p.Y)(as.A,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:af.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:s,highlightUpsell:"deployments"})});case Y.S4P.RequiresPaymentMethodOrSubscription:return(0,p.FD)(j.S,{css:af.ctaContainer,children:[(0,p.Y)(as.A,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:af.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:s}),(0,p.Y)(eX.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:af.cta,disabled:u,loading:a,iconLeft:(0,p.Y)(ap.A,{}),onClick:w})]});case Y.S4P.RequiresSmsVerification:return(0,p.Y)(ao.A,{context:Y.SGY.Deployments,onSuccess:s});case Y.S4P.RequiresPaymentMethod:return(0,p.Y)(eX.$n,{colorway:"primary",text:"Add a payment method",css:af.cta,disabled:u,loading:a,iconLeft:(0,p.Y)(ap.A,{}),onClick:w});case Y.S4P.PaymentDelinquent:return(0,p.Y)(ac.E,{onClick:w});case Y.S4P.RequiresUnbanning:return(0,p.Y)(ad.d,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to support@replit.com for assistance.",colorway:"warning",iconLeft:(0,p.Y)(na.A,{}),css:af.ctaStatusBanner,onClick:function(){return d()}});case Y.S4P.InsufficientBudget:return(0,p.FD)(p.FK,{children:[(0,p.Y)(V.N,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,p.Y)(na.A,{}),css:af.ctaStatusBanner}),(0,p.Y)(au.h,{onUpdateSuccess:s,replId:f})]});case Y.S4P.FeatureDisabled:case Y.S4P.FeatureUnsupportedForReplitTeams:case Y.S4P.FeatureUnsupportedForTeamsEdu:case Y.S4P.FeatureUnsupportedForTeamsFree:case Y.S4P.FeatureUnsupportedForTeamsPro:case Y.S4P.InsufficientPermissions:case Y.S4P.InsufficientQuota:case Y.S4P.RequiresActiveTeamsSubscription:case Y.S4P.RequiresEmailVerification:if(r===Y.S4P.InsufficientQuota&&"static"===n)return(0,p.FD)(j.S,{css:af.ctaContainer,children:[(0,p.Y)(V.N,{text:"You have reached the maximum number of Static deployments available on your plan.",colorway:"grey",css:af.disabledBanner}),(0,p.Y)(as.A,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:af.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:s})]});return(0,p.Y)(V.N,{text:i,colorway:"grey",css:af.disabledBanner});case Y.S4P.Authorized:case Y.S4P.AuthorizedQuota:return(0,p.FD)(p.FK,{children:[m&&n===Y.Q0q.Static?(0,p.Y)(V.N,{text:"Static deployments are not yet officially supported for Agent Apps.",colorway:"warning",icon:(0,p.Y)(na.A,{}),css:af.cta}):null,(0,p.Y)(eX.$n,{colorway:"primary",onClick:l,text:"Set up your deployment",loading:a,css:af.cta})]});default:(0,iV.A)(r)}}var am=t(92935),ag=t(13843),av=t(78251),ay=t(25827),aw=(0,eO.x)({type:[B.wp.borderRadius(8),B.wp.p(8)]});function ab(e){var n,t,r,i,o=e.replId,a=e.initialState,l=e.fs,c=e.secrets,d=e.dotReplit,h=e.ports,m=e.onBack,v=e.onDeploy,y=e.onError,w=e.openNetworkingPane,b=e.hasAgentSession,S=e.onViewAction,_=(0,u._)((0,f.useState)(a),2),C=_[0],k=_[1],x=(n={variables:{replId:o},onError:function(e){return y(e.message)}},t=(0,s._)({},o9,n),F.I(an,t)),D=x.data,E=x.loading,R=(0,g._k)().scheduledDeploymentCostDetails,I=(null==D?void 0:D.getRepl.__typename)==="Repl"?D.getRepl:null,T=I?(0,av.ER)({replSlug:I.slug,username:null==(r=I.owner)?void 0:r.username}):"";if(E)return(0,p.Y)(e8.cN,{});if(!I)return null;var P=(null==I||null==(i=I.owner)?void 0:i.__typename)==="Team";return C.type===Y.Q0q.Static?(0,p.FD)(p.FK,{children:[(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(eD.K0,{alt:"Back",tooltipBehavior:"hidden",onClick:m,children:(0,p.Y)(rD.A,{})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(tp.ui,{css:aw.type,elevated:!0,children:(0,p.Y)(iE,{label:"Type",fullWidth:!0,children:(0,p.Y)(iD,{name:r5[C.type]})})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(e9.S,{initialSubdomain:T,deploymentId:null,replId:o,provider:C.type,onError:y,onCancel:m,onDeploy:v,dotReplit:d,fs:l,ports:h,secrets:c,openNetworkingPane:w,hasAgentSession:b,onViewAction:S})})]}):C.type===Y.Q0q.Gce?(0,p.FD)(p.FK,{children:[(0,p.Y)(rJ.VW,{replId:o,isTeamRepl:P,onBack:m,onError:y,onChange:function(e){k({type:Y.Q0q.Gce,machine:e})}}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(e9.S,{initialSubdomain:T,deploymentId:null,replId:o,provider:C.type,machine:C.machine,onError:y,onCancel:m,onDeploy:v,fs:l,secrets:c,dotReplit:d,ports:h,openNetworkingPane:w,hasAgentSession:b,onViewAction:S})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.FD)(Z.EY,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,p.Y)("a",{href:ag.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):C.type===Y.Q0q.Cron?(0,p.FD)(p.FK,{children:[(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(e8.fw,{onBack:m})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.FD)(j.S,{gap:4,children:[(0,p.Y)(Z.EY,{variant:"subheadBig",children:"Scheduled Job configuration"}),(0,p.FD)(Z.EY,{variant:"small",color:"dimmer",children:["Scheduled deployments run at a specified time and frequency configured by you. During executions they spin up an on demand machine to run your code. You are billed for the total number of compute units used across all machines plus $",R.fixedCostPerMonth,"/month per scheduled deployment scheduler."]})]})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(ay.K,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app.",children:(0,p.Y)(tp.ui,{css:aw.type,elevated:!0,children:(0,p.Y)(iD,{name:"1 vCPU / 2 GiB RAM",sku:"$".concat(R.fixedConfigurationCostPerSec,"/sec")})})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(e9.S,{initialSubdomain:T,deploymentId:null,replId:o,provider:C.type,onError:y,onCancel:function(){return m()},onDeploy:v,fs:l,secrets:c,dotReplit:d,ports:h,openNetworkingPane:w,hasAgentSession:b,onViewAction:S})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.FD)(Z.EY,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,p.Y)("a",{href:ag.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):C.machine?(0,p.FD)(p.FK,{children:[(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(eD.K0,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){k({type:Y.Q0q.CloudRun,machine:null})},children:(0,p.Y)(rD.A,{})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(tp.ui,{css:aw.type,elevated:!0,children:(0,p.Y)(iE,{label:"Type",fullWidth:!0,children:(0,p.Y)(iD,{name:r5[C.type],sku:"".concat(C.machine.configurationLabel," / ").concat(C.machine.maxInstances," Max"),canManage:!0,onManageClick:function(){k({type:Y.Q0q.CloudRun,machine:null})}})})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(e9.S,{initialSubdomain:T,deploymentId:null,replId:o,provider:C.type,machine:C.machine,onError:y,onCancel:function(){return k({type:Y.Q0q.CloudRun})},onDeploy:v,fs:l,secrets:c,dotReplit:d,ports:h,openNetworkingPane:w,hasAgentSession:b,onViewAction:S})})]}):(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(np.J,{onBack:m,onError:y,onConfirm:function(e){k({type:Y.Q0q.CloudRun,machine:e})}})})}var aS=t(74251),aY=t(79166),a_=t(89588),aA=t(86733),aC=t(41696),ak=t(40831),ax=t(62183),aD=t(28174),aE=t(31015),aR=B.kL.min(600),aI={order:"--provider-order"},aT={order:"var(".concat(aI.order,")")},aF=(0,M.AH)([B.wp.width("100%"),B.wp.maxWidth(340),(0,C._)({},aR,{order:aT.order})]),aP=(0,M.AH)([B.wp.reset.button,B.wp.overflow("hidden"),B.wp.position.relative,B.wp.focusRing,B.wp.borderRadius(),B.wp.width("100%")]),aL=(0,eO.x)({self:[aF,{"&::after":{content:"none"}}],selfLoading:[aF,G.S.foregroundPulse(),B.wp.border({color:ex.LU.backgroundHighest})],button:[aP,B.wp.border({color:ex.LU.outlineDimmer}),{"&:not(.is-disabled)":[rl.b.filledAndOutlined],"&.is-disabled":[B.wp.backgroundColor.backgroundHigher,{cursor:"not-allowed"}]}],buttonActive:[aP,B.wp.cursor.pointer,B.wp.backgroundColor.accentPrimaryDimmest,B.wp.border({color:ex.LU.accentPrimaryStronger})],content:[B.wp.p(8),B.wp.colWithGap(4),(0,C._)({},aR,B.wp.py(12))],contentRecommended:[B.wp.p(8),B.wp.colWithGap(4),(0,C._)({},aR,{paddingTop:12,paddingBottom:20})],recommended:[B.wp.py(4),B.wp.backgroundColor.backgroundHighest],recommendedActive:[B.wp.py(4),B.wp.backgroundColor.accentPrimaryDimmer],icon:[B.wp.display.none,B.wp.color.foregroundDimmer,B.wp.center,(0,C._)({},aR,B.wp.display.flex)],iconActive:[B.wp.display.none,B.wp.color.accentPrimaryStrongest,B.wp.center,(0,C._)({},aR,B.wp.display.flex)],title:[B.wp.center]});function aU(e){var n,t=e.loading,r=e.active,i=e.disabled,o=void 0!==i&&i,a=e.provider,l=e.onClick,s=e.title,c=e.description,u=e.recommended,d=e.index,f=e.isAgentDeployment,h=(n={},(0,C._)(n,Y.Q0q.CloudRun,(0,p.Y)(ak.A,{size:32})),(0,C._)(n,Y.Q0q.Gce,(0,p.Y)(ax.A,{size:32})),(0,C._)(n,Y.Q0q.Static,(0,p.Y)(aD.A,{size:32})),(0,C._)(n,Y.Q0q.Cron,(0,p.Y)(nZ.A,{size:32})),n)[a];return(0,p.Y)("span",{css:t?aL.selfLoading:aL.self,children:(0,p.FD)("button",{css:r?aL.buttonActive:aL.button,className:o?"is-disabled":"",onClick:function(){return l(a)},disabled:t||o,style:(0,C._)({},aI.order,d),children:[u?(0,p.Y)(j.S,{css:r?aL.recommendedActive:aL.recommended,children:(0,p.Y)(Z.EY,{variant:"small",children:f?"Chosen by Agent":"Recommended"})}):null,(0,p.FD)(j.S,{css:u?aL.contentRecommended:aL.content,children:[(0,p.Y)(j.S,{css:r?aL.iconActive:aL.icon,children:h}),(0,p.FD)(j.S,{children:[(0,p.Y)(j.S,{css:aL.title,row:!0,gap:4,children:(0,p.Y)(Z.EY,{variant:"subheadDefault",multiline:!1,children:s})}),(0,p.Y)(Z.EY,{multiline:!1,variant:"small",children:c})]})]})]})})}var aN=(0,eO.x)({container:[B.wp.maxWidth(420),{marginLeft:"auto",marginRight:"auto"}],item:[{display:"grid",gridTemplateColumns:"56px auto",gap:20}],text:[B.wp.flex.growAndShrink(1),B.wp.textAlign.left]});function aO(e){var n=e.header,t=e.info;return(0,p.FD)(j.S,{css:aN.container,gap:12,children:[(0,p.Y)(Z.EY,{variant:"subheadDefault",children:n}),t.map(function(e,n){return(0,p.FD)(j.S,{css:aN.item,align:"center",children:[e.icon,(0,p.Y)(Z.EY,{css:aN.text,children:e.text})]},n)})]})}var aM=[Y.Q0q.Gce,Y.Q0q.CloudRun,Y.Q0q.Static,Y.Q0q.Cron],aH=(0,eO.x)({container:[B.wp.textAlign.center,re.R1.maxWidth],title:[B.wp.width("100%"),B.wp.maxWidth(400),B.wp.align.center,{marginLeft:"auto",marginRight:"auto"}],body:B.wp.colWithGap(16),providers:[B.wp.flex.column,B.wp.align.center,(0,C._)({gap:8},aR,[B.wp.flex.row,B.wp.align.center,{gap:12}])],providerDetails:B.wp.colWithGap(16),ctaGroup:B.wp.colWithGap(8),payment:[B.wp.borderRadius("container"),B.wp.textAlign.left,B.wp.shadow(2)],securityScanSurface:[B.wp.backgroundColor.backgroundHigher,B.wp.borderRadius(),B.wp.p(16),B.wp.align.center,B.wp.maxWidth(352),B.wp.flex.column,B.wp.align.center],securityScanOpenPaneButton:[B.wp.backgroundColor.backgroundHighest]}),aB=function(e){var n,t,r,i,o,a,l=e.replId,c=e.onError,d=e.onDeploy,h=e.onViewAction,m=e.initialSelectedProvider,v=e.hasAgentSession,y=e.flow,b=(0,nn._P)({controlName:"flag-security-scanning"}),k=(0,g.om)(),x=(0,g.g$)(),D=(0,g.Ol)(),E=(0,g.Rh)(),R=(0,g._k)(),I=R.getRvmDeploymentCostDetailsByConfigurationSlug,T=R.autoscaleDeploymentCostDetails,P=R.staticDeploymentCostDetails,L=R.scheduledDeploymentCostDetails,U=(0,u._)((0,f.useState)(!1),2),N=U[0],O=U[1],M=(0,u._)((0,f.useState)(!1),2),H=M[0],B=M[1],z=(0,u._)((0,f.useState)(null!=m?m:null),2),W=z[0],G=z[1],V=(0,g.kM)({replId:l,onError:c,dotReplitService:D}),q=V.activeProvider,K=V.setActiveProvider,$=V.recommendedProvider,J=(0,u._)((0,f.useState)(null!=(o=null==y?void 0:y.skipIntro)&&o),2),Q=J[0],X=J[1],ee=Q&&!!(null==y?void 0:y.isAgentDeployment),en=(n={variables:{id:l},onError:function(e){return c(e.message)}},t=(0,s._)({},ar,n),F.I(ai,t)),et=en.loading,er=en.data,ei=(0,u._)((0,f.useState)(!1),2),eo=ei[0],ea=ei[1],el=(0,g.mj)(),es=el.getDeployabilityByProvider,ec=el.refetch,eu=es(q),ed=eu.deploy,ep=eu.isIncludedInSubscription,ef=ed.isAuthorized,eh=ed.code,em=ed.message,eg=et||eo||void 0===q;(0,f.useEffect)(function(){(0,eU.Ae)({context:"intro"})},[]);var ev=(0,aY.Vv)(),ey=ev.getDescription,ew=ev.Icon,eb=(null==er||null==(r=er.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=er.getRepl.org)?void 0:i.type)==="team"?er.getRepl.org:void 0;(0,f.useEffect)(function(){Q&&ef&&void 0!==q&&W!==q&&G(q)},[q,W,Q,ef]);var eS=(0,f.useCallback)((0,w._)(function(){return(0,S.YH)(this,function(e){switch(e.label){case 0:return ea(!0),[4,ec()];case 1:return e.sent(),ea(!1),[2]}})}),[ec,ea]);if(W)return(0,p.Y)(ab,{replId:l,initialState:W?{type:W}:{type:Y.Q0q.Gce,didCheckout:!0},fs:k,secrets:x,dotReplit:D,ports:E,onDeploy:d,onBack:function(){X(!1),G(null)},onError:c,hasAgentSession:v,openNetworkingPane:function(){h({type:_.k.OpenPane,payload:{type:"networking"}})},onViewAction:h});var eY=(a={title:"Deploy to production",subtitle:ey({type:"deployments"})},(0,C._)(a,Y.Q0q.Gce,{display:!0,title:"Reserved VM",subtitle:"Always On Servers",header:"Reserved VMs are for long-running jobs and apps",info:[{text:"Reserved VMs ensure high uptime, minimizing disruptions for apps requiring persistent session data.",icon:(0,p.Y)(am.Qm,{})},{text:"Reserved VMs are billed hourly starting at $".concat(I("e2-small").costPerHour,"/hour."),icon:(0,p.Y)(am.QX,{})},{text:"Suitable for bots, stateful APIs, webscraping, and long-running jobs.",icon:(0,p.Y)(am.XD,{})}]}),(0,C._)(a,Y.Q0q.CloudRun,{display:!0,title:"Autoscale",subtitle:"".concat($===Y.Q0q.CloudRun?"Best choice for most apps":"Meet demand exactly"),header:"Scale up and down to meet demand exactly",info:[{text:"Automatically scales from zero to any level of demand, making it inexpensive for most apps and effortless when you go viral.",icon:(0,p.Y)(am.Js,{})},{text:"Usage-based pricing. Billed at $".concat(T.costPerComputeUnitUsd," per compute unit, plus a fixed cost of $").concat(T.fixedCostPerMonth," per month per deployment."),icon:(0,p.Y)(am.iw,{})},{text:"Suitable for web apps and stateless APIs.",icon:(0,p.Y)(am.XD,{})}]}),(0,C._)(a,Y.Q0q.Static,{display:!0,title:"Static pages",subtitle:"Simple HTML websites",header:"Basic websites with no backend server",info:[{text:"You only pay for outbound data transfer included in Replit plans. $".concat(P.outboundDataCostPerGib,"/GiB otherwise."),icon:(0,p.Y)(am.ly,{})},{text:"No database or data persistence.",icon:(0,p.Y)(am.Y9,{})},{text:"Suitable for HTML, CSS, JavaScript sites.",icon:(0,p.Y)(am.XD,{})}]}),(0,C._)(a,Y.Q0q.Cron,{display:!0,title:"Scheduled",subtitle:"Time-based job scheduler",header:"The easiest way to schedule for your apps to run",info:[{text:"Scheduled deployments run at a specified time and frequency configured by you.",icon:(0,p.Y)(am.Y9,{})},{text:"Usage-based pricing. Each scheduled job is billed at $".concat(L.costPerComputeUnitUsd," per compute unit + $").concat(L.fixedCostPerMonth," per month for the scheduler."),icon:(0,p.Y)(am.iw,{})},{text:"Suitable for internal tools, one-off tasks, and Cron jobs.",icon:(0,p.Y)(am.XD,{})}]}),a);return(0,p.FD)(A.A,{centered:!0,children:[(0,p.Y)(e0.a,{isOpen:H,onRequestClose:function(){return B(!1)},children:(0,p.Y)(aC.A,{onRequestClose:function(){return B(!1)}})}),(0,p.FD)(j.S,{css:aH.container,gap:32,children:[Q?null:(0,p.FD)(j.S,{css:aH.title,gap:4,children:[(0,p.Y)(ew,{pane:{type:"deployments"},size:48}),(0,p.Y)(Z.Y9,{level:1,variant:"subheadBig",children:eY.title}),(0,p.FD)(Z.EY,{color:"dimmer",children:[eY.subtitle," ",(0,p.Y)("a",{href:"https://docs.replit.com/category/replit-deployments",target:"_blank",rel:"noopener",children:"Learn more."})]}),(0,p.Y)(aA.v,{iconLeft:(0,p.Y)(aE.A,{}),text:" Choosing the right deployment type",href:"https://www.youtube.com/watch?v=sXP5d0k1atk",target:"_blank"})]}),(0,p.FD)(j.S,{css:aH.body,children:[(0,p.Y)(j.S,{css:aH.providers,children:aM.map(function(e,n){if(!eY[e].display)return null;var t=eY[e],r=t.title,i=t.subtitle,o=q===e,a=$===e;return(0,p.Y)(aU,{provider:e,loading:eg,active:o,onClick:function(e){K(e),O(!1)},title:r,description:i,recommended:a,index:e===$&&0===n?1.5:e===$&&2===n?.5:n,disabled:ee&&!a,isAgentDeployment:(null==y?void 0:y.isAgentDeployment)&&a},e)})}),(0,p.FD)(j.S,{css:aH.ctaGroup,children:[(0,p.Y)(ah,{loading:eg,provider:q,isDeployable:ef,isDeployableCode:eh,isDeployableExplanation:em,isIncludedInSubscription:ep,onProviderContinue:function(){q&&(Q||G(q))},refetchDeployabilityQueryData:eS,setShowPaymentMethodForm:function(){return O(!0)},isPaymentMethodFormShown:N,setShowSupportForm:function(){return B(!0)},org:eb,replId:l,hasAgentSession:v}),N?(0,p.Y)(tp.ui,{elevated:!0,css:aH.payment,p:16,children:(0,p.Y)(aS.y,{onClose:(0,w._)(function(){return(0,S.YH)(this,function(e){switch(e.label){case 0:return O(!1),[4,eS()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,p.Y)(j.S,{css:aH.providerDetails,children:!Q&&q?(0,p.Y)(aO,{header:eY[q].header,info:eY[q].info}):null}),b?(0,p.Y)(j.S,{row:!0,justify:"center",children:(0,p.Y)(tp.ui,{css:aH.securityScanSurface,children:(0,p.FD)(j.S,{justify:"center",gap:8,children:[(0,p.FD)(j.S,{row:!0,gap:4,align:"center",justify:"center",children:[(0,p.Y)(Z.EY,{children:"Security scan"}),(0,p.Y)(nG.a,{colorway:"primary",text:"Beta",variant:"filled"})]}),(0,p.Y)(j.S,{children:(0,p.Y)(Z.EY,{variant:"small",color:"dimmer",children:"Identify potential vulnerabilities by running a security scan powered by our partner, Semgrep."})}),(0,p.Y)(eX.$n,{css:aH.securityScanOpenPaneButton,text:"Run scan on Replit using ",iconRight:(0,p.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(a_.q,{}),(0,p.Y)(no.A,{color:ex.LU.foregroundDimmest})]}),onClick:function(){h({type:_.k.OpenPane,payload:{type:"securityScan"}}),(0,nr.kB)(nr.aJ.DEPLOYMENT_PANE_COVER_PAGE)}})]})})}):null]})]})},az=t(58271),aW=t(35992);function aG(){var e=(0,I._)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n    level\n    isFromReplit\n    deploymentId\n    executionId\n    buildId\n  }\n"]);return aG=function(){return e},e}function aV(){var e=(0,I._)(["\n  query HostingDeploymentLogs2(\n    $replId: String!\n    $deploymentId: String!\n    $executionId: String\n    $start: DateTime\n    $end: DateTime\n    $message: String\n    $level: LogLevel\n    $limit: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(\n          deploymentId: $deploymentId\n          executionId: $executionId\n          start: $start\n          end: $end\n          message: $message\n          level: $level\n          limit: $limit\n        ) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return aV=function(){return e},e}function aZ(){var e=(0,I._)(["\n  subscription HostingDeploymentLogUpdates(\n    $input: HostingDeploymentLogUpdatesInput!\n  ) {\n    hostingDeploymentLogUpdates(input: $input) {\n      ...ReplLogLine2\n    }\n  }\n  ","\n"]);return aZ=function(){return e},e}var aj={},aq=(0,T.J1)(aG()),aK=(0,T.J1)(aV(),aq),a$=(0,T.J1)(aZ(),aq),aJ=t(35812),aQ=t(31092),aX=(0,f.createContext)(null),a0=function(){var e=(0,f.useContext)(aX);if(!e)throw Error("Expected log context in context");return e},a1=function(e){var n,t,r,i,o=e.deploymentId,a=e.replId,l=e.executionId,d=e.openFile,p=(0,u._)((0,f.useState)(null),2),h=p[0],m=p[1],g=(0,u._)((0,f.useState)([]),2),v=g[0],y=g[1],Y=(0,u._)((0,f.useState)(),2),_=Y[0],A=Y[1],C=(0,u._)((0,f.useState)({message:"",executionId:l,start:null,end:null,level:null}),2),k=C[0],x=C[1],D=(0,f.useCallback)(function(){return x({message:"",executionId:l,start:null,end:null,level:null})},[l]),E=(0,u._)((0,f.useState)(!0),2),R=E[0],I=E[1],T=(0,u._)((0,f.useState)(!1),2),P=T[0],L=T[1],U=(0,u._)((0,f.useState)(!1),2),N=U[0],O=U[1],M=(0,u._)((0,f.useState)(!1),2),H=M[0],B=M[1],z=(0,u._)((0,aJ.A)("deployments-logs-color",!0),2),W=z[0],G=z[1],V=(0,f.useRef)(!1),Z=(0,aQ.A)(function(e){var n=e.width;if(void 0!==n){var t=n>500;O(t),V.current||(V.current=!0,L(t))}}),j=(0,az.Xj)(),q=(n={ssr:!1,fetchPolicy:"network-only",variables:{deploymentId:o,replId:a,executionId:k.executionId?"d-scheduled-".concat(o,"-").concat(k.executionId):void 0,limit:100,level:k.level,message:k.message,start:null==(r=k.start)?void 0:r.toDate(j).toISOString(),end:null==(i=k.end)?void 0:i.toDate(j).toISOString()},onError:function(){A("Something went wrong"),y([])},onCompleted:function(e){if("hostingDeploymentLogs"in e.getRepl)if("ReplLogs"===e.getRepl.hostingDeploymentLogs.__typename){A(void 0);var n=e.getRepl.hostingDeploymentLogs.result,t=(0,b._)(n).reverse();if(!h)if(n.length>0){var r=new Date(n[0].timestamp);r.setSeconds(r.getSeconds()+1),m(r.toISOString())}else m(new Date().toISOString());y(t)}else A(e.getRepl.hostingDeploymentLogs.message),y([])}},t=(0,s._)({},aj,n),F.I(aK,t)),K=q.loading,$=q.fetchMore,J=q.subscribeToMore,Q=q.variables;(0,f.useEffect)(function(){K&&m(null)},[K]),(0,f.useEffect)(function(){m(null)},[k,o,a,l]),(0,f.useEffect)(function(){var e,n;if(h)return J({document:a$,variables:{input:{deploymentId:o,executionId:l,message:k.message,start:k.end?null==(e=k.start)?void 0:e.toDate(j).toISOString():h,end:null==(n=k.end)?void 0:n.toDate(j).toISOString(),level:k.level||void 0}},updateQuery:function(e,n){var t=n.subscriptionData;return(0,aW.jM)(e,function(e){if(!("hostingDeploymentLogs"in e.getRepl))return e;if("ReplLogs"===e.getRepl.hostingDeploymentLogs.__typename){var n=t.data.hostingDeploymentLogUpdates;e.getRepl.hostingDeploymentLogs.result.unshift(n)}return e})}})},[J,o,l,K,k,h,j]);var X=(0,f.useRef)(null),ee=(0,f.useRef)(!1),en=(0,f.useRef)(!1),et=(0,f.useCallback)((0,w._)(function(){var e,n,t,r;return(0,S.YH)(this,function(i){switch(i.label){case 0:if(e=X.current?Math.abs(X.current.getTime()-Date.now()):0,K||X.current&&e<500||en.current||ee.current)return[2];return(n=new Date(v[0].timestamp)).setSeconds(n.getSeconds()-1),ee.current=!0,[4,$({variables:(0,c._)((0,s._)({},Q),{end:n.toISOString()})})];case 1:return t=i.sent().data,ee.current=!1,"hostingDeploymentLogs"in t.getRepl&&"ReplLogs"===t.getRepl.hostingDeploymentLogs.__typename&&(X.current=new Date,0===t.getRepl.hostingDeploymentLogs.result.length?en.current=!0:(r=(0,b._)(t.getRepl.hostingDeploymentLogs.result).reverse(),y(function(e){return(0,b._)(r).concat((0,b._)(e))}))),[2]}})}),[$,K,v,Q]);return(0,f.useMemo)(function(){return{logs:v,loading:K,error:_,fetchPage:et,isLive:R,setIsLive:I,isExpanded:P,setIsExpanded:L,filter:k,setFilter:x,clearFilter:D,deploymentId:o,containerRef:Z,isWide:N,isWrapped:H,setIsWrapped:B,openFile:d,isColorful:W,setIsColorful:G}},[D,Z,o,_,et,k,W,P,R,N,H,K,v,d,G])},a2=t(4880),a4=t(93707),a5=t(90629),a3=t(12317),a7=t(46231),a6=t.n(a7),a8=t(53054),a9=(0,eO.x)({root:[B.wp.transition.none,B.wp.reset.button,B.wp.flex.row,B.wp.align.center,B.wp.font.code,B.wp.fontSize(12),B.wp.textAlign.left,B.wp.position.absolute,B.wp.top(0),B.wp.left(0),B.wp.width("100%"),B.wp.color.foregroundDefault,B.wp.border({color:ex.LU.outlineDimmest,direction:"bottom"}),B.wp.highRes({borderWidth:.5}),{outline:"none",userSelect:"auto","--cell-background":"".concat(ex.LU.backgroundDefault),"&:hover":{backgroundColor:ex.LU.interactiveBackground,"--cell-background":"".concat(ex.LU.interactiveBackground),".copy":{display:"block"}},'&[data-error="true"]':[B.wp.colorMixBg(ex.LU.accentNegativeDimmest,"transparent"),{borderBottomColor:ex.LU.accentNegativeDimmest,boxShadow:"0 -1px 0 0 "+ex.LU.accentNegativeDimmest,"&:hover":{"--cell-background":"".concat(ex.LU.accentNegativeDimmest),backgroundColor:"var(--cell-background) !important"},"&:active":{boxShadow:"0 -1px 0 0 "+ex.LU.accentPrimaryDefault}},B.wp.highRes({boxShadow:"0 -0.5px 0 0 "+ex.LU.accentNegativeDimmest,"&:active":{boxShadow:"0 -0.5px 0 0 "+ex.LU.accentPrimaryDefault}})]}],primaryCell:[B.wp.display.block,B.wp.pl(6),B.wp.py(6),B.wp.pr(4),B.wp.flex.growAndShrink(1),B.wp.minHeight(26),{whiteSpace:"nowrap",'&[data-wrapped="true"]':{whiteSpace:"normal"},'&[data-new-flag="false"]':{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",'&[data-wrapped="true"]':{whiteSpace:"normal"}},a:{color:"inherit","&:hover":{textDecoration:"underline"}}}],secondaryCell:[B.wp.p(6),B.wp.color.foregroundDimmest,B.wp.truncate,{'&[data-error="true"]':B.wp.color.accentNegativeStrongest}],copyColumn:[{display:"none",position:"absolute",top:"50%",zIndex:1,left:"calc(var(--width) + var(--scroll-left-offset))",transform:"translate(-100%, -50%)"}],copyButton:[{backgroundColor:"var(--cell-background) !important",color:"inherit"}]}),le=(0,f.memo)(function(e){var n=e.log,t=e.y,r=e.height,i=e.resizeRef,o=e.index,a=e.isScrolling,l=e.columns,s=a0(),c=s.isWrapped,u=s.isColorful&&n.level===Y.$bb.Error&&["INFO","DEBUG","TRACE"].every(function(e){return!n.line.includes(e)}),d=(0,f.useMemo)(function(){return(0,a8.A)(n.line)},[n.line]);return(0,p.FD)("div",{tabIndex:0,role:"button",title:d,css:a9.root,style:{height:r,transform:"translateY(".concat(t,"px)")},"data-error":u,children:[l.map(function(e,t){var r=t===l.length-1,a=e.renderCell(n);return(0,p.Y)(j.S,{css:r?a9.primaryCell:a9.secondaryCell,style:{width:e.width},innerRef:r?i:void 0,"data-index":o,"data-error":u,"data-wrapped":c,children:a},e.key)}),(0,p.Y)("span",{css:a9.copyColumn,className:"copy",children:!a&&(0,p.Y)(oy.r,{textToCopy:d,tooltipDisable:!0,css:a9.copyButton})})]})}),ln=t(61358),lt=t(64852),lr=new ln.tQ,li=function(e){var n,t,r,i=e.log,o=e.files,a=a0().openFile,l=i.line;l=i.level===Y.$bb.Error?(0,a8.A)(i.line):lr.toHtml(i.line);var s=(0,u._)((0,f.useState)([]),2),c=s[0],d=s[1];(0,f.useEffect)(function(){(0,lt.C)(l,function(){return Promise.resolve(o)}).then(function(e){return d(e)})},[o,l]);var h=(0,f.useCallback)(function(e){e.preventDefault();var n=e.target;n.dataset.file&&a({path:n.dataset.file})},[a]);return(0,p.Y)("div",{dangerouslySetInnerHTML:{__html:(n=l,c.sort(function(e,n){return e.from-n.from}),t="",r=0,c.forEach(function(e){t+=n.slice(r,e.from);var i=n.slice(e.from,e.to);t+='<a href="#" data-file="'.concat(e.file,'">').concat(i,"</a>"),r=e.to}),t+=n.slice(r))},onKeyDown:h,onClick:h})},lo=t(17548),la=t(22074),ll=function(e){var n=e.scrollRef,t=e.scrollBottomRef,r=(0,f.useRef)(!1);return(0,lo.S)(function(){n.current&&setTimeout(function(){t.current&&((0,la.A)(t.current),r.current=!0)},0)}),{didInitialScroll:r}},ls=function(e){var n,t=e.didInitialScroll,r=e.itemHeight,i=e.scrollRef,o=a0(),a=o.fetchPage,l=o.setIsLive,s=(0,u._)((0,f.useState)(!1),2),c=s[0],d=s[1],p=(0,u._)((0,f.useState)(0),2),h=p[0],m=p[1],g=(0,u._)((0,f.useState)(0),2),v=g[0],y=g[1],b=(0,f.useRef)(),Y=(0,f.useRef)(!1);(0,f.useEffect)(function(){i.current&&m(i.current.offsetWidth-i.current.clientWidth)},[i]);var _=(0,f.useCallback)(function(e){(b.current||c)&&clearTimeout(b.current),d(!0),b.current=setTimeout(function(){d(!1),y(e.scrollLeft)},100)},[c]);return{scrollHandler:(0,f.useCallback)((n=(0,w._)(function(e){var n,i,o,s,c,u,d;return(0,S.YH)(this,function(p){switch(p.label){case 0:if(!(n=e.currentTarget)||Y.current)return[2];if(_(n),i=n.scrollHeight,o=n.scrollTop,l(c=i-(s=n.clientHeight)===o),u=20*r,!(!c&&o<u&&i>s&&t.current))return[3,5];Y.current=!0,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,a()];case 2:return p.sent(),[3,4];case 3:return d=p.sent(),a5.Cp(d),[3,4];case 4:Y.current=!1,p.label=5;case 5:return[2]}})}),function(e){return n.apply(this,arguments)}),[_,l,r,t,a]),isScrolling:c,scrollLeftOffset:v-h}},lc=function(e){var n=e.scrollRef,t=e.scrollBottomRef,r=a0(),i=r.loading,o=r.logs,a=r.isLive,l=r.isWrapped,s=(0,f.useRef)(0),c=(0,f.useRef)(o[0]),u=(0,f.useCallback)(function(){t.current&&(0,la.A)(t.current)},[t]);(0,f.useEffect)(function(){var e=n.current;if(e&&!i&&0!==o.length){if(a)e.scrollHeight>e.clientHeight&&u();else if(c.current&&c.current.timestamp>o[0].timestamp){var t=e.scrollHeight;if(t!==s.current){var r=t-s.current,l=e.scrollTop;e.scrollTo({top:l+r,behavior:"instant"})}}c.current=o[0],s.current=e.scrollHeight}},[a,i,o,n,u]);var d=(0,f.useRef)(l);(0,f.useEffect)(function(){a&&d.current!==l&&(u(),d.current=l)},[a,l,u])},lu=(0,eO.x)({root:[{overflow:"auto"},B.wp.flex.growAndShrink(1)],virtualTable:[B.wp.width("100%"),B.wp.position.relative],tableHeader:[B.wp.display.flex,B.wp.flex.row,B.wp.backgroundColor.backgroundDefault,B.wp.position.sticky,B.wp.zIndex(1),B.wp.top(0),B.wp.border({color:ex.LU.outlineDimmest,direction:"bottom"})],columnHeader:[B.wp.color.foregroundDimmer,B.wp.fontSize(12),{lineHeight:"18px"},B.wp.px(6),B.wp.justify.center],infoTooltip:[B.wp.display.flex,B.wp.align.center,B.wp.gap(4),{lineHeight:0}],bottomAnchor:[B.wp.position.absolute,B.wp.bottom(0),B.wp.left(0),B.wp.right(0)]}),ld=function(){var e=a0().isColorful,n=(0,nX.V)();return(0,f.useMemo)(function(){var t={};if(n){var r=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(n)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=(0,u._)(a.value,2),c=s[0],d=s[1];t["--ansi-".concat(a6()(c))]=e?d:"currentColor"}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}return t},[e,n])};function lp(){var e=a0(),n=e.loading,t=e.error,r=e.logs,i=e.isExpanded,o=e.isWrapped,a=e.isWide,l=!!(n||t),c=(0,f.useRef)(null),d=(0,f.useRef)(null),h=(0,iI.m6)(),m=ld(),v=h?44:26,y=(0,a2.Te)({count:(null==r?void 0:r.length)||0,getScrollElement:function(){return c.current},estimateSize:function(){return v},overscan:10,measureElement:function(e){return e.getBoundingClientRect().height},rangeExtractor:function(e){var n=new Set([0].concat((0,b._)((0,a4.vp)(e))));return(0,b._)(n)}});lc({scrollRef:c,scrollBottomRef:d});var w=ls({didInitialScroll:ll({scrollRef:c,scrollBottomRef:d}).didInitialScroll,itemHeight:v,scrollRef:c}),S=w.scrollHandler,_=w.isScrolling,A=w.scrollLeftOffset,C=(0,g.cF)(),k=(null==C?void 0:C.provider)===Y.Q0q.Cron,x=(0,f.useMemo)(function(){var e;return 8*(e=Math).max.apply(e,(0,b._)((null==r?void 0:r.map(function(e){return e.line.length}))||[]))},[r]),D=(0,g.om)().listFiles,E=(0,u._)((0,f.useState)([]),2),R=E[0],I=E[1];(0,f.useEffect)(function(){D().then(function(e){e.files&&I(e.files)})},[D]);var T=(0,iI.m6)(),F=(0,f.useMemo)(function(){return[{key:"time",title:(0,p.FD)("span",{css:lu.infoTooltip,children:["Time",!T&&(0,p.Y)(tf.m_,{tooltip:"Logs persist for up to 30 days",css:lu.infoTooltip,children:(0,p.Y)(ie.A,{size:12})})]}),width:a?173:115,renderCell:function(e){var n=(0,a3.A)(e.timestamp);return(0,ei.A)(n,a?"yyyy-MM-dd HH:mm:ss.SS":"MM-dd HH:mm:ss")}},i&&{key:"build",title:"Deployment",width:75,renderCell:function(e){var n=e.buildId.split("-");return n?n[0]:e.buildId}},k&&{key:"run",title:"Run",width:50,renderCell:function(e){var n,t=null==(n=e.executionId)?void 0:n.split("-");return t?t[t.length-1]:""}},i&&{key:"source",title:"Source",width:57,renderCell:function(e){return e.isFromReplit?"System":"User"}},{width:o?void 0:x,key:"log",title:"Log",renderCell:function(e){return(0,p.Y)(li,{files:R,log:e})}}].filter(Boolean)},[R,k,i,T,a,o,x]),P=(0,f.useMemo)(function(){return F.reduce(function(e,n){return e+(n.width||0)},0)},[F]);return(0,p.Y)(j.S,{innerRef:c,css:lu.root,onScroll:S,children:(0,p.FD)(j.S,{style:(0,s._)({height:y.getTotalSize(),minWidth:P,"--scroll-left-offset":"".concat(A,"px")},m),css:lu.virtualTable,children:[(0,p.Y)(j.S,{css:lu.tableHeader,children:F.map(function(e){return(0,p.Y)(j.S,{tag:"div",css:lu.columnHeader,style:{width:e.width,flex:e.width?void 0:1,height:v},children:e.title},e.key)})}),y.getVirtualItems().map(function(e){var n=r[e.index];return n?(0,p.Y)(le,{log:n,height:e.size,y:e.start,resizeRef:y.measureElement,index:e.index,disabled:l,isScrolling:_,columns:F},e.key.toString()):null}),(0,p.Y)("div",{ref:d,css:lu.bottomAnchor})]})})}var lf=(0,eO.x)({root:[B.wp.flex.grow(1)],noLogsText:[B.wp.textAlign.center],viewError:[B.wp.pt(0)]});function lh(){var e=a0(),n=e.logs,t=e.error;return e.loading?(0,p.Y)(A.A,{css:lf.root,centered:!0,children:(0,p.Y)(e8.cN,{})}):0===n.length?(0,p.FD)(p.FK,{children:[t?(0,p.Y)(e8.Wx,{css:lf.viewError,text:t}):null,(0,p.Y)(A.A,{css:lf.root,children:(0,p.FD)(j.S,{pt:4,gap:8,children:[(0,p.Y)(Z.EY,{css:lf.noLogsText,children:"No logs are available."}),(0,p.FD)(Z.EY,{color:"dimmer",css:lf.noLogsText,children:["Having trouble?"," ",(0,p.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return(0,eU.Ae)({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})})]}):(0,p.Y)(lp,{})}var lm=t(91873),lg=t(46726),lv=(0,eO.x)({buttonGroup:[B.wp.flex.row,B.wp.rowWithGap(1),{button:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}}]});function ly(e){var n=e.onClear,t=e.label,r=e.buttonProps,i=e.children,o=n?"primary":void 0,a=(0,u._)((0,f.useState)(!1),2),l=a[0],c=a[1];return(0,p.FD)(lg.Y,{css:lv.buttonGroup,children:[(0,p.FD)(im.Wv,{label:t,isOpen:l,onOpenChange:c,background:"higher",children:[(0,p.Y)(eX.$n,(0,s._)({colorway:o},r)),i]}),n?(0,p.Y)(eX.$n,{colorway:o,text:"",iconLeft:(0,p.Y)(e2.A,{}),onClick:n}):null]})}var lw=t(47245),lb=(0,eO.x)({section:[B.wp.gap(8)],dateRangeInputs:[B.wp.display.grid,B.wp.gap(8),B.wp.align.center,{gridTemplateColumns:"min-content 200px",gridAutoFlow:"row",gridAutoRows:"1fr"}]}),lS=function(){var e=a0(),n=e.filter,t=e.setFilter;return(0,p.FD)(j.S,{css:lb.dateRangeInputs,children:[(0,p.Y)(lw.J,{variant:"text",children:"After"}),(0,p.Y)(lm.A,{granularity:"minute",hourCycle:24,value:n.start,onChange:function(e){return t(function(n){return(0,c._)((0,s._)({},n),{start:e})})}}),(0,p.Y)(lw.J,{variant:"text",children:"Before"}),(0,p.Y)(lm.A,{granularity:"minute",hourCycle:24,value:n.end,onChange:function(e){return t(function(n){return(0,c._)((0,s._)({},n),{end:e})})}})]})},lY=function(){var e=a0(),n=e.filter,t=e.setFilter,r=(0,az.Xj)(),i=n.start||n.end,o="Date",a=n.start&&(0,ei.A)(n.start.toDate(r),"M/d/yy"),l=n.end&&(0,ei.A)(n.end.toDate(r),"M/d/yy");return a&&l?o="".concat(a," to ").concat(l):a?o="After ".concat(a):l&&(o="Before ".concat(l)),(0,p.Y)(ly,{label:"Date range",onClear:i?function(){return t(function(e){return(0,c._)((0,s._)({},e),{start:null,end:null})})}:void 0,buttonProps:{text:o,iconRight:i?void 0:(0,p.Y)(th.A,{})},children:(0,p.Y)(j.S,{css:lb.section,p:8,children:(0,p.Y)(lS,{})})})},l_=t(28908),lA=function(){var e=a0(),n=e.filter,t=e.setFilter,r=(0,u._)((0,f.useState)(n.executionId),2),i=r[0],o=r[1];return(0,f.useEffect)(function(){o(n.executionId)},[n.executionId]),(0,p.Y)(ol.pd,{placeholder:"*****",value:i||"",onChange:function(e){var n=e.target.value;o(n),n&&5!==n.length||t(function(e){return(0,c._)((0,s._)({},e),{executionId:n})})},onBlur:function(){return t(function(e){return(0,c._)((0,s._)({},e),{executionId:i})})},onKeyDown:function(e){"Enter"===e.key&&t(function(e){return(0,c._)((0,s._)({},e),{executionId:i})})}})},lC=function(){var e=a0(),n=e.filter,t=e.setFilter;return(0,p.Y)(ly,{onClear:n.executionId?function(){return t(function(e){return(0,c._)((0,s._)({},e),{executionId:null})})}:void 0,label:"Run ID",buttonProps:{text:n.executionId?"Run: ".concat(n.executionId):"Run ID",iconRight:n.executionId?void 0:(0,p.Y)(th.A,{})},children:(0,p.Y)(j.S,{p:8,children:(0,p.Y)(l_.A_,{children:(0,p.Y)(lA,{})})})})},lk=t(28290),lx=t(52749),lD=t(53384);function lE(e){return(0,p.Y)(iv.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M1.25 6A.75.75 0 0 1 2 5.25h20a.75.75 0 0 1 0 1.5H2A.75.75 0 0 1 1.25 6Zm3 6a.75.75 0 0 1 .75-.75h14a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75Zm3 6a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var lR=function(){var e=(0,g.cF)();return(null==e?void 0:e.provider)===Y.Q0q.Cron},lI=(0,eO.x)({root:[{"> *:first-child":B.wp.flex.grow(1)}],divider:B.wp.backgroundColor.outlineDimmer,section:[B.wp.p(8),B.wp.gap(8)],clearFilterButton:[B.wp.borderRadius(0),B.wp.width("fit-content")]}),lT=function(){var e=a0(),n=e.filter,t=e.setFilter,r=function(){t(function(e){return(0,c._)((0,s._)({},e),{level:e.level===Y.$bb.Error?null:Y.$bb.Error})})};return(0,p.Y)(eX.$n,{colorway:n.level===Y.$bb.Error?"primary":void 0,text:"Errors only",iconLeft:(0,p.Y)(lx.S,{onChange:r,checked:n.level===Y.$bb.Error}),onClick:r})},lF=function(){var e=lR();return(0,p.FD)(p.FK,{children:[(0,p.Y)(lT,{}),(0,p.Y)(lY,{}),e&&(0,p.Y)(lC,{})]})},lP=function(){var e=a0(),n=e.filter,t=e.setFilter,r=e.clearFilter,i=lR(),o=!!(n.message||n.level||n.start||n.end||n.executionId),a=(0,lk.c)();return(0,p.Y)(ly,{label:"Filter",buttonProps:{text:"",iconLeft:(0,p.Y)(lE,{})},onClear:o?r:void 0,children:(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{p:8,row:!0,gap:8,children:[(0,p.Y)(lx.S,{name:"Filter by errors only",id:a("errors-only"),checked:n.level===Y.$bb.Error,onChange:function(e){return t(function(n){return(0,c._)((0,s._)({},n),{level:e?Y.$bb.Error:null})})}}),(0,p.Y)("label",{htmlFor:a("errors-only"),children:"Errors only"})]}),i?(0,p.FD)(p.FK,{children:[(0,p.Y)(tQ.a,{css:lI.divider}),(0,p.Y)(j.S,{css:lI.section,children:(0,p.FD)(l_.A_,{children:[(0,p.Y)(lw.J,{color:"dimmer",children:"Run ID"}),(0,p.Y)(lA,{})]})})]}):null,(0,p.Y)(tQ.a,{css:lI.divider}),(0,p.FD)(j.S,{css:lI.section,children:[(0,p.Y)(lw.J,{color:"dimmer",children:"Date range"}),(0,p.Y)(lS,{})]}),(0,p.Y)(tQ.a,{css:lI.divider}),(0,p.Y)(eX.$n,{variant:"nofill",onClick:function(){return r()},text:"Clear all filters",alignment:"start",css:lI.clearFilterButton})]})})};function lL(){var e=a0(),n=e.filter,t=e.setFilter,r=e.isWide,i=(0,u._)((0,f.useState)(n.message),2),o=i[0],a=i[1];return(0,f.useEffect)(function(){a(n.message)},[n.message]),(0,p.FD)(j.S,{css:lI.root,p:8,row:!0,gap:8,children:[(0,p.Y)(lD.I,{placeholder:"Search",value:o,onChange:function(e){a(e.target.value),""===e.target.value&&t(function(e){return(0,c._)((0,s._)({},e),{message:""})})},onBlur:function(){return t(function(e){return(0,c._)((0,s._)({},e),{message:o})})},onClear:function(){t(function(e){return(0,c._)((0,s._)({},e),{message:""})})},onKeyDown:function(e){"Enter"===e.key&&t(function(e){return(0,c._)((0,s._)({},e),{message:o})})}}),r?(0,p.Y)(lF,{}):(0,p.Y)(lP,{})]})}function lU(e){return(0,p.Y)(iv.Ay,(0,c._)((0,s._)({},e),{viewBox:"0 0 16 16",fill:"none",children:(0,p.Y)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 11.5H10A3.5 3.5 0 0013.5 8v0A3.5 3.5 0 0010 4.5H2.5m2 7L7 9m-2.5 2.5L7 14"})}))}var lN=t(67843),lO=t(83861),lM=(0,eO.x)({root:[B.wp.border({color:ex.LU.outlineDimmest,direction:"top"}),B.wp.height(29)],group:[B.wp.display.flex,B.wp.rowWithGap(8)],button:[B.wp.color.foregroundDefault,B.wp.borderRadius(0),B.wp.height("100%")],liveIndicatorWrapper:[B.wp.width(16),B.wp.height(16),B.wp.display.flex,B.wp.align.center,B.wp.justify.center],liveIndicator:[B.wp.width(6),B.wp.height(6),B.wp.borderRadius("full"),B.wp.backgroundColor.accentPositiveStronger],checkboxWrapper:[B.wp.display.flex,B.wp.align.center,B.wp.rowWithGap(4),B.wp.cursor.pointer],checkbox:[{input:[B.wp.width(16),B.wp.height(16)]}]});function lH(){var e=a0(),n=e.isLive,t=e.setIsLive,r=e.isExpanded,i=e.setIsExpanded,o=e.isWrapped,a=e.setIsWrapped,l=e.isColorful,s=e.setIsColorful,c=(0,lk.c)();return(0,p.FD)(j.S,{css:lM.root,row:!0,gap:8,justify:"space-between",children:[(0,p.FD)(j.S,{css:lM.group,children:[(0,p.Y)(eX.$n,{iconLeft:r?(0,p.Y)(eE.A,{rotate:90}):(0,p.Y)(eR.A,{rotate:90}),onClick:function(){return i(function(e){return!e})},variant:"nofill",text:r?"Collapse":"Expand",css:lM.button}),(0,p.FD)("label",{css:lM.checkboxWrapper,htmlFor:c("wrap"),children:[(0,p.Y)(lx.S,{id:c("wrap"),checked:o,onChange:function(){return a(function(e){return!e})},css:lM.checkbox}),(0,p.Y)(lU,{}),(0,p.Y)("span",{children:"Wrap"})]}),(0,p.FD)("label",{css:lM.checkboxWrapper,htmlFor:c("colorful"),children:[(0,p.Y)(lx.S,{id:c("colorful"),checked:l,onChange:function(){return s(function(e){return!e})},css:lM.checkbox}),(0,p.Y)(lO.A,{}),(0,p.Y)("span",{children:"Colors"})]})]}),(0,p.Y)(j.S,{css:lM.group,children:(0,p.Y)(eX.$n,{iconLeft:n?(0,p.Y)(j.S,{css:lM.liveIndicatorWrapper,children:(0,p.Y)(j.S,{css:lM.liveIndicator})}):(0,p.Y)(lN.A,{}),onClick:function(){return t(function(e){return!e})},variant:"nofill",text:"Live",css:lM.button})})]})}var lB=(0,eO.x)({root:[B.wp.overflow("hidden")],header:[{borderBottom:"1px solid ".concat(ex.LU.outlineDimmest)}]}),lz=function(e){var n=e.deploymentId,t=e.replId,r=e.executionId,i=e.onBack,o=e.openFile;return n?(0,p.Y)(lW,{deploymentId:n,replId:t,executionId:r,onBack:i,openFile:o}):(0,p.Y)(A.A,{children:(0,p.Y)(V.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"Deployment not found"})})};function lW(e){var n=e.deploymentId,t=e.replId,r=e.executionId,i=e.onBack,o=a1({deploymentId:n,replId:t,executionId:r,openFile:e.openFile});return(0,lo.S)(function(){(0,eU.Ae)({context:_.P.Logs})}),(0,p.Y)(aX.Provider,{value:o,children:(0,p.FD)(j.S,{css:lB.root,grow:!0,shrink:!0,innerRef:o.containerRef,children:[i?(0,p.Y)(j.S,{css:lB.header,p:6,gap:8,children:(0,p.Y)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:(0,p.Y)(eD.K0,{alt:"Back",onClick:i,children:(0,p.Y)(rD.A,{})})})}):null,(0,p.Y)(lL,{}),(0,p.Y)(lh,{}),(0,p.Y)(lH,{})]})})}var lG=[{label:"one hour",key:1},{label:"six hours",key:6},{label:"one day",key:24},{label:"three days",key:72},{label:"one week",key:168}],lV={label:"one hour",key:1},lZ=B.kL.min(600),lj=(0,eO.x)({fullWidth:(0,C._)({},lZ,{gridColumn:"span 2"})}),lq=(0,eO.x)({container:(0,C._)({display:"grid",gap:32},lZ,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}),fullWidth:lj.fullWidth}),lK=function(e){var n=e.replId,t=(0,u._)((0,f.useState)(lV),2),r=t[0],i=r.key,o=r.label,a=t[1],l=(0,k.A)(new Date,i),s=(0,H.D)().values,c=lJ(l,l$(i));return(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{css:lq.container,children:[(0,p.Y)(j.S,{css:lq.fullWidth,children:(0,p.Y)(eM.in,{items:lG,label:"Past ".concat(o),onAction:function(e){var n,t="string"==typeof e?parseInt(e,10):e;a(null!=(n=lG.find(function(e){return e.key===t}))?n:lV)},children:function(e){return(0,p.Y)(eM.Dr,{label:e.label,id:e.key},e.key)}})}),(0,p.Y)(j.S,{css:lq.fullWidth,children:(0,p.Y)(ew,{replId:n,title:"CPU Utilization",metric:D.YE.CPU,start:c,hours:i,colorFn:function(){return s.global.redDefault}})}),(0,p.Y)(j.S,{css:lq.fullWidth,children:(0,p.Y)(ew,{replId:n,title:"Memory Utilization",metric:D.YE.Memory,start:c,hours:i,colorFn:function(){return s.global.redDefault}})})]})})},l$=function(e){return e<=1?6e5:e<=6?18e5:e<=24?72e5:216e5},lJ=function(e,n){var t=e.getTime()%n;return new Date(e.getTime()-t)},lQ=t(21364);function lX(){var e=(0,I._)(["\n  query ScheduledJobListExecution($deploymentId: String!) {\n    scheduledJobListExecutions(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ScheduledJobListExecutionsResults {\n        results {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return lX=function(){return e},e}function l0(){var e=(0,I._)(["\n  mutation CancelScheduledJobExecution(\n    $deploymentId: String!\n    $executionId: String!\n  ) {\n    cancelScheduledJobExecution(\n      input: { deploymentId: $deploymentId, executionId: $executionId }\n    ) {\n      __typename\n      ... on CancelScheduledJobExecutionResult {\n        execution {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return l0=function(){return e},e}var l1={},l2=(0,T.J1)(lX()),l4=(0,T.J1)(l0()),l5=t(49666),l3=(0,eO.x)({root:[B.wp.overflow("hidden")],executionListHeader:[{borderBottom:"1px solid ".concat(ex.LU.outlineDimmest)}],executionList:[{overflow:"auto"},B.wp.flex.growAndShrink(1)],executionListRows:{width:"100%",position:"relative"},executionItem:[B.wp.rowWithGap(8),B.wp.align.center,B.wp.fontSize(12),B.wp.px(8),{position:"absolute",top:0,left:0,width:"100%",borderBottom:"1px solid ".concat(ex.LU.outlineDimmest),color:ex.LU.foregroundDimmer}],executionItemStatusDot:[B.wp.width("6px"),B.wp.height("6px"),B.wp.borderRadius("full"),B.wp.flex.shrink(0),B.wp.pr(4)],executionItemDistance:[B.wp.minWidth(100)],executionItemTimestamp:[B.wp.minWidth(90)],executionItemRunTime:[B.wp.minWidth(60)],executionItemStatus:[B.wp.minWidth(100),{textTransform:"capitalize"}],executionItemActions:[{marginLeft:"auto"}],noExecutionsText:[B.wp.textAlign.center],maxResultsMessage:[B.wp.fontSize(12),B.wp.color.foregroundDimmest]});function l7(e){var n=e.deploymentId,t=e.replId,r=e.openFile,i=(0,u._)((0,f.useState)(),2),o=i[0],a=i[1];return n?o?(0,p.Y)(lz,{replId:t,deploymentId:n,executionId:o,onBack:function(){return a(void 0)},openFile:r}):(0,p.Y)(l6,{deploymentId:n,onViewExecutionLogs:function(e){var n=e.split("-");a(n[n.length-1])}}):(0,p.Y)(A.A,{children:(0,p.Y)(V.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"Deployment not found"})})}function l6(e){var n,t,r,i,o,a=e.deploymentId,l=e.onViewExecutionLogs,c=(0,u._)((0,f.useState)([]),2),d=c[0],h=c[1],m=(0,u._)((0,f.useState)(!1),2),g=m[0],v=m[1],y=(0,u._)((0,f.useState)(),2),w=y[0],S=y[1],Y=(n={variables:{deploymentId:a},onError:function(e){S(e)},onCompleted:function(e){(null==e?void 0:e.scheduledJobListExecutions.__typename)==="ScheduledJobListExecutionsResults"&&h(e.scheduledJobListExecutions.results)}},t=(0,s._)({},l1,n),F.I(l2,t)),A=Y.loading,C=Y.refetch,k=(0,u._)((r={onError:function(e){S(e)},onCompleted:function(e){var n=e.cancelScheduledJobExecution;"CancelScheduledJobExecutionResult"===n.__typename&&h(function(e){return e.map(function(e){return e.id===n.execution.id?n.execution:e})})}},i=(0,s._)({},l1,r),nw.n(l4,i)),2),x=k[0],D=k[1].loading,E=!!(A||D||g||w);return(0,lo.S)(function(){A||C(),(0,eU.Ae)({context:_.P.Schedule})}),(0,p.FD)(j.S,{css:l3.root,grow:!0,shrink:!0,children:[(0,p.FD)(j.S,{css:l3.executionListHeader,p:6,gap:8,children:[w?(0,p.Y)(V.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:null!=(o=w.message)?o:"Something went wrong"}):null,(0,p.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,p.Y)(ip,{disabled:E,onSuccessfulExecution:function(e){h(function(n){return[e].concat((0,b._)(n)).slice(0,50)})}}),(0,p.Y)(eD.K0,{alt:"Refresh",disabled:E,onClick:function(){E||(v(!0),C().finally(function(){v(!1)}))},children:g?(0,p.Y)(nj.A,{}):(0,p.Y)(ob.A,{})})]})]}),(0,p.Y)(l8,{executions:d,loading:A,disabled:E,onExecutionItemAction:function(e){switch(e.type){case"cancel":x({variables:{deploymentId:a,executionId:e.payload.id}});break;case"logs":l(e.payload.id)}}})]})}function l8(e){var n=e.executions,t=e.loading,r=e.disabled,i=e.onExecutionItemAction,o=(0,f.useRef)(null),a=(0,iI.m6)()?44:28,l=(0,a2.Te)({count:n.length,getScrollElement:function(){return o.current},estimateSize:function(){return a},overscan:10});return t?(0,p.Y)(A.A,{centered:!0,children:(0,p.Y)(e8.cN,{})}):0===n.length?(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{pt:4,gap:8,children:[(0,p.Y)(Z.EY,{css:l3.noExecutionsText,children:"No runs yet..."}),(0,p.FD)(Z.EY,{color:"dimmer",css:l3.noExecutionsText,children:["Having trouble?"," ",(0,p.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return(0,eU.Ae)({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})}):(0,p.Y)(j.S,{innerRef:o,css:l3.executionList,children:(0,p.Y)(j.S,{style:{height:l.getTotalSize()},css:l3.executionListRows,children:l.getVirtualItems().map(function(e){var t=n[e.index];return(0,p.Y)(st,{execution:t,height:e.size,y:e.start,index:e.index,onAction:i,disabled:r},e.key.toString())})})})}var l9=(l={},(0,C._)(l,Y.vJZ.Done,ex.LU.accentPositiveDefault),(0,C._)(l,Y.vJZ.Running,ex.LU.orangeStronger),(0,C._)(l,Y.vJZ.Failed,ex.LU.accentNegativeDefault),(0,C._)(l,Y.vJZ.Cancelled,ex.LU.greyDefault),(0,C._)(l,Y.vJZ.Unrecognized,ex.LU.greyDefault),l);function se(e){var n=e.status,t=n in l9?l9[n]:ex.LU.greyDefault;return(0,p.Y)(j.S,{tag:"span",css:l3.executionItemStatusDot,style:{backgroundColor:t,boxShadow:"0 0 8px ".concat(t)}})}var sn=function(e){return e.Cancel="cancel",e.Logs="logs",e}(sn||{});function st(e){var n=e.execution,t=e.y,r=e.height,i=e.index,o=e.onAction,a=e.disabled,l=(null==n?void 0:n.endedAt)?(new Date(n.endedAt).valueOf()-new Date(n.startedAt).valueOf())/1e3:null;return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{title:n.id,css:l3.executionItem,style:{height:r,transform:"translateY(".concat(t,"px)")},children:[(0,p.Y)(se,{status:n.status}),(0,p.Y)(j.S,{css:l3.executionItemDistance,children:(0,lQ.A)(new Date(n.startedAt),Date.now(),{addSuffix:!0})}),(0,p.FD)(j.S,{css:l3.executionItemTimestamp,children:[new Date(n.startedAt).toLocaleString("en-US",{month:"short",day:"2-digit"}),", ",new Date(n.startedAt).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"})]}),(0,p.Y)(j.S,{css:l3.executionItemRunTime,children:l?"".concat(l,"s"):"-"}),(0,p.Y)(j.S,{css:l3.executionItemStatus,children:n.status}),(0,p.FD)(j.S,{css:l3.executionItemActions,row:!0,gap:8,align:"center",children:[n.status===Y.vJZ.Running?(0,p.Y)(eD.K0,{alt:"Cancel",size:12,disabled:a,onClick:function(){return o({type:"cancel",payload:{id:n.id}})},children:(0,p.Y)(l5.A,{})}):null,(0,p.Y)(eD.K0,{alt:"Logs",size:18,disabled:a,onClick:function(){return o({type:"logs",payload:{id:n.id}})},children:(0,p.Y)(tl.A,{})})]})]}),49===i?(0,p.Y)(j.S,{title:n.id,css:l3.executionItem,style:{height:r,transform:"translateY(".concat(t+r,"px)")},children:(0,p.Y)(Z.EY,{css:l3.maxResultsMessage,children:"Only the most recent 50 runs are displayed currently"})}):null]})}var sr=t(47322),si=t(67382),so=t(72094),sa=(0,eO.x)({container:B.wp.colWithGap(24),pauseAndResumeButtons:B.wp.colWithGap(8),sectionContainer:B.wp.colWithGap(8),sectionButton:[B.wp.color.accentNegativeStrongest,B.wp.transition.snappy,(0,C._)({backgroundColor:ex.LU.interactiveBackground,borderColor:"transparent"},B.Tp.hover,{borderColor:"transparent"})]}),sl=function(e){var n=e.hideResume,t=e.hideSuspend,r=e.onLifecycleCommand,i=e.authorizations,o=(0,v.u)(),a=(0,g.cF)(),l=(0,u._)((0,f.useState)(!1),2),s=l[0],c=l[1],d=i.editDeploymentStatus,h=d.isAuthorized,m=d.message,w=(null==a?void 0:a.status)===Y.nHS.Resuming,b=(null==a?void 0:a.status)===Y.nHS.Suspending,S=(null==a?void 0:a.status)===Y.nHS.Suspended,_=w||b||o===y.d.ProcessingLifecycleCommand||o===y.d.Deploying,A=!(void 0!==n&&n)&&(S||w)&&(null==a?void 0:a.hasImageTag),C=!(void 0!==t&&t)&&!S&&!w&&(b||o===y.d.Deploying||o===y.d.Ready)&&(null==a?void 0:a.hasImageTag);return(0,p.Y)(p.FK,{children:(0,p.FD)(j.S,{css:sa.container,children:[A||C?(0,p.FD)(j.S,{css:sa.pauseAndResumeButtons,children:[A?(0,p.FD)(p.FK,{children:[(0,p.Y)(tf.m_,{tooltip:m,isDisabled:h,children:(0,p.Y)(eX.$n,{text:w?"Resuming":"Resume",onClick:function(){return r({command:Y.jPZ.Resume})},loading:w,disabled:_||!h,iconLeft:w?(0,p.Y)(nj.A,{}):(0,p.Y)(si.A,{})})}),(0,p.Y)(Z.EY,{color:"dimmer",children:"Your app will become accessible to users again"})]}):null,C?(0,p.FD)(p.FK,{children:[(0,p.Y)(tf.m_,{tooltip:m,isDisabled:h,children:(0,p.Y)(eX.$n,{text:"Pause",onClick:function(){return r({command:Y.jPZ.Suspend})},loading:b,disabled:_||!h,iconLeft:b?(0,p.Y)(nj.A,{}):(0,p.Y)(nq.A,{})})}),(0,p.Y)(Z.EY,{color:"dimmer",children:"Your deployment billing will continue, but all users will lose access to your app"})]}):null]}):null,(0,p.Y)(ss,{setIsDestroying:c,onLifecycleCommand:r,authorizations:i}),(0,p.Y)(sc,{isDestroying:s,setIsDestroying:c,onLifecycleCommand:r,authorizations:i})]})})};function ss(e){var n=e.setIsDestroying,t=e.onLifecycleCommand,r=e.authorizations,i=(0,u._)((0,f.useState)(!1),2),o=i[0],a=i[1],l=r.deleteDeployment,s=l.isAuthorized,c=l.message;return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{css:sa.sectionContainer,children:[(0,p.Y)(tf.m_,{tooltip:c,isDisabled:s,children:(0,p.Y)(eX.$n,{text:"Change deployment type",onClick:function(){return a(!0)},disabled:!s,iconLeft:(0,p.Y)(so.A,{})})}),(0,p.Y)(Z.EY,{color:"dimmer",children:"To change your deployment type, you will need to shut down and create a new deployment"})]}),(0,p.Y)(e0.a,{isOpen:o,onRequestClose:function(){return a(!1)},children:(0,p.Y)(sr.A,{confirmLabel:"Yes, delete my deployment",title:"Change Deployment Type",isDestructive:!0,onConfirm:function(){n(!0),a(!1),t({command:Y.jPZ.Destroy})},onCancel:function(){return a(!1)},children:"To change your deployment type, you will need to shut down and create a new deployment. This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your App again."})})]})}function sc(e){var n=e.isDestroying,t=e.setIsDestroying,r=e.onLifecycleCommand,i=e.authorizations,o=(0,u._)((0,f.useState)(!1),2),a=o[0],l=o[1],s=i.deleteDeployment,c=s.isAuthorized,d=s.message;return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{css:sa.sectionContainer,children:[(0,p.Y)(tf.m_,{tooltip:d,isDisabled:c,children:(0,p.Y)(eX.$n,{text:"Shut down",colorway:"negative",variant:"outlined",css:sa.sectionButton,onClick:function(){return l(!0)},disabled:n||!c,iconLeft:(0,p.Y)(oS.A,{})})}),(0,p.Y)(Z.EY,{color:"dimmer",children:"Your deployment billing will be canceled, and your deployed app will cease to exist"})]}),(0,p.Y)(e0.a,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,p.Y)(sr.A,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){t(!0),l(!1),r({command:Y.jPZ.Destroy})},onCancel:function(){return l(!1)},children:"This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}function su(e){var n=e.shouldShowDownloadQR,t=(0,u._)((0,f.useState)(n),2),r=t[0],i=t[1];return(0,p.Y)(j.S,{children:(0,p.FD)(j.S,{gap:8,children:[(0,p.Y)(eX.$n,{iconLeft:(0,p.Y)(e4.A,{}),text:"Install the Replit App",onClick:function(){return i(function(e){var n=!e;return n&&(0,eQ.u4)(eQ.AZ.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),n})}}),r?(0,p.Y)(e1.A,{source:"deployment_settings"}):null]})})}function sd(){var e=(0,I._)(["\n  query AutoscaleUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            autoscaleComputeUnits {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return sd=function(){return e},e}var sp={},sf=(0,T.J1)(sd()),sh=t(12127),sm=(0,eO.x)({root:[B.wp.borderRadius(8),{outline:"1px solid transparent"}],outerRow:[B.wp.rowWithGap(12),B.wp.align.center]}),sg=function(e){var n,t=e.machineConfiguration,r=(n=(0,s._)({},sp,void 0),F.I(sf,n)).data,i=(0,f.useMemo)(function(){return function(e){var n,t,r=e.data;if((null==r||null==(n=r.currentUser)?void 0:n.__typename)==="CurrentUser"){var i=null==r||null==(t=r.currentUser)?void 0:t.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.autoscaleComputeUnits.usage,a=(0,sh.h7)(o,{resourceUsageType:"ComputeUnits"}),l=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{description:"".concat(a," used this billing period"),renewalInfo:"Renews ".concat(l," ")}}}}({data:r})},[r]),o=(0,f.useMemo)(function(){if(null!=t)return"Autoscale (".concat(t.label,")")},[t]);if(!o||!i)return(0,p.Y)(j.S,{justify:"center",row:!0,children:(0,p.Y)(nj.A,{})});var a=e.authorizations.editDeploymentTier,l=a.isAuthorized,c=a.message;return(0,p.FD)(tp.ui,{elevated:!0,css:sm.root,p:8,pt:12,gap:4,children:[(0,p.FD)(j.S,{css:sm.outerRow,children:[(0,p.Y)(j.S,{grow:!0,shrink:!0,gap:4,children:o?(0,p.Y)(Z.EY,{multiline:!1,children:o}):null}),(0,p.Y)(eD.K0,{alt:l?"Edit":c,disabled:!l,onClick:e.onEditAutoscaleMachineConfiguration,children:(0,p.Y)(ow.A,{})})]}),i?(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{css:sm.outerRow,children:[(0,p.Y)(Z.EY,{multiline:!1,children:i.description}),(0,p.Y)(Z.EY,{color:"dimmer",multiline:!1,children:i.renewalInfo})]}),(0,p.Y)(j.S,{css:sm.outerRow,children:(0,p.Y)(rX(),{href:"/usage",prefetch:!1,role:"button",children:"View account resource limits"})})]}):null]})};function sv(){var e=(0,I._)(["\n  mutation NotificationsSectionUpdateFailureNotifications(\n    $input: UpdateMachineJobFailureNotificationInput!\n  ) {\n    updateMachineJobFailureNotification(input: $input) {\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UpdateMachineJobFailureNotificationResult {\n        failureNotifications\n      }\n    }\n  }\n"]);return sv=function(){return e},e}var sy={},sw=(0,T.J1)(sv()),sb=t(49058),sS=t(28711);function sY(e){return(0,p.Y)(iv.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M.47.47a.75.75 0 0 1 1.06 0l5.25 5.249a.745.745 0 0 1 .02.02l10.73 10.73.001.001 6 6a.75.75 0 1 1-1.061 1.06l-5.78-5.78H3a.75.75 0 0 1-.414-1.376l.063-.05c.06-.05.156-.136.275-.262.239-.252.575-.668.918-1.296C4.525 13.514 5.25 11.39 5.25 8a6.61 6.61 0 0 1 .173-1.517L.47 1.53a.75.75 0 0 1 0-1.06Zm6.283 7.344a5.096 5.096 0 0 0-.003.184V8c0 3.61-.775 5.986-1.592 7.484a8.768 8.768 0 0 1-.468.766h10.5L6.752 7.814Zm4.922-6.565A6.75 6.75 0 0 1 18.75 8v.011c-.026 1.617.177 3.23.604 4.79a.75.75 0 0 1-1.447.396 18.642 18.642 0 0 1-.657-5.204 5.25 5.25 0 0 0-8.164-4.37.75.75 0 0 1-.832-1.248 6.75 6.75 0 0 1 3.42-1.127ZM9.894 20.35a.75.75 0 0 1 1.025.273 1.25 1.25 0 0 0 2.162 0 .75.75 0 0 1 1.298.752 2.749 2.749 0 0 1-4.758 0 .75.75 0 0 1 .273-1.025Z",clipRule:"evenodd"})}))}var s_=(0,eO.x)({container:[B.wp.colWithGap(8)]});function sA(e){var n,t,r=e.replId,i=e.isCurrentBuildSuccess,o=e.areFailureNotificationsEnabled,a=(0,u._)((0,f.useState)(o),2),l=a[0],c=a[1],d=(0,u._)((0,f.useState)(void 0),2),h=d[0],m=d[1],g=(0,u._)((n={onCompleted:function(e){var n=e.updateMachineJobFailureNotification;((null==n?void 0:n.__typename)==="NotFoundError"||(null==n?void 0:n.__typename)==="UnauthorizedError"||(null==n?void 0:n.__typename)==="UserError")&&(m(n.message),c(function(e){return!e}))}},t=(0,s._)({},sy,n),nw.n(sw,t)),1)[0],v=function(e){m(void 0),g({variables:{input:{replId:r,failureNotifications:e}}}),c(e)};return(0,p.FD)(j.S,{children:[h?(0,p.Y)(V.N,{text:h,colorway:"warning"}):null,(0,p.FD)(tf.m_,{isDisabled:i,tooltip:"Most recent build failed. Re-deploy successfully before enabling notifications",placement:"top-end",css:s_.container,children:[(0,p.FD)(sb.e2,{disabled:!i,tag:"fieldset",name:"notification-switch",value:l?"enabled":"disabled",onChange:function(e){v("enabled"===e)},row:!0,primary:!0,stretch:!0,children:[(0,p.Y)(sb.$O,{id:"failure-notifications-disabled",value:"disabled",text:"Disabled",icon:(0,p.Y)(sY,{})}),(0,p.Y)(sb.$O,{id:"failure-notifications-enabled",value:"enabled",text:"Enabled",icon:(0,p.Y)(sS.A,{})})]}),(0,p.Y)(Z.EY,{color:"dimmer",children:"Send email and push notifications when a scheduled job fails"})]})]})}var sC=(0,eO.x)({container:[re.R1.maxWidth,B.wp.py(8)],usageContainer:B.wp.colWithGap(16),header:B.wp.pb(8),paddedHeader:B.wp.pb(12)}),sk=function(e){var n=e.deploymentId,t=e.onLifecycleCommand,r=e.onError;return n?(0,p.Y)(sD,{deploymentId:n,onLifecycleCommand:t,onError:r}):(0,p.Y)(A.A,{children:(0,p.Y)(V.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"Deployment not found"})})},sx={__typename:"ReplAuthorizations",addCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:Y.S4P.InsufficientPermissions,message:"Loading"},deleteCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:Y.S4P.InsufficientPermissions,message:"Loading"},deleteDeployment:{__typename:"ReplAuthorization",isAuthorized:!1,code:Y.S4P.InsufficientPermissions,message:"Loading"},editDeploymentStatus:{__typename:"ReplAuthorization",isAuthorized:!1,code:Y.S4P.InsufficientPermissions,message:"Loading"},editDeploymentTier:{__typename:"ReplAuthorization",isAuthorized:!1,code:Y.S4P.InsufficientPermissions,message:"Loading"}};function sD(e){var n,t,r,i,o,a=(0,iI.m6)(),l=(0,u._)((0,f.useState)(!1),2),s=l[0],c=l[1];(0,f.useEffect)(function(){(0,eU.Ae)({context:_.P.Settings})},[]);var d=(0,u._)(nz(),2),h=d[0],m=d[1],g=m.data,v=m.error,y=nH({variables:{id:e.deploymentId},ssr:!1,fetchPolicy:"cache-and-network",onCompleted:function(e){var n;(null==e||null==(n=e.hostingDeployment)?void 0:n.__typename)==="HostingDeployment"&&h({variables:{replId:e.hostingDeployment.repl.id,provider:e.hostingDeployment.currentBuild.provider}})}}),w=y.data,b=y.loading,S=y.error,C=(null==w||null==(n=w.hostingDeployment)?void 0:n.__typename)==="HostingDeployment"?w.hostingDeployment:void 0,k=(null==C?void 0:C.currentBuild.provider)===Y.Q0q.Cron;if(s)return(0,p.Y)(np.J,{onError:e.onError,onConfirm:function(n){e.onLifecycleCommand({command:Y.jPZ.UpdateMachineConfiguration,machineConfigurationId:n.configurationId,maxMachineInstances:n.maxInstances})},onBack:function(){return c(!1)}});if(S)return(0,p.Y)(e8.Wx,{text:S.message});if(b||!C)return(0,p.Y)(A.A,{centered:!0,children:(0,p.Y)(e8.cN,{})});var x=C.currentBuild,D=null!=(i=null==x?void 0:x.machineConfiguration)?i:void 0,E=(null==g||null==(t=g.getRepl)?void 0:t.__typename)==="Repl"?g.getRepl.authorizations:sx;return(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{css:sC.container,gap:32,children:[v?(0,p.Y)(V.N,{colorway:"negative",text:v.message}):void 0,x.provider===Y.Q0q.CloudRun?(0,p.FD)(j.S,{children:[(0,p.Y)(Z.EY,{variant:"subheadDefault",css:sC.header,children:"Resource usage"}),(0,p.Y)(j.S,{css:sC.usageContainer,children:(0,p.Y)(sg,{machineConfiguration:D,onEditAutoscaleMachineConfiguration:function(){return c(!0)},authorizations:E})})]}):null,(0,p.FD)(j.S,{children:[(0,p.Y)(Z.EY,{variant:"subheadDefault",css:sC.paddedHeader,children:"Manage deployment"}),(0,p.Y)(ir,{}),(0,p.Y)(sl,{onLifecycleCommand:e.onLifecycleCommand,authorizations:E})]}),k?(0,p.FD)(j.S,{children:[(0,p.Y)(Z.EY,{variant:"subheadDefault",css:sC.paddedHeader,children:"Scheduled Job Notifications"}),(0,p.Y)(sA,{replId:C.repl.id,isCurrentBuildSuccess:C.currentBuild.status===Y.nHS.Success,areFailureNotificationsEnabled:null!=(o=null==(r=C.currentBuild.machineJob)?void 0:r.failureNotifications)&&o})]}):null,a?null:(0,p.FD)(j.S,{children:[(0,p.Y)(Z.EY,{variant:"subheadDefault",css:sC.paddedHeader,children:"Deploy on the go"}),(0,p.Y)(su,{shouldShowDownloadQR:!1})]})]})})}var sE=t(43515),sR=t(39685),sI=t(54369),sT=t(98829),sF=t(51055),sP=t(15407),sL=[Y.Q0q.Gce,Y.Q0q.CloudRun,Y.Q0q.Cron],sU=(0,eO.x)({root:[{height:"100%"},B.wp.overflow("hidden"),B.wp.position.relative],content:[B.wp.overflow("auto"),B.wp.flex.growAndShrink(1),B.wp.position.relative]}),sN=function(e){var n,t,r,i,o,a=e.onViewUpdate,l=e.onError,s=e.refetch,c=e.openFile,d=e.openPane,h=e.initialView,m=e.error,C=e.flow,k=function(e){B({type:_.k.SendDeploymentLifecycleCommand,payload:e})},x=(0,tn.A)(),D=(0,g.i$)(),E=(0,g.tq)(),R=(0,g.cF)(),I=(0,g.om)(),T=(0,v.u)()===y.d.PreparingDatabase,F="string"==typeof D,P=void 0===E&&!F,L=(0,sE.Q)(),U=!!L,N=(0,u._)((0,f.useState)(function(){return E?_.P.DeploymentInProgress:P?_.P.Intro:_.P.Deployment}),2),O=N[0],M=N[1];(0,f.useEffect)(function(){(E||T)&&M(_.P.DeploymentInProgress)},[E,T]);var H=(0,g.e_)(),B=(n=(0,w._)(function(e){var n;return(0,S.YH)(this,function(t){switch(t.label){case 0:switch(a(),e.type){case _.k.SendDeploymentLifecycleCommand:return[3,1];case _.k.ChangeView:return[3,3];case _.k.OpenPane:return[3,4]}return[3,7];case 1:return[4,H(e.payload)];case 2:if(t.sent(),e.payload.command===Y.jPZ.Destroy)return M(_.P.Intro),s(),[2];return e.payload.command===Y.jPZ.UpdateMachineConfiguration&&s(),M(_.P.Deployment),[3,8];case 3:return M(e.payload.view),[3,8];case 4:if("codeEditor"!==(n=e.payload).type||".replit"!==n.data.path)return[3,6];return[4,I.stat(".replit")];case 5:if(!t.sent().exists)return l("Could not find .replit configuration file."),[2];t.label=6;case 6:return d(n),[3,8];case 7:return[3,8];case 8:return[2]}})}),function(e){return n.apply(this,arguments)}),z=(t=null==R?void 0:R.provider,i=(r=(0,eN.g)("deployment-analytics-dot")).isLoading,o=r.isDone,(0,f.useMemo)(function(){return[{value:_.P.Deployment,label:"Overview",icon:(0,p.Y)(ni.A,{})}].concat((0,b._)(t===Y.Q0q.Cron?[{value:_.P.Schedule,label:"Schedule",icon:(0,p.Y)(nZ.A,{})}]:[]),(0,b._)(t!==Y.Q0q.Static?[{value:_.P.Logs,label:"Logs",icon:(0,p.Y)(tl.A,{})}]:[]),(0,b._)(t!==Y.Q0q.Cron?[{value:_.P.Analytics,label:"Analytics",icon:(0,p.Y)(sT.A,{}),showDot:!i&&!o}]:[]),(0,b._)(t&&sL.includes(t)?[{value:_.P.ResourceMonitoring,label:"Resources",icon:(0,p.Y)(sP.A,{}),beta:!1}]:[]),(0,b._)(t!==Y.Q0q.Cron?[{value:_.P.Domains,label:"Domains",icon:(0,p.Y)(iY.A,{})}]:[]),[{value:_.P.Settings,label:"Settings",icon:(0,p.Y)(sF.A,{})}])},[o,i,t]));return O===_.P.Intro?(0,p.Y)(j.S,{css:sU.content,children:(0,p.Y)(aB,{initialSelectedProvider:h===_.P.ReservedVMTierSelection?Y.Q0q.Gce:void 0,onViewAction:B,onError:l,onDeploy:function(){B({type:_.k.ChangeView,payload:{view:_.P.DeploymentInProgress}}),L&&(0,sR.p)({action:"deploying_app",sessionId:L})},replId:x,hasAgentSession:U,flow:C})}):(0,p.FD)(j.S,{css:sU.root,children:[z?(0,p.Y)(sI.P,{onClick:function(e){B({type:_.k.ChangeView,payload:{view:e.value}})},tabs:z,value:O===_.P.DeploymentInProgress?_.P.Deployment:O}):null,(0,p.FD)(j.S,{css:sU.content,children:[m?(0,p.Y)(A.A,{children:(0,p.Y)(V.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:m})}):null,O===_.P.Analytics?(0,p.Y)(eV,{replId:x}):null,O===_.P.Logs?(0,p.Y)(lz,{replId:x,deploymentId:D,openFile:c}):null,O===_.P.ResourceMonitoring?(0,p.Y)(lK,{replId:x}):null,O===_.P.Settings?(0,p.Y)(sk,{onError:l,deploymentId:D,onLifecycleCommand:k}):null,O===_.P.Deployment||O===_.P.DeploymentInProgress?(0,p.Y)(iO,{view:O,refetch:s,onViewAction:B,onError:l,openFile:c,openPane:d,onLifecycleCommand:k,hasAgentSession:U}):null,O===_.P.Schedule?(0,p.Y)(l7,{replId:x,deploymentId:D,openFile:c}):null,O===_.P.Domains?(0,p.Y)(o3,{deploymentId:D}):null]})]})},sO=t(19807);function sM(e){var n=e.initialView,t=e.flow,r=e.onViewUpdate,i=e.openFile,o=e.openPane,a=e.tabsNavRef,l=(0,g.Ki)(),s=(0,v.u)(),c=(0,g.Jz)(),d=(0,u._)((0,f.useState)(null),2),h=d[0],m=d[1];return s===y.d.Loading?(0,p.Y)(sO.A,{pane:{type:"deployments"},headerText:"Deploy to production",loading:!0}):(0,p.Y)(sN,{tabsNavRef:a,initialView:n,onViewUpdate:function(){h&&m(null),r()},onError:m,refetch:l,openFile:i,openPane:o,error:h||c,flow:t})}var sH=t(23959),sB=t(55515),sz=h.ZU.Object({skipIntro:h.ZU.Optional(h.ZU.Boolean()),isAgentDeployment:h.ZU.Optional(h.ZU.Boolean())}),sW=h.ZU.Object({type:h.ZU.Literal("deployments"),data:h.ZU.Optional(h.ZU.Object({view:h.ZU.Enum(_.P)})),flow:h.ZU.Optional(sz)}),sG={Content:function(e){var n=e.pane,t=n.data,r=n.flow,i=e.options.performPaneOperation,o=(0,f.useRef)(function(e){if(e&&(void 0===e?"undefined":(0,d._)(e))==="object"&&"view"in e&&e.view===_.P.ReservedVMTierSelection)return _.P.ReservedVMTierSelection}(t)),a=(0,f.useCallback)(function(e){return i({operation:"open",secondary:!0,pane:{type:(0,aY.QY)(e),data:e}})},[i]),l=(0,u._)((0,f.useState)(null),2),h=l[0],m=l[1],g=(0,sH.xQ)().getDeploymentCommand;(0,sB.Qt)(function(){var e={type:"deployments",getTabs:h?h.getTabs:function(){return null},setTab:h?h.setTab:function(){}},n=g();return n?(0,c._)((0,s._)({},e),{commands:[{commands:[n]}]}):e},[h,g]);var v=(0,f.useCallback)(function(e){i({operation:"open",pane:e,secondary:!0})},[i]);return(0,p.Y)(sM,{tabsNavRef:m,initialView:o.current,onViewUpdate:function(){o.current&&(o.current=void 0,i({operation:"replace",pane:{type:"deployments"}}))},openFile:a,openPane:v,flow:r})},Icon:function(e){var n=e.size;return(0,p.Y)(iv.Vx.Provider,{value:{color:ex.LU.greenStrongest,size:n},children:(0,p.Y)(ni.A,{})})},getTitle:function(){return"Deployments"},description:"Publish a live, stable, public version of your App, unaffected by the changes you make in the workspace",category:aY.bY.CloudServices,decode:function(e){return m.T(sW,e)}}},84829:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(21462),i=t(37872);function o(){(0,r.useEffect)(function(){var e=null;return!function n(){if(window.performance.memory){var t=window.performance.memory,r=t.jsHeapSizeLimit,o=t.totalJSHeapSize,a=t.usedJSHeapSize,l=window.performance.now();i.vF.info("perf:browser_memory",{jsHeapSizeLimit:r,totalJSHeapSize:o,usedJSHeapSize:a,timeElapsed:l}),e=setTimeout(n,-(5*Math.log(Math.random())*6e4))}}(),function(){e&&clearTimeout(e)}},[])}},84855:e=>{e.exports={button:"ScrollToLatestButton_button__cBdg0",buttonContent:"ScrollToLatestButton_buttonContent__2mIyI"}},85154:e=>{e.exports={root:"AgentAwareWebviewEmptyStates_root__XcSP0",crashedBodyWrapper:"AgentAwareWebviewEmptyStates_crashedBodyWrapper__eKra_",terminalWrapper:"AgentAwareWebviewEmptyStates_terminalWrapper__g5rJh"}},85336:(e,n,t)=>{"use strict";t.d(n,{CW:()=>c,my:()=>u});var r=t(12694),i=t(21462),o=t(69945),a=t.n(o),l=t(31092);t(28046);var s=t(50301);function c(e){var n=e.targetElement,t=e.activeTourStep,r=e.goToNextStep,o=e.setTourPausedReason,a=(0,s.Av)(),l=(0,i.useRef)(void 0),c=(0,i.useCallback)(function(){(null==t?void 0:t.waitToAdvanceOn)==="webviewPortOpened"?(o("async"),l.current=a.subscribe(function(e){e&&o("user")})):r()},[null==t?void 0:t.waitToAdvanceOn,r,o,a]);(0,i.useEffect)(function(){if(null!=n&&null!=t&&t.advanceOnTargetClick)return n.addEventListener("click",c),function(){var e;n.removeEventListener("click",c),null==(e=l.current)||e.call(l),l.current=void 0}},[n,t,c])}function u(e){var n=(0,r._)((0,i.useState)(null),2),t=n[0],o=n[1],s=(0,l.A)(function(){e&&o({rect:e.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},{type:"throttle",wait:100});return(0,i.useEffect)(function(){e&&s(e)},[e,s]),(0,i.useEffect)(function(){if(e){var n=a()(function(){o({rect:e.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},100);return window.addEventListener("resize",n),window.addEventListener("scroll",n),function(){window.removeEventListener("resize",n),window.removeEventListener("scroll",n),n.cancel()}}},[e]),t}},85363:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.012 18.902h1.784l1.413-3.98H9.89l1.413 3.98h1.783L7.928 4.852H6.172l-5.16 14.05Zm8.343-5.489-2.25-6.339h-.11l-2.25 6.34h4.61ZM16.34 18.772c.544.251 1.15.377 1.818.377.613 0 1.132-.091 1.557-.274.425-.183.766-.405 1.022-.666.257-.26.44-.505.55-.734h.082v1.427h1.619v-6.943c0-.837-.137-1.505-.412-2.004-.274-.498-.62-.87-1.036-1.118a3.733 3.733 0 0 0-1.283-.487 6.416 6.416 0 0 0-1.166-.123c-.53 0-1.07.073-1.62.22a4.114 4.114 0 0 0-1.509.754c-.457.357-.823.855-1.098 1.495l1.537.55c.179-.385.487-.746.927-1.085.439-.338 1.045-.507 1.818-.507.745 0 1.3.187 1.667.562.37.375.556.901.556 1.578v.055c0 .26-.094.444-.282.549-.183.105-.476.18-.878.226-.398.041-.917.103-1.557.186-.49.064-.977.15-1.462.26-.48.105-.919.266-1.317.48a2.518 2.518 0 0 0-.954.892c-.238.376-.356.865-.356 1.469 0 .686.16 1.271.48 1.756.32.48.752.848 1.297 1.105Zm3.684-1.455c-.44.252-.979.378-1.62.378-.644 0-1.177-.142-1.598-.426-.416-.288-.624-.713-.624-1.276 0-.412.11-.736.33-.974.223-.243.516-.423.877-.542.366-.124.76-.213 1.18-.268.174-.023.4-.05.68-.082.283-.037.574-.078.87-.124.303-.05.568-.107.797-.171.233-.069.384-.144.453-.227v1.482a2.569 2.569 0 0 1-1.345 2.23Z",clipRule:"evenodd"})}))}},85608:(e,n,t)=>{"use strict";t.d(n,{$f:()=>a,Pi:()=>o,cl:()=>i});var r=t(61191),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.FM)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},85874:e=>{e.exports={surface:"ErrorMessage_surface__Q9n5A"}},86080:(e,n,t)=>{"use strict";t.d(n,{ES:()=>c,Xh:()=>u,cR:()=>s,oL:()=>d});var r=t(12694),i=t(81073),o=t(21462),a=t(47993),l=(0,o.createContext)({left:null,right:null,setLeft:function(){},setRight:function(){}});function s(e){var n=e.children,t=e.side,r=(0,o.useContext)(l);if(!r)return null;var i=r[t];return i?a.createPortal(n,i):null}function c(){var e=(0,o.useContext)(l);return(0,o.useCallback)(function(n){e.backButtonOverrideRef&&(e.backButtonOverrideRef.current=n)},[e])}function u(e){var n,t,a,s,c,u,d,p=e.children,f=(t=(n=(0,r._)((0,o.useState)(null),2))[0],a=n[1],c=(s=(0,r._)((0,o.useState)(null),2))[0],u=s[1],d=(0,o.useRef)(null),(0,o.useMemo)(function(){return{left:t,right:c,setLeft:a,setRight:u,backButtonOverrideRef:d}},[t,c]));return(0,i.Y)(l.Provider,{value:f,children:p})}function d(){return(0,o.useContext)(l)}},86215:(e,n,t)=>{"use strict";t.d(n,{g1:()=>eL,R6:()=>e0,Ge:()=>ek,iJ:()=>eD,Ay:()=>e9,WM:()=>e8,Nz:()=>e6});var r=t(29935),i=t(83846),o=t(17844),a=t(93629),l=t(12694),s=t(86105),c=t(82643),u=t(81073),d=t(21462),p=t(66890),f=t(94827),h=t(91326),m=t(13843),g=t(1982),v=t(55100),y=t(17089),w=t(71424),b=t(82839),S=t(49384),Y=t.n(S),_=t(19807),A=t(18509),C=t(27023),k=t(36073),x=t(85389),D=t(48604),E=(0,A.x)({buttonLink:[C.wp.reset.button,C.wp.linkStyle]});function R(e){var n=e.performPaneOperation,t=e.editSecretsAuthz;return(0,u.Y)(_.A,{pane:{type:"envEditor"},bodyText:(0,u.FD)(x.S,{gap:4,children:[t.isAuthorized?null:(0,u.Y)(k.N,{icon:(0,u.Y)(D.A,{}),text:t.message}),(0,u.Y)("div",{children:(0,u.Y)(Y(),{href:m.ik.SECRETS_SAFETY,target:"_blank",rel:"noopener",children:"Learn how Replit keeps your Secrets safe."})}),(0,u.FD)("div",{children:["Not sure where to start?"," ",(0,u.Y)("button",{onClick:function(){n({operation:"open",pane:{type:"integrations"}}),(0,y.u4)(y.AZ.TOOL_OPENED,{source:"secretsPaneNudge",tool:"integrations"})},css:E.buttonLink,children:"Explore Integrations."})]})]})})}function I(e){var n=e.message;return(0,u.Y)(_.A,{pane:{type:"envEditor"},bodyText:(0,u.FD)(x.S,{gap:4,children:[(0,u.Y)("div",{children:n}),(0,u.Y)("div",{children:(0,u.Y)(Y(),{href:m.ik.SECRETS,target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})})]})})}var T=t(82532),F=t(69961),P=t(50301),L=t(81740),U=t(36937),N=t(11769),O=t(52749),M=t(83070),H=t(41358),B=t(4616),z=t(78626),W=t(53307),G=t(69554),V=t(49748),Z=(0,A.x)({root:[C.wp.flex.column,C.wp.p(8),C.wp.colWithGap(8)],header:[C.wp.gap(4),C.wp.align.start,{"& > *:first-child":[C.wp.flex.growAndShrink(1),{alignSelf:"end"}]}],list:[C.wp.flex.column,C.wp.borderRadius(),C.wp.overflow("hidden")],item:[C.wp.display.grid,C.wp.align.center,C.wp.justify.spaceBetween,C.wp.px(8),C.wp.py(12),C.wp.border({direction:"bottom",color:U.LU.outlineDimmer,width:1}),{gridTemplateColumns:"1fr 1fr","&:last-child":{borderBottom:"none"},"> *:last-child":{justifyContent:"end"}}],itemName:[C.wp.flex.row,C.wp.gap(8),C.wp.align.center,C.wp.overflow("hidden"),{"*":{overflow:"hidden",textOverflow:"ellipsis"}}],itemValue:[C.wp.overflow("hidden"),C.wp.flex.row,C.wp.gap(4),C.wp.align.center,{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},span:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}]}),j=function(e){var n=e.name,t=e.value,r=e.checked,i=e.onCheck,o=e.disabled,a=e.disabledReason,s=e.linked,c=(0,l._)((0,d.useState)(!0),2),p=c[0],f=c[1];return(0,u.FD)(x.S,{css:Z.item,children:[(0,u.FD)("div",{css:Z.itemName,children:[s?(0,u.Y)(z.m_,{tooltip:"Linked to Account Secrets",children:(0,u.Y)(V.A,{color:U.LU.accentPrimaryStronger})}):(0,u.Y)(O.S,{checked:r,onChange:i,id:"secret-".concat(n),name:"Select secret",disabled:o}),(0,u.Y)("label",{htmlFor:"secret-".concat(n),children:n}),o&&!s&&a?(0,u.Y)(z.m_,{tooltip:a,children:(0,u.Y)(D.A,{color:U.LU.foregroundDimmer})}):null]}),(0,u.FD)(x.S,{css:Z.itemValue,"data-sensitive":p,children:[(0,u.Y)("span",{children:p?"****************":t}),(0,u.Y)(M.K0,{alt:p?"Hide secret":"Show secret",onClick:function(){return f(!p)},children:p?(0,u.Y)(G.A,{}):(0,u.Y)(W.A,{})})]})]})};function q(e){var n=e.secrets,t=e.onSelectSecrets,r=e.actionText,i=e.helpText,o=e.existingKeys,a=e.linkedSecrets,s=void 0===a?[]:a,c=(0,l._)((0,d.useState)(new Set),2),p=c[0],f=c[1],h=s.length>=10,m=s.length+p.size>=10,g=(0,d.useCallback)(function(){return n.filter(function(e){return p.has(e.name)})},[n,p]),v=new Set(s.map(function(e){return e.secret.id}));return(0,u.FD)(x.S,{css:Z.root,children:[h?(0,u.Y)(k.N,{colorway:"warning",icon:(0,u.Y)(D.A,{}),text:"You've reached the limit of ".concat(10," linked secrets. Please unlink some secrets before adding more.")}):m?(0,u.Y)(k.N,{colorway:"warning",icon:(0,u.Y)(D.A,{}),text:"Selecting another secret would exceed the limit of ".concat(10," linked secrets.")}):null,(0,u.FD)(x.S,{css:Z.header,row:!0,justify:"space-between",children:[(0,u.Y)(B.EY,{variant:"subheadDefault",children:"Account secrets are only visible to you."}),(0,u.Y)(N.$n,{colorway:"primary",text:r,disabled:0===p.size,onClick:function(){return t(g())},size:"small"})]}),(0,u.Y)(B.EY,{color:"dimmer",children:i}),(0,u.Y)(H.ui,{elevated:!0,css:Z.list,children:n.map(function(e){return(0,u.Y)(j,{checked:p.has(e.name),onCheck:function(n){n&&s.length+p.size>=10||f(function(t){var r=new Set(t);return n?r.add(e.name):r.delete(e.name),r})},value:e.value||"",name:e.name,linked:v.has(e.id),disabled:o.has(e.name)||h||!p.has(e.name)&&m,disabledReason:o.has(e.name)?"A secret with this name already exists in this Repl":h?"Secret limit reached. Please unlink some secrets before adding more.":m&&!p.has(e.name)?"Cannot select more secrets. This would exceed the limit of ".concat(10):void 0},e.name)})})]})}var K=t(93393),$=t(90629),J=t(3443),Q=t(45773),X=t(47701),ee=t(66905),en=t(35106),et=t(61191),er=t(85144),ei=t(24140),eo=t(31571),ea=t(57731),el=t(74726),es=y.AZ.ENV_EDITOR_USED;function ec(e){var n,t=e.secrets,i=e.update,o=e.disabledMessage,a=(0,l._)((0,d.useState)(!1),2),s=a[0],p=a[1],f=(0,l._)((0,d.useState)(!1),2),h=f[0],m=f[1],g=(0,l._)((0,d.useState)(!1),2),v=g[0],w=g[1],b=(0,l._)((0,d.useState)(0),2),S=b[0],Y=b[1],_=(0,l._)((0,d.useState)(0),2),A=_[0],D=_[1],E=0===S,R=(0,J.bu)(function(e){var n=e.state.doc.toString(),t=0===A?eu(n):ed(n);return Y(t),(0,y.u4)(es,{action:0===t?"rawEditorUpdatedSuccess":"rawEditorUpdatedError"}),[]}),I=(0,ee.A)(),T=I.ref,F=I.view,P=function(){h||p(!1)},L=function(){w(!1),p(!0),(0,y.u4)(es,{action:"rawEditorOpened"})},O=function(){if(!F)return!1;var e=F.state.doc.toString(),n=0===A?eu(e):ed(e);return Y(n),0===n},M=(n=(0,r._)(function(){var e,n;return(0,c.YH)(this,function(t){switch(t.label){case 0:if(!F||!O())return[2];m(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),e=F.state.doc.toString(),[4,i(0===A?new Map(Object.entries(JSON.parse(e)).map(function(e){var n=(0,l._)(e,2);return[n[0],n[1]]})):en.A.parse(e))];case 2:return t.sent(),m(!1),w(!0),setTimeout(function(){P(),setTimeout(function(){w(!1)},500)},500),[3,4];case 3:return n=t.sent(),$.Cp(n),(0,y.u4)(es,{action:"rawEditorUpdatedError"}),Y(4),m(!1),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,d.useEffect)(function(){if(F){var e=0===A?JSON.stringify(Object.fromEntries(t.entries()),null,2):en.A.serialize(t);0===A&&"{}"===e&&(e="{\n  \n}"),F.dispatch({changes:{from:0,to:F.state.doc.length,insert:e}}),F.dispatch({selection:{anchor:F.state.doc.length-2*(0===A)}}),F.focus()}},[F,t,A]),(0,u.FD)(z.m_,{isDisabled:void 0===o,tooltip:o,children:[(0,u.FD)(x.S,{row:!0,gap:8,children:[(0,u.Y)(N.$n,{onClick:function(){D(0),L()},text:"Edit as JSON",iconLeft:(0,u.Y)(eo.A,{}),size:"small",disabled:void 0!==o||h}),(0,u.Y)(N.$n,{onClick:function(){D(1),L()},text:"Edit as .env",iconLeft:(0,u.Y)(el.A,{}),size:"small",disabled:void 0!==o||h})]}),(0,u.Y)(er.a,{isOpen:s,onRequestClose:function(){return P()},children:(0,u.FD)(x.S,{gap:24,children:[(0,u.Y)(B.Y9,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,u.Y)(B.EY,{children:0===A?"Secrets are specified in JSON. Values must be strings.":'Secrets are specified in .env format (KEY="value").'}),(0,u.Y)(H.ui,{css:[C.wp.borderRadius(8),C.wp.transition.snappy,C.wp.p(4),{border:"1px solid ".concat(U.LU.outlineDimmer),":hover":{borderColor:U.LU.outlineStronger}}],elevated:!0,children:(0,u.Y)(X.Ay,{ref:T,readOnly:h||v,extensions:[R,Q.w4.of([{key:(0,et.FM)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return M(),!0},preventDefault:!0,stopPropagation:!0}])],language:0===A?"json":"properties",hideGutter:!0})}),(0,u.FD)(x.S,{row:!0,gap:4,justify:"end",children:[!E&&(0,u.Y)(k.N,{icon:(0,u.Y)(ea.A,{}),colorway:"negative",text:function(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return'Make sure the data is in valid .env format (KEY="value").';case 3:return"Make sure that all values are strings.";case 5:return"Make sure that all keys are non-empty strings.";case 4:return"There was an error saving the secrets.";default:return""}}(S)}),(0,u.FD)(x.S,{row:!0,gap:12,children:[(0,u.Y)(N.$n,{onClick:P,text:"Cancel"}),(0,u.Y)(N.$n,{iconLeft:(0,u.Y)(ei.A,{}),stretch:!0,colorway:v?"positive":"primary",text:v?"Saved!":"Save",disabled:!E||h||v,onClick:function(){return M()}})]})]})]})})]})}function eu(e){try{var n=JSON.parse(e);for(var t in n){if("string"!=typeof t||"string"!=typeof n[t])return 3;if(!t.trim())return 5}return 0}catch(e){return 1}}function ed(e){try{var n=e.replace(/#.*$/gm,"").split("\n"),t="",r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;if((t+=(t?"\n":"")+c).trim()){var u=(t.match(/'/g)||[]).length,d=(t.match(/"/g)||[]).length;if(u%2!=0||d%2!=0){if(c===n[n.length-1])return 2;continue}t=""}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var p=en.A.parse(e),f=!0,h=!1,m=void 0;try{for(var g,v=p[Symbol.iterator]();!(f=(g=v.next()).done);f=!0)if(!(0,l._)(g.value,1)[0].trim())return 5}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}return 0}catch(e){return 2}}var ep=t(67917),ef=[{title:"OpenAI",description:"Integrate with GPT-4, DALL-E, Whisper, and more.",pattern:/^OPENAI_.*/,defaultLink:"https://replit.com/guides/gpt-4o-quickstart-guide#set-up-your-openai-api-key",presetSecrets:[{key:"OPENAI_API_KEY"},{key:"OPENAI_ORG_ID"}]},{title:"Gemini",description:"Leverage Google's latest AI models.",pattern:/^(GEMINI_.*|GOOGLE_API_KEY)/,defaultLink:"https://replit.com/guides/gemini-flash-quickstart-guide#set-up-a-google-api-key"},{title:"Groq",description:"Try a variety of AI models with Groq.",pattern:/^GROQ_.*/,defaultLink:"https://replit.com/guides/groq-chatbot-quickstart#set-up-your-groq-api-key"},{title:"Anthropic",description:"Explore Anthropic's latest Claude AI models.",pattern:/^ANTHROPIC_.*/,defaultLink:"https://replit.com/guides/image2text-ai-app-with-anthropic#add-anthropic-api-key-to-secrets"},{title:"Slack",description:"Use Slack to build interactive apps and bots.",pattern:/^SLACK_.*/,defaultLink:"https://replit.com/guides/slackbot-quickstart#add-secrets",presetSecrets:[{key:"SLACK_SIGNING_SECRET"},{key:"SLACK_APP_TOKEN"},{key:"SLACK_BOT_TOKEN"}]},{title:"HubSpot",description:"Use HubSpot's API to pull customer data.",pattern:/^HUBSPOT_.*/,defaultLink:"https://replit.com/guides/hubspot-deal-data-api-python-flask#getting-started"},{title:"Coinbase Developer Platform",description:"Use Coinbase Developer Platform to build on chain agents and apps.",pattern:/^(CDP_|COINBASE_).*/,defaultLink:"https://replit.com/guides/coinbase-developer-platform-agentkit-quickstart-guide"}],eh=t(11938),em=t(95487),eg=t(40259),ev=t(47245),ey=t(28908),ew=t(80659),eb=t(83728),eS=t(47820),eY=t(81650),e_=t(71872),eA=(0,A.x)({valueInput:[C.wp.flex.grow(0),{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}],linkedSecret:[{'&[data-unlinking="true"]':{opacity:.5,pointerEvents:"none"}}]}),eC=(0,A.x)({root:[C.wp.p(4),C.wp.rowWithGap(4),C.wp.borderRadius(8),C.wp.width("40%"),C.wp.display.flex,C.wp.overflowX("hidden"),C.wp.backgroundColor.backgroundHigher],text:[C.wp.flex.growAndShrink(1)]});function ek(e){var n=e.value;return(0,u.FD)(H.ui,{elevated:!0,css:eC.root,children:[(0,u.Y)(eh.r,{tooltipText:"Copy secret key",textToCopy:n}),(0,u.Y)(z.m_,{tooltip:(0,u.Y)(B.EY,{children:n}),children:function(e,t){return(0,u.Y)(B.EY,(0,a._)((0,o._)({ref:t},e),{multiline:!1,css:eC.text,children:n}))}})]})}var ex=(0,A.x)({root:[C.wp.p(4),C.wp.rowWithGap(4),C.wp.borderRadius(8),C.wp.flex.growAndShrink(1),C.wp.align.center,C.wp.backgroundColor.backgroundHigher],text:[C.wp.flex.growAndShrink(1),C.wp.truncate,{fontFamily:U.LU.fontFamilyCode}],input:[{border:"none",background:"inherit",fontFamily:U.LU.fontFamilyCode,'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}]});function eD(e){var n=e.value,t=e.placeholder,r=void 0===t?"Enter your secret value":t,i=e.onChange,o=e.canEditDisabledMessage,a=(0,l._)((0,d.useState)(!1),2),s=a[0],c=a[1],p=void 0===o;return(0,u.FD)(H.ui,{elevated:!0,css:ex.root,children:[(0,u.Y)(eh.r,{tooltipText:p?"Copy secret value":o,textToCopy:p?n:""}),i&&p?(0,u.Y)(eg.pd,{value:n,onChange:function(e){return i(e.target.value)},placeholder:r,css:ex.input,"data-sensitive":n&&!s}):(0,u.Y)(B.EY,{multiline:!1,css:ex.text,children:n?(0,u.Y)(u.FK,{children:s?n:"•".repeat(8)}):r}),(0,u.Y)(M.K0,{alt:"Toggle Secret",tooltipContents:o,tooltipBehavior:p?"hidden":void 0,onClick:function(){return c(!s)},disabled:!p,children:s?(0,u.Y)(G.A,{}):(0,u.Y)(W.A,{})})]})}var eE=(0,A.x)({keySection:[C.wp.width("40%")],titleLabel:[C.wp.pt(2),C.wp.pb(4),{label:[C.wp.flex.row,C.wp.gap(4),C.wp.align.center]}]}),eR=(0,A.x)({root:[C.wp.height("100%"),C.wp.borderRadius(8),{'& [aria-haspopup="listbox"]':[C.wp.height(32)]}],item:[C.wp.flex.row,C.wp.rowWithGap(8),C.wp.align.center],itemDanger:[C.wp.flex.row,C.wp.rowWithGap(8),C.wp.align.center,{color:U.LU.accentNegativeStronger}]});function eI(e){var n=e.name,t=e.value,r=void 0===t?"":t,i=e.isEditing,l=e.isSensitive,s=e.canEdit,c=void 0===s||s,d=e.editDisabledMessage,p=e.onToggleSensitive,f=e.renderSuffix,h=e.renderKeyExtra;return(0,u.FD)(x.S,{row:!0,gap:8,align:"center",children:[(0,u.FD)(x.S,{css:eC.root,children:[(0,u.Y)(eh.r,{tooltipText:"Copy secret key",textToCopy:n}),(0,u.Y)(z.m_,{tooltip:(0,u.Y)(B.EY,{children:n}),children:function(e,t){return(0,u.Y)(B.EY,(0,a._)((0,o._)({ref:t},e),{multiline:!1,css:eC.text,children:n}))}}),h?(0,u.Y)(x.S,{justify:"center",children:null==h?void 0:h()}):null]}),(0,u.FD)(x.S,{css:ex.root,children:[(0,u.Y)(eh.r,{tooltipText:c?"Copy secret value":d,textToCopy:c?r:""}),i&&c?(0,u.Y)(eg.pd,{value:r,onChange:function(){},placeholder:"Enter your secret value",css:ex.input,"data-sensitive":r&&l}):(0,u.Y)(B.EY,{multiline:!1,css:ex.text,children:r?(0,u.Y)(u.FK,{children:l?"•".repeat(8):r}):"Enter your secret value"}),(0,u.Y)(M.K0,{alt:"Toggle Secret",tooltipContents:d,tooltipBehavior:c?"hidden":void 0,onClick:p,disabled:!c,children:l?(0,u.Y)(W.A,{}):(0,u.Y)(G.A,{})})]}),null==f?void 0:f()]})}function eT(e){var n=e.secret,t=e.onUpdateSecret,r=e.onDeleteSecret,i=e.onSearchSecret,s=e.editAuthorizationErrorMessage,c=(0,l._)((0,d.useState)(""===n.value?{key:n.key,value:""}:null),2),p=c[0],f=c[1],h=(0,l._)((0,d.useState)(!1),2),m=h[0],g=h[1],v=(0,l._)((0,d.useState)(!0),2),y=v[0],w=v[1],b=(0,d.useMemo)(function(){var e,t,r,i,o,a;return t=null!=(e=null==p?void 0:p.key)?e:n.key,null!=(i=null==(a=null==(o=ef.find(function(e){return e.pattern.test(t)}))||null==(r=o.presetSecrets)?void 0:r.find(function(e){return e.key===t}))?void 0:a.link)?i:null==o?void 0:o.defaultLink},[null==p?void 0:p.key,n.key]),S=void 0===s;return p?(0,u.FD)(u.FK,{children:[(0,u.Y)(eF,{keyValue:p.key,onKeyChange:function(e){return f(function(n){return n?(0,a._)((0,o._)({},n),{key:e}):n})},value:p.value,onValueChange:function(e){return f(function(n){return n?(0,a._)((0,o._)({},n),{value:e}):n})},isSensitive:y,onToggleSensitive:function(){return w(!y)},renderValueExtra:function(){return b&&(0,u.Y)(B.EY,{variant:"small",children:(0,u.Y)("a",{href:b,target:"_blank",children:"Where do I find this?"})})},onDelete:function(){return g(!0)},onCancel:function(){return f(null)},onSave:function(){t(n.key,{key:p.key.trim(),value:p.value}),f(null)},saveButtonText:""===n.value?"Add Secret":"Update Secret"}),m&&(0,u.Y)(eL,{keys:[n.key],isOpen:m,onClose:function(){return g(!1)},onConfirm:function(){return r(n.key)}})]}):(0,u.Y)(eI,{name:n.key,value:n.value,isEditing:!1,isSensitive:y,canEdit:S,editDisabledMessage:s,onToggleSensitive:function(){return w(!y)},renderSuffix:function(){return(0,u.FD)(u.FK,{children:[(0,u.Y)(H.ui,{elevated:!0,css:eR.root,children:(0,u.Y)(ew.A,{label:"Options",items:[S&&{label:(0,u.FD)(x.S,{css:eR.item,children:[(0,u.Y)(eb.A,{}),(0,u.Y)(B.EY,{multiline:!1,children:"Edit"})]}),onClick:function(){return f({key:n.key,value:n.value})}},{label:(0,u.FD)(x.S,{css:eR.item,children:[(0,u.Y)(eS.A,{}),(0,u.Y)(B.EY,{multiline:!1,children:"Find Usages"})]}),onClick:function(){return i(n.key)}},S&&{label:(0,u.FD)(x.S,{css:eR.itemDanger,children:[(0,u.Y)(eY.A,{}),(0,u.Y)(B.EY,{multiline:!1,children:"Delete"})]}),isDestructive:!0,onClick:function(){return g(!0)}}].filter(Boolean),onItemClick:function(e){var n;return null==(n=e.onClick)?void 0:n.call(e)}})}),m&&(0,u.Y)(eL,{keys:[n.key],isOpen:m,onClose:function(){return g(!1)},onConfirm:function(){return r(n.key)}})]})}})}function eF(e){var n=e.keyLabel,t=e.keyValue,r=e.onKeyChange,i=e.valueLabel,o=e.value,a=e.onValueChange,l=e.isSensitive,s=e.onToggleSensitive,c=e.isValueReadOnly,p=e.disableValueVisibilityToggle,f=e.renderValueExtra,h=e.onDelete,m=e.onCancel,g=e.onSave,v=e.saveButtonText,y=e.deleteButtonText,w=e.isSaving,b=e.keyError,S=(0,d.useMemo)(function(){return null!==t.match(K.H)},[t]),Y=b||(!S&&t?K.l:void 0);return(0,u.FD)(x.S,{gap:8,onKeyDown:function(e){"Enter"===e.key&&g()},children:[(0,u.FD)(x.S,{row:!0,gap:8,children:[(0,u.Y)(x.S,{css:eE.keySection,gap:2,children:(0,u.FD)(ey.A_,{validate:function(){return b||(!S&&t?K.l:void 0)},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretKey",value:t,onChange:r,isInvalid:!!Y,children:[(0,u.Y)(ev.J,{color:"dimmer",multiline:!1,css:eE.titleLabel,children:void 0===n?"Key":n}),(0,u.Y)(eg.pd,{placeholder:"SECRET_KEY",autoComplete:"off",css:eA.valueInput,autoFocus:!0}),(0,u.Y)(em.bg,{children:Y})]})}),(0,u.FD)(x.S,{grow:!0,shrink:!0,gap:2,children:[(0,u.FD)(ey.A_,{isRequired:!0,minLength:1,name:"secretValue",value:o,onChange:function(e){return null==a?void 0:a(e)},children:[(0,u.FD)(ev.J,{color:"dimmer",multiline:!1,css:eE.titleLabel,children:[void 0===i?"Value":i," ",(0,u.Y)(M.K0,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:s,disabled:p,size:12,children:l?(0,u.Y)(W.A,{}):(0,u.Y)(G.A,{})})]}),(0,u.Y)(eg.pd,{"data-sensitive":l,css:eA.valueInput,readOnly:c,autoComplete:"off"})]}),null==f?void 0:f()]})]}),(0,u.FD)(x.S,{row:!0,gap:8,children:[h?(0,u.Y)(N.$n,{size:"small",text:void 0===y?"Delete":y,colorway:"negative",onClick:h,disabled:!!Y,loading:w}):null,(0,u.Y)(x.S,{grow:!0}),(0,u.FD)(x.S,{row:!0,gap:8,children:[(0,u.Y)(N.$n,{size:"small",text:"Cancel",onClick:m,loading:w}),(0,u.Y)(N.$n,{size:"small",colorway:"primary",text:v,disabled:!t.length||!!Y||!S,loading:w,onClick:g})]})]})]})}function eP(e){var n=e.link,t=e.onUpdateLink,i=e.onUnlink,o=e.existingKeys,a=(0,l._)((0,d.useState)(null),2),s=a[0],p=a[1],f=(0,l._)((0,d.useState)(!0),2),h=f[0],m=f[1],g=(0,l._)((0,d.useState)(!1),2),v=g[0],y=g[1],w=(0,l._)((0,d.useState)(!1),2),b=w[0],S=w[1],Y=s&&o.has(s.alias)&&s.alias!==n.alias?"A secret with this name already exists":void 0;return s?(0,u.Y)(eF,{keyLabel:"Name",keyValue:s.alias,onKeyChange:function(e){return p({alias:e})},value:n.secret.value,isSensitive:h,onToggleSensitive:function(){return m(!h)},isValueReadOnly:!0,onDelete:(0,r._)(function(){return(0,c.YH)(this,function(e){switch(e.label){case 0:S(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,i(n.id)];case 2:return e.sent(),[3,4];case 3:return S(!1),[7];case 4:return[2]}})}),onCancel:function(){return p(null)},onSave:(0,r._)(function(){return(0,c.YH)(this,function(e){switch(e.label){case 0:if(Y)return[2];y(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,t(n.id,s.alias.trim())];case 2:return e.sent(),p(null),[3,4];case 3:return y(!1),[7];case 4:return[2]}})}),saveButtonText:"Update",deleteButtonText:"Unlink",isSaving:v||b,keyError:Y}):(0,u.Y)(x.S,{css:eA.linkedSecret,"data-unlinking":b,children:(0,u.Y)(eI,{name:n.alias,value:n.secret.value,isEditing:!1,isSensitive:h,canEdit:!0,onToggleSensitive:function(){return m(!h)},renderKeyExtra:function(){return(0,u.Y)(z.m_,{tooltip:"Linked to Account Secret: ".concat(n.secret.name),children:(0,u.Y)(V.A,{color:U.LU.accentPrimaryStronger})})},renderSuffix:function(){return(0,u.Y)(H.ui,{elevated:!0,css:eR.root,children:(0,u.Y)(ew.A,{label:"Options",items:[{label:(0,u.FD)(x.S,{css:eR.item,children:[(0,u.Y)(eb.A,{}),(0,u.Y)(B.EY,{multiline:!1,children:"Edit"})]}),onClick:function(){return p({alias:n.alias})}},{label:(0,u.FD)(x.S,{css:eR.itemDanger,children:[(0,u.Y)(eY.A,{}),(0,u.Y)(B.EY,{multiline:!1,children:"Unlink"})]}),isDestructive:!0,onClick:(0,r._)(function(){return(0,c.YH)(this,function(e){switch(e.label){case 0:S(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,i(n.id)];case 2:return e.sent(),[3,4];case 3:return S(!1),[7];case 4:return[2]}})})}].filter(Boolean),onItemClick:function(e){var n;return null==(n=e.onClick)?void 0:n.call(e)}})})}})})}function eL(e){var n=e.keys,t=e.isOpen,r=e.onClose,i=e.onConfirm,o=e.loading,a=n.length>1,l=(0,ep.jt)();return(0,u.Y)(er.a,{isOpen:t,onRequestClose:r,children:(0,u.FD)(x.S,{gap:12,children:[(0,u.Y)(B.EY,{variant:"subheadDefault",multiline:!1,children:a?"Delete secrets?":"Delete ".concat(n[0],"?")}),(0,u.FD)(B.EY,{color:"dimmer",children:["Are you sure you would like to delete"," ",a?"these secrets (".concat(n.join(", "),")"):"this secret","? This cannot be undone."]}),l?(0,u.Y)(k.N,{icon:(0,u.Y)(e_.A,{}),text:"Deleting these secrets may break historical agent checkpoint previews that depend on them. Previews always use the latest secrets.",colorway:"warning"}):null,(0,u.FD)(x.S,{justify:"end",row:!0,gap:8,children:[(0,u.Y)(N.$n,{text:"Cancel",onClick:r}),(0,u.Y)(N.$n,{text:"Delete",colorway:"negative",onClick:i,loading:o})]})]})})}var eU=t(42793),eN=t(86733),eO=t(30124),eM=t(98661),eH=t(27659),eB=t(4163),ez=t(63456),eW=t(6064),eG=t(51055),eV=t(30445),eZ=(0,eU.AH)([C.wp.center,C.wp.coverContainer]),ej=C.kL.max(420),eq=(0,A.x)({root:[C.wp.flex.column,C.wp.flex.growAndShrink(1),C.wp.height("100%")],body:[C.wp.overflowY("auto")],header:[C.wp.border({color:U.LU.outlineDimmest,width:1,direction:"bottom"}),C.wp.overflowX("auto"),C.wp.overflowY("hidden")],tabs:[C.wp.flex.growAndShrink(1),{height:"100%",'[role="tablist"]':{height:"100%","& > *":{borderRadius:0}}}],tabExtraText:(0,i._)({},ej,{display:"none"}),headerButtons:[C.wp.gap(8),C.wp.p(8)],addSecretTitleContainer:[C.wp.width("40%")],secretSelect:[C.wp.minWidth(48)],addSecretContainer:[C.wp.flex.column,C.wp.colWithGap(8),C.wp.py(8),C.wp.flex.column,C.wp.colWithGap(8)],addSecretValue:[],addSecretValueLabel:[{label:[C.wp.display.flex,C.wp.flex.row,C.wp.gap(4),C.wp.align.center]}]}),eK=(0,A.x)({body:[C.wp.overflowY("auto")],footer:[C.wp.border({color:U.LU.outlineDimmer,width:1,direction:"top"}),{"& > *":{width:"fit-content"}}],link:[C.wp.linkStyle,C.wp.color.foregroundDefault]}),e$=["SLACK_API_KEY","GOOGLE_API_KEY","MONGO_API_KEY","FIREBASE_API_KEY"];function eJ(e){var n=e.onClose,t=e.onAdd,r=e.otherKeys,i=(0,l._)((0,d.useState)(!0),2),s=i[0],c=i[1],p=(0,l._)((0,d.useState)({key:"",value:""}),2),f=p[0],h=p[1],m=(0,l._)((0,d.useState)(function(){var e=Math.floor(Math.random()*e$.length);return e$[e]}),1)[0],g=(0,d.useMemo)(function(){return null!==f.key.match(K.H)},[f.key]),v=(0,d.useMemo)(function(){return r.includes(f.key)?"Secret already exists":!g&&f.key?K.l:void 0},[r,f.key,g]),y=f.key.length>0&&!v,w=function(){y&&(t({key:f.key.trim(),value:f.value}),h({key:"",value:""}))};return(0,u.FD)(x.S,{css:eq.addSecretContainer,onKeyDown:function(e){"Enter"===e.key&&w()},children:[(0,u.FD)(x.S,{row:!0,gap:8,children:[(0,u.Y)(x.S,{css:eq.addSecretTitleContainer,children:(0,u.FD)(ey.A_,{validate:function(){return v},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretKey",value:f.key,onChange:function(e){return h(function(n){return(0,a._)((0,o._)({},n),{key:e})})},isInvalid:!!v,children:[(0,u.Y)(ev.J,{color:"dimmer",multiline:!1,children:"Key"}),(0,u.Y)(eg.pd,{placeholder:m,autoComplete:"off",autoFocus:!0}),(0,u.Y)(em.bg,{children:v})]})}),(0,u.Y)(x.S,{grow:!0,shrink:!0,gap:4,children:(0,u.FD)(ey.A_,{isRequired:!0,minLength:1,name:"secretValue",value:f.value,onChange:function(e){return h(function(n){return(0,a._)((0,o._)({},n),{value:e})})},css:eq.addSecretValue,children:[(0,u.FD)(ev.J,{color:"dimmer",multiline:!1,css:eq.addSecretValueLabel,children:["Value",(0,u.Y)(M.K0,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return c(!s)},size:12,children:s?(0,u.Y)(W.A,{}):(0,u.Y)(G.A,{})})]}),(0,u.Y)(eg.pd,{"data-sensitive":s,autoComplete:"off"})]})})]}),(0,u.FD)(x.S,{row:!0,gap:8,justify:"end",children:[(0,u.Y)(N.$n,{size:"small",text:"Cancel",onClick:function(){return n()}}),(0,u.Y)(N.$n,{size:"small",text:"Add Secret",colorway:"primary",disabled:!y,onClick:w})]})]})}var eQ=[C.wp.flex.row,C.wp.rowWithGap(8),C.wp.align.center],eX=(0,A.x)({root:[C.wp.height("100%"),C.wp.borderRadius(8),{'& [aria-haspopup="listbox"]':[C.wp.height(32)]}],item:eQ,itemDanger:[eQ,{color:U.LU.accentNegativeStronger}]});function e0(e){var n=e.onEdit,t=e.onDelete,r=e.autoSyncState;return(0,u.Y)(H.ui,{elevated:!0,css:eX.root,children:(0,u.Y)(ew.A,{label:"Options",items:[{label:(0,u.FD)(x.S,{css:eX.item,children:[(0,u.Y)(eb.A,{}),(0,u.Y)(B.EY,{multiline:!1,children:"Edit"})]}),onClick:n},function(e){switch(e.type){case"disabled":case"deploymentOnly":return null;case"synced":return{label:(0,u.FD)(x.S,{css:eX.item,children:[(0,u.Y)(eV.A,{}),(0,u.Y)(B.EY,{multiline:!1,children:"Unsync from workspace value"})]}),onClick:e.optOut};case"unsynced":return{label:(0,u.FD)(x.S,{css:eX.item,children:[(0,u.Y)(V.A,{}),(0,u.Y)(B.EY,{multiline:!1,children:"Sync to workspace value"})]}),onClick:e.sync};default:(0,h.A)(e)}}(r),{label:(0,u.FD)(x.S,{css:eX.itemDanger,children:[(0,u.Y)(eY.A,{}),(0,u.Y)(B.EY,{multiline:!1,children:"Delete"})]}),isDestructive:!0,onClick:t}].filter(Boolean),onItemClick:function(e){var n;return null==(n=e.onClick)?void 0:n.call(e)}})})}var e1=(0,A.x)({secretItem:[C.wp.borderRadius(8),C.wp.backgroundColor.backgroundRoot]});function e2(e){var n=e.secrets,t=e.onUpdateSecret,r=e.onDeleteSecret,i=e.onAddSecret,o=e.showAddSecret,a=e.onSearch,c=e.onClose,p=e.editAuthorizationErrorMessage,f=e.linkedSecrets,h=e.userSecrets,m=e.onUpdateLink,g=e.onUnlink,v=(0,d.useMemo)(function(){return new Set((0,s._)(n.keys()).concat((0,s._)((null==f?void 0:f.map(function(e){return e.alias}))||[])))},[n,f]),y=(0,d.useMemo)(function(){return(0,s._)(n.entries()).filter(function(e){var n=(0,l._)(e,2);return""===(n[0],n[1])})},[n]),w=(0,d.useMemo)(function(){return(0,s._)(n.entries()).filter(function(e){var n=(0,l._)(e,2);return""!==(n[0],n[1])})},[n]);return o||0!==y.length||0!==w.length||(null==f?void 0:f.length)?(0,u.FD)(x.S,{py:8,gap:8,children:[0!==y.length&&(0,u.FD)(u.FK,{children:[(0,u.FD)(x.S,{px:8,gap:8,children:[(0,u.Y)(B.EY,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,u.Y)(B.EY,{variant:"small",children:"This App contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,u.Y)(x.S,{gap:8,children:y.map(function(e){var n=(0,l._)(e,2),i=n[0],o=n[1];return(0,u.Y)(H.ui,{elevated:!0,css:e1.secretItem,p:8,children:(0,u.Y)(eT,{secret:{key:i,value:o},onUpdateSecret:t,onDeleteSecret:r,onSearchSecret:function(){},editAuthorizationErrorMessage:p})},i)})})]}),(0,u.Y)(eO.a,{})]}),(0,u.FD)(x.S,{px:8,gap:8,children:[o?(0,u.Y)(eJ,{onClose:c,onAdd:i,otherKeys:Object.keys(n)}):null,w.map(function(e){var n=(0,l._)(e,2),i=n[0],o=n[1];return(0,u.Y)(eT,{secret:{key:i,value:o},onUpdateSecret:t,onDeleteSecret:r,onSearchSecret:a,editAuthorizationErrorMessage:p},i)}),f&&f.length>0?(0,u.FD)(u.FK,{children:[w.length>0?(0,u.Y)(eO.a,{}):null,f.map(function(e){return(0,u.Y)(eP,{link:e,onUpdateLink:m,onUnlink:g,userSecrets:h,existingKeys:v},e.id)})]}):null]})]}):null}function e4(e){var n,t=e.secrets,r=e.activeFile,i=(0,l._)((0,d.useState)(null==(n=t.keys().next())?void 0:n.value),2),o=i[0],a=i[1],c=(0,F.A)(r);return void 0!==o&&c&&(0,T.M)(r,o)&&t.size>0?(0,u.FD)(x.S,{px:8,py:16,gap:8,children:[(0,u.FD)(x.S,{row:!0,gap:8,align:"center",children:[(0,u.Y)(B.EY,{multiline:!1,children:"Access secret"}),(0,u.Y)(eH.l,{css:eq.secretSelect,items:(0,s._)(t.keys()).map(function(e){return{title:e}}),selectedItem:{title:o},onChange:function(e){return a(e.title)}})]}),(0,u.Y)(T.A,{elevated:!0,keyName:o,filePath:r})]}):null}var e5=(0,A.x)({text:[C.wp.flex.growAndShrink(1)]}),e3=function(e){var n,t,i,o,a,l=e.performPaneOperation,s=e.showAddSecret,d=e.setShowAddSecret,p=e.secrets,f=e.editAuthorization,h=e.error,v=e.dismissibleElement,b=v.isDone,S=v.setAsDone,Y=e.linkedSecrets,_=e.userSecrets,A=e.onUpdateLink,C=e.onUnlink,E=(0,g.A)().showConfirm,T=(0,w.A)().secrets,F=(0,L.lO)().isRunning,U=(0,P.rM)(),N=function(){d(!1)},O=(n=(0,r._)(function(e){return(0,c.YH)(this,function(n){return(0,y.u4)(y.AZ.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),T.addEntries([{key:e.key,value:e.value}]),F&&E("Re-run your App to use this secret"),N(),[2]})}),function(e){return n.apply(this,arguments)}),M=(t=(0,r._)(function(e,n){var t;return(0,c.YH)(this,function(r){return(0,y.u4)(y.AZ.ENV_EDITOR_USED,{action:"updated",multiline:n.value.includes("\n")}),(t=new Map(p)).delete(e),t.set(n.key,n.value),T.replaceAll(t),[2]})}),function(e,n){return t.apply(this,arguments)}),H=(i=(0,r._)(function(e){return(0,c.YH)(this,function(n){return(0,y.u4)(y.AZ.ENV_EDITOR_USED,{action:"deleted"}),T.removeEntries(e),[2]})}),function(e){return i.apply(this,arguments)}),z=p.size>0||Y&&Y.length>0;return!f||h?(0,u.Y)(I,{message:null!=(a=null==h?void 0:h.message)?a:"Unable to determine secret eligibility, please refresh your browser."}):(0,u.FD)(u.FK,{children:[(0,u.FD)(x.S,{css:eK.body,grow:!0,shrink:!0,children:[f.isAuthorized&&!b?(0,u.Y)(x.S,{p:8,children:(0,u.Y)(k.N,{icon:(0,u.Y)(D.A,{}),closable:!0,closeAction:function(){return S()},colorway:"primary",text:(0,u.FD)(B.EY,{css:e5.text,children:["Secrets are accessible to anyone who has access to this App. To restrict secret access, you must update App invite permissions. For more information, visit"," ",(0,u.Y)("a",{href:m.ik.SECRETS,target:"_blank",css:eK.link,children:"our documentation"}),"."]})})}):null,z||!1!==s?null:(0,u.Y)(R,{performPaneOperation:l,editSecretsAuthz:f}),(0,u.Y)(e2,{secrets:p,onUpdateSecret:M,onDeleteSecret:H,onAddSecret:O,showAddSecret:s,onSearch:function(e){return l({operation:"open",pane:{type:"searchReplace",data:{initialQuery:e}}})},editAuthorizationErrorMessage:f.isAuthorized?void 0:f.message,onClose:N,linkedSecrets:Y,userSecrets:_,onUpdateLink:A,onUnlink:C}),U&&z?(0,u.Y)(e4,{secrets:p,activeFile:U}):null]}),(0,u.Y)(x.S,{css:eK.footer,p:4,children:(0,u.Y)(ec,{secrets:p,update:(o=(0,r._)(function(e){return(0,c.YH)(this,function(n){switch(n.label){case 0:return[4,T.replaceAll(e)];case 1:return n.sent(),[2]}})}),function(e){return o.apply(this,arguments)}),disabledMessage:f.isAuthorized?void 0:f.message})})]})},e7={SECRETS:0,ACCOUNT_SECRETS:1};function e6(e,n){return(0,f.AH)({update:function(t,r,i){var l=r.data,s=i.variables;(null==l?void 0:l.unlinkSharedSecrets.__typename)==="UnlinkSharedSecretsResult"&&t.updateQuery({query:f.tD,variables:{replId:e}},function(e){if(!(null==e?void 0:e.getRepl)||"Repl"!==e.getRepl.__typename||!s)return e;var t,r,i=null!=(r=null==(t=e.getRepl.sharedSecretLinks)?void 0:t.filter(function(e){return!s.input.ids.includes(e.id)}))?r:[];return n(i.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,a._)((0,o._)({},e),{getRepl:(0,a._)((0,o._)({},e.getRepl),{sharedSecretLinks:i})})})}})}function e8(e,n){return(0,f.DX)({update:function(t,i){var l=i.data;return(0,r._)(function(){var r,i,u,d,p,h;return(0,c.YH)(this,function(c){switch(c.label){case 0:if((null==l?void 0:l.linkSharedSecrets.__typename)!=="LinkSharedSecretsResult")return[3,2];return i=l.linkSharedSecrets.links,p=(null==(u=t.readQuery({query:f.tD,variables:{replId:e}}))||null==(r=u.getRepl)?void 0:r.__typename)==="Repl"&&null!=(d=u.getRepl.sharedSecretLinks)?d:[],[4,n((h=(0,s._)(p).concat((0,s._)(i))).map(function(e){return{key:e.alias,url:e.secret.signedUrl}}))];case 1:c.sent(),t.updateQuery({query:f.tD,variables:{replId:e}},function(e){return(null==e?void 0:e.getRepl)&&"Repl"===e.getRepl.__typename?(0,a._)((0,o._)({},e),{getRepl:(0,a._)((0,o._)({},e.getRepl),{sharedSecretLinks:h})}):e}),c.label=2;case 2:return[2]}})})()}})}function e9(e){var n,t,i,h,S=e.performPaneOperation,Y=(0,v.A)(),_=(0,w.A)().secrets,A=(0,l._)(e6(Y,_.replaceAllExternalSecrets),1)[0],C=(0,l._)(e8(Y,_.replaceAllExternalSecrets),1)[0],k=(0,l._)((n=(0,w.A)().secrets,(0,f.vC)({update:function(e,t){var r=t.data;if((null==r?void 0:r.updateSharedSecretLink.__typename)==="SharedSecretLink"){var i=r.updateSharedSecretLink;e.updateQuery({query:f.tD,variables:{replId:Y}},function(e){if((null==e||null==(t=e.getRepl)?void 0:t.__typename)!=="Repl")return e;var t,r,l,s=null!=(l=null==(r=e.getRepl.sharedSecretLinks)?void 0:r.map(function(e){return e.id===i.id?i:e}))?l:[];return n.replaceAllExternalSecrets(s.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,a._)((0,o._)({},e),{getRepl:(0,a._)((0,o._)({},e.getRepl),{sharedSecretLinks:s})})})}}})),1)[0],D=(0,l._)((0,d.useState)(e7.SECRETS),2),E=D[0],R=D[1],I=(0,l._)((0,d.useState)(new Map),2),T=I[0],F=I[1],P=(0,l._)((0,d.useState)(!1),2),L=P[0],U=P[1],O=(0,g.A)(),M=(0,b.Z)("editors-have-secret-access-warning"),H=(0,f.d3)({variables:{replId:Y}}),B=H.data,W=H.loading,G=H.error,V=(null==B?void 0:B.getRepl.__typename)==="Repl"?B.getRepl:void 0,Z=null==V?void 0:V.authorizations.editSecrets,j=(0,f.bM)({variables:{replId:Y}}),K=j.data,$=j.loading,J=(0,f.m1)({fetchPolicy:"cache-and-network",ssr:!1}).data,Q=(0,d.useMemo)(function(){if((null==K?void 0:K.getRepl.__typename)==="Repl"&&K.getRepl.sharedSecretLinks)return K.getRepl.sharedSecretLinks},[K]),X=(0,d.useMemo)(function(){var e;return(null==J||null==(e=J.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"?J.currentUser.secrets.items:[]},[J]),ee=(0,d.useMemo)(function(){return new Set((0,s._)(T.keys()).concat((0,s._)((null==Q?void 0:Q.map(function(e){return e.alias}))||[])))},[T,Q]),en=(0,d.useMemo)(function(){return X.map(function(e){return{id:e.id,value:e.value||""}})},[X]);(0,d.useEffect)(function(){(0,y.xm)(y.AZ.ENV_EDITOR_USED,{action:"opened",tab:E===e7.ACCOUNT_SECRETS?"account":"repl"})},[E]),(0,d.useEffect)(function(){var e=_.watch(function(e){F(e)});return function(){e()}},[_,F]);var et=(t=(0,r._)(function(e){return(0,c.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,C({variables:{input:{resourceId:Y,resourceType:p.U97.Repl,secrets:e.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 1:return n.sent(),O.showConfirm("Secrets linked to this App"),R(e7.SECRETS),(0,y.u4)(y.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"secrets-pane",count:e.length,keys:e.map(function(e){return e.name})}),[3,3];case 2:return n.sent(),O.showError("Failed to link secrets"),[3,3];case 3:return[2]}})}),function(e){return t.apply(this,arguments)});return!T||W||$||M.isLoading?(0,u.Y)(x.S,{css:eZ,children:(0,u.Y)(ez.A,{size:24})}):(0,u.FD)(x.S,{css:eq.root,children:[(0,u.FD)(x.S,{css:eq.header,row:!0,gap:8,align:"center",children:[(0,u.Y)(eM.tU,{selectedIndex:E,onSelectionChange:function(e){return R(e)},css:eq.tabs,children:(0,u.FD)(eM.wb,{withDividers:!1,withUnderline:!1,children:[(0,u.FD)(eM.oz,{children:["App ",(0,u.Y)("span",{css:eq.tabExtraText,children:"Secrets"})]},e7.SECRETS),(null==V?void 0:V.isOwner)?(0,u.FD)(eM.oz,{children:["Account ",(0,u.Y)("span",{css:eq.tabExtraText,children:"Secrets"})]},e7.ACCOUNT_SECRETS):null]})}),(0,u.FD)(x.S,{css:eq.headerButtons,row:!0,children:[(0,u.Y)(eN.v,{iconLeft:(0,u.Y)(eB.A,{}),href:m.ik.SECRETS,size:"small",text:"Docs",target:"_blank"}),E===e7.SECRETS?(0,u.Y)(z.m_,{isDisabled:null==Z?void 0:Z.isAuthorized,tooltip:null==Z?void 0:Z.message,children:(0,u.Y)(N.$n,{iconLeft:(0,u.Y)(eW.A,{}),text:(0,u.FD)(u.FK,{children:["New ",(0,u.Y)("span",{css:eq.tabExtraText,children:"Secret"})]}),colorway:"primary",size:"small",disabled:!(null==Z?void 0:Z.isAuthorized),onClick:function(){return U(!0)}})}):null,E===e7.ACCOUNT_SECRETS?(0,u.Y)(z.m_,{isDisabled:null==Z?void 0:Z.isAuthorized,tooltip:null==Z?void 0:Z.message,children:(0,u.Y)(eN.v,{iconLeft:(0,u.Y)(eG.A,{}),text:(0,u.FD)(u.FK,{children:["Manage ",(0,u.Y)("span",{css:eq.tabExtraText,children:"Account"})]}),colorway:"primary",size:"small",href:"/account#account-secrets",target:"_blank"})}):null]})]}),(0,u.FD)(x.S,{css:eq.body,grow:!0,shrink:!0,children:[E===e7.SECRETS?(0,u.Y)(e3,{performPaneOperation:S,showAddSecret:L,setShowAddSecret:U,secrets:T,dismissibleElement:M,editAuthorization:Z,error:G,linkedSecrets:Q,userSecrets:en,onUpdateLink:(i=(0,r._)(function(e,n){return(0,c.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,k({variables:{input:{id:e,resourceId:Y,resourceType:p.U97.Repl,alias:n}}})];case 1:return t.sent(),O.showConfirm("Secret link updated"),[3,3];case 2:return t.sent(),O.showError("Failed to update secret link"),[3,3];case 3:return[2]}})}),function(e,n){return i.apply(this,arguments)}),onUnlink:(h=(0,r._)(function(e){return(0,c.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,A({variables:{input:{resourceId:Y,resourceType:p.U97.Repl,ids:[e]}}})];case 1:return n.sent(),O.showConfirm("Secret unlinked"),[3,3];case 2:return n.sent(),O.showError("Failed to unlink secret"),[3,3];case 3:return[2]}})}),function(e){return h.apply(this,arguments)})}):null,E===e7.ACCOUNT_SECRETS?(0,u.Y)(q,{secrets:X,actionText:"Link to this App",helpText:"Linked secrets will stay in sync with your Account Secrets.",existingKeys:ee,onSelectSecrets:et,linkedSecrets:Q}):null]})]})}},86402:(e,n,t)=>{"use strict";t.d(n,{M:()=>l,r:()=>s});var r=t(86105),i=t(21462),o=t(17548),a=t(17089),l=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];(0,o.S)(function(){a.u4.apply(void 0,(0,r._)(n))})},s=function(e,n,t,r){var o=(0,i.useRef)(!1);(0,i.useEffect)(function(){!o.current&&t()&&((0,a.u4)(e,n),o.current=!0)},r)}},86550:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n            fullName\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n            fullName\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(55100);function d(){var e=(l={variables:{replId:(0,u.A)()}},d=(0,r._)({},s,l),a.I(c,d)).data;if((null==e?void 0:e.repl.__typename)!=="Repl")return[];var n=[];(null==(p=e.repl.owner)?void 0:p.username)&&"User"===e.repl.owner.__typename&&n.push(e.repl.owner);var t=!0,i=!1,o=void 0;try{for(var l,d,p,f,h=e.repl.permissions[Symbol.iterator]();!(t=(f=h.next()).done);t=!0){var m,g=f.value;(null==(m=g.user)?void 0:m.username)&&n.push(g.user)}}catch(e){i=!0,o=e}finally{try{t||null==h.return||h.return()}finally{if(i)throw o}}return n}},86878:(e,n,t)=>{"use strict";t.d(n,{j:()=>dc});var r,i=t(29935),o=t(83846),a=t(17844),l=t(12694),s=t(82643),c=t(81073),u=t(21462),d=t(50534),p=t(50941),f=t(29426),h=t(67917),m=t(73176),g=t(98679),v=t(1982),y=t(55100),w=t(54682),b=t(12584),S=t(41114),Y=t(86997);function _(){var e=(0,b._)(["\n  fragment CurrentUserTipState on UserTipState {\n    id\n    title\n    description\n    content\n    tags\n    priority\n    timeRecommended\n    timeCompleted\n    timeDismissed\n    timeInteracted\n    externalUrl\n    ctaLabel\n    ctaTrigger\n  }\n"]);return _=function(){return e},e}var A=(0,S.J1)(_());function C(){var e=(0,b._)(["\n  query CurrentUserTips {\n    currentUser {\n      id\n      tips {\n        ... on UserTipsList {\n          tips {\n            ...CurrentUserTipState\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return C=function(){return e},e}var k={},x=(0,S.J1)(C(),A);function D(e){var n=(0,a._)({},k,e);return Y.I(x,n)}var E=t(8950),R=t(21762),I=t(31092),T=t(7814),F=t(17341),P=t(71355),L={direction:"forward",state:{sessionCreatedAt:null,planVersions:new Map,latestPlanId:null,rapidBuildState:"not-started"},reducer:function(e,n){var t=e.contents.contents;switch(null==t?void 0:t.$kind){case"sessionCreationEventContents":n.sessionCreatedAt=new Date(e.created);return;case"rapidBuildStarted":n.rapidBuildState="in-progress";return;case"rapidBuildConcluded":n.rapidBuildState="complete";return;case"agentPlanEventContents":var r=t.agentPlanEventContents;if(!r.requiresApproval)return;if(null==n.latestPlanId)n.planVersions.set(r.planId,1);else{var i,o=null!=(i=n.planVersions.get(n.latestPlanId))?i:0;n.planVersions.set(r.planId,o+1)}n.latestPlanId=r.planId;break;case"agentTimelineEventContents":if(null==n.sessionCreatedAt||n.sessionCreatedAt>F.kt||"complete"===n.rapidBuildState)return;var a=(0,P.QN)(t).toolData;if(!(0,P.VF)(a,"commitData"))return;var l=(0,P.QN)(a).billingRate;l===E.pSr.ZERO_RATED?n.rapidBuildState="in-progress":l===E.pSr.NORMAL&&(n.rapidBuildState="complete")}}},U={direction:"forward",state:{sessionCreatedAt:null,planVersions:new Map,latestPlanId:null,rapidBuildState:"not-started"},reducer:function(){return!1}},N=t(76957),O=t(21999),M=(0,N.eU)(!1),H=function(){return(0,O.h)(M)},B=function(){return(0,O.ob)(M)},z=(0,N.eU)(null),W=function(){return null!==(0,O.h)(z)},G=(0,N.eU)([]),V=((0,N.eU)(function(e){return e(G).length>0}),(0,N.eU)(new Set),t(47459)),Z=t(43193),j=t(29369),q=t(68866),K=t(62019),$=t(37743),J=t(1833),Q=t(23099),X=t.n(Q),ee=t(49069),en=t(45773),et=t(75268),er=t(17089),ei=t(36937),eo="cm-active-in-message-secret",ea=en.Lz.theme((0,o._)({},".".concat(eo),{display:"inline-block",color:ei.LU.foregroundDimmer,backgroundColor:ei.LU.orangeDimmer,"&::selection":{color:ei.LU.foregroundDefault}})),el=function(e){function n(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;return(0,$._)(this,n),(t=(0,K._)(this,n)).provider=e,t.dismissed=r,t.id=null!=i?i:"secret-".concat(n.counter++),t}(0,J._)(n,e);var t=n.prototype;return t.eq=function(e){return e instanceof n&&this.id===e.id},t.dismiss=function(){return new n(this.provider,!0,this.id)},n.range=function(e,n,t){return new this(e).range(n,t)},n}(ee.FB);el.counter=0,el.prototype.startSide=1,el.prototype.endSide=-1;var es=ee.Pe.define(),ec=ee.YH.define(),eu=ee.sU.define({create:function(){return ee.om.empty},update:function(e,n){var t=null;n.changes.empty||(e.size&&(e=(e=e.map(n.changes)).update({filter:function(e,n){return e!==n}})),n.changes.iterChangedRanges(function(e,r,i,o){var a=n.startState.doc.lineAt(e).from,l=n.startState.doc.lineAt(r).to,s=n.state.doc.lineAt(i).from,c=n.state.doc.lineAt(o).to,u=function(e,n,t,r,i,o){function a(e){return" "===e||"	"===e||"\n"===e||"\r"===e}function l(e){return 0===e.length||0===e.trim().length}var s=e.slice(t,r),c=n.slice(i,o);if(l(s)&&l(c))return null;for(var u=i;u>0&&!a(n[u-1]);)u--;for(var d=o;d<n.length&&!a(n[d]);)d++;if(i===o&&t<r){if(t>0&&!a(e[t-1])){var p=!l(s),f=r<e.length&&!a(e[r]);if(p||!f)return{fromB:u,toB:d}}if(r<e.length&&!a(e[r])){var h=!l(s),m=t>0&&!a(e[t-1]);if(h||!m)return{fromB:u,toB:d}}if(l(s))return null}for(;u<d&&a(n[u]);)u++;for(;d>u&&a(n[d-1]);)d--;return u>=d?null:{fromB:u,toB:d}}(n.startState.sliceDoc(a,l),n.state.sliceDoc(s,c),e-a,r-a,i-s,o-s);u&&(null!=t||(t=[]),t.push({from:u.fromB+s,to:u.toB+s}))}));var r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)if(a.value.is(es)){for(var s=new ee.vB,c=e.iter();c.value;)s.add(c.from,c.to,c.value.dismiss()),c.next();e=s.finish();continue}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}if(t){var u=!0,d=!1,p=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0)!function(){var t=f.value;e=e.update({filter:function(e,n){return e<t.from||n>t.to}});var r=(0,et.V)(n.state.sliceDoc(t.from,t.to));if(r){var i=r.map(function(e){return el.range(e.provider,t.from+e.start,t.from+e.end)});e=e.update({add:i,sort:!0})}}()}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}return e}}),ed=ee.sU.define({create:function(){return[]},compare:function(e,n){return X()(e,n)},update:function(e,n){if(!(0,q.$H)(n,eu))return e;for(var t=[],r=n.state.field(eu).iter();r.value;)r.value.dismissed||t.push({id:r.value.id,provider:r.value.provider,key:n.state.sliceDoc(r.from,r.to)}),r.next();return t}}),ep=ee.sU.define({create:function(){return!1},update:function(e,n){return(0,q.$H)(n,ed)?n.state.field(ed).length>0:e}}),ef=en.NZ.mark({class:eo,inclusiveStart:!0,inclusiveEnd:!0}),eh=ee.sU.define({create:function(){return en.NZ.none},update:function(e,n){if(!(0,q.$H)(n,eu))return e;for(var t=new ee.vB,r=n.state.field(eu).iter();r.value;)r.value.dismissed||t.add(r.from,r.to,ef),r.next();return t.finish()},provide:function(e){return en.Lz.decorations.from(e)}}),em=en.Lz.updateListener.of(function(e){if((0,q.$H)(e,eu)){var n=null!=(a=e.startState.field(ed,!1))?a:[],t=e.state.field(ed).filter(function(e){return!n.some(function(n){return n.id===e.id})});t.length&&(0,er.u4)(er.AZ.IN_MESSAGE_SCANNER_USED,{action:"secrets_detected",providers:t.map(function(e){return e.provider})});var r=!0,i=!1,o=void 0;try{for(var a,l,s=e.transactions[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value,u=!0,d=!1,p=void 0;try{for(var f,h=c.effects[Symbol.iterator]();!(u=(f=h.next()).done);u=!0)if(f.value.is(es)){var m=c.startState.field(eu,!1);if(m){for(var g=new Set,v=m.iter();v.value;)v.value.dismissed||g.add(v.value.provider),v.next();g.size&&(0,er.u4)(er.AZ.IN_MESSAGE_SCANNER_USED,{action:"secrets_dismissed",providers:Array.from(g)})}}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}var y=c.annotation(ec);y&&(0,er.u4)(er.AZ.IN_MESSAGE_SCANNER_USED,{action:"secrets_replaced",providers:y.providers})}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}}),eg=[eu,ea,ee.Nb.highest(eh),ed,ep,em],ev=t(54001),ey=t(93188),ew=(0,u.createContext)(null);function eb(e){var n=e.children,t=(0,R._P)({type:"boolean",controlName:"flag-scan-in-message-secrets"}),r=(0,u.useMemo)(function(){return{secrets:new ey.N([]),replaceListeners:new ey.do,dismissListeners:new ey.do}},[]);return t?(0,c.Y)(ew.Provider,{value:r,children:n}):(0,c.Y)(c.FK,{children:n})}function eS(){var e=(0,u.useContext)(ew);return{inMessageSecrets:(0,m.J2)(null==e?void 0:e.secrets,[]),replaceInMessageSecrets:(0,u.useCallback)(function(n){null==e||e.replaceListeners.notify(n)},[e]),dismissInMessageSecrets:(0,u.useCallback)(function(){null==e||e.dismissListeners.notify()},[e])}}var eY=t(47803),e_=t(33778);function eA(e){var n=(0,h.NC)();return(0,m.Rj)(function(){return e?n.sessions.agent.all.latest.select(function(n){return(null==n?void 0:n.id)!==e}):null},[n,e],{default:!1})}var eC=t(17459),ek=t(86105),ex=t(7868);function eD(e){return(0,u.useCallback)(function(n){return null==e?void 0:e.appendEvent({kind:"agentPlan",planId:n.planId,objective:{description:n.objective},approved:!0,requiresApproval:!1,step:n.step,stackBlueprint:n.stackBlueprint,approvedDesignReferenceFilePath:n.approvedDesignReferenceFilePath})},[e])}var eE=t(77437),eR=t(18069),eI=t(93629),eT=t(91326),eF=t(11769),eP=t(41358),eL=t(4616),eU=t(64347),eN=t(85389),eO=t(67963),eM=t(63456),eH=t(91506),eB=t(12921),ez=t.n(eB),eW=(0,u.memo)(function(e){var n=(0,h.NC)(),t=e.event,r=e.onSessionChange,o=t.status!==E.TB3.REVERT_DATA_STAGE_COMPLETE;return(0,c.FD)(eN.S,{children:[(0,c.FD)(eP.ui,{clsx:ez().root,"data-event-id":t.eventId,row:!0,gap:8,children:[o?(0,c.Y)(eM.A,{clsx:ez().revertIcon}):(0,c.Y)(eH.A,{clsx:ez().revertIcon}),(0,c.FD)(eN.S,{gap:6,clsx:ez().flexShrink,children:[(0,c.Y)(eN.S,{gap:4,children:(0,c.Y)(eL.EY,{multiline:!0,variant:"text",color:"dimmer",clsx:ez().flexShrink,children:function(e){switch(e.status){case E.TB3.REVERT_DATA_STAGE_UNKNOWN:return"Starting rollback...";case E.TB3.REVERT_DATA_STAGE_LOADING_PREVIOUS_STATE:return"Loading previous checkpoint state...";case E.TB3.REVERT_DATA_STAGE_SHUTTING_DOWN_WORKFLOWS:return"Shutting down workflows...";case E.TB3.REVERT_DATA_STAGE_REVERTING_COMMIT:return"Reverting files to previous checkpoint...";case E.TB3.REVERT_DATA_STAGE_RESTARTING_WORKFLOWS:return"Restarting workflows";case E.TB3.REVERT_DATA_STAGE_ROLLING_BACK_DATABASE:return"Rolling back database...";case E.TB3.REVERT_DATA_STAGE_ROLLING_BACK_DEPLOYMENT:return"Rolling back deployment...";case E.TB3.REVERT_DATA_STAGE_COMPLETE:return"Rolled back to '".concat(e.checkpointTitle,"'");default:(0,eT.A)(e.status)}}(t)})}),(0,c.FD)(eN.S,{gap:12,row:!0,clsx:ez().subtext,children:[(0,c.FD)(eN.S,{row:!0,gap:4,children:[(0,c.Y)(eL.EY,{multiline:!1,variant:"small",children:o?"Started":"Finished"}),(0,c.Y)(eU.Dc,{textVariant:"small",live:!0,date:t.revertedAt})]}),(0,c.Y)(eF.$n,{size:"small",onClick:(0,i._)(function(){return(0,s.YH)(this,function(e){switch(e.label){case 0:return[4,n.sessions.get(t.originalSessionId).once()];case 1:return r(e.sent()),[2]}})}),variant:"underlined",text:"View original chat",iconLeft:(0,c.Y)(eO.A,{})})]})]})]}),(0,c.FD)(eN.S,{clsx:ez().dividerContainer,children:[(0,c.Y)(eN.S,{clsx:ez().dividerLine}),(0,c.Y)(eL.EY,{clsx:ez().dividerText,color:"dimmest",children:"New chat"})]})]})}),eG=t(52351);function eV(e){return(0,c.FD)(eG.Ay,(0,eI._)((0,a._)({},e),{children:[(0,c.Y)("path",{d:"M21.25 12a9.25 9.25 0 1 0-18.5 0 9.25 9.25 0 0 0 18.5 0Zm1.5 0c0 5.937-4.813 10.75-10.75 10.75S1.25 17.937 1.25 12 6.063 1.25 12 1.25 22.75 6.063 22.75 12Z"}),(0,c.Y)("path",{d:"M15.495 8.945a.75.75 0 0 1 1.01 1.11l-5.5 5a.751.751 0 0 1-1.01 0l-2.5-2.273a.75.75 0 0 1 1.01-1.11l1.995 1.813 4.995-4.54Z"})]}))}var eZ=t(75813),ej=t(81801),eq=t(53376),eK=t(70433),e$=t.n(eK),eJ=(0,u.memo)(function(e){var n=e.importSource,t=e.state,r=function(e){switch(e){case E.aJd.PROJECT_IMPORT_SOURCE_LOVABLE:return{name:"Lovable",icon:null};case E.aJd.PROJECT_IMPORT_SOURCE_BOLT:return{name:"Bolt",icon:null};case E.aJd.PROJECT_IMPORT_SOURCE_REPLIT:return{name:"Replit",icon:(0,c.Y)(eq.A,{clsx:e$().appIcon})};case E.aJd.PROJECT_IMPORT_SOURCE_OTHER_GITHUB:return{name:"GitHub",icon:(0,c.Y)(ej.A,{clsx:e$().appIcon})};case E.aJd.PROJECT_IMPORT_SOURCE_FIGMA:return{name:"Figma",icon:(0,c.Y)(eZ.A,{})};case E.aJd.PROJECT_IMPORT_SOURCE_UNKNOWN:default:return{name:"",icon:null}}}(n),i=r.name,o=r.icon,a=t===E.qOk.COMPLETE,l=t===E.qOk.IN_PROGRESS,s=(0,c.Y)(eV,{clsx:e$().statusIcon});return l&&(s=(0,c.Y)(eM.A,{})),(0,c.FD)(eP.ui,{elevated:!0,clsx:e$().root,row:!0,justify:"space-between",align:"center",children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:12,children:[s,(0,c.Y)(eL.EY,{color:"dimmer",children:a?"Successfully imported ".concat(""!==i?"from ".concat(i):"project"):"Setting up your project".concat(""!==i?" from ".concat(i):"","…")})]}),(0,c.Y)(eN.S,{children:o})]})}),eQ=t(83244),eX=t(36976),e0=t(27915),e1=t(82112),e2={screenshotUrl:"Replit-Commit-Screenshot-Url",sessionId:"Replit-Commit-Session-Id",commitAuthor:"Replit-Commit-Author",deploymentBuildId:"Replit-Commit-Deployment-Build-Id",restoredToHash:"Replit-Restored-To"};function e4(e,n){var t=new Map,r=!0,i=!1,o=void 0;try{for(var l,s=n[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;t.set(c.id,{session:c,commitRanges:[]})}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var u=!0,d=!1,p=void 0;try{for(var f,h=e[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,g=!0,v=!1,y=void 0;try{for(var w,b=m.commitRange[Symbol.iterator]();!(g=(w=b.next()).done);g=!0)!function(){var e,r=w.value,i=null!=(e=r.sessionId)?e:"unknown",o=t.get(i);o||(o={session:n.find(function(e){return e.id===i}),commitRanges:[]},t.set(i,o));var l=o.commitRanges[o.commitRanges.length-1];(void 0===l||l.collapsed!==m.collapsed)&&(l=(0,eI._)((0,a._)({},m),{commitRange:[]}),o.commitRanges.push(l)),l.commitRange.push(r)}()}catch(e){v=!0,y=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw y}}}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return Array.from(t.values()).sort(function(e,n){return e.session?n.session?e.session.created.getTime()-n.session.created.getTime():1:-1})}var e5=(0,u.createContext)(null);function e3(e){var n,t=e.children,r=(0,m.HJ)(null),o=(0,u.useRef)(null),l=(0,m.HJ)(!1),d=(0,e1.I)(function(e){return(0,i._)(function(){var n,t,r,i,o,a,l,c,u,d,p,f,h,m;return(0,s.YH)(this,function(s){switch(s.label){case 0:n=500,t=0,r=[],s.label=1;case 1:return[4,e.git.log.rpc({max:n,skip:t})];case 2:if(!(o=s.sent()).ok){if("UNEXPECTED_DISCONNECT"===o.payload.code)return[3,3];if(o.payload.code===eX.uA.NOT_INITIALIZED)return[2,(0,e0._)({type:"notInitialized"})];return[2,(0,e0._)({type:"error",error:"".concat(o.payload.code,": ").concat(o.payload.message)})]}if((i=r).push.apply(i,(0,ek._)(o.payload.commits)),o.payload.commits.length<n)return[3,3];return t+=n,[3,1];case 3:a=[],l=new Set,c=!0,u=!1,d=void 0;try{for(p=r[Symbol.iterator]();!(c=(f=p.next()).done);c=!0)if(h=f.value,m=function(e){var n,t=e.trailers[e2.commitAuthor];return(void 0===t||"User"===t||"Agent"===t||"Deployment"===t)&&(e.trailers[e2.restoredToHash]||void 0!==t)?{hash:e.hash,committer:e.committer,subject:e.subject,customSubject:null==(n=e.notes)?void 0:n.split("\n")[0],body:e.body,screenshotUrl:e.trailers[e2.screenshotUrl],sessionId:e.trailers[e2.sessionId],restoredToHash:e.trailers[e2.restoredToHash],deploymentBuildId:e.trailers[e2.deploymentBuildId],authoredBy:t}:null}(h)){if(l.has(m.hash))continue;l.add(m.hash),a.push(m)}}catch(e){u=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}return[2,(0,e0.Ok)(a)]}})})},[]),p=(0,h.NC)(),f=(0,m.J2)(p.sessions.agent.all.list),v=(0,u.useMemo)(function(){return d?(0,i._)(function(){var e,n;return(0,s.YH)(this,function(t){switch(t.label){case 0:if(!f)return[2];return l.set(!0),[4,d()];case 1:return o.current=e=t.sent(),e.ok?(n=e4((function(e){for(var n=[],t=null,r=null,i=0;i<e.length;i++){var o=e[i],a=void 0!==o.restoredToHash;!a||(null==t?void 0:t.collapsed)||(r=o),t?t.collapsed&&r&&r.restoredToHash===o.hash?(n.push(t),t={collapsed:!1,commitRange:[]}):!t.collapsed&&a&&(n.push(t),t={collapsed:!0,commitRange:[]}):t={collapsed:a,commitRange:[]},a||t.commitRange.push(o)}return t&&n.push(t),n})(e.value).reverse().map(function(e){return(0,eI._)((0,a._)({},e),{commitRange:e.commitRange.reverse()})}),f),r.set((0,e0.Ok)(n))):r.set("notInitialized"===e.error.type?(0,e0.Ok)(e4([],f)):(0,e0._)(e.error)),l.set(!1),[2]}})}):null},[d,f,r,l]),y=(n=(0,m.HJ)(null),(0,h.zv)("received-completed-event",function(e){var t=e.event,r=t.contents.contents;if((0,P.VF)(r,"agentTimelineEventContents")){var i=r.agentTimelineEventContents.toolData;switch(null==i?void 0:i.$kind){case"commitData":case"revertData":n.set(t.id)}}}),(0,u.useMemo)(function(){return new ey.jA(function(e){n.subscribe(function(n){null!==n&&e.next(n)})})},[n]));(0,m.q3)(y,{next:function(){return null==v?void 0:v()}}),(0,u.useEffect)(function(){v&&v()},[v]);var w=(0,g.A)(v),b=(0,e1.I)(function(e){var n;return n=(0,i._)(function(n,t){var r,i;return(0,s.YH)(this,function(o){switch(o.label){case 0:return[4,e.git.addNote.rpc({object:n,message:t,force:!0})];case 1:if(!(i=o.sent()).ok){if("UNEXPECTED_DISCONNECT"===i.payload.code)return[2];throw Error("failed to rename commit")}return[4,null==(r=w.current)?void 0:r.call(w)];case 2:return o.sent(),[2]}})}),function(e,t){return n.apply(this,arguments)}},[w]),S=(0,u.useCallback)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,a,l,s=(null!=(a=null==(i=o.current)?void 0:i.value)?a:[])[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=l.value;if(c.hash===e)return c}}catch(e){t=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(t)throw r}}return null},[]),Y=(0,u.useMemo)(function(){return{checkpoints:ey.cP.from(r),loading:ey.cP.from(l),checkpointMade:y,renameCommit:b,findCommit:S}},[r,l,y,b,S]);return(0,c.Y)(e5.Provider,{value:Y,children:t})}function e7(){var e=(0,u.useContext)(e5);if(!e)throw Error("useCheckpoints must be used within a CheckpointProvider");return e}var e6=t(60611),e8=t(66890),e9=t(86215),ne=t(90629),nn=t(35992),nt=t(94827),nr=t(32978),ni=t(53301),no=t(18509),na=t(15311),nl=t(27023),ns=t(30010),nc=t(83070),nu=t(57331),nd=t(45894),np=(0,na.v)(["borderRadius"]),nf=np.cssVars,nh=np.styleTokens,nm=(0,no.x)({root:[nl.wp.border({color:ei.LU.outlineDimmest}),nl.wp.overflow("hidden"),{borderWidth:"1px",borderRadius:nh.borderRadius}],header:[{backgroundColor:ni.s}],left:[nl.wp.mr(4)],middleText:[nl.wp.width("100%"),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],divider:[{backgroundColor:ei.LU.outlineDimmer,height:16,marginLeft:4}]});function ng(e){var n=e.icon,t=e.title,r=e.right,i=e.elevated,a=void 0===i||i,s=e.onOpenPane,d=e.openPaneButtonAlt,p=e.children,f=e.renderChildrenOnlyWhenInView,h=void 0!==f&&f,m=e.showOpenPaneButton,g=(0,w.m5)(),v=(0,u.useRef)(null),y=(0,nr.W)(v,{amount:0}),b=(0,u.useMemo)(function(){return!h||y},[y,h]),S=(0,l._)((0,u.useState)(0),2),Y=S[0],_=S[1],A=(0,I.A)(function(e){h&&(!h||y)&&e.height>Y&&_(e.height)},{type:"debounce",wait:500});return(0,c.FD)(eN.S,{css:nm.root,style:(0,o._)({},nf.borderRadius,g?"8px":"4px"),innerRef:v,children:[(0,c.FD)(eN.S,{css:nm.header,py:4,px:6,row:!0,gap:4,align:"center",justify:"space-between",style:{backgroundColor:a?ni.s:void 0},children:[(0,c.Y)(eN.S,{css:nm.left,align:"center",children:(0,u.cloneElement)(n,{size:16})}),(0,c.Y)(eN.S,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:(0,c.Y)(eL.EY,{css:nm.middleText,children:t})}),(0,c.FD)(eN.S,{align:"center",row:!0,gap:2,children:[r,s&&(void 0===m||m)?(0,c.FD)(c.FK,{children:[r?(0,c.Y)(ns.a,{css:nm.divider}):null,(0,c.Y)(nc.K0,{alt:void 0===d?"Open Pane":d,onClick:s,children:(0,c.Y)(nd.A,{})})]}):null]})]}),(0,c.Y)(eP.ui,{innerRef:A,style:{minHeight:Y},elevated:a,children:b?p:null})]})}var nv=(0,no.x)({content:[(0,o._)({},nl.$_.max("mobileMax"),[nl.wp.maxHeight("calc(".concat(nu.R.height," - 60px)")),nl.wp.overflowY("auto"),{"&::-webkit-scrollbar":{display:"none"}}])],packagesWrapper:[{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:ei.LU.space8}],package:[nl.wp.borderRadius(4),nl.wp.px(8),nl.wp.py(4),nl.wp.width("calc(50% - ".concat(ei.LU.space4,")"))]});function ny(e){var n=e.text,t=e.packageList,r=e.getPackageIcon,i=e.children,o=(0,eC._)(e,["text","packageList","getPackageIcon","children"]);return(0,c.FD)(ng,(0,eI._)((0,a._)({renderChildrenOnlyWhenInView:!0},o),{children:[t.length?(0,c.Y)(eN.S,{css:nv.content,p:8,children:(0,c.FD)(eN.S,{gap:8,children:[(0,c.Y)(eL.EY,{color:"dimmest",children:n}),(0,c.Y)(eN.S,{css:nv.packagesWrapper,children:t.map(function(e,n){return(0,c.Y)(eP.ui,{css:nv.package,row:!0,gap:8,align:"center",justify:"space-between",elevated:!0,children:(0,c.FD)(eN.S,{row:!0,gap:4,align:"center",children:[r(e),(0,c.Y)(eL.EY,{children:e})]})},n)})})]})}):null,i]}))}var nw=t(39685),nb=t(84643),nS=t(52749),nY=t(85144),n_=t(24140),nA=t(53307),nC=t(69554),nk=(0,no.x)({secretName:[nl.wp.fontWeight.medium],secretValueCellHeader:[nl.wp.gap(4),nl.wp.color.foregroundDimmer],tableRow:[nl.wp.flex.column,nl.wp.gap(8)],secretsRow:[nl.wp.gap(8)],checkboxCell:[{flexGrow:0,flexShrink:0,width:ei.LU.space24}],secretValueCell:[nl.wp.flex.column,nl.wp.gap(4),{width:"30%"}],confirmationMessage:[nl.wp.color.accentPositiveStronger,nl.wp.flex.row,nl.wp.align.center,nl.wp.gap(4)]});function nx(e){var n=e.value,t=e.label,r=(0,l._)((0,u.useState)(!1),2),i=r[0],o=r[1],a=(0,u.useCallback)(function(){o(function(e){return!e})},[]);return(0,c.FD)(eN.S,{css:nk.secretValueCell,children:[(0,c.FD)(eN.S,{css:nk.secretValueCellHeader,row:!0,align:"center",children:[(0,c.Y)("span",{children:t}),(0,c.Y)(nc.K0,{alt:"Toggle Visibility",onClick:a,children:i?(0,c.Y)(nA.A,{}):(0,c.Y)(nC.A,{})})]}),(0,c.Y)(eL.EY,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i?n:"••••••••"})]})}function nD(e){var n=e.existingSecrets,t=e.accountSecrets,r=e.onContinue,o=e.step,a=e.linkedSecrets,d=e.onSecretsUpdated,p=e.replaceAllExternalSecrets,f=e.removeEntries,h=(0,v.A)(),m=(0,l._)((0,nb.nB)(),1)[0],g=(0,y.A)(),w=(0,l._)((0,e9.WM)(g,p),1)[0],b=(0,l._)((0,e9.Nz)(g,p),1)[0],S=(0,l._)((0,u.useState)(n),2),Y=S[0],_=S[1],A=(0,l._)((0,u.useState)(!0),2),C=A[0],k=A[1],x=(0,l._)((0,u.useState)(!1),2),D=x[0],E=x[1],R="done"===o,I=(0,l._)((0,u.useState)(new Set),2),T=I[0],F=I[1],P=(0,l._)((0,u.useState)(!1),2),L=P[0],U=P[1];(0,u.useEffect)(function(){_(n),1===n.length&&F(new Set([n[0].key]))},[n]);var N=(0,u.useCallback)(function(e){F(function(n){var t=new Set(n);return t.has(e)?t.delete(e):t.add(e),t})},[]),O=(0,u.useMemo)(function(){return new Map(t.map(function(e){return[e.name,e]}))},[t]),M=(0,u.useCallback)(function(){k(!1),r()},[r]),H=(0,u.useCallback)((0,i._)(function(){var e,n,t,i,o,l,c,u,p,v;return(0,s.YH)(this,function(s){switch(s.label){case 0:if(0===T.size)return M(),[2];U(!0),s.label=1;case 1:if(s.trys.push([1,8,,9]),l=Y.filter(function(e){return T.has(e.key)}),!((u=((null==a||null==(e=a.getRepl)?void 0:e.__typename)==="Repl"&&null!=(c=a.getRepl.sharedSecretLinks)?c:[]).filter(function(e){return l.some(function(n){return n.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,3];return[4,b({variables:{input:{resourceId:g,resourceType:e8.U97.Repl,ids:u}}})];case 2:s.sent(),s.label=3;case 3:return[4,f.apply(void 0,(0,ek._)(l.map(function(e){return e.key})))];case 4:return s.sent(),[4,m({variables:{input:{ownerType:e8.n0s.Account,secrets:l.map(function(e){var n,t;return{id:null!=(t=null==(n=O.get(e.key))?void 0:n.id)?t:"",name:e.key,value:e.value}})}}})];case 5:if(p=s.sent(),(0,er.u4)(er.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"update",source:"agent"}),!((null==(n=p.data)?void 0:n.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null==(i=p.data)||null==(t=i.updateSharedSecrets)?void 0:t.updatedSecrets)))return[3,7];return[4,w({variables:{input:{resourceId:g,resourceType:e8.U97.Repl,secrets:p.data.updateSharedSecrets.updatedSecrets.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 6:s.sent(),(0,er.u4)(er.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:p.data.updateSharedSecrets.updatedSecrets.length}),s.label=7;case 7:return k(!1),U(!1),E(!0),r(),(null==(o=p.data)?void 0:o.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null==d||d(l.map(function(e){return{key:e.key,selectedKey:e.key}}))),[3,9];case 8:return v=s.sent(),ne.Cp(v),h.showError("Something went wrong. Please try again."),U(!1),[3,9];case 9:return[2]}})}),[m,b,Y,T,r,M,O,h,w,g,a,d,f]),B=Y.length,z=(0,ex.A)("Secret",B),W=1===B?"it":"them",G=T.size,V=(0,ex.A)("Secret",G),Z=(0,u.useMemo)(function(){return 1===Y.length?Y[0]:null},[Y]);return 0===B||"savingExistingSecrets"!==o&&"done"!==o?null:Z?(0,c.FD)(c.FK,{children:[(0,c.FD)(eL.EY,{children:['A Secret named "',Z.key,'" already exists in your Account Secrets. Would you like to replace it with the new value?']}),(0,c.FD)(eN.S,{row:!0,gap:4,children:[(0,c.Y)(eF.$n,{text:"Replace Account Secret",onClick:H,loading:L,disabled:R}),(0,c.Y)(eF.$n,{text:"Not now",variant:"outlined",onClick:M,loading:L,disabled:R})]}),R&&D&&(0,c.FD)(eN.S,{css:nk.confirmationMessage,children:[(0,c.Y)(n_.A,{size:16}),"Secret updated and linked"]})]}):(0,c.Y)(nY.a,{isOpen:C,onRequestClose:M,children:(0,c.FD)(eN.S,{gap:16,children:[(0,c.FD)(eL.Y9,{level:3,variant:"subheadDefault",children:[B," matching ",z," already exist",1===B?"s":""," in your account.",(0,c.Y)("br",{}),"Would you like to replace ",W,"?"]}),(0,c.Y)(eN.S,{gap:8,children:Y.map(function(e){var n=t.find(function(n){return n.name===e.key});return(0,c.FD)(eN.S,{css:nk.tableRow,p:6,children:[(0,c.Y)(eN.S,{row:!0,align:"center",children:(0,c.Y)(eL.EY,{css:nk.secretName,children:e.key})}),(0,c.FD)(eN.S,{css:nk.secretsRow,row:!0,align:"center",children:[(0,c.Y)(eN.S,{css:nk.checkboxCell,children:(0,c.Y)(nS.S,{checked:T.has(e.key),onChange:function(){return N(e.key)}})}),(0,c.Y)(nx,{label:"Existing",value:(null==n?void 0:n.value)||""}),(0,c.Y)(nx,{label:"New",value:e.value})]})]},e.key)})}),(0,c.FD)(eN.S,{row:!0,gap:4,children:[(0,c.Y)(eF.$n,{text:"Cancel",onClick:M,disabled:L}),(0,c.Y)(eF.$n,{colorway:"primary",text:"Replace ".concat(G," ").concat(V),onClick:H,loading:L})]})]})})}var nE=t(6064),nR=(0,no.x)({confirmationMessage:[nl.wp.color.accentPositiveStronger,nl.wp.flex.row,nl.wp.align.center,nl.wp.gap(4)]});function nI(e){var n=e.newSecrets,t=e.step,r=e.onContinue,o=e.linkSecrets,a=e.unlinkSecrets,d=e.linkedSecrets,p=e.onSecretsUpdated,f=e.removeEntries,h=(0,v.A)(),m=(0,l._)((0,u.useState)(!1),2),g=m[0],y=m[1],w=(0,l._)((0,nb.w7)(),1)[0],b=(0,l._)((0,u.useState)(!1),2),S=b[0],Y=b[1],_=(0,u.useCallback)((0,i._)(function(){var e,t,i,l,c,u,m;return(0,s.YH)(this,function(s){switch(s.label){case 0:y(!0),s.label=1;case 1:return s.trys.push([1,8,,9]),[4,w({variables:{input:{ownerType:e8.n0s.Account,secrets:n.map(function(e){return{name:e.key,value:e.value}})}}})];case 2:if(!((null==(e=(t=s.sent()).data)?void 0:e.createSharedSecrets)&&"createdSecrets"in t.data.createSharedSecrets&&"CreateSharedSecretsResult"===t.data.createSharedSecrets.__typename&&t.data.createSharedSecrets.createdSecrets))return[3,7];return l=t.data.createSharedSecrets.createdSecrets,[4,f.apply(void 0,(0,ek._)(n.map(function(e){return e.key})))];case 3:if(s.sent(),!((u=((null==d||null==(i=d.getRepl)?void 0:i.__typename)==="Repl"&&null!=(c=d.getRepl.sharedSecretLinks)?c:[]).filter(function(e){return n.some(function(n){return n.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,5];return[4,a(u)];case 4:s.sent(),s.label=5;case 5:return[4,o(l.map(function(e){return{secretId:e.id,alias:e.name}}))];case 6:s.sent(),null==p||p(l.map(function(e){return{key:e.name,selectedKey:e.name}})),(0,er.u4)(er.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:l.length}),s.label=7;case 7:return(0,er.u4)(er.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"create",source:"agent"}),Y(!0),r(),[3,9];case 8:return m=s.sent(),ne.Cp(m),h.showError("Something went wrong."),[3,9];case 9:return y(!1),[2]}})}),[n,r,w,h,o,a,d,p,f]);return 0===n.length?null:(0,c.FD)(c.FK,{children:[(0,c.FD)(eL.EY,{children:["Would you like to save"," ",1===n.length?"this Secret":"these Secrets"," to your Account Secrets so you can easily access"," ",1===n.length?"it":"them"," in other Apps?"]}),n.length>1&&(0,c.Y)(eL.EY,{color:"dimmest",children:n.map(function(e){return e.key}).join(", ")}),(0,c.FD)(eN.S,{row:!0,gap:4,children:[(0,c.Y)(eF.$n,{text:"Add to Account Secrets",onClick:_,iconLeft:(0,c.Y)(nE.A,{}),loading:g,disabled:"savingNewSecrets"!==t||S}),(0,c.Y)(eF.$n,{text:"Not now",variant:"outlined",onClick:r,disabled:"savingNewSecrets"!==t||S,loading:g})]}),S&&(0,c.FD)(eN.S,{css:nR.confirmationMessage,children:[(0,c.Y)(n_.A,{size:16}),(0,ex.A)("Secret",n.length)," saved to account"]})]})}var nT=t(49748),nF=t(67611),nP=t(30445),nL=t(57466),nU=t.n(nL);function nN(e){var n,t=e.watch,r=(0,l._)((0,u.useState)(new Map),2),i=r[0],o=r[1];return(0,u.useEffect)(function(){return t(o)},[t]),(0,c.Y)(eN.S,{clsx:nU().root,gap:4,children:(0,c.FD)(eN.S,{gap:4,children:[(0,c.Y)(eN.S,{row:!0,align:"center",gap:6,justify:"space-between",children:(0,c.FD)(eN.S,{row:!0,align:"center",gap:6,children:[(0,c.Y)(nF.A,{color:ei.LU.foregroundDimmer}),(0,c.FD)(eL.EY,{color:"dimmer",children:[(0,ex.A)("secrets",null==(n=e.keys)?void 0:n.length,!0)," requested"]}),(0,c.Y)(eL.EY,{variant:"small",multiline:!1,color:"dimmest",children:"•"}),(0,c.Y)(eF.$n,{clsx:nU().seeAllButton,variant:"underlinedOnHover",text:"See all secrets",onClick:e.openSecerets})]})}),(0,c.Y)(eN.S,{clsx:nU().requestedSecretsList,gap:6,row:!0,children:e.keys.map(function(e){return(0,c.FD)(eN.S,{align:"center",row:!0,gap:4,clsx:nU().requestedSecretsListItem,p:4,children:[(null==i?void 0:i.get(e))?(0,c.Y)(nT.A,{color:ei.LU.foregroundDimmer,size:12}):(0,c.Y)(nP.A,{color:ei.LU.foregroundDimmest,size:12}),(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",children:e})]},e)})})]})})}function nO(e){return(0,c.FD)(eG.Ay,(0,eI._)((0,a._)({viewBox:"0 0 16 16"},e),{children:[(0,c.Y)("path",{fillRule:"evenodd",d:"M6.95 2a2.85 2.85 0 1 0 0 5.7 2.85 2.85 0 0 0 0-5.7M5 4.85a1.95 1.95 0 1 1 3.9 0 1.95 1.95 0 0 1-3.9 0",clipRule:"evenodd"}),(0,c.Y)("path",{d:"M4.55 9.2a2.85 2.85 0 0 0-2.85 2.85v1.2a.45.45 0 0 0 .9 0v-1.2a1.95 1.95 0 0 1 1.95-1.95h3.902a1.62 1.62 0 0 1 .322-.9z"}),(0,c.Y)("path",{fillRule:"evenodd",d:"M11.783 7.05c-.384 0-.748.136-1.012.371a1.15 1.15 0 0 0-.404.86v.936H13.2v-.935c0-.317-.141-.627-.404-.86a1.53 1.53 0 0 0-1.013-.372M13.7 9.225v-.943c0-.47-.21-.913-.572-1.235a2.03 2.03 0 0 0-1.345-.497c-.5 0-.983.176-1.344.497a1.65 1.65 0 0 0-.572 1.235v.943a.73.73 0 0 0-.469.31 1.14 1.14 0 0 0-.198.66v2.545c0 .246.07.48.198.66a.7.7 0 0 0 .57.317h3.63c.245 0 .443-.14.57-.318.128-.179.199-.412.199-.66v-2.545c0-.247-.071-.48-.199-.66a.73.73 0 0 0-.468-.309m-3.732.492c-.04 0-.102.023-.163.108a.64.64 0 0 0-.105.37v2.545c0 .155.045.284.105.369.061.085.122.108.163.108h3.63c.041 0 .102-.023.163-.108a.64.64 0 0 0 .106-.37v-2.545a.64.64 0 0 0-.106-.369c-.06-.085-.122-.108-.163-.108z",clipRule:"evenodd"}),(0,c.Y)("path",{fillRule:"evenodd",d:"M10.356 6.954c.385-.343.9-.529 1.427-.529.528 0 1.043.186 1.428.529.387.344.614.82.614 1.328v.845c.19.06.34.189.445.335.144.202.222.462.222.732v2.546c0 .27-.078.53-.222.732-.143.2-.376.37-.672.37h-3.63c-.296 0-.528-.17-.672-.37a1.27 1.27 0 0 1-.221-.732v-2.546c0-.27.077-.53.221-.732a.88.88 0 0 1 .446-.335v-.845c0-.508.227-.984.614-1.328m1.427-.279c-.47 0-.925.166-1.261.466-.338.3-.53.71-.53 1.14v.944a.125.125 0 0 1-.105.124.6.6 0 0 0-.387.258c-.11.156-.175.363-.175.587v2.546c0 .223.064.431.175.586.11.156.275.266.468.266h3.63c.194 0 .358-.11.468-.266.111-.155.176-.363.176-.586v-2.546c0-.224-.065-.431-.176-.587a.6.6 0 0 0-.386-.258.125.125 0 0 1-.105-.124v-.943c0-.431-.193-.841-.53-1.141s-.791-.466-1.262-.466m0 .5c-.356 0-.69.126-.93.34a1.03 1.03 0 0 0-.361.767v.81h2.583v-.81c0-.279-.124-.556-.362-.768a1.4 1.4 0 0 0-.93-.339m-1.095.153a1.65 1.65 0 0 1 1.095-.403c.414 0 .808.146 1.096.403.288.255.446.6.446.954v.935a.125.125 0 0 1-.125.125h-2.833a.125.125 0 0 1-.125-.125v-.935c0-.355.158-.699.446-.954m-.719 2.514c-.004 0-.028.008-.062.056a.5.5 0 0 0-.082.296v2.546a.5.5 0 0 0 .082.296c.034.048.058.055.062.056h3.628c.005 0 .028-.008.062-.056a.5.5 0 0 0 .083-.296v-2.546a.5.5 0 0 0-.083-.296c-.034-.048-.057-.055-.062-.056zm-.265-.09c.078-.109.173-.16.264-.16h3.63c.091 0 .187.051.265.16a.77.77 0 0 1 .129.442v2.546a.77.77 0 0 1-.129.441c-.078.11-.174.161-.265.161h-3.63c-.09 0-.186-.051-.264-.16a.77.77 0 0 1-.13-.442v-2.546c0-.178.053-.333.13-.441",clipRule:"evenodd"})]}))}var nM=t(62592),nH=t(24928),nB=(0,no.x)({root:[nl.wp.flex.row,nl.wp.justify.spaceBetween,nl.wp.align.center],metadata:[nl.wp.flex.column,nl.wp.gap(8),nl.wp.width("100%")],label:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},value:{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},comboBox:[{"& > * > *":{backgroundColor:"".concat(ei.LU.backgroundDefault," !important")}}]}),nz=(0,u.forwardRef)(function(e,n){var t=e.secretKey,r=e.secretValue,i=e.isSensitive,o=(0,eC._)(e,["secretKey","secretValue","isSensitive"]);return(0,c.Y)(nH.if,(0,eI._)((0,a._)({},o),{ref:n,textValue:t,css:nB.root,children:(0,c.FD)("div",{css:nB.metadata,children:[(0,c.Y)(eL.EY,{color:"dimmer",variant:"small",css:nB.label,children:t}),(0,c.Y)(eL.EY,{variant:"small",css:nB.value,"data-sensitive":i,children:i?"********":r})]})}))}),nW=(0,u.forwardRef)(function(e,n){var t=e.accountSecrets,r=e.onChange,i=e.onSelectionChange,o=e.value,a=e.isSensitive,l=e.readOnly,s=e.keyName,d=e.selectedKey,p=(0,u.useRef)(!1);return(0,c.Y)(nM.a,{ref:n,triggerIcon:(0,c.Y)(nO,{}),css:nB.comboBox,maxHeight:200,menuTrigger:"focus","aria-label":"".concat(s," Value"),isRequired:!0,isDisabled:l,allowsEmptyCollection:!1,selectedKey:d,onSelectionChange:function(e){if(e){p.current=!0;var n,o=t.find(function(n){return n.name===e});r(null!=(n=null==o?void 0:o.value)?n:""),i(e),setTimeout(function(){p.current=!1},50)}},onInputChange:function(e){p.current||(r(e),i(null))},inputValue:o,isInvalid:!1,allowsCustomValue:!0,formValue:"text",children:t.map(function(e){return(0,c.Y)(nz,{isSensitive:a,secretKey:e.name,secretValue:e.value,label:e.name,id:e.name},e.name)})})}),nG=t(42793),nV=t(27503),nZ=t(40259),nj=t(78626),nq=t(89905),nK=(0,nG.AH)({display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gridAutoFlow:"row",gap:ei.LU.space8,"> *":{height:"fit-content"}}),n$=(0,no.x)({root:[nK]}),nJ=(0,no.x)({actions:[nl.wp.gap(4),nl.wp.flex.wrap],secretHeader:[nK,nl.wp.mb(4),nl.wp.fontSize("small"),nl.wp.color.foregroundDimmer,{lineHeight:ei.LU.lineHeightSmall,"> div":[nl.wp.gap(4),{display:"flex",alignItems:"center",flexDirection:"row"}]}],secretValueRoot:[nl.wp.gap(8),{'&[data-sensitive="true"] input':{fontFamily:"text-security-disc"}}],secretValueInput:[nl.wp.flex.column,nl.wp.flex.growAndShrink(1)],primaryButton:[(0,nV.Li)("blurple"),{width:"fit-content","&[disabled]":[(0,nV.Li)("grey")]}],input:[{backgroundColor:ei.LU.backgroundDefault}],secretValueFooter:[nl.wp.p(4),{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}]}),nQ=(0,u.forwardRef)(function(e,n){var t=e.keyName,r=e.value,i=e.onChange,o=e.readOnly,a=e.accountSecrets,l=e.isSensitive,s=e.selectedKey,d=e.onSelectedKeyChange,p=(0,u.useMemo)(function(){return(0,ek._)(a).sort(function(e,n){return e.name===t?-1:+(n.name===t)})},[a,t]);return(0,c.FD)(eN.S,{css:n$.root,children:[(0,c.Y)(eN.S,{children:(0,c.Y)(nZ.pd,{value:t,disabled:!0,css:nJ.input})}),(0,c.Y)(eN.S,{css:nJ.secretValueRoot,row:!0,align:"start","data-sensitive":l,children:(0,c.FD)(eN.S,{css:nJ.secretValueInput,children:[(0,c.Y)(nW,{ref:n,accountSecrets:p,onChange:i,onSelectionChange:d,value:r,isSensitive:l,readOnly:o,keyName:t,selectedKey:s}),s?(0,c.FD)(eN.S,{row:!0,gap:4,align:"center",children:[(0,c.Y)(nj.m_,{tooltip:"Link Account Secret to this Repl",children:(0,c.Y)(nT.A,{color:ei.LU.accentPrimaryStronger})}),(0,c.FD)(eL.EY,{variant:"small",color:"dimmer",css:nJ.secretValueFooter,children:["Using ",s]})]}):null]})})]})});function nX(e){var n,t,r,o,d,p,f,h=e.keys,m=e.addEntries,g=e.removeEntries,y=e.onComplete,w=e.sessionId,b=e.waitingOnUser,S=e.replId,Y=e.linkSecrets,_=e.unlinkSecrets,A=e.replaceAllExternalSecrets,C=e.watch,k=e.openSecrets,x=(0,v.A)(),D=(0,l._)((0,u.useState)(!1),2),E=D[0],R=D[1],I=(0,l._)((0,u.useState)(!0),2),T=I[0],F=I[1],P=(0,nt.m1)({fetchPolicy:"cache-and-network",ssr:!1}).data,L=(0,u.useMemo)(function(){var e;return(null==P||null==(e=P.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"?P.currentUser.secrets.items:[]},[P]),U=(0,nt.bM)({variables:{replId:S}}).data,N=(0,l._)((0,u.useState)(h.map(function(e){return{key:e,value:""}})),2),O=N[0],M=N[1],H=(0,l._)((0,u.useState)(new Map),2),B=H[0],z=H[1];(0,u.useEffect)(function(){L&&O.every(function(e){return""===e.value})&&(M((0,nn.jM)(function(e){e.forEach(function(e){var n=L.find(function(n){return n.name===e.key});n&&(e.value=n.value)})})),z((0,nn.jM)(function(e){h.forEach(function(n){var t=L.find(function(e){return e.name===n});t&&e.set(n,t.name)})})))},[L,h,O]);var W=(0,l._)((0,u.useState)(b?"selecting":"done"),2),G=W[0],V=W[1],Z=(0,l._)((0,u.useState)([]),2),j=Z[0],q=Z[1],K=(0,l._)((0,u.useState)([]),2),$=K[0],J=K[1],Q=(0,l._)((0,u.useState)([]),2),X=(Q[0],Q[1]),ee=(0,u.useRef)(!1);(0,u.useEffect)(function(){!ee.current&&h&&((0,nw.p)({action:"secrets_requested",secretsRequested:h,sessionId:w}),ee.current=!0)},[h,w]);var en=(0,u.useMemo)(function(){return O.every(function(e){return!!e.value})},[O]),et=(0,u.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.nextNewSecrets,t=e.nextExistingEntries,r=e.nextMatchingEntries;n&&q(n),t&&J(t),r&&X(r);var i=null!=n?n:j,o=null!=t?t:$,a={selecting:function(){return i.length>0?"savingNewSecrets":o.length>0?"savingExistingSecrets":"done"},savingNewSecrets:function(){return o.length>0?"savingExistingSecrets":"done"},savingExistingSecrets:"done",done:"done"};G in a&&V("function"==typeof a[G]?a[G]():a[G])},[$,j,G]),ei=(t=(n=(0,l._)((0,u.useState)(G),2))[0],r=n[1],d=(o=(0,l._)((0,u.useState)(null),2))[0],p=o[1],G!==t&&(p(t),r(G)),d),eo=(0,u.useRef)("done"===G);(0,u.useEffect)(function(){"selecting"===G||eo.current||(B.size>0&&(0,er.u4)(er.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"copy",source:"agent",size:B.size}),eo.current=!0,y().catch(function(e){ne.Cp(e),x.showError("Something went wrong. Please try again."),eo.current=!1,ei&&V(ei)}))},[y,G,B,x,ei]);var ea=(f=(0,i._)(function(){var e,n,t,r,i,o,a,l,c;return(0,s.YH)(this,function(s){switch(s.label){case 0:R(!0),s.label=1;case 1:if(s.trys.push([1,8,,9]),e=new Map(L.map(function(e){return[e.name,e]})),t=(n=O.reduce(function(n,t){var r=e.get(t.key);return r?r.value===t.value?n.matchingEntries.push(t):n.existingEntries.push(t):n.newEntries.push(t),n},{newEntries:[],existingEntries:[],matchingEntries:[]})).newEntries,r=n.existingEntries,!((i=n.matchingEntries).length>0||r.length>0||t.length>0))return[3,7];if(!((o=(0,ek._)(i).concat((0,ek._)(r),(0,ek._)(t)).map(function(e){return e.key})).length>0))return[3,3];return[4,g.apply(void 0,(0,ek._)(o.map(function(e){return e})))];case 2:s.sent(),s.label=3;case 3:if(a=(0,ek._)(i).concat((0,ek._)(r),(0,ek._)(t)).map(function(e){var n=e.key,t=B.get(n);if(t){var r=L.find(function(e){return e.name===t});if(r)return{secretId:r.id,alias:n}}return null}).filter(function(e){return null!==e}),l=(0,ek._)(i).concat((0,ek._)(r),(0,ek._)(t)).filter(function(e){return!B.has(e.key)}),!(a.length>0))return[3,5];return[4,Y(a)];case 4:s.sent(),s.label=5;case 5:if(!(l.length>0))return[3,7];return[4,m(l)];case 6:s.sent(),s.label=7;case 7:return et({nextNewSecrets:t,nextExistingEntries:r,nextMatchingEntries:i}),[3,9];case 8:return c=s.sent(),ne.Cp(c),x.showError("Something went wrong. Please try again."),[3,9];case 9:return R(!1),[2]}})}),function(){return f.apply(this,arguments)}),el=(0,u.useRef)(null),es=(0,u.useRef)(null),ec=(0,u.useCallback)(function(){es.current&&es.current.focus()},[]);return(0,c.FD)(eN.S,{gap:8,children:[b?(0,c.Y)(ng,{icon:(0,c.Y)(nF.A,{}),title:"Secrets",children:(0,c.FD)(eN.S,{p:8,children:[(0,c.FD)(eN.S,{css:nJ.secretHeader,children:[(0,c.Y)(eN.S,{children:"Key"}),(0,c.FD)(eN.S,{children:["Value",(0,c.Y)(nc.K0,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return F(!T)},size:18,children:T?(0,c.Y)(nA.A,{}):(0,c.Y)(nC.A,{})})]})]}),(0,c.FD)(eN.S,{gap:8,innerRef:el,children:[O.map(function(e,n){var t,r=e.key,i=e.value;return(0,c.Y)(nQ,{isSensitive:T,keyName:r,value:i,readOnly:"done"===G,accountSecrets:L,selectedKey:null!=(t=B.get(r))?t:null,onSelectedKeyChange:function(e){z(function(n){var t=new Map(n);return e?t.set(r,e):t.delete(r),t})},onChange:function(e){M(function(n){return n.map(function(n){return n.key===r?(0,eI._)((0,a._)({},n),{value:e}):n})})},ref:n===O.length-1?es:void 0},r)}),(0,c.FD)(eN.S,{css:nJ.actions,row:!0,justify:"space-between",children:[L.length>0&&"selecting"===G?(0,c.Y)(eF.$n,{iconLeft:(0,c.Y)(nO,{}),text:"Choose from Account Vault",onClick:ec,disabled:"selecting"!==G,loading:E}):(0,c.Y)("span",{}),(0,c.Y)(eF.$n,{css:nJ.primaryButton,iconLeft:E?(0,c.Y)(eM.A,{}):(0,c.Y)(nq.A,{}),text:"Continue",onClick:ea,loading:E,disabled:"selecting"!==G||!en||E})]})]})]})}):(0,c.Y)(nN,{openSecerets:k,watch:C,keys:h}),(0,c.Y)(nI,{removeEntries:g,newSecrets:j,step:G,onContinue:et,linkSecrets:Y,unlinkSecrets:_,linkedSecrets:U,onSecretsUpdated:function(e){z(function(n){var t=new Map(n);return e.forEach(function(e){var n=e.key,r=e.selectedKey;t.set(n,r)}),t})}}),(0,c.Y)(nD,{removeEntries:g,replaceAllExternalSecrets:A,existingSecrets:$,accountSecrets:L,onContinue:et,step:G,linkedSecrets:U,onSecretsUpdated:function(e){z(function(n){var t=new Map(n);return e.forEach(function(e){var n=e.key,r=e.selectedKey;t.set(n,r)}),t})}})]})}var n0=t(83692),n1=t(36818),n2=t(50640),n4=t.n(n2),n5=(0,u.memo)(function(e){var n=e.openPane,t=e.waitingOnUser,r=e.agentState,i=e.isReadOnly,a=(0,m.Rj)(function(){return null==r?void 0:r.select(function(e){switch(null==e?void 0:e.state){case E.g32.AGENT_STATE_PAUSED:case E.g32.AGENT_STATE_NOT_STARTED:case E.g32.AGENT_STATE_UNKNOWN:return!0;default:return!1}})},[r]),l=!i&&t&&a&&!e.isInCenteredPlanningLayout,s=(0,u.useCallback)(function(e,t){return n({type:"webview",data:{ports:{path:e,port:t,type:"local"}}})},[n]),d=(0,n1.A)({openWebview:s}),p=(0,u.useCallback)(function(){return n({type:"envEditor"})},[n]),f=(0,y.A)();return(0,c.Y)(eN.S,{clsx:[n4().root,(0,o._)({},n4().fullWidthStatusBar,e.hasFullWidthStatusBar)],"data-highlight":l,justify:"space-between",children:(0,c.FD)(eN.S,{clsx:n4().inner,children:[(0,c.Y)(eN.S,{align:"center",justify:"center",clsx:n4().highlightBackground,children:(0,c.Y)(eN.S,{})}),(0,c.FD)(eN.S,{clsx:n4().content,gap:8,children:[(0,c.Y)(n0.d2,{messageState:e.state,text:e.message,linkComponent:d}),e.requestedSecrets?(0,c.Y)(nX,{openSecrets:p,replId:f,keys:e.requestedSecrets.map(function(e){return e.key}),addEntries:e.secrets.addEntries,removeEntries:e.secrets.removeEntries,watch:e.secrets.watch,replaceAllExternalSecrets:e.secrets.replaceAllExternalSecrets,onComplete:function(){var n,t;return e.sendAskUserForActionResponse({type:"userSecretsResponse",requestEventId:e.eventId,providedSecretKeys:null!=(t=null==(n=e.requestedSecrets)?void 0:n.map(function(e){return e.key}))?t:[]})},sessionId:e.sessionId,waitingOnUser:e.waitingOnUser,linkSecrets:e.linkSecrets,unlinkSecrets:e.unlinkSecrets}):null]})]})})}),n3=t(50175);function n7(){var e=(0,b._)(["\n  mutation RecordTipInteraction(\n    $tipId: String!\n    $interactionType: TipInteractionType!\n    $interactionContext: String\n    $recommendedReason: String\n  ) {\n    recordTipInteraction(\n      tipId: $tipId\n      interactionType: $interactionType\n      interactionContext: $interactionContext\n      recommendedReason: $recommendedReason\n    ) {\n      __typename\n      ... on RecordTipInteractionResult {\n        tipState {\n          id\n          title\n          description\n          content\n          tags\n          priority\n          timeRecommended\n          timeCompleted\n          timeDismissed\n          timeInteracted\n          externalUrl\n        }\n        success\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return n7=function(){return e},e}var n6={},n8=(0,S.J1)(n7()),n9=t(35812),te=t(82839),tn=t(48686),tt=t(13353),tr=t(30267);function ti(e){var n=e.type,t=e.onComplete;return(0,u.useEffect)(function(){var e=function(e){return(0,tr.J7)(e,function(e){var r=e.tour;"complete"===r.action&&r.type===n&&t()})};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}},[t,n]),{showTour:(0,u.useCallback)(function(){(0,tr._z)({messageType:tt.tF.TOUR,tour:{type:n,action:"show"}},(0,tn.Ak)())},[n])}}function to(e){var n=e.interactionType.toLowerCase(),t={tipId:e.tip.id,tipTitle:e.tip.title,action:n,context:e.context,replId:e.replId,sessionId:e.sessionId,eventId:e.eventId};e.tip.recommendedReason&&(t.recommendedReason=e.tip.recommendedReason),e.tipTags&&(t.tipTags=e.tipTags),void 0!==e.tipPriority&&(t.tipPriority=e.tipPriority),void 0!==e.wasInitiallyExpanded&&(t.wasInitiallyExpanded=e.wasInitiallyExpanded),void 0!==e.hasInteractedBefore&&(t.hasInteractedBefore=e.hasInteractedBefore),e.externalUrl&&(t.externalUrl=e.externalUrl),e.ctaTrigger&&(t.ctaTrigger=e.ctaTrigger),void 0!==e.isInteractive&&(t.isInteractive=e.isInteractive),(0,er.u4)(er.AZ.TIP_SYSTEM_USED,t)}var ta=t(86733),tl=t(27789),ts=t(55549),tc=t(55587),tu=t.n(tc);function td(e,n,t){var r;return(null==e?void 0:e.id)===(null==n||null==(r=n.tip)?void 0:r.id)?"Bonsai tour tip override":t}function tp(e){var n=e.tip,t=e.expanded,r=e.onToggleExpanded,i=e.onLearnMoreClick,o=e.loading,a=void 0!==o&&o;return(0,c.Y)(eN.S,{p:8,children:(0,c.FD)(eN.S,{clsx:tu().root,p:12,gap:8,style:t?void 0:{cursor:"pointer"},onClick:t?void 0:r,children:[(0,c.Y)(eN.S,{clsx:[tu().iconCell,t&&tu().iconCellExpanded],children:(0,c.Y)(ts.A,{size:16,color:ei.LU.foregroundDimmer})}),(0,c.FD)(eN.S,{gap:8,clsx:tu().headerCell,style:t?{cursor:"pointer"}:void 0,onClick:t?r:void 0,children:[(0,c.FD)(eL.EY,{variant:"small",color:"dimmer",children:["Tip: ",n.title]}),(0,c.Y)(tl.A,{color:ei.LU.foregroundDimmer,rotate:180*!!t})]}),t?(0,c.FD)(eN.S,{clsx:tu().bodyCell,gap:4,children:[n.description?(0,c.Y)(eL.EY,{multiline:!0,children:n.description}):null,n.externalUrl||n.ctaTrigger?(0,c.Y)(eN.S,{row:!0,pt:4,children:n.externalUrl?(0,c.Y)(ta.v,{variant:"outlined",text:n.ctaLabel||"Learn more",onClick:i,href:n.externalUrl,target:"_blank",disabled:a}):n.ctaTrigger?(0,c.Y)(eF.$n,{variant:"outlined",text:n.ctaLabel||"Learn more",onClick:i,disabled:a}):null}):null]}):null]})})}function tf(e){var n,t,r,o,d,p,f,h,m,g,v,b,S,Y,_,A,C,k,x,D,E,R,I,T,F=e.event,P=e.onDismiss,L=e.tipData,U=e.bonsaiTourTipInfo,N=e.openPane,O=e.onNewSession,M=(0,y.A)(),H=(n=L.allTipsById,t=F.tip,(0,u.useMemo)(function(){return n.get(t.id)},[n,t.id])),B=(d=(o=(0,l._)((0,n9.A)("bonsai-tour-tip-override-event-id",null),2))[0],p=o[1],h=(f=(0,te.Z)("bonsai-ws-agent-onboarding")).isDone,m=f.setAsDone,g=(0,w.ON)("flag-mb-ws-agent-onboard"),v=(0,u.useMemo)(function(){if(d===F.id&&(null==U?void 0:U.tip))return U.tip;if(null==H?void 0:H.timeRecommended)return H;var e,n=null==U||null==(e=U.tip)?void 0:e.timeRecommended,t=!!d;return(null==U?void 0:U.isInBonsaiWebview)&&!h&&U.tip&&(!H||H.id!==U.tip.id)&&g&&!(n&&t)?U.tip:H},[d,F.id,U,H,h,g]),(0,u.useEffect)(function(){var e;(null==v?void 0:v.id)===(null==U||null==(e=U.tip)?void 0:e.id)&&d!==F.id&&p(F.id)},[null==v?void 0:v.id,null==U||null==(r=U.tip)?void 0:r.id,d,F.id,p]),b=(0,u.useMemo)(function(){return!L.recommendedTips.has((null==v?void 0:v.id)||"")},[L.recommendedTips,null==v?void 0:v.id]),{tip:v,setBonsaiTourAsDone:m,shouldRecordRecommendation:b}),z=B.tip,W=B.setBonsaiTourAsDone,G=B.shouldRecordRecommendation,V=(0,u.useMemo)(function(){return!!z&&(!!(L.recommendedTips.size<5||L.recommendedTips.has(z.id))||!!z.timeInteracted&&!z.timeCompleted||L.latestTipId===z.id&&!!L.anyLatestFiveInteracted)},[z,L]),Z=(S=L.hasInteractedBefore,A=(_=(0,l._)((Y=(0,a._)({},n6,void 0),n3.n(n8,Y)),2))[0],C=_[1].loading,k=(0,y.A)(),x=(0,u.useRef)(null),D=(0,u.useMemo)(function(){return z?"".concat(F.id,"-").concat(z.id):null},[F.id,z]),(0,u.useEffect)(function(){if(z&&!z.timeRecommended&&!C&&G&&D&&x.current!==D){x.current=D;var e,n,t,r=td(z,U,F.tip.recommendedReason);to({tip:{id:z.id,title:z.title,recommendedReason:r},interactionType:"recommended",context:"agent_chat",replId:k,sessionId:F.sessionId,eventId:F.id,tipTags:null==(e=z.tags)?void 0:e.filter(Boolean),tipPriority:z.priority,wasInitiallyExpanded:V,hasInteractedBefore:S,externalUrl:null!=(n=null==z?void 0:z.externalUrl)?n:null,ctaTrigger:null!=(t=null==z?void 0:z.ctaTrigger)?t:null,isInteractive:!!((null==z?void 0:z.externalUrl)||(null==z?void 0:z.ctaTrigger))}),A({variables:{tipId:z.id,interactionType:"RECOMMENDED",recommendedReason:r}})}},[z,C,G,F,k,V,S,A,D,U]),{recordTipInteractionMutation:A,loading:C}),j=Z.recordTipInteractionMutation,q=Z.loading,K=ti({type:"agent",onComplete:function(){null==P||P()}}).showTour,$=(0,l._)((0,u.useState)(!1),2),J=$[0],Q=$[1];(0,u.useEffect)(function(){Q(V)},[V]),E=L.hasInteractedBefore,R=(0,u.useRef)(!1),I=(0,y.A)(),(0,u.useEffect)(function(){R.current=!1},[F.tip.id]),(0,u.useEffect)(function(){var e=Date.now(),n=F.created?new Date(F.created).getTime():e;"none"===F.tip.id&&!R.current&&e-n<=5e3&&(R.current=!0,to({tip:F.tip,interactionType:"no_tip_recommended",context:"agent_chat",replId:I,sessionId:F.sessionId,eventId:F.id,hasInteractedBefore:E,externalUrl:null,ctaTrigger:null,isInteractive:!1}))},[F,I,E]);var X=(0,u.useCallback)(function(){var e,n,t,r=!J;Q(r),to({tip:{id:(null==z?void 0:z.id)||F.tip.id,title:(null==z?void 0:z.title)||F.tip.title,recommendedReason:td(z,U,F.tip.recommendedReason)},interactionType:r?"accordion_opened":"accordion_closed",context:"agent_chat",replId:M,sessionId:F.sessionId,eventId:F.id,tipTags:null==z||null==(e=z.tags)?void 0:e.filter(Boolean),tipPriority:null==z?void 0:z.priority,wasInitiallyExpanded:V,hasInteractedBefore:L.hasInteractedBefore,externalUrl:null!=(n=null==z?void 0:z.externalUrl)?n:null,ctaTrigger:null!=(t=null==z?void 0:z.ctaTrigger)?t:null,isInteractive:!!((null==z?void 0:z.externalUrl)||(null==z?void 0:z.ctaTrigger))})},[J,F.tip,M,F.sessionId,F.id,z,V,L.hasInteractedBefore,U]);if(!z)return null;var ee=(T=(0,i._)(function(){var e,n,t;return(0,s.YH)(this,function(r){switch(r.label){case 0:if(!z||q)return[2];return to({tip:{id:z.id,title:z.title,recommendedReason:F.tip.recommendedReason},interactionType:"interacted",context:"agent_chat",replId:M,sessionId:F.sessionId,eventId:F.id,tipTags:null==(e=z.tags)?void 0:e.filter(Boolean),tipPriority:z.priority,wasInitiallyExpanded:V,hasInteractedBefore:L.hasInteractedBefore,externalUrl:null!=(n=null==z?void 0:z.externalUrl)?n:null,ctaTrigger:null!=(t=null==z?void 0:z.ctaTrigger)?t:null,isInteractive:!!((null==z?void 0:z.externalUrl)||(null==z?void 0:z.ctaTrigger))}),[4,j({variables:{tipId:z.id,interactionType:"INTERACTED",interactionContext:"agent_chat"}})];case 1:if(r.sent(),z.ctaTrigger)switch(z.ctaTrigger){case"bonsai_tour":W(),K();break;case"auth_pane":null==N||N({type:"replitAuth"});break;case"database_pane":null==N||N({type:"neon"});break;case"create_new_chat":null==O||O();break;case"security_scan_pane":null==N||N({type:"securityScan"})}return[2]}})}),function(){return T.apply(this,arguments)});return(0,c.Y)(tp,{tip:z,expanded:J,onToggleExpanded:X,onLearnMoreClick:ee,loading:q})}function th(e){var n=e.items,t=e.maxVisibleItems,r=e.reverse,i=(0,l._)((0,u.useState)(!1),2),o=i[0],a=i[1],s=n.length-t,c=s>1,d=(0,u.useMemo)(function(){var e=r?(0,ek._)(n).reverse():n;return c&&!o?r?e.slice(0,t):e.slice(-t):e},[n,c,o,t,r]);return{isExpanded:o,setIsExpanded:a,maxItemsReached:c,visibleItems:d,hiddenItemsCount:s}}var tm=t(56348),tg=t.n(tm),tv=(0,u.memo)(function(e){var n=e.eventId,t=e.message,r=e.state,i=e.newFeatureRequests,o=e.sendAskUserForActionResponse,a=null==i?void 0:i.find(function(e){return e.isSelected}),l=a&&i?(0,ek._)(i.filter(function(e){return e!==a})).concat([a]):null!=i?i:[],s=!!a,u=th({items:l,maxVisibleItems:2,reverse:!1}),d=u.visibleItems,p=u.isExpanded,f=u.hiddenItemsCount,h=u.setIsExpanded,m=u.maxItemsReached;return(0,c.FD)(eN.S,{clsx:tg().root,gap:6,children:[(0,c.Y)(n0.d2,{text:t,messageState:r}),d.length?(0,c.FD)(eN.S,{row:!0,style:{flexWrap:"wrap",gap:8},children:[d.map(function(e){return(0,c.Y)(eF.$n,{shrink:!0,iconLeft:e.isSelected?(0,c.Y)(n_.A,{}):void 0,disabled:s,colorway:e.isSelected?"primary":void 0,size:"small",variant:"outlined",onClick:function(){return o({type:"nextStepResponse",data:e,requestEventId:n})},text:e.featureName},e.id)}),m?(0,c.Y)(eF.$n,{iconLeft:(0,c.Y)(tl.A,{rotate:180*!!p}),size:"small",onClick:function(){return h(!p)},text:p?"Show less":"Show ".concat(f," more")}):null]}):null]})}),ty=function(e){return e.Starter="starter",e.Paid="paid",e}({}),tw=t(82706),tb=t(96034),tS=t(76969),tY=t(73745),t_=t(43126);function tA(){var e=(0,b._)(["\n  mutation CreateAgentRollbackPreview(\n    $input: CreateAgentRollbackPreviewInput!\n  ) {\n    createAgentRollbackPreview(input: $input) {\n      ... on CreateAgentRollbackPreviewResult {\n        preview {\n          id\n          url\n          expiresAt\n        }\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return tA=function(){return e},e}var tC={},tk=(0,S.J1)(tA()),tx=t(68197);function tD(){var e=(0,b._)(["\n  subscription GetAgentRollbackPreviewStatus($input: RollbackPreviewInput!) {\n    getAgentRollbackPreviewStatus(input: $input) {\n      __typename\n      ... on RollbackPreviewOutput {\n        status\n        host\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return tD=function(){return e},e}var tE={},tR=(0,S.J1)(tD()),tI=t(27001),tT=t(22799),tF=t(30331),tP=t(33612),tL=t(66297),tU=new Map;function tN(e){var n,t,r,o,c=e.commitId,d=e.date,p=(0,y.A)(),f=(0,tF.g$)(),h=(0,tP.P)({secrets:f,replId:p}),m=(0,tT.GK)(),g=m.database,w=m.loading,b=g?g.projectId:null,S=(0,v.A)().showError,Y=(0,l._)((0,u.useState)(null),2),_=Y[0],A=Y[1],C=(0,l._)((0,u.useState)(!1),2),k=C[0],x=C[1],D=(0,l._)((0,u.useState)(tU.get(c)?{status:"ready",url:null!=(o=tU.get(c))?o:""}:{status:"idle"}),2),E=D[0],R=D[1],I=(0,u.useCallback)(function(e,n){(0,tL.Q)({context:"PreviewAgentCheckpointButton",error:null!=n?n:Error(e),extras:{replId:p}}),S(e),A(e)},[p,S]),T=(0,l._)((n=(0,a._)({},tC,void 0),n3.n(tk,n)),1)[0],F=w||"creating"===E.status||"building"===E.status,P=(t={variables:{input:{previewID:"building"===E.status?E.previewId:null}},skip:"building"!==E.status||!E.previewId},r=(0,a._)({},tE,t),tx.R(tR,r)),L=P.data,U=P.error;(0,u.useEffect)(function(){U&&(R({status:"idle"}),I("Failed to load preview",U))},[U,I]),(0,u.useEffect)(function(){if(null==L?void 0:L.getAgentRollbackPreviewStatus){var e=L.getAgentRollbackPreviewStatus;"RollbackPreviewOutput"===e.__typename?"success"===e.status&&e.host?R({status:"ready",url:"https://".concat(e.host)}):"fail"===e.status&&R({status:"idle"}):("NotFoundError"===e.__typename||"UnauthorizedError"===e.__typename||"UserError"===e.__typename||"ServiceUnavailable"===e.__typename)&&(R({status:"idle"}),I("Failed to load preview",Error(e.message)))}},[L,I]);var N=(0,u.useCallback)((0,i._)(function(){var e,n,t,r,i,o,a,u,f,m,g;return(0,s.YH)(this,function(s){switch(s.label){case 0:if(F)return[2];return[4,h()];case 1:if(n=s.sent(),t=tU.get(c))return R({status:"ready",url:t}),[2];return R({status:"creating"}),r=Array.from(n,function(e){var n=(0,l._)(e,2);return{name:n[0],value:n[1]}}),[4,T({variables:{input:{gitSha:c,replId:p,neonProjectId:b,timestamp:d.toISOString(),envVars:r}}})];case 2:if((null==(e=(i=s.sent()).data)?void 0:e.createAgentRollbackPreview.__typename)!=="CreateAgentRollbackPreviewResult")return(null==(o=i.data)?void 0:o.createAgentRollbackPreview.__typename)==="UnauthorizedError"&&((null==(a=i.data)?void 0:a.createAgentRollbackPreview.message)===tI.s.NEEDS_SUBSCRIPTION||(null==(u=i.data)?void 0:u.createAgentRollbackPreview.message)===tI.s.NEEDS_SUBSCRIPTION_OR_PAYMENT_METHOD)?x(!0):I(null!=(m=null==(f=i.data)?void 0:f.createAgentRollbackPreview.message)?m:"Something went wrong."),R({status:"idle"}),[2];return""===(g=i.data.createAgentRollbackPreview.preview.url)?R({status:"building",previewId:i.data.createAgentRollbackPreview.preview.id}):(R({status:"ready",url:g}),tU.set(c,g)),[2]}})}),[F,h,T,p,b,d,I,c]);return{ready:!F,isInCache:tU.has(c),loading:"creating"===E.status||"building"===E.status,loadPreview:N,showUpgradeModal:k,setShowUpgradeModal:x,previewState:E,previewUrl:"ready"===E.status?E.url:null,error:_,validPreview:6>(0,t_.A)(new Date,d)}}var tO=t(58271),tM=t(88011);function tH(){var e=(0,b._)(["\n  query blockDbRollback($replId: String!) {\n    getReplIdBlockDbRollback(input: { replId: $replId }) {\n      __typename\n      ... on GetReplIdBlockDbRollbackOutput {\n        __typename\n        blocked\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return tH=function(){return e},e}var tB={},tz=(0,S.J1)(tH()),tW=t(83365),tG=t(91351),tV=t.n(tG);function tZ(e){var n,t=null!=(n=e.size)?n:12,r=(0,l._)((0,u.useState)(0),2),i=r[0],o=r[1],a=t/2,s=2*a*Math.PI;return(0,u.useEffect)(function(){var n,t=Date.now(),r=function(){o(Math.min(1,.9-Math.exp(-1.5*((Date.now()-t)/(1e3*e.estimatedTotalSeconds))))),n=setTimeout(r,100+500*Math.random())};return r(),function(){return clearTimeout(n)}},[e.estimatedTotalSeconds]),(0,c.FD)("svg",{width:t,height:t,className:tV().progressCircle,children:[(0,c.Y)("circle",{fill:"transparent",stroke:ei.LU.outlineDimmer,strokeWidth:2,r:a-1,cx:a,cy:a}),(0,c.Y)("circle",{className:tV().innerCircle,style:{strokeDashoffset:s*(1-i)},stroke:ei.LU.foregroundDimmer,fill:"transparent",strokeWidth:2,strokeDasharray:"".concat(s," ").concat(s),r:a-1,cx:a,cy:a})]})}var tj=t(18278),tq=t(23959),tK=t(47245),t$=t(10729),tJ=t(55576),tQ=t(87971),tX=t(15149);function t0(e){return(0,c.Y)(eG.Ay,(0,eI._)((0,a._)({},e),{children:(0,c.Y)("path",{d:"M13.806 21.074a.75.75 0 0 1 .292 1.47 10.805 10.805 0 0 1-4.196 0 .75.75 0 1 1 .292-1.47 9.298 9.298 0 0 0 3.612 0ZM4.308 17.14a9.308 9.308 0 0 0 2.553 2.553.75.75 0 1 1-.835 1.247 10.805 10.805 0 0 1-2.964-2.965l.623-.417.623-.418Zm13.666 3.8a.75.75 0 0 1-.835-1.247l.835 1.247Zm1.718-3.8a.75.75 0 0 1 1.247.835 10.805 10.805 0 0 1-2.965 2.965l-.417-.624-.418-.623a9.31 9.31 0 0 0 2.553-2.553Zm-16.424-.206a.75.75 0 0 1 1.04.206l-1.246.835a.75.75 0 0 1 .206-1.041ZM1.25 12c0-.717.07-1.419.205-2.098a.75.75 0 1 1 1.47.292 9.3 9.3 0 0 0 0 3.612l.013.076a.75.75 0 0 1-1.483.216l-.089-.514A10.831 10.831 0 0 1 1.25 12Zm21.295 2.098a.75.75 0 1 1-1.47-.292l1.47.292ZM21.25 12c0-.619-.06-1.222-.176-1.806l.736-.145.735-.147a10.804 10.804 0 0 1 0 4.196l-.735-.147-.736-.145A9.298 9.298 0 0 0 21.25 12Zm.414-2.687a.75.75 0 0 1 .88.59l-1.47.291a.75.75 0 0 1 .59-.882ZM4.308 6.86a.75.75 0 0 1-1.246-.835l1.246.835Zm12.625-3.593a.75.75 0 0 1 1.04-.206 10.805 10.805 0 0 1 2.966 2.964.75.75 0 0 1-1.247.835 9.308 9.308 0 0 0-2.553-2.553.75.75 0 0 1-.206-1.04ZM6.026 3.062a.75.75 0 0 1 .835 1.246A9.306 9.306 0 0 0 4.308 6.86l-.623-.418-.623-.417a10.804 10.804 0 0 1 2.964-2.964Zm4.168-.136a.75.75 0 0 1-.292-1.47l.292 1.47ZM12 1.25c.717 0 1.419.07 2.098.205a.75.75 0 1 1-.292 1.47 9.3 9.3 0 0 0-3.612 0l-.145-.735-.147-.735c.68-.134 1.381-.205 2.098-.205ZM15.272 11.59a.5.5 0 0 1 0 .82l-4.342 3.04a.5.5 0 0 1-.787-.41V8.96a.5.5 0 0 1 .787-.41l4.342 3.04Z"})}))}function t1(e){return(0,c.FD)(eG.Ay,(0,eI._)((0,a._)({},e),{children:[(0,c.FD)("g",{clipPath:"url(#clip0_7973_279)",children:[(0,c.Y)("path",{d:"M13.865 20.05a.75.75 0 0 1 .248 1.477l-.383.077a9.743 9.743 0 0 1-.778.108l-.393.032c-.395.022-.789.02-1.18-.004l-.39-.034-.076-.011a.75.75 0 0 1 .155-1.485l.077.005.33.028c.33.02.664.022.998.003l.332-.026c.332-.032.66-.085.983-.157l.076-.013Zm-7.481-1.996a8.241 8.241 0 0 0 2.205 1.468l.067.035a.75.75 0 0 1-.687 1.33l-.354-.169a9.754 9.754 0 0 1-2.251-1.564l1.02-1.1Zm11.886-.683a.75.75 0 1 1 1.14.974 9.752 9.752 0 0 1-2.39 2.022l-.068.036a.75.75 0 0 1-.704-1.322l.28-.176a8.26 8.26 0 0 0 1.742-1.534Zm-12.946.722a.75.75 0 0 1 1.06-.039l-1.02 1.1a.75.75 0 0 1-.04-1.06Zm-2.063-3.8a.75.75 0 0 1 .928.387l.028.07.117.313c.083.207.173.41.272.607l.152.294.033.07a.75.75 0 0 1-1.31.715l-.04-.066-.18-.348a9.737 9.737 0 0 1-.32-.716l-.138-.37-.022-.074a.75.75 0 0 1 .48-.883Zm17.767-2.47a.75.75 0 0 1 .702.796 9.74 9.74 0 0 1-.145 1.168l-.08.385a9.751 9.751 0 0 1-.47 1.498l-.032.07a.751.751 0 0 1-1.358-.633l.118-.31c.112-.312.206-.63.28-.957l.068-.327c.06-.328.101-.658.122-.988a.75.75 0 0 1 .795-.701Zm-1.924-5.389a.75.75 0 0 1 .993.152l.045.062.209.331a9.744 9.744 0 0 1 1.07 2.525.75.75 0 0 1-1.45.386 8.266 8.266 0 0 0-.905-2.137l-.177-.28-.038-.066a.75.75 0 0 1 .253-.973Zm-4.778-3.151a.75.75 0 0 1 .885-.475l.074.022.366.14a9.758 9.758 0 0 1 2.06 1.138l.313.236.058.05a.75.75 0 0 1-.923 1.174l-.062-.045-.265-.2a8.256 8.256 0 0 0-1.743-.963l-.31-.118-.07-.03a.75.75 0 0 1-.383-.93ZM12.207 2.26l.077.006a.75.75 0 0 1-.032 1.492l-.077.002h-.331a8.254 8.254 0 0 0-.995.078l-.076.007a.75.75 0 0 1-.133-1.492l.391-.047c.262-.026.523-.04.785-.046h.391ZM11.25 7a.75.75 0 0 1 1.5 0v4.932l3.666 2.444.061.046a.75.75 0 0 1-.827 1.241l-.066-.039-4-2.667a.75.75 0 0 1-.334-.624V7Z"}),(0,c.Y)("path",{d:"M10.64 2.354a9.754 9.754 0 0 1 10.257 5.67.75.75 0 1 1-1.368.613A8.253 8.253 0 0 0 6.41 5.94l-.241.231-3.276 3.08H5l.077.003a.75.75 0 0 1 0 1.493L5 10.75H1A.75.75 0 0 1 .25 10V6a.75.75 0 0 1 1.5 0v2.265l3.376-3.172a9.75 9.75 0 0 1 5.514-2.739Z"})]}),(0,c.Y)("defs",{children:(0,c.Y)("clipPath",{id:"clip0_7973_279",children:(0,c.Y)("path",{d:"M0 0h24v24H0z"})})})]}))}var t2=t(71872),t4=t(50382),t5=t.n(t4),t3=t(52355),t7=t.n(t3);function t6(e){var n,t,r,o,d,p,f,h,m=e.setShowConfirmModal,g=e.onRevert,v=e.commitId,w=e.screenshot,b=e.date,S=tN({commitId:v,date:b}),_=S.loading,A=S.error,C=S.previewUrl,k=S.loadPreview,x=S.validPreview,D=(d=(t={variables:{replId:(0,y.A)()}},r=(0,a._)({},tB,t),o=Y.I(tz,r)).data,p=o.loading,f=o.error,p||void 0!==f||!!d&&(null==d||null==(n=d.getReplIdBlockDbRollback)?void 0:n.__typename)==="GetReplIdBlockDbRollbackOutput"&&d.getReplIdBlockDbRollback.blocked),E=(0,R._P)({controlName:tw.wm,logFlagToAnalytics:!1}),I=(0,R._P)({type:"string",controlName:tw.GB,default:""}).split(","),T=(0,tW.A)((h=(0,i._)(function(e){return(0,s.YH)(this,function(n){switch(n.label){case 0:return[4,e.getCommit({commit:v})];case 1:return[2,n.sent()]}})}),function(e){return h.apply(this,arguments)}),[v]),F=(0,tT.GK)(),P=F.database,L=F.loading,U=(0,tq.xQ)().deploymentId,N=(0,u.useMemo)(function(){if(L)return(0,e0.Ok)(!0);if(!P)return(0,e0._)("No database found");if(D)return(0,e0._)("Database rollbacks are temporarily disabled");if(!E)return(0,e0._)("Database rollbacks are not yet available");var e,n=(e=P.connectionString.match(/@.*?\.(.+?)\./))&&e[1]?e[1]:null;if(n&&I.includes(n))return(0,e0._)("Database rollbacks have been temporarily disabled in your database region.");var t=(0,tO.Xj)();return(0,tj.JW)(P,(0,tM.Bq)(b,t))},[L,P,b,E,I,D]),O=(0,l._)((0,u.useState)(!U),2),M=O[0],H=O[1];(0,u.useEffect)(function(){N.error&&H(!1)},[N]);var B=(0,c.Y)(t0,{});A?B=(0,c.Y)(nj.m_,{tooltip:A,children:(0,c.Y)(t2.A,{})}):_?B=(0,c.Y)(tZ,{estimatedTotalSeconds:25}):null!==C?B=(0,c.Y)(tX.A,{}):x||(B=(0,c.Y)(nj.m_,{tooltip:"Cannot preview checkpoints older than 7 days",children:(0,c.Y)(t1,{})}));var z="Load interactive preview";return _?z="Loading interactive preview...":C?z="View interactive preview":A?z="Error loading preview":x||(z="Preview expired"),(0,c.FD)(eN.S,{gap:24,children:[(0,c.FD)(eN.S,{gap:16,children:[(0,c.Y)(eL.Y9,{variant:"subheadBig",level:3,children:"Rollback to checkpoint"}),(0,c.FD)(eN.S,{gap:24,children:[(0,c.Y)(eN.S,{clsx:t7().confirmationModalScreenshotContainer,children:w?(0,c.FD)(c.FK,{children:[(0,c.Y)(eN.S,{clsx:t7().confirmationModalScreenshot,children:(0,c.Y)(tJ.A,{src:w,alt:"Screenshot",layout:"fill",objectFit:"cover"})}),(0,c.FD)(eN.S,{row:!0,align:"center",justify:"space-between",clsx:t7().confirmationModalPreviewTextContainer,children:[(0,c.Y)(eL.EY,{color:"dimmer",variant:"small",children:"Screenshot taken by the Agent"}),(0,c.Y)(eF.$n,{size:"small",variant:"underlinedOnHover",text:z,disabled:_||!x,iconRight:B,onClick:function(){x&&(C?window.open(C,"_blank"):k())}})]})]}):(0,c.Y)(eN.S,{align:"center",justify:"center",clsx:t7().noScreenshotText,children:(0,c.Y)(eL.EY,{color:"dimmer",children:"No screenshot available"})})}),(0,c.FD)(eN.S,{gap:8,children:[(0,c.Y)(eL.Y9,{variant:"subheadDefault",level:3,children:"Target checkpoint"}),(0,c.Y)(t8,{commitData:T})]}),(0,c.FD)(eN.S,{gap:8,children:[(0,c.Y)(eL.Y9,{variant:"subheadDefault",level:3,children:"What will be rolled back"}),(0,c.Y)(eN.S,{gap:8,children:(0,c.FD)("ul",{className:t7().rollbackOptionsList,children:[(0,c.Y)("li",{children:(0,c.FD)(eN.S,{children:[(0,c.Y)(eL.EY,{className:t7().rollbackOptionHeading,children:"Files"}),(0,c.Y)(eL.EY,{color:"dimmest",variant:"small",children:"All files in your app will be restored to the state they were in at the time of this checkpoint."})]})}),(0,c.Y)("li",{children:(0,c.FD)(eN.S,{children:[(0,c.Y)(eL.EY,{className:t7().rollbackOptionHeading,children:"Agent memory"}),(0,c.Y)(eL.EY,{color:"dimmest",variant:"small",children:"The Agent's memory will reset to what it knew about your app at the time of this checkpoint."})]})})]})})]}),P?(0,c.FD)(eN.S,{gap:12,children:[(0,c.Y)(eL.Y9,{variant:"subheadDefault",level:3,children:"Additional rollback options"}),(0,c.Y)(eN.S,{gap:8,children:(0,c.FD)(eN.S,{row:!0,align:"start",gap:8,children:[(0,c.Y)(nj.m_,{isDisabled:N.ok,tooltip:N.error,children:(0,c.Y)(nS.S,{id:"restore-database",name:"restore-database",disabled:!N.ok,checked:M,onChange:function(){return H(!M)}})}),(0,c.FD)(tK.J,{htmlFor:"restore-database",variant:"text",clsx:t7().flexGrowAndShrink,children:[(0,c.Y)(eL.EY,{children:"Database"}),(0,c.FD)(eL.EY,{color:"dimmest",variant:"small",children:["Your data will be restored to the time of this checkpoint.",U?" Note that rolling back the database will also affect active deployments.":""]})]})]})})]}):null]})]}),(0,c.FD)(eN.S,{row:!0,justify:"end",gap:8,children:[(0,c.Y)(eF.$n,{text:"Cancel",onClick:function(){return m(!1)},variant:"outlined"}),(0,c.Y)(eF.$n,{text:"Rollback to this checkpoint",loading:L,onClick:function(){g({rollbackDatabaseTimestamp:M?b.toISOString():void 0,rollbackDeploymentBuildId:void 0}),m(!1)},colorway:"primary"})]})]})}function t8(e){var n=e.commitData,t=!n,r=n&&(null==n?void 0:n.error);return t?(0,c.FD)(eP.ui,{clsx:[t5().root,t5().checkpointCard],row:!0,gap:8,children:[(0,c.Y)(eM.A,{clsx:[t7().statusIconLoading,t7().lineHeightOffset]}),(0,c.Y)(eN.S,{gap:2,grow:!0,shrink:!0,children:(0,c.FD)(t$.A,{speed:2,height:40,backgroundColor:ei.LU.backgroundHighest,foregroundColor:ei.LU.backgroundHigher,children:[(0,c.Y)("rect",{rx:"2",ry:"2",x:"0",y:"0",width:"200",height:"15"}),(0,c.Y)("rect",{rx:"2",ry:"2",x:"0",y:"25",width:"300",height:"15"})]})})]}):r?(0,c.FD)(eP.ui,{clsx:[t5().checkpointCard,t5().checkpointFailed],row:!0,gap:8,children:[(0,c.Y)(tQ.A,{clsx:[t5().statusIcon,t7().lineHeightOffset]}),(0,c.FD)(eN.S,{gap:2,grow:!0,shrink:!0,children:[(0,c.Y)(eL.EY,{children:"Failed to load commit"}),(0,c.Y)(eL.EY,{color:"dimmer",variant:"small",children:"The commit may have been deleted or is no longer accessible"})]})]}):(0,c.FD)(eP.ui,{clsx:[t5().root,t5().checkpointCard],row:!0,gap:8,children:[(0,c.Y)(eV,{clsx:[t5().statusIcon,t7().lineHeightOffset]}),(0,c.FD)(eN.S,{gap:2,grow:!0,shrink:!0,children:[(0,c.Y)(eL.EY,{children:n.subject}),(0,c.Y)(eL.EY,{color:"dimmer",children:n.body||(0,c.Y)("span",{clsx:t5().noDescription,children:"No description provided"})}),(0,c.FD)(eN.S,{row:!0,gap:6,align:"center",children:[(0,c.Y)(eU.Dc,{date:new Date(n.author.date),textColor:"dimmest",textVariant:"small"}),(0,c.Y)(eL.EY,{color:"dimmest",children:"•"}),(0,c.Y)(eL.EY,{color:"dimmest",variant:"small",children:n.hash.substring(0,8)})]})]})]})}var t9=t(1684);function re(e){return(0,c.Y)(eG.Ay,(0,eI._)((0,a._)({},e),{children:(0,c.Y)("path",{d:"M13.806 21.074a.75.75 0 0 1 .292 1.47 10.805 10.805 0 0 1-4.196 0 .75.75 0 1 1 .292-1.47 9.298 9.298 0 0 0 3.612 0ZM4.308 17.14a9.308 9.308 0 0 0 2.553 2.553.75.75 0 1 1-.835 1.247 10.805 10.805 0 0 1-2.964-2.965l.623-.417.623-.418Zm13.666 3.8a.75.75 0 0 1-.835-1.247l.835 1.247Zm1.718-3.8a.75.75 0 0 1 1.247.835 10.805 10.805 0 0 1-2.965 2.965l-.417-.624-.418-.623a9.31 9.31 0 0 0 2.553-2.553Zm-16.424-.206a.75.75 0 0 1 1.04.206l-1.246.835a.75.75 0 0 1 .206-1.041ZM1.25 12c0-.717.07-1.419.205-2.098l.019-.074a.75.75 0 0 1 1.452.366l-.076.442a9.333 9.333 0 0 0 .076 3.17l.011.076a.75.75 0 0 1-1.482.216l-.089-.514A10.831 10.831 0 0 1 1.25 12Zm21.295 2.098a.75.75 0 1 1-1.47-.292l1.47.292ZM21.25 12c0-.619-.06-1.222-.176-1.806l.736-.145.735-.147a10.804 10.804 0 0 1 0 4.196l-.735-.147-.736-.145A9.298 9.298 0 0 0 21.25 12Zm.414-2.687a.75.75 0 0 1 .88.59l-1.47.291a.75.75 0 0 1 .59-.882ZM4.308 6.86a.75.75 0 0 1-1.246-.835l1.246.835Zm12.625-3.593a.75.75 0 0 1 1.04-.206 10.805 10.805 0 0 1 2.966 2.964.75.75 0 0 1-1.247.835 9.308 9.308 0 0 0-2.553-2.553.75.75 0 0 1-.206-1.04ZM6.026 3.062a.75.75 0 0 1 .835 1.246A9.306 9.306 0 0 0 4.308 6.86l-.623-.418-.623-.417a10.804 10.804 0 0 1 2.964-2.964Zm4.168-.136a.75.75 0 0 1-.292-1.47l.292 1.47ZM12 1.25c.717 0 1.419.07 2.098.205l.074.019a.75.75 0 0 1-.366 1.452l-.442-.076a9.333 9.333 0 0 0-3.17.076l-.145-.736-.147-.735c.68-.134 1.381-.205 2.098-.205ZM15.555 8.896a.75.75 0 0 1 1.004 1.105l-.054.054-5.5 5a.75.75 0 0 1-1.01 0l-2.5-2.273a.75.75 0 0 1 1.01-1.11l1.995 1.813 4.995-4.54.06-.049Z"})}))}var rn=t(17767),rt=t(83728),rr=t(15407),ri=function(e){return e.InAgentChat="inAgentChat",e.InSessionList="inSessionList",e}({});function ro(e){var n=e.title,t=e.onRenameTitle,r=e.color,i=(0,l._)((0,u.useState)(!1),2),o=i[0],a=i[1],s=(0,l._)((0,u.useState)(n),2),d=s[0],p=s[1],f=function(){t&&t(d),a(!1)};return o?(0,c.Y)(nZ.pd,{color:r,value:d,onChange:function(e){return p(e.target.value)},onBlur:f,autoFocus:!0,onKeyDown:function(e){"Enter"===e.key&&f()},className:t5().editableTitleInput}):(0,c.Y)(eN.S,{row:!0,onClick:function(){return t&&a(!0)},style:{cursor:t?"pointer":"text"},clsx:t5().editableTitle,children:(0,c.FD)(eL.EY,{color:r,children:[d||n||(0,c.Y)("span",{clsx:t5().noDescription,children:"No description provided"}),t?(0,c.Y)(rt.A,{size:16}):null]})})}function ra(e){var n=e.title,t=e.date,r=e.author,i=e.screenshot,o=e.commitId,a=e.deploymentBuildId,s=e.onRevert,d=e.onOpenCommit,p=e.onRenameTitle,f=e.isReverting,h=e.isReverted,m=e.costInfo,g=e.variant,v=(0,R._P)({controlName:tw.eC}),y=""===o,w=[t5().root];"inAgentChat"===g&&(w.push(t5().checkpointCard),y?w.push(t5().checkpointFailed):w.push(t5().checkpointOk));var b=(0,c.Y)(t1,{});f?b=(0,c.Y)(eM.A,{}):y&&(b=(0,c.Y)(tQ.A,{}));var S=(0,c.Y)(eV,{clsx:t5().statusIcon});h?S=(0,c.Y)(re,{clsx:[t5().statusIconReverted,t5().statusIcon]}):y&&(S=(0,c.Y)(tQ.A,{clsx:[t5().statusIconFailed,t5().statusIcon]}));var Y=(0,l._)((0,u.useState)(!1),2),_=Y[0],A=Y[1],C=(0,u.useCallback)(function(){A(!0)},[]);return(0,c.FD)(eN.S,{clsx:w,row:!0,gap:8,children:[S,(0,c.FD)(eN.S,{row:!0,justify:"space-between",align:"center",grow:!0,shrink:!0,gap:12,children:[(0,c.FD)(eN.S,{gap:4,grow:!0,shrink:!0,children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:6,children:[(0,c.FD)(eN.S,{row:!0,gap:4,children:[(0,c.FD)(eL.EY,{variant:"small",color:"dimmer",clsx:t5().checkpointStatusText,children:[y?"Couldn't make checkpoint":"Checkpoint made"," "]}),(0,c.Y)(eU.Dc,{textVariant:"small",textColor:"dimmer",live:!0,placement:"top",date:t})]}),(0,c.Y)(rl,{costInfo:m}),(0,c.Y)(rs,{author:r})]}),y?(0,c.Y)(eL.EY,{multiline:!0,children:"An unexpected error occurred while creating this checkpoint. This is most likely an issue with Replit."}):(0,c.Y)(ro,{title:n,onRenameTitle:p,color:h?"dimmer":"default"}),(0,c.FD)(eN.S,{clsx:t5().buttonRow,children:[(0,c.Y)(nj.m_,{tooltip:y?"This is not a valid rollback target":"Reset your app to this version",children:(0,c.Y)(eF.$n,{clsx:t5().button,size:"small",onClick:C,iconLeft:b,disabled:f||y,variant:"outlined",text:"Rollback here"})}),(0,c.Y)(eF.$n,{clsx:t5().button,size:"small",onClick:function(){return d(o)},disabled:y,iconLeft:(0,c.Y)(rn.A,{}),variant:"outlined",text:"Changes"})]})]}),v?(0,c.Y)(ru,{screenshot:i,commitId:o,commitDate:t}):(0,c.Y)(rc,{screenshot:i})]}),(0,c.Y)(nY.a,{isOpen:_,onRequestClose:function(){return A(!1)},centered:!0,children:(0,c.Y)(t6,{author:r,setShowConfirmModal:A,deploymentBuildId:a,onRevert:s,commitId:o,screenshot:i,date:t})})]})}function rl(e){var n,t,r=e.costInfo;if(!r||r.isPaid&&void 0===r.usageCents)return null;var i=(n=r.isPaid,t=r.usageIndicatorVariant,n?t===ty.Starter?"This used 1 of your ".concat(tb.Lm," plan Agent checkpoints."):"This checkpoint cost ".concat(tS.ri,"\xa2."):t===ty.Starter?"This didn't use any of your ".concat(tb.Lm," plan Agent checkpoints. No significant changes were made."):"This checkpoint didn't cost you anything. No significant changes were made."),o=!r.hasAgentBillingV2,a=r.isPaid&&o,l=!r.isPaid;return(0,c.FD)(c.FK,{children:[(o||l)&&(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",children:"•"}),(0,c.FD)(nj.m_,{tooltip:i,placement:"top",children:[a?(0,c.Y)(rr.A,{clsx:t5().costText}):null,l?(0,c.Y)(eL.EY,{variant:"small",style:{color:ei.LU.accentPositiveStronger},children:"Free"}):null]})]})}function rs(e){var n=e.author;if("Agent"===n||!n)return null;var t="";"User"===n?t="This is a manually created checkpoint":"Deployment"===n&&(t="This checkpoint was created by a successful deployment");var r="";return"User"===n?r="User":"Deployment"===n&&(r="Deploy"),(0,c.FD)(c.FK,{children:[(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",children:"•"}),(0,c.Y)(nj.m_,{tooltip:t,placement:"top",children:(0,c.Y)(t9.a,{variant:"muted",colorway:"blue",text:r,compact:!0})})]})}var rc=function(e){var n=e.screenshot;return n?(0,c.Y)(eN.S,{clsx:t5().screenshotContainer,children:(0,c.Y)(tJ.A,{layout:"fill",src:n,alt:"Screenshot",objectFit:"cover"})}):null},ru=function(e){var n=e.screenshot,t=tN({commitId:e.commitId,date:e.commitDate}),r=t.loadPreview,i=t.loading,o=t.error,a=t.previewUrl,s=t.validPreview,d=t.showUpgradeModal,p=t.setShowUpgradeModal,f=null!==a,h=(0,l._)((0,u.useState)(!1),2),m=h[0],g=h[1];if((0,u.useEffect)(function(){(f||i)&&g(!0)},[f,i]),!n)return null;var v=(0,c.Y)(t0,{clsx:t5().previewIcon,size:20});i?v=(0,c.Y)(tZ,{estimatedTotalSeconds:25,size:20}):f?v=(0,c.Y)(tX.A,{clsx:t5().previewIcon,size:16}):s?o&&(v=(0,c.Y)(t2.A,{clsx:t5().previewIcon,size:20})):v=(0,c.Y)(t1,{clsx:t5().previewIcon,size:20});var y="Load preview";i?y="Loading...":f?y="View preview":s?o&&(y="Failed to load"):y="Preview expired";var w="";return o?w=o:s||(w="Cannot preview checkpoints older than 7 days"),(0,c.FD)(c.FK,{children:[(0,c.FD)(eN.S,{clsx:t5().screenshotContainer,style:{cursor:s?"pointer":"default"},onClick:function(){s&&(f?window.open(a,"_blank","noopener"):r())},onMouseLeave:function(){i||g(!1)},children:[(0,c.Y)(tJ.A,{layout:"fill",src:n,alt:"Screenshot",objectFit:"cover"}),(0,c.FD)(nj.m_,{placement:"right",tooltip:w,isDisabled:s,clsx:[t5().previewOverlay,m?t5().previewLoading:null],children:[v,(0,c.Y)(eL.EY,{color:"default",variant:"small",clsx:t5().previewText,children:y})]})]}),d?(0,c.Y)(tY.default,{isOpen:d,onClose:function(){return p(!1)},type:"purchase",contextualUpsell:(0,c.FD)(c.FK,{children:[(0,c.Y)(eL.EY,{variant:"subheadBig",children:"Upgrade to preview past checkpoints"}),(0,c.FD)(eL.EY,{multiline:!0,children:["Upgrade to Replit ",tb.en," to preview past checkpoints"]})]}),headingText:"Upgrade to preview past checkpoints",subHeadingText:"Upgrade to Replit ".concat(tb.en," to preview past checkpoints"),onPurchaseComplete:function(){d&&p(!1),r()},analyticsContext:{upgrade:{context:"checkpoint_preview"}}}):null]})},rd=t(4163),rp=t(74726),rf=t(36540),rh=t(1749),rm=t.n(rh);function rg(e){var n=e.numLocRead,t=e.numFilesRead,r=(null!=n?n:0)>0,i=(null!=t?t:0)>0;if(!(r||i))return null;var o=i?(0,ex.A)("file",t,!0):"",a=r?(0,ex.A)("line",n,!0):"";return(0,c.FD)(eN.S,{row:!0,align:"center",justify:"space-between",clsx:rm().container,gap:16,children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(rd.A,{size:16,color:ei.LU.foregroundDimmer}),(0,c.Y)(eL.EY,{variant:"small",color:"default",clsx:rm().itemsReadLabel,children:"Items read"}),(0,c.Y)(eL.EY,{variant:"small",color:"default",clsx:rm().itemsReadCompactLabel,children:"".concat(a).concat(a&&o?", ":"").concat(o)})]}),(0,c.FD)(eN.S,{row:!0,gap:16,align:"center",children:[r?(0,c.FD)(eN.S,{row:!0,align:"center",gap:4,children:[(0,c.Y)(rf.A,{size:16,color:ei.LU.foregroundDimmer,clsx:rm().itemIcons}),(0,c.Y)(eL.EY,{variant:"small",color:"default",clsx:rm().itemLabels,children:a})]}):null,i?(0,c.FD)(eN.S,{row:!0,align:"center",gap:4,children:[(0,c.Y)(rp.A,{size:16,color:ei.LU.foregroundDimmer,clsx:rm().itemIcons}),(0,c.Y)(eL.EY,{variant:"small",color:"default",clsx:rm().itemLabels,children:o})]}):null]})]})}var rv=t(7749),ry=t(19875),rw=t.n(ry);function rb(e){var n=e.totalSegments,t=e.filledSegments,r=e.filledColor,i=void 0===r?ei.LU.accentPositiveDefault:r,o=e.emptyBackgroundColor,l=void 0===o?ei.LU.outlineDimmer:o,s=e.segmentWidth,u=void 0===s?8:s,d=e.segmentHeight,p=void 0===d?8:d,f=e.gap,h=e.borderRadius,m=void 0===h?2:h,g=e.className,v=e.loading,y=void 0!==v&&v,w=e.ariaLabel,b=e.tooltip,S=e.tooltipHidden,Y=Math.min(Math.max(0,t),n),_=b||"".concat(Y,"/").concat(n),A={gap:"".concat(void 0===f?2:f,"px")},C=function(e){var n=e<Y,t={width:"".concat(u,"px"),height:"".concat(p,"px"),borderRadius:"".concat(m,"px")};return n?(0,eI._)((0,a._)({},t),{backgroundColor:i}):(0,eI._)((0,a._)({},t),{backgroundColor:l})},k=Array.from({length:n},function(e,n){var t=y?[rw().loading]:[];return(0,c.Y)(eN.S,{clsx:t,style:C(n)},n)}),x="".concat(Y," out of ").concat(n);return(0,c.Y)(nj.m_,{placement:"top",tooltip:_,maxWidth:280,isDisabled:y||void 0!==S&&S,children:function(e,t){return(0,c.Y)(eN.S,(0,eI._)((0,a._)({},e),{row:!0,align:"center",clsx:g,style:A,role:"progressbar","aria-valuemin":0,"aria-valuemax":n,"aria-valuenow":Y,"aria-label":w||x,innerRef:t,onClick:void 0,children:k}))}})}var rS=t(98451),rY=t.n(rS);function r_(e){var n=e.icon,t=e.label,r=e.value,i=e.tooltip,o=e.loading,a=void 0!==o&&o,l=e.className,s=e.cancelled;return(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,clsx:[rY().container,l],children:[(0,c.Y)(eN.S,{children:n}),(0,c.Y)(eL.EY,{variant:"small",clsx:rY().label,children:t}),(0,c.Y)(nj.m_,{tooltip:i,children:(0,c.Y)(eL.EY,{variant:"small",style:{textDecoration:s?"line-through":"none"},color:s?"dimmest":"default",children:r})}),"segmented"===e.barType?(0,c.Y)(eN.S,{clsx:rY().segmented,children:(0,c.Y)(rb,{totalSegments:e.totalSegments,filledSegments:e.filledSegments,filledColor:e.filledColor||ei.LU.accentPositiveDefault,emptyBackgroundColor:e.emptyBackgroundColor,segmentWidth:e.segmentWidth,segmentHeight:e.segmentHeight,gap:e.gap,borderRadius:e.borderRadius,loading:a,tooltip:i})}):(0,c.Y)(eN.S,{clsx:rY().continuous,children:(0,c.Y)(rv.W,{current:e.current,total:e.total,color:e.color||ei.LU.accentPrimaryDefault,loading:a,minWidthPercent:e.minWidthPercent,tooltip:i})})]})}var rA=t(60630),rC=t(53774),rk=t(4936),rx=t.n(rk);function rD(e){var n,t,r=e.capabilityUsage,i=(null!=(n=null==r?void 0:r.thinkingEnabledLlmCalls)?n:0)>0,o=(null!=(t=null==r?void 0:r.advancedModelProfileLlmCalls)?t:0)>0;return i||o?(0,c.FD)(eN.S,{row:!0,align:"center",justify:"space-between",clsx:rx().container,gap:16,children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(eO.A,{size:16,color:ei.LU.foregroundDimmer,clsx:rx().arrowIcon}),(0,c.Y)(eL.EY,{variant:"small",color:"default",clsx:rx().toolsUsedLabel,children:"Tools used"})]}),(0,c.FD)(eN.S,{row:!0,gap:16,align:"center",children:[i?(0,c.Y)(nj.m_,{tooltip:"About 1.25x increase in work cost",children:(0,c.FD)(eN.S,{row:!0,align:"center",gap:4,children:[(0,c.Y)(rA.A,{size:16,color:ei.LU.foregroundDimmer}),(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",clsx:rx().toolLabels,children:"Extended thinking"})]})}):null,o?(0,c.Y)(nj.m_,{tooltip:"About 5x increase in work cost",children:(0,c.FD)(eN.S,{row:!0,align:"center",gap:4,children:[(0,c.Y)(rC.A,{size:16,color:ei.LU.foregroundDimmer}),(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",clsx:rx().toolLabels,children:"High power model"})]})}):null]})]}):null}var rE=t(36073),rR=t(94887),rI=t(82450),rT=t(31518),rF=t(48604),rP=t(64445),rL=t.n(rP);function rU(e){if(e<60)return"".concat(e,"s");if(e<3600){var n=Math.floor(e/60);return(0,ex.A)("minute",n,!0)}var t=Math.floor(e/3600),r=Math.floor(e%3600/60);return r>0?"".concat(t,"h ").concat(r,"m"):"".concat(t,"h")}function rN(e){var n,t,r,i=e.workDurationSeconds,o=e.addedLinesOfCode,a=e.removedLinesOfCode,s=e.toolCalls,d=e.usageCents,p=e.defaultExpanded,f=e.isFreemiumRepl,h=e.ubbV2,m=e.numLocRead,g=e.numFilesRead,v=e.refunded,y=e.capabilityUsage,w=(0,l._)((0,u.useState)(void 0===p||p),2),b=w[0],S=w[1],Y=(0,u.useMemo)(function(){return void 0===d?25:h?d:25*!f},[d,f,h]),_=(0,u.useMemo)(function(){var e,n,t=(null!=(e=null==y?void 0:y.thinkingEnabledLlmCalls)?e:0)>0||(null!=(n=null==y?void 0:y.advancedModelProfileLlmCalls)?n:0)>0;return void 0!==i||void 0!==o||void 0!==a||void 0!==s||void 0!==d||void 0!==m||void 0!==g||t},[i,o,a,s,d,m,g,y]);if(!h){var A=f?"This work costs $0":"This work costs $0.25";return(0,c.Y)(eP.ui,{clsx:rL().container,children:(0,c.Y)(eN.S,{row:!0,align:"center",p:8,children:(0,c.Y)(eN.S,{clsx:rL().textContainer,children:(0,c.FD)(eN.S,{row:!0,gap:8,align:"center",pl:4,children:[(0,c.Y)(rr.A,{size:16})," ",(0,c.Y)(eL.EY,{color:"dimmer",variant:"small",children:A})]})})})})}if(!_)return null;var C=(n=[],void 0!==i&&n.push("".concat(rU(i)," of work")),(t=(o||0)+(a||0))>0&&n.push("".concat(t," lines of code changed")),n.join(" & ")),k=0===(r=(o||0)+(a||0))?0:(o||0)/r*5,x=(0,c.FD)(eN.S,{row:!0,gap:4,children:[(0,c.FD)(eL.EY,{variant:"small",children:["+",o]}),(0,c.FD)(eL.EY,{color:"dimmer",variant:"small",children:["-",a]})]}),D="This checkpoint was affected by an incident. No progress was lost, and the cost has been refunded. Check your email for more information.";return(0,c.FD)(eP.ui,{clsx:rL().container,children:[(0,c.FD)(eN.S,{clsx:rL().header,row:!0,align:"center",p:8,onClick:function(){return S(!b)},children:[(0,c.Y)("div",{clsx:rL().textContainer,children:(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",children:b?"Show less":(0,c.FD)(eN.S,{row:!0,gap:8,align:"center",pl:4,children:[(0,c.Y)(nj.m_,{tooltip:v?"You have been refunded for this checkpoint":"This work cost $".concat((Y/100).toFixed(2)),children:(0,c.Y)(rr.A,{size:16})}),(0,c.Y)(eL.EY,{color:"dimmer",variant:"small",children:C})]})})}),(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[v&&!b?(0,c.Y)(nj.m_,{tooltip:D,children:(0,c.Y)(rF.A,{size:16,color:ei.LU.foregroundDimmest})}):null,(0,c.Y)(rI.A,{size:16,color:ei.LU.foregroundDimmest,rotate:180*!b,css:nl.wp.transition.snappy})]})]}),b?(0,c.FD)(eN.S,{clsx:rL().expandedContent,p:12,gap:8,children:[void 0!==i&&(0,c.Y)(r_,{icon:(0,c.Y)(rT.A,{size:16,color:ei.LU.foregroundDimmer}),label:"Time worked",value:rU(i),barType:"continuous",current:i,total:480,color:ei.LU.blurpleDefault,tooltip:"Time spent by Agent",minWidthPercent:10}),void 0!==s&&s>0?(0,c.Y)(r_,{icon:(0,c.Y)(rR.A,{size:16,color:ei.LU.foregroundDimmer}),label:"Work done",value:(0,ex.A)("action",s,!0),barType:"continuous",current:null!=s?s:0,total:20,color:ei.LU.accentPositiveDefault,tooltip:"".concat((0,ex.A)("action",s,!0)," taken by Agent"),minWidthPercent:10}):null,(0,c.Y)(rg,{numLocRead:m,numFilesRead:g}),(void 0!==o||void 0!==a)&&(null!=o?o:0)+(null!=a?a:0)>0?(0,c.Y)(r_,{icon:(0,c.Y)(rn.A,{size:16,color:ei.LU.foregroundDimmer}),label:"Code changed",value:x,barType:"segmented",totalSegments:5,filledSegments:k,filledColor:ei.LU.accentPositiveDefault,emptyBackgroundColor:ei.LU.outlineStrongest,tooltip:"Lines of code added and removed"}):null,void 0!==d&&(0,c.Y)(r_,{icon:(0,c.Y)(rr.A,{size:16,color:ei.LU.foregroundDimmer}),label:"Cost to you",value:"$".concat((Y/100).toFixed(2)),barType:"continuous",current:v?0:Y,total:200,color:ei.LU.accentPrimaryDefault,tooltip:v?D:"Agent usage cost for this work",minWidthPercent:10,cancelled:v}),(0,c.Y)(rD,{capabilityUsage:y}),v?(0,c.Y)(rE.N,{icon:(0,c.Y)(rF.A,{}),text:"You have been refunded for this checkpoint",colorway:"blue"}):null]}):null]})}function rO(e){return rM.apply(this,arguments)}function rM(){return(rM=(0,i._)(function(e){var n,t,r,i,o,a,l,c,u;return(0,s.YH)(this,function(s){switch(s.label){case 0:return n=e.chatter,t=e.commitId,r=e.title,i=e.onSessionChange,o=e.currentSession,a=e.rollbackDatabaseTimestamp,l=e.rollbackDeploymentBuildId,[4,n.sessions.rollback({targetCommitId:t,newSessionTitle:"Revert to: '".concat(r,"'"),originalSessionId:o.id,deploymentBuildId:l,databaseRollbackTimestamp:a})];case 1:if(!(c=s.sent()).ok)throw Error("failed to revert");return u=c.payload,i(u),[2]}})})).apply(this,arguments)}var rH=t(43837),rB=t(93704),rz=t(39602),rW=t(62183),rG=(0,no.x)({root:[nl.wp.mx(32),nl.wp.mb(16),nl.wp.borderRadius()],hidden:[nl.wp.mx(32),nl.wp.mb(16),nl.wp.textAlign.center,nl.wp.position.relative],hiddenText:[nl.wp.backgroundColor.backgroundRoot,nl.wp.px(8),nl.wp.zIndex(1),{marginLeft:"auto",marginRight:"auto"}],hiddenHr:[nl.wp.position.absolute,nl.wp.width("100%"),nl.wp.border({direction:"top",color:ei.LU.outlineDimmest,style:"dashed"}),nl.wp.top("50%")],icon:{paddingTop:3},footer:[nl.wp.flex.wrap,nl.wp.justify.spaceBetween,nl.wp.align.center],timestamp:[nl.wp.flex.wrap],revertControls:[nl.wp.color.foregroundDimmer]});function rV(e){var n=e.commitId,t=e.openPane;return(0,tT.GK)()?(0,c.Y)(eN.S,{css:rG.revertControls,row:!0,gap:6,align:"center",children:(0,c.Y)(eF.$n,{onClick:function(){t({type:"neon",data:{openAtTab:{type:"settings",data:{restoreToCommitId:n}}}})},iconLeft:(0,c.Y)(rW.A,{}),size:"small",variant:"outlined",text:"Restore database to here"})}):null}function rZ(e){var n=e.reverterId,t=e.revertedAt,r=e.revertedCommitId,i=e.revertHiddenCount,o=e.openPane;return(0,c.FD)(c.FK,{children:[(0,c.FD)(eN.S,{css:rG.hidden,style:{margin:"16px 12px"},children:[(0,c.FD)(eL.EY,{css:rG.hiddenText,color:"dimmest",variant:"small",children:[i," event",i>1?"s":""," hidden after rolling back"]}),(0,c.Y)(eN.S,{css:rG.hiddenHr})]}),(0,c.FD)(eP.ui,{elevated:!0,css:rG.root,py:8,pl:8,pr:12,row:!0,gap:8,style:{borderRadius:8,margin:"16px 12px"},children:[(0,c.Y)(eN.S,{css:rG.icon,children:(0,c.Y)(eH.A,{color:ei.LU.foregroundDimmest})}),(0,c.FD)(eN.S,{grow:!0,shrink:!0,gap:2,justify:"space-between",children:[(0,c.Y)(eN.S,{pt:2,children:(0,c.Y)(eL.EY,{children:"Rollback completed"})}),(0,c.FD)(eN.S,{css:rG.footer,row:!0,children:[(0,c.Y)(rj,{date:t,reverterId:n}),(0,c.Y)(rV,{commitId:r,openPane:o})]})]})]})]})}function rj(e){var n,t=e.date,r=Number(e.reverterId),i=(0,rz.sx)({variables:{id:r}}).data;return(0,c.FD)(eN.S,{css:rG.timestamp,row:!0,gap:4,style:{color:ei.LU.foregroundDefault},children:[(0,c.FD)(eL.EY,{variant:"small",color:"dimmer",children:["Performed",(null==i||null==(n=i.user)?void 0:n.username)?" by ".concat(i.user.username):""]}),(0,c.Y)(eU.Dc,{textVariant:"small",textColor:"dimmer",live:!0,date:t})]})}var rq=(0,u.memo)(function(e){var n,t,r,o,a,l,d=e.checkpoint,p=e.onSessionChange,f=e.onRenameTitle,g=d.eventId,v=d.revert,y=(t=(n={checkpoint:d,onSessionChange:p}).checkpoint,r=n.onSessionChange,o=(0,h.NC)(),a=(0,m.J2)(o.sessions.agent.current),{onRevert:(0,u.useCallback)((l=(0,i._)(function(e){return(0,s.YH)(this,function(n){switch(n.label){case 0:if(!a)return[2];return(0,nw.p)({action:"revert_started",messageText:"Reverting to checkpoint: '".concat(t.title,"'"),sessionId:t.sessionId}),[4,rO({chatter:o,commitId:t.commitId,title:t.title,onSessionChange:r,rollbackDatabaseTimestamp:null==e?void 0:e.rollbackDatabaseTimestamp,rollbackDeploymentBuildId:null==e?void 0:e.rollbackDeploymentBuildId,currentSession:a})];case 1:return n.sent(),[2]}})}),function(e){return l.apply(this,arguments)}),[o,a,t,r])}).onRevert,w=(0,rB.F)().isFreemiumStarterPlanUsersOwnRepl,b=(0,rH.k)().hasAgentBillingV2,S=(0,u.useMemo)(function(){return{isPaid:d.isPaid,usageIndicatorVariant:w?ty.Starter:ty.Paid,usageCents:d.usageCents,hasAgentBillingV2:b}},[d.isPaid,w,d.usageCents,b]);return(0,c.FD)(c.FK,{children:[(0,c.FD)(eN.S,{"data-event-id":g,"data-commit-id":d.commitId,px:8*!e.hasFullWidthStatusBar,children:[(0,c.Y)(ra,{title:d.title,commitId:d.commitId,author:function(e){switch(e){case E.rEN.COMMIT_AUTHOR_AGENT:return"Agent";case E.rEN.COMMIT_AUTHOR_USER:return"User";case E.rEN.COMMIT_AUTHOR_DEPLOYMENT:return"Deployment";default:return}}(d.author),onOpenCommit:e.onOpenCommit,date:d.created,screenshot:d.screenshotUrl,isReverting:(null==v?void 0:v.status)==="inflight",costInfo:S,variant:ri.InAgentChat,onRevert:y,onRenameTitle:f?function(e){return f(d.commitId,e)}:void 0}),b&&d.isPaid?(0,c.Y)(rN,{workDurationSeconds:d.workDurationSeconds,addedLinesOfCode:d.addedLinesOfCode,removedLinesOfCode:d.removedLinesOfCode,toolCalls:d.toolCalls,usageCents:d.usageCents,numLocRead:d.numLocRead,numFilesRead:d.numFilesRead,capabilityUsage:d.capabilityUsage,isFreemiumRepl:w,ubbV2:d.ubbV2,refunded:d.refunded,defaultExpanded:d.triggerReason===E.BcJ.CHECKPOINT_TRIGGER_REASON_RAPID_BUILD_FEEDBACK}):null]}),(null==v?void 0:v.reverterId)&&v.commitId&&v.revertedAt?(0,c.Y)(rZ,{reverterId:v.reverterId,revertedAt:v.revertedAt,revertedCommitId:v.commitId,revertHiddenCount:v.hiddenEvents,openPane:e.openPane}):null]})}),rK=t(85051),r$=t(25578),rJ=t(85874),rQ=t.n(rJ),rX=(0,u.memo)(function(e){var n=(0,l._)((0,u.useState)(!1),2),t=n[0],r=n[1];return(0,c.Y)(eN.S,{px:8,children:(0,c.FD)(eN.S,{gap:6,children:[(0,c.FD)(eN.S,{css:rK.b.nofill,tag:"button",row:!0,px:6,gap:6,align:"center",justify:"space-between",onClick:function(){return r(function(e){return!e})},children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:6,style:{flex:"1 1 auto"},children:[(0,c.Y)(t2.A,{color:ei.LU.foregroundDimmer}),(0,c.Y)(eL.EY,{color:"dimmer",children:"Agent ran into an error"})]}),(0,c.Y)(tl.A,{color:ei.LU.foregroundDimmer,rotate:180*!!t})]}),t?(0,c.Y)(eP.ui,{p:8,elevated:!0,clsx:rQ().surface,children:(0,c.Y)(r$.Ay,{children:e.message})}):null]})})}),r0=t(74914);function r1(){var e=(0,b._)(["\n  query MobileAgentTourNudgeCurrentUser {\n    currentUser {\n      id\n      hasPushDevicesRegistered\n    }\n  }\n"]);return r1=function(){return e},e}var r2={},r4=(0,S.J1)(r1()),r5=t(41930),r3=t(37252),r7=t(93517),r6=t(87064),r8=t(82356),r9=t(35381),ie=t(90082),it=t.n(ie);function ir(e){var n=e.isPlanApproved,t=(0,w.m6)();return(0,c.Y)(eN.S,{className:it().root,children:t?(0,c.Y)(ia,{isPlanApproved:n}):(0,c.Y)(io,{})})}function ii(){var e,n,t,r=(0,w.m6)(),i=(e=(0,a._)({},r2,void 0),Y.I(r4,e)).data,o=(0,te.Z)("agent-mobile-notification-nudge",function(){(0,nw.p)({action:"mobile_download_qr_dismissed"})}),l=o.isDone,s=o.isLoading,c=o.setAsDone,u=null!=(t=null==i||null==(n=i.currentUser)?void 0:n.hasPushDevicesRegistered)&&t;return{isVisible:!r&&!s&&!l&&!u,dismiss:c}}var io=function(){var e=(0,r5.a)(),n=(0,l._)((0,u.useState)(!1),2),t=n[0],r=n[1],i=ii(),o=i.isVisible,a=i.dismiss;if(!o)return null;var s=function(e){(0,nw.p)({action:"mobile_download_qr_clicked"}),window.open(e)},d=(0,c.Y)(eF.$n,{clsx:it().btnLeft,iconLeft:(0,c.Y)(r9.A,{}),text:"Get notified when your app is ready",variant:"outlined"});return(0,c.FD)(c.FK,{children:[e?(0,c.FD)(r3.Wv,{isOpen:t,onOpenChange:function(e){e&&(0,nw.p)({action:"mobile_download_qr_viewed"}),r(e)},label:"Show download Replit mobile app QR",placement:"top",children:[d,(0,c.Y)(eN.S,{clsx:it().mobileQr,children:(0,c.Y)(r7.A,{source:"agent_plan_timeline",installText:"Tap to install the Replit app",onClick:s})})]}):(0,c.Y)(nj.m_,{placement:"top",colorway:"darker",tooltip:(0,c.Y)(eN.S,{clsx:it().mobileQr,children:(0,c.Y)(r7.A,{source:"agent_plan_timeline",installText:"Scan to install the Replit app",onClick:s})}),children:d}),(0,c.Y)(eF.$n,{clsx:it().btnRight,iconLeft:(0,c.Y)(r6.A,{}),text:"",variant:"outlined",onClick:function(){a(),r(!1)}})]})},ia=function(e){var n=e.isPlanApproved,t=(0,te.Z)("bonsai-ws-agent-onboarding"),r=t.isDone,i=t.isLoading,o=t.setAsDone,a=(0,w.ON)("flag-mb-ws-agent-onboard"),l=ti({type:"agent",onComplete:o}).showTour;return a?(0,c.Y)(eF.$n,{clsx:it().btnBonsai,iconLeft:(0,c.Y)(r8.A,{}),colorway:i||r||!n?void 0:"primary",text:"Learn how to create with Agent",onClick:l}):null};function il(e){var n=e.status,t=e.size,r=e.userType,i=void 0===r?E.utd.AI:r;switch(n){case E.jhd.STEP_IN_PROGRESS:if(i===E.utd.USER)return(0,c.Y)(tQ.A,{color:ei.LU.foregroundDimmer,size:t});return(0,c.Y)(eM.A,{color:ei.LU.blurpleStronger,size:t});case E.jhd.STEP_COMPLETE:return(0,c.Y)(n_.A,{color:ei.LU.accentPositiveStronger,size:t});case E.jhd.STEP_FAILED:return(0,c.Y)(r6.A,{color:ei.LU.accentNegativeStronger,size:t});default:return(0,c.Y)(tQ.A,{color:ei.LU.foregroundDimmer,size:t})}}var is=t(30124),ic=t(72688),iu=t.n(ic);function id(e){var n=e.activeStepId,t=e.isVisualPreviewInPlanning,r=e.hasVisualPreviewCompatibleStack,i=(0,u.useMemo)(function(){var e,n,i,o;return n=(e={isVisualPreviewInPlanning:t,hasVisualPreviewCompatibleStack:r}).isVisualPreviewInPlanning,i=e.hasVisualPreviewCompatibleStack,o=[{id:"planning",title:"Initial Planning",userType:E.utd.AI}],i?n?o.push({id:"approval",title:"Plan Approval",userType:E.utd.USER}):o.push({id:"approval",title:"Plan Approval",userType:E.utd.USER},{id:"design",title:"Visual Preview",userType:E.utd.AI}):o.push({id:"approval",title:"Plan Approval",userType:E.utd.USER}),o.push({id:"build",title:"Interactive Prototype",userType:E.utd.AI}),o},[t,r]);return(0,c.Y)(eP.ui,{clsx:iu().timeline,elevated:!0,children:i.map(function(e,t){var r=t<i.findIndex(function(e){return e.id===n}),a=e.id===n;return(0,c.FD)(u.Fragment,{children:[t>0?(0,c.Y)(is.a,{clsx:iu().divider}):null,(0,c.FD)(eN.S,{clsx:[(0,o._)({},iu().timelineItemComplete,r)],row:!0,gap:6,px:6,py:4,align:"center",children:[(0,c.Y)(il,{status:r?E.jhd.STEP_COMPLETE:a?E.jhd.STEP_IN_PROGRESS:E.jhd.STEP_NOT_STARTED,userType:e.userType}),(0,c.Y)(eN.S,{clsx:iu().timelineItemText,children:(0,c.Y)(eL.EY,{children:e.title})})]})]},e.id)})})}var ip=t(38692),ih=t(41943),im=t.n(ih);function ig(e){var n=e.heading,t=e.headingTooltip,r=e.subHeading,i=e.children,o=e.defaultExpanded;return(0,c.Y)(ip.A,{headerContent:(0,c.FD)(eN.S,{gap:8,shrink:!0,children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(eL.EY,{variant:"subheadDefault",children:n}),t?(0,c.Y)(nj.m_,{placement:"right-start",tooltip:t,children:(0,c.Y)(rF.A,{size:12,color:ei.LU.foregroundDimmer})}):null]}),r?(0,c.Y)(eL.EY,{clsx:im().subheadingText,color:"dimmer",children:r}):null]}),headerProps:{className:im().accordionHeader},className:im().accordionItem,defaultExpanded:void 0===o||o,toggleOn:"chevron",children:i})}var iv=t(98698),iy=t(24602),iw=t(43796),ib=t(81650),iS=t(52951),iY=t.n(iS),i_=(0,ei.CK)("PlanStepsList.module.css",["".concat(ei.qo.surfaceBackground,"-color")]);function iA(e){var n,t,r=e.steps,i=e.onRemove,a=e.allowEmpty,s=void 0!==a&&a,d=e.shouldTruncate,p=(0,eP.IU)({elevated:!1}),f=r.length>1,h=(0,l._)((0,u.useState)(!1),2),m=h[0],g=h[1],v=(n=(0,iv.l)().height,t=(0,w.m5)(),(0,u.useMemo)(function(){return n?t?n<1e3?3:5:n<850?3:5:5},[n,t])),y=(void 0===d||d)&&r.length>v,b=y&&!m?r.slice(0,v):r;return(0,c.FD)(eP.ui,{clsx:iY().stepsList,elevated:!0,style:(0,o._)({},i_.surfaceBackgroundColor,p),children:[b.map(function(e,n){return(0,c.FD)(u.Fragment,{children:[n>0?(0,c.Y)(is.a,{clsx:iY().divider}):null,(0,c.Y)(iC,{step:e,onRemove:i&&(f||s)?function(){return i(e)}:void 0})]},e.id)}),y&&!m?(0,c.FD)(c.FK,{children:[(0,c.Y)("div",{className:iY().gradientOverlay}),(0,c.Y)(eN.S,{row:!0,justify:"center",align:"center",p:4,children:(0,c.Y)(iw.K,{clsx:iY().showMoreButton,onClick:function(){return g(!0)},text:"Show more features"})})]}):null]})}function iC(e){var n=e.step,t=e.onRemove;return(0,c.Y)(eN.S,{gap:6,align:"stretch",children:(0,c.FD)(eN.S,{row:!0,gap:6,px:6,pl:8,py:4,align:"stretch",children:[(0,c.Y)(eN.S,{grow:!0,shrink:!0,children:(0,c.Y)(eL.EY,{textWrap:"pretty",clsx:(0,o._)({},iY().cancelledText,n.isCancelled),children:n.name})}),t&&!n.isCancelled?(0,c.Y)(eN.S,{children:(0,c.Y)(nc.K0,{alt:"Remove",onClick:t,children:(0,c.Y)(ib.A,{color:ei.LU.foregroundDimmer})})}):null]})})}var ik=(0,no.x)({item:[iy.S.foregroundPulse(),nl.wp.borderRadius(4),nl.wp.height(20)]});function ix(){return(0,c.Y)(eP.ui,{clsx:iY().stepsList,children:(0,c.Y)(eN.S,{gap:6,children:Array.from({length:3}).map(function(e,n){return(0,c.Y)(eN.S,{gap:2,align:"stretch",children:(0,c.Y)(eN.S,{row:!0,align:"stretch",children:(0,c.Y)(eN.S,{grow:!0,shrink:!0,css:ik.item})})},n)})})})}function iD(e){var n=e.objective,t=e.rapidBuildState,r=e.activeTimelineStepId,i=e.hasVisualPreviewCompatibleStack,o=e.isPlanApproved,l=e.isVisualPreviewInPlanning,s=e.initialVersionStep,d=e.onRemoveStep,p=e.shouldTruncateStepsList,f=(0,h.Li)(),m=(0,u.useMemo)(function(){if(s&&0!==s.subSteps.length)return s.subSteps.map(function(e){return(0,eI._)((0,a._)({},e),{isCancelled:f.removedInitialVersionStepIds.includes(e.id)})})},[s,f.removedInitialVersionStepIds]);if("complete"===t)return(0,c.FD)(eN.S,{row:!0,align:"center",gap:6,children:[(0,c.Y)(eL.EY,{variant:"subheadDefault",children:"Initial version"}),(0,c.Y)(t9.a,{text:"Complete",colorway:"positive"})]});var g=null==s;return(0,c.Y)(ig,{heading:"Initial version",headingTooltip:o?"This describes the high-level direction Agent will follow when building the first interactive version of your app.":"This describes the high-level direction Agent will follow when building the first interactive version of your app. You can change it by requesting changes in chat.",subHeading:n,defaultExpanded:!0,children:g?(0,c.Y)(ix,{}):m?(0,c.Y)(iA,{steps:m,onRemove:d,shouldTruncate:void 0===p||p}):(0,c.Y)(id,{activeStepId:r,isVisualPreviewInPlanning:l,hasVisualPreviewCompatibleStack:i})})}var iE=t(58965),iR=t(47848),iI=t(90342),iT=t(71424),iF=t(3549),iP=t(24478);function iL(){}function iU(e){var n,t,r=e.designReferenceFilePath,i=e.isPlanGenerationComplete,o=e.zoomLevel,a=(0,iE.gL)().data,l=null==a||null==(n=a.currentUser)?void 0:n.isStaff,s=null==a||null==(t=a.currentUser)?void 0:t.isExplorer,d=(0,eR.sz)(),p=(0,iT.A)().ports,f=(0,iI.w)(p),h=(0,u.useMemo)(function(){return f.some(function(e){return(0,iR.th)(e.configuration.localPort)})},[f]);return r&&i?(0,c.Y)(iP.a,{filePath:r,zoomLevel:o}):d&&h?(0,c.Y)(iF.F,{readonlyBannerVariant:"none",zoomLevel:o,darkerDarkTheme:l&&s,openPane:iL}):null}var iN=t(17562),iO=t(25012),iM=t.n(iO);function iH(e){var n=(0,l._)((0,u.useState)(!1),2),t=n[0],r=n[1],i=e.designReferenceFilePaths[0],o=(0,c.Y)(eN.S,{clsx:iM().webviewContainer,grow:!0,justify:"center",children:(0,c.Y)(iU,{designReferenceFilePath:i,isPlanGenerationComplete:e.isPlanGenerationComplete,zoomLevel:t?1:.75})}),a=(0,h.Li)().removedInitialVersionStepIds.length>0,s=!e.isPlanLoadingInitialSteps&&!!i;return(0,c.FD)(eP.ui,{clsx:iM().root,elevated:!0,children:[(0,c.FD)(eN.S,{row:!0,align:"center",p:8,gap:8,justify:"space-between",children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(eL.EY,{variant:"subheadDefault",children:"Visual preview"}),s?(0,c.Y)(nj.m_,{tooltip:"Shown at 75% zoom",children:(0,c.Y)(rF.A,{color:ei.LU.foregroundDimmer,size:16})}):null]}),s?(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(eL.EY,{color:"dimmest",variant:"small",children:"Agent will use this as a design reference"}),(0,c.Y)(nc.K0,{alt:"Maximize preview",onClick:function(){return r(!0)},children:(0,c.Y)(iN.A,{})})]}):null]}),(0,c.Y)(is.a,{clsx:iM().divider}),a?(0,c.Y)(rE.N,{clsx:iM().statusBanner,icon:(0,c.Y)(t2.A,{}),text:"The initial version of this plan has been modified. Request a new plan in chat to receive an updated visual preview.",colorway:"yellow",variant:"flush"}):null,e.isPlanLoadingInitialSteps?(0,c.Y)(iz,{}):o,(0,c.FD)(iB,{isOpen:t,onRequestClose:function(){return r(!1)},children:[(0,c.Y)(rE.N,{clsx:iM().statusBanner,icon:(0,c.Y)(rF.A,{}),text:"This is a read-only visual preview of your app which the Agent will use as a design reference.",colorway:"blue",variant:"flush"}),o]})]})}function iB(e){var n=e.isOpen,t=e.onRequestClose,r=e.children;return(0,c.Y)(nY.a,{isOpen:n,onRequestClose:t,maxWidth:"calc(85vw + 2px)",fitContent:!0,centered:!0,noPadding:!0,children:(0,c.FD)(eN.S,{children:[(0,c.Y)(eN.S,{clsx:iM().modalHeader,p:8,children:(0,c.Y)(eL.EY,{variant:"subheadDefault",children:"Visual preview"})}),(0,c.Y)(eN.S,{clsx:iM().modalContent,children:r})]})})}function iz(){return(0,c.Y)(eN.S,{clsx:iM().emptyState,grow:!0,align:"center",justify:"center",p:8,children:(0,c.Y)(eN.S,{align:"center",gap:16,children:(0,c.Y)(eL.EY,{color:"dimmest",children:"Waiting for plan details…"})})})}var iW=t(93936),iG=t(9470),iV=t.n(iG);function iZ(e){var n=e.isDesigning,t=e.designReferenceFilePath,r=e.openPip,i=(0,w.m5)(),o=(0,l._)((0,u.useState)(!1),2),a=o[0],s=o[1],d=(0,u.useCallback)(function(){i?n?r({type:"agentHtmlPreviewStream"}):r({type:"agentHtmlPreviewFromDisk",designReferenceFilePath:t}):s(!0)},[i,n,r,t]);return(0,c.FD)(eN.S,{clsx:iV().root,p:8,justify:"space-between",row:!0,align:"center",children:[(0,c.Y)(eN.S,{gap:6,children:n?(0,c.FD)(eN.S,{row:!0,gap:6,align:"center",children:[(0,c.Y)(eM.A,{}),(0,c.Y)(eL.EY,{children:"Designing visual preview…"})]}):(0,c.Y)(eN.S,{row:!0,gap:6,align:"center",children:(0,c.Y)(eL.EY,{children:"Visual preview"})})}),(0,c.Y)(eN.S,{row:!0,gap:6,align:"center",children:(0,c.Y)(eF.$n,{variant:"outlined",text:"Open preview",iconLeft:(0,c.Y)(iW.A,{}),onClick:d})}),i?null:(0,c.Y)(iB,{isOpen:a,onRequestClose:function(){return s(!1)},children:(0,c.Y)(iU,{designReferenceFilePath:t,isPlanGenerationComplete:!n})})]})}var ij=t(64912);function iq(e){var n=e.isMVPPlan,t=e.steps,r=e.onRemoveStep,i=e.shouldTruncateStepsList,o=(0,h.Li)(),a=(0,u.useMemo)(function(){return n?t.slice(1).filter(function(e){return!o.removedLaterStepIds.includes(e.id)}):t},[n,t,o.removedLaterStepIds]);return(0,c.Y)(ig,{heading:n?"Later":"Steps",headingTooltip:n?"The Later section is where you and ".concat((0,ij.Nn)()," can store ideas to work on later. When you make a request ").concat((0,ij.Nn)()," can't finish in a single iteration, it will remember the remaining tasks by placing them here."):void 0,subHeading:n?"".concat(ij.g$," can work on these tasks\n          after the initial version"):void 0,defaultExpanded:!n,children:a.length>0?(0,c.Y)(iA,{steps:a,onRemove:r,allowEmpty:!0,shouldTruncate:i}):(0,c.FD)(eL.EY,{color:"dimmer",children:["All steps have been removed.",(0,c.Y)("br",{}),"Generate a new plan to come up with more tasks."]})})}function iK(){var e=(0,b._)(["\n  fragment AgentPlanReplMetadataRepl on Repl {\n    id\n    iconUrl\n    title\n  }\n"]);return iK=function(){return e},e}function i$(){var e=(0,b._)(["\n  query AgentPlanReplMetadata($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        ...AgentPlanReplMetadataRepl\n      }\n    }\n  }\n  ","\n"]);return i$=function(){return e},e}var iJ={},iQ=(0,S.J1)(iK()),iX=(0,S.J1)(i$(),iQ),i0=t(34229),i1=t(43563),i2=t.n(i1);function i4(e){var n,t,r=e.children,i=(n={variables:{id:(0,y.A)()}},t=(0,a._)({},iJ,n),Y.I(iX,t)).data,o=(null==i?void 0:i.getRepl.__typename)==="Repl"?i.getRepl:null;return(null==o?void 0:o.title)&&o.iconUrl?(0,c.FD)(eN.S,{row:!0,gap:12,align:"center",children:[(0,c.Y)(eN.S,{clsx:i2().iconContainer,children:(0,c.Y)(i0.Ay,{iconUrl:o.iconUrl,size:64,alt:"App icon"})}),(0,c.FD)(eN.S,{gap:4,shrink:!0,children:[(0,c.Y)(eL.EY,{variant:"subheadBig",children:o.title}),r]})]}):null}var i5=t(50301),i3=t(66097),i7=t.n(i3);function i6(e){var n=e.stackBlueprint,t=e.step,r=null!=n&&n!==E.qf8.STACK_BLUEPRINT_NONE&&n!==E.qf8.STACK_BLUEPRINT_CUSTOM,i=t.blueprintData.length>0&&t.blueprintData.some(function(e){return""!==e.displayName.trim()});return r||i?(0,c.FD)(eN.S,{row:!0,gap:8,align:"center",clsx:i7().blueprintsRow,children:[(0,c.Y)(eL.EY,{color:"dimmer",children:"Tech stack"}),(0,c.Y)(nj.m_,{placement:"bottom-start",tooltip:"The primary framework ".concat(ij.g$," will use to build the app, as well as any relevant integrations"),children:(0,c.Y)(rF.A,{size:12,color:ei.LU.foregroundDimmer})}),r?(0,c.Y)(nj.m_,{tooltip:ij.Wu[n].description,children:(0,c.Y)(t9.a,{text:ij.Wu[n].displayName,clsx:i7().integrationPill,variant:"filled"})}):null,(0,c.Y)(i8,(0,a._)({},e))]}):null}function i8(e){var n=e.step,t=e.isEditable,r=(0,l._)((0,i5.Ne)(),2)[1],i=[],o=!1,a=!0,s=!1,d=void 0;try{for(var p,f=n.blueprintData[Symbol.iterator]();!(a=(p=f.next()).done);a=!0){var h=p.value;""!==h.displayName.trim()&&(("javascript_log_in_with_replit"===h.name||"python_log_in_with_replit"===h.name)&&(o=!0),i.push((0,c.Y)(t9.a,{clsx:i7().integrationPill,text:h.displayName,variant:"filled"},h.name)))}}catch(e){s=!0,d=e}finally{try{a||null==f.return||f.return()}finally{if(s)throw d}}return((0,u.useEffect)(function(){o&&!t&&r(!0)},[o,t,r]),0===i.length)?null:(0,c.Y)(c.FK,{children:i})}var i9=(0,no.x)({item:[iy.S.foregroundPulse(),nl.wp.borderRadius(4),nl.wp.height(20),nl.wp.minWidth(80)]});function oe(){return(0,c.FD)(eN.S,{row:!0,gap:8,align:"center",grow:!0,children:[(0,c.Y)(eL.EY,{color:"dimmer",children:"Tech stack"}),(0,c.Y)(nj.m_,{placement:"bottom-start",tooltip:"The primary framework ".concat(ij.g$," will use to build the app, as well as any relevant integrations"),children:(0,c.Y)(rF.A,{size:12,color:ei.LU.foregroundDimmer})}),(0,c.Y)(eN.S,{row:!0,grow:!0,css:i9.item})]})}var on=t(31450),ot=t(12360),or=t(15765),oi=t.n(or),oo=(0,u.memo)(function(e){var n,t=e.expanded,r=e.areMultiplePlanVersionsAvailable,i=(0,eC._)(e,["expanded","areMultiplePlanVersionsAvailable"]),l=i.sessionId,s=i.planId,f=i.planApprovalState,m=(0,w.m5)(),g=(0,h.xe)(),v=(0,u.useRef)(null),y="approved"===f,b=!r||y;(0,u.useEffect)(function(){var e;b||null==(e=v.current)||e.scrollIntoView({behavior:"smooth"})},[b]);var S=(0,h.rj)(),Y=(0,u.useCallback)(function(){var e;b||(S(s),t||(0,nw.Y)({action:"plan_proposal_selected",sessionId:l,planId:s}),null==(e=v.current)||e.scrollIntoView({behavior:"smooth"}))},[b,S,s,t,l]);return(0,c.Y)(d.A,{children:(0,c.Y)(p.A,{nodeRef:v,timeout:300,classNames:oi().collapseExpandTransition,onEnter:function(){v.current&&(v.current.style.height="0px")},onEntering:function(){var e,n=null==(e=v.current)?void 0:e.scrollHeight;n&&(v.current.style.height=n+"px")},onEntered:function(){v.current&&(v.current.style.height="auto")},onExit:function(){var e,n=null==(e=v.current)?void 0:e.scrollHeight;n&&(v.current.style.height=n+"px")},onExiting:function(){v.current&&(v.current.style.height="0px")},children:(0,c.Y)(eP.ui,{elevated:!y,innerRef:v,clsx:[oi().root,(n={},(0,o._)(n,oi().elevated,!y),(0,o._)(n,oi().selected,g===s&&!y),(0,o._)(n,oi().expanded,t),(0,o._)(n,oi().disabled,b),(0,o._)(n,oi().matchFooterWidth,!y&&m||i.hasFullWidthStatusBar),n)],onClick:Y,children:t?(0,c.Y)(ol,(0,a._)({},i)):(0,c.Y)(oa,(0,a._)({},i))})},t?"expanded":"collapsed")})});function oa(e){var n=e.planIterationVersion,t=e.eventUpdated;return(0,c.FD)(eN.S,{row:!0,align:"center",gap:6,children:[(0,c.Y)(eL.EY,{color:"dimmer",clsx:oi().title,children:"Plan"}),(0,c.Y)(t9.a,{text:"V".concat(n)}),(0,c.Y)(eL.EY,{color:"dimmest",variant:"small",children:(0,r0.A)(t,{addSuffix:!0})})]})}function ol(e){var n=e.objective,t=e.stackBlueprint,r=e.requiresApproval,i=e.planApprovalState,a=e.steps,s=e.eventState,d=e.eventCreated,p=e.eventUpdated,f=e.designReferenceFilePaths,m=e.rapidBuildState,g=e.isMVPPlan,v=e.supportsVisualPreview,y=e.openPip,b=e.sessionId,S=(0,w.m5)(),Y=ii().isVisible,_="approved"===i,A=s===E.qOk.COMPLETE,C=a[0],k=!C,x=(0,eQ.l)(t),D=a.length>1,R=(0,u.useRef)(null),T=(0,l._)((0,u.useState)(!1),2),F=T[0],P=T[1],L=(0,I.A)(function(e){P(e.width+16<on.LO.tabletMin)});(0,u.useEffect)(function(){var e;null==(e=R.current)||e.scrollIntoView({behavior:"smooth"})},[]);var U="planning";switch(i){case"approved":U="build";break;case"awaiting-approval":case"revising":U="approval"}var N=(0,h.hL)(),O=(0,h.rD)(),M=(0,u.useCallback)(function(e){var n=e.id;N(n),(0,nw.Y)({action:"plan_initial_step_removed",sessionId:b,stepId:n})},[N,b]),H=(0,u.useCallback)(function(e){var n=e.id;O(n),(0,nw.Y)({action:"plan_later_step_removed",sessionId:b,stepId:n})},[O,b]),B=(0,r0.A)(d,{addSuffix:!0});A&&(B=(0,r0.A)(p,{addSuffix:!0}));var z="none";(void 0===v||v)&&!_&&(z=S&&F?"collapsed-below":"expanded-side-by-side");var W=D||!r&&Y,G=g||W;return(0,c.FD)(eN.S,{clsx:oi().planContainer,gap:12,row:!0,innerRef:L,children:[(0,c.FD)(eN.S,{clsx:[oi().planDetails,(0,o._)({},oi().hasVisualPreviewSibling,"expanded-side-by-side"===z)],gap:12,children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:6,children:[_?(0,c.Y)(ot.A,{color:ei.LU.greenStrongest}):null,(0,c.Y)(eL.EY,{color:"dimmer",clsx:oi().title,children:"Plan"}),(0,c.Y)(t9.a,{text:"Latest"}),(0,c.Y)(eL.EY,{color:"dimmest",variant:"small",children:B})]}),(0,c.Y)(i4,{children:k?(0,c.Y)(oe,{}):(0,c.Y)(i6,{step:C,stackBlueprint:t,isEditable:r})}),G?(0,c.Y)(is.a,{className:oi().divider}):null,g?(0,c.FD)(c.FK,{children:[(0,c.Y)(iD,{objective:n,rapidBuildState:m,activeTimelineStepId:U,hasVisualPreviewCompatibleStack:x,isPlanApproved:_,isVisualPreviewInPlanning:!0,initialVersionStep:C,onRemoveStep:_?void 0:M,shouldTruncateStepsList:!_}),"collapsed-below"!==z||k?null:(0,c.Y)(iZ,{isDesigning:"generating"===i,designReferenceFilePath:f[0],openPip:y}),W?(0,c.Y)(is.a,{className:oi().divider}):null]}):null,D?(0,c.Y)(iq,{isMVPPlan:g,steps:a,onRemoveStep:_?void 0:H,shouldTruncateStepsList:!_}):null,r?null:(0,c.Y)(eN.S,{row:!0,align:"center",justify:"end",children:(0,c.Y)(ir,{isPlanApproved:!0})})]}),"expanded-side-by-side"===z?(0,c.Y)(eN.S,{className:oi().visualPreviewContainer,grow:!0,children:(0,c.Y)(iH,{designReferenceFilePaths:f,isPlanGenerationComplete:A,isPlanLoadingInitialSteps:k})}):null]})}var os=t(88747),oc=(0,no.x)({root:[nl.wp.m(12)]}),ou=(0,u.memo)(function(e){var n=(0,tF.cF)();return(0,c.Y)(eN.S,{css:oc.root,children:(0,c.Y)(os.aD,{currentBuild:n,hasDeployment:!!n,openDeploymentsPane:function(){return e.openPane({type:"deployments"})},paneType:"agentChat"})})}),od=t(73205),op=t(78333),of=t(47701),oh=t(37032),om=t(79932),og=t(26072),ov=t(43813),oy="cm-agent-flash-range-element",ow="rgba(100, 0, 255, 0.3)",ob=en.Lz.theme((0,o._)({"&":{maxHeight:"max(calc(".concat(nu.R.height," - 125px), 125px)")},".cm-gutters":{backgroundColor:ei.LU.backgroundHigher}},".".concat(oy),{display:"inline-block"})),oS=en.Lz.theme((0,o._)({"&":{maxHeight:"calc(".concat(nu.R.height," - 40px)")},".cm-scroller":{"&::-webkit-scrollbar":{display:"none"}},".cm-gutters":{backgroundColor:ei.LU.backgroundHigher}},".".concat(oy),{display:"inline-block"})),oY=function(){function e(n,t){var r=this;(0,$._)(this,e),this.view=n,this.target=null,this.previous="",this.destroyed=!1,this.loop=new om.F3(function(e,t){if(null===r.target)return t();var i=n.lineBlockAt(r.target),o=n.scrollDOM.scrollTop,a=Math.min(Math.max(i.top,0),n.scrollDOM.scrollHeight-n.scrollDOM.clientHeight),l=a-o,s=Math.abs(l);if(s<1)return n.scrollDOM.scrollTop=a,r.target=null,t();var c=3e3*e;s<1500&&(c*=Math.sqrt(s/1500));var u=l>=0?Math.max(Math.min(c,s),.5):Math.min(Math.max(-c,-s),-.5);n.scrollDOM.scrollTop+=u}),Promise.resolve().then(function(){r.destroyed||(r.previous=t.current,n.dispatch({changes:{from:0,to:n.state.doc.length,insert:t.current}}),r.target=t.current.length,r.loop.start(),r.dispose=t.subscribe(function(e){if(e.startsWith(r.previous)){var t=r.previous.length,i=e.length,o=e.slice(t),a=op.y.of({from:t,to:i,class:oy,animation:{duration:550,fill:"backwards",easing:"ease-out",keyframes:{opacity:[.675,.75,1],filter:["grayscale(0.325)","grayscale(0)","grayscale(0)"],backgroundColor:[ow,ow,"transparent"],offset:[0,.18181818181818182,1]}}});n.dispatch({changes:{from:t,insert:o},effects:a})}else{var l=r.view.state.doc.length;n.dispatch({changes:{from:0,to:l,insert:e}})}r.previous=e,r.target=n.state.doc.length,r.loop.start()}))})}return e.prototype.destroy=function(){var e;this.destroyed=!0,this.target=null,this.loop.stop(),null==(e=this.dispose)||e.call(this)},e}(),o_=new oh.k(function(e){return en.Z9.define(function(n){return new oY(n,e)})});function oA(e){var n=e.path,t=e.code,r=e.openPane,i=e.showCode,o=(0,w.m5)(),a=(0,l._)((0,u.useState)(function(){return(0,og.F)(t)}),1)[0];(0,u.useEffect)(function(){a.current!==t&&a.set(t)},[a,t]);var s=o_.use(a),d=(0,u.useCallback)(function(){r&&r({type:"codeEditor",data:{path:n}})},[r,n]);return(0,c.Y)(ng,{icon:(0,c.Y)(ov.A,{path:n}),title:(0,c.Y)(oC,{path:n,onClick:d}),onOpenPane:d,openPaneButtonAlt:"Open code file",children:void 0===i||i?(0,c.Y)(of.Ay,{filePath:n,extensions:[o?oS:ob,s],hideGutter:o,fontSize:o?12:void 0,lineWrapping:!1,hideIndentMarker:!0,readOnly:!0}):null})}function oC(e){var n=e.path,t=e.onClick;return t?(0,c.Y)(eF.$n,{variant:"underlinedOnHover",text:ok(n),onClick:t}):(0,c.Y)(eL.EY,{children:ok(n)})}function ok(e){return e.replace(/^\//,"")}function ox(e){var n=e.data,t=e.openPane;return(0,c.Y)(oA,{path:n.path,code:n.content,openPane:t})}function oD(e){var n=e.openPane;return(0,c.Y)(ng,{icon:(0,c.Y)(rW.A,{}),title:"Created PostgreSQL Database",onOpenPane:function(){return n({type:"neon"})}})}var oE=t(2526),oR=t(70876),oI=(0,no.x)({countRemoved:[nl.wp.color.accentNegativeStronger],countAdded:[nl.wp.color.accentPositiveStronger]});function oT(e){var n=e.path,t=e.type,r=e.diff,i=e.openPane,o=(0,u.useMemo)(function(){var e=0,n=0,t=!0,i=!1,o=void 0;try{for(var a,l=r.hunks[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value,c=!0,u=!1,d=void 0;try{for(var p,f=s.lines[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value;"removed"===h.type?e++:"added"===h.type&&n++}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}return{added:n,removed:e}},[r]),a=(0,u.useCallback)(function(){i&&i({type:"codeEditor",data:{path:n}})},[i,n]),l=(0,u.useCallback)(function(){i&&i({type:"diff",data:{type:"patch",diff:r}})},[i,r]);return(0,c.Y)(ng,{icon:(0,c.Y)(ov.A,{path:n}),title:(0,c.Y)(oP,{type:t,path:n,onClick:a}),right:(0,c.Y)(eN.S,{row:!0,gap:8,align:"center",children:(0,c.Y)(oF,{type:t,removed:o.removed,added:o.added})}),onOpenPane:l,openPaneButtonAlt:"Open full diff",elevated:!0,children:(0,c.Y)(oR.A,{patch:r,maxLines:16,compressed:!1,background:null,noHeader:!0,noBorder:!0})})}function oF(e){var n=e.type,t=e.removed,r=e.added;switch(n){case"modify":return(0,c.FD)(c.FK,{children:[(0,c.FD)(eL.EY,{css:oI.countRemoved,children:["-",t]}),(0,c.FD)(eL.EY,{css:oI.countAdded,children:["+",r]})]});case"create":return(0,c.FD)(eL.EY,{css:oI.countAdded,children:["+",r]});case"delete":return(0,c.FD)(eL.EY,{css:oI.countRemoved,children:["-",t]})}}function oP(e){var n,t=e.type,r=e.path,i=e.onClick;switch(t){case"create":n=ei.LU.accentPositiveStronger;break;case"delete":n=ei.LU.accentNegativeStronger}return i?(0,c.Y)(eF.$n,{variant:"underlinedOnHover",style:{color:n},text:oL(r),onClick:i}):(0,c.Y)(eL.EY,{style:{color:n},children:oL(r)})}function oL(e){return e.replace(/^\//,"")}function oU(e){var n=e.data,t=n.path,r=n.diff,i=n.state,o=e.openPane,a=i===E.qOk.COMPLETE,s=(0,u.useRef)(null),d=(0,u.useMemo)(function(){var e=function(e){var n=e.previous,t=e.path,r=e.diff,i=e.complete;if(!r||"\n"===r)return i?(ne.v4(function(e){e.setTag("agent",!0),e.setExtras({diff:r}),ne.Cp(Error("No changes in diff"))}),(0,e0._)("This diff cannot be displayed")):(0,e0.Ok)(oN(t));if(!i)try{return(0,e0.Ok)((0,oE.rj)(r))}catch(e){if(n&&n.ok)return n;return(0,e0.Ok)(oN(t))}try{return(0,e0.Ok)((0,oE.rj)(r))}catch(e){return ne.v4(function(n){n.setTag("agent",!0),n.setExtras({diff:r}),ne.Cp(e)}),(0,e0._)("This diff cannot be displayed")}}({previous:s.current,path:t,diff:r,complete:a});return s.current=e,e},[t,r,a]),p=(0,l._)((0,u.useState)(1),2),f=p[0],h=p[1],m=(0,u.useMemo)(function(){return!a&&d.ok&&0===d.value.hunks.length},[a,d]);return((0,u.useEffect)(function(){if(m){var e=setInterval(function(){h(function(e){return e%3+1})},500);return function(){return clearInterval(e)}}},[m]),m)?(0,c.Y)(eN.S,{row:!0,gap:"8px",align:"center",justify:"center",children:(0,c.FD)(eL.EY,{multiline:!0,children:["Editing ",t,".".repeat(f)]})}):d.ok?(0,c.Y)(oT,{path:t,type:"modify",diff:d.value,openPane:o}):(0,c.Y)(rE.N,{icon:(0,c.Y)(t2.A,{}),colorway:"warning",text:d.error})}function oN(e){return{labelA:e,labelB:e,hunks:[]}}var oO=t(79680),oM=t.n(oO);function oH(e){var n=e.imageUrl,t=e.imageDescription;return n?(0,c.Y)(eN.S,{className:oM().container,children:(0,c.Y)(tJ.A,{src:n,alt:t||"Generated image",className:oM().image,layout:"fill",objectFit:"cover"})}):(0,c.Y)(eN.S,{className:oM().loading,children:(0,c.Y)(eM.A,{})})}var oB=t(56965),oz=t(66147),oW=t(50219),oG=t(33791),oV=t(38524),oZ=(0,no.x)({terminalWrapperBottomRadius:[nl.wp.borderRadius(0,0,4,4),{"> div":[nl.wp.borderRadius(4)],"& .xterm":[nl.wp.borderRadius(4)]}],terminalWrapperFullRadius:[nl.wp.borderRadius(4),{"> div":[nl.wp.borderRadius(4)],"& .xterm":[nl.wp.borderRadius(4)]}]});function oj(e){var n,t=e.data,r=e.openPane,i=t.installed,o=t.isExecuting,a=t.processId,l=t.state,s=null==(n=t.output)?void 0:n.trim().replaceAll("\n","\r\n"),u=(0,oz.V)(),d="";d=o?i.length>1?"".concat(i.length," packages are being installed:"):"A package is being installed:":i.length>1?"".concat(i.length," packages were installed:"):"A package was installed:";var p=l===E.qOk.IN_PROGRESS&&o&&!s,f=i.length>0,h=l===E.qOk.IN_PROGRESS||s?(0,c.FD)(eN.S,{css:f?oZ.terminalWrapperFullRadius:oZ.terminalWrapperBottomRadius,style:{backgroundColor:null==u?void 0:u.background},children:[o&&a?(0,c.Y)(oW.A,{processId:a,openPane:r,maxHeight:300}):null,!o&&s?(0,c.Y)(oB.xd,{output:s,maxHeight:300,openPane:r}):null]}):null,m=f?(0,c.FD)(eN.S,{gap:4,p:8,children:[(0,c.Y)(eL.EY,{color:"dimmest",children:p?"Installing…":"Command output:"}),h]}):h;return(0,c.Y)(ny,{icon:(0,c.Y)(oG.A,{}),title:"Dependencies",onOpenPane:function(){r({type:"dependencies"})},text:d,packageList:i,getPackageIcon:function(){return(0,c.Y)(oV.A,{})},children:m})}function oq(e){var n=e.data.uninstalled,t=e.openPane,r=n.length>1?"".concat(n.length," packages were uninstalled:"):"A package was uninstalled:";return(0,c.Y)(ny,{icon:(0,c.Y)(oG.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:r,packageList:n,getPackageIcon:function(){return(0,c.Y)(oV.A,{})}})}var oK=t(2188);function o$(e){var n=e.data;return(0,c.Y)(ng,{icon:(0,c.Y)(oK.A,{}),title:(0,c.Y)(oC,{path:n.data.path}),showOpenPaneButton:!1})}function oJ(e){var n=e.data,t=e.openPane;return(0,c.Y)(oA,{path:n.data.filePath,code:n.data.content,openPane:t,showCode:!1})}var oQ=t(53420),oX=t(70855),o0=t(77100),o1=t.n(o0),o2={UNSPECIFIED:0,IN_PROGRESS:1,SUCCESSFUL:2,FAILED:3,CHOSEN:4};function o4(e){var n=e.id,t=e.contents,r=e.state,i=function(e){switch(e){case o2.IN_PROGRESS:return{icon:(0,c.Y)(eM.A,{}),label:"In Progress",colorway:"default",bgColor:"var(--token-background-higher)"};case o2.SUCCESSFUL:return{icon:(0,c.Y)(n_.A,{}),label:"Successful",colorway:"positive",bgColor:"var(--token-background-positive-weak)"};case o2.FAILED:return{icon:(0,c.Y)(t2.A,{}),label:"Failed",colorway:"negative",bgColor:"var(--token-background-negative-weak)"};case o2.CHOSEN:return{icon:(0,c.Y)(oQ.A,{}),label:"Chosen",colorway:"accent",bgColor:"var(--token-background-accent-weak)"};case o2.UNSPECIFIED:default:return{icon:(0,c.Y)(rT.A,{}),label:"Pending",colorway:"default",bgColor:"var(--token-background-higher)"}}}(r);return(0,c.FD)(eN.S,{clsx:o1().trajectoryItem,p:8,children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[i.icon,(0,c.FD)(eL.EY,{variant:"small",color:"default",children:["Trajectory ",n]}),(0,c.Y)(t9.a,{text:i.label,colorway:function(){switch(r){case o2.SUCCESSFUL:return"positive";case o2.FAILED:return"negative";case o2.CHOSEN:return"primary";default:return}}(),variant:"muted",compact:!0})]}),t?(0,c.Y)(eN.S,{pt:4,children:(0,c.Y)(eL.EY,{variant:"small",multiline:!0,color:"dimmer",children:t})}):null]})}function o5(e){var n,t=(null==(n=e.data.data)?void 0:n.trajectories)||[];return(0,c.Y)(ng,{icon:(0,c.Y)(oX.A,{}),title:"Solution exploration",renderChildrenOnlyWhenInView:!0,children:(0,c.Y)(eN.S,{gap:6,pt:6,children:t.length>0?(0,c.Y)(eN.S,{gap:6,children:t.map(function(e){return(0,c.Y)(o4,{id:e.id||"unknown",contents:e.contents||"",state:e.state||0},e.id||Math.random())})}):(0,c.Y)(eN.S,{color:"dimmer",children:(0,c.Y)(eL.EY,{color:"dimmer",children:"Initializing solution exploration..."})})})})}var o3=(0,no.x)({loading:[nl.wp.center,{marginLeft:"auto",marginRight:"auto"}],aspectRatio:[nl.wp.position.relative,nl.wp.height(0),{paddingBottom:"".concat(56.25,"%")}],image:[nl.wp.coverContainer,{"& > span":[nl.wp.borderRadius(4),nl.wp.border({color:ei.LU.outlineDimmer})]}]});function o7(e){var n=e.data.imageUrl;return n?(0,c.Y)(eN.S,{css:o3.aspectRatio,children:(0,c.Y)(eN.S,{css:o3.image,children:(0,c.Y)(tJ.A,{layout:"fill",src:n,alt:"Screenshot",objectFit:"cover"})})}):(0,c.Y)(eN.S,{css:o3.loading,children:(0,c.Y)(eM.A,{})})}var o6=t(9077),o8=(0,no.x)({wrapper:[nl.wp.height("100%")],terminalWrapper:[nl.wp.overflow("hidden"),{"& .xterm":[nl.wp.borderRadius(0,0,4,4)]}]});function o9(e){var n=e.data.data,t=e.openPane,r=(0,oz.V)(),i=null;n.isExecuting||(i=0===n.exitCode?(0,c.Y)(n_.A,{}):(0,c.Y)(nj.m_,{tooltip:"Command exited with: ".concat(n.exitCode),children:(0,c.Y)(t2.A,{})}));var o=!0===n.isExecuting,a=(0,c.Y)(eN.S,{css:o8.wrapper,style:{backgroundColor:null==r?void 0:r.background},children:o?(0,c.Y)(o6.A,{processId:n.processId,openPane:t,maxHeight:300,interactive:!1}):(0,c.Y)(ae,{output:n.output,openPane:t})});return(0,c.Y)(ng,{icon:(0,c.Y)(rf.A,{}),title:"$ ".concat(n.command),right:i,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:a})}function ae(e){var n=e.output,t=e.openPane;return 0===n.length?null:(0,c.Y)(eN.S,{css:o8.terminalWrapper,children:(0,c.Y)(oB.xd,{convertEol:!0,maxHeight:300,output:n,openPane:t})})}var an=(0,no.x)({wrapper:[nl.wp.height("100%")],terminalWrapper:[nl.wp.overflow("hidden"),{"& .xterm":[nl.wp.borderRadius(0,0,4,4)]}]});function at(e){var n,t,r=e.data.data,i=e.openPane,o=(0,oz.V)(),a=null;(null==(n=r.status)?void 0:n.$kind)==="exitCode"&&(a=0===r.status.exitCode?(0,c.Y)(n_.A,{}):(0,c.Y)(t2.A,{}));var l="\r"+r.command.replaceAll("\n","\r\n")+"\r\n";r.output&&(l+="\r\n"+r.output.replaceAll("\n","\r\n"));var s=(null==(t=r.status)?void 0:t.$kind)==="isExecuting";return(0,c.Y)(ng,{icon:(0,c.Y)(rW.A,{}),title:s?"Executing SQL query":"Executed SQL query",right:a,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:(0,c.Y)(eN.S,{css:an.wrapper,style:{backgroundColor:null==o?void 0:o.background},children:(0,c.Y)(ar,{output:l,openPane:i})})})}function ar(e){var n=e.output,t=e.openPane;return 0===n.length?null:(0,c.Y)(eN.S,{css:an.terminalWrapper,children:(0,c.Y)(oB.xd,{maxHeight:300,output:n,openPane:t})})}function ai(e){var n=e.data.deps,t=e.openPane,r=n.length>1?"".concat(n.length," system dependencies were installed:"):"A system dependency was installed:";return(0,c.Y)(ny,{icon:(0,c.Y)(oG.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:r,packageList:n,getPackageIcon:function(){return(0,c.Y)(oG.A,{})}})}function ao(e){var n=e.data.deps,t=e.openPane,r=n.length>1?"".concat(n.length," system dependencies were uninstalled:"):"A system dependency was uninstalled:";return(0,c.Y)(ny,{icon:(0,c.Y)(oG.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:r,packageList:n,getPackageIcon:function(){return(0,c.Y)(oG.A,{})}})}var aa=t(1035),al=t(15864),as=t(57399),ac=t(21472),au=t.n(ac);function ad(e){var n=e.data.data.tasks;return(0,c.Y)(ng,{icon:(0,c.Y)(al.A,{}),title:"Subtasks",renderChildrenOnlyWhenInView:!0,children:(0,c.Y)(eN.S,{p:8,gap:8,children:n.map(function(e){return(0,c.Y)(ap,{id:e.id||"",content:e.content||"",status:e.status||0,updated:e.updated||!1},e.id)})})})}function ap(e){var n=e.content,t=e.status;return(0,c.FD)(eN.S,{row:!0,gap:8,align:"start",clsx:au().taskItem,children:[(0,c.Y)(eN.S,{pt:4,children:function(){switch(t){case E.e1J.TASK_STATUS_COMPLETED:return(0,c.Y)(n_.A,{});case E.e1J.TASK_STATUS_IN_PROGRESS:return(0,c.Y)(aa.A,{});case E.e1J.TASK_STATUS_PENDING:return(0,c.Y)(as.A,{});default:return(0,c.Y)(rT.A,{})}}()}),(0,c.Y)(eN.S,{grow:1,shrink:1,children:(0,c.Y)(eL.EY,{multiline:!0,children:n})})]})}var af=t(61430);function ah(e){var n=e.data.modules,t=e.openPane,r=n.length>1?"".concat(n.length," system modules were installed:"):"A system module was installed:";return(0,c.Y)(ny,{icon:(0,c.Y)(oG.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:r,packageList:n,getPackageIcon:function(e){return(0,c.Y)(af.A,{module:{name:e}})}})}var am=t(9873),ag=t.n(am);function av(e){var n,t=e.url,r=e.favicon,i=e.title,o=e.snippet,a=!!i,l=!(!(n=r).startsWith("https://")&&!n.startsWith("http://")||n.includes("vertexaisearch.cloud.google.com"));return(0,c.FD)(eP.ui,{elevated:!0,clsx:ag().root,children:[a?(0,c.FD)(c.FK,{children:[(0,c.FD)(eN.S,{row:!0,gap:8,p:8,children:[l?(0,c.Y)(tJ.A,{src:r,alt:"Favicon",width:16,height:16}):null,(0,c.Y)(eL.EY,{multiline:!1,children:(0,c.Y)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:i})})]}),(0,c.Y)(is.a,{clsx:ag().divider})]}):null,(0,c.Y)(eP.ui,{p:8,clsx:ag().visitContent,gap:2,children:(0,c.Y)(r$.Ay,{className:ag().markdown,useRemarkGfm:!0,lineBreaks:!0,themed:!0,children:o})})]})}var ay=t(10327),aw=t(69389),ab=t.n(aw);function aS(e){var n=e.query,t=e.response,r=e.pageResults,i=(0,l._)((0,u.useState)(!1),2),o=i[0],a=i[1],s=t.length>400,d=s&&!o?t.slice(0,400)+" …":t;return(0,c.FD)(eP.ui,{elevated:!0,clsx:ab().root,children:[(0,c.Y)(eP.ui,{p:8,clsx:ab().heading,children:(0,c.Y)(eN.S,{shrink:!0,children:(0,c.Y)(eL.EY,{multiline:!1,children:n})})}),(0,c.Y)(is.a,{clsx:ab().divider}),(0,c.FD)(eP.ui,{py:8,px:12,gap:8,children:[(0,c.FD)(eN.S,{row:!0,align:"center",justify:"space-between",gap:8,children:[(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",children:"Web search results"}),s?(0,c.Y)(aY,{isExpanded:o,setIsExpanded:a}):null]}),(0,c.Y)(eN.S,{clsx:ab().resultText,gap:8,children:(0,c.Y)(n0.d2,{text:d})}),r.length>0?(0,c.FD)(c.FK,{children:[(0,c.Y)(is.a,{clsx:ab().divider}),(0,c.Y)(a_,{pageResults:r})]}):null]})]})}function aY(e){var n=e.isExpanded,t=e.setIsExpanded;return(0,c.Y)(eF.$n,{text:n?"Show less":"Show more",variant:"underlinedOnHover",size:"small",clsx:ab().showMoreLessButton,onClick:function(){return t(function(e){return!e})}})}function a_(e){var n=e.pageResults,t=(0,l._)((0,u.useState)(!1),2),r=t[0],i=t[1],o=n.length>5,a=o&&!r?n.slice(0,5):n;return(0,c.FD)(eN.S,{children:[(0,c.FD)(eN.S,{row:!0,align:"center",justify:"space-between",gap:8,style:{marginBottom:8},children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(ay.A,{color:ei.LU.foregroundDimmer}),(0,c.FD)(eL.EY,{variant:"small",color:"dimmer",children:[n.length," ",(0,ex.A)("source",n.length)]})]}),o?(0,c.Y)(aY,{isExpanded:r,setIsExpanded:i}):null]}),(0,c.Y)(eN.S,{gap:4,children:a.map(function(e){return(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(eN.S,{shrink:!0,children:(0,c.Y)("a",{className:ab().sourceLink,href:e.url,target:"_blank",rel:"noopener noreferrer",children:(0,c.Y)(eL.EY,{multiline:!1,clsx:ab().sourceLinkText,children:e.title})})}),(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",multiline:!1,children:new URL(e.url).hostname.replace("www.","")})]},e.url)})})]})}var aA=t(78502),aC=t(61556),ak=t(81740),ax=t(18974),aD=t(34883),aE=(0,no.x)({body:[nl.wp.height("100%"),nl.wp.minHeight("100%")]});function aR(e){var n=e.data,t=e.openPane,r=n.workflowName,i=n.state,o=(0,ak.If)(),a=(0,aA.T)(),l=(0,oz.V)(),s=(0,u.useMemo)(function(){if(!o)return null;var e=Object.values(o).filter(function(e){return e.workflow.name===r});return 0===e.length?null:e.sort(function(e,n){return n.startTime-e.startTime})[0]},[r,o]);if(i===E.qOk.IN_PROGRESS)return(0,c.Y)(eN.S,{p:8,align:"center",children:(0,c.Y)(eM.A,{})});var d=(0,c.Y)(eN.S,{css:aE.body,style:{backgroundColor:null==l?void 0:l.background},children:s&&a?(0,c.Y)(aC.A,{workflowRunState:s,currentUserId:a,openPane:t}):null});return(0,c.Y)(ng,{icon:n.restart?(0,c.Y)(aD.A,{}):(0,c.Y)(ax.A,{}),title:r,onOpenPane:function(){return t({type:"runnerOutput"})},renderChildrenOnlyWhenInView:!0,children:d})}var aI=t(75679),aT=t(48614),aF=t.n(aT);function aP(e){return 0===e.resultFileNames.length?(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",children:"No files found"}):(0,c.FD)(eN.S,{gap:4,px:4,children:[(0,c.FD)(eL.EY,{variant:"small",color:"dimmer",children:["Found ",(0,ex.A)("file",e.resultFileNames.length,!0)]}),(0,c.Y)(eN.S,{row:!0,gap:6,align:"start",clsx:aF().files,children:e.resultFileNames.map(function(n){return(0,c.Y)(eF.$n,{size:"small",onClick:function(){return e.openPane((0,aI.af)(n))},iconLeft:(0,c.Y)(ov.A,{size:12,path:n}),text:n,iconRight:(0,c.Y)(nd.A,{})},n)})})]})}var aL=t(68839),aU=t.n(aL),aN=(0,u.memo)(function(e){return(0,c.Y)(eN.S,{pb:8,children:(0,c.Y)(eP.ui,{elevated:!0,clsx:aU().surface,p:8,children:(0,c.Y)(n0.d2,{text:e.thoughts})})})});function aO(e){var n=e.data,t=e.openPane;switch(null==n?void 0:n.$kind){case"fileEditData":return(0,c.Y)(oU,{data:n,openPane:t});case"createFileData":return(0,c.Y)(ox,{data:n,openPane:t});case"readFileData":return(0,c.Y)(oJ,{data:n,openPane:t});case"readDirData":return(0,c.Y)(o$,{data:n});case"shellExecutionData":return(0,c.Y)(o9,{data:n,openPane:t});case"packagerInstallData":return(0,c.Y)(oj,{data:n,openPane:t});case"packagerUninstallData":return(0,c.Y)(oq,{data:n,openPane:t});case"systemDependencyInstallData":return(0,c.Y)(ai,{data:n,openPane:t});case"systemDependencyUninstallData":return(0,c.Y)(ao,{data:n,openPane:t});case"toolchainInstallData":return(0,c.Y)(ah,{data:n,openPane:t});case"screenshotData":return(0,c.Y)(o7,{data:n});case"workflowsStartToolData":case"workflowsRestartToolData":case"workflowsSetRunConfigToolData":return(0,c.Y)(aR,{data:n,openPane:t});case"createPostgresqlDatabaseData":return(0,c.Y)(oD,{openPane:t});case"sqlExecutionData":return(0,c.Y)(at,{data:n,openPane:t});case"webSearchData":return(0,c.Y)(aS,(0,a._)({},n.data));case"webPageVisitData":return(0,c.Y)(av,(0,a._)({},n.data));case"imageGenerationData":return(0,c.Y)(oH,(0,a._)({},n.data));case"searchFilesystemData":return(0,c.Y)(aP,{resultFileNames:n.resultFileNames,openPane:t});case"taskListData":return(0,c.Y)(ad,{data:n});case"samplingEvent":return(0,c.Y)(o5,{data:n});case"thoughts":return(0,c.Y)(aN,(0,a._)({},n));default:if((null==n?void 0:n.state)===E.qOk.IN_PROGRESS)return(0,c.Y)(aH,{});return null}}var aM=(0,no.x)({loading:[nl.wp.center]});function aH(){return(0,c.Y)(eN.S,{css:aM.loading,px:16,py:48,children:(0,c.Y)(eM.A,{})})}var aB=t(52220),az=t.n(aB);function aW(e){var n=e.summary,t=e.variant,r=e.color,i=e.hover,o=(0,u.useMemo)(function(){for(var e=n,t,r=/`([^`]+)`/g,i=[],o=0;null!==(t=r.exec(e));)o<t.index&&i.push({text:e.substring(o,t.index),isCode:!1}),i.push({text:t[1],isCode:!0}),o=t.index+t[0].length;return o<e.length&&i.push({text:e.substring(o),isCode:!1}),i},[n]);return(0,c.Y)(eL.EY,{multiline:!1,variant:t,color:r,showTooltipOnTruncate:!0,css:i?{"&:hover":{color:ei.LU.foregroundDefault}}:void 0,children:o.map(function(e,n){return e.isCode?(0,c.Y)("span",{className:az().codeText,children:e.text},n):(0,c.Y)(u.Fragment,{children:e.text},n)})})}var aG=t(57864),aV=t.n(aG);function aZ(e){var n=e.toolDataKind,t=e.summary;return(0,c.FD)(eN.S,{row:!0,align:"center",gap:6,style:{flex:"1 1 auto"},children:[(0,c.Y)(od.u,{color:ei.LU.foregroundDimmer,kind:n}),(0,c.Y)(eN.S,{align:"start",grow:!0,shrink:!0,children:(0,c.Y)(aW,{summary:t,color:"dimmer"})})]})}var aj=(0,u.memo)(function(e){var n;switch(null==(n=e.data)?void 0:n.$kind){case"readDirData":case"memoryCompressionData":return(0,c.Y)(a$,{toolDataKind:e.data.$kind,summary:e.summary});case"readFileData":var t=e.data.data.filePath;return(0,c.Y)(aK,(0,eI._)((0,a._)({},e),{label:"Open file",onClick:function(){e.openPane((0,aI.af)(t))}}));case"setupObjectStorageData":return(0,c.Y)(aK,(0,eI._)((0,a._)({},e),{label:"Open Object Storage",onClick:function(){e.openPane({type:"objectStorage"})}}));default:return(0,c.Y)(aq,(0,a._)({},e))}}),aq=(0,u.memo)(function(e){var n="imageGenerationData"===e.toolDataKind,t=(0,l._)((0,u.useState)(n),2),r=t[0],i=t[1],o=e.eventId,a=e.sessionId,s=e.toolDataKind,d=(0,u.useCallback)(function(){i(function(e){return!e}),(0,nw.p)({action:"event_item_expanded",eventId:o,sessionId:a,toolDataKind:s})},[a,o,s]);return(0,c.FD)(eN.S,{gap:6,children:[(0,c.FD)(eN.S,{css:rK.b.nofill,px:4,tag:"button",row:!0,gap:6,align:"center",justify:"space-between",onClick:d,children:[(0,c.Y)(aZ,{toolDataKind:e.toolDataKind,summary:e.summary}),(0,c.Y)(tl.A,{color:ei.LU.foregroundDimmer,rotate:180*!!r})]}),r?(0,c.Y)(aO,{data:e.data,openPane:e.openPane}):null]})});function aK(e){return(0,c.FD)(eN.S,{px:4,clsx:aV().button,css:rK.b.nofill,tag:"button",row:!0,gap:6,align:"center",justify:"space-between",onClick:e.onClick,children:[(0,c.Y)(aZ,{toolDataKind:e.toolDataKind,summary:e.summary}),(0,c.FD)(eN.S,{row:!0,gap:6,align:"center",children:[(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",clsx:aV().label,children:e.label}),(0,c.Y)(nd.A,{})]})]})}function a$(e){return(0,c.Y)(eN.S,{px:4,row:!0,gap:6,align:"center",justify:"space-between",children:(0,c.Y)(aZ,{toolDataKind:e.toolDataKind,summary:e.summary})})}var aJ=t(57855),aQ=t(43680),aX=t(12421),a0="\n\n---------\n\n",a1=t(40338),a2=t(94324),a4=t(64054),a5=t.n(a4),a3={extendedThinking:{title:"Extended thinking",description:"About 1.25x increase in work cost"},highPowerModel:{title:"High power model",description:"About 5x increase in work cost"}};function a7(e){var n=a3[e.type];return(0,c.FD)(eN.S,{gap:4,children:[(0,c.Y)(eL.EY,{variant:"small",clsx:a5().tooltipTitle,children:n.title}),(0,c.Y)(eL.EY,{variant:"small",children:n.description})]})}var a6=t(24019),a8=t.n(a6);function a9(e){var n,t=e.userId,r=e.created,i=e.children,o=e.agentConfig,a=null!=(n=null==o?void 0:o.thinkingEnabled)&&n,l=(null==o?void 0:o.modelProfile)===E.Fje.MODEL_PROFILE_ADVANCED;return(0,c.FD)(eN.S,{py:16,justify:"end",pl:32,row:!0,gap:8,"data-event-type":"user-message","data-cy":"user-message",children:[(0,c.FD)(eN.S,{clsx:a8().userMessageMain,shrink:!0,align:"end",gap:6,children:[i,(0,c.FD)(eN.S,{row:!0,gap:8,align:"center",children:[l?(0,c.Y)(nj.m_,{tooltip:(0,c.Y)(a7,{type:"highPowerModel"}),children:(0,c.Y)(rC.A,{size:12,color:ei.LU.foregroundDimmest})}):null,a?(0,c.Y)(nj.m_,{tooltip:(0,c.Y)(a7,{type:"extendedThinking"}),children:(0,c.Y)(rA.A,{size:12,color:ei.LU.foregroundDimmest})}):null,r?(0,c.Y)(eN.S,{row:!0,gap:4,children:(0,c.Y)(eN.S,{children:(0,c.Y)(eU.Dc,{live:!0,date:r,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized"})})}):null]})]}),(0,c.Y)(eN.S,{className:a8().avatar,pt:6,children:(0,c.Y)(a2.H,{id:t,showAvatarOnly:!0})})]})}var le=(0,u.memo)(function(e){var n=e.userId,t=e.message,r=e.attachments,i=e.created,o=e.acknowledged,a=e.readFile,l=e.targetedElement,s=e.openPane,u=e.agentConfig,d=t.includes(a0)?t.split(a0):[t];return(0,c.FD)(a9,{userId:n,created:i,agentConfig:u,children:[a?(0,c.Y)(ln,{attachments:r,readFile:a}):null,d.map(function(e,n){return(0,c.Y)(lt,{message:e.trim(),acknowledged:o,targetedElement:0===n?l:void 0,openPane:s},n)})]})});function ln(e){var n=e.attachments,t=e.readFile;return 0===n.length?null:(0,c.Y)(eN.S,{clsx:a8().userMessageAttachments,children:(0,c.Y)(aJ.A,{fileAttachments:n.map(function(e){return(0,c.Y)(aQ.m1,{readFile:t,attachment:e,getAttachmentTypeDisclaimer:(0,aX.F)({aiName:(0,ij.Nn)({capitalizeFirstChar:!0})})},e.path)})})})}function lt(e){var n=e.message,t=e.acknowledged,r=e.targetedElement,i=e.openPane;return n?(0,c.Y)(nj.m_,{tooltip:"The agent is wrapping up its current step, and will respond shortly",isDisabled:t,children:(0,c.FD)(eP.ui,{clsx:a8().userMessageSurface,elevated:!0,"data-acknowledged":t,px:8,py:6,children:[(0,c.Y)(n0.d2,{text:n,messageState:E.qOk.COMPLETE}),r?(0,c.Y)(a1.l,{targetedElement:r,openPane:i}):null]})}):null}var lr=t(11473),li=t.n(lr),lo=(0,u.memo)(function(e){var n,t,r,i=e.openPane,s=e.openPip,d=(0,m.Rj)(function(){return e.data.select(function(e){return e},X())},[e.data]),p=(0,u.useCallback)(function(e){return i({type:"git",data:{mode:{type:e6.C.COMMIT,hash:e}}})},[i]),f=(E=e.secrets.replaceAllExternalSecrets,R=(0,y.A)(),I=(0,l._)((0,e9.WM)(R,E),1)[0],T=(0,u.useCallback)(function(e){return I({variables:{input:{resourceId:R,resourceType:e8.U97.Repl,secrets:e}}})},[I,R]),F=(0,l._)((0,e9.Nz)(R,E),1)[0],{linkSecrets:T,unlinkSecrets:(0,u.useCallback)(function(e){return F({variables:{input:{resourceId:R,resourceType:e8.U97.Repl,ids:e}}})},[F,R])}),g=f.linkSecrets,v=f.unlinkSecrets,w=(0,h.Ik)(),b=e7(),S=b.renameCommit,Y=b.findCommit,_=(0,h.xe)(),A=e.isDesktopOrTabletAgentPresentationCentered,C=e.isDesktopLayoutTransitionInProgress,k=e.rapidBuildState,x=e.isInitialSession,D=A||C;if(!d)return(0,c.Y)(eN.S,{children:"No data found for event"});switch(d.type){case"planProposal":var E,R,I,T,F,P,L,U=x&&(0,eQ.l)(d.stackBlueprint),N=_?d.planId===_:d.isLatestPlan;return(0,c.Y)(eN.S,{clsx:[li().eventContainer,(L={},(0,o._)(L,li().eventDefaultWidth,D&&(!N||!U)),(0,o._)(L,li().eventExpandedWidth,D&&N&&U),L)],children:(0,c.Y)(oo,(0,eI._)((0,a._)({},d),{expanded:N,steps:d.step.subSteps,planApprovalState:w,rapidBuildState:k,isMVPPlan:x,planIterationVersion:null!=(P=e.planVersions.get(d.planId))?P:0,supportsVisualPreview:U,areMultiplePlanVersionsAvailable:e.planVersions.size>1,openPip:s,hasFullWidthStatusBar:e.hasFullWidthStatusBar}))});case"userMessage":return(0,c.Y)(eN.S,{clsx:[li().userMessage,li().eventContainer,(n={},(0,o._)(n,li().eventDefaultWidth,D),(0,o._)(n,li().fullWidthStatusBar,e.hasFullWidthStatusBar),n)],children:(0,c.Y)(le,{userId:d.userId,message:d.message,attachments:d.uploadedFiles,acknowledged:d.acknowledged,created:d.created,readFile:e.readFile,targetedElement:d.targetedElement,openPane:e.openPane,agentConfig:d.agentConfig})});case"agentMessage":return(0,c.Y)(eN.S,{clsx:[li().eventContainer,(0,o._)({},li().eventDefaultWidth,D)],children:(0,c.Y)(n5,{eventId:d.id,state:d.state,message:d.message,requestedSecrets:d.requestedSecrets,waitingOnUser:d.waitingOnUser,agentState:e.agentState,sessionId:d.sessionId,openPane:e.openPane,secrets:e.secrets,isReadOnly:e.isReadOnly,isInCenteredPlanningLayout:A&&x,hasFullWidthStatusBar:e.hasFullWidthStatusBar,sendAskUserForActionResponse:e.sendAskUserForActionResponse,linkSecrets:g,unlinkSecrets:v})});case"setupImport":return(0,c.Y)(eN.S,{clsx:[li().eventContainer,(0,o._)({},li().eventDefaultWidth,D)],children:(0,c.Y)(eJ,{sessionId:d.sessionId,importSource:d.importSource,state:d.state})});case"agentToolUse":return(0,c.Y)(eN.S,{clsx:[li().agentAction,li().eventContainer,(0,o._)({},li().eventDefaultWidth,D)],children:(0,c.Y)(aj,{toolDataKind:d.toolDataKind,summary:d.summary,data:d.data,sessionId:d.sessionId,eventId:d.eventId,openPane:e.openPane})});case"checkpoint":return(0,c.Y)(eN.S,{clsx:[li().eventContainer,(0,o._)({},li().eventDefaultWidth,D)],children:(0,c.Y)(rq,{openPane:i,onOpenCommit:p,onSessionChange:e.onSessionChange,checkpoint:(0,eI._)((0,a._)({},d),{title:null!=(r=null==(t=Y(d.commitId))?void 0:t.customSubject)?r:d.title}),onRenameTitle:S,hasFullWidthStatusBar:e.hasFullWidthStatusBar})});case"suggestDeploy":return(0,c.Y)(eN.S,{clsx:[li().eventContainer,(0,o._)({},li().eventDefaultWidth,D)],children:(0,c.Y)(ou,{openPane:i})});case"askUserForAction":return(0,c.Y)(eN.S,{clsx:[li().eventContainer,(0,o._)({},li().eventDefaultWidth,D)],children:(0,c.Y)(tv,{eventId:d.id,newFeatureRequests:d.newFeatureRequests,sendAskUserForActionResponse:e.sendAskUserForActionResponse,message:d.message,state:d.state})});case"revert":return(0,c.Y)(eN.S,{clsx:[li().eventContainer,(0,o._)({},li().eventDefaultWidth,D)],children:(0,c.Y)(eW,{event:d,onSessionChange:e.onSessionChange})});case"error":return(0,c.Y)(eN.S,{clsx:[li().eventContainer,(0,o._)({},li().eventDefaultWidth,D)],children:(0,c.Y)(rX,{message:d.message})});case"tipRecommendation":return e.tipData?(0,c.Y)(eN.S,{clsx:[li().eventContainer,(0,o._)({},li().eventDefaultWidth,D)],children:(0,c.Y)(tf,{event:d,tipData:e.tipData,bonsaiTourTipInfo:e.bonsaiTourTipInfo,openPane:i,onNewSession:e.onNewSession})}):null;default:(0,eT.A)(d)}}),la=t(77915),ll=t(73806),ls=(0,no.x)({expandButton:[nl.wp.color.foregroundDimmest,nl.wp.px(6),nl.wp.height(28),nl.wp.hover(nl.wp.color.foregroundDefault),nl.wp.border({width:0}),{svg:{marginRight:-2}}]});function lc(e){return(0,c.Y)(eF.$n,{css:ls.expandButton,variant:"nofill",alignment:"start",onClick:e.onClick,size:e.small?"small":"default",iconLeft:e.isExpanded?(0,c.Y)(la.A,{}):(0,c.Y)(ll.A,{}),text:e.isExpanded?"Show less":"Show ".concat(e.hiddenItemsCount," more")})}function lu(e){var n=[],t=!e.some(function(e){return"planProposal"===e.value.type}),r=null,i=null,o=null,l=-1,s=!0,c=!1,u=void 0;try{for(var d,p=e[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;if("planProposal"!==f.value.type||t||(t=!f.value.requiresApproval),"agentToolUse"===f.value.type&&(null!=o||(o=[]),o.push(f)),"userMessage"===f.value.type&&r&&(i&&(lh(r,i,o),o=null,i=null),n.push.apply(n,(0,ek._)(r)),r=null),!r){if(r=[],!t||ld(f.value)){"userMessage"===f.value.type&&(l=n.length),r.push({type:"event",id:f.id,observable:f.observable});continue}i=lp(f.id);var h={id:f.id,observable:f.observable};i.items.push("agentToolUse"===f.value.type?{type:"toolUseGroup",events:[h]}:(0,a._)({type:"event"},h)),lf(i,f.value);continue}if(!t||ld(f.value)){i&&(lh(r,i,o),o=null,i=null),r.push({type:"event",id:f.id,observable:f.observable});continue}i||(i=lp(f.id));var m={id:f.id,observable:f.observable};if("agentToolUse"===f.value.type){var g=i.items[i.items.length-1];(null==g?void 0:g.type)==="toolUseGroup"?g.events.push(m):i.items.push({type:"toolUseGroup",events:[m]}),lf(i,f.value);continue}lf(i,f.value),i.items.push((0,a._)({type:"event"},m))}}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}return r&&(i&&(lh(r,i,o),o=null,i=null),n.push.apply(n,(0,ek._)(r))),{result:n,lastUserMessageIndex:l}}function ld(e){switch(e.type){case"userMessage":case"checkpoint":case"planProposal":case"suggestDeploy":case"tipRecommendation":return!0;default:return!1}}function lp(e){return{type:"activityGroup",id:e,items:[],count:{message:0,toolUse:0}}}function lf(e,n){var t=e.count;switch(n.type){case"agentMessage":t.message++,e.summary||(e.summary=n.message);break;case"agentToolUse":t.toolUse++}}function lh(e,n,t){var r,i=(r=n.items).some(function(e){return"toolUseGroup"===e.type})?null:r;i?e.push.apply(e,(0,ek._)(i)):(null==t?void 0:t.length)===1&&1===n.items.length?e.push.apply(e,(0,ek._)(t.map(function(e){return{type:"event",id:e.id,observable:e.observable}}))):(!n.summary&&t&&(n.summary=function(e){var n=[],t=new Map,r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;if("agentToolUse"===c.type){var u=t.get(c.toolDataKind);u?u.push(c):t.set(c.toolDataKind,[c])}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var d=!0,p=!1,f=void 0;try{for(var h,m=t.entries()[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=(0,l._)(h.value,2),v=g[0],y=g[1];switch(v){case"createFileData":n.push("created ".concat((0,ex.A)("file",y.length,!0)));break;case"fileEditData":n.push("edited ".concat((0,ex.A)("file",y.length,!0)));break;case"packagerInstallData":var w=0,b=!0,S=!1,Y=void 0;try{for(var _,A=y[Symbol.iterator]();!(b=(_=A.next()).done);b=!0){var C=_.value.data;(null==C?void 0:C.$kind)==="packagerInstallData"&&(w+=C.installed.length)}}catch(e){S=!0,Y=e}finally{try{b||null==A.return||A.return()}finally{if(S)throw Y}}n.push("installed ".concat((0,ex.A)("package",w,!0)));break;case"createPostgresqlDatabaseData":n.push("created a database");break;case"setupObjectStorageData":n.push("set up Object Storage");break;case"screenshotData":n.push("took ".concat((0,ex.A)("screenshot",y.length,!0)))}}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}return n.length?n.join(", "):void 0}(t.map(function(e){return e.value}))),e.push(n))}var lm=t(47090);function lg(e){var n,t=e.contents.contents;if((null==t?void 0:t.$kind)!=="agentTimelineEventContents")return null;var r=e.state===E.qOk.IN_PROGRESS,i=t.agentTimelineEventContents,o=i.toolName,a=i.toolData;if("screenshot_tool"===o)return"".concat(r?"Taking":"Took"," a screenshot");switch(null==a?void 0:a.$kind){case"deployData":return"Suggested deploying project";case"createPostgresqlDatabaseData":return"Created PostgreSQL database";case"sqlExecutionData":return"".concat(r?"Executing":"Executed"," SQL query `").concat(a.sqlExecutionData.command,"`");case"fileEditData":return"".concat(r?"Editing":"Edited"," `").concat(a.fileEditData.filePath,"`");case"createFileData":return"".concat(r?"Creating":"Created"," `").concat(a.createFileData.filePath,"`");case"readFileData":return"".concat(r?"Reading":"Opened"," `").concat(a.readFileData.filePath,"`");case"readDirData":var l=a.readDirData.path;return"."===l&&(l="home"),"".concat(r?"Reading":"Opened"," `").concat(l,"` directory");case"shellExecutionData":return"".concat(r?"Executing":"Executed"," `").concat(a.shellExecutionData.command,"`");case"toolchainInstallData":return"".concat(r?"Adding":"Added"," support for ").concat(a.toolchainInstallData.modules.map(function(e){return"`".concat(e,"`")}).join(", "));case"packagerInstallData":var s=a.packagerInstallData.inputPackages;if(!r){if(0===s.length)return"Installed dependencies";return"Installed ".concat(s.map(function(e){return"`".concat(e,"`")}).join(", "))}if(0===s.length)return"Installing packages…";if(0===s.length)return"Installing dependencies…";return"Installing ".concat(s.map(function(e){return"`".concat(e,"`")}).join(", "),"…");case"packagerUninstallData":var c=a.packagerUninstallData.inputPackages;return"Uninstalled ".concat(c.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyInstallData":return"Installed ".concat(a.systemDependencyInstallData.deps.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyUninstallData":return"Uninstalled ".concat(a.systemDependencyUninstallData.deps.join(", "));case"searchFileData":return"".concat(r?"Searching":"Searched",' "').concat(a.searchFileData.filePath,'" for "').concat(a.searchFileData.query,'"');case"searchFilesystemData":return"".concat(r?"Searching":"Searched",' for "').concat(a.searchFilesystemData.queryDescription,'"');case"screenshotData":return"".concat(r?"Taking":"Took"," a screenshot");case"agentPlanStepBegin":case"planProgressData":case"presentResultsToolData":case"deployConfigData":return null;case"workflowsStartToolData":return"Started `".concat(a.workflowsStartToolData.name,"`");case"workflowsRestartToolData":return"Restarted `".concat(a.workflowsRestartToolData.name,"`");case"workflowsStopToolData":return"Stopped `".concat(a.workflowsStopToolData.name,"`");case"workflowsSetRunConfigToolData":var u=a.workflowsSetRunConfigToolData,d=u.name,p=u.command;if(r||0===d.length||0===p.length)return"Configuring run…";return"Configured `".concat(d,"` to run `").concat(p,"`");case"workflowsRemoveRunConfigToolData":return"Removed configuration for `".concat(a.workflowsRemoveRunConfigToolData.name,"`");case"blueprintsSetup":var f=[],h=!0,m=!1,g=void 0;try{for(var v,y=a.blueprintsSetup.blueprintData[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var w=v.value;""!==w.displayName.trim()&&f.push(w.displayName)}}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}if(0===f.length)return null;return"Integrating with ".concat(f.map(function(e){return"`".concat(e,"`")}).join(", "));case"webSearchData":if(e.state===E.qOk.IN_PROGRESS)return"Searching the web…";return'Searched the web for "'.concat(a.webSearchData.query,'"');case"taskListData":var b=a.taskListData.tasks;if(!(b.length>0&&b.every(function(e){return e.status===E.e1J.TASK_STATUS_PENDING})))return null;if(e.state===E.qOk.IN_PROGRESS)return"Organizing objective into subtasks…";return"Organized subtasks";case"samplingEvent":var S=a.samplingEvent.trajectories.length;if(e.state===E.qOk.IN_PROGRESS)return"Exploring ".concat(S," potential solutions…");return"Explored ".concat(S," potential solutions");case"webPageVisitData":return"Visited ".concat(a.webPageVisitData.url);case"imageGenerationData":return(null==(n=a.imageGenerationData.imageDescription)?void 0:n.trim())?"Generated an image of ".concat(a.imageGenerationData.imageDescription.toLowerCase(),"."):"Generated image.";case"memoryCompressionData":if(e.state===E.qOk.IN_PROGRESS)return"Optimizing ".concat(ij.g$," memory…");return"Optimized ".concat(ij.g$," memory");case"thoughts":var Y=a.thoughts.summary;if(e.state===E.qOk.IN_PROGRESS)return Y||"Thinking";var _=Math.max(1,Math.round(a.thoughts.totalTimeTakenMs/1e3)),A=null!=Y?Y:"Finished thinking";if(_>3){var C=(0,lm.A)({seconds:_});return"".concat(A," (").concat(C,")")}return A;case"setupObjectStorageData":return"Created a new Object Storage bucket";default:return r?"Working…":null}}var lv=new Set(["agentPlanStepBegin","blueprintsSetup","createFileData","createPostgresqlDatabaseData","deployConfigData","fileEditData","memoryCompressionData","readFileData","readDirData","samplingEvent","setupObjectStorageData","shellExecutionData","toolchainInstallData","packagerInstallData","packagerUninstallData","systemDependencyInstallData","systemDependencyUninstallData","screenshotData","searchFileData","searchFilesystemData","sqlExecutionData","taskListData","webSearchData","webPageVisitData","workflowsStartToolData","workflowsRestartToolData","workflowsStopToolData","workflowsSetRunConfigToolData","workflowsRemoveRunConfigToolData","imageGenerationData","thoughts"]);function ly(e){var n,t=(null==(n=e.optionType)?void 0:n.$kind)==="secretRequestAction"?e.optionType.secretRequestAction.secrets:void 0;return(null==t?void 0:t.length)?t:void 0}function lw(e){if(e.state===E.qOk.IN_PROGRESS)return!1;var n=e.contents.contents;if(!(0,P.VF)(n,"agentTimelineEventContents"))return!1;var t=n.agentTimelineEventContents,r=t.toolData;return"user_response"===t.toolName&&(null==r?void 0:r.$kind)==="messageData"}var lb={direction:"reverse",state:{revert:null,acknowledged:new Set,approvedPlanId:null,didSeeRenderedEvent:!1,selectedFeatureIds:new Set,latestPlanId:null},transformer:function(e,n){var t=n.revert;(null==(s=n.revert)?void 0:s.eventIdBeforeRevert)===e.id&&(n.revert=null);var r=e.contents.contents,i=null;switch(null==r?void 0:r.$kind){case"sessionCreationEventContents":case"contextComplexityEventContents":return;case"requestFeatureAddData":r.requestFeatureAddData.type===E.vqu.REQUEST_FEATURE_ADD_TYPE_NEON_DATABASE&&(i={type:"userMessage",message:"Please help me add a database to my app.",acknowledged:!0,created:e.created,attachedUrls:[],uploadedFiles:[],userId:Number(e.sender.id)});break;case"agentPlanEventContents":var o=r.agentPlanEventContents;if(o.requiresApproval&&n.approvedPlanId===o.planId||o.initialCommitId)return;o.requiresApproval||(n.approvedPlanId=o.planId);var l=!1;null==n.latestPlanId&&(l=!0,n.latestPlanId=o.planId),i={type:"planProposal",objective:o.objective.description,step:o.step,stackBlueprint:o.stackBlueprint,sessionId:e.sessionId,planId:o.planId,isLatestPlan:l,requiresApproval:o.requiresApproval,designReferenceFilePaths:o.designReferenceFilePaths,eventState:e.state,eventCreated:e.created,eventUpdated:e.updated};break;case"revertEventContents":var s,c,u=r.revertEventContents.eventIdBeforeRevert;if((null==(c=n.revert)?void 0:c.eventIdBeforeRevert)===u){n.revert.reverterId=e.sender.id,n.revert.commitId=r.revertEventContents.commitId;return}n.revert={eventIdBeforeRevert:u,hiddenEvents:0,status:"inflight",reverterId:e.sender.id};return;case"messageEventContents":if(e.sender.type===E.utd.USER)i={type:"userMessage",userId:Number(e.sender.id),message:r.messageEventContents.content,uploadedFiles:r.messageEventContents.uploadedFiles,attachedUrls:r.messageEventContents.attachedUrls,created:null!=(d=e.created)?d:null,acknowledged:n.acknowledged.has(e.id),targetedElement:r.messageEventContents.targetedElement,agentConfig:r.messageEventContents.agentConfig};else{var d,p,f,h=ly(r.messageEventContents.agentAction),m=!n.didSeeRenderedEvent&&(lw(e)||!!h);i={type:"agentMessage",id:e.id,message:null!=(f=null==r||null==(p=r.messageEventContents)?void 0:p.content)?f:"",requestedSecrets:h,sessionId:e.sessionId,state:e.state,waitingOnUser:m}}break;case"agentAskUserForActionRequest":var g,v,y,w,b,S,Y=r.agentAskUserForActionRequest.request;if((null==Y?void 0:Y.$kind)==="userSecretsRequest"){var _=!n.didSeeRenderedEvent,A=Y.userSecretsRequest.secrets;i={type:"agentMessage",id:e.id,message:Y.userSecretsRequest.message,requestedSecrets:(null==A?void 0:A.length)?A:void 0,sessionId:e.sessionId,state:e.state,waitingOnUser:_};break}var C=(null==(g=r.agentAskUserForActionRequest.request)?void 0:g.$kind)==="nextStepRequest"?null==(y=r.agentAskUserForActionRequest.request)||null==(v=y.nextStepRequest)?void 0:v.newFeatureRequests:void 0;C&&(C=C.map(function(e){return(0,eI._)((0,a._)({},e),{isSelected:n.selectedFeatureIds.has(e.id)})}));var k=(null==(w=r.agentAskUserForActionRequest.request)?void 0:w.$kind)==="markTaskCompleteRequest"?null==(S=r.agentAskUserForActionRequest.request)||null==(b=S.markTaskCompleteRequest)?void 0:b.taskId:void 0;i={type:"askUserForAction",message:r.agentAskUserForActionRequest.message,state:e.state,newFeatureRequests:C,id:e.id,completedTaskId:k};break;case"agentAskUserForActionResponse":var x,D=r.agentAskUserForActionResponse.response,R=(null==D?void 0:D.$kind)==="nextStepResponse"&&(null==(x=D.nextStepResponse.response)?void 0:x.$kind)==="newFeatureResponse"?D.nextStepResponse.response.newFeatureResponse:null;if(R)return n.selectedFeatureIds.add(R.selectedFeatureId),{type:"userMessage",userId:Number(e.sender.id),message:R.featureName,uploadedFiles:[],attachedUrls:[],created:e.created,acknowledged:!0};break;case"setupImportedProjectEventContents":var I=n.didSeeRenderedEvent;i={type:"setupImport",sessionId:e.sessionId,importSource:r.setupImportedProjectEventContents.importSource,state:I?E.qOk.COMPLETE:E.qOk.IN_PROGRESS};break;case"tipRecommendation":var T=r.tipRecommendation;i={type:"tipRecommendation",id:e.id,sessionId:e.sessionId,created:e.created,tip:{id:T.tipId,title:T.title,recommendedReason:T.recommendedReason}};break;case"agentTimelineEventContents":if(e.error.message){i={type:"error",message:e.error.message};break}var F=r.agentTimelineEventContents.toolData;switch(null==F?void 0:F.$kind){case"messageData":var P=ly(F.messageData.agentAction),L=!n.didSeeRenderedEvent&&(lw(e)||!!P);i={type:"agentMessage",id:e.id,message:F.messageData.content,requestedSecrets:P,sessionId:e.sessionId,state:e.state,waitingOnUser:L};break;case"acknowledgeUserMessage":var U=F.acknowledgeUserMessage.eventIds,N=!0,O=!1,M=void 0;try{for(var H,B=U[Symbol.iterator]();!(N=(H=B.next()).done);N=!0){var z=H.value;n.acknowledged.add(z)}}catch(e){O=!0,M=e}finally{try{N||null==B.return||B.return()}finally{if(O)throw M}}break;case"commitData":i={type:"checkpoint",title:F.commitData.description.split("\n")[0],screenshotUrl:F.commitData.screenshotUrl,commitId:F.commitData.commitId,isPaid:F.commitData.billingRate===E.pSr.NORMAL,created:e.created,sessionId:e.sessionId,eventId:e.id,author:F.commitData.author,revert:null!=t?t:void 0,usageCents:F.commitData.usageCents,workDurationSeconds:F.commitData.workDurationSeconds,addedLinesOfCode:F.commitData.addedLinesOfCode,removedLinesOfCode:F.commitData.removedLinesOfCode,toolCalls:F.commitData.toolCalls,numLocRead:F.commitData.numLocRead,numFilesRead:F.commitData.numFilesRead,triggerReason:F.commitData.triggerReason,capabilityUsage:F.commitData.capabilityUsage,ubbV2:F.commitData.ubbV2,refunded:F.commitData.refunded};break;case"revertData":return n.revert={eventIdBeforeRevert:F.revertData.eventIdBeforeRevert,hiddenEvents:0,revertedAt:e.created,status:F.revertData.status===E.TB3.REVERT_DATA_STAGE_COMPLETE?"completed":"inflight"},i={type:"revert",status:F.revertData.status,revertedAt:e.created,eventId:e.id,originalSessionId:F.revertData.originalSessionId,checkpointTitle:F.revertData.checkpointTitle};case"deployData":i={type:"suggestDeploy"};break;default:if(!(null==F?void 0:F.$kind)||!lv.has(null==F?void 0:F.$kind)||e.state===E.qOk.IN_PROGRESS)break;var W=lg(e);if(!W)break;var G=function(e){if(!e)return null;if(e.error.type!==E.fqQ.EVENT_ERROR_TYPE_UNKNOWN)return{$kind:"error",error:e.error};var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents.toolData,r=lg(e),i={$kind:null,summary:r,state:e.state};switch(null==t?void 0:t.$kind){case"fileEditData":var o=null==t?void 0:t.fileEditData,a=null==o?void 0:o.filePath,l=null==o?void 0:o.diff;if(void 0===a||void 0===l)return i;return{$kind:"fileEditData",state:e.state,path:a,diff:l,summary:r};case"createFileData":var s=null==t?void 0:t.createFileData,c=null==s?void 0:s.filePath,u=null==s?void 0:s.content;if(void 0===c||void 0===u)return i;return{$kind:"createFileData",content:u,path:c,summary:r};case"shellExecutionData":return{$kind:"shellExecutionData",data:t.shellExecutionData,summary:r};case"readFileData":return{$kind:"readFileData",data:t.readFileData,summary:r};case"readDirData":return{$kind:"readDirData",data:t.readDirData,summary:r};case"packagerInstallData":var d=t.packagerInstallData,p=d.inputLanguage,f=d.inputPackages,h=d.output,m=d.isExecuting,g=d.processId;if(void 0===p||void 0===f)return i;return{$kind:"packagerInstallData",state:e.state,language:p,installed:f,output:void 0===h?void 0:h,isExecuting:void 0!==m&&m,processId:void 0===g?void 0:g,summary:r};case"packagerUninstallData":var v=t.packagerUninstallData;return{$kind:"packagerUninstallData",language:v.inputLanguage,uninstalled:v.inputPackages,summary:r};case"systemDependencyInstallData":var y=t.systemDependencyInstallData.deps;if(void 0===y)return i;return{$kind:"systemDependencyInstallData",deps:y,summary:r};case"systemDependencyUninstallData":var w=t.systemDependencyUninstallData.deps;if(void 0===w)return i;return{$kind:"systemDependencyUninstallData",deps:w,summary:r};case"toolchainInstallData":return{$kind:"toolchainInstallData",modules:t.toolchainInstallData.modules,summary:r};case"screenshotData":return{$kind:"screenshotData",imageUrl:t.screenshotData.imageUrl,summary:r};case"planProgressData":case"agentPlanStepBegin":case"workflowsStopToolData":case"workflowsGetOutputToolData":case"workflowsRemoveRunConfigToolData":return null;case"workflowsStartToolData":return{$kind:t.$kind,workflowName:t.workflowsStartToolData.name,state:e.state,summary:r};case"workflowsRestartToolData":return{$kind:t.$kind,workflowName:t.workflowsRestartToolData.name,state:e.state,restart:!0,summary:r};case"workflowsSetRunConfigToolData":return{$kind:t.$kind,workflowName:t.workflowsSetRunConfigToolData.name,state:e.state,summary:r};case"deployData":return{$kind:t.$kind,summary:r,result:t.deployData};case"presentResultsToolData":return{$kind:t.$kind,summary:r,result:t.presentResultsToolData};case"createPostgresqlDatabaseData":case"memoryCompressionData":return{$kind:t.$kind,summary:r};case"sqlExecutionData":return{$kind:t.$kind,data:t.sqlExecutionData,summary:r};case"webSearchData":return{$kind:t.$kind,data:t.webSearchData,summary:r};case"webPageVisitData":return{$kind:t.$kind,data:t.webPageVisitData,summary:r};case"imageGenerationData":return{$kind:t.$kind,data:t.imageGenerationData,summary:r};case"searchFilesystemData":var b=t.searchFilesystemData.resultFileNames;return b.length?{$kind:t.$kind,resultFileNames:b,summary:r}:null;case"taskListData":return{$kind:t.$kind,data:t.taskListData,summary:r};case"samplingEvent":return{$kind:t.$kind,data:t.samplingEvent,summary:r};case"thoughts":return{$kind:t.$kind,thoughts:t.thoughts.thoughts};case"setupObjectStorageData":return{$kind:t.$kind,summary:r,bucketId:t.setupObjectStorageData.bucketId,bucketName:t.setupObjectStorageData.bucketName};default:return i}}(e);i={type:"agentToolUse",sessionId:e.sessionId,eventId:e.id,toolDataKind:F.$kind,summary:W,data:G}}}if(i)return n.didSeeRenderedEvent=!0,i}};function lS(e){return(0,u.useCallback)(function(n){if(!e)return Promise.reject(Error("Session is null, cannot send user action response"));var t=null;switch(n.type){case"nextStepResponse":(0,nw.p)({action:"suggested_feature_selected",sessionId:e.id}),t={$kind:"nextStepResponse",nextStepResponse:{response:{$kind:"newFeatureResponse",newFeatureResponse:{selectedFeatureId:n.data.id,featureName:n.data.featureName}}}};break;case"userSecretsResponse":t={$kind:"userSecretsResponse",userSecretsResponse:{providedSecrets:n.providedSecretKeys.map(function(e){return{key:e,status:E.Jh.SECRET_COMPLETED}})}};break;case"queryResponse":t={$kind:"queryResponse",queryResponse:n.data};break;case"userMarkedTaskComplete":t={$kind:"userMarkedTaskComplete",userMarkedTaskComplete:n.data};break;default:(0,eT.A)(n)}return t?e.appendEvent({kind:"agentAskUserForActionResponse",response:t,requestEventId:n.requestEventId}):Promise.reject(Error("Failed to create response for user action"))},[e])}var lY=t(25588),l_=t(35331),lA=t.n(l_),lC=(0,u.memo)(function(e){var n,t,r,i=e.session,o=e.shouldAutoScrollRef,l=e.scrollerBottomPadding,s=(0,eC._)(e,["session","shouldAutoScrollRef","scrollerBottomPadding"]),d=(0,eR.C9)().agentState,p=eD(i),f=lS(i),h=(0,j.T)(i.id),g=(n=i,t=(0,R._P)({controlName:"flag-agent-feed-per-page",type:"number",default:200}),r=(0,u.useMemo)(function(){return n.transform(lb,Math.min(t,1e3))},[n,t]),{feed:(0,m.Rj)(function(){return r.map(lu)},[r]),fullyLoaded:(0,m.J2)(r.exhaustive),loadMore:(0,u.useCallback)(function(){return r.size.set(r.size.current+100)},[r])}),v=g.feed,y=g.fullyLoaded,b=g.loadMore,S=(0,R._P)({controlName:"flag-plan-in-workspace"}),Y=D({fetchPolicy:"cache-first",ssr:!1,skip:!(0,R._P)({controlName:"flag-bookworm"})}).data,_=(0,u.useMemo)(function(){var e,n,t,r=(null==Y||null==(n=Y.currentUser)||null==(e=n.tips)?void 0:e.tips)||[],i=new Map(r.map(function(e){return[e.id,e]})),o=r.filter(function(e){return e.timeRecommended}),a=(0,ek._)(o).sort(function(e,n){var t=e.timeRecommended?new Date(e.timeRecommended).getTime():0;return(n.timeRecommended?new Date(n.timeRecommended).getTime():0)-t}),l=(null==(t=a[0])?void 0:t.id)||null;return{recommendedTips:new Set(a.map(function(e){return e.id})),latestTipId:l,allTipsById:i,anyLatestFiveInteracted:a.slice(0,5).some(function(e){return e.timeCompleted||e.timeInteracted||e.timeDismissed}),hasInteractedBefore:a.some(function(e){return e.timeInteracted})}},[Y]),A=(0,w.m6)(),C=(0,u.useMemo)(function(){if(!A)return null;var e,n,t=((null==Y||null==(n=Y.currentUser)||null==(e=n.tips)?void 0:e.tips)||[]).find(function(e){return"bonsai_tour"===e.ctaTrigger});return t?{tip:t,isInBonsaiWebview:A}:null},[A,Y]),k=(0,u.useRef)(new Map),x=(0,a._)({approvePlan:p,sendAskUserForActionResponse:f,isInitialSession:h,agentState:d,tipData:_,bonsaiTourTipInfo:C,hasFullWidthStatusBar:S},s);return v?(0,c.FD)(nu.y,{padding:"8px 8px ".concat(l+8,"px 8px"),scrollCacheKey:i.id,scrollCache:k.current,shouldAutoScrollRef:o,autoScrollBehavior:"smooth",buttonOffset:l,children:[!1===y?(0,c.Y)(eF.$n,{variant:"outlined",iconLeft:(0,c.Y)(lY.A,{}),text:"Show previous events",onClick:function(){b()}}):null,v.result.map(function(e,n){return"activityGroup"===e.type?(0,c.Y)(lx,(0,a._)({isInLastGroup:n>=v.lastUserMessageIndex,activityGroup:e},x),e.id):(0,c.Y)(lo,(0,a._)({data:e.observable},x),e.id)}),(0,c.Y)(eE.G3,{openPane:s.openPane})]}):(0,c.Y)(eY.G,{})});function lk(e){var n,t=e.expanded,r=e.onClick,i=e.activityGroup,o=e.innerRef,a=e.children,l=e.hasFullWidthStatusBar;return(0,c.Y)(eN.S,{p:8*!l,innerRef:o,children:(0,c.FD)(eN.S,{clsx:[lA().expandableGroup,t&&lA().expanded],children:[(0,c.FD)(eN.S,{grow:!0,shrink:!0,tag:"button",css:rK.b.nofill,onClick:r,p:8,clsx:lA().expandButton,children:[(0,c.FD)(eN.S,{row:!0,grow:!0,shrink:!0,align:"center",justify:"space-between",children:[(0,c.Y)(eL.EY,{multiline:!1,children:t?"Show less":(n=i.count).message>0&&n.toolUse>0?(0,ex.A)("messages",n.message,!0)+" & "+(0,ex.A)("actions",n.toolUse,!0):n.message>0?(0,ex.A)("message",n.message,!0):n.toolUse>0?(0,ex.A)("action",n.toolUse,!0):"Show activity"}),t?(0,c.Y)(rI.A,{}):(0,c.Y)(tl.A,{})]}),t||!i.summary?null:(0,c.Y)(eN.S,{row:!0,children:(0,c.Y)(eL.EY,{multiline:!1,clsx:lA().summary,children:i.summary})})]}),t?(0,c.Y)(eN.S,{pb:8,clsx:lA().expandedContent,children:a}):null]})})}var lx=(0,u.memo)(function(e){var n=e.activityGroup,t=e.isInLastGroup,r=void 0!==t&&t,i=(0,eC._)(e,["activityGroup","isInLastGroup"]),o=(0,l._)((0,u.useState)(!1),2),s=o[0],d=o[1],p=(0,u.useRef)(null);if(0===n.items.length)return null;var f=r&&!i.isReadOnly||s?n.items.map(function(e){var n;return"event"===e.type?(0,c.Y)(lo,(0,a._)({data:e.observable},i),e.id):(0,c.Y)(lD,(0,a._)({events:e.events},i),null==(n=e.events[0])?void 0:n.id)}):null;return(0,c.Y)(c.FK,{children:r&&!i.isReadOnly?f:(0,c.Y)(lk,{innerRef:p,activityGroup:n,expanded:s,onClick:function(){d(!s)},hasFullWidthStatusBar:i.hasFullWidthStatusBar,children:f})})}),lD=(0,u.memo)(function(e){var n=e.events,t=(0,eC._)(e,["events"]),r=th({items:n,maxVisibleItems:2}),i=r.isExpanded,l=r.setIsExpanded,s=r.maxItemsReached,u=r.visibleItems,d=r.hiddenItemsCount,p=t.isDesktopOrTabletAgentPresentationCentered||t.isDesktopLayoutTransitionInProgress;return(0,c.FD)(c.FK,{children:[s?(0,c.Y)(eN.S,{py:2,px:8*!t.hasFullWidthStatusBar,clsx:(0,o._)({},lA().eventDefaultWidth,p),children:(0,c.Y)(lc,{isExpanded:i,onClick:function(){return l(!i)},hiddenItemsCount:d})}):null,u.map(function(e){var n=e.id,r=e.observable;return(0,c.Y)(lo,(0,a._)({data:r},t),n)})]})}),lE=t(48726),lR=t(83603),lI=t(40492),lT=t(83849),lF={direction:"reverse",state:{isMostRecentMessageFromUser:!1},map:function(e){return e.isMostRecentMessageFromUser},reducer:function(e,n){return e.sender.type===E.utd.USER?n.isMostRecentMessageFromUser=!0:n.isMostRecentMessageFromUser=!1,!1}};function lP(e){var n=e.sessionId,t=(0,h.NC)(),r=(0,m.Rj)(function(){return n?t.sessions.get(n):null},[t,n],{default:null});return(0,m.Rj)(function(){return null==r?void 0:r.reduce(lF,1)},[r],{default:!1})}var lL=t(6699),lU=t(13843);function lN(e){var n=(0,l._)((0,u.useState)(null),2),t=n[0],r=n[1];return(0,u.useEffect)(function(){if(!e)return void r(null);var n=null,t=Date.now(),i=function(){if(null!=n){var o=Date.now();if(o-t>=1e3){var a=o-e.getTime(),l=Math.floor(a/1e3),s=Math.floor(a/6e4);l<60?r("".concat(l,"s")):r("".concat(s,"m")),t=o}n=requestAnimationFrame(i)}};return n=requestAnimationFrame(i),function(){null!=n&&(cancelAnimationFrame(n),n=null)}},[e]),t}var lO=t(90209),lM=t(94982),lH=t(99010),lB=t.n(lH),lz=["Working","Reviewing your message","Considering options","Determining next steps"],lW=[iy.S.backgroundPulse(ei.LU.blurpleStronger,ei.LU.blurpleStrongest),{WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent","& > span > span":{backgroundColor:"transparent"}}],lG=(0,no.x)({rateLimited:[nl.wp.minHeight(28),nl.wp.flex.growAndShrink(1)],rateLimitedResetText:{"> span":[nl.wp.py(4)],span:[{display:"inline",lineHeight:1},nl.wp.flex.growAndShrink(1)]}});function lV(e){var n=e.inProgressEventSummary,t=e.onPause,r=e.hidePauseButton,i=e.startedAt,o=e.toolDataKind,a=(0,l._)((0,u.useState)(lz[0]),2),s=a[0],d=a[1];(0,u.useEffect)(function(){if(n)return void d(lz[0]);var e=null;return!function n(){e=setTimeout(function(){d(function(e){var n=(lz.indexOf(e)+1)%lz.length;return lz[n]}),n()},5e3)}(),function(){e&&clearTimeout(e)}},[n]);var p=lN(null!=i?i:void 0);return(0,c.FD)(c.FK,{children:[o?(0,c.Y)(od.u,{clsx:lB().toolDataIcon,size:16,kind:o}):(0,c.Y)(lO.l,{loading:!0,size:16}),(0,c.FD)(eN.S,{tag:"span",css:lW,style:{paddingLeft:6},row:!0,grow:!0,shrink:!0,gap:4,"data-chromatic":"ignore",children:[(0,c.Y)(eN.S,{tag:"span",align:"center",row:!0,shrink:!0,gap:4,children:n?(0,c.Y)(aW,{summary:n}):(0,c.FD)(eL.EY,{multiline:!1,children:[s,"…"]})}),null!==i&&n?(0,c.Y)(eL.EY,{children:p||"0s"}):null]}),void 0!==r&&r?null:(0,c.Y)(eF.$n,{iconLeft:(0,c.Y)(lM.A,{}),size:"small",variant:"nofill",colorway:"blurple",text:"Pause",onClick:t})]})}function lZ(e){var n=e.timeWhenReset;return(0,c.FD)(eN.S,{css:lG.rateLimited,row:!0,gap:6,align:"center",children:[(0,c.Y)(rF.A,{}),(0,c.Y)(eN.S,{grow:!0,shrink:!0,children:(0,c.FD)(eL.EY,{children:["You've hit the usage limit for"," ",(0,ij.Nn)({variant:"casual",capitalizeFirstChar:!1}),"."," ",(0,c.FD)(eL.EY,{css:lG.rateLimitedResetText,children:["Usage will reset"," ",(0,c.Y)(eU.Dc,{date:n,dateFormat:"relative",live:!0}),"."," ",(0,c.FD)("a",{target:"_blank",href:lU.ik.AGENT,children:["Learn more"," "]})]})]})})]})}var lj=t(57847);function lq(e){return(0,m.Rj)(function(){return null==e?void 0:e.reduce(lK,1)},[e],{default:{summary:null,startedAt:null,toolDataKind:null}})}var lK={direction:"reverse",state:{summary:null,startedAt:null,toolDataKind:null},reducer:function(e,n){n.summary=e.state===E.qOk.IN_PROGRESS?lg(e):null;var t,r,i=e.contents.contents,o=(null==i?void 0:i.$kind)==="agentTimelineEventContents"&&null!=(r=null==(t=i.agentTimelineEventContents.toolData)?void 0:t.$kind)?r:null;return n.startedAt="thoughts"===o?e.created:null,n.toolDataKind=n.summary&&"messageData"!==o?o:null,!1}},l$=t(10708),lJ=t(67382),lQ=t(13196),lX=t.n(lQ),l0=(0,ei.CK)("StatusBar.module.css",["--height","--pointer-events","--background-color","--border-color"]);function l1(e){var n=e.className,t=e.children;return(0,c.Y)(eL.EY,{multiline:!1,variant:"small",clsx:[lX().statusLabelText,n],color:"dimmer",children:t})}function l2(e){var n,t,r=e.session,i=e.hasFlagPlanInWorkspace,a=(0,h.dI)(),l=(0,m.J2)(a.status),s=(0,lL.Z)({context:"agent"}),u=s.isActive,d=s.element,p=(0,m.Rj)(function(){return r.reduce(lj.q,100)},[r]),f=lP({sessionId:r.id}),g=lq(r),v=g.summary,y=g.startedAt,w=g.toolDataKind,b=(0,eR.C9)(),S=b.agentState,Y=b.updateAgentState,_=(0,m.J2)(S),A=null,C=ei.LU.interactiveBackground,k=i?ei.LU.outlineDimmer:ei.LU.outlineDimmest;if("error"===l)C=ei.LU.yellowDimmer,k=ei.LU.yellowDefault,A=(0,c.FD)(c.FK,{children:[(0,c.Y)(t2.A,{size:12}),(0,c.Y)(l1,{children:"".concat((0,ij.Nn)({capitalizeFirstChar:!0})," lost connection. Try refreshing the page.")})]});else if(null==_||null==(n=_.reason)?void 0:n.$kind){var x=_.reason;switch(null==x?void 0:x.$kind){case"stepLimitExceeded":C=ei.LU.yellowDimmer,k=ei.LU.yellowDefault,A=(0,c.FD)(c.FK,{children:[(0,c.Y)(t2.A,{size:12}),(0,c.FD)(l1,{children:["Reached maximum step limit (",x.maxSteps," steps)"]})]});break;case"rateLimited":C=ei.LU.yellowDimmer,k=ei.LU.yellowDefault,A=(0,c.Y)(lZ,{timeWhenReset:x.timeWhenReset});break;case"authorizationFailed":C=ei.LU.yellowDimmer,k=ei.LU.yellowDefault,A=x.code===E.HkE.INSUFFICIENT_BUDGET?(0,c.FD)(c.FK,{children:[(0,c.Y)(t2.A,{size:12}),(0,c.Y)(l1,{children:"Budget exceeded"})]}):(0,c.FD)(c.FK,{children:[(0,c.Y)(t2.A,{size:12}),(0,c.Y)(l1,{children:x.message})]});break;case"error":C=ei.LU.yellowDimmer,k=ei.LU.yellowDefault,A=(0,c.FD)(c.FK,{children:[(0,c.Y)(t2.A,{size:12}),(0,c.FD)(l1,{children:[(0,ij.Nn)({capitalizeFirstChar:!0})," encountered an error."," "]}),(0,c.Y)(eF.$n,{text:"Try again",colorway:"yellow",variant:"nofill",size:"small",onClick:function(){Y(E.g32.AGENT_STATE_RUNNING),(0,nw.p)({action:"attempted_try_again",sessionId:r.id})}})]})}}else switch(null==_?void 0:_.state){case E.g32.AGENT_STATE_RUNNING:C=ei.LU.blurpleDimmest,k=ei.LU.blurpleDimmer,A=(0,c.Y)(lV,{inProgressEventSummary:v,toolDataKind:w,onPause:function(){return Y(E.g32.AGENT_STATE_PAUSED)},startedAt:y});break;case E.g32.AGENT_STATE_PAUSING:A=(0,c.Y)(eL.EY,{variant:"small",color:"dimmest",children:"Agent is pausing…"});break;case E.g32.AGENT_STATE_UNKNOWN:case E.g32.AGENT_STATE_NOT_STARTED:case E.g32.AGENT_STATE_PAUSED:p?A=(0,c.Y)(l1,{children:"Agent is waiting for your response"}):f?(C=ei.LU.blurpleDimmest,k=ei.LU.blurpleDimmer,A=(0,c.Y)(l1,{children:"Agent is starting up…"})):A=(0,c.FD)(c.FK,{children:[(0,c.Y)(l1,{children:"Agent is paused"}),(0,c.Y)(eF.$n,{variant:"nofill",iconLeft:(0,c.Y)(lJ.A,{}),size:"small",onClick:function(){return Y(E.g32.AGENT_STATE_RUNNING)},text:"Resume"})]})}return!A&&f&&(C=ei.LU.blurpleDimmest,k=ei.LU.blurpleDimmer,A=(0,c.Y)(lV,{inProgressEventSummary:v,toolDataKind:w,hidePauseButton:!0,onPause:function(){return Y(E.g32.AGENT_STATE_PAUSED)},startedAt:y})),!A&&i&&(A=(0,c.Y)(l1,{children:"Agent is ready"})),u&&!d&&(C=ei.LU.interactiveBackground,A=(0,c.FD)(eN.S,{row:!0,align:"center",gap:4,children:[(0,c.Y)(l$.A,{size:12}),(0,c.Y)(l1,{children:"Select an element to edit"})]})),(0,c.Y)(eN.S,{clsx:[lX().root,(0,o._)({},lX().hasFlagPlanInWorkspace,i)],style:(t={},(0,o._)(t,l0.height,"28px"),(0,o._)(t,l0.pointerEvents,A?"auto":"none"),(0,o._)(t,l0.backgroundColor,C),(0,o._)(t,l0.borderColor,k),t),children:(0,c.Y)(eN.S,{clsx:lX().inner,children:A?(0,c.Y)(eP.ui,{elevated:!0,clsx:lX().surface,row:!0,align:"center",children:A}):null})})}function l4(e){var n,t=e.labelText;return(0,c.Y)(eN.S,{clsx:lX().root,style:(n={},(0,o._)(n,l0.height,"28px"),(0,o._)(n,l0.backgroundColor,"color-mix(in srgb, ".concat(ei.LU.blurpleDimmest," 60%, ").concat(ei.LU.backgroundRoot,")")),(0,o._)(n,l0.borderColor,ei.LU.blurpleDimmest),n),children:(0,c.Y)(eN.S,{clsx:lX().inner,children:(0,c.Y)(eP.ui,{elevated:!0,clsx:lX().surface,row:!0,align:"center",children:(0,c.Y)(l1,{className:lX().planGeneratingStatusLabel,children:t})})})})}function l5(e){var n,t=e.hasFlagPlanInWorkspace;return(0,c.Y)(eN.S,{clsx:[lX().root,(0,o._)({},lX().hasFlagPlanInWorkspace,t)],style:(n={},(0,o._)(n,l0.height,"28px"),(0,o._)(n,l0.backgroundColor,ei.LU.interactiveBackground),(0,o._)(n,l0.borderColor,ei.LU.outlineDimmest),n),children:(0,c.Y)(eN.S,{clsx:lX().inner,children:(0,c.Y)(eP.ui,{elevated:!0,clsx:lX().surface,row:!0,align:"center",children:(0,c.Y)(l1,{children:"Editing queued message"})})})})}var l3=(0,no.x)({container:[{animation:"slideUp 0.2s ease-out"},{"@keyframes slideUp":{from:{opacity:0,transform:"scale(0.95)"},to:{opacity:1,transform:"scale(1)"}}},nl.wp.p(8),nl.wp.borderRadius(),nl.wp.backgroundColor.orangeDimmest,nl.wp.border({color:ei.LU.orangeDimmer})],buttons:[nl.wp.flex.wrap],header:[nl.wp.color.orangeStrongest],column:[nl.wp.width("50%")],warning:[nl.wp.color.redStronger],secretsButton:[nl.wp.display.inlineFlex]});function l7(e){var n=e.openSecrets,t=(0,l._)((0,u.useState)(!1),2),r=t[0],i=t[1],o=eS(),a=o.inMessageSecrets,s=o.replaceInMessageSecrets,d=o.dismissInMessageSecrets;return(0,c.FD)(c.FK,{children:[(0,c.Y)(eP.ui,{css:l3.container,background:"higher",children:(0,c.FD)(eN.S,{gap:8,children:[(0,c.FD)(eN.S,{row:!0,gap:4,align:"center",children:[(0,c.Y)(t2.A,{css:l3.header,size:16}),(0,c.Y)(eL.EY,{css:l3.header,variant:"small",color:"dimmer",children:"Security Warning"})]}),(0,c.FD)(eL.EY,{variant:"small",children:["The ",(0,ex.A)("values",a.length)," you added look like ",a.length>1?"secrets":"a secret",". Store"," ",a.length>1?"them":"it"," securely using our"," ",(0,c.Y)(eF.$n,{css:l3.secretsButton,text:"Secrets",colorway:"primary",variant:"underlinedOnHover",size:"small",onClick:n})," ","feature."]}),(0,c.FD)(eN.S,{css:l3.buttons,row:!0,gap:8,align:"center",children:[(0,c.Y)(eF.$n,{text:"Add ".concat((0,ex.A)("secret",a.length)),iconLeft:(0,c.Y)(nF.A,{}),loading:r,colorway:"warning",size:"small",onClick:function(){return i(!0)}}),(0,c.Y)(eF.$n,{text:"Dismiss",iconLeft:(0,c.Y)(r6.A,{}),variant:"outlined",colorway:"warning",size:"small",onClick:d})]})]})}),r?(0,c.Y)(l6,{inMessageSecrets:a,onReplace:s,onClose:function(){return i(!1)}}):null]})}function l6(e){var n=e.inMessageSecrets,t=e.onReplace,r=e.onClose,d=(0,iT.A)().secrets,p=(0,l._)((0,u.useState)(null),2),f=p[0],h=p[1],m=(0,l._)((0,u.useState)(!1),2),g=m[0],v=m[1],y=(0,l._)((0,u.useState)(!1),2),w=y[0],b=y[1],S=(0,l._)((0,u.useState)({}),2),Y=S[0],_=S[1];if((0,u.useEffect)(function(){var e=!1;return d.read().then(function(n){e||h(n)}),function(){e=!0}},[d]),n.some(function(e){return!(e.id in Y)})){var A={},C=!0,k=!1,x=void 0;try{for(var D,E=n[Symbol.iterator]();!(C=(D=E.next()).done);C=!0){var R,I=D.value;A[I.id]={key:(R=I.provider,("Generic API Key"===R||"Generic Secret"===R?null:l9(R))||""),value:I.key}}}catch(e){k=!0,x=e}finally{try{C||null==E.return||E.return()}finally{if(k)throw x}}Object.assign(Y,(0,a._)({},A,Y))}var T=new Set(Object.values(Y).map(function(e){return e.key})),F=[];if(Object.values(Y).some(function(e){return 0===e.key.length})&&F.push("Key name cannot be empty."),Object.values(Y).some(function(e){return 0===e.value.length})&&F.push("Secret value cannot be empty."),T.size!==Object.values(Y).length&&F.push("Some key names are duplicates."),f){var P=!0,L=!1,U=void 0;try{for(var N,O=f.keys()[Symbol.iterator]();!(P=(N=O.next()).done);P=!0){var M=N.value;T.has(M)&&F.push('Key name "'.concat(M,'" already exists. Please choose a different name.'))}}catch(e){L=!0,U=e}finally{try{P||null==O.return||O.return()}finally{if(L)throw U}}}var H=null===f||F.length>0,B=null===f||w;return(0,c.Y)(nY.a,{isOpen:!0,preventClose:!0,onRequestClose:r,children:(0,c.FD)(eN.S,{gap:12,children:[(0,c.FD)(eN.S,{gap:8,children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(nF.A,{}),(0,c.Y)(eL.EY,{children:"Store secret securely"})]}),(0,c.Y)(eL.EY,{color:"dimmer",children:n.length>1?"Add key names for your values.":"Add a key name for your value."})]}),(0,c.FD)(eN.S,{gap:4,children:[(0,c.FD)(eN.S,{row:!0,align:"center",children:[(0,c.Y)(eL.EY,{css:l3.column,variant:"small",color:"dimmer",children:"Key"}),(0,c.FD)(eN.S,{css:l3.column,row:!0,align:"center",gap:4,pl:4,children:[(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",children:"Value"}),(0,c.Y)(nc.K0,{size:18,alt:"Toggle Secret",onClick:function(){return v(function(e){return!e})},tooltipPlacement:"top",children:g?(0,c.Y)(nC.A,{}):(0,c.Y)(nA.A,{})})]})]}),(0,c.Y)(eN.S,{gap:12,children:n.map(function(e){return(0,c.Y)(l8,{name:Y[e.id].key,value:Y[e.id].value,showContents:g,onChange:function(n,t){_(function(r){return(0,eI._)((0,a._)({},r),(0,o._)({},e.id,{key:n,value:t}))})}},e.id)})})]}),F.length?(0,c.Y)(eN.S,{gap:8,children:F.map(function(e,n){return(0,c.FD)(eN.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(t2.A,{css:l3.warning,size:16}),(0,c.Y)(eL.EY,{css:l3.warning,variant:"small",children:e})]},n)})}):null,(0,c.FD)(eN.S,{row:!0,gap:8,align:"center",justify:"end",children:[(0,c.Y)(eF.$n,{text:"Cancel",onClick:r}),(0,c.Y)(eF.$n,{text:n.length>1?"Add secrets":"Add secret",disabled:H,loading:B,colorway:"primary",onClick:(0,i._)(function(){var e;return(0,s.YH)(this,function(n){switch(n.label){case 0:return b(!0),[4,d.addEntries(Array.from(Object.values(Y)))];case 1:for(var i in n.sent(),e={},Y)e[i]=Y[i].key;return b(!1),t(e),r(),[2]}})})})]})]})})}function l8(e){var n=e.name,t=e.value,r=e.showContents,i=e.onChange;return(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(nZ.pd,{css:l3.column,value:n,placeholder:"Enter a key name","aria-label":"Secret key name",onChange:function(e){i(l9(e.target.value),t)}}),(0,c.Y)(nZ.pd,{css:l3.column,style:!t||r?{}:{fontFamily:"text-security-disc"},value:t,placeholder:"Enter a secret value","aria-label":"Secret value",onChange:function(e){i(n,e.target.value)}})]})}function l9(e){return e.toUpperCase().replaceAll(/[[,()]/g,"").replaceAll(/\s+/g,"_").replaceAll(/[^A-Z0-9_]/g,"")}var se=t(56199);function sn(){var e=(0,b._)(["\n  fragment AgentSessionErrorUsageInterval on UsageInterval {\n    endDate\n  }\n"]);return sn=function(){return e},e}function st(){var e=(0,b._)(["\n  query AgentSessionError($orgId: String) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          ...AgentSessionErrorUsageInterval\n        }\n        ... on Error {\n          message\n        }\n      }\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          name\n          usageInterval {\n            ... on UsageInterval {\n              ...AgentSessionErrorUsageInterval\n            }\n            ... on Error {\n              message\n            }\n          }\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return st=function(){return e},e}var sr={},si=(0,S.J1)(sn()),so=(0,S.J1)(st(),si,se.B9),sa=t(86891),sl=t(67085),ss=t(30166),sc=t(76334),su=t(97153),sd=(0,no.x)({root:[nl.wp.position.relative,nl.wp.p(8),nl.wp.borderRadius(),nl.wp.border({color:ei.LU.outlineDimmest}),nl.wp.colWithGap(4),{containerType:"inline-size"}]});function sp(e){return(0,c.FD)(eN.S,{row:!0,gap:6,align:"center",children:[(0,c.Y)(lO.l,{size:16}),(0,c.Y)(eL.EY,{variant:"subheadDefault",children:e.children})]})}function sf(e){return(0,c.FD)(eP.ui,{elevated:!0,css:sd.root,children:[(0,c.Y)(sp,{children:"You’ve hit your usage budget"}),(0,c.FD)(eL.EY,{"data-chromatic":"ignore",children:["Increase your usage budget to continue using Agent now. Otherwise, your usage will reset"," ",e.creditsResetDate?(0,c.FD)(c.FK,{children:["on ",(0,sc.A)(e.creditsResetDate,"MMM do, HH:mm aaa")," "]}):null,"when the next billing period begins."]}),(0,c.Y)(eF.$n,{iconLeft:(0,c.Y)(rr.A,{}),text:"Increase usage budget",colorway:"primary",onClick:e.onIncreaseBudget})]})}function sh(e){return(0,c.FD)(eP.ui,{css:sd.root,elevated:!0,children:[(0,c.Y)(sp,{children:"Add a billing method to continue using Agent"}),(0,c.Y)(eL.EY,{children:"You’ve used all your monthly credits—you’ll need to to add a billing method to pay for additional Agent usage."}),(0,c.Y)(eF.$n,{iconLeft:(0,c.Y)(su.A,{}),text:"Add billing method",colorway:"primary",onClick:e.onAddBillingMethod})]})}function sm(){return(0,c.FD)(eP.ui,{css:sd.root,elevated:!0,children:[(0,c.Y)(sp,{children:"Your subscription is not active anymore"}),(0,c.Y)(eL.EY,{children:"Your subscription has expired or been canceled. To continue using Agent, make sure your subscription is active."}),(0,c.Y)(ta.v,{href:"/pricing",iconRight:(0,c.Y)(aa.A,{}),text:"See pricing",colorway:"primary"})]})}function sg(e){var n=e.error;return(0,c.FD)(eP.ui,{css:sd.root,elevated:!0,children:[(0,c.Y)(sp,{children:"Dev only error"}),(0,c.FD)(eL.EY,{children:[n.type," - ",n.message]})]})}function sv(e){var n=(0,y.A)(),t=(0,sa.R)(n),r=t.hasError,i=t.orgId,o=(f={variables:{orgId:i},skip:void 0===i||r},h=(0,a._)({},sr,f),Y.I(so,h)).data;m=i?(null==o||null==(g=o.currentUser)?void 0:g.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===o.currentUser.org.usageBasedBillingAlerts.__typename?o.currentUser.org.usageBasedBillingAlerts:void 0:(null==o||null==(v=o.currentUser)?void 0:v.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?o.currentUser.usageBasedBillingAlerts:void 0;var s=(0,l._)((0,u.useState)(null),2),d=s[0],p=s[1];switch(e.error.type){case E.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET:var f,h,m,g,v,w,b,S=null==o?void 0:o.currentUser,_=(null==S?void 0:S.org.__typename)==="Org"?S.org:void 0;return(null==_?void 0:_.usageInterval.__typename)==="UsageInterval"?b=new Date(_.usageInterval.endDate):(null==S||null==(w=S.usageInterval)?void 0:w.__typename)==="UsageInterval"&&(b=new Date(S.usageInterval.endDate)),(0,c.FD)(c.FK,{children:[(0,c.Y)(sf,{creditsResetDate:b,onIncreaseBudget:function(){return p(E.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET)}}),(0,c.Y)(nY.a,{isOpen:d===E.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET,onRequestClose:function(){return p(null)},children:(0,c.Y)(ss.j,{org:_,initialSettings:m,onDone:function(){return window.location.reload()}})})]});case E.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD:return(0,c.FD)(c.FK,{children:[(0,c.Y)(sh,{onAddBillingMethod:function(){p(E.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD)}}),(0,c.Y)(nY.a,{isOpen:d===E.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD,onRequestClose:function(){return p(null)},children:(0,c.FD)(eN.S,{gap:16,children:[(0,c.Y)(eL.Y9,{variant:"headerDefault",level:1,children:"Manage Payment"}),(0,c.Y)(sl.n,{})]})})]});case E.fqQ.AI_QUOTA_REQUIRES_ACTIVE_SUBSCRIPTION:return(0,c.Y)(sm,{});default:return(0,c.Y)(sg,{error:e.error})}}var sy=t(8479),sw=t(35990),sb=t(8907),sS=t(53337),sY=t(93096);function s_(){var e=(0,b._)(["\n  fragment AgentAuthorizations on OrgAuthorizations {\n    paidAgent: useAiAgent(tier: paid) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n    freeAgent: useAiAgent(tier: free) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n  }\n"]);return s_=function(){return e},e}function sA(){var e=(0,b._)(["\n  query GetAgentRepl($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return sA=function(){return e},e}function sC(){var e=(0,b._)(["\n  query GetAgentReplAuthorizations($orgId: String) {\n    currentUser {\n      id\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...AgentAuthorizations\n        }\n        ... on Error {\n          message\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ... on OrgAuthorizations {\n              ...AgentAuthorizations\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return sC=function(){return e},e}var sk={},sx=(0,S.J1)(s_()),sD=(0,S.J1)(sA()),sE=(0,S.J1)(sC(),sx),sR=t(84344),sI=t(41847),sT=t(11297),sF=t(25882),sP=t(66905),sL=t(59133),sU=(0,no.x)({button:[nl.wp.height(24),nl.wp.p(4),nl.wp.color.foregroundDimmer,nl.wp.align.center,{"&:hover:not([disabled], [aria-disabled])":nl.wp.color.foregroundDefault}]});function sN(e){var n=e.isEnabled,t=e.onChange;return(0,c.Y)(nj.m_,{tooltip:"[Staff] "+(n?"Disable Quick Edit Mode":"Enable Quick Edit Mode"),placement:"top-start",children:(0,c.FD)(eN.S,{row:!0,gap:4,css:sU.button,children:[(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",children:"[Staff] Quick Edit"}),(0,c.Y)(nS.S,{checked:n,onChange:function(){return t(!n)},"aria-labelledby":"toggle-quick-edit-mode"})]})})}var sO=t(71791),sM=t(13539),sH=t(64287),sB={direction:"reverse",state:{latestUserResponseEventId:void 0},reducer:function(e,n){if(e.sender.type===E.utd.AI){var t=e.contents.contents;if((0,P.VF)(t,"agentTimelineEventContents")){var r=t.agentTimelineEventContents,i=r.toolData;if("user_response"===r.toolName&&(null==i?void 0:i.$kind)==="messageData")return n.latestUserResponseEventId=e.id,!1}}}},sz=t(22568),sW=t(25650),sG=t(73043),sV=t.n(sG),sZ="PlannerItem";function sj(e){var n,t=e.isAgentWorking,r=e.item,i=e.index,a=e.onEdit,s=e.onDelete,d=e.onReorder,p=e.onSend,f=(0,u.useRef)(null),h=(0,l._)((0,sM.i)({type:sZ,item:{type:sZ,id:r.id,index:i},canDrag:function(){var e=document.activeElement;return!(e&&("INPUT"===e.tagName||"SELECT"===e.tagName))},collect:function(e){return{isDragging:e.isDragging()}}}),2),m=h[0].isDragging,g=h[1],v=(0,l._)((0,sH.H)({accept:sZ,drop:function(e){e.index!==i&&d(e.index,i)},collect:function(e){var n=e.getItem(),t=e.isOver();return{isAbove:t&&n&&n.index>i,isBelow:t&&n&&n.index<i}}}),2),y=v[0],w=y.isAbove,b=y.isBelow;return g((0,v[1])(f)),(0,c.Y)(eN.S,{py:2,pl:8,innerRef:f,children:(0,c.Y)(eP.ui,{elevated:!0,px:8,py:6,clsx:[sV().plannerItemSurface,sV().draggable,(n={},(0,o._)(n,sV().dragging,m),(0,o._)(n,sV().dropIndicatorAbove,w),(0,o._)(n,sV().dropIndicatorBelow,b),n)],children:(0,c.FD)(eN.S,{row:!0,justify:"space-between",align:"start",gap:4,children:[(0,c.Y)(eN.S,{clsx:sV().plannerItemText,shrink:!0,children:(0,c.Y)(eL.EY,{color:"default",clsx:sV().preserveNewlines,children:r.text})}),(0,c.FD)(eN.S,{row:!0,gap:4,children:[t?null:(0,c.Y)(nc.K0,{alt:"Send message",size:24,onClick:function(){return p(r)},children:(0,c.Y)(sW.A,{size:16,color:ei.LU.foregroundDimmer})}),(0,c.Y)(nc.K0,{alt:"Edit message",size:24,onClick:function(){return a(r)},children:(0,c.Y)(rt.A,{size:16,color:ei.LU.foregroundDimmer})}),(0,c.Y)(nc.K0,{alt:"Delete message",size:24,onClick:function(){return s(r)},children:(0,c.Y)(ib.A,{size:16,color:ei.LU.foregroundDimmer})})]})]})})})}function sq(e){var n=e.plannerItems,t=e.isOpen,r=e.isAgentWorking,i=e.isInMobileWorkspace,o=e.onEditItem,a=e.onDeleteItem,s=e.onReorderItems,d=e.onSendItem,p=e.onClearQueue,f=e.onClose,h=(0,l._)((0,u.useState)(!1),2),m=h[0],g=h[1],v=(0,l._)((0,u.useState)(!1),2),y=v[0],w=v[1],b=(0,u.useCallback)(function(){p(),g(!1)},[p]),S=(0,u.useCallback)(function(){w(!y)},[y]);return((0,u.useEffect)(function(){if(t){var e=function(e){"Escape"===e.key&&f()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}},[t,f]),t)?(0,c.FD)(eP.ui,{elevated:!0,clsx:sV().drawerSurface,gap:6,p:8,pl:4,children:[(0,c.FD)(eN.S,{className:sV().titleContainer,row:!0,gap:4,align:"center",justify:"space-between",children:[(0,c.FD)(eN.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(nj.m_,{tooltip:y?"Expand":"Collapse",children:(0,c.Y)(nc.K0,{alt:y?"Expand":"Collapse",size:24,onClick:S,children:y?(0,c.Y)(rI.A,{size:16}):(0,c.Y)(tl.A,{size:16})})}),(0,c.Y)(eL.EY,{color:"dimmer",children:ij.Gt}),y?(0,c.FD)(eL.EY,{color:"dimmest",children:["(",n.length," messages)"]}):null,i?null:(0,c.Y)(nj.m_,{tooltip:(0,c.FD)("span",{children:["Queued messages will be sent ",(0,c.Y)("br",{}),"when ",(0,ij.Nn)()," ",r?"is done working":"resumes work"]}),maxWidth:300,placement:"right",children:(0,c.Y)(rF.A,{size:16,color:ei.LU.foregroundDimmest})})]}),(0,c.FD)(eN.S,{row:!0,gap:4,pr:8,children:[!y&&m?(0,c.FD)(eN.S,{row:!0,gap:4,children:[(0,c.Y)(eF.$n,{size:"small",clsx:sV().compactButton,text:"Cancel",onClick:function(){return g(!1)}}),(0,c.Y)(eF.$n,{size:"small",clsx:sV().compactButton,text:"Clear queue",colorway:"negative",onClick:b})]}):null,!(n.length>0)||y||m?null:(0,c.Y)(nc.K0,{alt:"Clear all",size:24,onClick:function(){return g(!0)},tooltipContents:"Clear all",colorway:m?"negative":void 0,children:(0,c.Y)(ib.A,{size:16,color:ei.LU.foregroundDimmer})})]})]}),y?null:(0,c.Y)(sz.A,{children:(0,c.Y)(eN.S,{pl:18,gap:4,children:n.map(function(e,n){return(0,c.Y)(sj,{isAgentWorking:r,item:e,index:n,onEdit:o,onDelete:a,onReorder:s,onSend:d},e.id)})})})]}):null}function sK(e){var n,t,r,o,a,l,d,p,f,y,b,S,Y,_,A,C,k=e.onEnterEditMode,x=e.sendMessage,D=(0,h.NC)(),R=(0,m.J2)(D.planner.state),I=(0,u.useMemo)(function(){var e;return null!=(e=null==R?void 0:R.filter(function(e){return"LATER"===e.state}))?e:[]},[R]),T=H(),F=B(),P=(0,w.m5)(),L=(0,eR.sz)(),U=(0,v.A)().showError;n=(0,h.NC)(),t=(0,m.J2)(n.sessions.agent.current),r=(0,m.J2)(null==t?void 0:t.agent.state),o=(0,h.Jq)(),a=(0,m.Rj)(function(){return null==t?void 0:t.reduce(sB,100)},[t],{default:{latestUserResponseEventId:void 0}}),l=lP({sessionId:null==t?void 0:t.id}),d=(0,m.Rj)(function(){return n.planner.state.map(function(e){return e.filter(function(e){return"LATER"===e.state})[0]})},[n]),p=(0,g.A)(d),f=(0,u.useRef)(void 0),y=W(),b=(null==r?void 0:r.state)===E.g32.AGENT_STATE_PAUSED||(null==r?void 0:r.state)===E.g32.AGENT_STATE_NOT_STARTED||(null==r?void 0:r.state)===E.g32.AGENT_STATE_UNKNOWN,Y=(0,u.useCallback)((S=(0,i._)(function(e){return(0,s.YH)(this,function(r){switch(r.label){case 0:if(!t)return[2];return x(e.text),[4,n.planner.delete({id:e.id})];case 1:return r.sent(),[2]}})}),function(e){return S.apply(this,arguments)}),[t,n.planner,x]),(0,u.useEffect)(function(){!b||o||y||!a||void 0===a.latestUserResponseEventId||a.latestUserResponseEventId===f.current||void 0===p.current||l||(f.current=a.latestUserResponseEventId,Y(p.current))},[Y,b,o,y,p,a,l]);var N=(0,u.useCallback)((0,i._)(function(){return(0,s.YH)(this,function(e){switch(e.label){case 0:return[4,Promise.all(I.map(function(e){return D.planner.delete({id:e.id})}))];case 1:return e.sent(),[2]}})}),[I,D.planner]),O=(0,u.useCallback)(function(e){k({plannerItemId:e.id,plannerItemText:e.text}),F(!1)},[k,F]),M=(0,u.useCallback)((_=(0,i._)(function(e){return(0,s.YH)(this,function(n){switch(n.label){case 0:return[4,D.planner.delete({id:e.id})];case 1:return n.sent().ok||U("Failed to delete queued message"),[2]}})}),function(e){return _.apply(this,arguments)}),[D.planner,U]),z=(0,u.useCallback)((A=(0,i._)(function(e,n){var t;return(0,s.YH)(this,function(r){switch(r.label){case 0:if(e===n||!(t=I[e]))return[2];return[4,D.planner.update({id:t.id,toIndex:n})];case 1:return r.sent().ok||U("Failed to reorder queued messages"),[2]}})}),function(e,n){return A.apply(this,arguments)}),[I,D.planner,U]),G=(0,u.useCallback)((C=(0,i._)(function(e){return(0,s.YH)(this,function(n){switch(n.label){case 0:return x(e.text),[4,D.planner.delete({id:e.id})];case 1:return n.sent(),[2]}})}),function(e){return C.apply(this,arguments)}),[D.planner,x]);return(0,u.useEffect)(function(){I.length>0?F(!0):T&&F(!1)},[I.length,F,T]),(0,u.useEffect)(function(){return function(){F(!1)}},[F]),(0,c.Y)(sq,{plannerItems:I,isOpen:T,isAgentWorking:L,isInMobileWorkspace:P,onEditItem:O,onDeleteItem:M,onReorderItems:z,onSendItem:G,onClearQueue:N,onClose:function(){return F(!1)}})}var s$=t(89121),sJ=t(16005),sQ=t(94734),sX=t(81965),s0=t(18701),s1=t(37624),s2=t(10208);function s4(e){var n=e.isOpen,t=e.onClose;return(0,c.Y)(nY.a,{isOpen:n,onRequestClose:t,children:(0,c.FD)(eN.S,{gap:16,children:[(0,c.Y)(eL.EY,{children:"Enabling Dynamic Intelligence features will increase Agent costs"}),(0,c.Y)(s5,{icon:(0,c.Y)(rA.A,{}),title:"Extended thinking",costImpact:"About 1.25x increase in work cost"}),(0,c.Y)(s5,{icon:(0,c.Y)(rC.A,{}),title:"High-power model",costImpact:"About 5x increase in work cost"}),(0,c.FD)(eN.S,{row:!0,justify:"space-between",align:"center",children:[(0,c.Y)(ta.v,{iconRight:(0,c.Y)(tX.A,{}),href:lU.n9,text:"Learn more",target:"_blank"}),(0,c.Y)(eF.$n,{colorway:"primary",text:"I understand",onClick:t})]})]})})}function s5(e){var n=e.icon,t=e.title,r=e.costImpact;return(0,c.FD)(eN.S,{row:!0,align:"center",gap:16,children:[(0,u.cloneElement)(n,{size:22,color:ei.LU.foregroundDimmest}),(0,c.FD)(eN.S,{children:[(0,c.Y)(eL.EY,{color:"dimmer",variant:"small",children:t}),(0,c.Y)(eL.EY,{children:r})]})]})}var s3=t(52637),s7=t(8017),s6=t(98829),s8=t(72094),s9=t(96444),ce=t.n(s9);function cn(e){var n=e.disabled,t=e.settings,r=e.update,i=e.isOpen,o=e.onOpenChange,s=(0,te.Z)("dynamic-intelligence-modal"),d=s.isDone,p=s.setAsDone,f=(0,lR.OD)(),h=(0,l._)((0,u.useState)(!1),2),m=h[0],g=h[1],v=(0,rB.F)().isFreemiumStarterPlanUsersOwnRepl,y=function(e,n,t){var i,o=null!=t?t:Object.values(n)[0];i=!!o,["agent_thinking_enabled","agent_high_power_models"].includes(e)&&i&&!d&&!f&&g(!0),(0,er.u4)(er.AZ.AGENT_MODEL_SELECTOR_SETTING_TOGGLED,{setting:e,enabled:o}),r(n)},w=(0,R._P)({controlName:"flag-agent-automated-testing"}),b=(0,R._P)({controlName:"flag-agent-sampling-rate"}),S=(0,R._P)({controlName:"flag-explore-tool-type",type:"string",default:"None"}),Y=function(){var e=t.thinkingEnabled,n=t.modelProfile===e8.Fje.ModelProfileAdvanced;return e&&n?(0,c.FD)(eN.S,{row:!0,gap:4,children:[(0,c.Y)(ci,{count:1,tooltip:"About 1.25x increase in work cost",colorway:"primary"}),(0,c.Y)(ci,{count:3,tooltip:"About 5x increase in work cost",colorway:"primary"})]}):n?(0,c.Y)(ci,{count:3,tooltip:"About 5x increase in work cost",colorway:"primary"}):e?(0,c.Y)(ci,{count:1,tooltip:"About 1.25x increase in work cost",colorway:"primary"}):(0,c.Y)(eP.ui,{elevated:!0,clsx:ce().dollarTag,px:4,children:(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",children:"+$ - $$$"})})};return(0,c.FD)(c.FK,{children:[(0,c.Y)(s4,{isOpen:m,onClose:function(){g(!1),p()}}),(0,c.FD)(r3.Wv,{isOpen:i,onOpenChange:function(e){o(e),e&&(0,er.u4)(er.AZ.AGENT_MODEL_SELECTOR_SETTINGS_OPENED)},label:"".concat(ij.g$," Tools"),placement:"top start",children:[function(e){return(0,c.Y)(nc.K0,(0,eI._)((0,a._)({},e),{alt:"Agent Tools",disabled:n,tooltipContents:"Agent Tools",size:24,clsx:ce().agentSettingsButton,children:(0,c.Y)(s8.A,{})}))},(0,c.Y)(eP.ui,{elevated:!0,p:8,clsx:ce().surface,children:(0,c.FD)(eN.S,{gap:8,children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[(0,c.FD)(eL.EY,{variant:"small",children:[ij.g$," Tools"]}),(0,c.Y)(t9.a,{text:"New",colorway:"primary"})]}),(0,c.FD)(eN.S,{gap:8,children:["None"===S?null:(0,c.Y)(cr,{icon:(0,c.Y)(ay.A,{}),title:"Web search",description:"Let Agent search the internet",control:(0,c.Y)(s7.d,{isSelected:t.webSearchEnabled,onChange:function(e){return y("agent_web_search_enabled",{webSearchEnabled:e})},"aria-labelledby":"Web search"})}),w?(0,c.Y)(cr,{icon:(0,c.Y)(n_.A,{}),title:"[Staff] Automated testing",description:"Automatically test changes after making code changes [non-functional]",control:(0,c.Y)(s7.d,{isSelected:t.enableAutomatedTesting,onChange:function(e){return y("agent_automated_testing_enabled",{enableAutomatedTesting:e})},"aria-labelledby":"Automated testing"})}):null,b?(0,c.Y)(cr,{icon:(0,c.Y)(s6.A,{}),title:"[Staff] Sampling rate",description:"Adjust sampling rate [non-functional]",control:(0,c.Y)(s3.l,{"aria-label":"Sampling rate",style:{minWidth:"80px"},items:ct,defaultSelectedKey:0===t.samplingRate?"off":t.samplingRate.toString(),onSelectionChange:function(e){y("agent_sampling_rate",{samplingRate:"off"===e?0:parseInt(e,10)})},children:function(e){return(0,c.Y)(nH.nh,{id:e.id,label:e.label,fixedHeight:32},e.id)}})}):null,(0,c.Y)(ip.A,{headerContent:function(e){var n=e.isExpanded;return(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,grow:!0,children:[(0,c.Y)(eL.EY,{color:"default",children:"Dynamic Intelligence"}),!n&&Y()]})},defaultExpanded:!1,round:!1,chevron:"end",toggleOn:"chevron",headerProps:{style:{paddingLeft:0,paddingRight:0}},children:(0,c.FD)(eN.S,{gap:12,py:8,children:[(0,c.Y)(cr,{icon:(0,c.Y)(rA.A,{}),title:"Extended thinking",description:"Think longer and more holistically",control:(0,c.Y)(s7.d,{onChange:function(e){return y("agent_thinking_enabled",{thinkingEnabled:e})},isSelected:t.thinkingEnabled,"aria-label":"Extended thinking",isDisabled:v}),tag:v?(0,c.Y)(nj.m_,{tooltip:(0,c.Y)(eN.S,{row:!0,gap:4,align:"center",children:(0,c.FD)(eL.EY,{variant:"small",children:["Upgrade to ",tb.en," for access"]})}),children:(0,c.Y)(eP.ui,{elevated:!0,p:4,clsx:ce().upsellIcon,children:(0,c.Y)(nF.A,{color:ei.LU.foregroundDimmer,size:12})})}):(0,c.Y)(ci,{count:1,tooltip:"About 1.25x increase in work cost"})}),(0,c.Y)(cr,{icon:(0,c.Y)(rC.A,{}),title:"High-power models",description:"Use a higher accuracy model (Claude Opus 4)",control:(0,c.Y)(s7.d,{isSelected:t.modelProfile===e8.Fje.ModelProfileAdvanced,onChange:function(e){return y("agent_high_power_models",{modelProfile:e?e8.Fje.ModelProfileAdvanced:e8.Fje.ModelProfileStandard},e)},"aria-labelledby":"High power model",isDisabled:v}),tag:v?(0,c.Y)(nj.m_,{tooltip:(0,c.Y)(eN.S,{row:!0,gap:4,align:"center",children:(0,c.FD)(eL.EY,{variant:"small",children:["Upgrade to ",tb.en," for access"]})}),children:(0,c.Y)(eP.ui,{elevated:!0,p:4,clsx:ce().upsellIcon,children:(0,c.Y)(nF.A,{color:ei.LU.foregroundDimmer,size:12})})}):(0,c.Y)(ci,{count:3,tooltip:"About 5x increase in work cost"})})]})})]})]})})]})]})}var ct=[{id:"off",label:"Off"},{id:"1",label:"1x"},{id:"2",label:"2x"},{id:"3",label:"3x"},{id:"4",label:"4x"}];function cr(e){return(0,c.FD)(eN.S,{row:!0,align:"start",gap:8,children:[(0,c.Y)(eN.S,{pt:3,children:(0,u.cloneElement)(e.icon,{color:ei.LU.foregroundDimmest})}),(0,c.FD)(eN.S,{grow:!0,shrink:!0,children:[(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(eL.EY,{color:"default",children:e.title}),e.tag?e.tag:null]}),(0,c.Y)(eL.EY,{variant:"small",color:"dimmest",clsx:ce().optionText,children:e.description})]}),e.control]})}function ci(e){var n=e.count,t=e.tooltip,r="primary"===e.colorway?{backgroundColor:ei.LU.accentPrimaryDimmer}:{};return(0,c.Y)(nj.m_,{tooltip:t,children:(0,c.Y)(eP.ui,{elevated:!0,clsx:ce().dollarTag,px:4,style:r,children:(0,c.FD)(eL.EY,{variant:"small",color:"dimmer",children:["+ ","$".repeat(n)]})})})}var co=t(19553),ca=t(3846);function cl(e){return(0,c.Y)(eG.Ay,(0,eI._)((0,a._)({},e),{children:(0,c.Y)("path",{d:"M15.75 19.19v-2.25H13.5a.75.75 0 0 1 0-1.5h2.25v-2.25a.75.75 0 0 1 1.5 0v2.25h2.25a.75.75 0 0 1 0 1.5h-2.25v2.25a.75.75 0 0 1-1.5 0Zm-5.814-1.44.076.004a.75.75 0 0 1 0 1.492l-.076.004H4.5a.75.75 0 0 1 0-1.5h5.436Zm0-4.6a.75.75 0 0 1 0 1.5H4.5a.75.75 0 0 1 0-1.5h5.436Zm8.814-5.775c0-.32-.117-.615-.305-.821a.88.88 0 0 0-.65-.304H6.206a.88.88 0 0 0-.65.304 1.225 1.225 0 0 0-.305.821c0 .32.117.615.305.821a.88.88 0 0 0 .65.304h11.59a.88.88 0 0 0 .65-.304c.188-.206.305-.5.305-.821Zm1.5 0c0 .674-.243 1.334-.694 1.83a2.38 2.38 0 0 1-1.76.795H6.204a2.38 2.38 0 0 1-1.76-.795 2.724 2.724 0 0 1-.694-1.83c0-.674.243-1.334.694-1.83a2.38 2.38 0 0 1 1.76-.795h11.592a2.38 2.38 0 0 1 1.76.795c.451.496.694 1.156.694 1.83Z"})}))}var cs=t(61702),cc=t.n(cs),cu=(0,no.x)({dynamicPrimaryButton:[(0,nV.Li)("primary"),{'&[data-disabled="true"]':[{backgroundColor:ei.LU.backgroundHighest,color:ei.LU.foregroundDimmest,pointerEvents:"none",cursor:"default",":hover":{pointerEvents:"none",backgroundColor:ei.LU.interactiveBackground}}]}]});function cd(e){var n=e.primaryAction,t=e.status,r=e.disabled,i=e.disabledReason,o=e.isInMobileWorkspace,l=e.onClick,s="loading"===t,u={submit:{icon:s?(0,c.Y)(eM.A,{}):(0,c.Y)(sW.A,{}),alt:s?"Loading…":"Send",tooltip:i,dataCy:"ai-prompt-submit"},queue:{icon:s?(0,c.Y)(eM.A,{}):(0,c.Y)(cl,{}),alt:s?"Loading…":"Add to ".concat(ij.Gt),tooltip:i||"Add to ".concat(ij.Gt),dataCy:"ai-prompt-add-to-queue"},save:{icon:s?(0,c.Y)(eM.A,{}):(0,c.Y)(n_.A,{}),alt:s?"Loading…":"Save",tooltip:i,dataCy:"ai-prompt-save"}},d=(0,eI._)((0,a._)({},u[n]),{disabled:r,loading:s});if(o)return(0,c.Y)(sQ.J,{loading:d.loading,variant:"agent",alt:d.alt,disabled:d.disabled,onClick:l,dataCy:d.dataCy,iconOverride:d.icon});var p=(0,c.Y)(nc.K0,{alt:d.alt,tooltipBehavior:"hidden",disabled:d.disabled,onClick:l,dataCy:d.dataCy,css:cu.dynamicPrimaryButton,"data-disabled":d.disabled,"data-action":n,children:d.icon}),f="queue"===n;return f&&(p=(0,c.Y)(eF.$n,{css:cu.dynamicPrimaryButton,clsx:cc().compactButton,disabled:d.disabled,onClick:l,dataCy:d.dataCy,text:"Add to ".concat(ij.Gt),iconRight:d.icon})),(0,c.Y)(eP.ui,{elevated:!0,children:(0,c.Y)(nj.m_,{isDisabled:!d.tooltip||f,tooltip:d.tooltip,placement:"left",children:p})})}var cp=t(76947),cf=t.n(cp);function ch(e){var n=e.icon,t=e.onRemove,r=e.tooltip,i=e.pillType,o=void 0===i?"unknown":i,a=e.onIconClick;return(0,c.Y)(eP.ui,{elevated:!0,clsx:cf().container,children:(0,c.FD)(eN.S,{row:!0,align:"center",pl:2,children:[(0,c.Y)(nj.m_,{tooltip:r,children:(0,c.Y)(nc.K0,{alt:"Open agent settings",onClick:a,tooltipBehavior:"hidden",clsx:cf().iconClickable,size:24,children:n})}),(0,c.Y)(nc.K0,{alt:"Remove",onClick:function(){(0,er.u4)(er.AZ.AGENT_MODEL_SELECTOR_PILL_REMOVED,{pill_type:o}),t()},tooltipBehavior:"hidden",clsx:cf().closeButton,children:(0,c.Y)(r6.A,{size:12})})]})})}var cm=t(6013),cg=t(20701),cv=t(51638),cy=t(10292),cw=t(47045),cb=t(1017),cS=t.n(cb),cY=(0,no.x)({sendDisabled:[{backgroundColor:ei.LU.backgroundHighest,color:ei.LU.foregroundDimmest,pointerEvents:"none",cursor:"default",":hover":{pointerEvents:"none",backgroundColor:ei.LU.interactiveBackground}}],sendEnabled:[(0,nV.Li)("primary")]}),c_=en.Lz.theme((r={"&":{flexGrow:1},"& .cm-content":{fontFamily:ei.LU.fontFamilyDefault}},(0,o._)(r,"& .".concat(sL.Fb),{display:"none"}),(0,o._)(r,"& .cm-cursor",{borderLeftColor:ei.LU.foregroundDefault,borderLeftWidth:"1px"}),r));function cA(e){var n,t,r,d,p,f,b,S,Y,_,A,C,k,x,D,E,I,F,P=(0,h.NC)(),L=(0,sP.A)(),U=L.ref,N=L.view,M=(0,l._)((0,u.useState)(!1),2),V=M[0],Z=M[1],j=(0,l._)((0,u.useState)(!1),2),K=j[0],$=j[1],J=(0,w.m5)(),Q=(n=e.showAgentSettings,t=(0,y.A)(),r=(0,l._)((0,sO.JZ)(),1)[0],d=(0,rB.F)().isFreemiumStarterPlanUsersOwnRepl,f=(p=(0,sO.Q6)({variables:{replId:t},skip:!n})).data,b=p.loading,S=(null==f?void 0:f.getRepl.__typename)==="Repl"?f.getRepl.config.agentSettings:null,Y=(0,R._P)({controlName:"flag-explore-tool-type",type:"string",default:"None"}),_=(0,u.useMemo)(function(){var e,n,t,r,i;return{thinkingEnabled:!d&&null!=(e=null==S?void 0:S.thinkingEnabled)&&e,modelProfile:d?e8.Fje.ModelProfileStandard:null!=(n=null==S?void 0:S.modelProfile)?n:e8.Fje.ModelProfileStandard,enableAutomatedTesting:null!=(t=null==S?void 0:S.enableAutomatedTesting)&&t,samplingRate:null!=(r=null==S?void 0:S.samplingRate)?r:0,webSearchEnabled:"None"!==Y&&(null==(i=null==S?void 0:S.webSearchEnabled)||i)}},[S,Y,d]),C=(0,u.useCallback)((A=(0,i._)(function(e){var n,i;return(0,s.YH)(this,function(o){switch(o.label){case 0:n=(0,a._)({},_,e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r({variables:{input:{id:t,agentSettings:n}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{__typename:"Repl",id:t,config:{__typename:"ReplConfig",agentSettings:(0,a._)({__typename:"AgentSettings"},n)}}}}})];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),ne.Cp(i,{extra:{message:"Error updating agent settings",replId:t,attemptedSettings:n,currentSettings:_}}),[3,4];case 4:return[2]}})}),function(e){return A.apply(this,arguments)}),[_,t,r]),n?{settings:_,updateSettings:C,loading:b}:null),X=e.hasFlagPlanInWorkspace,ee=H(),en=(0,h.Ik)(),et=null!=(x=e.status)?x:"composing",er=(0,ev.Vn)(N,s1.Im),eo=(0,v.A)().showError,ea=(0,s1.hk)({text:null!=(D=e.placeholderText)?D:"Message Agent…",disableAnimation:e.disablePlaceholderTextAnimation}),el=s0.bZ.use(2e3),ef=(0,cv.j)(e.persistenceKey,N),eh=ef.persistPromptDraftCompartment,em=ef.clearPersistedPromptDraft,ey=(0,cw.e)(),eb=(0,sJ.s)(),eS=eb.attachments,eY=eb.urlAttachments,e_=eb.removeAttachment,eA=eb.addAttachments,eC=eb.addUrlAttachment,ex=eb.removeUrlAttachment,eD=eb.clearAttachments,eE=eb.isLoading,eI=null!=(E=(0,ev.Vn)(N,cg.Wd))?E:[],eT=!!(0,u.useContext)(ew),eF=null!=(I=(0,ev.Vn)(N,ep))&&I;k=(0,u.useContext)(ew),(0,u.useEffect)(function(){var e=null==N?void 0:N.plugin(ev.Pb);if(k&&N&&e&&!e.destroyed){var n=e.bind({changed:function(e){return(0,q.$H)(e,ed)},callback:function(e){k.secrets.set(e.state.field(ed))},destroy:function(){k.secrets.set([])}}),t=k.replaceListeners.add(function(e){for(var n=[],t=N.state.field(eu).iter(),r=new Set;t.value;){if(!t.value.dismissed&&e[t.value.id]){var i="`".concat(e[t.value.id],"`");n.push({from:t.from,to:t.to,insert:i}),r.add(t.value.provider)}t.next()}n.length&&N.dispatch({changes:n,annotations:ec.of({providers:Array.from(r)})})}),r=k.dismissListeners.add(function(){N.dispatch({effects:es.of(!0)})});return function(){n(),t(),r()}}},[N,k]);var eL=(0,u.useCallback)(function(e){N&&N.dispatch(N.state.update({changes:{from:0,to:N.state.doc.length,insert:e}}))},[N]),eU=(0,sX.A)({addAttachments:eA}),eO=eU.isDraggedOver,eH=eU.drop,eB=(0,m.J2)(eE,!1),ez=(0,m.Rj)(function(){return eS.map(function(e){return e.length>0})},[eS]),eW=e.requireTextToSubmit&&er||er&&!ez&&"composing"===et||"loading"===et||e.isSubmitDisabled||!!e.disabled||eB||eF,eG=e.submitDisabledReason;eF?eG="Please add secret or dismiss the warning":eB&&(eG="Please wait for files to finish uploading");var eV=e.onSubmit,eZ=null==Q?void 0:Q.settings,ej=(0,O.h)(z),eq=(0,O.ob)(z),eK=W(),e$=(0,O.h)(G),eJ=(0,O.ob)(G),eQ=(0,u.useCallback)(function(e){var n=e.plannerItemId,t=e.plannerItemText;N&&(N.dispatch({changes:{from:0,to:N.state.doc.length,insert:t},selection:{anchor:t.length,head:t.length}}),eq(n),N.focus())},[N,eq]),eX=(0,u.useCallback)(function(e){eV({message:e,attachments:[],quickEdit:V,agentConfig:eZ})},[eV,V,eZ]),e0=(0,u.useCallback)((0,i._)(function(){var e;return(0,s.YH)(this,function(n){switch(n.label){case 0:if(eW||!N)return[2];if(e=N.state.doc.toString(),em(),eV({message:e,attachments:(0,ek._)(eS.current).concat((0,ek._)(eY.current.map(function(e){return e.file}))),quickEdit:V,agentConfig:eZ}),eD(),N.dispatch({effects:cg.Ff.of(null)}),N.dispatch({changes:{from:0,to:N.state.doc.length}}),!(X&&(ej||e$.length>0)))return[3,2];return[4,Promise.all(Array.from(new Set((0,ek._)(ej?[ej]:[]).concat((0,ek._)(e$)))).map(function(e){return P.planner.delete({id:e})}))];case 1:n.sent(),eq(null),eJ([]),n.label=2;case 2:return[2]}})}),[eW,N,em,eS,eY,eV,V,eZ,eD,X,ej,e$,P,eq,eJ]),e1=(0,cy.F)({view:N,setPromptEditor:e.inputRef}),e2=cm.U.use({addAttachments:eA,onAutoAttachedLargePaste:function(n){(0,nw.p)({action:"auto_attached_large_paste",fileSize:n,sessionId:e.sessionId})}}),e4=(0,T.S)([eH,e1],{breadcrumb:"client/workspace/components/Agent/Chat/InputBox/index.tsx:298"}),e5=(0,m.J2)(eS),e3=lP({sessionId:e.sessionId}),e7=(0,eR.sz)()||e3,e6=B(),e9=(0,u.useCallback)((0,i._)(function(){var e,n,t;return(0,s.YH)(this,function(r){switch(r.label){case 0:if(!X||!(n=null!=(e=null==N?void 0:N.state.doc.toString())?e:"").trim())return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,P.planner.create({text:n.trim()})];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),eo("Failed to add message to queue"),ne.Cp(t),[2];case 4:return N&&N.dispatch({changes:{from:0,to:N.state.doc.length},effects:cg.Ff.of(null)}),eD(),e6(!0),[2]}})}),[N,eD,e6,X,P,eo]),nn=(0,u.useCallback)((0,i._)(function(){var e,n,t;return(0,s.YH)(this,function(r){switch(r.label){case 0:if(!X||!ej)return[2];return n=null!=(e=null==N?void 0:N.state.doc.toString())?e:"",[4,P.planner.update({id:ej,text:n})];case 1:if(!r.sent().ok)return[3,4];if(!((t=e$.filter(function(e){return e!==ej})).length>0))return[3,3];return[4,Promise.all(t.map(function(e){return P.planner.delete({id:e})}))];case 2:r.sent(),r.label=3;case 3:return null==N||N.dispatch({changes:{from:0,to:N.state.doc.length,insert:""},effects:cg.Ff.of(null)}),eD(),eq(null),cg.Ff.of(null),eJ([]),e6(!0),[3,5];case 4:eo("Failed to save queued message"),r.label=5;case 5:return[2]}})}),[X,ej,N,P,e$,eD,eq,eJ,e6,eo]),nt=(0,u.useMemo)(function(){return X&&"approved"===en?e7?ej?"save":"queue":"submit":"submit"},[X,ej,e7,en]),nr=(0,u.useCallback)(function(){switch(nt){case"submit":e0();break;case"queue":e9();break;case"save":nn()}},[nt,e0,e9,nn]),ni=(0,g.A)(nr),no=cC.use({onPrimaryAction:(0,u.useCallback)(function(){ni.current()},[ni])}),na=X&&("queue"===nt||"save"===nt);return(0,c.FD)(eN.S,{css:nl.wp.position.relative,children:[X&&!eK?(0,c.Y)(sK,{onEnterEditMode:eQ,sendMessage:eX}):null,(0,c.Y)(eN.S,{clsx:cS().wrapper,children:(0,c.Y)(eN.S,{gap:4,children:(0,c.FD)(eP.ui,{p:4,gap:4,grow:!0,shrink:!0,clsx:[cS().surface,(0,o._)({},cS().withFullWidthStatusBar,X&&!e.hasInitialPlanningLayout&&e.sessionId)],innerRef:e4,style:{borderColor:eO?ei.LU.accentPrimaryDefault:void 0},"aria-disabled":!!e.disabled||void 0,"data-planner-connected":ee&&X,onClick:function(e){e.target===e.currentTarget&&(null==N||N.focus())},children:[null!=(F=e.header)?F:null,(0,c.FD)(eN.S,{grow:!0,shrink:!0,gap:4,children:[(0,c.Y)(aJ.A,{clsx:cS().attachments,detectedUrls:eI.map(function(e){return(0,c.Y)(ca.A,{url:e,addUrlAttachment:eC,removeUrlAttachment:ex,onError:eo},e)}),fileAttachments:e5.map(function(e){return(0,c.Y)(aQ.m1,{attachment:e,removeAttachment:e_,getAttachmentTypeDisclaimer:(0,aX.F)({aiName:(0,ij.Nn)({capitalizeFirstChar:!0})})},e.path)})}),(0,c.Y)(sF.A,{"data-chromatic":"ignore",ref:U,clsx:cS().codemirror,style:{cursor:e.disabled?"default":void 0},fontSize:14,readOnly:e.disabled,extensions:[c_,no,e2,ea,s0.tP,el,eh,sT.r,sI.N,eT?eg:[],ey?[]:cg.fd],id:"ai-prompt-input","data-cy":"ai-prompt-input"})]}),(0,c.FD)(eN.S,{row:!0,gap:4,clsx:cS().primaryButtonGroup,pb:2,justify:"space-between",align:"end",onClick:function(e){e.target===e.currentTarget&&(null==N||N.focus())},children:[(0,c.FD)(eN.S,{row:!0,gap:J?12:4,align:"center",children:[(0,c.Y)(eP.ui,{elevated:!0,children:(0,c.Y)(co.e,{disabled:e.disabled||na,disabledReason:na?"Attachments are unavailable for queued messages":void 0,status:et,addAttachments:eA})}),(0,c.Y)(s$.A,{getCurrentText:function(){var e;return null!=(e=null==N?void 0:N.state.doc.toString())?e:""},onUpdateText:eL}),e.showVisualSelector?(0,c.Y)(eP.ui,{elevated:!0,children:(0,c.Y)(s2.G,{context:"agent",disabled:na,disabledReason:na?"Visual selection is unavailable for queued messages":void 0})}):null,Q?(0,c.Y)(eP.ui,{elevated:!0,children:(0,c.Y)(cn,{disabled:e.disabled||Q.loading,settings:Q.settings,update:Q.updateSettings,isOpen:K,onOpenChange:$})}):null,(null==Q?void 0:Q.settings.thinkingEnabled)?(0,c.Y)(eP.ui,{elevated:!0,children:(0,c.Y)(ch,{icon:(0,c.Y)(rA.A,{size:16}),onRemove:function(){return Q.updateSettings({thinkingEnabled:!1})},tooltip:(0,c.Y)(a7,{type:"extendedThinking"}),pillType:"extended_thinking",onIconClick:function(){return $(!0)}})}):null,(null==Q?void 0:Q.settings.modelProfile)===e8.Fje.ModelProfileAdvanced?(0,c.Y)(eP.ui,{elevated:!0,children:(0,c.Y)(ch,{icon:(0,c.Y)(rC.A,{size:16}),onRemove:function(){return Q.updateSettings({modelProfile:e8.Fje.ModelProfileStandard})},tooltip:(0,c.Y)(a7,{type:"highPowerModel"}),pillType:"high_power_model",onIconClick:function(){return $(!0)}})}):null,e.showQuickEditModeButton?(0,c.Y)(eP.ui,{elevated:!0,children:(0,c.Y)(sN,{isEnabled:V,onChange:Z})}):null]}),(0,c.FD)(eN.S,{pr:2,align:"center",row:!0,gap:8,children:[X?(0,c.Y)(cd,{primaryAction:nt,status:et,disabledReason:eG,disabled:eW,isInMobileWorkspace:J,onClick:nr}):null,J&&!X?(0,c.Y)(sQ.J,{loading:"loading"===et,variant:"agent",alt:"composing"===et?"Send":"Loading…",disabled:eW,onClick:e0,dataCy:"ai-prompt-submit"}):null,J||X?null:(0,c.Y)(eP.ui,{elevated:!0,clsx:cS().submitButton,children:(0,c.Y)(nj.m_,{isDisabled:!eG,tooltip:eG,children:(0,c.Y)(nc.K0,{alt:"composing"===et?"Send":"Loading…",tooltipBehavior:"hidden",disabled:eW,onClick:e0,dataCy:"ai-prompt-submit",css:eW?cY.sendDisabled:cY.sendEnabled,children:"composing"===et?(0,c.Y)(sW.A,{}):(0,c.Y)(eM.A,{})})})})]})]})]})})})]})}var cC=new oh.k(function(e){var n=e.onPrimaryAction,t=e.preventSubmitOnEnter;return en.Lz.domEventHandlers({keydown:function(e,r){(0,sR.lq)(r.state).length>0||!t&&("Enter"===e.key&&e.metaKey&&e.stopPropagation(),"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n()))}})}),ck="The agent can create a database to keep your app's user data persistent even when your app is stopped.\nYour app's database is managed on Replit. You can view the created database in\nthe Database pane.",cx=(0,no.x)({container:[{animation:"slideUp 0.2s ease-out"},{"@keyframes slideUp":{from:{opacity:0,transform:"scale(0.95)"},to:{opacity:1,transform:"scale(1)"}}}],toolButton:[nl.wp.p(6),nl.wp.color.foregroundDefault,rK.b.filledAndOutlined,{borderColor:ei.LU.backgroundHigher,minHeight:"36px"}],buttonContainer:[nl.wp.gap(8),(0,o._)({display:"flex",flexWrap:"nowrap"},"@container (max-width: ".concat(on.LO.mobileMax,"px)"),{flexWrap:"wrap"})],newSessionText:[{whiteSpace:"nowrap"}],tooltip:{flexShrink:1}}),cD=(0,u.memo)(function(e){var n=e.onAddDatabase,t=e.onSuggestionsToggle,r=(0,l._)((0,u.useState)(!0),2),i=r[0],o=r[1],a=(0,l._)((0,u.useState)(!1),2),s=a[0],d=a[1],p=(0,l._)((0,u.useState)(!1),2),f=p[0],h=p[1],m=(0,w.m5)(),g=(0,tT.GK)(function(){t(),o(!1)}),v=g.loading,y=g.database;return i?(0,c.FD)(eN.S,{gap:8,wrap:"nowrap",css:cx.container,p:6,children:[(0,c.FD)(eN.S,{row:!0,gap:4,align:"center",children:[(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",children:y?"Database ready":"Add a database to store user data"}),(0,c.Y)(nj.m_,{tooltip:ck,placement:"top",children:(0,c.Y)(rF.A,{size:16,onClick:function(){m&&d(!s)}})}),(0,c.Y)(nY.a,{isOpen:s,onRequestClose:function(){return d(!1)},children:(0,c.Y)(eN.S,{children:(0,c.Y)(eL.EY,{children:ck})})})]}),(0,c.FD)(eN.S,{css:cx.buttonContainer,row:!0,children:[(0,c.Y)(cE,{disabled:f||v,colorway:"primary",toolIcon:y?(0,c.Y)(n_.A,{}):f||v?(0,c.Y)(eM.A,{}):(0,c.Y)(rW.A,{}),tooltip:"Create a database to keep user data persistent",description:y?"Database ready":f?"Adding database...":"Add a database",onClick:function(){h(!0),t(),n()}}),(0,c.Y)(cE,{tooltip:"Continue working without a database",description:"Maybe later",onClick:function(){o(!1),t()},backgroundColor:ei.LU.backgroundHighest})]})]}):null});function cE(e){var n=e.toolIcon,t=e.tooltip,r=e.description,i=e.onClick,o=e.rightIcon,a=e.disabled,l=e.outlined,s=e.backgroundColor,u=e.colorway;return(0,c.Y)(nj.m_,{tooltip:t,css:cx.tooltip,children:(0,c.Y)(eF.$n,{colorway:u,variant:l?"outlined":"default",disabled:a,onClick:i,iconLeft:n,iconRight:o,style:s?{backgroundColor:s}:{},css:cx.toolButton,text:(0,c.Y)(eL.EY,{css:cx.newSessionText,children:r})})})}var cR=t(66485),cI=t(61191),cT=t(51349),cF=t(43258),cP=t(45004),cL=t.n(cP);function cU(e,n){(0,u.useEffect)(function(){if(!n){var t=function(n){"Enter"===n.key&&(0,cR.T$)(n)&&(n.preventDefault(),e())};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}},[e,n])}function cN(){return(0,c.Y)(cT._y,{keyCombo:(0,cI.FM)({cmdOrCtrl:!0,key:"Enter"}),small:!0,hideBorder:!0})}function cO(){return(0,c.Y)(eP.ui,{className:cL().dialog,gap:8,elevated:!0,children:(0,c.Y)(cz,{isThinking:!0,statusText:"Thinking…"})})}function cM(){return(0,c.Y)(eP.ui,{className:cL().dialog,gap:8,elevated:!0,children:(0,c.Y)(cz,{isThinking:!1,statusText:"Plan approved"})})}function cH(e){var n=e.startedAt,t=e.isDesigning,r=void 0!==t&&t,i=e.isInMobileWorkspace,o=e.onApprovePlan,a=e.onRevisePlan;cU(o,i);var s=lN(n),d=(0,l._)((0,u.useState)("Approve plan"),2),p=d[0],f=d[1],h=(0,l._)((0,u.useState)("Ready to build? Approve the plan when you’re ready."),2),m=h[0],g=h[1],v=(0,l._)((0,u.useState)("Edit"),2),y=v[0],w=v[1],b=(0,I.A)(function(e){var n,t,i,o=e.width;r&&(f((n=o)<450?"Approve":n<600?"Approve plan":"Approve plan & start"),g((t=o)<400?"Approve when ready.":t<540?"Approve the plan when you’re ready.":"Ready to build? Approve the plan when you’re ready."),w((i=o)<420?"":i<640?"Edit":"Edit plan"))});return(0,c.FD)(eP.ui,{className:cL().dialog,gap:4,elevated:!0,innerRef:b,children:[r?(0,c.FD)(eN.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,c.Y)(eL.EY,{className:cL().bodyText,shrink:!0,multiline:!1,children:m}),(0,c.FD)(eN.S,{row:!0,gap:8,shrink:!0,children:[(0,c.Y)(eF.$n,{text:y,onClick:a,iconLeft:(0,c.Y)(lM.A,{}),shrink:!0}),(0,c.Y)(eF.$n,{colorway:"blurple",text:p,onClick:o,iconLeft:(0,c.Y)(n_.A,{}),iconRight:i?void 0:(0,c.Y)(cN,{}),shrink:!0})]})]}):null,(0,c.Y)(cz,{isThinking:!0,statusText:(0,c.FD)(c.FK,{children:[(0,c.Y)("strong",{children:"Working"}),s?(0,c.FD)("span",{className:cL().elapsedTime,"data-chromatic":"ignore",children:[" ","— ",s," elapsed"]}):null]})})]})}function cB(e){var n=e.supportsVisualPreview,t=e.isInMobileWorkspace,r=e.onStartBuilding,i=e.onRevisePlan;cU(r,t);var o=(0,l._)((0,u.useState)("Approve plan & start"),2),a=o[0],s=o[1],d=(0,I.A)(function(e){s(function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e<280&&n?"":e<320?"Approve":e<400?"Approve plan":"Approve plan & start"}(e.width,!1))});return(0,c.FD)(eP.ui,{className:cL().dialog,gap:8,elevated:!0,innerRef:d,children:[(0,c.FD)(eL.EY,{textWrap:"pretty",children:[n?"Review the plan & visual preview. If everything looks good, click approve to start building. ":"Review the plan and approve it if everything looks good. ","You can also make revisions by chatting with me."]}),(0,c.Y)(eN.S,{gap:8,children:(0,c.FD)(eN.S,{row:!0,gap:8,children:[(0,c.Y)(eF.$n,{className:cL().option,text:"Keep chatting",onClick:i,iconLeft:(0,c.Y)(cF.A,{})}),(0,c.Y)(eF.$n,{className:cL().option,text:a,onClick:r,iconLeft:(0,c.Y)(n_.A,{}),iconRight:t?void 0:(0,c.Y)(cN,{}),colorway:"blurple"})]})}),(0,c.Y)(cz,{isThinking:!1,statusText:"Waiting for your response"})]})}function cz(e){var n=e.isThinking,t=e.statusText;return(0,c.Y)(eN.S,{row:!0,gap:8,justify:"space-between",align:"center",wrap:!0,clsx:cL().statusRow,children:(0,c.FD)(eN.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(lO.l,{loading:n,size:16}),(0,c.Y)(eL.EY,{color:"dimmer",clsx:[cL().statusText,n?cL().statusTextThinking:void 0],children:t})]})})}var cW=t(81986);function cG(e){return e.getTime()-Date.now()}var cV=(0,na.v)(["barTransform"]),cZ=cV.cssVars,cj=cV.styleTokens,cq=(0,no.x)({root:[nl.wp.position.relative,nl.wp.height(2),nl.wp.backgroundColor.backgroundHighest,nl.wp.borderRadius(),nl.wp.overflow("hidden")],bar:[nl.wp.backgroundColor.foregroundDefault,{position:"absolute",bottom:0,left:0,height:"100%",width:"100%",transform:cj.barTransform,transformOrigin:"left"}]});function cK(e){var n=e.advanceAt,t=e.onAdvance,r=e.onTick,i=e.paused,a=void 0!==i&&i,l=(0,m.HJ)(0),s=(0,m.HJ)(0),d=(0,u.useRef)(null);return(0,cW.d)(d,s,function(e){return(0,o._)({},cZ.barTransform,"scaleX(".concat(e,")"))}),(0,u.useEffect)(function(){var e=null,i=cG(n);return a?e&&cancelAnimationFrame(e):!function o(){var a=cG(n),c=Math.ceil(a/1e3);if(l.set(c),s.set(1-a/i),c<=0)return void t();null==r||r(c),e=requestAnimationFrame(o)}(),function(){e&&cancelAnimationFrame(e)}},[n,s,l,t,r,a]),(0,c.Y)("div",{css:cq.root,ref:d,children:(0,c.Y)(eN.S,{css:cq.bar})})}var c$=(0,no.x)({root:[nl.wp.position.relative,nl.wp.borderRadius(),nl.wp.overflow("hidden")],progressBar:[nl.wp.zIndex(1),nl.wp.borderRadius(0,0,4,4),nl.wp.overflow("hidden"),{transform:"translateY(-100%)"}]});function cJ(e){var n=e.advanceAt,t=e.onAdvance,r=e.continueText,i=e.continuedText,o=e.className,a=e.colorway,s=(0,l._)((0,u.useState)(function(){return Math.ceil(cG(n)/1e3)}),2),d=s[0],p=s[1],f=(0,l._)((0,u.useState)(!1),2),h=f[0],m=f[1],g=(0,u.useCallback)(function(){m(!0),t()},[t]),v=h?void 0===i?"Continued":i:"".concat(void 0===r?"Continue":r," (").concat(d,"s)");return(0,c.FD)(eN.S,{css:c$.root,className:o,children:[(0,c.Y)(eF.$n,{iconLeft:h?(0,c.Y)(n_.A,{}):(0,c.Y)(lJ.A,{}),disabled:h,text:v,onClick:function(){return t()},colorway:void 0===a?"primary":a}),h?null:(0,c.Y)("div",{css:c$.progressBar,children:(0,c.Y)(cK,{advanceAt:n,onAdvance:g,onTick:p,paused:h})})]})}var cQ=t(49795),cX=t.n(cQ);function c0(e){var n=e.queryRequest,t=e.queryRequestEventId,r=e.sendAskUserForActionResponse,i=(0,u.useCallback)(function(e){r({type:"queryResponse",data:e,requestEventId:t})},[r,t]);return(0,c.FD)(eP.ui,{clsx:cX().root,gap:8,elevated:!0,children:[(0,c.Y)(eL.EY,{children:n.contextSummary}),n.queries.map(function(e){var n,t=(null==e||null==(n=e.queryType)?void 0:n.$kind)||"";return(0,P.VF)(e.queryType,"booleanQuery")?(0,c.Y)(c1,{query:e.queryType.booleanQuery,sendResponse:i},t):(0,P.VF)(e.queryType,"choiceQuery")?(0,c.Y)(c2,{query:e.queryType.choiceQuery,sendResponse:i},t):(0,P.VF)(e.queryType,"textQuery")?(0,c.Y)(c4,{query:e.queryType.textQuery,sendResponse:i},t):void 0})]})}function c1(e){var n=e.query,t=e.sendResponse,r=(0,u.useMemo)(function(){return new Date(Date.now()+5e3)},[]),i=(0,l._)((0,u.useState)(!1),2),o=i[0],a=i[1];function s(e){return function(){a(!0),t({responses:[{responseType:{$kind:"booleanResponse",booleanResponse:{response:e}}}]})}}var d=n.question,p=n.confirmText,f=n.rejectText,h=n.allowAutoConfirm;return(0,c.FD)(eN.S,{gap:8,children:[(0,c.Y)(n0.d2,{text:d}),(0,c.FD)(eN.S,{row:!0,gap:8,clsx:cX().optionsRow,children:[h?(0,c.Y)(cJ,{clsx:cX().optionGrow,advanceAt:r,onAdvance:s(!0),continueText:p||"Yes",continuedText:p||"Confirmed"}):(0,c.Y)(eF.$n,{clsx:cX().optionGrow,text:p||"Yes",onClick:s(!0),colorway:h?"primary":void 0,disabled:o}),(0,c.Y)(eF.$n,{clsx:cX().optionGrow,text:f||"No",onClick:s(!1),disabled:o})]})]})}function c2(e){var n=e.query,t=e.sendResponse;return(0,c.FD)(eN.S,{clsx:cX().form,gap:8,children:[(0,c.Y)(eL.EY,{clsx:cX().question,children:(0,c.Y)(n0.d2,{text:n.question})}),(0,c.Y)(eN.S,{row:!0,gap:8,clsx:cX().optionsRow,children:n.options.map(function(e){return(0,c.Y)(eF.$n,{text:e,onClick:function(){return t({responses:[{responseType:{$kind:"choiceResponse",choiceResponse:{response:e}}}]})}},e)})})]})}function c4(e){var n=e.query;return(0,c.FD)(eN.S,{clsx:cX().form,gap:8,children:[(0,c.Y)(eL.EY,{clsx:cX().question,children:(0,c.Y)(n0.d2,{text:n.question})}),(0,c.Y)(nZ.pd,{placeholder:n.responsePlaceholderText})]})}var c5=t(97802),c3=t(92104),c7=t.n(c3);function c6(e){var n=e.runAgent,t=(0,y.A)(),r=(0,l._)((0,u.useState)(!1),2),i=r[0],o=r[1];return(0,c.FD)(c.FK,{children:[(0,c.FD)(eP.ui,{clsx:c7().root,gap:4,p:8,elevated:!0,children:[(0,c.FD)(eL.EY,{clsx:c7().text,children:["You've hit the monthly budget. Increase your usage budget to continue using the Agent."," "]}),(0,c.Y)(eN.S,{clsx:c7().buttonContainer,row:!0,children:(0,c.Y)(eF.$n,{clsx:c7().budgetButton,iconLeft:(0,c.Y)(nE.A,{}),text:"Increase budget",onClick:function(){return o(!0)},variant:void 0})})]}),(0,c.Y)(nY.a,{isOpen:i,onRequestClose:function(){return o(!1)},children:(0,c.Y)(c5.h,{style:"borderless",replId:t,onUpdateSuccess:function(){o(!1),n()}})})]})}var c8=t(95553),c9=t(76477),ue=t(18404),un=t.n(ue);function ut(){var e=(0,l._)((0,u.useState)(!1),2),n=e[0],t=e[1],r=(0,c8.A)();return(0,c.FD)(eP.ui,{elevated:!0,clsx:un().root,py:8,px:12,gap:8,align:"center",children:[(0,c.FD)(eL.EY,{clsx:un().text,children:["You've reached your ",tb.Lm," usage limit"]}),(0,c.Y)(eN.S,{clsx:un().buttonContainer,row:!0,children:(0,c.Y)(eF.$n,{text:"Upgrade to ".concat(tb.en," to continue using ").concat(ij.g$),iconLeft:(0,c.Y)(c9.A,{}),onClick:function(){return t(!0)},colorway:"primary",variant:"outlined",clsx:un().upgradeButton})}),(0,c.Y)(tY.default,{isOpen:n,onClose:function(){return t(!1)},type:"purchase",analyticsContext:{upgrade:{context:"agent_freemium_quota"}},onPurchaseComplete:function(){return r()},reloadPageAfterPurchaseComplete:!0})]})}var ur=t(66113),ui=t.n(ur);function uo(e){var n=e.onNewSession,t=e.shouldUseFullWidth;return(0,c.FD)(eN.S,{clsx:[ui().root,(0,o._)({},ui().fullWidth,t)],gap:8,p:8,justify:"center",align:"center",children:[(0,c.Y)(eL.EY,{variant:"small",color:"dimmer",children:"This chat has ended"}),(0,c.Y)(eF.$n,{iconLeft:(0,c.Y)(lO.l,{size:16}),onClick:n,text:"Start a new ".concat(ij.g$," chat")})]})}var ua={direction:"reverse",state:{content:null,eventId:null,respondedEventId:null},map:function(e){return{content:e.content,eventId:e.eventId}},reducer:function(e,n){if((0,F.TW)(e,"agentAskUserForActionResponse")){var t=(0,P.QN)(e.contents.contents).response;return t&&(0,P.VF)(t,"queryResponse")&&(n.respondedEventId=e.id),!1}if((0,F.TW)(e,"agentAskUserForActionRequest")){var r=(0,P.QN)(e.contents.contents).request;if(r&&(0,P.VF)(r,"queryRequest")&&n.respondedEventId!==e.id)return n.content={$kind:"queryRequest",queryRequest:r.queryRequest},n.eventId=e.id,!1;r&&(0,P.VF)(r,"markTaskCompleteRequest")&&n.respondedEventId!==e.id&&(n.content={$kind:"markTaskCompleteRequest",markTaskCompleteRequest:r.markTaskCompleteRequest},n.eventId=e.id)}}},ul=t(46011),us={direction:"reverse",state:{show:!1,pendingRapidBuildFeedback:!1,sentMessages:new Set,acknowledgedMessages:new Set},map:function(e){if(e.pendingRapidBuildFeedback&&0===e.sentMessages.size)return!1;var n=!0,t=!1,r=void 0;try{for(var i,o=e.sentMessages[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!e.acknowledgedMessages.has(a))return!1}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e.show},reducer:function(e,n){var t=e.contents.contents;if((0,P.VF)(t,"agentAskUserForActionRequest")||(0,P.VF)(t,"messageEventContents")&&(n.sentMessages.add(e.id),n.pendingRapidBuildFeedback=!1,t.messageEventContents.content===ij.ay))return n.show=!1,!1;if((0,P.VF)(t,"agentTimelineEventContents")){if((0,P.VF)(t.agentTimelineEventContents.toolData,"ask_secrets"))return n.show=!1,!1;if((0,P.VF)(t.agentTimelineEventContents.toolData,"messageData")&&(n.pendingRapidBuildFeedback=!0),(0,P.VF)(t.agentTimelineEventContents.toolData,"acknowledgeUserMessage")){var r=t.agentTimelineEventContents.toolData.acknowledgeUserMessage.eventIds,i=!0,o=!1,a=void 0;try{for(var l,s=r[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;n.acknowledgedMessages.add(c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}}if((0,P.VF)(t,"databaseNudgeEventContents"))return n.show=!0,!1}},uc=t(38580),uu=t(2760),ud=t(93399),up=t.n(ud);function uf(e){var n,t,r,i=(t=(n=(0,l._)((0,u.useState)(null),2))[0],r=n[1],(0,h.zv)("received-completed-event",function(e){var n=e.event;switch(n.error.type){case E.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET:case E.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD:case E.fqQ.AI_QUOTA_REQUIRES_ACTIVE_SUBSCRIPTION:r(n.error);break;default:n.error.type===E.fqQ.EVENT_ERROR_TYPE_UNKNOWN&&n.error.message}}),t);return i?(0,c.Y)(eN.S,{px:8,children:(0,c.Y)(sv,{error:i})}):e.hasInitialPlanningLayout?(0,c.Y)(ug,(0,a._)({},e)):(0,c.Y)(eN.S,{clsx:up().root,children:(0,c.Y)(uh,(0,a._)({},e))})}function uh(e){var n,t,r,o,d,p,f,h,v,w,b,S,_,A,C,k,x,D,I,T,F,L,U,N,O,M,H,B,z=e.sendMessage,W=e.session,G=e.inputRef,V=e.onNewSession,Z=e.openPane,j=e.shouldInterruptAgentOnSubmit,q=void 0!==j&&j,K=e.onSubmit,$=(0,eC._)(e,["sendMessage","session","inputRef","onNewSession","openPane","shouldInterruptAgentOnSubmit","onSubmit"]),J={hasFlagAgentVisualEditorButton:(0,R._P)({controlName:"flag-agent-visual-editor-button"}),hasFlagQuickEditMode:(0,R._P)({controlName:"flag-quick-edit-mode"}),hasFlagAgentQueryRequest:(0,R._P)({controlName:"flag-agent-query-request"}),hasFlagPlanInWorkspace:(0,R._P)({controlName:"flag-plan-in-workspace"}),hasAgentModelSelectorFlag:(0,R._P)({controlName:"flag-agent-model-selector"})},Q=J.hasFlagAgentVisualEditorButton,X=J.hasFlagAgentQueryRequest,ee=J.hasFlagQuickEditMode,en=J.hasFlagPlanInWorkspace,et=J.hasAgentModelSelectorFlag,er=(0,rH.k)().hasAgentBillingV2,ei=(0,lE.Tr)().data,eo=null!=(H=null==ei||null==(M=ei.currentUser)?void 0:M.isStaff)&&H,ea=(0,lR.ET)(),el=ea.orgId,es=ea.orgSlug,ec=(0,eR.C9)(),eu=ec.agentState,ed=ec.updateAgentState,ep=(0,m.Rj)(function(){return null==eu?void 0:eu.map(function(e){return(null==e?void 0:e.state)===E.g32.AGENT_STATE_RUNNING})},[eu]),ef=(0,g.A)(K),eh=(0,u.useCallback)(function(e){q&&ep&&ed(E.g32.AGENT_STATE_PAUSED),null==(n=ef.current)||n.call(ef);var n,t=e.agentConfig?(0,eI._)((0,a._)({},e.agentConfig),{modelProfile:e.agentConfig.modelProfile===e8.Fje.ModelProfileAdvanced?E.Fje.MODEL_PROFILE_ADVANCED:E.Fje.MODEL_PROFILE_STANDARD}):void 0;z((0,eI._)((0,a._)({},e),{agentConfig:t}))},[z,q,ed,ep,ef]),em=lS(W),eg=eA(null!=(B=null==W?void 0:W.id)?B:null),ev=(0,sb.x)(),ew=(0,rB.F)(),eb=ew.isFreemiumStarterPlanUsersOwnRepl,eY=ew.refetch,e_=(0,R._P)({controlName:"flag-freemium-ai-load-shedder"}),ek=(b=(d=(t={variables:{replId:(0,y.A)()}},r=(0,a._)({},sk,t),o=Y.I(sD,r)).data,p=o.loading,f=o.error,w={orgId:(null==d?void 0:d.getRepl.__typename)==="Repl"?null==(n=d.getRepl.org)?void 0:n.id:void 0,loading:p,error:f}).orgId,S=w.loading,_=w.error,x=(A={variables:{orgId:b}},C=(0,a._)({},sk,A),k=Y.I(sE,C)).data,D=k.loading,I=k.error,T=k.refetch,S||D?{loading:!0,refetch:T}:_||I?{loading:!1,refetch:T}:void 0===b?{authorizations:(null==x||null==(v=x.currentUser)?void 0:v.personalOrgAuthorizations.__typename)==="OrgAuthorizations"?x.currentUser.personalOrgAuthorizations:void 0,loading:!1,refetch:T}:{authorizations:(null==x||null==(h=x.currentUser)?void 0:h.org.__typename)==="Org"?x.currentUser.org.authorizations:void 0,loading:!1,refetch:T}),ex=ek.authorizations,eD=ek.loading,eE=ek.refetch,eT=(0,sw.i)(),eF=eT.agentUsage,eL=eT.loading,eU=eT.refetch;(0,lT.A)({onChange:(0,i._)(function(){return(0,s.YH)(this,function(e){switch(e.label){case 0:return[4,Promise.all([eU(),eE(),eY()])];case 1:return e.sent(),[2]}})})});var eN=(0,m.Rj)(function(){return null==eu?void 0:eu.map(function(e){return null==e?void 0:e.reason})},[eu],{default:null}),eO=(F=(0,eR.C9)().agentState,U=(L=(0,l._)((0,u.useState)(!1),2))[0],N=L[1],O=(0,m.Rj)(function(){return W&&F?ey.cP.combine(W.reduce(us,100),F.select(function(e){return(null==e?void 0:e.state)!==E.g32.AGENT_STATE_RUNNING&&(null==e?void 0:e.state)!==E.g32.AGENT_STATE_PAUSING})).map(function(e){return e.every(Boolean)}):null},[W,F],{default:!1}),(0,ul.A)(O,1e3)&&!U?{addDatabase:function(){W&&((0,nw.p)({action:"create_database",sessionId:W.id}),W.appendEvent({kind:"message",message:ij.ay,intent:E.qRv.AGENT}),N(!0))},clear:function(){return N(!0)}}:null),eM=(0,m.Rj)(function(){return null==W?void 0:W.reduce(ua,10)},[W],{default:null}),eH=eS().inMessageSecrets.length>0;if(X&&(0,P.VF)(null==eM?void 0:eM.content,"queryRequest")&&eM.eventId)return(0,c.Y)(c0,{queryRequest:eM.content.queryRequest,queryRequestEventId:eM.eventId,sendAskUserForActionResponse:em});var eB=!(null==ex?void 0:ex.paidAgent.isAuthorized)&&(null==ex?void 0:ex.paidAgent.code)===e8.JBK.InsufficientBudget,ez=(null==eN?void 0:eN.$kind)==="authorizationFailed"&&eN.code===E.HkE.INSUFFICIENT_BUDGET;if(eB||ez)return(0,c.Y)(c6,{runAgent:function(){return ed(E.g32.AGENT_STATE_RUNNING)}});if(!eL&&eb&&!(null==eF?void 0:eF.isUnderQuota))return(0,c.Y)(ut,{});if(eb&&e_)return(0,c.Y)(sS.n,{aiName:ij.g$});if(eg)return(0,c.Y)(uo,{onNewSession:V,shouldUseFullWidth:en});if(ev)return(0,c.Y)(sY.c,{aiName:ij.g$});if(!eD&&!(null==ex?void 0:ex.paidAgent.isAuthorized)&&!(null==ex?void 0:ex.freeAgent.isAuthorized))return(0,c.Y)(eP.ui,{elevated:!0,clsx:up().requiresPaymentContainer,children:(0,c.Y)(uc.A,{owner:el&&es?{type:"org",slug:es}:void 0})});var eW=null;(eD||eL)&&(eW="Loading…");var eG=void 0;eH?eG=(0,c.Y)(l7,{openSecrets:function(){return Z({type:"envEditor"})}}):eO&&(eG=(0,c.Y)(cD,{onAddDatabase:eO.addDatabase,onSuggestionsToggle:eO.clear}));var eV=void 0;return eO&&(eV="Or continue working without a database…"),(0,c.Y)(cA,(0,eI._)((0,a._)({},$),{placeholderText:eV,header:eG,inputRef:G,sessionId:(null==W?void 0:W.id)||void 0,isSubmitDisabled:null!==eW,submitDisabledReason:eW,showVisualSelector:Q,showQuickEditModeButton:ee,showAgentSettings:eo||er&&et,hasFlagPlanInWorkspace:en,onSubmit:eh}))}function um(e){var n=e.isRevising,t=e.planRevisionMessage,r=e.isAgentRunning,i=e.isNarrowViewport,a=e.handleBackButtonClick,l=e.children;return(0,c.FD)(eN.S,{clsx:[up().root,(0,o._)({},up().isRevising,n)],children:[n?(0,c.FD)(eN.S,{row:!0,align:"center",py:8,gap:8,children:[(0,c.Y)(eF.$n,{onClick:a,text:t?"Cancel":r?"Resume":"Back",colorway:"primary",iconLeft:(0,c.Y)(uu.A,{}),size:"small"}),(0,c.Y)(t9.a,{clsx:up().revisionFeedbackMessage,colorway:"blurple",text:r?i?"Requesting edits will cancel in-progress work.":"".concat(ij.g$," is working. Requesting edits will cancel in-progress work."):"What would you like to change about the plan?"})]}):null,l]})}function ug(e){var n,t,r,o,d,p,f,g,y,b,S,Y,_,A,C,k,x,D,I,P,L,U=e.session,N=e.onStatusBarHeightChange,O=(0,eC._)(e,["session","onStatusBarHeightChange"]),M=(0,w.m5)(),H=(0,R._P)({controlName:"flag-agent-visual-editor-button"}),B=(D=(0,sy.e)(null!=U?U:null),I=(0,eR.sz)(),(0,u.useMemo)(function(){if(!(null==D?void 0:D.event))return{isAgentAwaitingUserResponse:!1,needsAgentAckForUserMessage:!1,isGeneratingInitialPlanSteps:!1};var e=(0,F.TW)(D.event,"agentPlanEventContents")&&D.event.contents.contents.agentPlanEventContents.requiresApproval;return{isAgentAwaitingUserResponse:!I&&(null==D?void 0:D.senderType)===E.utd.AI&&!e,needsAgentAckForUserMessage:(null==D?void 0:D.senderType)===E.utd.USER&&D.event.state===E.qOk.COMPLETE,isGeneratingInitialPlanSteps:(0,F.TW)(D.event,"agentPlanEventContents")&&D.event.state===E.qOk.IN_PROGRESS&&0===D.event.contents.contents.agentPlanEventContents.step.subSteps.length}},[D,I])),z=B.isAgentAwaitingUserResponse,W=B.needsAgentAckForUserMessage,G=B.isGeneratingInitialPlanSteps,V=(0,lI.d)("mobileMax"),Z=(0,h.Ik)(),j=(n=U,r=(null==(t=(0,sy.e)(n))?void 0:t.event)&&(0,F.TW)(null==t?void 0:t.event,"agentPlanEventContents"),o=(0,h.X1)(),r?null==o?void 0:o.eventCreatedAt:void 0),q=(0,h.RB)(),K=(d=U,p=O.planVersions,f=(0,h.oo)(),g=(0,h.MG)(),y=(0,h.X1)(),b=(0,h.JP)(),S=(0,h.RB)(),Y=eD(null!=d?d:void 0),_=(0,v.A)().showError,A=null==d?void 0:d.id,(0,u.useCallback)((0,i._)(function(){var e,n,t,r;return(0,s.YH)(this,function(i){switch(i.label){case 0:e=f(),i.label=1;case 1:var o,l,s,c;if(i.trys.push([1,3,,4]),!y)throw Error("No plan to approve");if("approved"===e)throw Error("Plan already approved");return g("approved"),n=p.size,(0,nw.Y)({action:"plan_approved",sessionId:A,planBlueprints:y.step.blueprints,isLatestPlanProposal:p.get(y.planId)===n,numPlansProposed:p.size,planSupportsVisualPreview:S,didVisualPreviewComplete:y.eventState===E.qOk.COMPLETE&&S}),t=b(),[4,Y((0,eI._)((0,a._)({},(o=y,s=(l=t).removedInitialVersionStepIds,c=l.removedLaterStepIds,(0,nn.jM)(o,function(e){e.step.subSteps.length>0&&c.length>0&&(e.step.subSteps=e.step.subSteps.filter(function(e){return!c.includes(e.id)})),e.step.subSteps[0]&&s.length>0&&(e.step.subSteps[0].subSteps=e.step.subSteps[0].subSteps.filter(function(e){return!s.includes(e.id)}))}))),{approvedDesignReferenceFilePath:y.designReferenceFilePaths[0]}))];case 2:return i.sent(),[3,4];case 3:return _((r=i.sent())instanceof Error?r.message:"Failed to approve plan"),g(e),[3,4];case 4:return[2]}})}),[Y,y,_,A,p,S,b,f,g])),$=O.planVersions.size>0,J=(0,h.MG)(),Q=(C=U,null!=(k=null==(x=(0,m.Rj)(function(){return null==C?void 0:C.reduce(uv,10)},[C]))?void 0:x.didAcknowledge)&&k),X=(0,eR.C9)().agentState,ee=(0,m.Rj)(function(){return null==X?void 0:X.map(function(e){return(null==e?void 0:e.state)===E.g32.AGENT_STATE_RUNNING})},[X]),en=(0,l._)((0,u.useState)(!1),2),et=en[0],er=en[1];function ei(){J("revising"),(0,nw.Y)({action:"plan_revision_initiated",sessionId:null==U?void 0:U.id,planSupportsVisualPreview:q,didVisualPreviewComplete:!0})}function eo(){return ea.apply(this,arguments)}function ea(){return(ea=(0,i._)(function(){return(0,s.YH)(this,function(e){return er(!0),J("revising"),(0,nw.Y)({action:"plan_revision_initiated",sessionId:null==U?void 0:U.id,planSupportsVisualPreview:q,didVisualPreviewComplete:!1}),[2]})})).apply(this,arguments)}var el=lq(U).summary;switch(Z){case null:if(z)break;if(!Q){L=(0,c.Y)(cO,{});break}P=(0,c.Y)(l4,{labelText:null!=el?el:"Making an implementation plan…"}),L=(0,c.Y)(cH,{startedAt:j,isInMobileWorkspace:M,onApprovePlan:K,onRevisePlan:eo});break;case"generating":var es=q&&!G;P=G?(0,c.Y)(l4,{labelText:null!=el?el:"Making an implementation plan…"}):q?(0,c.Y)(l4,{labelText:null!=el?el:"Designing a visual preview…"}):null,L=(0,c.Y)(cH,{startedAt:j,isDesigning:es,isInMobileWorkspace:M,onApprovePlan:K,onRevisePlan:eo});break;case"iterating":if(z&&!$)break;if(ee||W){L=(0,c.Y)(cO,{});break}L=(0,c.Y)(cB,{supportsVisualPreview:q,isInMobileWorkspace:M,onStartBuilding:K,onRevisePlan:ei});break;case"awaiting-approval":L=(0,c.Y)(cB,{supportsVisualPreview:q,isInMobileWorkspace:M,onStartBuilding:K,onRevisePlan:ei});break;case"approved":L=(0,c.Y)(cM,{})}var ec=28*!!P;(0,u.useEffect)(function(){N(ec)},[N,ec]);var eu=(0,u.useRef)(null),ed=(0,T.S)([O.inputRef,eu]),ep=(0,h.dA)();(0,u.useEffect)(function(){var e;return ep&&"revising"===Z&&(e=window.setTimeout(function(){var e;null==(e=eu.current)||e.setValue(ep)})),function(){e&&window.clearTimeout(e)}},[ep,Z,eu]);var ef=(0,h.qE)();return L?(0,c.FD)(eN.S,{clsx:up().root,children:[P,L]}):(0,c.Y)(um,{isRevising:"revising"===Z,planRevisionMessage:ep,isAgentRunning:ee,isNarrowViewport:V,handleBackButtonClick:function(){ep&&ef(),J("awaiting-approval")},children:(0,c.Y)(uh,(0,eI._)((0,a._)({},O),{session:U,inputRef:ed,showVisualSelector:H&&"revising"!==Z,shouldInterruptAgentOnSubmit:et,onSubmit:function(){"revising"===Z&&(0,nw.Y)({action:"plan_revision_message_sent",sessionId:null==U?void 0:U.id,planSupportsVisualPreview:q}),J("iterating")}}))})}var uv={direction:"forward",state:{didAcknowledge:!1},reducer:function(e,n){if((0,F.cL)(e,"acknowledgeUserMessage"))return n.didAcknowledge=!0,!1}},uy=t(81497),uw=t(35995),ub=t(64556),uS=t(64137),uY=t.n(uS),u_=(0,u.memo)(function(e){var n,t,r,a,d,p,f,y,b,S,Y,_,A,C,k,x=e.session,F=e.readFile,P=e.openPane,N=e.openPip,O=e.inputRef,M=e.secrets,H=e.onPromptSuggestionClick,B=e.onNewSession,z=e.openSession,G=e.hasInitialPlanningLayout,q=e.isDesktopOrTabletAgentPresentationCentered,K=e.isDesktopLayoutAgentPresentationTransitionInProgress,$=(n=null!=x?x:null,t=(0,g.A)(z),r=(0,h.NC)(),a=(0,iT.A)().fs,p=(d=(0,eE.Zo)({context:"agent"})).toggleVisualEditor,f=d.element,y=d.screenshotBlob,b=(0,m.HJ)(null),S=(0,m.HJ)(!1),Y=(0,h.hM)(),{sendMessage:(0,u.useCallback)((_=(0,i._)(function(e){var i,o,l,c,u,d,h,m,g,v;return(0,s.YH)(this,function(s){switch(s.label){case 0:if(S.current)return[2];if(S.set(!0),i=n)return[3,2];return[4,r.sessions.create({sessionType:E.dF3.AGENT_SESSION})];case 1:if(!(o=s.sent()).ok)return b.set(o),S.set(!1),[2];i=o.payload,t.current(i),s.label=2;case 2:if(l=e.message,c=(0,ek._)(e.attachments),!(y&&!(null==f?void 0:f.filePath)))return[3,7];s.label=3;case 3:if(s.trys.push([3,6,,7]),u=Date.now(),d="targeted_element_".concat(u,".png"),!(h=(0,ub.ti)(y,d)))return[3,5];return[4,(0,uy.Zn)({parentPath:uw.Ls,files:h?[h]:[],fs:a,onError:function(e){throw e}})];case 4:s.sent(),c.push({path:"".concat(uw.Ls,"/").concat(d),mimeType:h.type,file:h,isLoading:!1}),s.label=5;case 5:return[3,7];case 6:return m=s.sent(),ne.Cp(m,{extra:{message:"[VisualSelector] Error processing screenshot",sessionId:i.id}}),[3,7];case 7:return g=c.map(function(e){return{path:e.path,mimeType:e.file.type}}),[4,i.appendEvent({intent:E.qRv.AGENT,message:l,uploadedFiles:g,kind:"message",webviewTargetedElement:null!=f?f:void 0,quickEdit:null!=(v=e.quickEdit)&&v,agentConfig:e.agentConfig})];case 8:return s.sent(),S.set(!1),Y(!1),(0,nw.p)({action:"user_message_sent",messageText:e.message,sessionId:i.id}),f&&p(),[2]}})}),function(e){return _.apply(this,arguments)}),[S,n,y,f,r.sessions,t,b,a,p,Y]),error:b,loading:S}),J=$.sendMessage,Q=$.error,X=(0,v.A)().showError;D({skip:!(0,R._P)({controlName:"flag-bookworm"})}),(0,m.q3)(Q,{next:function(e){e&&X("Something went wrong. Please try again.")}});var ee=(0,u.useRef)(!0),en=(0,u.useRef)(new Map),et=(0,l._)((0,u.useState)(0),2),er=et[0],ei=et[1],eo=(0,l._)((0,u.useState)(0),2),ea=eo[0],el=eo[1],es=eA(null!=(A=null==x?void 0:x.id)?A:null),ec=(0,j.T)(null!=(C=null==x?void 0:x.id)?C:null),eu=(0,w.m5)(),ed=(0,u.useRef)("instant");(0,u.useEffect)(function(){ed.current="smooth"},[]);var ep=G?ea+er+8:36,ef=(0,I.A)(function(e){el(e.height)}),eh=(0,V.z)({type:"agent"}),em=(0,T.S)([ef,eh]),eg=(0,m.Rj)(function(){return null==x?void 0:x.reduce(ec?L:U,"global")},[x,ec],{default:{planVersions:new Map,rapidBuildState:"not-started"}}),ev=eg.planVersions,ey=eg.rapidBuildState,ew=x?{type:"session",session:x}:{type:void 0===x?"loading":"newSession"},eS=(0,R._P)({controlName:"flag-plan-in-workspace"}),eC=W();return(0,c.FD)(eN.S,{clsx:uY().root,children:[ew.session?(0,c.Y)(lC,{session:ew.session,isReadOnly:es,readFile:F,sendMessage:J,openPane:P,openPip:N,secrets:M,onNewSession:B,isDesktopOrTabletAgentPresentationCentered:q,isDesktopLayoutTransitionInProgress:K,shouldAutoScrollRef:ee,scrollerBottomPadding:ep,onSessionChange:z,planVersions:ev,rapidBuildState:ey}):null,"loading"===ew.type?(0,c.Y)(eY.G,{}):null,"newSession"===ew.type?(0,c.FD)(nu.y,{clsx:uY().emptyState,padding:"8px 8px ".concat(ep+8,"px 8px"),scrollCacheKey:"new-session",scrollCache:en.current,shouldAutoScrollRef:ee,autoScrollBehavior:ed.current,buttonOffset:ep,children:[(0,c.Y)(e_.T,{sessionType:E.dF3.AGENT_SESSION,onPromptSuggestionClick:H}),(0,c.Y)(Z.G,{openPane:P})]}):null,(0,c.Y)(eN.S,{row:!0,justify:"center",clsx:[uY().footerRow,(0,o._)({},uY().centeredVisualPlanner,G)],pb:8,children:(0,c.FD)(eN.S,{clsx:[uY().footerContainer,(k={},(0,o._)(k,uY().footerContainerLimitedWidth,q||K),(0,o._)(k,uY().isMobile,eu),k)],innerRef:em,children:[eC?(0,c.Y)(l5,{hasFlagPlanInWorkspace:eS}):null,!x||es||G||K||eC?null:(0,c.Y)(l2,{session:x,hasFlagPlanInWorkspace:eS}),"loading"===ew.type?null:(0,c.Y)(eb,{children:(0,c.Y)(uf,{onNewSession:B,inputRef:O,session:null!=x?x:null,sendMessage:J,openPane:P,hasInitialPlanningLayout:G,planVersions:ev,onStatusBarHeightChange:ei})})]})})]})}),uA=t(95830),uC=t(95341),uk=t(20341),ux=t(3175),uD=t(41902),uE=t(54613),uR=t(97818),uI=t.n(uR);function uT(e){var n=e.session,t=e.openSession,r=e.isActiveSession,i=e.hideTitle,o=(0,m.Rj)(function(){return null==n?void 0:n.data.select(function(e){return{title:e.title,created:e.created,taskId:e.taskId}})},[n]);return n?(0,c.FD)(eN.S,{row:!0,justify:"space-between",px:16,gap:12,children:[(0,c.FD)(eN.S,{grow:!0,shrink:!0,children:[i?null:(0,c.Y)(eL.EY,{color:(null==o?void 0:o.title)?void 0:"dimmest",children:(null==o?void 0:o.title)||"Thinking…"}),(0,c.Y)(eN.S,{children:(0,c.FD)(eN.S,{row:!0,py:4,gap:4,align:"center",children:[(0,c.Y)(eL.EY,{color:"dimmest",variant:"small",children:"Chat started"}),o?(0,c.Y)(eU.Dc,{date:o.created,textColor:"dimmest",textVariant:"small",live:!0}):null]})})]}),n?(0,c.Y)(eF.$n,{text:r?"Continue chat":"View chat",size:"small",variant:"default",iconRight:(0,c.Y)(uE.A,{}),colorway:r?"blurple":void 0,onClick:function(){return t(n)}}):null]}):(0,c.Y)(eN.S,{row:!0,justify:"space-between",px:16,gap:12,children:(0,c.FD)(eN.S,{grow:!0,shrink:!0,children:[(0,c.Y)(eL.EY,{children:"History from source app"}),(0,c.Y)(eN.S,{row:!0,py:4,gap:4,align:"center",children:(0,c.Y)(eL.EY,{color:"dimmest",variant:"small",children:"Checkpoints inherited from the app you remixed"})})]})})}function uF(e){var n=(0,m.J2)(e.agentState),t="",r=ei.LU.foregroundDimmer;switch(null==n?void 0:n.state){case E.g32.AGENT_STATE_RUNNING:r=ei.LU.blurpleStronger,t="Agent is running…";break;case E.g32.AGENT_STATE_PAUSING:t="Agent is pausing…";break;default:t="Agent is waiting for your response"}return t?(0,c.Y)(eN.S,{py:6,px:16,row:!0,align:"center",gap:8,justify:"space-between",clsx:uI().futureCheckpoint,children:(0,c.FD)(eN.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(re,{color:r}),(0,c.Y)(eN.S,{children:(0,c.Y)(eL.EY,{color:"dimmer",children:t})})]})}):null}var uP=t(90067),uL=t(73588),uU=t(69993),uN=t.n(uU),uO=new Set,uM=(0,u.createContext)(null),uH=(0,u.forwardRef)(function(e,n){var t=e.children,r=e.style;return(0,c.Y)(eN.S,{innerRef:n,style:r,children:t})});uH.displayName="NonStickyItem";var uB=(0,u.forwardRef)(function(e,n){var t=e.children,r=e.style,i=e.index,o=(0,u.useContext)(uM);if(!o)throw Error("StickyItem must be used within StickyIndexContext");var l=(0,m.J2)(o.activeIndex),s=(0,m.J2)(o.scrollProgress),d=l===i;return(0,c.Y)(eN.S,{innerRef:n,style:(0,a._)((0,eI._)((0,a._)({},r),{zIndex:1}),d&&{position:"sticky",top:0,transform:d?"translateY(".concat(-(100*s),"%)"):void 0}),children:t})});uB.displayName="StickyItemInner";var uz=(0,u.forwardRef)(function(e,n){var t=e.children,r=e.style,i=e.index;return uO.has(i)?(0,c.Y)(uB,{style:r,index:i,ref:n,children:t}):(0,c.Y)(uH,{style:r,index:i,ref:n,children:t})});uz.displayName="StickyItem";var uW=(0,u.memo)(function(e){var n,t=e.index,r=e.row,i=e.openSession,l=e.stickyHeaderRef,s=(0,u.useContext)(uM);if(!s)throw Error("SessionItem must be used within StickyIndexContext");var d=t===(0,m.J2)(s.activeIndex);return(0,c.Y)(eN.S,{py:12,clsx:[uN().session,(n={},(0,o._)(n,uN().sessionCheckpoint,r.hasCheckpoint),(0,o._)(n,uN().stickyFade,d),n)],style:(0,a._)({},!d&&{backgroundColor:ei.LU.backgroundDefault}),innerRef:d?l:void 0,children:(0,c.Y)(uT,{session:r.session,openSession:i,isActiveSession:r.isActive,hideTitle:r.hasCheckpoint})})}),uG=(0,u.memo)(function(e){var n,t,r,o,d,p,f,g,v,y,w,b,S,Y,_,A,C,k,x,D,E,R,I=(0,eR.C9)().agentState,T=e.openPane,F=e.openSession,P=e.navigatingFromSessionId,L=e.scrollPosition,U=e.onScrollPositionChange,N=e.saveScrollPositionRef,O=e7(),M=O.checkpoints,H=O.loading,B=O.renameCommit,z=(0,m.J2)(M),W=(Y=(null==z?void 0:z.ok)?z.value:null,_=(0,h.NC)(),C=null==(A=(0,m.J2)(_.sessions.agent.current))?void 0:A.id,x=(k=(0,l._)((0,u.useState)(new Set),2))[0],D=k[1],{list:(0,u.useMemo)(function(){if(!Y)return null;var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=Y[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.session&&e.push({type:"session",session:a.session,hasCheckpoint:a.commitRanges.length>0,isActive:a.session.id===C});var l=!0,s=!1,c=void 0;try{for(var u,d,p=a.commitRanges[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value,h=null==(w=f.commitRange[0])?void 0:w.hash;if(f.collapsed){var m=!x.has(h);if(e.push({type:"collapsed",count:f.commitRange.length,id:h,collapsed:m}),m)continue}var g=!0,v=!1,y=void 0;try{for(var w,b,S=f.commitRange[Symbol.iterator]();!(g=(b=S.next()).done);g=!0){var _,A=b.value;e.push({type:"commit",commit:A,sessionId:null==(_=a.session)?void 0:_.id,isReverted:f.collapsed})}}catch(e){v=!0,y=e}finally{try{g||null==S.return||S.return()}finally{if(v)throw y}}}}catch(e){s=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw c}}a.session&&(null==(u=a.session)?void 0:u.id)===C&&e.push({type:"future",session:a.session})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e},[Y,x,C]),toggleCommitRange:(0,u.useCallback)(function(e){D(function(n){return(0,uP.vt)(n,function(n){n.has(e)?n.delete(e):n.add(e)})})},[])}),G=(0,u.useCallback)(function(e){return T({type:"git",data:{mode:{type:e6.C.COMMIT,hash:e}}})},[T]),V=(0,h.NC)(),Z=(0,m.J2)(V.sessions.agent.current),j=(0,u.useCallback)((E=(0,i._)(function(e,n,t){return(0,s.YH)(this,function(r){switch(r.label){case 0:if(!Z)return[2];return[4,rO((0,a._)({chatter:V,commitId:e,title:n,onSessionChange:F,currentSession:Z},t))];case 1:return r.sent(),[2]}})}),function(e,n,t){return E.apply(this,arguments)}),[V,F,Z]),q=!z,K=(null==z?void 0:z.ok)&&0===z.value.length,$=(0,u.useRef)(null),J=(0,m.HJ)(0),Q=(0,m.HJ)(0),X=(0,u.useRef)(null),ee=(0,l._)((0,u.useState)(0),2),en=ee[0],et=ee[1],er=W.list,ei=(0,u.useMemo)(function(){if(!er)return new Set;var e=new Set;return er.forEach(function(n,t){"session"===n.type&&e.add(t)}),e},[er]);(0,u.useEffect)(function(){uO.clear(),ei.forEach(function(e){return uO.add(e)})},[ei]),(0,u.useEffect)(function(){X.current&&et(X.current.getBoundingClientRect().height)},[er]),(0,u.useEffect)(function(){$.current&&void 0!==L?$.current.scrollTo(L):$.current&&er&&er.length>0&&$.current.scrollToIndex(er.length-1,{align:"end"})},[er,L,U]);var eo=(t=(n={list:er,navigatingFromSessionId:P,vListRef:$}).list,r=n.navigatingFromSessionId,o=n.vListRef,d=(0,u.useRef)(new Map),p=(0,u.useRef)(!1),f=(0,u.useRef)(!1),g=(0,u.useMemo)(function(){return(null==t?void 0:t.length)&&r?function(e,n){for(var t=n.findIndex(function(n){return"session"===n.type&&n.session.id===e}),r=-1===t?n.length-1:t,i=n.length-1,o=r+1;o<n.length;o++)if("session"===n[o].type){i=o-1;break}return{start:r,end:i}}(r,t):null},[t,r]),(0,u.useEffect)(function(){var e=o.current;g&&e&&!p.current&&(p.current=!0,o.current.scrollToIndex(g.start,{align:"center",smooth:!1}))},[o,g]),{onScrollEnd:(0,u.useCallback)(function(){if(!f.current&&g){f.current=!0;for(var e,n=g.start;n<=g.end;n++)null==(e=d.current.get(n))||e()}},[g]),setRowRef:(0,u.useCallback)(function(e){null===e.highlight?d.current.delete(e.index):d.current.set(e.index,e.highlight)},[])}),ea=eo.onScrollEnd,el=eo.setRowRef,es=(v=$,y=null!=(R=null==er?void 0:er.length)?R:0,w=(0,m.HJ)(!1),b=(0,u.useCallback)(function(){var e;null==(e=v.current)||e.scrollToIndex(y,{smooth:!0,align:"end"})},[v,y]),S=(0,u.useCallback)(function(){var e=v.current;if(e){var n=Math.round(e.scrollSize-e.viewportSize-e.scrollOffset);w.set(n>36)}},[w,v]),{show:w,onScroll:S,onClick:b});(0,u.useEffect)(function(){er&&$.current&&setTimeout(function(){es.onScroll()},0)},[er,L,es]);var ec=(0,u.useCallback)(function(){if($.current){var e,n,t=$.current.findStartIndex(),r=null!=(n=(0,ek._)(uO).reverse().find(function(e){return t>=e}))?n:(e=Math).min.apply(e,(0,ek._)(uO));if(void 0!==r){J.set(r);var i=(0,ek._)(uO).sort(function(e,n){return e-n}),o=i.indexOf(r),a=i[o+1];if(void 0!==a){var l=$.current.getItemOffset(a)-$.current.scrollOffset;if(l<=en&&l>=0){var s=(en-l)/en;Q.set(s)}else Q.set(0)}else Q.set(0)}es.onScroll()}},[es,en,J,Q]);if((0,u.useEffect)(function(){N&&(N.current=function(){$.current&&U&&U($.current.scrollOffset)})},[N,U]),H&&(q||K))return(0,c.Y)(eY.G,{});var eu=ei.size>0?(0,ek._)(ei):void 0;return(0,c.FD)(eN.S,{grow:!0,shrink:!0,children:[(0,c.Y)(uM.Provider,{value:{activeIndex:J,scrollProgress:Q},children:(0,c.Y)(uD.x8,{clsx:uN().scroll,ref:$,item:uz,keepMounted:eu,onScrollEnd:ea,onScroll:ec,children:null==er?void 0:er.map(function(n,t){switch(n.type){case"session":return(0,c.Y)(uV,{index:t,highlightRef:el,children:(0,c.Y)(uW,{index:t,row:n,openSession:e.openSession,stickyHeaderRef:X})},n.session.id);case"commit":var r,i,o,a=n.commit,l=n.isReverted;switch(null==(r=er[t+1])?void 0:r.type){case"commit":i="solid";break;case"future":i="dashed"}return(0,c.Y)(uV,{index:t,highlightRef:el,children:(0,c.Y)(uj,{line:i,children:(0,c.Y)(ra,{author:a.authoredBy,variant:ri.InSessionList,title:null!=(o=a.customSubject)?o:a.subject,date:new Date(a.committer.date),commitId:a.hash,onRevert:function(e){var n;return null==j?void 0:j(a.hash,null!=(n=a.customSubject)?n:a.subject,e)},onRenameTitle:function(e){return null==B?void 0:B(a.hash,e||a.subject)},screenshot:a.screenshotUrl,onOpenCommit:function(){return G(a.hash)},isReverted:l},a.hash)},n.commit.hash)},n.commit.hash);case"collapsed":return(0,c.Y)(uV,{index:t,highlightRef:el,children:(0,c.Y)(uZ,{id:n.id,onToggle:W.toggleCommitRange,count:n.count,collapsed:n.collapsed})},"toggle"+n.id);case"future":return I?(0,c.Y)(uF,{agentState:I},n.session.id+"future"):null}})})}),(0,c.Y)(uL._,{show:es.show,onClick:es.onClick})]})});function uV(e){var n=e.children,t=e.index,r=e.highlightRef,i=(0,u.useRef)(null);return(0,u.useEffect)(function(){return r({index:t,highlight:function(){var e;null==(e=i.current)||e.classList.add(uN().highlight)}}),function(){r({index:t,highlight:null})}},[r,t]),(0,c.Y)(eN.S,{innerRef:i,children:n})}function uZ(e){var n=e.count,t=e.collapsed,r=e.id,i=e.onToggle;return(0,c.FD)(eN.S,{grow:!0,shrink:!0,row:!0,align:"center",clsx:uN().toggleCollapsedButton,gap:6,justify:"space-between",tag:"button",css:rK.b.nofill,onClick:function(){return i(r)},children:[(0,c.FD)(eL.EY,{color:"dimmest",children:[n," ",(0,ex.A)("checkpoints",n)," that"," ",1===n?"was":"were"," rolled back"]}),(0,c.Y)(tl.A,{rotate:180*!t})]})}function uj(e){return(0,c.FD)(eN.S,{px:16,py:4,clsx:uN().checkpoint,children:[e.line?(0,c.Y)("div",{clsx:[uN().checkpointLine,"dashed"===e.line&&uN().dashed]}):null,e.children]})}var uq=t(931),uK=t(46449),u$=t(89305),uJ=t(62862);function uQ(e){var n,t=(0,lR.ET)(),r=t.orgId,i=t.orgSlug,o=(0,u$.w)(null!=(n=e.sessionId)?n:null),a=o.cents,l=o.billedCheckpoints,s=r&&i?"".concat((0,uK.EG)({slug:i}).usage.href,"#agent"):"/usage#agent",u=e.isFreemiumStarterPlanUsersOwnRepl||!l?"Usage Page":"Your usage for this chat: ".concat("$".concat((null!=a?a:0)/100));return(0,c.Y)(uJ.A,{alt:u,href:s,target:"_blank",onClick:function(){(0,er.u4)(er.AZ.AGENT_USED,{action:"opened_usage_link",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"})},children:(0,c.Y)(rr.A,{})})}var uX=t(35700),u0=t(62355),u1=t.n(u0),u2=(0,ei.CK)("Header.module.css",["--border-color"]);function u4(e){var n=e.sessionTitle,t=e.usageButton,r=e.sessionId,i=(0,R._P)({controlName:"flag-agent-debug-info-button"});return n?(0,c.FD)(eN.S,{row:!0,px:18,gap:4,align:"center",justify:"center",grow:!0,shrink:!0,children:[t,(0,c.Y)(eL.EY,{clsx:u1().sessionTitle,variant:"small",multiline:!1,children:n}),i&&r?(0,c.Y)(uq.O,{sessionId:r,sessionType:E.dF3.AGENT_SESSION}):null]}):(0,c.Y)(eL.EY,{clsx:u1().sessionTitle,variant:"small",color:"dimmest",children:"Thinking..."})}function u5(){return(0,c.FD)(eN.S,{row:!0,gap:6,align:"center",children:[(0,c.Y)(uX.A,{size:12}),(0,c.Y)(eL.EY,{variant:"small",multiline:!1,children:"History"})]})}function u3(e){return(0,c.Y)(eP.ui,{row:!0,align:"end",clsx:u1().root,pt:8,px:8,style:(0,o._)({},u2.borderColor,e.hideButtons?"transparent":ei.LU.outlineDimmer),children:(0,c.FD)(eP.ui,{row:!0,gap:12,elevated:!e.hideButtons,clsx:u1().surface,align:"center",justify:"space-between",children:["checkpoints"===e.screen?(0,c.FD)(c.FK,{children:[e.hideButtons?null:(0,c.Y)(eF.$n,{clsx:u1().buttonLeft,variant:"nofill",size:"small",iconLeft:(0,c.Y)(uu.A,{}),text:"Back",onClick:function(){return e.onAction("goBack")}}),(0,c.Y)(eN.S,{grow:!0,shrink:!0,align:"center",justify:"center",children:(0,c.Y)(u5,{})}),e.hideButtons?null:(0,c.Y)(eF.$n,{disabled:e.disableNewSessionButton,clsx:u1().buttonRight,variant:"nofill",size:"small",iconLeft:(0,c.Y)(nE.A,{}),text:"New chat",onClick:function(){return e.onAction("newChat")}})]}):(0,c.FD)(c.FK,{children:[e.hideButtons?null:(0,c.Y)(eF.$n,{clsx:u1().buttonLeft,variant:"nofill",size:"small",iconLeft:(0,c.Y)(uX.A,{}),text:"History",onClick:function(){return e.onAction("showCheckpoints")}}),(0,c.Y)(eN.S,{row:!0,grow:!0,shrink:!0,justify:"center",align:"center",children:e.sessionTitle?(0,c.Y)(u4,{sessionTitle:e.sessionTitle,usageButton:e.usageButton,sessionId:e.sessionId}):(0,c.Y)(eL.EY,{clsx:u1().sessionTitle,variant:"small",color:"dimmest",children:"New chat"})}),e.hideButtons?null:(0,c.Y)(nj.m_,{isDisabled:!e.disableNewSessionButton,tooltip:"Cannot create a new chat while one is in progress",children:(0,c.Y)(eF.$n,{disabled:e.disableNewSessionButton,clsx:u1().buttonRight,variant:"nofill",size:"small",iconLeft:(0,c.Y)(nE.A,{}),text:"New chat",onClick:function(){return e.onAction("newChat")}})})]}),(0,c.Y)(u7,{checkpointMade:e.checkpointMade})]})})}function u7(e){var n=e.checkpointMade,t=(0,l._)((0,u.useState)(!1),2),r=t[0],i=t[1],o=(0,u.useRef)(null),a=(0,u.useCallback)(function(){o.current&&clearTimeout(o.current),i(!0),o.current=setTimeout(function(){i(!1)},4e3)},[]);return(0,m.q3)(n,{next:a}),r?(0,c.FD)(eN.S,{row:!0,align:"center",clsx:u1().checkpointMade,gap:4,children:[(0,c.Y)(eP.ui,{clsx:u1().checkpointMadeIcon,children:(0,c.Y)(eV,{size:12})}),(0,c.Y)(eP.ui,{clsx:u1().checkpointMadeText,grow:!0,shrink:!0,children:(0,c.Y)(eL.EY,{variant:"small",children:"Checkpoint made"})})]}):null}function u6(e){var n=e.session,t=(0,rB.F)().isFreemiumStarterPlanUsersOwnRepl;return(0,c.Y)(uQ,{sessionId:null==n?void 0:n.id,isFreemiumStarterPlanUsersOwnRepl:t})}var u8=t(86080),u9=t(13383);function de(e){var n=e.screen,t=e.onAction,r=(0,u8.ES)();return(0,u.useEffect)(function(){if("checkpoints"===n)return r(function(){return t("goBack")}),function(){r(null)}},[r,n,t]),(0,c.FD)(c.FK,{children:[(0,c.Y)(u8.cR,{side:"left",children:"checkpoints"===e.screen?null:(0,c.Y)(nc.K0,{size:36,alt:"Chats",onClick:function(){e.onAction("showCheckpoints")},children:(0,c.Y)(uX.A,{})})}),(0,c.Y)(u8.cR,{side:"right",children:(0,c.Y)(nc.K0,{size:36,alt:"New chat",onClick:function(){e.onAction("newChat")},children:(0,c.Y)(u9.A,{})})})]})}var dn=t(89229),dt=t(17574),dr=t(55515);function di(e){var n=e.session,t=e.onNewSession,r=e.onHistory,i=(0,dt.y)({sessionId:n.id,type:"agent"}).usageCommandGroup,o=(0,dn.u)(null!=n?n:null,function(e){(0,nw.p)({action:"submitted_feedback",sessionId:n.id,feedbackText:e})},"agent_chat"),a=o.FeedbackModal,l=o.feedbackCommandGroup;return(0,dr.Qt)(function(){return{commands:[{name:"Chat",commands:[{data:{type:"action",icon:(0,c.Y)(u9.A,{}),label:"New chat",run:function(){t()}}},{data:{type:"action",icon:(0,c.Y)(uX.A,{}),label:"History",run:function(){r()}}}]},i,l]}},[t,r,i,l]),(0,c.Y)(a,{})}var da=t(4746),dl=t.n(da),ds=(0,ei.CK)("index.module.css",["--transition-duration"]);function dc(e){var n,t=(0,v.A)().showError,r=(0,uC.o)();return(0,c.Y)(sJ.S,{sessionId:null==(n=e.session)?void 0:n.id,uploadFiles:r,onError:t,children:(0,c.Y)(e3,{children:(0,c.Y)(du,(0,a._)({},e))})})}function du(e){var n,t,r,a,v,b=e.session,S=e.setSession,Y=e.onPlanApproval,_=e.inputRef,A=e.openPane,C=e.openPip,k=e.secrets,x=e.readFile,D=e.isDesktopOrTabletAgentPresentationCentered,E=e.isDesktopLayoutAgentPresentationTransitionInProgress,R=(0,l._)((0,u.useState)("session"),2),I=R[0],T=R[1],F=(0,l._)((0,u.useState)(!1),2),L=F[0],U=F[1],N=(0,l._)((0,u.useState)(void 0),2),O=N[0],M=N[1],H=(0,w.m5)(),B=(0,u.useRef)(null),z=(0,y.A)(),W=(0,l._)((0,f.V)(),1)[0];n=(0,i._)(function(){return(0,s.YH)(this,function(e){switch(e.label){case 0:return null==Y||Y(),[4,W({variables:{input:{id:z,isInPlanningPhase:!1}}})];case 1:return e.sent(),[2]}})}),t=(0,u.useRef)(!1),(0,h.zv)("received-completed-event",function(e){if(!t.current){var r,i=e.event.contents.contents;(0,P.VF)(i,"agentPlanEventContents")&&(null==(r=i.agentPlanEventContents.Approver)?void 0:r.approver.id)&&(t.current=!0,n())}});var G=(0,sJ.s)().addAttachments,V=(0,sX.A)({addAttachments:G}),Z=V.isDraggedOver,q=V.drop,K=(0,l._)((0,u.useState)(null),2),$=K[0],J=K[1];(0,u.useEffect)(function(){null==_||_($)},[$,_]),(0,u.useEffect)(function(){H||null==$||$.focus()},[$,H]);var Q=(0,g.A)($),X=(0,u.useCallback)(function(){setTimeout(function(){var e;null==(e=Q.current)||e.animatePlaceholder()})},[Q]),ee=(0,u.useCallback)(function(){T("session"),U(!0),X()},[X]),en=(0,u.useRef)(null),et=(0,u.useCallback)(function(){"checkpoints"===I&&en.current&&en.current()},[I]),er=(0,u.useCallback)(function(e){"checkpoints"===I&&et(),S(e),T("session"),U(!1),X()},[S,X,I,et]),ei=(0,u.useCallback)(function(e){var n;null==$||null==(n=$.setValue)||n.call($,e.text),null==$||$.focus()},[$]),eo=!!(0,m.J2)((0,ux.S)()),ea=e7().checkpointMade,el=(r=e7().checkpoints,(0,m.Rj)(function(){return b?ey.cP.combine(b.data,r).map(function(e){var n,t,r=(0,l._)(e,2),i=r[0],o=r[1];if(null==o?void 0:o.value){var a=o.value.find(function(e){var n;return(null==(n=e.session)?void 0:n.id)===b.id});if(a){var s=(0,ek._)(a.commitRanges).reverse().map(function(e){return e.commitRange}).flat().find(function(e){return"Agent"===e.authoredBy});return null!=(t=null!=(n=null==s?void 0:s.customSubject)?n:null==s?void 0:s.subject)?t:i.title}}}):null},[b,r])),es=function(e){switch("checkpoints"===I&&et(),e){case"goBack":T("session"),U(!1),X();break;case"showCheckpoints":T("checkpoints");break;case"newChat":T("session"),U(!0),X()}},ec=(0,h.OI)(),eu=D||E||H,ed=b&&!eu?(0,c.Y)(u6,{session:b}):null,ep=(0,u.useRef)();(0,u.useEffect)(function(){ep.current=L||null==b?void 0:b.id},[L,b]);var ef=(0,j.T)(null!=(a=null==b?void 0:b.id)?a:null),eh=(0,h.Ik)(),em=ef&&(H?"approved"!==eh:D||E);return(0,c.FD)(c.FK,{children:[(0,c.FD)(eN.S,{innerRef:"session"===I?q:void 0,clsx:dl().root,grow:!0,shrink:!0,style:(0,o._)({},ds.transitionDuration,"".concat(180,"ms")),children:[em?null:(0,c.Y)(u3,{hideButtons:eu,sessionId:null!=(v=null==b?void 0:b.id)?v:"",sessionTitle:el,screen:I,disableNewSessionButton:eo,onAction:es,usageButton:ed,checkpointMade:ea}),(0,c.Y)(de,{screen:I,onAction:es}),(0,c.Y)(dd,{}),(0,c.Y)(d.A,{children:(0,c.Y)(p.A,{timeout:180,nodeRef:B,classNames:{enter:dl().enter,enterActive:dl().enterActive,exit:dl().exit,exitActive:dl().exitActive},children:(0,c.Y)(eN.S,{innerRef:B,clsx:dl().content,grow:!0,shrink:!0,children:"checkpoints"===I?(0,c.Y)(uG,{openSession:er,openPane:A,navigatingFromSessionId:ep.current,scrollPosition:O,onScrollPositionChange:M,saveScrollPositionRef:en}):(0,c.Y)(u_,{onNewSession:ee,inputRef:J,openPane:A,openPip:C,session:L?null:b,openSession:er,secrets:k,readFile:x,onPromptSuggestionClick:ei,hasInitialPlanningLayout:em,isDesktopOrTabletAgentPresentationCentered:D,isDesktopLayoutAgentPresentationTransitionInProgress:E})})},I)}),Z?(0,c.Y)(uA.A,{}):null]}),(0,c.Y)(uk.A,{isOpen:ec,text:"We've encountered an issue and can't reconnect to the AI service. Please refresh the page to continue."}),H&&b?(0,c.Y)(di,{onNewSession:ee,onHistory:function(){return T("checkpoints")},session:b}):null]})}function dd(){return(0,c.Y)(eN.S,{clsx:dl().fade,children:(0,c.Y)(eN.S,{})})}},86891:(e,n,t)=>{"use strict";t.d(n,{R:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query UseReplOrgId($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n,t,i,o=(n={variables:{replId:e}},t=(0,r._)({},s,n),a.I(c,t)),l=o.data,u=o.loading,d=o.error;return u?{loading:u,hasError:!1,orgId:void 0}:{loading:u,hasError:void 0!==d||(null==l?void 0:l.getRepl.__typename)!=="Repl",orgId:(null==l?void 0:l.getRepl.__typename)==="Repl"?null==(i=l.getRepl.org)?void 0:i.id:void 0}}},87363:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(81073),i=t(41467),o=t(11769),a=t(4616),l=t(85389),s=t(74);function c(e){var n,t=e.paths,c=e.onCancel,u=e.onConfirm;return(0,r.FD)(l.S,{gap:24,children:[(0,r.Y)(a.Y9,{level:1,variant:"headerDefault",children:t.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.FD)(a.EY,{children:[(n=(n=t).map(i.WP)).length<2?n[0]:"".concat(n.slice(0,-1).join(", ")," and ").concat(n.slice(-1))," already"," ",t.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",t.length>1?"them":"it","? This cannot be undone."]}),(0,r.FD)(l.S,{row:!0,gap:12,justify:"end",children:[(0,r.Y)(o.$n,{onClick:function(){return c()},text:"Cancel"}),(0,r.Y)(o.$n,{colorway:"negative",onClick:function(){return u()},text:"Yes, overwrite ".concat(t.length>1?"these files":"this file"),iconLeft:(0,r.Y)(s.A,{})})]})]})}},87433:(e,n,t)=>{"use strict";t.d(n,{A:()=>a,y:()=>o});var r=t(29935),i=t(82643);function o(e){return null==e?void 0:e.replace(/^pkgs\./,"")}let a={name:"nix",getInstalledPackages:function(e){var n=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,n.listPackages()];case 1:if(null!==(e=t.sent()).error)return[2,[]];return[2,e.packages.filter(function(e){return!!e.name}).map(function(e){return{name:e.name,version:e.version}})]}})})()},getPackageInfo:function(e){var n=e.name,t=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,t.packageInfo(n)];case 1:if(null!==(e=r.sent()).error)return[2,{}];return[2,e.package]}})})()},search:function(e){var n=e.query,t=e.services.nixService,o=e.nixOpts;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,t.searchPackages(n,o)];case 1:if(null!==(e=r.sent()).error)throw Error("Could not search Nix packages");return[2,e.packages.map(function(e){var n,t;return{name:e.name,version:e.version,description:e.description,homepageURL:null!=(n=e.homepageURL[0])?n:null,license:null!=(t=e.licenses[0])?t:null}})]}})})()},install:function(e){var n=e.pkgs,t=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return e=n.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,t.addPackages(e)];case 1:return r.sent(),[2]}})})()},uninstall:function(e){var n=e.pkgs,t=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return e=n.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,t.removePackages(e)];case 1:return r.sent(),[2]}})})()}}},87562:(e,n,t)=>{"use strict";t.d(n,{A:()=>f,F:()=>d});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(64330),s=t(91901),c=t(52531),u=t(82637);function d(e,n){return!!e&&!!n&&(e===n||e.name===n.name&&e.remote===n.remote)}function p(e){var n=(0,i._)(e.split("	"),6),t=n[0],r=n[1],o=n[2],a=n[3],d=n[4],p=n[5],f=(0,s.T)(t),h={hash:o,author:{name:a,email:(0,l.ao)(d),date:1e3*parseInt(p,10)}};if(f.type===c.QN.BRANCH){var m=r?(0,s.T)(r):null,g=m&&(m.type===c.QN.REMOTE_BRANCH||m.type===c.QN.BRANCH)?m:null;return{type:u.xx.LOCAL,name:f.name,push:g,remote:null,tracking:null,commit:h}}return f.type===c.QN.REMOTE_BRANCH?{type:u.xx.REMOTE,name:f.branch,remote:f.remote,push:null,tracking:null,commit:h}:null}function f(e){return h.apply(this,arguments)}function h(){return(h=(0,r._)(function(e){var n,t,r=arguments;return(0,a.YH)(this,function(i){switch(i.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1===e.local&&!1===e.remote)throw Error("Cannot specify both local and remote as false");var n=[];if(n.push('--format="%(refname)%09%(push)%09%(objectname)%09%(authorname)%09%(authoremail)%09%(authordate:unix)"'),e.max&&n.push("--count=".concat(e.max)),e.pattern)if("string"==typeof e.pattern)n.push((0,l.hh)(e.pattern));else{var t,r,i=e.pattern.map(function(e){return(0,l.hh)(e)});n.push.apply(n,(0,o._)(i))}else(null==(t=e.local)||t)&&n.push("refs/heads"),(null==(r=e.remote)||r)&&n.push("refs/remotes");return"git for-each-ref ".concat(n.join(" "))}(r.length>1&&void 0!==r[1]?r[1]:{}),{serviceMethod:"git-list-branches"})];case 1:if((n=i.sent()).error)return[2,n];return(t=function(e){var n=[],t=[],r=!0,i=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var d=l.value;d.type===u.xx.LOCAL?n.push(d):d.type===u.xx.REMOTE&&t.push(d)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var p=new Set,f=[],h=!0,m=!1,g=void 0;try{for(var v,y=t[Symbol.iterator]();!(h=(v=y.next()).done);h=!0)!function(){var e=v.value,t=n.find(function(n){return n.push&&n.push.type===c.QN.REMOTE_BRANCH&&n.push.remote===e.remote&&n.push.branch===e.name&&n.name===e.name});t&&(p.add(e),p.add(t),f.push({type:u.xx.TRACKED,name:t.name,remote:e.remote,push:t.push,tracking:e,commit:t.commit}))}()}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}var w=e.filter(function(e){return!p.has(e)});return(0,o._)(w).concat((0,o._)(f))}((0,l.jr)(n.output,"\n").map(p).filter(function(e){return null!==e}))).sort(function(e,n){return n.commit.author.date-e.commit.author.date}),[2,{branches:t,error:null}]}})})).apply(this,arguments)}},87581:(e,n,t)=>{"use strict";t.d(n,{PF:()=>m,nw:()=>h});var r=t(37743),i=t(12694),o=t(82643),a=t(46723),l=t.n(a),s=l().DIFF_DELETE,c=l().DIFF_INSERT,u=l().DIFF_EQUAL;function d(e,n){var t=new(l()),r=t.diff_linesToChars_(e,n),i=r.chars1,o=r.chars2,a=r.lineArray,s=t.diff_main(i,o,!1);return t.diff_charsToLines_(s,a),s}function p(e){return e.split("\n").length-1}function f(e,n,t){if(e>0){var r=function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t)return 0;var i=n.indexOf("\n",r);return -1===i?null:1===t?i+1:e(n,t-1,i+1)}(t,n);if(null!==r)return{lineNumber:n,character:r,padding:e}}return null}function h(e,n){var t=!1,r=!1;t="\n"===e[e.length-1],r="\n"===n[n.length-1];for(var o=d(e+(t?"":"\n"),n+(r?"":"\n")),a=0,l=0,h=[],m=[],g=[],v=[],y=0,w=0,b=0;b<o.length;b++){var S=(0,i._)(o[b],2),Y=S[0],_=p(S[1]);switch(Y){case s:var A,C=(0,i._)(null!=(A=o[b+1])?A:[],2),k=C[0],x=C[1];a+=_;for(var D=0;D<_;D++)h.push(a-D);var E=_;k===c&&(E-=p(x));var R=f(E,l,n);R&&v.push(R);break;case c:var I,T=(0,i._)(null!=(I=o[b-1])?I:[],2),F=T[0],P=T[1];l+=_;for(var L=0;L<_;L++)m.push(l-L);var U=_;F===s&&(U-=p(P));var N=f(U,a,e);N&&g.push(N);break;case u:l>w&&(w=l),a>y&&(y=a),a+=_,l+=_}}return{leftPadded:g.filter(function(e){return e.lineNumber<w}),rightPadded:v.filter(function(e){return e.lineNumber<y}),leftColored:h,rightColored:m,changedTrailingNewline:t!==r,leftTrailingNewline:t,rightTrailingNewline:r}}var m=function(){function e(n,t){(0,r._)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===n[n.length-1],this.otherTrailingNewline="\n"===t[t.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(n,t),a=[],l=!0,p=!1,f=void 0;try{for(var h,m=o[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var g=(0,i._)(h.value,2),v=g[0],y=g[1].split("\n");""===y[y.length-1]&&y.pop();var w=!0,b=!1,S=void 0;try{for(var Y,_=y[Symbol.iterator]();!(w=(Y=_.next()).done);w=!0){var A=Y.value;a.push([v,A])}}catch(e){b=!0,S=e}finally{try{w||null==_.return||_.return()}finally{if(b)throw S}}}}catch(e){p=!0,f=e}finally{try{l||null==m.return||m.return()}finally{if(p)throw f}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([s,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([c,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([u,""]);var C=1,k=0,x=1,D=!0,E=!1,R=void 0;try{for(var I,T=a[Symbol.iterator]();!(D=(I=T.next()).done);D=!0){var F=(0,i._)(I.value,2),P=F[0],L=F[1];switch(P){case s:this.linePositions.set(C,k),this.lineLengths.set(C,L.length),this.deleted.add(C),k+=L.length+1,C++;break;case c:var U=C-1,N=this.inserted.get(U);N||(N=[],this.inserted.set(U,N)),N.push({number:x,content:L}),x++;break;case u:this.linePositions.set(C,k),this.lineLengths.set(C,L.length),k+=L.length+1,C++,x++}}}catch(e){E=!0,R=e}finally{try{D||null==T.return||T.return()}finally{if(E)throw R}}}var n=e.prototype;return n.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},n.lineIsDeleted=function(e){return this.deleted.has(e)},n.lineInsertions=function(e){var n=this.inserted.get(e);return n&&0!==n.length?n:null},n.lineInsertedContent=function(e){var n=this.lineInsertions(e);return n?n.map(function(e){return e.content}).join("\n"):null},n.offsetFor=function(e){var n,t,r;r=0+(null!=(t=null==(n=this.inserted.get(0))?void 0:n.length)?t:0);for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},n.linePosition=function(e){var n;return null!=(n=this.linePositions.get(e))?n:null},n.lineLength=function(e){var n;return null!=(n=this.lineLengths.get(e))?n:null},n.line=function(e){var n=this.linePosition(e),t=this.lineLength(e);if(null===n||null===t)return null;var r=this.offsetFor(e),i=this.lineIsDeleted(e),o=this.lineInsertions(e);return{number:e,from:n,to:n+t,length:t,offset:r,isDeleted:i,insertions:o}},n.lines=function(){var e,n,t,r,a,l,s,c;return(0,o.YH)(this,function(o){switch(o.label){case 0:e=!0,n=!1,t=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i._)(a.value,1)[0],!(s=this.line(l)))throw Error("line should not be null");return[4,s];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return c=o.sent(),n=!0,t=c,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}})},e}()},87584:(e,n,t)=>{"use strict";t.d(n,{M:()=>l});var r=t(21462),i=t(47848),o=t(90342),a=t(71424);function l(){var e=(0,a.A)().ports,n=(0,o.w)(e);return(0,r.useMemo)(function(){return n.some(function(e){return(0,i.th)(e.configuration.localPort)})},[n])}},87603:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(12694),i=t(21462),o={isConnecting:!0,channel:null,context:null};function a(e){var n=e.container,t=e.service,a=e.name,l=e.skip,s=void 0!==l&&l,c=(0,r._)((0,i.useState)(o),2),u=c[0],d=c[1];return(0,i.useEffect)(function(){d(o);var e=!1,r=n.openChannel({service:t,name:a,skip:function(){return s}},function(n){if(!e)return d({context:n.context,channel:n.channel,isConnecting:!1}),function(n){e||d({isConnecting:n.willReconnect,channel:null,context:null})}});return function(){e=!0,r()}},[n,t,a,s]),u}},87694:e=>{e.exports={stage:"PrepareDatabaseStage_stage__3c8o8",stageHeader:"PrepareDatabaseStage_stageHeader__jAPQt",isExpanded:"PrepareDatabaseStage_isExpanded__pk7AO",stageCode:"PrepareDatabaseStage_stageCode__92cW_"}},87720:(e,n,t)=>{"use strict";t.d(n,{uG:()=>_,gv:()=>Y});var r=t(37743),i=t(17844),o=t(93629),a=t(12694),l=t(81073),s=t(21462),c=t(26072),u=t(49022),d=t(64761),p=t(59512),f=t(55220),h=t(36937),m=t(27023),g=t(4616),v=t(85389),y=t(24140),w=t(52351);function b(e){return(0,l.FD)(w.Ay,(0,o._)((0,i._)({},e),{children:[(0,l.Y)("path",{fillRule:"evenodd",d:"M12 2.6a9.4 9.4 0 1 0 0 18.8 9.4 9.4 0 0 0 0-18.8ZM1.4 12C1.4 6.146 6.146 1.4 12 1.4c5.854 0 10.6 4.746 10.6 10.6 0 5.854-4.746 10.6-10.6 10.6-5.854 0-10.6-4.746-10.6-10.6Zm7-3a.6.6 0 0 1 .6-.6h.01a.6.6 0 0 1 0 1.2H9a.6.6 0 0 1-.6-.6Zm6 0a.6.6 0 0 1 .6-.6h.01a.6.6 0 1 1 0 1.2H15a.6.6 0 0 1-.6-.6Z",clipRule:"evenodd"}),(0,l.Y)("path",{d:"M8.71 14.515c.753-.548 1.875-1.115 3.29-1.115s2.537.567 3.29 1.115a6.538 6.538 0 0 1 1.1 1.013 3.76 3.76 0 0 1 .081.1l.009.012a.6.6 0 0 1-.959.722l-.05-.062a5.353 5.353 0 0 0-.886-.815c-.622-.452-1.5-.885-2.585-.885s-1.963.433-2.585.885a5.351 5.351 0 0 0-.886.815 2.31 2.31 0 0 0-.041.05l-.009.011a.6.6 0 0 1-.839.119.613.613 0 0 1-.093-.875l.063-.077c.053-.064.13-.152.23-.256.2-.207.492-.482.87-.757Z"})]}))}var S=t(63456),Y=new(function(){function e(){var n=this;(0,r._)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,c.F)([]),this.clear=function(){n.logs.current=[]}}var n=e.prototype;return n.toggle=function(e){this.enabled=e},n.add=function(e){var n=this,t=this.counter++;if(!this.enabled)return{id:t};var r={id:t,request:e,requestTime:Date.now()};return this.logs.update(function(e){return[r].concat(e).slice(0,n.maxEntries)}),{id:t}},n.update=function(e,n){this.enabled&&this.logs.update(function(t){var r=t.findIndex(function(n){return n.id===e.id});if(-1===r)return t;var i=t.slice();return i[r]=n(i[r]),i})},n.complete=function(e,n){this.update(e,function(e){return(0,o._)((0,i._)({},e),{response:n,responseTime:Date.now()})})},n.abort=function(e){this.logs.update(function(n){return n.filter(function(n){return n.id!==e.id||null!=n.responseTime})})},e}()),_=function(e){var n=e.isHidden,t=(0,u.A)(Y.logs);return n?null:(0,l.FD)(v.S,{css:[m.wp.flex.column],children:[(0,l.FD)(v.S,{css:[m.wp.m(4),m.wp.position.sticky,m.wp.top(0),m.wp.backgroundColor.backgroundDefault,m.wp.zIndex(1)],row:!0,align:"center",children:[(0,l.Y)(g.EY,{css:m.wp.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.Y)(f.D,{onClick:Y.clear})]}),(0,l.FD)(v.S,{css:[m.wp.flex.column,m.wp.overflow("auto")],grow:!0,children:[t.map(function(e){var n;return(0,l.Y)(A,{log:e},null!=(n=e.id)?n:e.requestTime.valueOf())}),!t.length&&(0,l.Y)(v.S,{css:m.wp.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},A=(0,s.memo)(function(e){var n,t=e.log,r=t.requestTime,i=t.responseTime,o=t.request,s=t.response,c=(0,a._)((0,p.A)(!0),2),u=c[0],f=c[1],w=o.prefix.length>20?"...".concat(o.prefix.slice(-20)):o.prefix;return(0,l.FD)(v.S,{css:[m.wp.my(4),m.wp.mx(4)],children:[(0,l.FD)(v.S,{role:"button",onClick:f,onKeyDown:f,tabIndex:0,css:[{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],row:!0,gap:4,children:[(0,l.FD)(v.S,{grow:!0,row:!0,gap:2,children:[(0,l.Y)(g.EY,{multiline:!1,children:(n=t.response)?"CompleteCodeResult"===n.__typename?(0,l.Y)(y.A,{}):(0,l.Y)(b,{}):(0,l.Y)(S.A,{})}),(0,l.Y)(g.EY,{multiline:!1,children:(0,l.Y)("code",{children:w})})]}),(0,l.Y)(v.S,{css:{opacity:.5},children:null!=i&&(0,l.FD)(g.EY,{css:m.wp.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf(),"ms"]})})]}),!u&&(0,l.FD)(l.FK,{children:[void 0!==o&&(0,l.Y)(d.U,{name:"request",src:o}),void 0!==s&&("CompleteCodeResult"===s.__typename?(0,l.FD)("details",{children:[(0,l.Y)("summary",{children:"Response"}),(0,l.Y)("pre",{css:[m.wp.overflow("scroll"),m.wp.borderRadius(4),m.wp.p(4),{border:"1px solid ".concat(h.LU.outlineDimmest)}],children:s.code})]}):(0,l.Y)(d.U,{name:"response",src:s}))]})]})})},88624:(e,n,t)=>{"use strict";t.d(n,{$0:()=>s,OS:()=>p,b3:()=>u,oG:()=>c});var r,i=t(83846),o=t(66890),a=t(91326),l=t(5932);function s(e){switch(e){case o.nHS.Failed:case o.nHS.Success:return l.d.Ready;case o.nHS.Suspended:return l.d.Suspended;case o.nHS.Suspending:case o.nHS.Resuming:case o.nHS.UpdatingTier:return l.d.ProcessingLifecycleCommand;case o.nHS.Pending:case o.nHS.Building:case o.nHS.Running:case o.nHS.Promoting:return l.d.Deploying;default:(0,a.A)(e)}}function c(e){switch(e){case o.jPZ.Destroy:return null;case o.jPZ.UpdateMachineConfiguration:return o.nHS.UpdatingTier;case o.jPZ.Suspend:return o.nHS.Suspending;case o.jPZ.Resume:return o.nHS.Resuming;default:(0,a.A)(e)}}function u(e){switch(e){case o.JX5.Cron:return o.Q0q.Cron;case o.JX5.CloudRun:return o.Q0q.CloudRun;case o.JX5.Worker:case o.JX5.Server:return o.Q0q.Gce;case o.JX5.Static:return o.Q0q.Static;default:(0,a.A)(e)}}var d=(r={},(0,i._)(r,l.d.Loading,"loading"),(0,i._)(r,l.d.Preparing,"preparing"),(0,i._)(r,l.d.PreparingDatabase,"preparing database"),(0,i._)(r,l.d.Ready,"ready"),(0,i._)(r,l.d.Suspended,"suspended"),(0,i._)(r,l.d.Deploying,"deploying"),(0,i._)(r,l.d.ProcessingLifecycleCommand,"processing a request"),r);function p(e){var n=d[e];return void 0===n?"":n}},88747:(e,n,t)=>{"use strict";t.d(n,{K4:()=>ee,aD:()=>en});var r=t(29935),i=t(83846),o=t(12694),a=t(82643),l=t(81073),s=t(21462),c=t(79203),u=t(20203),d=t(66890),p=t(82706),f=t(78251),h=t(22799),m=t(30331),g=t(22940),v=t(5932),y=t(67662),w=t(9604),b=t(31083),S=t(39218),Y=t(3417),_=t(8923),A=t(8216),C=t(66297),k=t(21762),x=t(55100),D=t(17089),E=t(47803),R=t(36937),I=t(18509),T=t(27023),F=t(11769),P=t(40259),L=t(36073),U=t(41358),N=t(4616),O=t(78626),M=t(85389),H=t(24140),B=t(87971),z=t(40831),W=t(62183),G=t(8486),V=t(52351),Z=t(49748),j=t(63456),q=t(28174),K=t(45894),$=t(71872),J=t(6966),Q=t.n(J),X=(0,I.x)({titleShort:(0,i._)({display:"inline"},T.kL.min(411),{display:"none"}),titleLong:(0,i._)({display:"none"},T.kL.min(411),{display:"inline"})}),ee=(0,s.memo)(function(e){var n=e.created,t=e.openDeploymentsPane,r=e.paneType,i=(0,m.cF)();return(0,l.Y)(en,{created:n,openDeploymentsPane:t,currentBuild:i,hasDeployment:!!i,paneType:r})});function en(e){var n,t,i=e.created,u=e.currentBuild,E=e.openDeploymentsPane,R=e.hasDeployment,I=e.paneType,T=(0,o._)((0,s.useState)(void 0),2),F=T[0],P=T[1],L=(0,o._)((0,s.useState)(!1),2),U=L[0],N=L[1],O=(0,o._)((0,s.useState)(null),2),M=O[0],H=O[1],B=(0,o._)((0,s.useState)(!0),2),G=B[0],V=B[1],Z=(0,s.useCallback)(function(e){(0,C.Q)({error:Error(e),context:"SuggestDeployCard",isDeploymentsPane:!1}),N(!0)},[]),j=(0,x.A)(),K=(0,m.ik)(j),$=(0,m.Ol)(),J=(0,m.om)(),Q=(0,m.g$)(),ee=(0,m.kM)({replId:j,onError:Z,dotReplitService:$}).recommendedProvider,en=(0,(0,m.mj)().getDeployabilityByProvider)(ee).deploy,er=en.isAuthorized,ei="Loading"===en.message;(0,s.useEffect)(function(){!ei&&(er||P("NOT_AVAILABLE"))},[ei,er]);var eo=(0,o._)((0,s.useState)(null),2),ea=eo[0],el=eo[1],es=(0,A.wQ)({replId:j,onError:Z}).machineConfigurations,ec=(0,S.g)({onError:Z}).machineConfigurations,eu=(0,o._)((0,c.fp)(b.h0),1)[0],ed=(0,c.md)(w.NF),ep=(0,c.md)(w.No);(0,s.useEffect)(function(){if(ee)switch(ee){case d.Q0q.Gce:if(!es)return;var e=(0,A.pR)({machineConfigurations:es,isTeamRepl:K});if(!e)return void Z("An error occurred trying to validate default machine configuration");var n=e.id,t=e.slug;el({configurationId:n,configurationLabel:e.label,configurationSlug:t});break;case d.Q0q.CloudRun:if(!ec)return;var r=ec.find(function(e){var n=e.vcpu,t=e.memory;return ed.toString()===n&&ep.toString()===t});if(!r)return void Z("An error occurred trying to validate selected machine configuration");var i=r.id,o=r.slug;el({configurationId:i,configurationLabel:r.label,configurationSlug:o,maxInstances:eu})}},[ec,ed,ep,K,eu,ee,es,Z]);var ef=(0,o._)((0,s.useState)(d.JX5.Server),2),eh=ef[0],em=ef[1],eg=(0,o._)((0,s.useState)(null),2),ev=eg[0],ey=eg[1],ew=(0,o._)((0,s.useState)(null),2),eb=ew[0],eS=ew[1],eY=(0,o._)((0,s.useState)(null!=(t=null==u?void 0:u.envVars.map(function(e){return{name:e.name,value:e.value}}))?t:[]),2),e_=eY[0],eA=eY[1],eC=(0,o._)((0,s.useState)(!1),2),ek=eC[0],ex=eC[1],eD=(0,o._)((0,s.useState)(null),2),eE=eD[0],eR=eD[1],eI=(0,k._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:p.co}),eT=(0,_.D)({replId:j,provider:ee,fs:J,secrets:Q,dotReplit:$,isNewDeployment:!R,onError:Z,onOptions:function(e){e.appType&&em(e.appType),e.envVars&&eA(e.envVars),e.ignorePorts&&ex(e.ignorePorts),e.buildCommand&&ey(e.buildCommand),e.runCommand&&eS(e.runCommand),e.publicDir&&eR(e.publicDir)}}).loading,eF=(0,y.n)(),eP=(0,h.GK)(),eL=eP.loading,eU=eP.database,eN=(0,h.UK)(),eO=eN.loading,eM=eN.database,eH=!eL&&!!eU,eB=!eO&&!!eM,ez=(0,o._)((0,s.useState)(void 0),2),eW=ez[0],eG=ez[1],eV=(0,o._)((0,s.useState)(void 0),2),eZ=eV[0],ej=eV[1],eq=(0,o._)((0,s.useState)(void 0),2),eK=eq[0],e$=eq[1],eJ=(0,o._)((0,s.useState)(void 0),2),eQ=eJ[0],eX=eJ[1],e0=(0,m.bu)(),e1=(0,m._k)().getRvmDeploymentCostDetailsByConfigurationSlug;(0,s.useEffect)(function(){if(!eT){if(!ee){eG(void 0),ej(void 0),e$(void 0),eX(void 0),P(void 0);return}var e,n,t="".concat(e0).concat((null==(n=window)||null==(e=n.location)?void 0:e.hostname)!=="replit.com"?".staging":"",".").concat(eI);switch(ee){case d.Q0q.Gce:if(!ea)return;var r=e1(ea.configurationSlug).costPerMonth;eG((0,l.Y)(W.A,{})),ej("Reserved VM Deployment"),e$("$".concat(r,"/month"));var i={};i["Default URL"]=t,ev&&(i["Build Command"]=ev),i["Run Command"]=eb,eX(i);break;case d.Q0q.CloudRun:if(!ea)return;eG((0,l.Y)(z.A,{})),ej((0,l.FD)(l.FK,{children:[(0,l.Y)("span",{css:X.titleShort,children:"Autoscale"}),(0,l.Y)("span",{css:X.titleLong,children:"Autoscale Deployment"})]}));var o={};o["Default URL"]=t,ev&&(o["Build Command"]=ev),o["Run Command"]=eb,eX(o);break;case d.Q0q.Static:eG((0,l.Y)(q.A,{})),ej("Static Deployment"),e$("Free");var a={"Public Directory":eE,"Default URL":t};ev&&(a["Build Command"]=ev),eX(a);break;default:eG(void 0),ej(void 0),e$(void 0),eX(void 0),P(void 0)}}},[ev,ed,e0,eI,eT,ep,ee,es,eb,eu,K,ea,eE,e1]);var e2=(0,m.Tp)({openDeploymentsPane:E}),e4=e2.deployBuild,e5=e2.redeployWithNoNewOptions,e3=(n=(0,r._)(function(){var e,n,t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:if(!er)return[2];if(P("DEPLOYING"),(0,D.u4)(D.AZ.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy",redeploy:R,has_agent_session:!0}),!R)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e5({hasAgentSession:!0})];case 2:return i.sent(),[3,4];case 3:return Z(i.sent().message),[3,4];case 4:return[2];case 5:if(e=M&&G,n=(null==e0?void 0:e0.length)?e0:void 0,!(t=e?M:n))return[2];r=(0,Y.q)({flagHasNeonProductionDatabases:eF,hasNeonProductionDatabase:eB,hasNeonDevelopmentDatabase:eH,isRedeploy:!1}),i.label=6;case 6:return i.trys.push([6,8,,9]),[4,e4({ignoredSecrets:[],envVars:e_.filter(function(e){return(0,f.zV)(e)}),subdomain:t,machineConfigurationId:(null==ea?void 0:ea.configurationId)||void 0,maxMachineInstances:(null==ea?void 0:ea.maxInstances)||void 0,config:{buildCommand:ev,runCommand:eb,appType:eh,ignorePorts:ek,publicDir:eE},isPrivate:!1,hasAgentSession:!0,createNeonProductionDatabase:r})];case 7:return i.sent(),E&&E(),[3,9];case 8:return Z(i.sent().message),[3,9];case 9:return[2]}})}),function(){return n.apply(this,arguments)}),e7=(0,g.u)();(0,s.useEffect)(function(){if(!U)switch(e7){case v.d.Ready:if("FAILED"===F||"FINISHED"===F)break;P("READY");break;case v.d.Suspended:P("NOT_AVAILABLE");break;case v.d.Preparing:case v.d.Deploying:P("DEPLOYING")}},[U,e7,F]),(0,m.kW)(function(e){if(!U&&"HostingBuildDeployStatusAction"===e.__typename)switch(e.status){case d.nHS.Failed:P("FAILED");break;case d.nHS.Success:P("FINISHED")}}),(0,s.useEffect)(function(){(0,D.u4)(D.AZ.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy_shown",has_agent_session:!0})},[]);var e6=ei||eT;return(0,l.Y)(et,{created:i,icon:eW,title:eZ,cost:eK,properties:eQ,status:U?"NOT_AVAILABLE":F,onDeploy:er&&ee&&ee!==d.Q0q.Cron?e3:void 0,defaultSubdomain:e0,onSubdomainEdit:H,onSubdomainValidityChange:V,openDeploymentsPane:E,hasDeployment:R,loading:e6,paneType:I})}function et(e){var n=e.icon,t=e.title,r=e.cost,i=e.properties,o=e.status,a=void 0===o?"READY":o,s=e.defaultSubdomain,c=e.onDeploy,u=e.openDeploymentsPane,d=e.onSubdomainEdit,p=e.onSubdomainValidityChange,f=e.hasDeployment,h=e.loading,m=e.paneType,g=i&&Object.keys(i).length>0,v=h?(0,l.Y)(E.G,{}):(0,l.FD)(M.S,{clsx:Q().container,gap:8,"data-event-type":"deploy",children:[(0,l.Y)(N.EY,{clsx:Q().message,color:"STALE"===a?"dimmer":"default",children:f?"Want users to get these changes? Redeploy this App.":"Ready to share? Deploy this App in ".concat(c?"one click":"a few clicks",".")}),(null==i?void 0:i["Default URL"])&&!f?(0,l.Y)(ei,{icon:void 0===n?null:n,title:void 0===t?"Deployment":t,cost:void 0===r?"":r,properties:i,paneType:m,initialSubdomain:s,onSubdomainEdit:d,onSubdomainValidityChange:p}):null,c||u?(0,l.Y)(M.S,{row:!0,gap:8,align:"center",justify:g?"start":"end",children:(0,l.Y)(el,{status:a,hasDeployment:f,onDeploy:c,openDeploymentsPane:u?function(){u()}:void 0})}):null]});return"agentChat"===m?v:(0,l.Y)(U.ui,{elevated:!0,clsx:Q().assistant,children:v})}var er=function(e){var n,t,r,i=e.id,a=e.initialSubdomain,c=e.deploymentId,d=e.onSubdomainEdit,f=e.onSubdomainValidityChange,h=(0,o._)((0,s.useState)(a||""),2),m=h[0],g=h[1],v=(0,k._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:p.co}),y=v!==p.co,w=(0,u.qA)({variables:{subdomain:m,deploymentId:c},skip:0===m.length}),b=w.data,S=w.loading,Y=w.error,_=(null==b?void 0:b.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&b.replitAppSubdomainAvailability.available,A=(null==b?void 0:b.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?b.replitAppSubdomainAvailability.message:null==b||null==(n=b.replitAppSubdomainAvailability)?void 0:n.errorMessage;return((0,s.useEffect)(function(){f(_)},[_,f]),Y)?(0,l.Y)(L.N,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,l.FD)(M.S,{clsx:Q().urlField,grow:!0,shrink:!0,children:[(0,l.FD)(M.S,{row:!0,gap:8,align:"center",justify:"space-between",grow:!0,shrink:!0,children:[(0,l.Y)(P.pd,{id:i,value:m,onChange:function(e){g(e.target.value),d(e.target.value)}}),(0,l.FD)(N.EY,{multiline:!1,children:[(null==(r=window)||null==(t=r.location)?void 0:t.hostname)!=="replit.com"?".staging":"",".",v]}),(0,l.FD)(M.S,{row:!0,gap:4,pt:4,align:"center",children:[S?(0,l.Y)(j.A,{}):null,_?(0,l.Y)(H.A,{color:"green"}):null,_||S?null:(0,l.Y)(O.m_,{tooltip:A,isDisabled:!A,children:(0,l.Y)($.A,{color:"red"})})]})]}),y?(0,l.Y)(L.N,{colorway:"warning",text:"The ".concat(p.co," domain is currently unavailable, please use the ").concat(v," URL above.")}):null]})};function ei(e){var n=e.icon,t=e.title,r=e.cost,i=e.paneType,o=e.initialSubdomain,a=e.onSubdomainEdit,s=e.onSubdomainValidityChange;return(0,l.FD)(M.S,{clsx:Q().properties,style:"agentChat"===i?{backgroundColor:R.LU.interactiveBackground}:void 0,children:[(0,l.FD)(M.S,{clsx:Q().propertiesHeader,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,l.FD)(M.S,{clsx:Q().propertiesTitle,row:!0,gap:8,align:"center",children:[(0,l.Y)(V.Z_,{size:20,children:n}),(0,l.Y)(N.EY,{children:(0,l.Y)("strong",{children:t})})]}),r?(0,l.Y)(N.EY,{children:r}):null]}),(0,l.FD)(M.S,{clsx:Q().urlContainer,gap:8,children:[(0,l.FD)(M.S,{row:!0,gap:8,align:"center",children:[(0,l.Y)(Z.A,{}),(0,l.Y)(N.EY,{children:"Primary URL"})]}),(0,l.Y)(M.S,{row:!0,gap:8,align:"center",children:(0,l.Y)(er,{id:"primaryDomain",initialSubdomain:o,onSubdomainEdit:a,onSubdomainValidityChange:s})})]})]})}function eo(e){var n,t,r,o,a=e.status,s=e.onDeploy,c=e.openDeploymentsPane;if("NOT_AVAILABLE"===a)return(0,l.FD)(M.S,{clsx:Q().cannotDeploy,gap:8,children:[(0,l.Y)(L.N,{colorway:"warning",icon:(0,l.Y)($.A,{}),title:"Deployments not available",text:"There is an issue preventing you from deploying. You may be able to resolve this using the Deployments pane."}),c?(0,l.Y)(F.$n,{onClick:c,iconLeft:(0,l.Y)(K.A,{}),text:"Open Deployments",alignment:"start",colorway:"primary"}):null]});var u=null;switch(a){case"DEPLOYING":u=(0,l.Y)(j.A,{}),n="Deploying",t="primary";break;case"FINISHED":u=(0,l.Y)(H.A,{}),n="Deployed",t="green",r="Click to redeploy";break;case"FAILED":u=(0,l.Y)($.A,{}),n="Failed",t="red",r="Click to redeploy";break;case"CONFIGURED_MANUALLY":u=(0,l.Y)(B.A,{}),n="Deployment configured manually";break;case"STALE":u=(0,l.Y)(B.A,{}),n="This configuration is for an older version of the app";break;default:return null}var d=(0,l.Y)(F.$n,{onClick:s,text:n,iconLeft:u,colorway:t,loading:"DEPLOYING"===a});return"DEPLOYING"===a||"FINISHED"===a||"FAILED"===a?(0,l.FD)(l.FK,{children:[r?(0,l.Y)(O.m_,{tooltip:r,children:d}):d,c&&"FAILED"===a?(0,l.Y)(F.$n,{onClick:c,iconLeft:(0,l.Y)(K.A,{}),text:"Advanced configuration"}):null]}):(0,l.FD)(M.S,{clsx:(o={},(0,i._)(o,Q().status,!0),(0,i._)(o,Q().isConfiguredManually,"CONFIGURED_MANUALLY"===a),(0,i._)(o,Q().isStale,"STALE"===a),o),row:!0,gap:8,align:"center",children:[u,(0,l.Y)(N.EY,{children:n})]})}var ea=(0,I.x)({group:[T.wp.width("100%"),{"> div":{width:"100%"}}]});function el(e){var n=e.status,t=void 0===n?"READY":n,r=e.onDeploy,i=e.openDeploymentsPane,o=e.hasDeployment;if(!r&&!i)return null;if("READY"===t){if(r)return(0,l.Y)(l.FK,{children:(0,l.Y)(M.S,{css:ea.group,gap:6,justify:"start",align:"end",children:(0,l.FD)(M.S,{row:!0,gap:8,align:"center",justify:"end",children:[i?(0,l.Y)(F.$n,{onClick:i,iconLeft:(0,l.Y)(K.A,{}),text:"Configure myself"}):null,(0,l.Y)(F.$n,{onClick:r,text:o?"Redeploy":"Deploy now",iconLeft:(0,l.Y)(G.A,{}),colorway:"primary"})]})})});if(i)return(0,l.Y)(F.$n,{onClick:i,text:"Open Deployments",iconLeft:(0,l.Y)(G.A,{}),colorway:"primary"})}return(0,l.Y)(eo,{status:t,onDeploy:r,openDeploymentsPane:i})}},89170:(e,n,t)=>{"use strict";t.d(n,{k:()=>x,T:()=>D});var r=t(17844),i=t(81073),o=t(58219),a=t(93629),l=t(17459),s=t(58770),c=t(60690),u=t(42793),d=t(27023),p=t(1684),f=t(4616),h=(0,u.AH)([d.wp.fontSize(13)]);function m(e){var n=e.name,t=(0,l._)(e,["name"]),o=(0,c.Jn)(n.id),u=(0,s.vm)();if(!o)return null;var d=(0,c.LH)(o,u);return""===d.trim()?null:(0,i.Y)(p.a,(0,a._)((0,r._)({},t),{text:(0,i.Y)(f.EY,{css:h,color:"dimmest",children:d})}))}var g=t(52367),v=t(79166),y=t(50301),w=t(36937),b=t(18509),S=t(85389),Y=t(83528),_=t(60943),A=t(27301),C=t(19202),k=(0,b.x)({root:[{paddingInline:_.eQ.inputBarPadding,"&:hover .icon":{backgroundColor:"var(".concat(w.qo.interactiveBackground,")")}}],iconAndIndicator:[d.wp.position.relative],iconContainer:[d.wp.position.relative,_.Ef,{width:_.eQ.iconSize,height:_.eQ.iconSize}],textContent:[d.wp.flex.growAndShrink(1)],aliasContainer:[d.wp.color.foregroundDimmest,d.wp.align.center,d.wp.flex.growAndShrink(1)],descriptionText:[{fontSize:"0.9em"}]});function x(e){var n=e.pane,t=e.active,o=e.labelHighlights,a=(0,v.Vv)(),l=a.Icon({pane:n}),s=a.getTitle(n),c=(0,v.qo)(n,{short:!0}),u=a.getTitlePill(n),d=(0,y.F9)({paneType:n.type}),h=(0,Y.mg)();return(0,i.FD)(S.S,{css:k.root,grow:!0,shrink:!0,row:!0,align:"center",gap:_.eQ.inputBarPadding,style:h?{paddingTop:_.eQ.inputBarPadding,paddingBottom:_.eQ.inputBarPadding}:void 0,children:[(0,i.FD)(S.S,{css:k.iconAndIndicator,children:[(0,i.Y)(S.S,{css:k.iconContainer,style:{opacity:e.active?1:.7},children:l}),d?(0,i.Y)(g.b,{color:d}):null]}),(0,i.FD)(S.S,{css:k.textContent,gap:2,children:[(0,i.FD)(S.S,{row:!0,gap:4,justify:"space-between",children:[e.alias?(0,i.FD)(S.S,{row:!0,gap:8,css:k.textContent,children:[(0,i.Y)(f.EY,{children:s}),(0,i.FD)(S.S,{css:k.aliasContainer,row:!0,gap:4,children:["(",e.aliasPrefix?(0,i.FD)(f.EY,{color:"dimmest",children:[e.aliasPrefix," "]}):null,(0,i.Y)(C.e,{dimmed:!0,text:e.alias,highlight:o}),")"]})]}):(0,i.Y)(C.e,{dimmed:!t,text:s,highlight:o}),h&&null!=u?(0,i.Y)(p.a,(0,r._)({},u)):null]}),h&&null!=c?(0,i.Y)(C.e,{dimmed:!t,text:c,highlight:e.descriptionHighlights,multiline:!0,css:k.descriptionText}):null]}),e.shortcutCommand?(0,i.Y)(m,{name:e.shortcutCommand}):null]})}function D(e){var n=e.pane,t=e.aliases,r=void 0===t?[]:t;return function(e){var t=e.searchQuery,a=e.data,l=e.active;if("group"===a.type)return null;if(!t)return{score:1,render:{content:(0,i.Y)(x,{pane:n})}};var s=(0,o.w2)(t,a.label,{filterLowMatchScores:!0}),c=null;if(null!=a.description&&(c=(0,o.w2)(t,a.description,{filterLowMatchScores:!0,fuzzy:!1}))&&(c.score*=A.B.toolDescription),null!=s||null!=c)return{score:null!=(h=null!=(f=null==s?void 0:s.score)?f:null==c?void 0:c.score)?h:0,render:{content:(0,i.Y)(x,{pane:n,labelHighlights:null!=(m=null==s?void 0:s.ranges)?m:[],descriptionHighlights:null!=(g=null==c?void 0:c.ranges)?g:[],active:l})}};var u=!0,d=!1,p=void 0;try{for(var f,h,m,g,v,y=r[Symbol.iterator]();!(u=(v=y.next()).done);u=!0){var w=v.value,b="string"==typeof w?{alias:w,prefix:void 0}:w,S=b.alias,Y=b.prefix,_=(0,o.w2)(t,S,{filterLowMatchScores:!0});if(_)return{score:_.score,render:{content:(0,i.Y)(x,{pane:n,active:l,alias:S,aliasPrefix:Y,labelHighlights:_.ranges})}}}}catch(e){d=!0,p=e}finally{try{u||null==y.return||y.return()}finally{if(d)throw p}}return null}}},89229:(e,n,t)=>{"use strict";t.d(n,{u:()=>l});var r=t(81073),i=t(21462),o=t(53868),a=t(11122);function l(e,n,t){var l=(0,o.K)(e,t,n),s=l.openFeedbackModal,c=l.FeedbackModal,u=(0,i.useMemo)(function(){return e?{data:{type:"action",icon:(0,r.Y)(a.A,{}),label:"Share feedback",run:s}}:null},[s,e]),d=(0,i.useMemo)(function(){return{name:"Feedback",commands:u?[u]:[]}},[u]);return{FeedbackModal:c,feedbackCommand:u,feedbackCommandGroup:d}}},89305:(e,n,t)=>{"use strict";t.d(n,{w:()=>c});var r=t(17341),i=t(8950),o=t(67917),a=t(73176),l=t(76969),s=t(43837);function c(e){var n=(0,o.NC)(),t=(0,a.Rj)(function(){return e?n.sessions.get(e):null},[n,e]),r=(0,s.k)().hasAgentBillingV2;return(0,a.Rj)(function(){return null==t?void 0:t.reduce(r?d:u,"global").result.map(function(e){return{cents:e.cents,billedCheckpoints:e.billedCheckpoints}})},[t,r],{default:{cents:null,billedCheckpoints:null}})}var u={direction:"forward",state:{cents:0,billedCheckpoints:0},reducer:function(e,n){var t=(0,r.HM)(e,"commitData");(null==t?void 0:t.billingRate)===i.pSr.NORMAL&&(n.cents+=l.ri,n.billedCheckpoints+=1)}},d={direction:"forward",state:{cents:0,billedCheckpoints:0},reducer:function(e,n){var t=(0,r.HM)(e,"commitData");(null==t?void 0:t.billingRate)===i.pSr.NORMAL&&void 0!==t.usageCents&&(n.cents+=t.usageCents,n.billedCheckpoints+=1)}}},89588:(e,n,t)=>{"use strict";t.d(n,{A:()=>s,q:()=>c});var r=t(81073),i=t(4616),o=t(85389),a=t(12755),l=t.n(a);function s(){return(0,r.FD)(o.S,{pb:8,pt:16,row:!0,gap:8,align:"start",wrap:!0,clsx:l().container,children:[(0,r.Y)(c,{}),(0,r.Y)(i.EY,{color:"dimmest",children:"This security scan is powered by Semgrep Community Edition."})]})}function c(){return(0,r.FD)("svg",{clsx:l().semgrepLogo,xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 1670 252",children:[(0,r.FD)("g",{fill:"#13bf95",children:[(0,r.Y)("path",{d:"m412-4e-7c55.22847 0 100 44.77153 100 100 0 55.22847-44.77153 100-100 100s-100-44.77153-100-100c1e-3 -22.75534 7.76297-44.82984 22.00391-62.57812 5.79468 6.661495 7.89062 10.6061 13.99609 20.57812h3.5c-3.0923-7.636258-7.63896-15.06492-13.76367-24.96093 18.96049-21.03049 45.94792-33.03689 74.26367-33.03906zm0 44c-30.92795 0-56 25.07205-56 56 0 30.92795 25.07205 56 56 56s56-25.07205 56-56c0-30.92794-25.07205-56-56-56z"}),(0,r.Y)("path",{d:"m256 0c-55.22841 0-100 44.77158-100 100 8e-3 22.74213 7.76844 44.80216 22 62.54102 0.04153-0.05203 0.07004-0.09276 0.11133-0.14454 0.01252 0.01556 0.02458 0.03133 0.03711 0.04688 0.96022-1.20705 1.88357-2.443 2.78711-3.69336 4.19703-5.49557 7.10017-10.10355 9.92773-17.07812 0.25397-0.55649 0.51186-1.11021 0.75586-1.67188h3.38086c-0.72386 2.98756-1.74037 5.91654-2.99414 8.88477-2.79519 5.99462-6.2697 12.37905-9.80078 18.10937-0.05698 0.09227-0.10092 0.17302-0.1582 0.26563 18.94128 20.83966 45.79173 32.72679 73.95312 32.74023 28.16139-0.01344 55.01184-11.90057 73.95312-32.74023-0.05728-0.09261-0.10122-0.17336-0.1582-0.26563-3.53108-5.73032-7.00559-12.11475-9.80078-18.10937-1.25377-2.96823-2.27028-5.89721-2.99414-8.88477h3.38086c0.244 0.56167 0.50189 1.11539 0.75586 1.67188 2.82756 6.97457 5.7307 11.58255 9.92773 17.07812 0.90354 1.25036 1.82689 2.48631 2.78711 3.69336 0.01253-0.01555 0.02459-0.03132 0.03711-0.04688 0.04129 0.05178 0.0698 0.09251 0.11133 0.14454 14.23156-17.73886 21.992-39.79889 22-62.54102 0-55.22842-44.77159-100-100-100zm0 44c30.92792 0 56 25.07208 56 56 0 30.92792-25.07208 56-56 56s-56-25.07208-56-56c0-0.966497 0.02388-1.926386 0.07227-2.880859 1.49985-29.58868 25.96631-53.11914 55.92773-53.11914z"}),(0,r.Y)("path",{d:"m100 0c-55.22848 0-100 44.77152-100 100 0 55.22847 44.77152 100 100 100 55.22847 0 100-44.77153 100-100-1e-3 -22.75534-7.76297-44.82984-22.00391-62.57812-5.79468 6.661495-7.89062 10.6061-13.99609 20.57812h-3.5c3.0923-7.636258 7.63896-15.06492 13.76367-24.96093-18.96049-21.03049-45.94792-33.03689-74.26367-33.03906zm0 44c30.92795 0 56 25.07205 56 56 0 30.92795-25.07205 56-56 56-30.92795 0-56-25.07205-56-56 0-30.92795 25.07205-56 56-56z"})]}),(0,r.FD)("g",{fill:"currentColor",children:[(0,r.Y)("path",{d:"M659.55109 194.4763q-15.41724 0-28.48243-3.92117-13.0652-4.18248-23.51636-12.02494-10.45116-8.10366-18.55228-19.8669l20.64231-23.52687q12.8032 18.0379 24.82438 25.09587 12.01918 6.79666 27.96042 6.79666 9.40715 0 16.98426-2.87559 7.57802-2.87548 12.01918-8.10365 4.44227-5.22817 4.44227-11.76394 0-4.70538-1.56782-8.62645-1.56783-4.18258-4.96488-7.31947-3.39705-3.13698-8.36183-5.75097-4.96487-2.87558-11.49717-4.96677-6.5326-2.09119-14.89423-3.39838-14.11021-3.13698-24.82437-7.84216-10.45116-4.70528-17.76827-11.763938-7.05521-7.058063-10.45116-16.207914-3.39705-9.149252-3.39705-20.389893 0-11.23994 4.96487-20.650891 4.96488-9.672049 13.58721-16.729911 8.62313-7.058063 20.38131-10.7179437Q648.83763 6 662.16483 6q14.89423 0 26.6534 3.6596807 12.01919 3.6596803 21.16533 10.9789423 9.14573 7.058062 15.41723 17.513907l-21.16532 20.650891q-5.48748-8.365056-12.01918-13.854927-6.2714-5.751069-14.11022-8.626454-7.83922-2.875585-16.46225-2.875585-9.66835 0-16.98426 3.136984-7.0552 2.875584-11.23517 8.103557-4.18096 5.228172-4.18096 12.286935 0 5.228172 2.09033 9.672049 2.35164 4.182478 6.5326 7.58076 4.44227 3.398382 11.49717 6.012468 7.05521 2.614186 16.46225 4.443977 14.37122 3.136983 25.60839 8.103557 11.49718 4.705375 19.3363 11.239938 8.10062 6.53527 12.01918 14.90092 4.18096 8.36506 4.18096 18.03791 0 17.7759-8.36182 30.84684-8.10063 12.80893-23.25536 19.86689-15.15523 6.79666-35.80054 6.79666z"}),(0,r.Y)("path",{d:"M815.75346 194.4763q-21.42632 0-37.88957-8.88785-16.46225-9.14925-25.8694-24.83487-9.14573-15.94591-9.14573-36.33581 0-16.20791 5.22617-29.539839 5.22618-13.33193 14.37122-23.003879 9.40715-9.933547 22.21034-15.16192 13.0652-5.489571 28.22143-5.489571 13.58721 0 25.08538 5.228173 11.75818 4.966773 20.38131 14.115925 8.62313 8.887853 13.0652 21.174888 4.70357 12.286933 4.44227 26.663863l-.26129 11.50294h-111.8317l-6.01009-21.69789h92.50341l-3.91966 4.44398v-6.01247q-.78393-8.365057-5.48749-14.639924-4.70357-6.535166-12.01918-10.194946-7.05521-3.92108-15.67824-3.92108-13.5872 0-22.73334 5.228173-9.14574 4.966674-14.11022 14.900921-4.70357 9.933546-4.70357 24.311876 0 13.85492 5.74869 24.04987 6.01009 10.19495 16.72225 15.94591 10.71317 5.48958 24.82438 5.48958 9.92975 0 18.29028-3.13699 8.36183-3.39838 18.29028-11.76394l14.63322 20.6509q-6.5327 6.27376-15.67824 10.97894-9.14574 4.70537-19.07429 7.31946-9.92975 2.61418-19.5973 2.61418z"}),(0,r.Y)("path",{d:"M899.25473 191.86632V54.367045h29.52845v28.493849l-4.96487 2.614086q2.35163-6.796664 6.794-12.808932 4.70357-6.012468 11.23517-10.717943 6.5327-4.705376 14.11021-7.319362 7.57752-2.613986 15.41724-2.614086 11.49717 0 20.1203 3.921079 8.88457 3.659681 14.63327 11.239941 6.01 7.58076 8.8845 19.344898l-4.7036-.784246 1.8291-4.443977q3.1357-6.012468 8.1006-11.23994 5.2262-5.489571 11.7582-9.41065 6.5325-4.182478 13.8492-6.273767 7.3166-2.352688 14.1102-2.352688 15.6782 0 25.8694 6.273767 10.1901 6.273767 15.4172 19.082899 5.2262 12.808933 5.2262 31.630837v82.86656h-29.7905V111.0948q0-11.239946-2.8745-18.298908-2.8744-7.058863-8.6231-10.455945-5.7487-3.659681-14.8943-3.659681-6.794 0-13.0652 2.352688-6.0101 2.352687-10.4511 6.535165-4.4423 4.182478-7.0553 9.933448-2.3519 5.489573-2.3519 12.286933v82.08157h-29.78842V110.5725q0-10.19495-3.13565-17.252911-2.87445-7.319461-8.62313-10.978942-5.74869-3.659681-14.11022-3.659681-6.794 0-12.80319 2.352688-6.01009 2.352687-10.45116 6.535165-4.44227 3.92108-7.05521 9.672049-2.35163 5.489572-2.35163 12.024932v82.60457z"}),(0,r.Y)("path",{d:"M1199.1093 251.996q-14.8942 0-29.7905-4.70527-14.8942-4.70538-24.3003-12.02494l10.9741-22.48188q5.2262 3.92118 12.0192 6.79666 7.0553 3.13699 14.6332 4.70528 7.8393 1.82989 15.6783 1.82989 14.1102 0 23.5163-4.70538 9.4071-4.44397 14.1103-13.59293 4.9648-8.88775 4.9648-22.21988v-25.61886l3.6583 1.56849q-1.3066 8.36505-8.6231 15.68492-7.0554 7.31946-17.7683 12.02493-10.7132 4.44388-21.9494 4.44388-19.3362 0-34.7545-9.14925-15.1552-9.14925-24.0403-25.09587-8.6233-15.94592-8.6233-36.59781t8.6233-36.596804q8.6231-16.207914 23.7783-25.356866 15.1552-9.41065 34.2325-9.41065 7.8393 0 15.1553 2.091189 7.3165 1.82989 13.5872 5.228172 6.2711 3.398382 10.9741 7.58076 4.9647 4.182478 8.1004 8.887753 3.1357 4.705375 3.9196 8.887853l-6.0101 2.091189.2613-31.892831h29.0055V182.98707q0 16.46891-4.9647 29.27784-4.7036 12.80893-14.1102 21.69789-9.1458 8.88785-22.4724 13.33193Q1215.829 252 1199.1038 252Zm1.0452-84.43455q12.2812 0 21.6883-5.75097 9.6684-5.75107 14.8943-15.68492 5.2261-9.93355 5.2261-23.26588 0-13.07093-5.4873-23.265874-5.2263-10.194946-14.6333-15.945916-9.407-5.75107-21.6883-5.75107-12.0192 0-21.4263 6.012469-9.4071 5.751069-14.6332 15.945915-5.2262 10.194946-5.2262 23.003876 0 13.07093 5.2262 23.26588 5.2261 9.93355 14.6332 15.68492 9.4071 5.75097 21.4263 5.75097z"}),(0,r.Y)("path",{d:"M1297.8108 191.86632V54.367045h29.2664l.5227 43.392771-3.6583-9.933548q2.8743-10.194946 9.9297-18.298903 7.0552-8.365056 16.2013-13.070931 9.1458-4.966674 18.8133-4.966674 4.4423 0 8.6231.784206 4.1809.784206 6.5327 1.82989l-7.8393 32.15383q-3.1356-1.307093-7.0552-2.091189-3.9196-1.045594-7.8392-1.045594-6.794 0-13.0652 2.614086-6.0102 2.614186-10.7132 7.319461-4.4424 4.443877-7.3165 10.71794-2.6131 6.01247-2.6131 13.33193v74.76161z"}),(0,r.Y)("path",{d:"M1454.2132 194.4763q-21.4264 0-37.8896-8.88785-16.4623-9.14925-25.8684-24.83487-9.1458-15.94591-9.1458-36.33581 0-16.20791 5.2261-29.539839 5.2262-13.33193 14.3713-23.003879 9.4071-9.933547 22.2103-15.16192 13.0652-5.489571 28.2204-5.489571 13.5872 0 25.0844 5.228173 11.7582 4.966773 20.3823 14.115925 8.623 8.887853 13.0652 21.174888 4.7036 12.286933 4.4423 26.663863l-.2615 11.50294h-111.8317l-6.0101-21.69789h92.5034l-3.9197 4.44398v-6.01247q-.7839-8.365057-5.4875-14.639924-4.7034-6.535166-12.0191-10.194946-7.0554-3.92108-15.6783-3.92108-13.5872 0-22.7323 5.228173-9.146 4.966674-14.1102 14.900921-4.7036 9.933546-4.7036 24.311876 0 13.85492 5.7487 24.04987 6.0101 10.19495 16.7222 15.94591 10.7132 5.48958 24.8244 5.48958 9.9297 0 18.2903-3.13699 8.3618-3.39838 18.2903-11.76394l14.6332 20.6509q-6.5326 6.27376-15.6782 10.97894-9.1458 4.70537-19.0743 7.31946-9.9297 2.61418-19.5973 2.61418z"}),(0,r.Y)("path",{d:"M1532.8144 249.37601V54.367045h29.2664l.2611 31.369834-4.7036-2.352688q1.5679-8.103557 8.8846-15.16192 7.3165-7.319361 17.7682-11.763937 10.7132-4.443977 22.2104-4.443977 18.2903 0 32.4025 9.149252 14.3712 9.149251 22.7343 25.095867Q1670 102.20539 1670 122.85628q0 20.65189-8.3617 36.85781-8.1007 15.94591-22.4723 25.35686-14.1102 9.14926-32.1405 9.14926-12.0192 0-23.2564-4.70528-10.9741-4.70527-18.8132-12.28693-7.8393-7.58066-9.6685-15.94592l7.3168-3.65968v91.75351zm68.724-81.81956q11.4972 0 20.3813-5.75097 9.1458-5.75107 14.3712-15.68492 5.2261-10.19495 5.2261-23.26588 0-12.80893-5.2261-22.74288-4.9648-9.933544-14.1102-15.684914-8.8843-5.75097-20.6423-5.75097t-20.9043 5.75097q-8.8845 5.489571-14.1102 15.684914-5.2262 9.93355-5.2262 22.74288 0 13.07093 5.2262 23.26588 5.2262 9.93355 14.1102 15.68492 9.1456 5.75097 20.9043 5.75097z"})]})]})}},89925:(e,n,t)=>{"use strict";t.d(n,{T:()=>k,O:()=>A});var r=t(17844),i=t(93629),o=t(81073),a=t(21462),l=t(27741),s=t(66485),c=t(35992),u=t(76957),d=t(12694),p=t(79203);function f(){return(0,d._)((0,a.useState)(function(){return(0,u.y$)()}),1)[0]}var h=(0,a.createContext)(null),m=function(e){return(0,p.Xr)(e,{store:function(){var e=(0,a.useContext)(h);if(!e)throw Error("Expected store in context");return e}()})},g=(0,u.eU)(-1),v=(0,u.eU)([]),y=(0,u.eU)(void 0),w=(0,u.eU)(null,function(e,n,t){var r=e(y);switch(r&&(clearTimeout(r.id),r.cb()),t){case"forward":n(g,function(n){return Math.min(e(v).length,n+1)});break;case"backward":n(g,function(e){return Math.max(0,e-1)})}var i=e(v),o=e(g);return o>=i.length?"":i[o]}),b=(0,u.eU)(null,function(e,n,t){clearTimeout(null==(r=e(y))?void 0:r.id);var r,i=function(){if(t.length>0){var r=!1;n(v,function(n){return(0,c.jM)(n,function(n){if(t!==n[e(g)])for(r=!0,n.push(t);n.length>20;)n.shift()})}),r&&n(g,e(v).length-1)}n(y,void 0)};n(y,{id:setTimeout(i,2e3),cb:i})}),S=t(40259);function Y(e){var n,t=m(b),o=(n=m(w),{forward:(0,l.A)(function(){return function(){return n("forward")}},[n]),backward:(0,l.A)(function(){return function(){return n("backward")}},[n])}),c=o.forward,u=o.backward,d=(0,a.useRef)(e.value);return(0,a.useEffect)(function(){e.value!==(null==d?void 0:d.current)&&(e.value&&t(e.value),d.current=e.value)},[t,e.value]),(0,i._)((0,r._)({},e),{onKeyDown:(0,l.A)(function(){return function(n){if(n.shiftKey||(0,s.T$)(n)){null==(r=e.onKeyDown)||r.call(e,n);return}var t,r,i=n.currentTarget,o=!!i.value.match(/\n/);if("ArrowUp"===n.key){if(o&&i.selectionStart&&i.selectionStart>0)return;e.onChange(u()),n.preventDefault(),n.stopPropagation();return}if("ArrowDown"===n.key){if(o&&i.selectionEnd&&i.selectionEnd<i.value.length)return;e.onChange(c()),n.preventDefault(),n.stopPropagation();return}null==(t=e.onKeyDown)||t.call(e,n)}},[u,c,e]),onChange:(0,l.A)(function(){return function(n){e.onChange(n.target.value)}},[e])})}var _=(0,a.forwardRef)(function(e,n){var t=Y(e);return(0,o.Y)(S.ov,(0,r._)({ref:n},t))}),A=(0,a.forwardRef)(function(e,n){var t=f();return(0,o.Y)(h.Provider,{value:t,children:(0,o.Y)(_,(0,r._)({ref:n},e))})}),C=(0,a.forwardRef)(function(e,n){var t=Y(e);return(0,o.Y)(S.pd,(0,r._)({ref:n},e,t))}),k=(0,a.forwardRef)(function(e,n){var t=f();return(0,o.Y)(h.Provider,{value:t,children:(0,o.Y)(C,(0,r._)({ref:n},e))})})},89998:(e,n,t)=>{"use strict";t.d(n,{$c:()=>H,B2:()=>U,Hh:()=>B,LQ:()=>N,NG:()=>O,Nt:()=>I,Xt:()=>P,rf:()=>T,zg:()=>M});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(51026),s=t(68197),c=t(50175),u=t(25763),d=t(68389);function p(){var e=(0,i._)(["\n  fragment DeploymentSessionCurrentUser on CurrentUser {\n    id\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment DeploymentAuthorization on ReplAuthorization {\n    isAuthorized\n    code\n    message\n  }\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment DeploymentAuthorizations on Repl {\n    id\n    authorizations {\n      createAutoscaleDeployment: createDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createAutoscaleDeploymentPrivate: createDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeployment: createDeployment(provider: gce, isPrivate: false) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeploymentPrivate: createDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createScheduledDeployment: createDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeployment: createDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeploymentPrivate: createDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeployment: redeployDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeploymentPrivate: redeployDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeployment: redeployDeployment(\n        provider: gce\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeploymentPrivate: redeployDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployScheduledDeployment: redeployDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeployment: redeployDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeploymentPrivate: redeployDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      useDeploymentDebugSummaries {\n        ...DeploymentAuthorization\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on Error {\n        message\n      }\n    }\n    ...DeploymentAuthorizations\n  }\n  ","\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,i._)(["\n  query DeploymentSession($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      ...DeploymentSessionCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}function y(){var e=(0,i._)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n        debugSummary {\n          ...BuildDebugSummary\n        }\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function w(){var e=(0,i._)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n        targetDatabase {\n          ...WorkspaceNeonDatabase\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return w=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function S(){var e=(0,i._)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return S=function(){return e},e}function Y(){var e=(0,i._)(["\n  query DeploymentGetIgnoredSecretsHostingDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            ignoredSecrets\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return Y=function(){return e},e}function _(){var e=(0,i._)(["\n  query DeploymentGetEnvVarsHostingDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              envVars {\n                name\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return _=function(){return e},e}var A={},C=(0,o.J1)(p()),k=(0,o.J1)(f(),d.Zc,d.UQ),x=(0,o.J1)(h()),D=(0,o.J1)(m(),x),E=(0,o.J1)(g(),k,D),R=(0,o.J1)(v(),E,C);function I(e){var n=(0,r._)({},A,e);return a.I(R,n)}function T(e){var n=(0,r._)({},A,e);return l._(R,n)}var F=(0,o.J1)(y(),d.mY);function P(e){var n=(0,r._)({},A,e);return s.R(F,n)}var L=(0,o.J1)(w(),d.UQ,d.Zc,u.Vl);function U(e){var n=(0,r._)({},A,e);return c.n(L,n)}var N=(0,o.J1)(b(),k),O=(0,o.J1)(S(),d.UQ),M=(0,o.J1)(Y());function H(e){var n=(0,r._)({},A,e);return l._(M,n)}var B=(0,o.J1)(_())},90082:e=>{e.exports={root:"MobileAgentTourNudge_root__nMeVj",mobileQr:"MobileAgentTourNudge_mobileQr__Vu4bv",btnLeft:"MobileAgentTourNudge_btnLeft__NOLhn",btnBonsai:"MobileAgentTourNudge_btnBonsai__g_v15",btnRight:"MobileAgentTourNudge_btnRight__mQWdo"}},90097:(e,n,t)=>{"use strict";t.d(n,{AI:()=>p,Ou:()=>u,Pd:()=>l,h:()=>c,ob:()=>d});var r=t(21462),i=t(79203),o=t(26325),a=t(94680),l=(0,r.createContext)(void 0);function s(){var e=(0,r.useContext)(l);if(!e)throw Error("Expected store in context");return e}function c(e){var n=s();return(0,i.md)(e,{store:n})}function u(e){return(0,o.yF)((0,r.useCallback)(function(n){return n(e)},[e]),{store:s()})}var d=function(e){var n=s();return(0,i.Xr)(e,{store:n})};function p(e){return(0,a.k)(e,s())}},90205:(e,n,t)=>{"use strict";t.d(n,{FR:()=>_,Gx:()=>y,XE:()=>b});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(66890),s=t(94827),c=t(89998),u=t(9701),d=t(35651),p=t(78251),f=t(56897),h=t(46797),m=t(14596),g=t(33090),v=t(54564);function y(e){var n=e.secrets,t=e.replId,l=(0,i._)((0,s.fY)(),1)[0],u=(0,i._)((0,c.$c)(),1)[0];return(0,a.useCallback)((0,r._)(function(){var e,r,a,s,c,d,p,f,h,m,g,v,y,w,b,S,Y,_,A,C,k,x;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,l({variables:{replId:t}})];case 1:return a=o.sent().data,[4,u({variables:{replId:t}})];case 2:if(s=o.sent().data,c=new Map,d=(null==s?void 0:s.getRepl.__typename)==="Repl"&&(null==s||null==(e=s.getRepl.hostingDeployment)?void 0:e.__typename)==="HostingDeployment"?s.getRepl.hostingDeployment.ignoredSecrets:[],(null==a?void 0:a.getRepl.__typename)==="Repl"&&a.getRepl.sharedSecretLinks&&(null==(r=a.currentUser)?void 0:r.secrets.__typename)==="SharedSecretConnection"){p=a.currentUser.secrets.items,f=!0,h=!1,m=void 0;try{for(g=function(){var e,n=y.value,t=p.find(function(e){return e.id===n.secret.id});c.set(n.alias,null!=(e=null==t?void 0:t.value)?e:"")},v=a.getRepl.sharedSecretLinks[Symbol.iterator]();!(f=(y=v.next()).done);f=!0)g()}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}return[4,n.read()];case 3:w=o.sent(),b=!0,S=!1,Y=void 0;try{for(_=w.entries()[Symbol.iterator]();!(b=(A=_.next()).done);b=!0)k=(C=(0,i._)(A.value,2))[0],x=C[1],d.includes(k)||c.set(k,x)}catch(e){S=!0,Y=e}finally{try{b||null==_.return||_.return()}finally{if(S)throw Y}}return[2,Array.from(c,function(e){var n=(0,i._)(e,2);return{name:n[0],value:n[1]}})]}})}),[n,u,l,t])}function w(){return(w=(0,r._)(function(e){var n,t,r;return(0,o.YH)(this,function(i){switch(i.label){case 0:return[4,e.getConfig()];case 1:if(t=(n=i.sent()).config,(r=n.error)===m.DO.NotFound)return[2];if(r)throw Error("Failed to get .replit config with Error: "+r);return[2,t]}})})).apply(this,arguments)}function b(e){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e){var n,t,r,i,a,s,c,u,p,h,m,g,v;return(0,o.YH)(this,function(o){switch(o.label){case 0:return n=null,t=null,r=null,i=null,a=null,[4,function(e){return w.apply(this,arguments)}(e)];case 1:if(!(s=o.sent()))return[2,{buildCommand:n,runCommand:t,ignorePorts:r,appType:i,publicDir:a}];if(!s.deployment)return[3,2];switch(u=(c=s.deployment).build,p=c.run,h=c.ignorePorts,m=c.target,g=c.publicDir,u&&(n=(0,f.a8)(u)),p&&(t=(0,f.a8)(p)),null!=h&&(r=h),m){case d.api.DeploymentConfig.Target.VM:case d.api.DeploymentConfig.Target.GCE:i=r?l.JX5.Worker:l.JX5.Server;break;case d.api.DeploymentConfig.Target.AUTOSCALE:case d.api.DeploymentConfig.Target.CLOUDRUN:i=l.JX5.CloudRun;break;case d.api.DeploymentConfig.Target.STATIC:i=l.JX5.Static;break;case d.api.DeploymentConfig.Target.SCHEDULED:i=l.JX5.Cron}return g&&(a=g),[3,4];case 2:return[4,e.getRunConfig()];case 3:v=o.sent(),s.compile&&(n=(0,f.a8)(s.compile)),v.run?t=(0,f.a8)(v.run.run):s.run&&(t=(0,f.a8)(v.run)),o.label=4;case 4:return[2,{buildCommand:n,runCommand:t,ignorePorts:r,appType:i,publicDir:a}]}})})).apply(this,arguments)}var Y={buildCommand:{delete:function(){return(0,h.m_)("deployment/build")},create:function(e){return(0,h.dA)(e.toString())}},runCommand:{delete:function(){return(0,h.m_)("deployment/run")},create:function(e){return(0,h.eH)(e.toString())}},ignorePorts:{delete:function(){return(0,h.m_)("deployment/ignorePorts")},create:function(e){return(0,h.KY)(!!e)}},appType:{delete:function(){return(0,h.m_)("deployment/deploymentTarget")},create:function(e){var n=null;switch(e){case l.JX5.Server:case l.JX5.Worker:n="gce";break;case l.JX5.CloudRun:n="cloudrun";break;case l.JX5.Static:n="static";break;case l.JX5.Cron:n="scheduled"}return n?(0,h.GS)(n):null}},publicDir:{delete:function(){return(0,h.m_)("deployment/publicDir")},create:function(e){return(0,h.Df)(e.toString())}}};function _(e,n,t){return A.apply(this,arguments)}function A(){return(A=(0,r._)(function(e,n,t){var r,i,a,l,s,c,d,f,h,m,y,w,b,S,_,A;return(0,o.YH)(this,function(o){switch(o.label){case 0:r=t.fs,i=t.container,a=t.dotReplit,l=[],s=!0,c=!1,d=void 0;try{for(f=Object.keys(e)[Symbol.iterator]();!(s=(h=f.next()).done);s=!0)y=e[m=h.value],w=n[m],b=Y[m],y!==w&&("string"==typeof y&&(0,p.mU)(y)||"boolean"==typeof y&&y?(S=b.create(y))&&l.push(S):l.push(b.delete()))}catch(e){c=!0,d=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw d}}if(i.getConnectionState()!==u.KN.CONNECTED)throw new v.m$;if(!l.length)return[3,2];return[4,a.updateDotReplit(l)];case 1:if(_=o.sent().error)throw Error(_);o.label=2;case 2:return A=null,[4,new Promise(function(e){r.getStatus()!==g.sn.Syncing&&e(!0),A=setInterval(function(){r.getStatus()!==g.sn.Syncing&&e(!0)},1e3)})];case 3:return o.sent(),A&&clearInterval(A),[2]}})})).apply(this,arguments)}},90342:(e,n,t)=>{"use strict";t.d(n,{LO:()=>u,ff:()=>s,kP:()=>c,w:()=>l});var r=t(21462),i=t(49022),o=t(47848),a=t(71424);function l(e){var n=(0,i.A)(e.portsState);return(0,r.useMemo)(function(){return n?n.filter(function(e){return e.isOpen&&e.configuration.type===o.gH.FORWARDED}):[]},[n])}function s(e){var n=(0,a.A)().ports,t=(0,i.A)(n.portsState);return(0,r.useMemo)(function(){if(t)return t.find(function(n){return n.configuration.type===o.gH.FORWARDED&&n.configuration.externalPort===e})},[t,e])}function c(e){return u((0,a.A)().ports,e)}function u(e,n){var t=(0,i.A)(e.portsState);return(0,r.useMemo)(function(){return n&&t?t.filter(function(e){var t;return null!=(t=e.isOpen&&(null==n?void 0:n.endsWith(e.processInfo.cgroup)))&&t}):[]},[t,n])}},90755:(e,n,t)=>{"use strict";t.d(n,{$:()=>d});var r=t(81073),i=t(37981),o=t(36937),a=t(18509),l=t(27023),s=t(78626),c=t(85389),u=(0,a.x)({dot:[l.wp.width("8px"),l.wp.height("8px"),l.wp.borderRadius("full"),l.wp.flex.shrink(0),l.wp.pr(4)]});function d(e){var n=e.status,t=n in i.v?i.v[n]:{color:o.LU.greyDefault,title:"Unknown status"},a=t.color,l=t.title;return(0,r.Y)(s.m_,{tooltip:l,delay:"long",children:(0,r.Y)(c.S,{tag:"span",css:u.dot,style:{backgroundColor:a,boxShadow:"0 0 12px ".concat(a)}})})}},90765:(e,n,t)=>{"use strict";t.d(n,{Nx:()=>ed,jl:()=>ep,Ay:()=>ef});var r=t(12694),i=t(86105),o=t(81073),a=t(67313),l=t(21462),s=t(7576),c=t.n(s),u=t(66890),d=t(17844),p=t(12584),f=t(41114),h=t(86997),m=t(49625);function g(){var e=(0,p._)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var v={},y=(0,f.J1)(g(),m._9),w=t(28746),b=t(40979),S=t(96034),Y=t(73745),_=t(4616),A=function(e){var n=e.isOpen,t=e.onClose,r=e.onPurchaseComplete;return(0,o.Y)(Y.default,{isOpen:n,onClose:t,type:"purchase",contextualUpsell:(0,o.FD)(o.FK,{children:[(0,o.Y)(_.EY,{variant:"subheadBig",children:"Upgrade for more collaborators"}),(0,o.FD)(_.EY,{multiline:!0,children:["Share your Apps with up to ",w.z$," collaborators with Replit ",S.en]})]}),headingText:"Upgrade for more collaborators",subHeadingText:"Share your Apps with up to ".concat(w.z$," collaborators with Replit ").concat(S.en),onPurchaseComplete:r,analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}}})},C=t(92930),k=t(49384),x=t.n(k),D=t(96053),E=t(17089),R=t(36937),I=t(18509),T=t(24602),F=t(27023),P=t(86733),L=t(85144),U=t(85389),N=t(68165),O=t(1035),M=t(12360),H=t(76477),B=t(97153),z=t(15149),W=t(11011),G=function(e){var n=e.isOpen,t=e.onClose,r=(0,N.s)();return(0,l.useEffect)(function(){n&&(0,E.u4)(E.AZ.ORG_UPGRADE_MODAL_VIEWED,{surface:"workspace_multiplayer_header"})},[n]),(0,o.Y)(L.a,{fitContent:!0,centered:!0,maxWidth:400,isOpen:n,onRequestClose:t,noPadding:!0,children:(0,o.FD)(U.S,{css:Z.self,px:32,py:16,gap:16,children:[(0,o.Y)(U.S,{children:(0,o.FD)(U.S,{gap:2,children:[(0,o.Y)(_.EY,{variant:"subheadBig",children:"Join Teams for more collaborators"}),(0,o.Y)(_.EY,{multiline:!0,children:"Work across Apps with all your teammates"}),(0,o.FD)(U.S,{pt:8,row:!0,gap:8,children:[(0,o.Y)(_.Y9,{variant:"headerDefault",level:3,css:Z.priceText,children:r.Teams.costInCents.monthly?(0,o.Y)(_.Y9,{variant:"headerBig",level:3,css:Z.priceText,children:(0,D.b0)(r.Teams.costInCents.monthly)}):(0,o.Y)("div",{css:Z.priceLoader})}),(0,o.FD)(U.S,{children:[(0,o.Y)(_.EY,{variant:"small",color:"dimmest",children:"per user"}),(0,o.Y)(_.EY,{variant:"small",color:"dimmest",children:"per month"})]})]}),(0,o.FD)(U.S,{pt:12,gap:16,children:[(0,o.Y)(V,{title:"Everything in ".concat(S.en),subtitle:"Unlimited private Apps, advanced AI chat, and more",icon:(0,o.Y)(H.A,{})}),(0,o.Y)(V,{title:"Shared projects and resources",subtitle:"Collaborate with your team in real-time",icon:(0,o.Y)(W.A,{})}),(0,o.Y)(V,{title:"Granular permissions",subtitle:"Manage permssions for each team member",icon:(0,o.Y)(M.A,{})}),(0,o.Y)(V,{title:"Centralized billing",subtitle:"Consolidate all your payments in one place",icon:(0,o.Y)(B.A,{})}),(0,o.Y)(U.S,{children:(0,o.Y)(x(),{href:"/pricing",target:"_blank",onClick:function(){(0,E.u4)(E.AZ.ORG_MORE_FEATURES_CLICKED,{surface:"workspace_multiplayer_header"})},children:(0,o.FD)(U.S,{css:Z.viewMore,children:[(0,o.Y)(z.A,{}),(0,o.Y)(_.EY,{variant:"small",color:"dimmer",children:"View More Features"})]})})})]})]})}),(0,o.Y)(P.v,{iconRight:(0,o.Y)(O.A,{}),text:"Continue with ".concat(r.Teams.planName),href:r.Teams.href,onClick:function(){(0,E.u4)(E.AZ.ORG_CONTINUE_UPGRADE_CLICKED,{surface:"workspace_multiplayer_header"})},target:"_blank"})]})})},V=function(e){var n=e.title,t=e.subtitle,r=e.icon;return(0,o.FD)(U.S,{row:!0,gap:8,children:[(0,o.Y)(U.S,{css:Z.featureIcon,children:r}),(0,o.FD)(U.S,{grow:!0,pt:1,gap:8,children:[(0,o.Y)(_.EY,{variant:"text",height:"singleLine",children:n}),t?(0,o.Y)(_.EY,{variant:"small",color:"dimmer",height:"singleLine",children:t}):null]})]})},Z=(0,I.x)({priceLoader:[T.S.backgroundPulse(R.LU.backgroundHigher,"transparent"),F.wp.height("100%"),F.wp.width(50)],featureIcon:[F.wp.color.accentPrimaryStronger],priceText:[F.wp.fontWeight.normal],self:[F.wp.backgroundColor.backgroundOverlay,F.wp.borderRadius()],viewMore:[F.wp.color.foregroundDimmest,F.wp.rowWithGap(8),F.wp.align.center,F.wp.cursor.pointer,{fontWeight:200}]}),j=t(7749),q=t(1684),K=t(78626),$=t(63456),J=function(e){var n=e.modalState,t=e.setModalState,r=(0,C.X)(),i=(0,l.useCallback)(function(){"data"===r.type&&t({type:"open",onUpgradeSuccess:function(){}})},[r,t]);if("loading"===r.type)return(0,o.FD)(U.S,{grow:!0,justify:"center",row:!0,gap:4,align:"center",children:[(0,o.Y)($.A,{color:R.LU.foregroundDimmer}),(0,o.Y)(_.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]});if("data"!==r.type)return null;var a=r.collaboratorCount,s=r.collaboratorLimit,c=r.refetch,u=r.isStarterUser?(0,o.Y)(A,{isOpen:"open"===n.type,onClose:function(){return t({type:"closed"})},onPurchaseComplete:function(){"open"===n.type&&n.onUpgradeSuccess(),c()}}):(0,o.Y)(G,{isOpen:"open"===n.type,onClose:function(){return t({type:"closed"})}}),d=Math.max(0,s-a);return(0,o.FD)(U.S,{row:!0,gap:8,children:[(0,o.FD)(U.S,{css:Q.limitsContainer,align:"center",row:!0,gap:8,children:[(0,o.Y)(K.m_,{tooltip:"Your account is limited to ".concat(s," collaborators. Manage your collaborators on the Usage page."),children:(0,o.Y)(q.a,{colorway:"yellow",css:Q.pill,text:"".concat(a," / ").concat(s),onClick:i})}),(0,o.Y)(U.S,{css:Q.measureBarWrapper,onClick:i,children:(0,o.Y)(j.W,{css:Q.measureBar,total:s,current:a,tooltip:"".concat(d," account collaborators remaining"),backgroundColor:R.LU.yellowDimmer,color:R.LU.yellowDefault})})]}),u]})},Q=(0,I.x)({pill:[F.wp.cursor.pointer,F.wp.borderRadius(4),F.wp.pr(0)],measureBar:[F.wp.height(8),F.wp.width(60)],measureBarWrapper:[F.wp.cursor.default],limitsContainer:[F.wp.borderRadius(4),F.wp.backgroundColor.yellowDimmest,F.wp.pr(8)]}),X=t(52454),ee=t(54682),en=t(17337),et=t(52874),er=t(78008),ei=t(50301),eo=t(11769),ea=t(41358),el=t(96075),es=t(95898),ec=t(48604);function eu(e,n){return n.some(function(n){return n.id===e})}var ed={root:[F.wp.color.foregroundDefault,F.wp.colWithGap(12),F.wp.align.stretch,F.wp.flex.growAndShrink(1),F.wp.px(12)],header:[F.wp.flex.row,F.wp.justify.spaceBetween,F.wp.align.center],header_mobile:[F.wp.px(0)],titleContainer:[F.wp.flex.row,F.wp.rowWithGap(4),F.wp.align.center],limitsContainer:[F.wp.align.center,F.wp.rowWithGap(8)],loading:[F.wp.rowWithGap(4),F.wp.align.center,F.wp.flex.grow(1),F.wp.justify.center],measureBar:[F.wp.height(8),F.wp.width(60)],searchContainer:[F.wp.position.relative,F.wp.maxHeight(32)],userList:[F.wp.flex.column,F.wp.colWithGap(16),F.wp.scrollbar.thin,F.wp.position.relative,F.wp.overflowY("auto"),F.wp.flex.growAndShrink(1),{maxHeight:300,"::-webkit-scrollbar-thumb":[F.wp.backgroundColor.backgroundHighest,F.wp.borderRadius(4)],scrollbarColor:"".concat(R.LU.backgroundDefault," ").concat(R.LU.backgroundHighest)}],userGroup:{root:[F.wp.colWithGap(8)],titleContainer:[F.wp.rowWithGap(4),F.wp.align.center],title:[F.wp.fontWeight.medium]},emptyContainer:[F.wp.position.relative,F.wp.colWithGap(16),F.wp.py(16),F.wp.justify.start,{maxHeight:220}]},ep=function(e){var n=e.title,t=e.count,r=e.color,i=e.tooltip;return(0,o.FD)(U.S,{css:ed.userGroup.titleContainer,children:[(0,o.Y)(el.A,{color:r,size:6}),(0,o.Y)(_.EY,{variant:"small",css:ed.userGroup.title,multiline:!1,children:n}),(0,o.Y)(_.EY,{multiline:!1,variant:"small",color:"dimmest",css:ed.userGroup.title,children:t}),i?(0,o.Y)(K.m_,{tooltip:i,children:(0,o.Y)(ec.A,{})}):null]})};let ef=function(e){var n,t,s,p=e.replId,f=e.handleUpgradeTriggered,m=(0,a.useRouter)(),g=(0,ee.Po)(m),S=(0,C.X)(),Y=(0,X.A)({isMobileApp:g,isTeam:!1,handleUpgradeTriggered:f,replId:p}),A=Y.addOrInviteReplMultiplayer,k=Y.loadingAddMutation,x=(0,ei.Q4)(),D=(0,r._)((0,l.useState)({type:"closed"}),2),E=D[0],I=D[1],T=(0,r._)((0,l.useState)(!1),2),F=T[0],P=T[1],L=(n={variables:{replId:p},pollInterval:8e3},t=(0,d._)({},v,n),h.I(y,t)),N=L.data,O=L.loading,M=(null==N?void 0:N.repl.__typename)==="Repl"?N.repl:null,H=null==N?void 0:N.currentUser,B=(null!=(s=null==M?void 0:M.collaborators)?s:[]).reduce(function(e,n){var t=n.user;return(0,i._)(e).concat([t.username])},[]),z=(null==M?void 0:M.authorizations.editPermissions.isAuthorized)||!1,W=!!(M&&!B.length&&!M.multiplayerInvites.length),G=null==M?void 0:M.collaborators.map(function(e){return e.user}).filter(function(e){return e.id!==(null==H?void 0:H.id)}),V=null==G?void 0:G.filter(function(e){return e&&eu(e.id,x)}),Z=null==G?void 0:G.filter(function(e){return e&&!eu(e.id,x)}),q=G?G.length:null,K=(0,o.FD)(o.FK,{children:[null===q||(null==H?void 0:H.isSubscribed)?null:(0,o.FD)(o.FK,{children:[(0,o.FD)(_.EY,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[q," / ",w.vF]}),(0,o.Y)(j.W,{css:ed.measureBar,total:w.vF,current:q,tooltip:"".concat(w.vF-q," free editors remaining")})]}),O||(null==H?void 0:H.isSubscribed)||g?null:(0,o.Y)(er.A,{size:"small",context:"workspace_multiplayer_header",onClickCallback:function(){f&&f(!0)},onCancel:function(){f&&f(!1)}})]});return(0,o.FD)(ea.ui,{background:"default",css:ed.root,children:[(0,o.FD)(o.FK,{children:[(0,o.FD)(U.S,{css:[ed.header,g&&ed.header_mobile],children:[(0,o.Y)(U.S,{css:ed.titleContainer,children:(0,o.Y)(_.EY,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,o.FD)(U.S,{css:ed.limitsContainer,children:[O?(0,o.FD)(U.S,{css:ed.loading,children:[(0,o.Y)($.A,{color:R.LU.foregroundDimmer}),(0,o.Y)(_.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,"data"===S.type&&S.shouldEnforceMultiplayerLimit?(0,o.Y)(J,{setModalState:I,modalState:E}):K]})]}),z&&B&&M?(0,o.Y)(U.S,{css:ed.searchContainer,children:(0,o.Y)(et.A,{existingUsernames:B,onSubmit:function(e){if(!O||(null==H?void 0:H.isSubscribed)){if(!k){var n=new Set(("data"===S.type?(0,i._)(S.collaboratorsByRepl.values()).map(function(e){return e.users}).flat():[]).map(function(e){return e.username})),t="data"===S.type&&S.shouldEnforceMultiplayerLimit&&S.collaboratorCount>=S.collaboratorLimit&&!n.has(e),r={method:c()(e)?u.LIG.Email:u.LIG.Username,value:e},o=function(){return A({variables:{input:{replId:p,target:r,level:u.Hy.Rw}}})};if(t)return void I({type:"open",onUpgradeSuccess:o});o()}}}})}):null,W?(0,o.Y)(U.S,{css:ed.emptyContainer,children:(0,o.Y)(U.S,{children:(0,o.Y)(_.EY,{color:"dimmest",multiline:!1,children:"No one else is here"})})}):(0,o.FD)(ea.ui,{css:ed.userList,children:[(null==V?void 0:V.length)?(0,o.FD)(U.S,{css:ed.userGroup.root,children:[(0,o.Y)(ep,{title:"Online",count:V.length||0,color:R.LU.greenStrongest}),V.map(function(e){return e?(0,o.Y)(en.A,{isPendingInvitation:!1,replId:p,canEditMultiplayers:z,user:e},e.id):null})]}):null,(null==Z?void 0:Z.length)?(0,o.FD)(U.S,{css:ed.userGroup.root,children:[(0,o.Y)(ep,{title:"Offline",count:Z.length||0,color:R.LU.outlineStrongest}),null==Z?void 0:Z.map(function(e){return e?(0,o.Y)(en.A,{canEditMultiplayers:z,isPendingInvitation:!1,user:e,replId:p},e.id):null})]}):null,(null==M?void 0:M.multiplayerInvites.length)?(0,o.FD)(U.S,{css:ed.userGroup.root,children:[(0,o.Y)(ep,{title:"Pending Invitations",count:(null==M?void 0:M.multiplayerInvites.length)||0,color:R.LU.outlineStrongest}),M.multiplayerInvites.map(function(e){return(0,o.Y)(en.A,{canEditMultiplayers:z,replId:p,isPendingInvitation:!0,email:e.email},e.email)})]}):null]})]}),(null==H?void 0:H.isSubscribed)?(0,o.FD)(o.FK,{children:[(0,o.Y)(U.S,{children:(0,o.Y)(eo.$n,{text:"Refer a friend and earn more credits",iconLeft:(0,o.Y)(es.A,{}),onClick:function(){return P(!0)}})}),(0,o.Y)(b.Zu,{isOpen:F,onClose:function(){return P(!1)},trackingContext:"workspace-invite-dialog"})]}):null]})}},90890:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(29935),i=t(82643),o=t(41467),a=t(38674),l=/\(copy\)( \d+)?$/,s=/\d+$/;function c(e,n){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e,n){var t,r,c,u,d,p;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=(0,o._6)(e),[4,n.readDir(0===t.length?a.Dl:t)];case 1:if((r=i.sent()).error)throw r.error;return c=new Set(r.children.map(function(e){return e.filename})),u=function(e,n){var t=(0,o.an)(e),r=(0,o.J)(e);if(!r&&e.startsWith(".")){var i=e.lastIndexOf(".");r=i>0?e.slice(0,i):e}for(var a=l.test(r)?e:"".concat(r," (copy)").concat(t.length>0?".".concat(t):""),c=1;c<=n.size&&n.has(a);c++){var u=(0,o.J)(a),d=u.split(" ");s.test(u)&&d.pop(),a="".concat(d.join(" ")," ").concat(c),t.length>0&&(a+=".".concat(t))}return a}((0,o.WP)(e),c),d=t?"".concat(t,"/").concat(u):u,[4,n.copyFile(e,d)];case 2:if((p=i.sent()).error)throw p.error;return[2,d]}})})).apply(this,arguments)}},90930:(e,n,t)=>{"use strict";t.d(n,{P:()=>C});var r=t(29935),i=t(82643),o=t(81073),a=t(21462),l=t(80478),s=t(64912),c=t(77359),u=t(21762),d=t(70871),p=t(59255),f=t(16771),h=t(60690),m=t(61191),g=t(36937),v=t(87978),y=t(41526),w=t(77495),b=t(4056),S=t(17289),Y=t(47820),_=t(66398),A=t(36540);function C(e){var n,t,C,k,x,D,E,R,I,T,F,P,L=e.xterm,U=e.openAssistantWithMessage,N=e.openShellSearch,O=e.openSearchAndReplace,M=e.openGeneratePrompt,H=e.isWorkflowsTerminal,B=(t=(n={xterm:L,openAssistantWithMessage:U,openGeneratePrompt:M}).xterm,C=n.openAssistantWithMessage,k=n.openGeneratePrompt,x=(0,u._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),D=(0,h.Jn)(f.Ws.id),(0,a.useMemo)(function(){if(!x){var e=[];if(k&&e.push({match:p.G2,data:{type:"action",label:"Generate command",icon:(0,o.Y)(S.A,{color:g.LU.tealStronger}),keyboardShortcut:D,run:function(){k()}}}),C&&e.push({match:p.G2,data:{type:"action",label:"Ask ".concat(s.BP),icon:(0,o.Y)(v.A,{color:g.LU.tealStronger}),run:function(){var e,n=null!=(e=null==t?void 0:t._term.getSelection())?e:"";C((0,c.yt)(n))}}}),0!==e.length)return{data:{type:"context",label:"AI",icon:(0,o.Y)(b.A,{})},commands:function(){return e}}}},[x,C,D,k,null==t?void 0:t._term])),z=(R=(E={xterm:L,openShellSearch:N,openSearchAndReplace:O,isWorkflowsTerminal:void 0!==H&&H}).xterm,I=E.openShellSearch,T=E.openSearchAndReplace,F=E.isWorkflowsTerminal,(0,a.useMemo)(function(){var e=[];if(I){var n=F?(0,o.Y)(A.A,{}):(0,o.Y)(_.A,{});e.push({match:p.G2,data:{type:"action",label:F?"Find in Console":"Find in Shell",icon:n,run:function(){var e;I(null!=(e=null==R?void 0:R._term.getSelection())?e:"")}}})}if(T&&e.push({match:p.G2,data:{type:"action",label:"Find in Repl",icon:(0,o.Y)(Y.A,{}),run:function(){var e;T(null!=(e=null==R?void 0:R._term.getSelection())?e:"")}}}),0!==e.length)return{data:{type:"context",label:"Search",icon:(0,o.Y)(Y.A,{})},commands:function(){return e}}},[R,I,T,F])),W=(P=function(){return window.navigator.userAgent.includes("Linux")},(0,a.useMemo)(function(){return{data:{type:"context",label:"Clipboard",icon:(0,o.Y)(y.A,{})},commands:function(){return[{match:p.G2,data:{type:"action",label:"Copy",icon:(0,o.Y)(w.A,{}),keyboardShortcut:(0,m.FM)({cmdOrCtrl:!0,shift:P(),key:"c"}),run:function(){var e,n=null!=(e=null==L?void 0:L._term.getSelection())?e:"";(0,d.default)(n)}}},{match:p.G2,data:{type:"action",label:"Paste",icon:(0,o.Y)(y.A,{}),keyboardShortcut:(0,m.FM)({cmdOrCtrl:!0,shift:P(),key:"v"}),run:function(){return(0,r._)(function(){var e,n;return(0,i.YH)(this,function(t){switch(t.label){case 0:e="",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return e=t.sent(),[3,4];case 3:return n=t.sent(),l.vF.error("Shell context menu paste failed",{message:n.message}),[2];case 4:return null==L||L._term.paste(e),[2]}})})()}}}]}}},[L]));return(0,a.useMemo)(function(){var e=[];return B&&e.push(B),z&&e.push(z),W&&e.push(W),{data:{type:"context",label:"Search actions",icon:(0,o.Y)(Y.A,{})},commands:function(){return e}}},[B,z,W])}},91130:(e,n,t)=>{"use strict";t.d(n,{$:()=>i,L:()=>o});var r=t(17089);function i(){(0,r.u4)(r.AZ.MODAL_VIEWED,{modalName:"projects_help_dialog"})}function o(e){(0,r.u4)(r.AZ.GIT_PROJECT_FEATURE_USED,e)}},91220:(e,n,t)=>{"use strict";t.d(n,{H:()=>i,J:()=>r});var r=function(e){return e.FS_CHANGE="FS_CHANGE",e.FORCED_REFRESH="FORCED_REFRESH",e.NEW_PROFILE="NEW_PROFILE",e.CHANGED_PROFILE="CHANGED_PROFILE",e}({}),i=function(e){return e.REPLIT_DEFAULT="REPLIT_DEFAULT",e.GITHUB="GITHUB",e}({})},91351:e=>{e.exports={progressCircle:"LoadingSpinner_progressCircle__6dx5v",innerCircle:"LoadingSpinner_innerCircle__pyByd"}},91532:(e,n,t)=>{"use strict";t.d(n,{A:()=>h});var r=t(81073),i=t(49384),o=t.n(i),a=t(1040),l=t(36937),s=t(18509),c=t(27023),u=t(11938),d=t(4616),p=t(85389),f=(0,s.x)({url:[c.wp.color.accentPositiveStronger,c.wp.fontSize("small"),c.wp.focusRing,{"&:hover":[c.wp.cursor.pointer,c.wp.color.accentPositiveStrongest]}],qrCodeWrapper:[c.wp.borderRadius(4),c.wp.display.inlineBlock,c.wp.border({width:1,color:l.LU.outlineDefault}),{backgroundColor:"white"}]});function h(e){var n=e.url;return(0,r.FD)(p.S,{gap:4,children:[(0,r.Y)(d.EY,{children:"Dev URL:"}),(0,r.Y)(p.S,{row:!0,gap:4,children:(0,r.FD)(p.S,{row:!0,gap:4,align:"center",children:[(0,r.Y)(o(),{href:n,css:f.url,target:"_blank",children:n}),(0,r.Y)(u.r,{textToCopy:n,tooltipText:"Copy link",tooltipDelay:"none"})]})}),(0,r.Y)(p.S,{align:"start",children:(0,r.Y)(p.S,{css:f.qrCodeWrapper,p:8,children:(0,r.Y)(a.Ay,{size:128,value:n})})}),(0,r.Y)(d.EY,{color:"dimmer",variant:"small",children:"Dev URLs are temporary and will sleep after you leave the workspace."})]})}},91759:(e,n,t)=>{"use strict";t.d(n,{Q:()=>f});var r=t(17844),i=t(93629),o=t(66890),a=t(12584),l=t(41114),s=t(86997);function c(){var e=(0,a._)(["\n  query CheckForProjectByRepl($id: String!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n          type\n          name\n          authorizations {\n            createPublicRepl: createRepl(private: false) {\n              isAuthorized\n              message\n            }\n            createPrivateRepl: createRepl(private: true) {\n              isAuthorized\n              message\n            }\n            createProject {\n              isAuthorized\n              message\n            }\n          }\n        }\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=t(55100);function f(){var e,n,t,a,l,c,f=(l={variables:{id:(0,p.A)()}},c=(0,r._)({},u,l),s.I(d,c)),h=(null==(n=f.data)||null==(e=n.getRepl)?void 0:e.__typename)==="Repl"?f.data.getRepl.org:void 0,m=!!h&&h.type===o.NT1.Team&&(h.authorizations.createPrivateRepl.isAuthorized||h.authorizations.createPublicRepl.isAuthorized)&&h.authorizations.createProject.isAuthorized;return(0,i._)((0,r._)({},f),{hasProject:(null==(t=f.data)?void 0:t.getRepl.__typename)==="Repl"&&!!(null==(a=f.data.getRepl.project)?void 0:a.id),isEligibleForProject:m})}},91901:(e,n,t)=>{"use strict";t.d(n,{T:()=>function e(n){var t;switch("HEAD"===(t=n)||"refs/HEAD"===t||t.startsWith(a)?o.QN.HEAD:t.startsWith(l)?o.QN.BRANCH:t.startsWith(s)?d.test(t)?o.QN.REMOTE_HEAD:o.QN.REMOTE_BRANCH:t.startsWith(u)||t.startsWith(c)?o.QN.TAG:o.QN.BRANCH){case o.QN.HEAD:if(n.startsWith(a)){if(n.endsWith("(detached)"))return{type:o.QN.HEAD,name:"HEAD",detached:!0,ref:null};return{type:o.QN.HEAD,name:"HEAD",detached:!1,ref:e(n.slice(a.length))}}return{type:o.QN.HEAD,name:"HEAD",detached:!1,ref:null};case o.QN.REMOTE_HEAD:var p=n.slice(s.length),f=(0,r._)(p.split("/"),1)[0];return{type:o.QN.REMOTE_HEAD,name:"HEAD",remote:f};case o.QN.BRANCH:return{type:o.QN.BRANCH,name:n.startsWith(l)?n.slice(l.length):n};case o.QN.REMOTE_BRANCH:var h=n.slice(s.length),m=(0,i._)(h.split("/")),g=m[0],v=m.slice(1).join("/");return{type:o.QN.REMOTE_BRANCH,name:h,remote:g,branch:v};case o.QN.TAG:return n.startsWith(c)&&(n=n.slice(c.length)),n.startsWith(u)&&(n=n.slice(u.length)),{type:o.QN.TAG,name:n}}}});var r=t(12694),i=t(56902),o=t(52531),a="HEAD -> ",l="refs/heads/",s="refs/remotes/",c="tag: ",u="refs/tags/",d=/^refs\/remotes\/([^/]+)\/HEAD$/},91993:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M18 2.5H6A1.5 1.5 0 0 0 4.5 4v16A1.5 1.5 0 0 0 6 21.5h12a1.5 1.5 0 0 0 1.5-1.5V4A1.5 1.5 0 0 0 18 2.5ZM6 1a3 3 0 0 0-3 3v16a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3H6Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M16 17.25c0 .414-.316.75-.706.75H8.706c-.39 0-.706-.336-.706-.75s.316-.75.706-.75h6.588c.39 0 .706.336.706.75ZM16 9.5c0 .414-.316.75-.706.75H8.706c-.39 0-.706-.336-.706-.75s.316-.75.706-.75h6.588c.39 0 .706.336.706.75Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M12 13.5c-.414 0-.75-.316-.75-.706V6.206c0-.39.336-.706.75-.706s.75.316.75.706v6.588c0 .39-.336.706-.75.706Z",clipRule:"evenodd"})]}))}},92104:e=>{e.exports={root:"BudgetExceededMessage_root__489h_",text:"BudgetExceededMessage_text__Xvg7H",buttonContainer:"BudgetExceededMessage_buttonContainer__F4IWk",budgetButton:"BudgetExceededMessage_budgetButton__ZL0XK"}},92301:(e,n,t)=>{"use strict";t.d(n,{SS:()=>_,UI:()=>b,dt:()=>Y});var r=t(29935),i=t(82643),o=t(81073),a=t(82315),l=t(41467),s=t(58219),c=t(36937),u=t(18509),d=t(27023),p=t(43813),f=t(4616),h=t(85389),m=t(27301),g=t(19202),v=(0,u.x)({root:[{userSelect:"none"}],header:[{fontSize:c.LU.fontSizeSmall,opacity:.6},d.wp.color.foregroundDimmest,d.wp.truncate],fileName:[d.wp.truncate,d.wp.flex.row]});function y(e){var n=e.height,t=e.active,r=e.match,i=r.directory,a=r.filename,l=e.description;return(0,o.FD)(h.S,{css:v.root,grow:!0,shrink:!0,px:8,row:!0,gap:8,align:"center",style:{height:n},children:[(0,o.Y)(p.A,{path:a.text,size:16}),(0,o.FD)(h.S,{gap:0,children:[i?(0,o.Y)(h.S,{css:v.header,children:(0,o.Y)(g.e,{text:i.text+"/",highlight:i.ranges,dimmed:!t})}):null,(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[(0,o.Y)(h.S,{css:v.fileName,children:(0,o.Y)(g.e,{text:a.text,highlight:a.ranges,dimmed:!t})}),(0,o.Y)(f.EY,{variant:"small",color:"dimmest",children:l})]})]})]})}var w={match:a.fq,forward:!1,tiebreakers:[function(e,n,t){var r=t(e.item),i=t(n.item),o=r.lastIndexOf("/"),a=i.lastIndexOf("/"),l=Array.from(e.positions).filter(function(e){return e>o}).length;return Array.from(n.positions).filter(function(e){return e>a}).length-l},function(e,n,t){return t(e.item).trim().length-t(n.item).trim().length}]};function b(e,n){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e,n){var t,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,new a.$S(n,w).find(e)];case 1:return t=i.sent().map(function(e){return{path:e.item,score:Math.floor(e.score*m.B.files),ranges:(0,s.WJ)(e.positions)}}),[2,(r=(0,s.hS)({queryLength:e.length}))?t.filter(function(e){return e.score>=r}):t]}})})).apply(this,arguments)}function Y(e){var n=e.ranges,t=e.path,r=(0,l.WP)(t),i=(0,l._6)(t);if(!i)return{filename:{text:r,ranges:n.length?n:void 0}};var o=i.length,a=o+1,s=[],c=[],u=!0,d=!1,p=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;if(m.from<o){s.push({from:m.from,to:Math.min(m.to,o)});var g=m.to-a;if(g<=0)continue;c.push({from:0,to:g});continue}m.from<a||c.push({from:m.from-a,to:m.to-a})}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:i,ranges:s.length?s:void 0}}}function _(e){var n=e.path,t=e.ranges,r=e.description,i=Y({path:n,ranges:null!=t?t:[]}),a=i.directory?44:32;return{height:a,content:(0,o.Y)(y,{match:i,height:a,description:r})}}},92337:(e,n,t)=>{"use strict";t.d(n,{R:()=>u,b:()=>d});var r=t(84344),i=t(6268),o=t(70636),a=t(16055),l=t(30860),s=t(18018),c=t(73712),u=function(e){var n=e.state.field(a.RJ,!1),t=e.state.facet(o.q);if(!(null==n?void 0:n.presented)||Date.now()-n.timestamp<150)return!1;var u=e.state.selection.main.head,d=e.state.doc.lineAt(u);if(u<=d.from+d.length-d.text.trimStart().length){var p=n.changes.closestRange(u);if(p.value instanceof s.kp){var f=p.value.unfulfilled.toString(),h=(0,c.t)(f,e.state.tabSize);if(h>0&&h>=e.state.tabSize)return!1}}var m=n.changes.asChangeSpec(),g=e.state.changes(m),v=n.changes.extendSelection(e.state.selection);return(0,r.N)(e),e.dispatch({changes:g,selection:v,scrollIntoView:!0,effects:a.xq.of(n.dismiss(a.UW.ACCEPTED_BY_USER)),annotations:[l.A.of(!0),i._B.of("full")]}),t.onSuggestionAccepted(e,n),!0},d=function(e){var n=e.state.field(a.RJ,!1),t=e.state.facet(o.q);return!!(null==n?void 0:n.presented)&&(e.dispatch({effects:a.xq.of(n.dismiss(a.UW.DISMISSED_BY_USER))}),t.onSuggestionExplicitlyDismissed(e,n),!0)}},92425:(e,n,t)=>{"use strict";t.d(n,{CI:()=>x,RC:()=>D,Ww:()=>R,jn:()=>I,n1:()=>d,s:()=>k,tH:()=>E});var r,i=t(62019),o=t(37743),a=t(83846),l=t(1833),s=t(45773),c=t(36937),u=c.LU.space2,d="cm-diff-gutter",p="".concat(d,"-element"),f="".concat(p,"-insertion"),h="".concat(p,"-modified"),m="".concat(p,"-deleted"),g="".concat(p,"-file-added"),v="".concat(p,"-empty"),y=c.LU.greenDefault,w=c.LU.greenStronger,b=c.LU.blueDefault,S=c.LU.blueStronger,Y=c.LU.redDefault,_=c.LU.redStronger,A=c.LU.greenDimmer,C=c.LU.greenDefault,k=s.Lz.theme((r={},(0,a._)(r,".".concat(d,":first-of-type, .").concat(p),{width:u}),(0,a._)(r,".".concat(f),{backgroundColor:y,"&.cm-activeLineGutter":{backgroundColor:w}}),(0,a._)(r,".".concat(h),{backgroundColor:b,"&.cm-activeLineGutter":{backgroundColor:S}}),(0,a._)(r,".".concat(m),{backgroundColor:Y,"&.cm-activeLineGutter":{backgroundColor:_}}),(0,a._)(r,".".concat(g),{backgroundColor:A,"&.cm-activeLineGutter":{backgroundColor:C}}),(0,a._)(r,".".concat(v),{opacity:0}),r)),x=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(f),e}return(0,l._)(n,e),n}(s.wJ)),D=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(m),e}return(0,l._)(n,e),n}(s.wJ)),E=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(h),e}return(0,l._)(n,e),n}(s.wJ)),R=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(g),e}return(0,l._)(n,e),n}(s.wJ)),I=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(v),e}return(0,l._)(n,e),n}(s.wJ))},92702:(e,n,t)=>{"use strict";t.d(n,{N0:()=>R,No:()=>k,Pt:()=>I,Tb:()=>E});var r=t(12694),i=t(86105),o=t(67313),a=t(21462),l=t(23099),s=t.n(l),c=t(76957),u=t(69737),d=t(70417),p=t(21762),f=t(55100),h=t(54682),m=t(79315),g=t(91759),v=t(40144),y=t(31875),w=t(12556),b=t(53829),S=t(79166),Y=t(56262),_=t(63492),A=(0,c.eU)([]),C=(0,u.mg)(A,function(e){return new Set(e.map(function(e){return e.type}))},s());function k(){return(0,_.h)(C)}var x=["shell","git","diff","envEditor","deployments","database","neon","ghostwriterChat","preferences","docs","multiplayer","objectStorage","adminPanel","ssh","webview","problems","dependencies","project","workflows","integrations","runnerOutput","networking","replitAuth","securityScan"],D=["agentChat","ghostwriterChat","deployments"];function E(){return(0,_.h)(A)}function R(){return(0,_.Ou)(A)}function I(){var e,n,t,i,l,s,c=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).supportsAgent,u=(0,_.ob)(A),Y=(n=(0,f.A)(),(i=(null==(t=(0,d.OR)({variables:{replId:n}}).data)||null==(e=t.repl)?void 0:e.__typename)==="Repl"?null==t?void 0:t.repl:null)?{repl:i,currentUser:(null==t?void 0:t.currentUser)||null}:{repl:null,currentUser:null}),C=Y.repl,k=Y.currentUser,E=(0,o.useRouter)(),R=(0,h.m5)(),I=(0,p._P)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),T=!!(null==C||null==(s=C.authorizations)||null==(l=s.viewDeploymentConfig)?void 0:l.isAuthorized),F=(0,p._P)({controlName:"flag-security-scanning"}),P=(0,g.Q)().hasProject,L=(0,w.oR)(),U=(0,b.A)().isTutorial,N=(0,m.J)().configs.some(function(e){return"nix"!==e.id}),O=(0,y.uE)(),M=(null==k?void 0:k.isAdmin)||!!E.query.debug,H=(0,S.Vv)(),B=(0,v.x)(),z=B.isDotReplitAuthButtonEnabled,W=B.isDotReplitAuthPageEnabled,G=B.isDotReplitAuthLoading,V=B.hasDotReplit&&!G&&(z||W);(0,a.useEffect)(function(){var e=R&&(null==C?void 0:C.authorizations.editPermissions.isAuthorized)?[{type:"multiplayer"}]:[];if(C&&k){var n=[[{type:"shell"},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},!0],[{type:"vnc"},!0],[{type:"runnerOutput"},!0],[{type:"git"},!0],[{type:"dependencies"},!0],[{type:"envEditor"},!0],[{type:"tutorial"},U],[{type:"database"},!0],[{type:"neon"},I],[{type:"replAuth"},N&&V],[{type:"replitAuth"},!0],[{type:"preferences"},!0],[{type:"adminPanel"},M],[{type:"deployments"},T],[{type:"ssh"},!0],[{type:"ghostwriterChat"},!0],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"extensionDevtools"},L],[{type:"problems"},!0],[{type:"networking"},!0],[{type:"objectStorage"},!0],[{type:"workflows"},!0],[{type:"project"},P],[{type:"integrations"},!0],[{type:"agentChat"},!!(c&&!R)],[{type:"securityScan"},F]],t=!0,i=!1,o=void 0;try{for(var a,l=O[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value;n.push([{type:"extension",data:{extensionId:s.extension.extensionId,installationId:s.extension.installationId,name:s.name||s.extension.manifest.name,icon:s.icon||s.extension.manifest.icon,baseUrl:s.extension.baseUrl,path:s.handler}},!0])}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}var d=!0,p=!1,f=void 0;try{for(var h,m=n[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=(0,r._)(h.value,2),v=g[0];g[1]&&(!R||x.includes(v.type))&&e.push(v)}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}u(e.map(function(e){return{title:H.getTitle(e),pane:e}}).sort(function(e,n){return D.includes(e.pane.type)?-1:D.includes(n.pane.type)?1:e.title.localeCompare(n.title)}).map(function(e){return e.pane}))}},[u,R,C,k,N,I,U,M,T,L,O,H,P,c,V,F])}(0,c.eU)(function(e){var n=Array.from(e(Y.Jp).values()).flat(),t=e(Y.tx),r=(0,i._)(n).concat((0,i._)(t)).sort(function(e,n){return n.lastActiveAt-e.lastActiveAt}),o=[],a=!0,l=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=function(){var e=c.value;return 8===o.length?"break":(0,S.Dx)(e.pane.type)||"commands"===e.pane.type?"continue":void(-1===o.findIndex(function(n){return n.type===e.pane.type})&&o.push(e.pane))}();if("break"===d)break}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return o})},92930:(e,n,t)=>{"use strict";t.d(n,{X:()=>p});var r=t(17844),i=t(93629),o=t(86105),a=t(12584),l=t(41114),s=t(86997);function c(){var e=(0,a._)(['\n  query PersonalCollaboratorGate {\n    currentUser {\n      id\n      isSubscribed\n      username\n      shouldEnforceMultiplayerLimit: gate(feature: "flag-empty-hangar")\n      personalCollaborators {\n        ... on PersonalCollaboratorsInfo {\n          count\n          limit\n          collaborators {\n            repl {\n              id\n              slug\n              url\n              title\n              nextPagePathname\n              iconUrl\n            }\n            user {\n              id\n              username\n            }\n          }\n        }\n      }\n    }\n  }\n']);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=function(){var e,n,t,a=(e={ssr:!1,fetchPolicy:"network-only"},n=(0,r._)({},u,e),s.I(d,n)),l=a.data,c=a.loading,p=a.refetch;if(c)return{type:"loading"};if(l&&(null==l||null==(t=l.currentUser)?void 0:t.personalCollaborators.__typename)==="PersonalCollaboratorsInfo"){var f=l.currentUser,h=f.personalCollaborators,m=h.count,g=h.limit,v=h.collaborators,y=f.isSubscribed,w=f.shouldEnforceMultiplayerLimit,b=f.username;return{type:"data",refetch:p,collaboratorCount:m,collaboratorLimit:g,collaboratorsByRepl:v.reduce(function(e,n){var t,a=n.repl,l=n.user,s=null!=(t=e.get(a.id))?t:{id:a.id,slug:a.slug,url:a.url,title:a.title,nextPagePathname:a.nextPagePathname,iconUrl:a.iconUrl,__typename:a.__typename,users:[]};return e.set(a.id,(0,i._)((0,r._)({},s),{users:(0,o._)(s.users).concat([{id:l.id,username:l.username}])})),e},new Map),isStarterUser:!y,username:b,shouldEnforceMultiplayerLimit:w}}return{type:"error"}}},92935:(e,n,t)=>{"use strict";t.d(n,{Js:()=>c,iw:()=>u,QX:()=>h,Qm:()=>f,XD:()=>m,ly:()=>d,Y9:()=>p});var r=t(81073),i=t(42793),o=t(27023),a=t(85389),l=t(53420),s=(0,i.AH)({filter:"drop-shadow(0px 2px 6px rgba(0, 0, 0, 0.15))"});function c(e){var n=e.height,t=void 0===n?44:n;return(0,r.FD)("svg",{width:56*t/44,height:t,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M7 42.2858L8 32.6684H14L15 42.2858H24L26 27.1837H32L34 42.2858H43L45 21.699H52L55 3.71436H56V43.0001H1V42.2858H7Z",fill:"url(#paint0_linear_3629_241)"}),(0,r.Y)("path",{d:"M55 3.71436L52 21.699H45L43 42.2858H34L32 27.1837H26L24 42.2858H15L14 32.6684H8L7 42.2858H1",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("defs",{children:(0,r.FD)("linearGradient",{id:"paint0_linear_3629_241",x1:"28.5",y1:"3.71436",x2:"28.5",y2:"43.0001",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{stopColor:"#0079F2"}),(0,r.Y)("stop",{offset:"0.395833",stopColor:"#0079F2"}),(0,r.Y)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function u(){return(0,r.FD)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.FD)("g",{clipPath:"url(#clip0_3629_246)",children:[(0,r.Y)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",fill:"#2B3245"}),(0,r.Y)("g",{filter:"url(#filter0_dii_3629_246)",children:(0,r.Y)("path",{d:"M3 15C3 13.3431 4.34315 12 6 12H20C20.5523 12 21 12.4477 21 13V25C21 25.5523 20.5523 26 20 26H6C4.34315 26 3 24.6569 3 23V15Z",fill:"#0079F2"})}),(0,r.Y)("g",{filter:"url(#filter1_dii_3629_246)",children:(0,r.Y)("rect",{x:"23",y:"12",width:"12",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.Y)("g",{filter:"url(#filter2_dii_3629_246)",children:(0,r.Y)("rect",{x:"37",y:"12",width:"8",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.Y)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",stroke:"#3C445C"})]}),(0,r.FD)("defs",{children:[(0,r.FD)("filter",{id:"filter0_dii_3629_246",x:"-3",y:"6",width:"30",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{}),(0,r.Y)("feGaussianBlur",{stdDeviation:"3"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"-2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.FD)("filter",{id:"filter1_dii_3629_246",x:"17",y:"6",width:"24",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{}),(0,r.Y)("feGaussianBlur",{stdDeviation:"3"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"-2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.FD)("filter",{id:"filter2_dii_3629_246",x:"31",y:"6",width:"20",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{}),(0,r.Y)("feGaussianBlur",{stdDeviation:"3"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"-2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.Y)("clipPath",{id:"clip0_3629_246",children:(0,r.Y)("rect",{width:"56",height:"44",fill:"white"})})]})]})}function d(e){var n=e.height,t=void 0===n?44:n;return(0,r.FD)("svg",{width:56*t/44,height:t,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M1 42H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("g",{filter:"url(#filter0_d_3629_304)",children:(0,r.Y)("path",{d:"M21 11L35 25M38 18C38 23.5228 33.5228 28 28 28C22.4772 28 18 23.5228 18 18C18 12.4772 22.4772 8 28 8C33.5228 8 38 12.4772 38 18Z",stroke:"#0053A6",strokeWidth:"2"})}),(0,r.Y)("defs",{children:(0,r.FD)("filter",{id:"filter0_d_3629_304",x:"9",y:"3",width:"38",height:"38",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"4"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"4"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0.32549 0 0 0 0 0.65098 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_304"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_304",result:"shape"})]})})]})}function p(){return(0,r.FD)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("circle",{cx:"28",cy:"22",r:"13",fill:"#0053A6"}),(0,r.Y)("path",{d:"M28 9C30.2851 9 32.5297 9.6023 34.5079 10.7462L28 22L28 9Z",fill:"#0079F2"}),(0,r.Y)("circle",{cx:"28",cy:"22",r:"10.5",stroke:"#57ABFF",strokeDasharray:"1 4"}),(0,r.Y)("g",{filter:"url(#filter0_d_3629_309)",children:(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28 36.3334C35.9161 36.3334 42.3333 29.9162 42.3333 22.0001C42.3333 15.1129 37.4759 9.36028 31 7.98119V6C31 5 30 4 29 4H27C26 4 25 5 25 6V7.9812C18.5241 9.36029 13.6667 15.1129 13.6667 22.0001C13.6667 29.9162 20.0839 36.3334 28 36.3334ZM15.6667 22.0001C15.6667 15.1886 21.1885 9.66675 28 9.66675C34.8115 9.66675 40.3333 15.1886 40.3333 22.0001C40.3333 28.8116 34.8115 34.3334 28 34.3334C21.1885 34.3334 15.6667 28.8116 15.6667 22.0001Z",fill:"#0079F2"})}),(0,r.Y)("g",{filter:"url(#filter1_d_3629_309)",children:(0,r.Y)("path",{d:"M28 12V22L33 13.3",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.FD)("defs",{children:[(0,r.FD)("filter",{id:"filter0_d_3629_309",x:"11.6667",y:"3",width:"32.6667",height:"36.3335",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]}),(0,r.FD)("filter",{id:"filter1_d_3629_309",x:"25.25",y:"10.25",width:"10.5001",height:"15.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]})]})]})}function f(e){var n=e.height,t=void 0===n?44:n;return(0,r.FD)("svg",{width:56*t/44,height:t,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M0 37V6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H56V37H0Z",fill:"url(#paint0_linear_3629_271)"}),(0,r.Y)("path",{d:"M1 6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("defs",{children:(0,r.FD)("linearGradient",{id:"paint0_linear_3629_271",x1:"28",y1:"6",x2:"28",y2:"37",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{stopColor:"#0079F2",stopOpacity:"0.7"}),(0,r.Y)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function h(){return(0,r.FD)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M16 8C16 6.89543 16.8954 6 18 6H37C38.1046 6 39 6.89543 39 8V13H16V8Z",fill:"#0053A6"}),(0,r.Y)("path",{d:"M16 14H39V27C39 28.1046 38.1046 29 37 29H18C16.8954 29 16 28.1046 16 27V14Z",fill:"#0053A6"}),(0,r.Y)("g",{filter:"url(#filter0_d_3629_276)",children:(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.1667 1.6665C22.719 1.6665 23.1667 2.11422 23.1667 2.6665V4.33317H31.8333V2.6665C31.8333 2.11422 32.281 1.6665 32.8333 1.6665C33.3856 1.6665 33.8333 2.11422 33.8333 2.6665V4.33317H36.8333C38.8584 4.33317 40.5 5.97479 40.5 7.99984V26.6665C40.5 28.6915 38.8584 30.3332 36.8333 30.3332H18.1667C16.1416 30.3332 14.5 28.6915 14.5 26.6665V7.99984C14.5 5.97479 16.1416 4.33317 18.1667 4.33317H21.1667V2.6665C21.1667 2.11422 21.6144 1.6665 22.1667 1.6665ZM21.1667 6.33317H18.1667C17.2462 6.33317 16.5 7.07936 16.5 7.99984V12.3332H38.5V7.99984C38.5 7.07936 37.7538 6.33317 36.8333 6.33317H33.8333V7.99984C33.8333 8.55212 33.3856 8.99984 32.8333 8.99984C32.281 8.99984 31.8333 8.55212 31.8333 7.99984V6.33317H23.1667V7.99984C23.1667 8.55212 22.719 8.99984 22.1667 8.99984C21.6144 8.99984 21.1667 8.55212 21.1667 7.99984V6.33317ZM38.5 14.3332H16.5V26.6665C16.5 27.587 17.2462 28.3332 18.1667 28.3332H36.8333C37.7538 28.3332 38.5 27.587 38.5 26.6665V14.3332Z",fill:"#57ABFF"})}),(0,r.FD)("g",{filter:"url(#filter1_d_3629_276)",children:[(0,r.Y)("path",{d:"M43.0779 26.019C42.2616 23.6789 40.0353 22 37.4169 22C35.7617 22 34.2632 22.6709 33.1785 23.7556L30.2721 26.662M30.2721 26.662V22.666M30.2721 26.662H34.2667",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("path",{d:"M31.7706 29.9688C32.5869 32.3089 34.8132 33.9878 37.4316 33.9878C39.0868 33.9878 40.5853 33.3169 41.67 32.2322L44.5764 29.3258M44.5764 29.3258L44.5764 33.3218M44.5764 29.3258L40.5818 29.3258",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,r.FD)("defs",{children:[(0,r.FD)("filter",{id:"filter0_d_3629_276",x:"12.5",y:"0.666504",width:"30",height:"32.6665",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]}),(0,r.FD)("filter",{id:"filter1_d_3629_276",x:"27.5221",y:"20.25",width:"19.8043",height:"17.4878",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]})]})]})}function m(){return(0,r.Y)(a.S,{css:[o.wp.color.accentPrimaryStronger],py:6,px:12,children:(0,r.Y)(l.A,{size:32})})}},93034:(e,n,t)=>{"use strict";t.d(n,{I:()=>s});var r=t(81073),i=t(36937),o=t(18509),a=t(85389),l=(0,o.x)({container:[{maskImage:"linear-gradient(to right, white 80%, transparent)"}]}),s=function(e){var n=e.className;return(0,r.Y)(a.S,{className:n,css:l.container,children:(0,r.FD)("svg",{viewBox:"0 0 448 59",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("path",{d:"M28 14.5C56 14.5 56 44.5 84 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M196 14.5C224 14.5 224 44.5 252 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M280 14.5C308 14.5 308 44.5 336 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M364 14.5C392 14.5 392 44.5 420 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M168 14.5C140 14.5 140 44.5 112 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M112 14.5C140 14.5 140 44.5 168 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M336 14.5C308 14.5 308 44.5 280 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M420 14.5C392 14.5 392 44.5 364 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M252 14.5C224 14.5 224 44.5 196 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("rect",{width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6868 9.64645C11.8821 9.84171 11.8821 10.1583 11.6868 10.3536L8.04036 14L11.6868 17.6464C11.8821 17.8417 11.8821 18.1583 11.6868 18.3536C11.4915 18.5488 11.175 18.5488 10.9797 18.3536L6.9797 14.3536C6.78444 14.1583 6.78444 13.8417 6.9797 13.6464L10.9797 9.64645C11.175 9.45118 11.4915 9.45118 11.6868 9.64645ZM16.313 9.64645C16.5083 9.45118 16.8249 9.45118 17.0201 9.64645L21.0201 13.6464C21.2154 13.8417 21.2154 14.1583 21.0201 14.3536L17.0201 18.3536C16.8249 18.5488 16.5083 18.5488 16.313 18.3536C16.1178 18.1583 16.1178 17.8417 16.313 17.6464L19.9595 14L16.313 10.3536C16.1178 10.1583 16.1178 9.84171 16.313 9.64645Z",fill:i.LU.accentPositiveStrongest}),(0,r.Y)("rect",{x:"84",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M95.6868 40.6464C95.8821 40.8417 95.8821 41.1583 95.6868 41.3536L92.0404 45L95.6868 48.6464C95.8821 48.8417 95.8821 49.1583 95.6868 49.3536C95.4915 49.5488 95.175 49.5488 94.9797 49.3536L90.9797 45.3536C90.7844 45.1583 90.7844 44.8417 90.9797 44.6464L94.9797 40.6464C95.175 40.4512 95.4915 40.4512 95.6868 40.6464ZM100.313 40.6464C100.508 40.4512 100.825 40.4512 101.02 40.6464L105.02 44.6464C105.215 44.8417 105.215 45.1583 105.02 45.3536L101.02 49.3536C100.825 49.5488 100.508 49.5488 100.313 49.3536C100.118 49.1583 100.118 48.8417 100.313 48.6464L103.959 45L100.313 41.3536C100.118 41.1583 100.118 40.8417 100.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"168",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M179.687 40.6464C179.882 40.8417 179.882 41.1583 179.687 41.3536L176.04 45L179.687 48.6464C179.882 48.8417 179.882 49.1583 179.687 49.3536C179.492 49.5488 179.175 49.5488 178.98 49.3536L174.98 45.3536C174.784 45.1583 174.784 44.8417 174.98 44.6464L178.98 40.6464C179.175 40.4512 179.492 40.4512 179.687 40.6464ZM184.313 40.6464C184.508 40.4512 184.825 40.4512 185.02 40.6464L189.02 44.6464C189.215 44.8417 189.215 45.1583 189.02 45.3536L185.02 49.3536C184.825 49.5488 184.508 49.5488 184.313 49.3536C184.118 49.1583 184.118 48.8417 184.313 48.6464L187.959 45L184.313 41.3536C184.118 41.1583 184.118 40.8417 184.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"252",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M263.687 40.6464C263.882 40.8417 263.882 41.1583 263.687 41.3536L260.04 45L263.687 48.6464C263.882 48.8417 263.882 49.1583 263.687 49.3536C263.492 49.5488 263.175 49.5488 262.98 49.3536L258.98 45.3536C258.784 45.1583 258.784 44.8417 258.98 44.6464L262.98 40.6464C263.175 40.4512 263.492 40.4512 263.687 40.6464ZM268.313 40.6464C268.508 40.4512 268.825 40.4512 269.02 40.6464L273.02 44.6464C273.215 44.8417 273.215 45.1583 273.02 45.3536L269.02 49.3536C268.825 49.5488 268.508 49.5488 268.313 49.3536C268.118 49.1583 268.118 48.8417 268.313 48.6464L271.959 45L268.313 41.3536C268.118 41.1583 268.118 40.8417 268.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"336",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M347.687 40.6464C347.882 40.8417 347.882 41.1583 347.687 41.3536L344.04 45L347.687 48.6464C347.882 48.8417 347.882 49.1583 347.687 49.3536C347.492 49.5488 347.175 49.5488 346.98 49.3536L342.98 45.3536C342.784 45.1583 342.784 44.8417 342.98 44.6464L346.98 40.6464C347.175 40.4512 347.492 40.4512 347.687 40.6464ZM352.313 40.6464C352.508 40.4512 352.825 40.4512 353.02 40.6464L357.02 44.6464C357.215 44.8417 357.215 45.1583 357.02 45.3536L353.02 49.3536C352.825 49.5488 352.508 49.5488 352.313 49.3536C352.118 49.1583 352.118 48.8417 352.313 48.6464L355.959 45L352.313 41.3536C352.118 41.1583 352.118 40.8417 352.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"420",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M431.687 40.6464C431.882 40.8417 431.882 41.1583 431.687 41.3536L428.04 45L431.687 48.6464C431.882 48.8417 431.882 49.1583 431.687 49.3536C431.492 49.5488 431.175 49.5488 430.98 49.3536L426.98 45.3536C426.784 45.1583 426.784 44.8417 426.98 44.6464L430.98 40.6464C431.175 40.4512 431.492 40.4512 431.687 40.6464ZM436.313 40.6464C436.508 40.4512 436.825 40.4512 437.02 40.6464L441.02 44.6464C441.215 44.8417 441.215 45.1583 441.02 45.3536L437.02 49.3536C436.825 49.5488 436.508 49.5488 436.313 49.3536C436.118 49.1583 436.118 48.8417 436.313 48.6464L439.959 45L436.313 41.3536C436.118 41.1583 436.118 40.8417 436.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("line",{x1:"28",y1:"14",x2:"444",y2:"14",stroke:i.LU.accentPositiveDimmest,strokeWidth:"2"})]})})}},93067:(e,n,t)=>{"use strict";t.d(n,{Y:()=>i,r:()=>r});var r=function(e){var n=new Date(e),t=n.getHours(),r=n.getMinutes(),o="AM";return t>=12&&(o="PM"),0==(t%=12)&&(t="12"),r<10&&(r="0"+r),i(e)+" ".concat(t,":").concat(r," ").concat(o)},i=function(e){var n=new Date(e),t=n.getMonth()+1,r=n.getDate(),i=n.getFullYear();return"".concat(t,"/").concat(r,"/").concat(i)}},93088:(e,n,t)=>{"use strict";t.d(n,{i:()=>b});var r=t(12694),i=t(21462),o=t(67201),a=t(17844),l=t(12584),s=t(41114),c=t(68197),u=t(50175);function d(){var e=(0,l._)(["\n  subscription StartOrgReplPresenceSession(\n    $input: StartOrgReplPresenceSessionInput!\n  ) {\n    startOrgReplPresenceSession(input: $input)\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,l._)(["\n  mutation PingOrgReplPresenceSession(\n    $input: PingOrgReplPresenceSessionInput!\n  ) {\n    pingOrgReplPresenceSession(input: $input)\n  }\n"]);return p=function(){return e},e}var f={},h=(0,s.J1)(d()),m=(0,s.J1)(p()),g=t(55100),v=t(74671),y=t(79361),w=t(71424);function b(){var e,n,t,l=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=(0,g.A)(),d=(0,i.useRef)((0,o.A)()),p=(0,w.A)().container,b=(0,y.A)(p),S=(0,r._)((e=(0,a._)({},f,void 0),u.n(m,e)),1)[0],Y=b!==v.KN.CONNECTED||l;(0,i.useEffect)(function(){var e=!1;if(!Y&&b===v.KN.CONNECTED){var n=null;return function t(){S({variables:{input:{sessionId:d.current}},onCompleted:function(){e||(n=setTimeout(t,1e4))}})}(),function(){e=!0,n&&clearTimeout(n)}}},[b,d,S,Y]),n={variables:{input:{replId:s,sessionId:d.current}},skip:Y},t=(0,a._)({},f,n),c.R(h,t)}},93096:(e,n,t)=>{"use strict";t.d(n,{c:()=>u});var r=t(81073),i=t(96034),o=t(18509),a=t(27023),l=t(41358),s=t(4616),c=(0,o.x)({root:[a.wp.borderRadius()]});function u(e){var n=e.aiName;return(0,r.Y)(l.ui,{elevated:!0,css:c.root,py:8,px:12,gap:8,align:"center",children:(0,r.FD)(s.EY,{children:["Guests are not allowed to use ",n," in ",i.Lm," Plan user's repls."]})})}},93399:e=>{e.exports={root:"Footer_root__Kzk8_",isRevising:"Footer_isRevising__oUv5D",requiresPaymentContainer:"Footer_requiresPaymentContainer__yb4l8",revisionFeedbackMessage:"Footer_revisionFeedbackMessage__gMt0x"}},93517:(e,n,t)=>{"use strict";t.d(n,{A:()=>m,_:()=>g});var r=t(81073),i=t(21462),o=t(1040),a=t(78502),l=t(17089),s=t(36937),c=t(18509),u=t(85051),d=t(27023),p=t(4616),f=t(85389),h=(0,c.x)({qr:[d.wp.height(128),d.wp.width(128),d.wp.borderRadius(2),u.b.nofill]});function m(e){var n=e.source,t=e.color,l=e.installText,c=e.onClick,u=(0,a.T)(),d=new URL("/mobile",window.location.origin);return d.searchParams.append("qr_src",n),u&&d.searchParams.append("id",String(u)),(0,i.useEffect)(function(){u&&g({userId:u,source:n,action:"view"})},[n,u]),(0,r.FD)(f.S,{align:"center",gap:4,onClick:function(){if(u&&g({userId:u,source:n,action:"click"}),c)return void c(d.toString());window.open(d)},children:[(0,r.Y)(f.S,{align:"center",justify:"center",children:(0,r.Y)(o.Ay,{bgColor:s.LU.backgroundDefault,fgColor:null!=t?t:s.LU.foregroundDefault,css:h.qr,value:d.toString()})}),(0,r.Y)(p.EY,{variant:"small",color:"dimmer",children:null!=l?l:"Scan to install"})]})}function g(e){var n=e.userId,t=e.source,r=e.action;(0,l.u4)(l.AZ.MOBILE_QR_CODE_USED,{action:r,source:t,src_user:n,qr_path:"/mobile"})}},93936:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M3 8.276a4.259 4.259 0 0 1 4.259-4.259h8.965a4.259 4.259 0 0 1 4.259 4.259v8.965a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276Zm4.259-2.914a2.914 2.914 0 0 0-2.914 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914V8.276a2.914 2.914 0 0 0-2.914-2.914H7.26Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M9.948 5.057A3.057 3.057 0 0 1 13.006 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437a3.057 3.057 0 0 1-3.058 3.058h-6.436a3.057 3.057 0 0 1-3.058-3.058V5.057Z"})]}))}},94175:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(41467),i=t(37872),o=t(35479),a=new Map,l=function(e,n){if((0,r.m6)(e)){var t=window.performance.now();a.set(e,{start:t,source:n})}},s=function(e){var n=a.get(e);if(void 0!==n){var t=n.start,r=n.source,l=window.performance.now(),s=(0,o.v)(e);i.vF.time("time to load file",l-t,{from:r,fileViewerType:s}),a.delete(e)}};function c(e){return{trackTimeToLoadFileStart:function(n){return l(n,e)},trackTimeToLoadFileEnd:s}}},94317:(e,n,t)=>{"use strict";t.d(n,{c:()=>u,n:()=>c});var r=t(12584),i=t(41114),o=t(4842),a=t(1601);function l(){var e=(0,r._)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    ...WorkspaceHeaderComputeAlertCurrentUser\n  }\n  ","\n"]);return l=function(){return e},e}function s(){var e=(0,r._)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n    ...WorkspaceHeaderComputeAlertRepl\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}var c=(0,i.J1)(l(),a.C),u=(0,i.J1)(s(),o.a,a.R)},94324:(e,n,t)=>{"use strict";t.d(n,{H:()=>s});var r=t(81073),i=t(39602),o=t(22422),a=t(4616),l=t(85389);function s(e){var n,t,s,c,u,d,p,f=(0,i.sx)({variables:{id:e.id}}).data,h=null==f?void 0:f.user;return e.showAvatarOnly?(0,r.Y)(o.e,{size:24,username:null!=(n=null==h?void 0:h.username)?n:"",fullName:null!=(t=null==h?void 0:h.fullName)?t:"",src:null!=(s=null==h?void 0:h.image)?s:""}):(0,r.FD)(l.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(o.e,{size:24,username:null!=(c=null==h?void 0:h.username)?c:"",fullName:null!=(u=null==h?void 0:h.fullName)?u:"",src:null!=(d=null==h?void 0:h.image)?d:""}),(0,r.Y)(a.EY,{variant:"small",color:"dimmer",children:null!=(p=null==h?void 0:h.username)?p:""})]})}},94398:(e,n,t)=>{"use strict";t.d(n,{A:()=>m});var r=t(21462),i=t(17844),o=t(12584),a=t(41114),l=t(68197);function s(){var e=(0,o._)(["\n  subscription WorkspaceUserCanWrite($replId: String!) {\n    currentUserCanWrite(replId: $replId)\n  }\n"]);return s=function(){return e},e}var c={},u=(0,a.J1)(s()),d=t(33090),p=t(13356),f=t(55100),h=t(71424);function m(){var e,n,t=(0,h.A)().fs,o=(e={variables:{replId:(0,f.A)()}},n=(0,i._)({},c,e),l.R(u,n)).data,a=(null==o?void 0:o.currentUserCanWrite)===!1;(0,r.useEffect)(function(){a&&window.location.reload()},[a]);var s=(0,r.useCallback)(function(){return a||t.getStatus()===d.sn.Clean?p.Nn.NavigateAnyway:p.Nn.PromptUser},[t,a]);(0,p.Ay)({shouldPreventNavCb:s})}},94613:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(46434),i=t(29935),o=t(82643),a=t(39159),l=t(95570);function s(){var e;return(0,a.b)((e=(0,i._)(function(e,n){var t,i,a,s,c,u,d,p;return(0,o.YH)(this,function(e){switch(e.label){case 0:return n.signal,[3,12];case 1:e.trys.push([1,6,7,12]),c=(0,r._)(t),e.label=2;case 2:return[4,c.next()];case 3:if(!(i=!(u=e.sent()).done))return[3,5];(d=u.value).ok&&(d.payload.extras?l.log("[pid2]: ".concat(d.payload.message),d.payload.extras):l.log("[pid2]: ".concat(d.payload.message))),e.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return p=e.sent(),a=!0,s=p,[3,12];case 7:if(e.trys.push([7,,10,11]),!(i&&null!=c.return))return[3,9];return[4,c.return()];case 8:e.sent(),e.label=9;case 9:return[3,11];case 10:if(a)throw s;return[7];case 11:return[7];case 12:return[2]}})}),function(n,t){return e.apply(this,arguments)}),[]),null}},94643:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(12694),i=t(21462),o=t(33090),a=t(71424),l=t(37157);function s(){var e=(0,a.A)().fs,n=(0,r._)((0,i.useState)(!1),2),t=n[0],s=n[1],c=(0,l.A)(),u=c.didConnectOnce,d=c.didDisconnect;return((0,i.useEffect)(function(){return s(e.getStatus()===o.sn.Syncing),e.onStatusChange(function(e){s(e===o.sn.Syncing)})},[e]),u)?{isSaving:t,isOffline:d}:{isSaving:!1,isOffline:!1}}},94827:(e,n,t)=>{"use strict";t.d(n,{AH:()=>T,DX:()=>R,bM:()=>k,d3:()=>Y,fY:()=>D,m1:()=>A,tD:()=>C,vC:()=>P});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(51026),s=t(50175);function c(){var e=(0,i._)(["\n  fragment WorkspaceSharedSecret on SharedSecret {\n    id\n    name\n    description\n    version\n    timeCreated\n    timeUpdated\n    owner {\n      __typename\n      ... on User {\n        id\n      }\n    }\n    value\n    signedUrl\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment WorkspaceSharedSecretLink on SharedSecretLink {\n    id\n    alias\n    secret {\n      ...WorkspaceSharedSecret\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  query SecretsPaneAuthorizations($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        isOwner\n        authorizations {\n          editSecrets {\n            isAuthorized\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  query WorkspaceSecrets($secretsInput: SecretsInput) {\n    currentUser {\n      id\n      secrets(input: $secretsInput) {\n        ... on SharedSecretConnection {\n          items {\n            ...WorkspaceSharedSecret\n          }\n          pageInfo {\n            hasNextPage\n            hasPreviousPage\n            nextCursor\n            previousCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  query ReplLinkedSecrets($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        sharedSecretLinks {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  query WorkspaceAndReplLinkedSecrets($replId: String!) {\n    currentUser {\n      id\n      secrets {\n        ... on SharedSecretConnection {\n          items {\n            ...WorkspaceSharedSecret\n          }\n        }\n      }\n    }\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        sharedSecretLinks {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  mutation LinkSharedSecrets($input: LinkSharedSecretsInput!) {\n    linkSharedSecrets(input: $input) {\n      ... on LinkSharedSecretsResult {\n        links {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  mutation UnlinkSharedSecrets($input: UnlinkSharedSecretsInput!) {\n    unlinkSharedSecrets(input: $input) {\n      ... on UnlinkSharedSecretsResult {\n        success\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return g=function(){return e},e}function v(){var e=(0,i._)(["\n  mutation UpdateSharedSecretLink($input: UpdateSharedSecretLinkInput!) {\n    updateSharedSecretLink(input: $input) {\n      ... on UpdateSharedSecretLinkOutput {\n        ...WorkspaceSharedSecretLink\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var y={},w=(0,o.J1)(c()),b=(0,o.J1)(u(),w),S=(0,o.J1)(d());function Y(e){var n=(0,r._)({},y,e);return a.I(S,n)}var _=(0,o.J1)(p(),w);function A(e){var n=(0,r._)({},y,e);return a.I(_,n)}var C=(0,o.J1)(f(),b);function k(e){var n=(0,r._)({},y,e);return a.I(C,n)}var x=(0,o.J1)(h(),w,b);function D(e){var n=(0,r._)({},y,e);return l._(x,n)}var E=(0,o.J1)(m(),b);function R(e){var n=(0,r._)({},y,e);return s.n(E,n)}var I=(0,o.J1)(g());function T(e){var n=(0,r._)({},y,e);return s.n(I,n)}var F=(0,o.J1)(v(),b);function P(e){var n=(0,r._)({},y,e);return s.n(F,n)}},94917:(e,n,t)=>{"use strict";t.d(n,{G:()=>X,C:()=>ee});var r,i=t(81073),o=t(21462),a=t(64912),l=t(45773),s=t(37743),c=t(83846),u=t(17844),d=t(93629),p=t(23099),f=t.n(p),h=t(49069),m=t(68866),g=t(9176),v=t(21309),y=t(76484),w=t(37032),b=t(44074),S=t(58770),Y=t(60690),_=t(9453),A=t(36937),C=t(18509),k=t(85051),x=t(15311),D=t(27023),E=t(41358),R=t(4616),I=t(78626),T=t(85389),F=t(63837),P=(0,x.v)(["opacity","transform"]),L=P.cssVars,U=P.styleTokens,N=[D.wp.display.flex,D.wp.reset.button,D.wp.cursor.pointer,D.wp.center,k.b.nofill,D.wp.height("100%"),D.wp.borderRadius(0)],O=[N,D.wp.width(28),{"& svg":D.wp.display.block}],M=(0,C.x)({root:[D.wp.borderRadius(6),D.wp.border({color:A.LU.outlineDefault}),D.wp.position.relative,D.wp.height(30),{opacity:U.opacity,transform:U.transform,transition:"opacity 120ms, transform 120ms","button:first-of-type":{borderTopLeftRadius:6,borderBottomLeftRadius:6},"button:last-of-type":{borderTopRightRadius:6,borderBottomRightRadius:6}}],moreButton:O,button:[N,D.wp.rowWithGap(4),D.wp.align.center,D.wp.pl(4),D.wp.pr(6),D.wp.flex.growAndShrink(1),D.wp.border({direction:"right",color:A.LU.outlineDefault}),{fontFamily:A.LU.fontFamilyDefault,"*":{color:A.LU.foregroundDimmer},":hover *":{color:A.LU.foregroundDefault},".shortcut":{color:A.LU.foregroundDimmest},":hover .shortcut":{color:A.LU.foregroundDimmer}}],iconButton:[O,D.wp.border({direction:"right",color:A.LU.outlineDefault})]}),H=new v.E(function(e){var n,t=e.controls,r=e.verticalPlacement,a=e.onMoreClick,l=(0,o.useRef)(null),s=(0,S.vm)(),p=(0,_.zg)();(0,o.useEffect)(function(){var e;p(),(0,b.U)(l,(e={},(0,c._)(e,L.opacity,"1"),(0,c._)(e,L.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(A.LU.space4,"))")),e))},[r,p]);var f=(0,o.useRef)((0,_.Nf)());return(0,i.FD)(E.ui,{innerRef:l,elevated:!0,css:M.root,align:"stretch",row:!0,style:(n={},(0,c._)(n,L.opacity,"0"),(0,c._)(n,L.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(A.LU.space16,"))")),n),children:[t.map(function(e){if(f.current){var n=(0,i.FD)(T.S,{row:!0,gap:2,align:"center",children:[(0,i.Y)(R.EY,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.Y)(R.EY,{variant:"small",className:"shortcut",color:"dimmest",children:(0,Y.LH)(e.shortcut,s)}):null]});return(0,i.Y)(I.m_,{tooltip:n,children:function(n,t){return(0,i.Y)(T.S,(0,d._)((0,u._)({},n),{innerRef:t,css:M.iconButton,onClick:e.onClick,tag:"button",children:e.icon}))}},e.text)}return(0,i.FD)(T.S,{css:M.button,onClick:e.onClick,tag:"button",children:[e.icon,(0,i.Y)(R.EY,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.FD)(R.EY,{variant:"small",className:"shortcut",children:["(",(0,Y.LH)(e.shortcut,s),")"]}):null]},e.text)}),a?(0,i.Y)(T.S,{"aria-label":"More",css:M.moreButton,onClick:function(e){var n=(l.current||e.currentTarget).getBoundingClientRect();a({top:n.top,right:n.right})},tag:"button",children:(0,i.Y)(F.A,{size:16})}):null]})}),B={layer:"cm-selection-controls-layer",dom:"cm-selection-controls-dom"},z=l.Lz.theme((r={},(0,c._)(r,".".concat(B.layer),{width:"100%"}),(0,c._)(r,".".concat(B.dom),{position:"absolute"}),r)),W=function(){function e(n){(0,s._)(this,e),this.options=n}var n=e.prototype;return n.draw=function(){var e=this.options,n=e.controls,t=e.onMoreClick,r=e.top,i=e.align,o=e.verticalPlacement,a=H.create({controls:n,onMoreClick:t,verticalPlacement:o});return a.className=B.dom,a.style.top=r+"px","left"===i.side?(a.style.left=i.value+"px",a.style.right=""):(a.style.right=i.value+"px",a.style.left=""),a.style.pointerEvents="none",setTimeout(function(){a.style.pointerEvents="auto"},200),a},n.eq=function(e){return f()(e.options,this.options)},e}(),G=h.Pe.define(),V=h.sU.define({create:function(){return null},update:function(e,n){var t;return!n.state.selection||(null==(t=n.state.selection)?void 0:t.main.empty)?null:((0,y.C)(n,G,function(n){e=n.value}),e)}}),Z=h.sU.define({create:function(e){return!e.selection.main.empty},update:function(e,n){return!n.state.selection.main.empty}}),j=l.Z9.define(function(e){var n=function(){var n=e.state.selection.main;e.dispatch({effects:G.of(n.empty?null:Date.now())})},t=function(e){"Shift"===e.key&&n()},r=function(){document.addEventListener("mouseup",n),document.addEventListener("keyup",t)},i=function(){document.removeEventListener("mouseup",n),document.removeEventListener("keyup",t)};return{update:function(e){(0,m.$H)(e,Z)&&(e.state.field(Z)?r():i())},destroy:i}}),q=new w.k(function(e){return[z,(0,l.qd)({above:!0,class:B.layer,update:function(e){return(0,m.$H)(e,g.z,V)},markers:function(n){if(!n.hasFocus)return[];var t=n.state.field(V)?n.state.selection.main:null;if(!t||n.state.field(g.z,!1))return[];var r=function(e,n){for(var t=Math.min(n.from,n.to),r=Math.max(n.from,n.to),i=null;t<=r;){var o=e.lineAt(t);t=o.to+1,null!==i&&o.length<i.length||(i=o)}return i}(n.state.doc,t);if(!r)return[];var i=n.coordsAtPos(r.to);if(!i)return[];var o=n.lineBlockAt(Math.min(t.anchor,t.head)),a=n.dom.getBoundingClientRect(),l=n.contentDOM.getBoundingClientRect(),s=o.top+n.documentPadding.top-30,c=l.right-i.left<200?{side:"right",value:a.right-l.right+16}:{side:"left",value:i.left-a.left},u="top";if(s<n.scrollDOM.scrollTop){var d=n.lineBlockAt(t.to);s=d.top+d.height,u="bottom"}return[new W({top:s,align:c,controls:e.controls(n),onMoreClick:e.onMoreClick,verticalPlacement:u})]}}),Z,V,j]}),K=t(50681),$=t(61191),J=t(16645),Q=t(16691),X={id:"editor.generateOrModifyWithAI",name:"AI",description:"Generate or modify selection with AI",default:(0,$.FM)({cmdOrCtrl:!0,key:"i"})};function ee(e){var n=e.editCode,t=e.explainCode,r=e.generateCode,s=e.onMoreClick,c=(0,K.f)().isTeamWithAiDisabled,u=(0,Y.Jn)(X.id),d=(0,o.useMemo)(function(){if(!u)return[];var e=Array.isArray(u)?u.join(" "):u;return l.w4.of([{key:e,scope:"editor",run:function(e){return e.state.selection.main.empty?r(e,"shortcut"):n(e,"shortcut"),!0}}])},[u,r,n]),p=(0,o.useMemo)(function(){return{controls:function(e){return c?[]:[{text:"Modify with "+a.BP,icon:(0,i.Y)(Q.A,{size:16,color:A.LU.blurpleStronger}),onClick:function(){return n(e,"highlight")},shortcut:u},{text:"Explain with "+a.BP,icon:(0,i.Y)(J.A,{size:16,color:A.LU.blurpleStronger}),onClick:function(){return t(e,"highlight")}}]},onMoreClick:s}},[n,t,s,u,c]),f=q.use(p);return(0,o.useMemo)(function(){return[f,d]},[f,d])}},95245:(e,n,t)=>{"use strict";t.d(n,{H3:()=>h,NP:()=>g,lb:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(50175),l=t(51026);function s(){var e=(0,i._)(["\n  fragment CreateProjectBeforeForkReplContext on Repl {\n    id\n    title\n    description\n    publishedAs\n    user {\n      id\n      username\n    }\n    deployment {\n      activeRelease {\n        id\n      }\n    }\n    org {\n      id\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation CreateProjectBeforeFork($input: CreateProjectInput!) {\n    createProject(input: $input) {\n      __typename\n      ... on Error {\n        message\n      }\n      ... on Project {\n        id\n        mainRepl {\n          id\n          project {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  query CreateProjectCheckForProject($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(s()),f=(0,o.J1)(c());function h(e){var n=(0,r._)({},d,e);return a.n(f,n)}var m=(0,o.J1)(u());function g(e){var n=(0,r._)({},d,e);return l._(m,n)}},95253:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(62019),i=t(37743),o=t(1833),a=t(17844),l=t(93629),s=t(81073),c=t(21462),u=t(90629),d=t(10752),p=t(85389),f=t(72882),h=t.n(f),m=t(95570),g=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.state={hasErrored:!1,error:null,errorInfo:null},e}(0,o._)(n,e);var t=n.prototype;return t.componentDidCatch=function(e,n){this.setState({hasErrored:!0,error:e,errorInfo:n}),this.props.handleError(e,n),m.error(e)},t.render=function(){if(this.state.hasErrored){var e,n;return(0,s.Y)(p.S,{clsx:h().errorMessage,children:null!=(n=null==(e=this.state.error)?void 0:e.stack)?n:"An unknown error occurred."})}return this.props.children},n}(c.Component);function v(e){var n=e.bsod,t=void 0!==n&&n,r=e.reportToSentry,i=void 0===r||r,o=e.handleError,c=e.children,p=e.origin,f=void 0===p?"ErrorBoundary: (no origin provided)":p,h=e.tags,m=void 0===h?{}:h,v=e.extras,y=void 0===v?{}:v,w=(0,d.iO)();return(0,s.Y)(g,{handleError:function(e,n){t?w({error:e,extras:(0,l._)((0,a._)({},y),{errorInfo:n}),componentStack:n.componentStack||void 0,tags:(0,l._)((0,a._)({},m),{errorBoundary:!0}),origin:f}):i&&u.v4(function(t){t.setTag("errorBoundary",!0),t.setTags(m),t.setExtra("errorInfo",n),t.setExtras(y),t.setContext("react",{componentStack:n.componentStack}),u.Cp(e)}),o&&o(e,n)},children:c})}},95341:(e,n,t)=>{"use strict";t.d(n,{o:()=>c});var r=t(29935),i=t(82643),o=t(21462),a=t(81497),l=t(71424),s=t(35995);function c(){var e,n=(0,l.A)().fs;return(0,o.useCallback)((e=(0,r._)(function(e){var t,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=e.files,r=e.onError,[4,(0,a.Zn)({parentPath:s.Ls,files:t,fs:n,overwrite:!0,onError:function(e){return r(e.error)}})];case 1:return i.sent(),[2]}})}),function(n){return e.apply(this,arguments)}),[n])}},95830:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(81073),i=t(36937),o=t(18509),a=t(27023),l=t(4616),s=t(85389),c=t(74726),u=t(27959),d=t(22582),p=(0,o.x)({wrapper:[a.wp.position.absolute,{top:0,right:0,bottom:0,left:0,zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],overlay:[a.wp.position.absolute,{top:0,right:0,bottom:0,left:0,backgroundColor:i.LU.blueDimmer,opacity:.8}],content:[a.wp.center,{position:"relative",zIndex:1}]});function f(){return(0,r.FD)(s.S,{css:p.wrapper,children:[(0,r.Y)(s.S,{css:p.overlay}),(0,r.FD)(s.S,{css:p.content,gap:12,children:[(0,r.FD)(s.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(u.A,{size:32}),(0,r.Y)(c.A,{size:32}),(0,r.Y)(d.A,{size:32})]}),(0,r.Y)(l.EY,{variant:"subheadDefault",children:"Drop files here to add to conversation"})]})]})}},96075:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12 17.937 22.75 12 22.75 1.25 17.937 1.25 12Z",clipRule:"evenodd"})}))}},96202:(e,n,t)=>{"use strict";t.d(n,{A9:()=>A,CX:()=>R,CY:()=>P,FL:()=>C,d1:()=>k,lb:()=>T,oh:()=>U,tD:()=>D});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175),s=t(68197);function c(){var e=(0,i._)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    fullName\n    image\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,i._)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return v=function(){return e},e}function y(){var e=(0,i._)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function w(){var e=(0,i._)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return w=function(){return e},e}var b={},S=(0,o.J1)(c()),Y=(0,o.J1)(u()),_=(0,o.J1)(d(),S,Y),A=(0,o.J1)(p(),S,_),C=(0,o.J1)(f(),A);function k(e){var n=(0,r._)({},b,e);return a.I(C,n)}var x=(0,o.J1)(h(),A);function D(e){var n=(0,r._)({},b,e);return l.n(x,n)}var E=(0,o.J1)(m(),A);function R(e){var n=(0,r._)({},b,e);return l.n(E,n)}var I=(0,o.J1)(g(),A);function T(e){var n=(0,r._)({},b,e);return l.n(I,n)}var F=(0,o.J1)(v());function P(e){var n=(0,r._)({},b,e);return l.n(F,n)}var L=(0,o.J1)(y(),A);function U(e){var n=(0,r._)({},b,e);return s.R(L,n)}w()},96213:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M22.334 3.589 17.805 20.41h-1.482L20.853 3.59h1.482ZM12.285 12.15l.11-3.018-2.553 1.62-.658-1.153 2.69-1.4-2.69-1.4.658-1.152 2.553 1.619-.11-3.019h1.317l-.11 3.019 2.553-1.62.658 1.154-2.69 1.4 2.69 1.399-.658 1.152-2.553-1.619.11 3.019h-1.317ZM7.676 3.589 3.148 20.41H1.666L6.194 3.59h1.482Z"})}))}},96400:(e,n,t)=>{"use strict";t.d(n,{D3:()=>U,N2:()=>I,Rc:()=>M,XT:()=>L,bX:()=>k,ce:()=>H,pd:()=>F,sb:()=>P,wi:()=>N,y1:()=>T});var r=t(12694),i=t(86105),o=t(81073),a=t(21462),l=t(64912),s=t(12331),c=t(67856),u=t(31092),d=t(95253),p=t(36937),f=t(27503),h=t(18509),m=t(85051),g=t(27023),v=t(36073),y=t(4616),w=t(78626),b=t(85389),S=t(5142),Y=t(63456),_=t(25650),A=t(14792),C=t(71872),k=400,x=[g.wp.p(4),g.wp.center,g.wp.borderRadius(4)],D=(0,h.x)({root:(0,i._)(x).concat([g.wp.cursor.pointer,(0,f.Li)("blurple")]),disabled:(0,i._)(x).concat([(0,f.Li)("grey")])});function E(e){return e.disabled||e.connecting?(0,o.Y)(b.S,{css:D.disabled,tag:"button","data-cy":"ghostwriter-inline-submit",children:e.connecting?(0,o.Y)(Y.A,{size:12}):(0,o.Y)(_.A,{size:12})}):(0,o.Y)(b.S,{"data-cy":"ghostwriter-inline-submit",css:D.root,tag:"button",onClick:e.onClick,children:e.loading?(0,o.Y)(A.A,{size:12}):(0,o.Y)(_.A,{size:12})})}var R=(0,h.x)({root:[g.wp.minWidth(300),g.wp.maxWidth(800),g.wp.position.relative,{fontFamily:p.LU.fontFamilyDefault}],container:[g.wp.position.relative,g.wp.backgroundColor.backgroundDefault],input:[m.b.outlined,g.wp.borderRadius(4),{paddingBottom:36,"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:"transparent"}}}],textarea:[g.wp.p(8),g.wp.pb(0),{caretColor:"initial",fontFamily:p.LU.fontFamilyDefault,border:"0 none",resize:"none",height:"1em",backgroundColor:"transparent","@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}},"::placeholder":{color:p.LU.foregroundDimmest}}],footer:[g.wp.position.absolute,g.wp.bottom(0),g.wp.left(0),g.wp.width("100%"),{height:36}],footerRight:[{"& button":[g.wp.height(22),g.wp.py(6),g.wp.py(4),g.wp.borderRadius(4)]}],error:[g.wp.color.accentNegativeStronger]}),I=function(e){var n=e.requestMeasure,t=e.type,r=e.children,i=e.isCodeMirrorPocket,a=(0,u.A)(n);return(0,o.Y)(d.A,{bsod:!0,tags:{ai:!0},extras:{type:t},origin:"ErrorBoundary: InlineAiWidget",children:(0,o.Y)(b.S,{css:R.root,py:8,pr:8,gap:4,innerRef:a,className:void 0===i||i?"cm-pocket-widget":void 0,children:r})})},T=function(e){var n=e.requestMeasure,t=e.type,r=e.children,i=e.isCodeMirrorPocket,a=e.error,l=e.clearError,s=e.innerRef;return(0,o.FD)(I,{type:t,requestMeasure:n,isCodeMirrorPocket:void 0===i||i,children:[(0,o.Y)(b.S,{css:R.container,innerRef:s,children:r}),a?(0,o.Y)(v.N,{icon:(0,o.Y)(C.A,{color:p.LU.accentNegativeDefault}),text:a,closable:!0,closeAction:l}):null]})};function F(e){var n=(0,c.A)();return(0,o.Y)(b.S,{css:R.input,children:(0,o.Y)("textarea",{value:e.value,onChange:e.onChange,placeholder:e.placeholder,css:R.textarea,ref:function(t){e.inputRef.current=t,n.ref(t)},onKeyDown:e.onKeyDown,autoFocus:e.autoFocus,"data-cy":"ghostwriter-inline-input",disabled:e.disabled})})}function P(e){var n=e.readableModelName,t=e.type;return(0,o.Y)(w.m_,{tooltip:"generateCode"===t?"Generate new code based on this file".concat(n?" using ".concat(n,"."):"."):"Modify selected code based on the context of this file".concat(n?" using ".concat(n,"."):"."),children:(0,o.FD)(b.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(S.A,{}),(0,o.Y)(y.EY,{variant:"small",color:"dimmest",children:"transformCode"===t?"Modify with ".concat(l.BP):"Generate with ".concat(l.BP)})]})})}function L(e){var n=e.loading,t=e.disabled,r=e.promptPresentation,i=e.onClick,a=e.connecting,l=e.escPressed,s=e.codeLengthExceeded;return(0,o.FD)(o.FK,{children:[n?(0,o.FD)(b.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(Y.A,{size:12,color:p.LU.blurpleDefault}),r?(0,o.Y)(y.EY,{variant:"small",color:"dimmest",children:"AI is writing"}):null]}):(0,o.Y)(o.FK,{children:r?(0,o.Y)(y.EY,{variant:"small",color:"dimmest",children:s?"Code length exceeded":l?"Press Esc again to dismiss":"Esc to close, Enter to submit"}):null}),(0,o.Y)(E,{connecting:a,loading:n,disabled:t,onClick:i})]})}function U(e){var n=e.id,t=e.inputRef,i=e.onClose,o=e.loading,l=e.onSubmit,c=(0,r._)((0,a.useState)(""),2),u=c[0],d=c[1],p=(0,r._)((0,a.useState)(!1),2),f=p[0],h=p[1];return(0,a.useEffect)(function(){var e="inline-ai/input-state/".concat(n),r=s.A.get(e,"string");r&&d(r);var i=t.current;return function(){if(i){var n=i.value;if(0===n.length)return void s.A.remove(e);s.A.set(e,n)}}},[n,t]),{value:u,setValue:d,onKeyDown:function(e){switch(e.key){case"Escape":e.preventDefault(),u.length?f?i():h(!0):i();break;case"Enter":if(e.preventDefault(),o)break;e.shiftKey?d(function(e){return e+"\n"}):!e.metaKey&&u.length&&u.trim()&&l();break;default:h(!1)}},escPressed:f}}var N=function(e){var n=(0,r._)(e.children,2),t=n[0],i=n[1];return(0,o.FD)(b.S,{css:R.footer,px:8,pr:6,row:!0,gap:8,align:"center",children:[(0,o.Y)(b.S,{grow:!0,shrink:!0,align:"center",row:!0,gap:8,children:t}),(0,o.Y)(b.S,{css:R.footerRight,row:!0,gap:4,align:"center",children:i})]})},O=(0,h.x)({default:[g.wp.width("90%")]}),M=function(e){var n=e.inlineActionType,t=e.closeAction;return(0,o.Y)(b.S,{css:O.default,children:(0,o.Y)(v.N,{icon:(0,o.Y)(C.A,{}),colorway:"red",text:"".concat(n," with AI is currently unavailable. Try again later."),closable:!0,closeAction:t})})},H=function(e){var n=e.inlineActionType,t=e.closeAction;return(0,o.Y)(b.S,{css:O.default,children:(0,o.Y)(v.N,{icon:(0,o.Y)(C.A,{}),colorway:"blurple",text:"".concat(n," with AI is unavailable while ").concat((0,l.Nn)({variant:"casual"})," is running."),closable:!0,closeAction:t})})}},96444:e=>{e.exports={agentSettingsButton:"AgentSettingsDropdown_agentSettingsButton__QCS0v",surface:"AgentSettingsDropdown_surface__hIZwZ",optionText:"AgentSettingsDropdown_optionText__Mgcm4",dollarTag:"AgentSettingsDropdown_dollarTag__eTvsn",upsellIcon:"AgentSettingsDropdown_upsellIcon__Zy4A_"}},96502:(e,n,t)=>{"use strict";t.d(n,{a:()=>l});var r=t(81073),i=t(18509),o=t(27023),a=t(1684),l=function(e){var n=e.className,t=e.text,i=e.iconLeft,o=e.onClick;return(0,r.Y)(a.a,{onClick:o,className:n,colorway:"yellow",css:s.self,text:t,iconLeft:i})},s=(0,i.x)({self:[o.wp.borderRadius(4),{padding:"4px 3px"}]})},96597:(e,n,t)=>{"use strict";t.d(n,{b:()=>o});var r=t(12584);function i(){var e=(0,r._)(["\n  fragment PageTitleRepl on Repl {\n    id\n    title\n    project {\n      id\n      title\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,t(41114).J1)(i())},96870:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(80817);let i=[r.SymbolKind.Array,r.SymbolKind.Boolean,r.SymbolKind.Class,r.SymbolKind.Constant,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.EnumMember,r.SymbolKind.Event,r.SymbolKind.Field,r.SymbolKind.File,r.SymbolKind.Function,r.SymbolKind.Interface,r.SymbolKind.Key,r.SymbolKind.Method,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Object,r.SymbolKind.Operator,r.SymbolKind.Package,r.SymbolKind.Property,r.SymbolKind.String,r.SymbolKind.Struct,r.SymbolKind.TypeParameter,r.SymbolKind.Variable]},97626:(e,n,t)=>{"use strict";t.d(n,{Ae:()=>i,QH:()=>o,Rl:()=>a});var r=t(17089),i=function(e){var n=e.context;(0,r.u4)(r.AZ.DEPLOYMENT_SECTION_VIEWED,{context:n})},o=function(e,n){(0,r.u4)(r.AZ.DEPLOYMENT_DEBUG_SUMMARY_USED,{action:e,context:n})},a=function(e){(0,r.u4)(r.AZ.DEPLOYMENT_ADD_SECRET_CLICKED,{context:e})}},97802:(e,n,t)=>{"use strict";t.d(n,{h:()=>Y});var r=t(81073),i=t(17844),o=t(12584),a=t(41114),l=t(86997),s=t(56199);function c(){var e=(0,o._)(["\n  query WorkspaceUsageBudget($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          ... on Org {\n            id\n            authorizations {\n              editUsageLimit {\n                isAuthorized\n                message\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,o._)(["\n  query WorkspaceUsageBasedBillingAlerts($orgId: String) {\n    currentUser {\n      id\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          name\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,a.J1)(c()),f=(0,a.J1)(u(),s.B9),h=t(86891),m=t(30166),g=t(18509),v=t(27023),y=t(36073),w=t(85389),b=t(58390),S=(0,g.x)({budgetContainer:[v.wp.colWithGap(8),v.wp.border(),v.wp.borderRadius(8),v.wp.p(8)],budgetContainerBorderless:[v.wp.colWithGap(8),v.wp.p(8)],bannerText:[v.wp.textAlign.left]});function Y(e){var n,t,o,a,s,c,u,g,v,Y,_=e.replId,A=e.onUpdateSuccess,C=e.style,k=(n={variables:{replId:_}},t=(0,i._)({},d,n),l.I(p,t)),x=k.data,D=k.loading,E=k.error,R=(0,h.R)(_).orgId,I=(o={variables:{orgId:R}},a=(0,i._)({},d,o),l.I(f,a)),T=I.data,F=I.loading,P=I.error;if(!x||!T||D||F)return null;if(R?(c=(null==(u=T.currentUser)?void 0:u.org.__typename)==="Org"?null==(g=T.currentUser)?void 0:g.org:void 0,s=(null==(v=T.currentUser)?void 0:v.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===T.currentUser.org.usageBasedBillingAlerts.__typename?T.currentUser.org.usageBasedBillingAlerts:void 0):s=(null==(Y=T.currentUser)?void 0:Y.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?T.currentUser.usageBasedBillingAlerts:void 0,E)return(0,r.Y)(y.N,{css:S.bannerText,colorway:"red",text:E.message,icon:(0,r.Y)(b.A,{})});if(P)return(0,r.Y)(y.N,{css:S.bannerText,colorway:"red",text:P.message,icon:(0,r.Y)(b.A,{})});var L="Repl"===x.getRepl.__typename&&x.getRepl.org?x.getRepl.org:void 0,U=(null==L?void 0:L.authorizations.editUsageLimit.isAuthorized)===!1?L.authorizations.editUsageLimit.message:void 0;return U?(0,r.Y)(y.N,{css:S.bannerText,colorway:"red",text:"".concat(U," Reach out to an org admin to update your usage budget."),icon:(0,r.Y)(b.A,{})}):(0,r.Y)(w.S,{css:"outlined"===(void 0===C?"outlined":C)?S.budgetContainer:S.budgetContainerBorderless,children:(0,r.Y)(m.j,{org:c,initialSettings:s,onDone:function(){return A}})})}},97818:e=>{e.exports={futureCheckpoint:"Session_futureCheckpoint__xkvj3"}},97841:(e,n,t)=>{"use strict";t.d(n,{A:()=>i,q:()=>o});var r={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-pointer-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write; pointer-lock",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true",allowpopups:"true"};let i=r;var o={sandbox:"allow-same-origin allow-presentation allow-pointer-lock allow-scripts",allow:r.allow,allowFullScreen:!1}},97878:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(29935),i=t(82643),o=t(81073),a=t(21462),l=t(96907),s=t.n(l),c=t(1982),u=t(17089),d=t(71424),p=t(79315),f=t(44191),h=t(35563);function m(){var e=(0,d.A)(),n=(0,h.h)(h.bO),t=(0,h.h)(h.hQ),o=(0,h.Ou)(h.hQ),l=(0,h.ob)(h.hQ),m=(0,h.h)(h.E2),g=(0,h.cW)(),v=(0,h.wy)(),y=(0,h.Ff)(),w=(0,h.hq)(),b=(0,c.A)(),S=(0,p.J)().configs,Y=(0,h.ov)();return(0,a.useEffect)(function(){if(0!==S.length){var n=[],t=!1,r=!0,i=!1,a=void 0;try{for(var l,c=S[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)!function(){var r=l.value,i=Promise.resolve(),a=v(r.id),c=s()(function(){var n=v(r.id),a=o();if(n===h.d_.Idle||(null==a?void 0:a.id)!==r.id){var l=(0,f.N)(r.id);i=i.then(function(){if(!t)return l.getInstalledPackages({id:r.id,services:e}).then(function(e){t||(y(r.id,e),g(r.id,h.d_.Idle))})})}},500);if(r.packagerFiles.length>0){var u=!0,d=!1,p=void 0;try{for(var m,w=r.packagerFiles[Symbol.iterator]();!(u=(m=w.next()).done);u=!0)!function(){var t=m.value;if(!t.endsWith("/")){var r=null!==a&&a!==h.d_.Initializing&&a!==h.d_.Uninitialized,i=e.fs.watchFilePath(t,{onChange:function(){if(!r){r=!0;return}c()}});n.push(i)}}()}catch(e){d=!0,p=e}finally{try{u||null==w.return||w.return()}finally{if(d)throw p}}}}()}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return function(){t=!0;var e=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(e=(o=a.next()).done);e=!0)(0,o.value)()}catch(e){r=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}}}},[S,e.fs]),(0,a.useEffect)(function(){var n,t=!1;return(n=(0,r._)(function(){var n,r,o,a,l,s;return(0,i.YH)(this,function(i){n=!0,r=!1,o=void 0;try{for(a=function(){var n=s.value,r=v(n.id);if(r&&r!==h.d_.Uninitialized&&r!==h.d_.Initializing)return"continue";g(n.id,h.d_.Initializing),(0,f.N)(n.id).getInstalledPackages({id:n.id,services:e}).then(function(e){t||(y(n.id,e),g(n.id,h.d_.Idle))})},l=S[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)a()}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return[2]})}),function(){return n.apply(this,arguments)})(),function(){t=!0}},[S]),(0,a.useEffect)(function(){if(null===t&&0!==n.length){var e=n[0];v(e.id)===h.d_.Idle&&w(e)}},[m,t,n]),(0,a.useEffect)(function(){if(null!==t){var n,o=!1;return(n=(0,r._)(function(){var n,r,a,s,c,d,p,m,v,w,S,_,A,C,k,x,D,E;return(0,i.YH)(this,function(i){switch(i.label){case 0:switch(n=(0,f.N)(t.id),t.kind){case h.Vr.Install:return[3,1];case h.Vr.Uninstall:return[3,6]}return[3,11];case 1:g(t.id,h.d_.Installing),r=!0,a=!1,s=void 0;try{for(c=t.pkgs[Symbol.iterator]();!(r=(d=c.next()).done);r=!0)p=d.value,(0,u.u4)(u.AZ.PACKAGE_MANAGER_USED,{action:"installed",packageId:p.name})}catch(e){a=!0,s=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw s}}i.label=2;case 2:return i.trys.push([2,4,,5]),[4,n.install({id:t.id,pkgs:t.pkgs,services:e})];case 3:return i.sent(),1===t.pkgs.length?b.showNotice("Installed ".concat(null!=(m=t.pkgs[0].name)?m:"package")):b.showNotice("Installed ".concat(t.pkgs.length," packages")),[3,5];case 4:return i.sent(),1===t.pkgs.length?b.showError("Failed to install ".concat(null!=(v=t.pkgs[0].name)?v:"package")):b.showError("Failed to install ".concat(t.pkgs.length," packages")),Y(t.id,t.pkgs),[3,5];case 5:return[3,11];case 6:g(t.id,h.d_.Uninstalling),w=!0,S=!1,_=void 0;try{for(A=t.pkgs[Symbol.iterator]();!(w=(C=A.next()).done);w=!0)k=C.value,(0,u.u4)(u.AZ.PACKAGE_MANAGER_USED,{action:"removed",packageId:k.name})}catch(e){S=!0,_=e}finally{try{w||null==A.return||A.return()}finally{if(S)throw _}}i.label=7;case 7:return i.trys.push([7,9,,10]),[4,n.uninstall({id:t.id,pkgs:t.pkgs,services:e})];case 8:return i.sent(),1===t.pkgs.length?b.showNotice("Removed ".concat(null!=(x=t.pkgs[0].name)?x:"package")):b.showNotice("Removed ".concat(t.pkgs.length," packages")),[3,10];case 9:return i.sent(),1===t.pkgs.length?b.showError("Failed to remove ".concat(null!=(D=t.pkgs[0].name)?D:"package")):b.showError("Failed to remove ".concat(t.pkgs.length," packages")),Y(t.id,t.pkgs),[3,10];case 10:return[3,11];case 11:if(o)return[2];return[4,n.getInstalledPackages({id:t.id,services:e})];case 12:if(E=i.sent(),o)return[2];return y(t.id,E),g(t.id,h.d_.Idle),l(null),[2]}})}),function(){return n.apply(this,arguments)})(),function(){o=!0}}},[t]),null}function g(e){var n=e.children,t=(0,h.PY)();return(0,o.FD)(h.tB.Provider,{value:t,children:[(0,o.Y)(m,{}),n]})}},97906:(e,n,t)=>{"use strict";t.d(n,{A:()=>s,L:()=>u});var r=t(12694),i=t(21462),o=t(54682),a=t(95018),l=t(98679);function s(){var e=(0,i.useRef)(0),n=(0,r._)((0,i.useState)(!1),2),t=n[0],l=n[1],s=(0,o.m5)(),u=(0,o.m6)(),d=(0,a.b)();return(0,i.useEffect)(function(){var n,t=window.visualViewport;if(t){if(u)return void l(null!=(n=null==d?void 0:d.isShown)&&n);if(s){var r=function(){l(c({current:t.height,initial:e.current}))};return e.current=t.height,t.addEventListener("resize",r),function(){t.removeEventListener("resize",r)}}}},[s,u,null==d?void 0:d.isShown]),t}function c(e){return e.current<.8*e.initial}function u(e){var n=(0,l.A)(e),t=(0,i.useRef)(0),r=(0,o.m6)();(0,i.useEffect)(function(){if(!r){var e=window.visualViewport;if(e){var i=function(){n.current(c({current:e.height,initial:t.current}))};return t.current=e.height,e.addEventListener("resize",i),function(){e.removeEventListener("resize",i)}}}},[n,r])}},97970:(e,n,t)=>{"use strict";function r(e,n,t,r){var i=t-n;return{start:{x:(n+1)%r.cols,y:e+Math.floor((n+1)/r.cols)},end:{x:(n+i)%r.cols,y:e+Math.floor((n+i)/r.cols)}}}function i(e,n,t){var r,i,o="";do{var a=t.buffer.active.getLine(e);if(!a)break;a.isWrapped&&e--,i=a.isWrapped}while(i);var l=e;do{var s=t.buffer.active.getLine(e+1);r=!!s&&s.isWrapped;var c=t.buffer.active.getLine(e);if(!c)break;o+=c.translateToString(!r&&n).substring(0,t.cols),e++}while(r);return[o,l]}t.d(n,{W:()=>r,z:()=>i})},98151:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var r=t(21462),i=t(98679);function o(e,n){var t=(0,i.A)(e);(0,r.useEffect)(function(){if(null!==n){var e=setTimeout(function(){null!==t.current&&t.current()},n);return function(){return clearTimeout(e)}}},[n,t])}},98398:(e,n,t)=>{"use strict";t.d(n,{Y:()=>d});var r=t(17844),i=t(93629),o=t(17459),a=t(81073),l=t(21462),s=t(46726),c=t(18509),u=t(27023),d=(0,l.forwardRef)(function(e,n){var t=e.children,l=(0,o._)(e,["children"]);return(0,a.Y)(s.Y,(0,i._)((0,r._)({},l),{ref:n,css:p.group,children:t}))}),p=(0,c.x)({group:[u.wp.display.flex,u.wp.flex.row,u.wp.gap(1),u.wp.align.stretch,{"> :not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"> :not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}]})},98414:(e,n,t)=>{"use strict";t.d(n,{y:()=>d});var r=t(81073),i=t(11349),o=t(66890),a=t(37981),l=t(4616),s=t(78626),c=t(85389),u=t(8486);function d(e){var n=e.deployment,t=e.small,d=n.currentBuild,p=a.v[d.status],f=p.title,h=p.color,m=(0,i.A)(new Date(d.timeCreated),Date.now(),{addSuffix:!0}),g="Deployed ".concat(m," by ").concat(d.user.displayName),v=d.status===o.nHS.Success?"Deployed":f;return(0,r.Y)(s.m_,{tooltip:g,children:(0,r.FD)(c.S,{row:!0,gap:4,align:"center",children:[(0,r.Y)(u.A,{size:t?12:16,color:h}),(0,r.Y)(l.EY,{variant:t?"small":void 0,color:"dimmest",multiline:!1,children:v})]})})}},98451:e=>{e.exports={label:"MeasureBarMetric_label__0D149",continuous:"MeasureBarMetric_continuous__Wl0C8",segmented:"MeasureBarMetric_segmented__qI_Pt",container:"MeasureBarMetric_container__3IGkz"}},98829:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M18 3.25a.75.75 0 0 1 .75.75v16a.75.75 0 0 1-1.5 0V4a.75.75 0 0 1 .75-.75Zm-6 6a.75.75 0 0 1 .75.75v10a.75.75 0 0 1-1.5 0V10a.75.75 0 0 1 .75-.75Zm-6 6a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},98913:(e,n,t)=>{"use strict";t.d(n,{N:()=>r});var r=function(e){return e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE",e.Pane="PANE",e.NewPane="NEW_PANE",e}({})},99010:e=>{e.exports={toolDataIcon:"StatusBar_toolDataIcon__Xs56D",pulse:"StatusBar_pulse__rFmar"}},99143:(e,n,t)=>{"use strict";t.d(n,{A:()=>nC});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(96907),s=t.n(l);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.session,t=e.askpass,r=e.author,i=e.committer,o={GIT_AUTHOR_NAME:"",GIT_AUTHOR_EMAIL:"",GIT_COMMITTER_NAME:"",GIT_COMMITTER_EMAIL:"",GIT_ASKPASS:"replit-git-askpass",GIT_PAGER:"",GIT_EDITOR:"",PAGER:"",EDITOR:""};if(void 0!==n&&(o.REPLIT_SESSION=n),void 0!==t&&(o.GIT_ASKPASS=t),r){o.GIT_AUTHOR_NAME=r.username,o.GIT_COMMITTER_NAME=r.username;var a=u(r);o.GIT_AUTHOR_EMAIL=a,o.GIT_COMMITTER_EMAIL=a,i&&(o.GIT_COMMITTER_NAME=i.username,o.GIT_COMMITTER_EMAIL=u(i))}return o}function u(e){if("id"in e)return"".concat(e.id,"-").concat(e.username,"@users.noreply.replit.com");if("email"in e)return e.email;throw Error("Invalid user")}var d=t(91220),p=t(684),f=t(36976),h=t(66241);function m(e,n){return"{ ".concat(e,"; } > /dev/null 2>&1 && echo -n '").concat(n,"' && exit 0")}var g=[m("! git rev-parse --is-inside-work-tree",h.Gi.NOT_INITIALIZED),m('[ "$(! git rev-parse HEAD -- 2>&1)" = "fatal: bad revision \'HEAD\'" ]',h.Gi.ON_UNBORN_BRANCH),m("git rev-parse -q --verify MERGE_HEAD",h.Gi.MERGING),m("[ -d '.git/rebase-apply' ] && [ -f '.git/rebase-apply/applying' ]",h.Gi.APPLYING_MAILBOX),m("[ -d '.git/rebase-apply' ] || [ -d '.git/rebase-merge' ]",h.Gi.REBASING),m("git rev-parse -q --verify REVERT_HEAD",h.Gi.REVERTING),m("git rev-parse -q --verify CHERRY_PICK_HEAD",h.Gi.CHERRY_PICKING),m("[ -f '.git/BISECT_LOG' ]",h.Gi.BISECTING),m("! git symbolic-ref -q HEAD",h.Gi.DETACHED_HEAD),m("[ -f '.git/index.lock' ]",h.Gi.INDEX_LOCKED),"git update-index -q --refresh > /dev/null || exit $?",m('{ ! git diff-files --quiet; } || [ -n "$(git ls-files --others --exclude-standard)" ]',h.Gi.DIRTY_WORKTREE),m("! git diff-index --cached --quiet HEAD --",h.Gi.DIRTY_INDEX),'echo -n "CLEAN"'].join(";");function v(e){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e){var n,t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:return[4,e(g,{serviceMethod:"git-get-repository-state"})];case 1:if((n=i.sent()).error)return[2,n];if(!(n.output in h.Gi))return[2,{error:f.uA.UNKNOWN,extras:{output:n.output}}];return r=function(e){switch(e){case h.Gi.NOT_INITIALIZED:case h.Gi.ON_UNBORN_BRANCH:return h.UN.INITIALIZING;case h.Gi.MERGING:case h.Gi.REBASING:case h.Gi.REVERTING:case h.Gi.CHERRY_PICKING:case h.Gi.APPLYING_MAILBOX:case h.Gi.BISECTING:case h.Gi.INDEX_LOCKED:return h.UN.INTERMEDIATE;case h.Gi.DIRTY_WORKTREE:case h.Gi.DIRTY_INDEX:case h.Gi.CLEAN:return h.UN.NORMAL;case h.Gi.DETACHED_HEAD:return h.UN.DETACHED_HEAD}}(t=n.output),[2,{state:t,type:r,error:null}]}})})).apply(this,arguments)}var w='git commit --allow-empty --no-edit --quiet -m "Initial commit"',b='git add -A && git commit --allow-empty --no-edit --quiet -m "Initial commit"';function S(e){return Y.apply(this,arguments)}function Y(){return(Y=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,d=arguments;return(0,a.YH)(this,function(a){switch(a.label){case 0:return r=void 0===(t=(n=d.length>1&&void 0!==d[1]?d[1]:{}).initialCommit)||t,o=void 0===(i=n.includeAllInitialFiles)||i,[4,v(e)];case 1:if((l=a.sent()).error)return[2,l];if(l.type!==h.UN.INITIALIZING)return[2,{error:f.uA.ALREADY_INITIALIZED}];if(l.state!==h.Gi.ON_UNBORN_BRANCH)return[3,4];if(!r)return[3,3];return[4,e(o?b:w,{serviceMethod:"git-init"})];case 2:if((s=a.sent()).error)return[2,s];a.label=3;case 3:return[2,{error:null}];case 4:return[4,e(["git init --quiet","git checkout --quiet --no-progress -b main"],{serviceMethod:"git-init"})];case 5:if((c=a.sent()).error)return[2,c];if(!r)return[3,7];return[4,e(o?b:w,{serviceMethod:"git-init"})];case 6:if((u=a.sent()).error)return[2,u];a.label=7;case 7:return[2,{error:null}]}})})).apply(this,arguments)}function _(e){return A.apply(this,arguments)}function A(){return(A=(0,r._)(function(e){var n;return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,e("git rev-parse --is-inside-work-tree",{serviceMethod:"git-is-initialized"})];case 1:if((n=t.sent()).error){if(n.error===f.uA.NOT_INITIALIZED)return[2,{initialized:!1,error:null}];return[2,n]}return[2,{initialized:"true"===n.output,error:null}]}})})).apply(this,arguments)}function C(e){return k.apply(this,arguments)}function k(){return(k=(0,r._)(function(e){var n,t=arguments;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];return e.cached&&n.push("--cached"),e.deleted&&n.push("--deleted"),e.modified&&n.push("--modified"),e.others&&n.push("--others"),e.ignored&&n.push("--ignored"),e.directory&&n.push("--directory"),e.noEmptyDirectory&&n.push("--no-empty-directory"),"git ls-files ".concat(n.join(" "))}(t.length>1&&void 0!==t[1]?t[1]:{}),{serviceMethod:"git-ls-files"})];case 1:if((n=r.sent()).error)return[2,n];return[2,{files:n.output.split("\n").filter(function(e){return e.length>0}),error:null}]}})})).apply(this,arguments)}p.ZU.Object({initialCommit:p.ZU.Optional(p.ZU.Boolean()),includeAllInitialFiles:p.ZU.Optional(p.ZU.Boolean())});var x=t(64330),D=t(45287),E="# branch.oid ",R="# branch.head ",I="# branch.upstream ",T="# branch.ab ",F="# stash ",P=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,L=/^([RC])([0-9]+) (.+?)\t(.+)$/,U=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,N=/([RC][0-9]+ .+?)\0(.+?(?:\0|$))/g,O=function(e){return e.ORDINARY="1",e.RENAMED_OR_COPIED="2",e.UNMERGED="u",e.UNTRACKED="?",e.IGNORED="!",e}(O||{});function M(e){return H.apply(this,arguments)}function H(){return(H=(0,r._)(function(e){var n,t,r,o,l,s,c,u,d,p,f,h,m,g,v,y,w,b,S,Y,_,A;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=null,t=null,r=null,o=0,l=[],s=["-z","--porcelain=v2","--branch","--show-stash","--untracked-files=all"],[4,e("git status ".concat(s.join(" ")),{serviceMethod:"git-status"})];case 1:if((c=a.sent()).error)return[2,c];u=c.output.replaceAll(N,"$1	$2"),d=(0,x.jr)(u,"\0"),p=!0,f=!1,h=void 0;try{for(m=d[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)(v=g.value).startsWith("#")?v.startsWith(E)?(y=v.substring(E.length),"(initial)"!==y&&(n=y)):v.startsWith(R)?(w=v.substring(R.length),"(detached)"!==w&&(t=w)):v.startsWith(I)?(b=v.substring(I.length),"(not queried)"!==b&&(r={branch:b,ahead:0,behind:0})):v.startsWith(T)?r&&(Y=(S=(0,i._)(v.substring(T.length).split(" ").map(function(e){return Math.abs(parseInt(e,10))}),2))[0],_=S[1],r.ahead=Y,r.behind=_):v.startsWith(F)&&(o=parseInt(v.substring(F.length),10)):(A=function(e){var n=e[0];switch(e=e.substring(2),n){case"!":default:return null;case"?":return{type:{index:D.PX.UNTRACKED,worktree:D.PX.UNTRACKED},path:e,staged:!1,unmerged:!1};case"u":var t=e.match(U);if(!t)return null;var r=(0,i._)(t,12),o=r[1],a=r[2],l=r[11],s=B(o),c=B(a),u=s!==D.PX.UNMODIFIED;return{type:{index:s,worktree:c},path:l,staged:u,unmerged:!0};case"1":case"2":var d=e.match(P);if(!d)return null;var p=(0,i._)(d,10),f=p[1],h=p[2],m=p[9],g=B(f),v=B(h),y=g!==D.PX.UNMODIFIED;if("1"===n)return{type:{index:g,worktree:v},path:m,staged:y,unmerged:!1};if("2"===n){var w=m.match(L);if(!w)return null;var b=(0,i._)(w,5),S=b[1],Y=b[2],_=b[3],A=b[4];return{type:{index:g,worktree:v},path:_,staged:y,unmerged:!1,source:{type:function(e){switch(e){case"R":default:return D.PX.RENAMED;case"C":return D.PX.COPIED}}(S),score:parseInt(Y,10),path:A}}}return null}}(v),null!==A&&l.push(A))}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}return[2,{commit:n,branch:t,upstream:r,stashes:o,changes:l,error:null}]}})})).apply(this,arguments)}function B(e){switch(e){case".":default:return D.PX.UNMODIFIED;case"M":return D.PX.MODIFIED;case"T":return D.PX.TYPE_CHANGED;case"A":return D.PX.ADDED;case"D":return D.PX.DELETED;case"R":return D.PX.RENAMED;case"C":return D.PX.COPIED;case"U":return D.PX.UNMERGED}}var z=t(91901),W={char:"\0"},G={format:"%x1f",char:"\x1f"},V={format:"%x1e",char:"\x1e"},Z={format:"%x1d",char:"\x1d"},j=["only","separator=".concat(V.format),"key_value_separator=".concat(Z.format)].join(","),q='--format="format:'+["%D","%H","%P","%an","%ae","%at","%cn","%ce","%ct","%s","%b","%(trailers:".concat(j,")"),"%N"].join(G.format)+'"';function K(e){var n=e.trimStart().split(G.char),t=(0,i._)(n,13),r=t[0],o=t[1],a=t[2],l=t[3],s=t[4],c=t[5],u=t[6],d=t[7],p=t[8],f=t[9],h=t[10],m=t[11],g=t[12],v=[],y=a?a.split(" "):null,w=!1,b=!0,S=!1,Y=void 0;try{for(var _,A=(0,x.jr)(r,",")[Symbol.iterator]();!(b=(_=A.next()).done);b=!0){var C=_.value;if("grafted"===C){w=!0;continue}v.push((0,z.T)(C))}}catch(e){S=!0,Y=e}finally{try{b||null==A.return||A.return()}finally{if(S)throw Y}}var k={name:l,email:s,date:1e3*parseInt(c,10)},D={name:u,email:d,date:1e3*parseInt(p,10)},E=f?f.trim():"",R=h?h.trim():"",I=!1,T=Object.fromEntries((0,x.jr)(m,V.char).map(function(e){var n=e.indexOf(Z.char),t=-1===n?e:e.slice(0,n),r=-1===n?"":e.slice(n+1);if(R&&!I){I=!0;var i=R.lastIndexOf(t+":");-1!==(i=-1===i?R.lastIndexOf(t+"="):i)&&(R=R.slice(0,i).trim())}return[t,(0,x.Ps)(r)]})),F=g&&""!==g.trim()?g.trim():void 0;return{refs:v,hash:o,parents:y,grafted:w,author:k,committer:D,subject:E,body:R,trailers:T,notes:F}}function $(e){return J.apply(this,arguments)}function J(){return(J=(0,r._)(function(e){var n,t=arguments;return(0,a.YH)(this,function(r){switch(r.label){case 0:var i,o,a,l,s,c,u;return[4,e((a=void 0===(o=(i=t.length>1&&void 0!==t[1]?t[1]:{}).max)?25:o,l=i.skip,s=i.revRange,c=i.path,u=["-z","--decorate=full","--full-history",q],a=Math.max(1,Math.min(a,200)),u.push("-n ".concat(a)),l&&u.push("--skip ".concat(l)),s&&u.push(s),u.push("--"),c&&u.push(c),"git log ".concat(u.join(" "))),{serviceMethod:"git-log"})];case 1:if((n=r.sent()).error){if(n.error===f.uA.NO_COMMITS)return[2,{commits:[],error:null}];return[2,n]}return[2,{commits:(0,x.jr)(n.output,W.char).map(K),error:null}]}})})).apply(this,arguments)}p.ZU.Object({max:p.ZU.Optional(p.ZU.Integer()),skip:p.ZU.Optional(p.ZU.Integer()),revRange:p.ZU.Optional(p.ZU.String()),path:p.ZU.Optional(p.ZU.String())});var Q=["main","master","trunk","dev","develop","development","staging","prod","production"].map(function(e){return'if [ $(git rev-parse --verify --quiet "heads/'.concat(e,'") ]; then\n      echo "refs/heads/').concat(e,'"\n    fi')}).join("\n"),X='\ngit remote | while IFS= read -r remote; do\n  if [ -z "$remote" ]; then continue; fi\n  branch="$('.concat('\nif [ -f ".git/refs/remotes/$remote/HEAD" ]; then\n  echo "$(sed -e "s/^ref: refs\\/remotes\\/$remote\\///" < .git/refs/remotes/$remote/HEAD)"\nelse\n  remote_result="$(git ls-remote --symref "$remote" HEAD)"\n  if [ -z "$remote_result" ]; then\n    echo ""\n  else\n    branch_name="$(\n      echo "$remote_result" | \\\n      head -1 | \\\n      awk \'{print $2}\' | \\\n      sed -e "s/^refs\\/heads\\///"\n    )"\n    git remote set-head "$remote" "$branch_name" >&2\n    echo "$branch_name"\n  fi\nfi\n'.trim(),')"\n  if [ -z "$branch" ]; then continue; fi\n  echo "refs/remotes/$remote/$branch"\n  if [ $(git rev-parse --verify --quiet "heads/$branch") ]; then\n    echo "refs/heads/$branch"\n  fi\ndone\n').concat(Q,"\n").trim();function ee(e){return en.apply(this,arguments)}function en(){return(en=(0,r._)(function(e){var n;return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,e(X,{serviceMethod:"git-find-default-branches"})];case 1:if((n=t.sent()).error)return[2,n];return[2,{refs:(0,o._)(new Set((0,x.jr)(n.output,"\n"))).map(function(e){return(0,z.T)(e)}),error:null}]}})})).apply(this,arguments)}var et=t(87562);function er(e,n){return ei.apply(this,arguments)}function ei(){return(ei=(0,r._)(function(e,n){var t,r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:return t=n.upstream,r=n.branchName,i=["--set-upstream-to",t],r&&i.push((0,x.hh)(r)),[4,e("git branch ".concat(i.join(" ")),{serviceMethod:"git-set-branch-upstream"})];case 1:if((o=a.sent()).error)return[2,o];return[2,{error:null}]}})})).apply(this,arguments)}function eo(e,n){return ea.apply(this,arguments)}function ea(){return(ea=(0,r._)(function(e,n){var t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:if(!(t=function(e){if("all"in e)return e.all?["git add -A"]:["git reset -q -- ."];var n=e.add,t=e.reset;if(!(null==n?void 0:n.length)&&!(null==t?void 0:t.length))return null;var r=[];if(n){var i=n.map(x.hh).join(" ");r.push("git --literal-pathspecs add -- ".concat(i))}if(t){var o=t.map(x.hh).join(" ");r.push("git --literal-pathspecs reset -q -- ".concat(o))}return r}(n)))return[2,{error:null}];return[4,e(t,{serviceMethod:"git-stage-files"})];case 1:if((r=i.sent()).error)return[2,r];return[2,{error:null}]}})})).apply(this,arguments)}function el(e,n){return es.apply(this,arguments)}function es(){return(es=(0,r._)(function(e,n){var t,r;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,e(function(e){var n=e.message,t=e.trailers,r=e.files,a=e.allowEmpty,l=e.noVerify,s=["--allow-empty-message","--cleanup=whitespace","--no-edit","--quiet","-m ".concat((0,x.hh)(n))];if(t){var c=!0,u=!1,d=void 0;try{for(var p,f=Object.entries(t)[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=(0,i._)(p.value,2),m=h[0],g=h[1],v=(0,x.hh)("".concat(m,":").concat((0,x.dO)(g)));s.push("--trailer ".concat(v))}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}return(void 0===a||a)&&s.push("--allow-empty"),(void 0===l||l)&&s.push("--no-verify"),r&&s.push.apply(s,["--only","--"].concat((0,o._)(r.map(x.hh)))),"git --literal-pathspecs commit ".concat(s.join(" "))}(n),{serviceMethod:"git-commit"})];case 1:if((t=a.sent()).error)return[2,t];return[4,e("git rev-parse HEAD",{serviceMethod:"git-commit"})];case 2:if((r=a.sent()).error)return[2,r];return[2,{hash:r.output,error:null}]}})})).apply(this,arguments)}p.ZU.Union([p.ZU.Object({all:p.ZU.Boolean()}),p.ZU.Object({add:p.ZU.Optional(p.ZU.Array(p.ZU.String())),reset:p.ZU.Optional(p.ZU.Array(p.ZU.String()))})]),p.ZU.Object({message:p.ZU.String(),trailers:p.ZU.Optional(p.ZU.Record(p.ZU.String(),p.ZU.String())),noVerify:p.ZU.Optional(p.ZU.Boolean()),files:p.ZU.Optional(p.ZU.Array(p.ZU.String())),allowEmpty:p.ZU.Optional(p.ZU.Boolean())});var ec=t(17844),eu=t(46953),ed=t(52531);function ep(e,n){return ef.apply(this,arguments)}function ef(){return(ef=(0,r._)(function(e,n){var t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=(n=(0,eu.fn)(n)).startsWith("refs/heads/"),r=n.startsWith("refs/remotes/"),t)return[3,2];return i=r?n:"refs/remotes/".concat(n),[4,e("git show-ref --verify ".concat(i),{serviceMethod:"git-branch-exists"})];case 1:if(!(o=a.sent()).error)return[2,{exists:!0,ref:(0,z.T)(i),error:null}];if(o.error!==f.uA.INVALID_REFERENCE)return[2,o];a.label=2;case 2:if(r)return[3,4];return l=t?n:"refs/heads/".concat(n),[4,e("git show-ref --verify ".concat(l),{serviceMethod:"git-branch-exists"})];case 3:if(!(s=a.sent()).error)return[2,{exists:!0,ref:(0,z.T)(l),error:null}];if(s.error!==f.uA.INVALID_REFERENCE)return[2,s];a.label=4;case 4:return[2,{exists:!1,ref:null,error:null}]}})})).apply(this,arguments)}function eh(){return(eh=(0,r._)(function(e,n){var t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:return t=["--quiet"],n.guess||t.push("--no-guess"),(n.newBranch&&void 0===n.track||n.track)&&t.push("--track"),n.force&&t.push("-f"),n.newBranch&&t.push("-b",n.newBranch),t.push((0,x.hh)(n.branchRef.name),"--"),[4,e("git checkout ".concat(t.join(" ")),{serviceMethod:"git-checkout"})];case 1:if((r=i.sent()).error)return[2,r];return[2,{ok:!0,error:null}]}})})).apply(this,arguments)}function em(e,n){return eg.apply(this,arguments)}function eg(){return(eg=(0,r._)(function(e,n){var t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,ep(e,n=(0,eu.fn)(n,!0))];case 1:if((t=a.sent()).error)return[2,t];if(!t.exists)return[2,{error:f.uA.INVALID_REFERENCE,extras:{branch:n}}];if(r={guess:!1},t.ref.type!==ed.QN.REMOTE_BRANCH)return[3,3];return o=t.ref.branch,[4,ep(e,"refs/heads/".concat(o))];case 2:if((l=a.sent()).error)return[2,l];return l.exists?i=l.ref:(r.track=!0,r.newBranch=o,i=t.ref),[3,4];case 3:i=t.ref,a.label=4;case 4:return[2,function(e,n){return eh.apply(this,arguments)}(e,(0,ec._)({branchRef:i},r))]}})})).apply(this,arguments)}function ev(e,n){return ey.apply(this,arguments)}function ey(){return(ey=(0,r._)(function(e,n){var t,r,i,o,l,s,c,u,d,p,h;return(0,a.YH)(this,function(a){switch(a.label){case 0:return t=n.name,i=void 0===(r=n.startPoint)?"HEAD":r,o=n.track,s=void 0!==(l=n.checkout)&&l,[4,ep(e,t=(0,x.w9)(t))];case 1:if((c=a.sent()).error)return[2,c];if(c.exists)return[2,{error:f.uA.BRANCH_ALREADY_EXISTS,extras:{branch:t}}];if("HEAD"===i){if(!0===o)return[2,{error:f.uA.INVALID_REFERENCE,extras:{branch:t}}];o=!1}if(!1===o)return[3,3];return[4,ep(e,i)];case 2:if((u=a.sent()).error)return[2,u];if(!u.exists&&!0===o)return[2,{error:f.uA.INVALID_REFERENCE,extras:{branch:t}}];u.exists&&u.ref.type===ed.QN.REMOTE_BRANCH&&void 0===o&&(o=!0),a.label=3;case 3:return d=["--quiet",o?"--track":"--no-track",(0,x.hh)(t),(0,x.hh)(i)],[4,e("git branch ".concat(d.join(" ")),{serviceMethod:"git-create-branch"})];case 4:if((p=a.sent()).error)return[2,p];if(!s)return[3,6];return[4,em(e,t)];case 5:if((h=a.sent()).error)return[2,h];a.label=6;case 6:return[2,{error:null}]}})})).apply(this,arguments)}function ew(e){return eb.apply(this,arguments)}function eb(){return(eb=(0,r._)(function(e){var n,t,r,o,l,s,c,u,d,p,f,h,m,g;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,e("git remote -v",{serviceMethod:"git-get-remotes"})];case 1:if((n=a.sent()).error)return[2,n];if(""===n.output)return[2,{remotes:new Map,error:null}];t=new Map,r=!0,o=!1,l=void 0;try{for(s=(0,x.jr)(n.output,"\n")[Symbol.iterator]();!(r=(c=s.next()).done);r=!0)u=c.value,p=(d=(0,i._)(u.split(/\s+/),3))[0],f=d[1],h=d[2],p&&f&&h&&(g=null!=(m=t.get(p))?m:{name:p,fetch:"",push:""},"(fetch)"===h?(g.fetch=f,""===g.push&&(g.push=f),t.set(p,g)):"(push)"===h&&(g.push=f,""===g.fetch&&(g.fetch=f),t.set(p,g)))}catch(e){o=!0,l=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw l}}return[2,{remotes:t,error:null}]}})})).apply(this,arguments)}function eS(e){return eY.apply(this,arguments)}function eY(){return(eY=(0,r._)(function(e){var n,t,r,i,l,s=arguments;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t=["--quiet"],n.depth&&(r=n.deepen?"--deepen":"--depth",t.push("".concat(r,"=").concat(n.depth))),n.remote?t.push((0,x.hh)(n.remote)):t.push("--all"),!1===n.tags&&t.push("--no-tags"),n.refs&&n.refs.length>0&&(i=t).push.apply(i,(0,o._)(n.refs)),[4,e("git fetch ".concat(t.join(" ")),{serviceMethod:"git-fetch"})];case 1:if((l=a.sent()).error)return[2,l];return[2,{error:null}]}})})).apply(this,arguments)}function e_(e,n,t){return eA.apply(this,arguments)}function eA(){return(eA=(0,r._)(function(e,n,t){var r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:if((0,eu.CC)(n,t)){if(n=(0,eu.qK)(n,!0),t=(0,eu.qK)(t),n===t)return[2,{canMerge:!0,error:null}]}else n=(0,eu.qK)(n),t=(0,eu.qK)(t);return n=(0,x.hh)(n),t=(0,x.hh)(t),r="git merge-base ".concat(n," ").concat(t),i='git merge-tree "$('.concat(r,')" ').concat(n," ").concat(t),[4,e("set -eo pipefail; (".concat(i," | ").concat("( (grep -q -e '^+<* \\.our$' && echo '1') || echo '0')",") || test $? -eq 141"),{serviceMethod:"git-can-merge-branches"})];case 1:if((o=a.sent()).error)return[2,o];return[2,{canMerge:"0"===o.output,error:null}]}})})).apply(this,arguments)}function eC(e){return ek.apply(this,arguments)}function ek(){return(ek=(0,r._)(function(e){var n,t,r,o,l,s,c,u,d,p=arguments;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:{},[4,M(e)];case 1:if((t=a.sent()).error)return[2,t];if(!t.branch)return[2,{error:f.uA.HEAD_DETACHED}];if(!t.upstream&&!n.experimental_override_remote||(o=(r=(0,i._)(n.experimental_override_remote?[n.experimental_override_remote.name,n.experimental_override_remote.branch]:(0,x.xM)(t.upstream.branch),2))[0],l=r[1],!o||!l))return[2,{error:f.uA.UPSTREAM_NOT_SET}];if(t.changes.length>0)return[2,{error:f.uA.DIRTY_WORKTREE}];if("FF_ONLY"===(c=null!=(s=n.mode)?s:"FF_ONLY")&&t.upstream&&t.upstream.ahead>0)return[2,{error:f.uA.MERGE_CONFLICT}];switch("FF_ONLY"!==c&&t.upstream&&0===t.upstream.ahead&&(c="FF_ONLY"),u=["--quiet","--no-edit"],c){case"FF_ONLY":u.push("--no-rebase","--ff-only");break;case"MERGE":u.push("--no-rebase","--ff");break;case"REBASE":u.push("--rebase")}return u.push((0,x.hh)(o),(0,x.hh)(l)),[4,e("git pull ".concat(u.join(" ")),{serviceMethod:"git-pull"})];case 2:if((d=a.sent()).error!==f.uA.MERGE_CONFLICT)return[3,8];if(n.allowConflicts)return[2,{hasConflicts:!0,error:null}];switch(c){case"MERGE":return[3,3];case"REBASE":return[3,5]}return[3,7];case 3:return[4,e("git merge --abort",{serviceMethod:"git-pull"})];case 4:case 6:return a.sent(),[3,7];case 5:return[4,e("git rebase --abort",{serviceMethod:"git-pull"})];case 7:return[2,d];case 8:if(d.error)return[2,d];return[2,{hasConflicts:!1,error:null}]}})})).apply(this,arguments)}function ex(e){return eD.apply(this,arguments)}function eD(){return(eD=(0,r._)(function(e){var n,t,r,o,l,s,c,u,d,p,h,m=arguments;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=m.length>1&&void 0!==m[1]?m[1]:{},[4,M(e)];case 1:if((t=a.sent()).error)return[2,t];if(!t.branch)return[2,{error:f.uA.HEAD_DETACHED}];if(r=null,o=null,n.publish){if(t.upstream)return[2,{error:f.uA.BRANCH_ALREADY_EXISTS,extras:{branch:t.upstream}}];r=n.publish.remote,o=null!=(l=n.publish.name)?l:t.branch,r=(0,x.w9)(r),o=(0,x.w9)(o)}else{if(!t.upstream)return[2,{error:f.uA.UPSTREAM_NOT_SET}];if(!n.force&&t.upstream.behind>0)return[2,{error:f.uA.PUSH_REJECTED}];r=(s=(0,i._)((0,x.xM)(t.upstream.branch),2))[0],o=s[1]}if(!r||!o)return[2,{error:f.uA.UPSTREAM_NOT_SET}];if(n.force)return[3,3];return[4,eS(e,{remote:r})];case 2:if((c=a.sent()).error)return[2,c];a.label=3;case 3:if(!n.publish)return[3,5];return[4,ep(e,"refs/remotes/".concat(r,"/").concat(o))];case 4:if((u=a.sent()).error)return[2,u];if(u.exists&&u.ref.type===ed.QN.REMOTE_BRANCH)return[2,{error:f.uA.BRANCH_ALREADY_EXISTS,extras:{branch:o}}];a.label=5;case 5:return d=["--quiet"],n.force&&!n.publish&&d.push("--force-with-lease"),n.publish&&d.push("--set-upstream"),p="refs/heads/".concat(t.branch,":refs/heads/").concat(o),d.push((0,x.hh)(r),(0,x.hh)(p)),[4,e("git push ".concat(d.join(" ")),{serviceMethod:"git-push"})];case 6:if((h=a.sent()).error)return[2,h];return[2,{error:null}]}})})).apply(this,arguments)}function eE(e,n){return eR.apply(this,arguments)}function eR(){return(eR=(0,r._)(function(e,n){var t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=n.path,r=n.convertToBase64,o=void 0===(i=n.revision)?"HEAD":i,""===t)return[2,{content:null,error:null}];return l=(0,x.hh)("".concat(o,":").concat(t)),[4,e(r?"git --no-pager show ".concat(l," | base64"):"git --no-pager show ".concat(l),{verbatim:!0,serviceMethod:"git-get-file-contents"})];case 1:if((s=a.sent()).error){if(s.error===f.uA.PATH_MATCHED_NO_FILES)return[2,{content:null,error:null}];return[2,s]}return[2,{content:s.output,error:null}]}})})).apply(this,arguments)}function eI(e,n){return eT.apply(this,arguments)}function eT(){return(eT=(0,r._)(function(e,n){var t,r,i,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=n.name,r=n.url,l=void 0!==(i=n.fetch)&&i,t=(0,x.K1)(t),!(0,eu.em)(t))return[2,{error:f.uA.INVALID_REFERENCE,extras:{remote:t}}];return t=(0,x.hh)(t),r=(0,x.hh)(r),[4,e(["git remote add"].concat((0,o._)(l?["-f"]:[]),[t,r]).join(" "),{serviceMethod:"git-add-remote"})];case 1:if((s=a.sent()).error)return[2,s];return[2,{didFetch:s.output.includes("Updating"),error:null}]}})})).apply(this,arguments)}function eF(e,n){return eP.apply(this,arguments)}function eP(){return(eP=(0,r._)(function(e,n){var t;return(0,a.YH)(this,function(r){switch(r.label){case 0:if(n=(0,x.K1)(n),!(0,eu.em)(n))return[2,{error:f.uA.INVALID_REFERENCE,extras:{remote:n}}];return[4,e("git remote rm ".concat((0,x.hh)(n)),{serviceMethod:"git-remove-remote"})];case 1:if((t=r.sent()).error)return[2,t];return[2,{error:null}]}})})).apply(this,arguments)}function eL(e,n){return eU.apply(this,arguments)}function eU(){return(eU=(0,r._)(function(e,n){var t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:if(t=n.remote,r=n.url,t=(0,x.K1)(t),!(0,eu.em)(t))return[2,{error:f.uA.INVALID_REFERENCE,extras:{remote:t}}];if(!(0,eu.C2)(r))return[2,{error:f.uA.INVALID_REFERENCE,extras:{url:r}}];return t=(0,x.hh)(t),r=(0,x.hh)(r),[4,e("git remote set-url ".concat(t," ").concat(r),{serviceMethod:"git-set-remote-url"})];case 1:if((i=o.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}p.ZU.Object({branchRef:p.ZU.Union([ed.VH,ed.$5]),guess:p.ZU.Optional(p.ZU.Boolean()),newBranch:p.ZU.Optional(p.ZU.String()),track:p.ZU.Optional(p.ZU.Boolean()),force:p.ZU.Optional(p.ZU.Boolean())}),p.ZU.Object({remote:p.ZU.Optional(p.ZU.String()),depth:p.ZU.Optional(p.ZU.Number()),deepen:p.ZU.Optional(p.ZU.Boolean()),tags:p.ZU.Optional(p.ZU.Boolean()),refs:p.ZU.Optional(p.ZU.Array(p.ZU.String()))});var eN=t(82637);function eO(e,n){return eM.apply(this,arguments)}function eM(){return(eM=(0,r._)(function(e,n){var t,r,o,l,s,c,u,d,p,h,m,g;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(n=(0,eu.qK)(n,!0),!(0,eu.eB)(n))return[2,{error:f.uA.INVALID_REFERENCE,extras:{branch:n}}];return t=(0,x.w9)(n),o=(r=(0,i._)((0,x.xM)(n),2))[0],l=r[1],s=["refs/heads/".concat(t),"refs/remotes/*/".concat(t)],o&&l&&(s.push("refs/heads/".concat(l)),s.push("refs/remotes/".concat(o,"/").concat(l))),[4,(0,et.A)(e,{pattern:s})];case 1:if((c=a.sent()).error)return[2,c];if(0===c.branches.length)return[2,{error:f.uA.INVALID_REFERENCE,extras:{branch:n}}];u=!0,d=!1,p=void 0;try{for(h=c.branches[Symbol.iterator]();!(u=(m=h.next()).done);u=!0)if((g=m.value).type!==eN.xx.REMOTE&&g.name===t||o&&l&&g.type!==eN.xx.LOCAL&&g.remote===o&&g.name===l)return[2,{branch:g,error:null}]}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return[2,{error:f.uA.INVALID_REFERENCE,extras:{branch:n}}]}})})).apply(this,arguments)}function eH(e,n,t){return eB.apply(this,arguments)}function eB(){return(eB=(0,r._)(function(e,n,t){var r,i,o,l,s,c,u,d,p,f,h,m,g,v,y;return(0,a.YH)(this,function(a){switch(a.label){case 0:if("string"==typeof n){if(""===n)return[2,{error:null}];n=[n]}if(!0!==n&&0===n.length)return[2,{error:null}];if(void 0===t)return[3,2];return r=["--quiet","--no-overlay","--worktree","--source=".concat(t),!0===n?".":"-- ".concat(n.join(" "))],[4,e("git --literal-pathspecs restore ".concat(r.join(" ")),{serviceMethod:"git-restore-files"})];case 1:if((i=a.sent()).error)return[2,i];return[2,{error:null}];case 2:return[4,M(e)];case 3:if((o=a.sent()).error)return[2,o];l=[],s=[],c=!0,u=!1,d=void 0;try{for(p=o.changes[Symbol.iterator]();!(c=(f=p.next()).done);c=!0)if(h=f.value,!0===n||n.includes(h.path))switch(h.type.worktree){case D.PX.UNMODIFIED:continue;case D.PX.UNTRACKED:l.push((0,x.hh)(h.path));break;default:s.push((0,x.hh)(h.path))}}catch(e){u=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}if(0===l.length&&0===s.length&&void 0===t)return[2,{error:null}];return m=[],l.length&&(g=["--quiet","--force","--",l.join(" ")],m.push("git --literal-pathspecs clean ".concat(g.join(" ")))),s.length&&(v=["--quiet","--no-overlay","--worktree","-- ".concat(s.join(" "))],m.push("git --literal-pathspecs restore ".concat(v.join(" ")))),[4,e(m,{serviceMethod:"git-restore-files"})];case 4:if((y=a.sent()).error)return[2,y];return[2,{error:null}]}})})).apply(this,arguments)}function ez(e){return eW.apply(this,arguments)}function eW(){return(eW=(0,r._)(function(e){var n,t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e("if [ -f '.git/FETCH_HEAD' ]; then stat -c %Y '.git/FETCH_HEAD'; fi",{serviceMethod:"git-last-fetched"})];case 1:if((n=r.sent()).error)return[2,n];if(!n.output||isNaN(t=parseInt(n.output,10)))return[2,{lastFetched:null,error:null}];return[2,{lastFetched:new Date(t*=1e3),error:null}]}})})).apply(this,arguments)}function eG(e,n){return eV.apply(this,arguments)}function eV(){return(eV=(0,r._)(function(e,n){var t,r,i,o,l,s,c,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:return t=n.branch,r=n.message,o=void 0!==(i=n.allowConflicts)&&i,[4,v(e)];case 1:if((l=a.sent()).error)return[2,l];if(s=l.state,l.type!==h.UN.NORMAL||s===h.Gi.DIRTY_WORKTREE||s===h.Gi.DIRTY_INDEX)return[2,{error:f.uA.INVALID_STATE,extras:{state:s,expected:[h.UN.NORMAL]}}];return[4,ep(e,t)];case 2:if((c=a.sent()).error)return[2,c];if(!c.exists)return[2,{error:f.uA.INVALID_REFERENCE,extras:{branch:t}}];if(o)return[3,4];return[4,e_(e,t,"HEAD")];case 3:if((u=a.sent()).error)return[2,u];if(!u.canMerge)return[2,{error:f.uA.MERGE_CONFLICT}];a.label=4;case 4:var p,m,g,y;return m=(p={branch:t,message:r}).branch,g=p.message,m=(0,eu.fn)(m),y=["--quiet","--no-edit","--no-ff","--overwrite-ignore","--commit"],g&&y.push("-m",(0,x.hh)(g)),y.push((0,x.hh)(m)),[4,e("git merge ".concat(y.join(" ")),{serviceMethod:"git-merge"})];case 5:if((d=a.sent()).error!==f.uA.MERGE_CONFLICT)return[3,8];if(o)return[3,7];return[4,e("git merge --abort")];case 6:return a.sent(),[2,d];case 7:return[2,{hasConflicts:!0,error:null}];case 8:if(d.error)return[2,d];return[2,{hasConflicts:!1,error:null}]}})})).apply(this,arguments)}function eZ(e){return ej.apply(this,arguments)}function ej(){return(ej=(0,r._)(function(e){var n;return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,e("GIT_EDITOR=/bin/true git merge --continue",{serviceMethod:"git-merge-continue"})];case 1:if((n=t.sent()).error)return[2,n];return[2,{error:null}]}})})).apply(this,arguments)}function eq(e){return eK.apply(this,arguments)}function eK(){return(eK=(0,r._)(function(e){var n;return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,e("git merge --abort",{serviceMethod:"git-merge-abort"})];case 1:if((n=t.sent()).error)return[2,n];return[2,{error:null}]}})})).apply(this,arguments)}var e$=["git diff -z --name-only --diff-filter=U","echo -n ".concat("\x1f"),"{ git grep -z -l -E '<{7,}|={7,}|>{7,}' || exit $(( $? == 1 ? 0 : $? )); }"].join(" && ");function eJ(e){return eQ.apply(this,arguments)}function eQ(){return(eQ=(0,r._)(function(e){var n,t,r,o,l,s,c,u,d,p,f;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,e(e$,{serviceMethod:"git-get-conflicting-files"})];case 1:if((n=a.sent()).error)return[2,n];if(r=(t=(0,i._)(n.output.split("\x1f").map(function(e){return(0,x.jr)(e,"\0")}),2))[0],o=t[1],!r.length)return[2,{files:new Map,error:null}];l=new Map,s=!0,c=!1,u=void 0;try{for(d=r[Symbol.iterator]();!(s=(p=d.next()).done);s=!0)f=p.value,l.set(f,!o.includes(f))}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}return[2,{files:l,error:null}]}})})).apply(this,arguments)}function eX(e){return e0.apply(this,arguments)}function e0(){return(e0=(0,r._)(function(e){var n,t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,v(e)];case 1:if((n=a.sent()).error)return[2,n];if((t=n.state)!==h.Gi.MERGING)return[2,{error:f.uA.INVALID_STATE,extras:{state:t,expected:[h.Gi.MERGING]}}];return[4,e("cat '.git/MERGE_HEAD'",{serviceMethod:"git-get-merging-refs"})];case 2:if((r=a.sent()).error)return[2,r];if(!(i=(0,x.jr)(r.output,"\n")).length)return[2,{commits:[],branches:[],error:null}];return o="{ grep -F '".concat(i.join("\n"),"' || exit 0; }"),[4,e("".concat('git for-each-ref --format="%(objectname)	%(refname)" refs/heads/ refs/remotes/'," | ").concat(o),{serviceMethod:"git-get-merging-refs"})];case 3:if((l=a.sent()).error)return[2,l];if(!l.output)return[2,{commits:i,branches:[],error:null}];return s=(0,x.jr)(l.output,"\n").map(function(e){return e.split("	")[1]}).map(x.w9),[2,{commits:i,branches:s,error:null}]}})})).apply(this,arguments)}var e1=t(27077),e2=t(93629);function e4(e,n){return e5.apply(this,arguments)}function e5(){return(e5=(0,r._)(function(e,n){var t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:if(!n.commit)return[2,{error:f.uA.INVALID_REFERENCE,extras:{commit:n.commit}}];return[4,$(e,{max:1,revRange:n.commit})];case 1:if((t=i.sent()).error)return[2,t];if(0===t.commits.length)return[2,{error:f.uA.INVALID_REFERENCE,extras:{commit:n.commit}}];return r=t.commits[0],[2,(0,e2._)((0,ec._)({},r),{error:null})]}})})).apply(this,arguments)}p.ZU.Object({commit:p.ZU.String()});var e3=t(82529),e7=t(59369),e6=/(?:(?:[ADMTU]\0[^\0]+?)|(?:[RC][0-9]+\0[^\0]+?\0[^\0]+?))(?=\0|$)/g,e8=/([ACDMRTU])([0-9]+)?\0([^\0]+?)(?:\0([^\0]+?))?$/;function e9(e,n){return ne.apply(this,arguments)}function ne(){return(ne=(0,r._)(function(e,n){var t,r,o,l,s,c,u,d,p,f,h,m,g,v,y;return(0,a.YH)(this,function(a){switch(a.label){case 0:return t="".concat((0,x.hh)(n.a)," ").concat((0,x.hh)(n.b)),r=["--name-status","-z","-M"],n.copies&&r.push("-C","-C"),[4,e("git diff ".concat(r.join(" ")," ").concat(t))];case 1:if((o=a.sent()).error)return[2,o];l=[],s=!0,c=!1,u=void 0;try{for(d=o.output.matchAll(e6)[Symbol.iterator]();!(s=(p=d.next()).done);s=!0)(f=(0,i._)(p.value,1)[0].match(e8))&&(m=(h=(0,i._)(f,5))[1],g=h[3],v=h[4],y=function(e){switch(e){case"A":case"U":return e7.Os.ADDED;case"C":return e7.Os.COPIED;case"D":return e7.Os.DELETED;case"M":return e7.Os.MODIFIED;case"R":return e7.Os.RENAMED;case"T":return e7.Os.TYPE_CHANGED;default:throw Error("Unknown file type: ".concat(e))}}(m),l.push(y===e7.Os.RENAMED||y===e7.Os.COPIED?{type:y,path:v,originalPath:g}:{type:y,path:g}))}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}return[2,{files:l,error:null}]}})})).apply(this,arguments)}p.ZU.Object({a:p.ZU.String(),b:p.ZU.String(),copies:p.ZU.Optional(p.ZU.Boolean())});var nn=t(6164),nt=t(74671),nr=t(12584),ni=t(41114);function no(){var e=(0,nr._)(["\n  fragment GitServiceGitHubUser on CurrentUser {\n    image\n    username\n    email\n    firstName\n    lastName\n    gitHubInfo {\n      isAppCurrentlyInstalled\n      accessToken\n      userInfo {\n        name\n        username\n        email\n        avatarUrl\n      }\n    }\n  }\n"]);return no=function(){return e},e}function na(){var e=(0,nr._)(["\n  query GitServiceCurrentUser {\n    currentUser {\n      id\n      ...GitServiceGitHubUser\n    }\n  }\n  ","\n"]);return na=function(){return e},e}var nl=(0,ni.J1)(no()),ns=(0,ni.J1)(na(),nl),nc=t(81869),nu=t(13601);function nd(e){return np.apply(this,arguments)}function np(){return(np=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,p,f,h,m,g,v,y,w,b,S,Y,_,A;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.defaultUsername,t=e.defaultUserId,r=e.onProfiles,l=new Map,[4,null===nc.V||void 0===nc.V?void 0:nc.V.query({query:ns,fetchPolicy:"network-only",context:{noBatch:!0}})];case 1:var C,k;return f=(p=null!=(u=null==(c=(null!=(s=a.sent())?s:{data:null}).data)?void 0:c.currentUser)?u:{username:n,id:t,firstName:null,lastName:null}).id,h=p.firstName,m=p.lastName,g=p.username,f&&g&&(y=g,h&&(y=h),m&&(y=m),h&&m&&(y=h+" "+m),b={provider:d.H.REPLIT_DEFAULT,email:"".concat(f,"-").concat(g,"@").concat(nu.O),name:y,username:g,avatar:null!=(w=null==c||null==(v=c.currentUser)?void 0:v.image)?w:null},l.set(b.provider,b)),(S=null==c||null==(o=c.currentUser)||null==(i=o.gitHubInfo)?void 0:i.userInfo)&&S.email&&S.username&&(null==c||null==(k=c.currentUser)||null==(C=k.gitHubInfo)?void 0:C.isAppCurrentlyInstalled)&&(A={provider:d.H.GITHUB,email:S.email,name:null!=(Y=S.name)?Y:S.username,username:S.username,avatar:null!=(_=S.avatarUrl)?_:null},l.set(A.provider,A)),r(l),[2]}})})).apply(this,arguments)}var nf=t(37743),nh=t(90629),nm=t(74645),ng=t(26072),nv=t(37872),ny=function(){function e(n,t){(0,nf._)(this,e),this.cache=new Map,this.lastInvalidation=0,this.ttl=n,this.debounceTime=t}var n=e.prototype;return n.has=function(e){return this.cache.has(e)},n.get=function(e){var n=this.cache.get(e);if(!n)throw Error("No value found for key: ".concat(e));return n.result},n.set=function(e,n){var t=this,r=this.cache.get(e);r&&(clearTimeout(r.timeout),this.cache.delete(e));var i={result:n,timeout:setTimeout(function(){return t.cache.delete(e)},this.ttl),pending:!0};n.finally(function(){return i.pending=!1}),this.cache.set(e,i)},n.invalidate=function(){if(!(Date.now()-this.lastInvalidation<this.debounceTime)){var e=new Map,n=!0,t=!1,r=void 0;try{for(var o,a=this.cache[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,i._)(o.value,2),s=l[0],c=l[1];c.pending?e.set(s,c):clearTimeout(c.timeout)}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}this.cache=e,this.lastInvalidation=Date.now()}},n.clear=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.cache.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;clearTimeout(o.timeout)}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.cache.clear(),this.lastInvalidation=0},e}(),nw=t(2511);function nb(){return(nb=(0,r._)(function(e,n,t,r){var i,o,l,s,c,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:if("open"!==e.status)return[2,{output:"JS Error\nchannel closed before command was run",error:f.uA.CHANNEL_CLOSED}];a.label=1;case 1:return a.trys.push([1,3,,4]),i="",o=e.onCommand(function(e){null!==e.output&&void 0!==e.output&&(i+=e.output)}),l=void 0,(s=Promise.race([new Promise(function(e){return l=setTimeout(e,9e4)}),e.request({exec:{env:t,args:n,noUserEnv:!0}})])).finally(function(){o(),clearTimeout(l)}),[4,s];case 2:if(void 0===(c=a.sent()))return nv.vF.error("Git request timed out.",(0,ec._)({appService:"git",command:n,gitEnv:JSON.stringify(t),TIMEOUT:9e4},r)),[2,{output:i,error:f.uA.TIMEOUT}];if(!c.ok&&c.channelClosed)return[2,{output:"JS Error\nchannel closed during command execution",error:f.uA.CHANNEL_CLOSED}];if(c.error||!c.ok)return[2,{output:u="".concat(c.error,"\n").concat(i),error:(0,f.sg)(u)}];return[2,{output:i,error:null}];case 3:return d=a.sent(),nh.v4(function(e){e.setTag("service","git"),e.setExtra("command",n),e.setExtra("env",t),r&&e.setExtra("options",r),nh.Cp(d)}),[2,{output:"JS Error\n".concat(String(d)),error:f.uA.UNKNOWN_NOT_GIT}];case 4:return[2]}})})).apply(this,arguments)}var nS=function(){function e(n){var t=this,i=n.container,o=n.getEnv,l=n.awaitPromise;(0,nf._)(this,e),this.cache=new ny(3e4,2e3),this.running=(0,ng.F)(!1),this.queue=[],i.openChannel({service:"exec"},function(e){var n,i,s=e.channel,c=(n=(0,r._)(function(e,n){var t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:if(0===e.length)throw Error("Expected at least one command");if(!l)return[3,2];return[4,l];case 1:i.sent(),i.label=2;case 2:return t=Date.now(),[4,function(e,n,t,r){return nb.apply(this,arguments)}(s,["bash","-c",Array.isArray(e)?e.join(" && "):e],o(),n)];case 3:if(r=i.sent(),(0,nw.L)(e,r,!1,t),r.error)return[2,{error:r.error}];return[2,{output:(null==n?void 0:n.verbatim)?r.output:r.output.trim(),error:null}]}})}),function(e,t){return n.apply(this,arguments)}),u=function(e,n){if(0===e.length)throw Error("Expected at least one command");var r=Array.isArray(e)?e.join(" && "):e;if(t.cache.has(r)){var i=t.cache.get(r);return i.then(function(n){(0,nw.L)(e,n,!0)}),i}var o=c(r,n);return t.cache.set(r,o),o},d=function(e,n){return t.cache.clear(),c(e,n)},p=(i=(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:if(!(t.queue.length>0)||"open"!==s.status)return[3,7];if(!(e=t.queue.shift()))return[3,6];if("read"!==e.type)return[3,2];return[4,e.fn(u)];case 1:case 3:return n.sent(),[3,6];case 2:if("write"!==e.type)return[3,4];return[4,e.fn(d)];case 4:return[4,e.fn(c)];case 5:n.sent(),n.label=6;case 6:return[3,0];case 7:return 0===t.queue.length&&t.running.set(!1),[2]}})}),function(){return i.apply(this,arguments)});return t.running.current&&p(),t.running.subscribe(function(e){e&&p()})})}var n=e.prototype;return n.add=function(e,n){var t,i=(0,nm.A)();return this.queue.push({type:n,fn:(t=(0,r._)(function(n){var t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e(n)];case 1:return t=r.sent(),i.resolve(t),[2]}})}),function(e){return t.apply(this,arguments)})}),this.running.current||this.running.set(!0),i.promise},n.wrap=function(e,n){var t=this;if("function"!=typeof e)throw Error("Expected a function");return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.add(function(n){return e.apply(void 0,[n].concat((0,o._)(i)))},n)}},e}(),nY=t(38674),n_=t(33090),nA=".git";function nC(e){var n,t=e.container,l=e.fs,u=e.provideProfiles,p=void 0===u?nd:u,f=(0,nn.Ay)();f.setMaxListeners(1/0);var h=c(),m=!1,g=new Map,y=null,w=t.getContext(),b=(n=(0,r._)(function(e){var n,t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,p({defaultUsername:null==w||null==(n=w.currentUser)?void 0:n.username,defaultUserId:null==w||null==(t=w.currentUser)?void 0:t.id,onProfiles:function(n){var t=!0,r=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=(0,i._)(a.value,2),c=s[0],u=s[1];g.set(c,u),f.emit(d.J.NEW_PROFILE)}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}n.has(d.H.GITHUB)||g.delete(d.H.GITHUB);var p=g.get(d.H.REPLIT_DEFAULT),h=g.get(d.H.GITHUB);if(y&&!e&&(e=y.provider),e===d.H.GITHUB&&h)y=h;else{if(!p)return;y=p}f.emit(d.J.CHANGED_PROFILE)}})];case 1:return[2,r.sent()]}})}),function(e){return n.apply(this,arguments)}),Y=new nS({container:t,getEnv:function(){return h},awaitPromise:b(d.H.GITHUB)});f.on(d.J.FS_CHANGE,function(){return Y.cache.invalidate()}),f.on(d.J.FORCED_REFRESH,function(){return Y.cache.invalidate()}),f.on(d.J.NEW_PROFILE,function(){return Y.cache.invalidate()}),f.on(d.J.CHANGED_PROFILE,function(){return Y.cache.invalidate()});var A=function(){var e,n=t.getContext(),r=null==n||null==(e=n.currentUser)?void 0:e.id;if(null!=r){var i="[init]\ndefaultBranch = main\n[user]\n";""!==h.GIT_AUTHOR_EMAIL&&(i+="email = ".concat(h.GIT_AUTHOR_EMAIL.replace(/'/g,"'\"'\"'"),"\n")),""!==h.GIT_AUTHOR_NAME&&(i+="name = ".concat(h.GIT_AUTHOR_NAME.replace(/'/g,"'\"'\"'"),"\n"));var o="/run/replit/user/".concat(r,"/.config/git");null!=r&&t.exec("bash","-c","tmpf=$(mktemp); mkdir -p ".concat(o," && echo '").concat(i,'\' > "$tmpf" && mv "$tmpf" ').concat("".concat(o,"/config")))}};return t.onConnectionStateChanged(function(e){e===nt.KN.CONNECTED&&A()}),f.on(d.J.CHANGED_PROFILE,function(){null!=y&&(h=c({author:{username:y.name,email:y.email}}),A())}),{getEnv:function(){return h},getProfiles:function(){return Array.from(g.values())},hasProfile:function(e){return g.has(e)},getProfile:function(e){var n=g.get(e);if(!n)throw Error("Fetched a profile that has not been setup!");return n},addProfile:function(e){g.set(e.provider,e),f.emit(d.J.NEW_PROFILE)},getCurrentProfile:function(){return y},setCurrentProfile:function(e){var n=g.get(e);if(!n)throw Error("Can't set a non-existent profile!");y=n,h=c({author:{username:n.name,email:n.email}}),f.emit(d.J.CHANGED_PROFILE)},onProfileAdded:function(e){var n=function(){e(Array.from(g.values()))};return f.on(d.J.NEW_PROFILE,n),function(){f.off(d.J.NEW_PROFILE,n)}},onCurrentProfileChanged:function(e){var n=function(){e(y)};return f.on(d.J.CHANGED_PROFILE,n),function(){f.off(d.J.CHANGED_PROFILE,n)}},refreshProfiles:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preferredProvider;return b(e)},onRefresh:function(e){m||(!function(e,n,t){var i,l,c,u,p,f,h,m,g,v,y=!1,w=!1,b=(i=function(){return t.emit(d.J.FS_CHANGE)},u=(l={wait:1e3,cooldown:5e3,maxWait:5e3}).wait,p=l.cooldown,f=l.maxWait,h=null,m=!1,g=s()(function(e){return h=setTimeout(function(){return h=null},p),m=!1,c=i.apply(void 0,(0,o._)(e))},u,{maxWait:f}),(v=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return null!==h?c:(m||(m=!0),g(n))}).cancel=function(){null!==h?(clearTimeout(h),h=null):(g.cancel(),m=!1)},v.flush=function(){return null!==h?(clearTimeout(h),h=null,c):g.flush()},v.isPending=function(){return m},v.isInCooldown=function(){return null!==h},v);function S(){return(S=(0,r._)(function(){var t;return(0,a.YH)(this,function(r){return t=!0,n.watchDir(nY.Dl,{onChange:function(r){!y&&r.find(function(e){return e.filename===nA&&e.type===n_.pt.Directory})&&(function(){if(!y){y=!0;var t=!0;n.watchDir(nA,{onChange:function(){t?t=!1:b()},onMoveOrDelete:function(){y=!1,b()},onError:function(n,t){y=!1,RegExp(".+permission denied","im").test(n.message)||e.unrecoverableError(n,t)}})}}(),t||b()),t&&(t=!1)},onError:function(n,t){return e.unrecoverableError(n,t)}}),[2]})})).apply(this,arguments)}!function(){S.apply(this,arguments)}(),n.onStatusChange(function(e){y&&(e===n_.sn.Syncing&&b.isInCooldown()?w=!0:e===n_.sn.Clean&&(w||b(),w=!1))})}(t,l,f),m=!0);var n=function(){return e(d.J.FS_CHANGE)},i=function(){return e(d.J.FORCED_REFRESH)},c=function(){return e(d.J.NEW_PROFILE)},u=function(){return e(d.J.CHANGED_PROFILE)};return f.on(d.J.FS_CHANGE,n),f.on(d.J.FORCED_REFRESH,i),f.on(d.J.NEW_PROFILE,c),f.on(d.J.CHANGED_PROFILE,u),function(){f.off(d.J.FS_CHANGE,n),f.off(d.J.FORCED_REFRESH,i),f.off(d.J.NEW_PROFILE,c),f.off(d.J.CHANGED_PROFILE,u)}},forceRefresh:function(){f.emit(d.J.FORCED_REFRESH)},isBusy:function(){return Y.running.current},onBusyChange:function(e){var n=!1,t=s()(e,200);return Y.running.subscribe(function(e){n&&!e?(t(!1),n=!1):!n&&e&&(t(!0),n=!0)})},init:Y.wrap(S,"write"),isInitialized:Y.wrap(_,"read"),lsFiles:Y.wrap(C,"read"),status:Y.wrap(M,"read"),log:Y.wrap($,"read"),findDefaultBranches:Y.wrap(ee,"read"),listBranches:Y.wrap(et.A,"read"),setBranchUpstream:Y.wrap(er,"write"),stageFiles:Y.wrap(eo,"write"),commit:Y.wrap(el,"write"),switchBranch:Y.wrap(em,"write"),branchExists:Y.wrap(ep,"read"),createBranch:Y.wrap(ev,"write"),getRemotes:Y.wrap(ew,"read"),fetch:Y.wrap(eS,"write"),canMergeBranches:Y.wrap(e_,"read"),pull:Y.wrap(eC,"write"),push:Y.wrap(ex,"write"),getRepositoryState:Y.wrap(v,"read"),getFileContents:Y.wrap(eE,"read"),addRemote:Y.wrap(eI,"write"),removeRemote:Y.wrap(eF,"write"),setRemoteURL:Y.wrap(eL,"write"),getBranch:Y.wrap(eO,"read"),restoreFiles:Y.wrap(eH,"write"),lastFetched:Y.wrap(ez,"read"),merge:Y.wrap(eG,"write"),mergeContinue:Y.wrap(eZ,"write"),mergeAbort:Y.wrap(eq,"write"),getConflictingFiles:Y.wrap(eJ,"read"),getMergingRefs:Y.wrap(eX,"read"),getFilesForCommit:Y.wrap(e1.Ay,"read"),getCommit:Y.wrap(e4,"read"),restoreCommit:Y.wrap(e3.Ay,"write"),escapeHatchGitExecRead:Y.wrap(function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return e.apply(void 0,(0,o._)(t))},"read"),escapeHatchGitExecWrite:Y.wrap(function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return e.apply(void 0,(0,o._)(t))},"write"),getChangesBetweenCommits:Y.wrap(e9,"read")}}},99400:(e,n,t)=>{"use strict";t.d(n,{Y:()=>p});var r=t(81073),i=t(66890),o=t(18509),a=t(27023),l=t(36073),s=t(15493),c=t(71872),u=t(15149),d=(0,o.x)({bannerButton:{span:[a.wp.textAlign.left]}});function p(e){var n=e.deployability,t=e.isRedeploy,o=n.deploy,a=n.redeploy,p=t?a:o;return p.isAuthorized?null:p.code===i.S4P.RequiresActiveTeamsSubscription?(0,r.Y)(s.d,{href:"/teams/new",target:"_blank",text:"".concat(p.message," Click here to get started by creating a new organization."),colorway:"warning",iconLeft:(0,r.Y)(c.A,{}),iconRight:(0,r.Y)(u.A,{}),css:d.bannerButton}):(0,r.Y)(l.N,{text:p.message,colorway:"warning",icon:(0,r.Y)(c.A,{})})}},99403:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(81073),i=t(49384),o=t.n(i),a=t(67313),l=t(13843),s=t(96050),c=t(27023),u=t(85144),d=t(4616),p=t(85389);function f(){var e=(0,a.useRouter)(),n=(0,s.pE)("didMigrateToNix","boolean");return(0,r.Y)(u.a,{isOpen:n,onRequestClose:function(){(0,s.HQ)({router:e,params:[{mode:"delete",key:"didMigrateToNix"}]})},centered:!0,children:(0,r.FD)(p.S,{gap:16,children:[(0,r.Y)(d.Y9,{level:1,variant:"headerDefault",children:"We've upgraded your App!"}),(0,r.FD)(d.EY,{children:["Your App is now using"," ",(0,r.Y)(o(),{href:"https://blog.replit.com/nix",children:"the latest infrastructure"})," ","which unlocks powerful new features."]}),(0,r.FD)(p.D.ul,{css:c.wp.colWithGap(4),children:[(0,r.Y)(p.D.li,{children:(0,r.FD)(d.EY,{children:["•"," ",(0,r.Y)(o(),{href:l.ik.DEPENDENCY_MANAGEMENT,children:"Use 80,000+ system dependencies"})," ","(linux packages) out of the box."]})}),(0,r.Y)(p.D.li,{children:(0,r.FD)(d.EY,{children:["•"," ",(0,r.Y)(o(),{href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"Configure your App"})," ","with more capabilities."]})}),(0,r.Y)(p.D.li,{children:(0,r.FD)(d.EY,{children:["•"," ",(0,r.Y)(o(),{href:l.ik.DEPENDENCY_MANAGEMENT,children:"Check out this doc"})," ","for a deep dive."]})})]}),(0,r.FD)(d.EY,{variant:"small",css:{fontStyle:"italic"},children:["Any overwritten files have been backed up to the same file name with a .backup suffix. If you have any questions, please visit"," ",(0,r.Y)(o(),{href:"https://replit.com/community",children:"replit.com/community"})," ","to get help."]}),(0,r.Y)(d.EY,{multiline:!1,children:"Thank you for your patience"})]})})}},99866:(e,n,t)=>{"use strict";t.d(n,{A:()=>m});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),s=t(50175);function c(){var e=(0,a._)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=t(57829),f=t(74671),h=t(71424);function m(){var e,n,t,a,l,c,m,g=(0,r._)((e=(0,o._)({},u,void 0),s.n(d,e)),1)[0],v=(0,h.A)().fs,y=(a=(0,h.A)().container,c=(l=(0,r._)((0,i.useState)(null!=(t=null==(n=a.getContext())?void 0:n.repl)?t:null),2))[0],m=l[1],(0,i.useEffect)(function(){return a.onConnectionStateChanged(function(e){var n,t;e===f.KN.CONNECTED&&m(null!=(t=null==(n=a.getContext())?void 0:n.repl)?t:null)})},[m,a]),c),w=null==y?void 0:y.authorizations.editFileContents.isAuthorized,b=null==y?void 0:y.id;(0,i.useEffect)(function(){if(w&&b){var e=(0,p.A)(function(){return g({variables:{replId:b}})},{wait:6e4,maxWait:6e5}),n=v.onStatusChange(function(){e()});return function(){e.isScheduled()&&e.flush(),n()}}},[v,b,w,g])}}}]);
//# sourceMappingURL=4021-bc4b0622bd0896aa.js.map